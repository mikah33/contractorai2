function A3(s,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const n in a)if(n!=="default"&&!(n in s)){const i=Object.getOwnPropertyDescriptor(a,n);i&&Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:()=>a[n]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var kq=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gb(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function m3(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var t=s.default;if(typeof t=="function"){var r=function a(){var n=!1;try{n=this instanceof a}catch{}return n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(s).forEach(function(a){var n=Object.getOwnPropertyDescriptor(s,a);Object.defineProperty(r,a,n.get?n:{enumerable:!0,get:function(){return s[a]}})}),r}var u0={exports:{}},rm={},A0={exports:{}},ur={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv;function h3(){if(Dv)return ur;Dv=1;var s=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;function x(H){return H===null||typeof H!="object"?null:(H=h&&H[h]||H["@@iterator"],typeof H=="function"?H:null)}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function j(H,I,ee){this.props=H,this.context=I,this.refs=v,this.updater=ee||f}j.prototype.isReactComponent={},j.prototype.setState=function(H,I){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,I,"setState")},j.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function S(){}S.prototype=j.prototype;function C(H,I,ee){this.props=H,this.context=I,this.refs=v,this.updater=ee||f}var B=C.prototype=new S;B.constructor=C,b(B,j.prototype),B.isPureReactComponent=!0;var F=Array.isArray,Q=Object.prototype.hasOwnProperty,q={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function D(H,I,ee){var se,de={},re=null,z=null;if(I!=null)for(se in I.ref!==void 0&&(z=I.ref),I.key!==void 0&&(re=""+I.key),I)Q.call(I,se)&&!P.hasOwnProperty(se)&&(de[se]=I[se]);var ne=arguments.length-2;if(ne===1)de.children=ee;else if(1<ne){for(var Y=Array(ne),X=0;X<ne;X++)Y[X]=arguments[X+2];de.children=Y}if(H&&H.defaultProps)for(se in ne=H.defaultProps,ne)de[se]===void 0&&(de[se]=ne[se]);return{$$typeof:s,type:H,key:re,ref:z,props:de,_owner:q.current}}function _(H,I){return{$$typeof:s,type:H.type,key:I,ref:H.ref,props:H.props,_owner:H._owner}}function $(H){return typeof H=="object"&&H!==null&&H.$$typeof===s}function k(H){var I={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(ee){return I[ee]})}var L=/\/+/g;function E(H,I){return typeof H=="object"&&H!==null&&H.key!=null?k(""+H.key):I.toString(36)}function O(H,I,ee,se,de){var re=typeof H;(re==="undefined"||re==="boolean")&&(H=null);var z=!1;if(H===null)z=!0;else switch(re){case"string":case"number":z=!0;break;case"object":switch(H.$$typeof){case s:case t:z=!0}}if(z)return z=H,de=de(z),H=se===""?"."+E(z,0):se,F(de)?(ee="",H!=null&&(ee=H.replace(L,"$&/")+"/"),O(de,I,ee,"",function(X){return X})):de!=null&&($(de)&&(de=_(de,ee+(!de.key||z&&z.key===de.key?"":(""+de.key).replace(L,"$&/")+"/")+H)),I.push(de)),1;if(z=0,se=se===""?".":se+":",F(H))for(var ne=0;ne<H.length;ne++){re=H[ne];var Y=se+E(re,ne);z+=O(re,I,ee,Y,de)}else if(Y=x(H),typeof Y=="function")for(H=Y.call(H),ne=0;!(re=H.next()).done;)re=re.value,Y=se+E(re,ne++),z+=O(re,I,ee,Y,de);else if(re==="object")throw I=String(H),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return z}function le(H,I,ee){if(H==null)return H;var se=[],de=0;return O(H,se,"","",function(re){return I.call(ee,re,de++)}),se}function te(H){if(H._status===-1){var I=H._result;I=I(),I.then(function(ee){(H._status===0||H._status===-1)&&(H._status=1,H._result=ee)},function(ee){(H._status===0||H._status===-1)&&(H._status=2,H._result=ee)}),H._status===-1&&(H._status=0,H._result=I)}if(H._status===1)return H._result.default;throw H._result}var V={current:null},M={transition:null},ie={ReactCurrentDispatcher:V,ReactCurrentBatchConfig:M,ReactCurrentOwner:q};function K(){throw Error("act(...) is not supported in production builds of React.")}return ur.Children={map:le,forEach:function(H,I,ee){le(H,function(){I.apply(this,arguments)},ee)},count:function(H){var I=0;return le(H,function(){I++}),I},toArray:function(H){return le(H,function(I){return I})||[]},only:function(H){if(!$(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},ur.Component=j,ur.Fragment=r,ur.Profiler=n,ur.PureComponent=C,ur.StrictMode=a,ur.Suspense=d,ur.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,ur.act=K,ur.cloneElement=function(H,I,ee){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var se=b({},H.props),de=H.key,re=H.ref,z=H._owner;if(I!=null){if(I.ref!==void 0&&(re=I.ref,z=q.current),I.key!==void 0&&(de=""+I.key),H.type&&H.type.defaultProps)var ne=H.type.defaultProps;for(Y in I)Q.call(I,Y)&&!P.hasOwnProperty(Y)&&(se[Y]=I[Y]===void 0&&ne!==void 0?ne[Y]:I[Y])}var Y=arguments.length-2;if(Y===1)se.children=ee;else if(1<Y){ne=Array(Y);for(var X=0;X<Y;X++)ne[X]=arguments[X+2];se.children=ne}return{$$typeof:s,type:H.type,key:de,ref:re,props:se,_owner:z}},ur.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:i,_context:H},H.Consumer=H},ur.createElement=D,ur.createFactory=function(H){var I=D.bind(null,H);return I.type=H,I},ur.createRef=function(){return{current:null}},ur.forwardRef=function(H){return{$$typeof:l,render:H}},ur.isValidElement=$,ur.lazy=function(H){return{$$typeof:m,_payload:{_status:-1,_result:H},_init:te}},ur.memo=function(H,I){return{$$typeof:u,type:H,compare:I===void 0?null:I}},ur.startTransition=function(H){var I=M.transition;M.transition={};try{H()}finally{M.transition=I}},ur.unstable_act=K,ur.useCallback=function(H,I){return V.current.useCallback(H,I)},ur.useContext=function(H){return V.current.useContext(H)},ur.useDebugValue=function(){},ur.useDeferredValue=function(H){return V.current.useDeferredValue(H)},ur.useEffect=function(H,I){return V.current.useEffect(H,I)},ur.useId=function(){return V.current.useId()},ur.useImperativeHandle=function(H,I,ee){return V.current.useImperativeHandle(H,I,ee)},ur.useInsertionEffect=function(H,I){return V.current.useInsertionEffect(H,I)},ur.useLayoutEffect=function(H,I){return V.current.useLayoutEffect(H,I)},ur.useMemo=function(H,I){return V.current.useMemo(H,I)},ur.useReducer=function(H,I,ee){return V.current.useReducer(H,I,ee)},ur.useRef=function(H){return V.current.useRef(H)},ur.useState=function(H){return V.current.useState(H)},ur.useSyncExternalStore=function(H,I,ee){return V.current.useSyncExternalStore(H,I,ee)},ur.useTransition=function(){return V.current.useTransition()},ur.version="18.3.1",ur}var Mv;function _h(){return Mv||(Mv=1,A0.exports=h3()),A0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function f3(){if(Rv)return rm;Rv=1;var s=_h(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,n=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,u){var m,h={},x=null,f=null;u!==void 0&&(x=""+u),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(f=d.ref);for(m in d)a.call(d,m)&&!i.hasOwnProperty(m)&&(h[m]=d[m]);if(l&&l.defaultProps)for(m in d=l.defaultProps,d)h[m]===void 0&&(h[m]=d[m]);return{$$typeof:t,type:l,key:x,ref:f,props:h,_owner:n.current}}return rm.Fragment=r,rm.jsx=o,rm.jsxs=o,rm}var Qv;function g3(){return Qv||(Qv=1,u0.exports=f3()),u0.exports}var e=g3(),p=_h();const R5=Gb(p),p3=A3({__proto__:null,default:R5},[p]);var vf={},m0={exports:{}},In={},h0={exports:{}},f0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function x3(){return Ov||(Ov=1,(function(s){function t(M,ie){var K=M.length;M.push(ie);e:for(;0<K;){var H=K-1>>>1,I=M[H];if(0<n(I,ie))M[H]=ie,M[K]=I,K=H;else break e}}function r(M){return M.length===0?null:M[0]}function a(M){if(M.length===0)return null;var ie=M[0],K=M.pop();if(K!==ie){M[0]=K;e:for(var H=0,I=M.length,ee=I>>>1;H<ee;){var se=2*(H+1)-1,de=M[se],re=se+1,z=M[re];if(0>n(de,K))re<I&&0>n(z,de)?(M[H]=z,M[re]=K,H=re):(M[H]=de,M[se]=K,H=se);else if(re<I&&0>n(z,K))M[H]=z,M[re]=K,H=re;else break e}}return ie}function n(M,ie){var K=M.sortIndex-ie.sortIndex;return K!==0?K:M.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;s.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();s.unstable_now=function(){return o.now()-l}}var d=[],u=[],m=1,h=null,x=3,f=!1,b=!1,v=!1,j=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(M){for(var ie=r(u);ie!==null;){if(ie.callback===null)a(u);else if(ie.startTime<=M)a(u),ie.sortIndex=ie.expirationTime,t(d,ie);else break;ie=r(u)}}function F(M){if(v=!1,B(M),!b)if(r(d)!==null)b=!0,te(Q);else{var ie=r(u);ie!==null&&V(F,ie.startTime-M)}}function Q(M,ie){b=!1,v&&(v=!1,S(D),D=-1),f=!0;var K=x;try{for(B(ie),h=r(d);h!==null&&(!(h.expirationTime>ie)||M&&!k());){var H=h.callback;if(typeof H=="function"){h.callback=null,x=h.priorityLevel;var I=H(h.expirationTime<=ie);ie=s.unstable_now(),typeof I=="function"?h.callback=I:h===r(d)&&a(d),B(ie)}else a(d);h=r(d)}if(h!==null)var ee=!0;else{var se=r(u);se!==null&&V(F,se.startTime-ie),ee=!1}return ee}finally{h=null,x=K,f=!1}}var q=!1,P=null,D=-1,_=5,$=-1;function k(){return!(s.unstable_now()-$<_)}function L(){if(P!==null){var M=s.unstable_now();$=M;var ie=!0;try{ie=P(!0,M)}finally{ie?E():(q=!1,P=null)}}else q=!1}var E;if(typeof C=="function")E=function(){C(L)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,le=O.port2;O.port1.onmessage=L,E=function(){le.postMessage(null)}}else E=function(){j(L,0)};function te(M){P=M,q||(q=!0,E())}function V(M,ie){D=j(function(){M(s.unstable_now())},ie)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(M){M.callback=null},s.unstable_continueExecution=function(){b||f||(b=!0,te(Q))},s.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<M?Math.floor(1e3/M):5},s.unstable_getCurrentPriorityLevel=function(){return x},s.unstable_getFirstCallbackNode=function(){return r(d)},s.unstable_next=function(M){switch(x){case 1:case 2:case 3:var ie=3;break;default:ie=x}var K=x;x=ie;try{return M()}finally{x=K}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(M,ie){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var K=x;x=M;try{return ie()}finally{x=K}},s.unstable_scheduleCallback=function(M,ie,K){var H=s.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?H+K:H):K=H,M){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=K+I,M={id:m++,callback:ie,priorityLevel:M,startTime:K,expirationTime:I,sortIndex:-1},K>H?(M.sortIndex=K,t(u,M),r(d)===null&&M===r(u)&&(v?(S(D),D=-1):v=!0,V(F,K-H))):(M.sortIndex=I,t(d,M),b||f||(b=!0,te(Q))),M},s.unstable_shouldYield=k,s.unstable_wrapCallback=function(M){var ie=x;return function(){var K=x;x=ie;try{return M.apply(this,arguments)}finally{x=K}}}})(f0)),f0}var Hv;function b3(){return Hv||(Hv=1,h0.exports=x3()),h0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function y3(){if(qv)return In;qv=1;var s=_h(),t=b3();function r(c){for(var A="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)A+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,n={};function i(c,A){o(c,A),o(c+"Capture",A)}function o(c,A){for(n[c]=A,c=0;c<A.length;c++)a.add(A[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},h={};function x(c){return d.call(h,c)?!0:d.call(m,c)?!1:u.test(c)?h[c]=!0:(m[c]=!0,!1)}function f(c,A,g,w){if(g!==null&&g.type===0)return!1;switch(typeof A){case"function":case"symbol":return!0;case"boolean":return w?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function b(c,A,g,w){if(A===null||typeof A>"u"||f(c,A,g,w))return!0;if(w)return!1;if(g!==null)switch(g.type){case 3:return!A;case 4:return A===!1;case 5:return isNaN(A);case 6:return isNaN(A)||1>A}return!1}function v(c,A,g,w,T,Z,xe){this.acceptsBooleans=A===2||A===3||A===4,this.attributeName=w,this.attributeNamespace=T,this.mustUseProperty=g,this.propertyName=c,this.type=A,this.sanitizeURL=Z,this.removeEmptyString=xe}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){j[c]=new v(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var A=c[0];j[A]=new v(A,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){j[c]=new v(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){j[c]=new v(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){j[c]=new v(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){j[c]=new v(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){j[c]=new v(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){j[c]=new v(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){j[c]=new v(c,5,!1,c.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function C(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var A=c.replace(S,C);j[A]=new v(A,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var A=c.replace(S,C);j[A]=new v(A,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var A=c.replace(S,C);j[A]=new v(A,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){j[c]=new v(c,1,!1,c.toLowerCase(),null,!1,!1)}),j.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){j[c]=new v(c,1,!1,c.toLowerCase(),null,!0,!0)});function B(c,A,g,w){var T=j.hasOwnProperty(A)?j[A]:null;(T!==null?T.type!==0:w||!(2<A.length)||A[0]!=="o"&&A[0]!=="O"||A[1]!=="n"&&A[1]!=="N")&&(b(A,g,T,w)&&(g=null),w||T===null?x(A)&&(g===null?c.removeAttribute(A):c.setAttribute(A,""+g)):T.mustUseProperty?c[T.propertyName]=g===null?T.type===3?!1:"":g:(A=T.attributeName,w=T.attributeNamespace,g===null?c.removeAttribute(A):(T=T.type,g=T===3||T===4&&g===!0?"":""+g,w?c.setAttributeNS(w,A,g):c.setAttribute(A,g))))}var F=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),q=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),$=Symbol.for("react.provider"),k=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),le=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),V=Symbol.for("react.offscreen"),M=Symbol.iterator;function ie(c){return c===null||typeof c!="object"?null:(c=M&&c[M]||c["@@iterator"],typeof c=="function"?c:null)}var K=Object.assign,H;function I(c){if(H===void 0)try{throw Error()}catch(g){var A=g.stack.trim().match(/\n( *(at )?)/);H=A&&A[1]||""}return`
`+H+c}var ee=!1;function se(c,A){if(!c||ee)return"";ee=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(A)if(A=function(){throw Error()},Object.defineProperty(A.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(A,[])}catch(Xe){var w=Xe}Reflect.construct(c,[],A)}else{try{A.call()}catch(Xe){w=Xe}c.call(A.prototype)}else{try{throw Error()}catch(Xe){w=Xe}c()}}catch(Xe){if(Xe&&w&&typeof Xe.stack=="string"){for(var T=Xe.stack.split(`
`),Z=w.stack.split(`
`),xe=T.length-1,Pe=Z.length-1;1<=xe&&0<=Pe&&T[xe]!==Z[Pe];)Pe--;for(;1<=xe&&0<=Pe;xe--,Pe--)if(T[xe]!==Z[Pe]){if(xe!==1||Pe!==1)do if(xe--,Pe--,0>Pe||T[xe]!==Z[Pe]){var Me=`
`+T[xe].replace(" at new "," at ");return c.displayName&&Me.includes("<anonymous>")&&(Me=Me.replace("<anonymous>",c.displayName)),Me}while(1<=xe&&0<=Pe);break}}}finally{ee=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?I(c):""}function de(c){switch(c.tag){case 5:return I(c.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return c=se(c.type,!1),c;case 11:return c=se(c.type.render,!1),c;case 1:return c=se(c.type,!0),c;default:return""}}function re(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case P:return"Fragment";case q:return"Portal";case _:return"Profiler";case D:return"StrictMode";case E:return"Suspense";case O:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case k:return(c.displayName||"Context")+".Consumer";case $:return(c._context.displayName||"Context")+".Provider";case L:var A=c.render;return c=c.displayName,c||(c=A.displayName||A.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case le:return A=c.displayName||null,A!==null?A:re(c.type)||"Memo";case te:A=c._payload,c=c._init;try{return re(c(A))}catch{}}return null}function z(c){var A=c.type;switch(c.tag){case 24:return"Cache";case 9:return(A.displayName||"Context")+".Consumer";case 10:return(A._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=A.render,c=c.displayName||c.name||"",A.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return A;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(A);case 8:return A===D?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof A=="function")return A.displayName||A.name||null;if(typeof A=="string")return A}return null}function ne(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Y(c){var A=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(A==="checkbox"||A==="radio")}function X(c){var A=Y(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,A),w=""+c[A];if(!c.hasOwnProperty(A)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var T=g.get,Z=g.set;return Object.defineProperty(c,A,{configurable:!0,get:function(){return T.call(this)},set:function(xe){w=""+xe,Z.call(this,xe)}}),Object.defineProperty(c,A,{enumerable:g.enumerable}),{getValue:function(){return w},setValue:function(xe){w=""+xe},stopTracking:function(){c._valueTracker=null,delete c[A]}}}}function ye(c){c._valueTracker||(c._valueTracker=X(c))}function pe(c){if(!c)return!1;var A=c._valueTracker;if(!A)return!0;var g=A.getValue(),w="";return c&&(w=Y(c)?c.checked?"true":"false":c.value),c=w,c!==g?(A.setValue(c),!0):!1}function Ce(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function je(c,A){var g=A.checked;return K({},A,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function ce(c,A){var g=A.defaultValue==null?"":A.defaultValue,w=A.checked!=null?A.checked:A.defaultChecked;g=ne(A.value!=null?A.value:g),c._wrapperState={initialChecked:w,initialValue:g,controlled:A.type==="checkbox"||A.type==="radio"?A.checked!=null:A.value!=null}}function Te(c,A){A=A.checked,A!=null&&B(c,"checked",A,!1)}function We(c,A){Te(c,A);var g=ne(A.value),w=A.type;if(g!=null)w==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(w==="submit"||w==="reset"){c.removeAttribute("value");return}A.hasOwnProperty("value")?U(c,A.type,g):A.hasOwnProperty("defaultValue")&&U(c,A.type,ne(A.defaultValue)),A.checked==null&&A.defaultChecked!=null&&(c.defaultChecked=!!A.defaultChecked)}function Le(c,A,g){if(A.hasOwnProperty("value")||A.hasOwnProperty("defaultValue")){var w=A.type;if(!(w!=="submit"&&w!=="reset"||A.value!==void 0&&A.value!==null))return;A=""+c._wrapperState.initialValue,g||A===c.value||(c.value=A),c.defaultValue=A}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function U(c,A,g){(A!=="number"||Ce(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var fe=Array.isArray;function Se(c,A,g,w){if(c=c.options,A){A={};for(var T=0;T<g.length;T++)A["$"+g[T]]=!0;for(g=0;g<c.length;g++)T=A.hasOwnProperty("$"+c[g].value),c[g].selected!==T&&(c[g].selected=T),T&&w&&(c[g].defaultSelected=!0)}else{for(g=""+ne(g),A=null,T=0;T<c.length;T++){if(c[T].value===g){c[T].selected=!0,w&&(c[T].defaultSelected=!0);return}A!==null||c[T].disabled||(A=c[T])}A!==null&&(A.selected=!0)}}function Re(c,A){if(A.dangerouslySetInnerHTML!=null)throw Error(r(91));return K({},A,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function G(c,A){var g=A.value;if(g==null){if(g=A.children,A=A.defaultValue,g!=null){if(A!=null)throw Error(r(92));if(fe(g)){if(1<g.length)throw Error(r(93));g=g[0]}A=g}A==null&&(A=""),g=A}c._wrapperState={initialValue:ne(g)}}function ue(c,A){var g=ne(A.value),w=ne(A.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),A.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),w!=null&&(c.defaultValue=""+w)}function ge(c){var A=c.textContent;A===c._wrapperState.initialValue&&A!==""&&A!==null&&(c.value=A)}function oe(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function J(c,A){return c==null||c==="http://www.w3.org/1999/xhtml"?oe(A):c==="http://www.w3.org/2000/svg"&&A==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var Ae,Fe=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(A,g,w,T){MSApp.execUnsafeLocalFunction(function(){return c(A,g,w,T)})}:c})(function(c,A){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=A;else{for(Ae=Ae||document.createElement("div"),Ae.innerHTML="<svg>"+A.valueOf().toString()+"</svg>",A=Ae.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;A.firstChild;)c.appendChild(A.firstChild)}});function Qe(c,A){if(A){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=A;return}}c.textContent=A}var Ie={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},et=["Webkit","ms","Moz","O"];Object.keys(Ie).forEach(function(c){et.forEach(function(A){A=A+c.charAt(0).toUpperCase()+c.substring(1),Ie[A]=Ie[c]})});function ot(c,A,g){return A==null||typeof A=="boolean"||A===""?"":g||typeof A!="number"||A===0||Ie.hasOwnProperty(c)&&Ie[c]?(""+A).trim():A+"px"}function lt(c,A){c=c.style;for(var g in A)if(A.hasOwnProperty(g)){var w=g.indexOf("--")===0,T=ot(g,A[g],w);g==="float"&&(g="cssFloat"),w?c.setProperty(g,T):c[g]=T}}var vt=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ct(c,A){if(A){if(vt[c]&&(A.children!=null||A.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(A.dangerouslySetInnerHTML!=null){if(A.children!=null)throw Error(r(60));if(typeof A.dangerouslySetInnerHTML!="object"||!("__html"in A.dangerouslySetInnerHTML))throw Error(r(61))}if(A.style!=null&&typeof A.style!="object")throw Error(r(62))}}function bt(c,A){if(c.indexOf("-")===-1)return typeof A.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ut=null;function jt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var qe=null,ht=null,yt=null;function ft(c){if(c=$l(c)){if(typeof qe!="function")throw Error(r(280));var A=c.stateNode;A&&(A=ad(A),qe(c.stateNode,c.type,A))}}function Qt(c){ht?yt?yt.push(c):yt=[c]:ht=c}function br(){if(ht){var c=ht,A=yt;if(yt=ht=null,ft(c),A)for(c=0;c<A.length;c++)ft(A[c])}}function Wt(c,A){return c(A)}function pr(){}var Gr=!1;function Dt(c,A,g){if(Gr)return c(A,g);Gr=!0;try{return Wt(c,A,g)}finally{Gr=!1,(ht!==null||yt!==null)&&(pr(),br())}}function ts(c,A){var g=c.stateNode;if(g===null)return null;var w=ad(g);if(w===null)return null;g=w[A];e:switch(A){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,A,typeof g));return g}var Ps=!1;if(l)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{Ps=!1}function ha(c,A,g,w,T,Z,xe,Pe,Me){var Xe=Array.prototype.slice.call(arguments,3);try{A.apply(g,Xe)}catch(At){this.onError(At)}}var cr=!1,Qr=null,is=!1,wn=null,ni={onError:function(c){cr=!0,Qr=c}};function Oa(c,A,g,w,T,Z,xe,Pe,Me){cr=!1,Qr=null,ha.apply(ni,arguments)}function jn(c,A,g,w,T,Z,xe,Pe,Me){if(Oa.apply(this,arguments),cr){if(cr){var Xe=Qr;cr=!1,Qr=null}else throw Error(r(198));is||(is=!0,wn=Xe)}}function zs(c){var A=c,g=c;if(c.alternate)for(;A.return;)A=A.return;else{c=A;do A=c,(A.flags&4098)!==0&&(g=A.return),c=A.return;while(c)}return A.tag===3?g:null}function Ha(c){if(c.tag===13){var A=c.memoizedState;if(A===null&&(c=c.alternate,c!==null&&(A=c.memoizedState)),A!==null)return A.dehydrated}return null}function or(c){if(zs(c)!==c)throw Error(r(188))}function Wr(c){var A=c.alternate;if(!A){if(A=zs(c),A===null)throw Error(r(188));return A!==c?null:c}for(var g=c,w=A;;){var T=g.return;if(T===null)break;var Z=T.alternate;if(Z===null){if(w=T.return,w!==null){g=w;continue}break}if(T.child===Z.child){for(Z=T.child;Z;){if(Z===g)return or(T),c;if(Z===w)return or(T),A;Z=Z.sibling}throw Error(r(188))}if(g.return!==w.return)g=T,w=Z;else{for(var xe=!1,Pe=T.child;Pe;){if(Pe===g){xe=!0,g=T,w=Z;break}if(Pe===w){xe=!0,w=T,g=Z;break}Pe=Pe.sibling}if(!xe){for(Pe=Z.child;Pe;){if(Pe===g){xe=!0,g=Z,w=T;break}if(Pe===w){xe=!0,w=Z,g=T;break}Pe=Pe.sibling}if(!xe)throw Error(r(189))}}if(g.alternate!==w)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:A}function fs(c){return c=Wr(c),c!==null?mn(c):null}function mn(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var A=mn(c);if(A!==null)return A;c=c.sibling}return null}var _i=t.unstable_scheduleCallback,Hn=t.unstable_cancelCallback,Ho=t.unstable_shouldYield,Sl=t.unstable_requestPaint,Ir=t.unstable_now,qo=t.unstable_getCurrentPriorityLevel,Pi=t.unstable_ImmediatePriority,aa=t.unstable_UserBlockingPriority,ii=t.unstable_NormalPriority,mo=t.unstable_LowPriority,ho=t.unstable_IdlePriority,qa=null,hn=null;function Wd(c){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(qa,c,void 0,(c.current.flags&128)===128)}catch{}}var fa=Math.clz32?Math.clz32:Kd,kA=Math.log,Ns=Math.LN2;function Kd(c){return c>>>=0,c===0?32:31-(kA(c)/Ns|0)|0}var $o=64,Nn=4194304;function qn(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function $a(c,A){var g=c.pendingLanes;if(g===0)return 0;var w=0,T=c.suspendedLanes,Z=c.pingedLanes,xe=g&268435455;if(xe!==0){var Pe=xe&~T;Pe!==0?w=qn(Pe):(Z&=xe,Z!==0&&(w=qn(Z)))}else xe=g&~T,xe!==0?w=qn(xe):Z!==0&&(w=qn(Z));if(w===0)return 0;if(A!==0&&A!==w&&(A&T)===0&&(T=w&-w,Z=A&-A,T>=Z||T===16&&(Z&4194240)!==0))return A;if((w&4)!==0&&(w|=g&16),A=c.entangledLanes,A!==0)for(c=c.entanglements,A&=w;0<A;)g=31-fa(A),T=1<<g,w|=c[g],A&=~T;return w}function Wo(c,A){switch(c){case 1:case 2:case 4:return A+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return A+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gs(c,A){for(var g=c.suspendedLanes,w=c.pingedLanes,T=c.expirationTimes,Z=c.pendingLanes;0<Z;){var xe=31-fa(Z),Pe=1<<xe,Me=T[xe];Me===-1?((Pe&g)===0||(Pe&w)!==0)&&(T[xe]=Wo(Pe,A)):Me<=A&&(c.expiredLanes|=Pe),Z&=~Pe}}function Ko(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function zd(){var c=$o;return $o<<=1,($o&4194240)===0&&($o=64),c}function Oc(c){for(var A=[],g=0;31>g;g++)A.push(c);return A}function zo(c,A,g){c.pendingLanes|=A,A!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,A=31-fa(A),c[A]=g}function oi(c,A){var g=c.pendingLanes&~A;c.pendingLanes=A,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=A,c.mutableReadLanes&=A,c.entangledLanes&=A,A=c.entanglements;var w=c.eventTimes;for(c=c.expirationTimes;0<g;){var T=31-fa(g),Z=1<<T;A[T]=0,w[T]=-1,c[T]=-1,g&=~Z}}function Bl(c,A){var g=c.entangledLanes|=A;for(c=c.entanglements;g;){var w=31-fa(g),T=1<<w;T&A|c[w]&A&&(c[w]|=A),g&=~T}}var xr=0;function Ii(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var kl,Hc,Gd,Vd,Fl,Ui=!1,$n=[],li=null,Wa=null,Cn=null,Kt=new Map,Go=new Map,ci=[],FA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yd(c,A){switch(c){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":Wa=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Kt.delete(A.pointerId);break;case"gotpointercapture":case"lostpointercapture":Go.delete(A.pointerId)}}function fn(c,A,g,w,T,Z){return c===null||c.nativeEvent!==Z?(c={blockedOn:A,domEventName:g,eventSystemFlags:w,nativeEvent:Z,targetContainers:[T]},A!==null&&(A=$l(A),A!==null&&Hc(A)),c):(c.eventSystemFlags|=w,A=c.targetContainers,T!==null&&A.indexOf(T)===-1&&A.push(T),c)}function Li(c,A,g,w,T){switch(A){case"focusin":return li=fn(li,c,A,g,w,T),!0;case"dragenter":return Wa=fn(Wa,c,A,g,w,T),!0;case"mouseover":return Cn=fn(Cn,c,A,g,w,T),!0;case"pointerover":var Z=T.pointerId;return Kt.set(Z,fn(Kt.get(Z)||null,c,A,g,w,T)),!0;case"gotpointercapture":return Z=T.pointerId,Go.set(Z,fn(Go.get(Z)||null,c,A,g,w,T)),!0}return!1}function Jd(c){var A=No(c.target);if(A!==null){var g=zs(A);if(g!==null){if(A=g.tag,A===13){if(A=Ha(g),A!==null){c.blockedOn=A,Fl(c.priority,function(){Gd(g)});return}}else if(A===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function El(c){if(c.blockedOn!==null)return!1;for(var A=c.targetContainers;0<A.length;){var g=Yo(c.domEventName,c.eventSystemFlags,A[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var w=new g.constructor(g.type,g);Ut=w,g.target.dispatchEvent(w),Ut=null}else return A=$l(g),A!==null&&Hc(A),c.blockedOn=g,!1;A.shift()}return!0}function Vo(c,A,g){El(c)&&g.delete(A)}function qc(){Ui=!1,li!==null&&El(li)&&(li=null),Wa!==null&&El(Wa)&&(Wa=null),Cn!==null&&El(Cn)&&(Cn=null),Kt.forEach(Vo),Go.forEach(Vo)}function Wn(c,A){c.blockedOn===A&&(c.blockedOn=null,Ui||(Ui=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,qc)))}function di(c){function A(T){return Wn(T,c)}if(0<$n.length){Wn($n[0],c);for(var g=1;g<$n.length;g++){var w=$n[g];w.blockedOn===c&&(w.blockedOn=null)}}for(li!==null&&Wn(li,c),Wa!==null&&Wn(Wa,c),Cn!==null&&Wn(Cn,c),Kt.forEach(A),Go.forEach(A),g=0;g<ci.length;g++)w=ci[g],w.blockedOn===c&&(w.blockedOn=null);for(;0<ci.length&&(g=ci[0],g.blockedOn===null);)Jd(g),g.blockedOn===null&&ci.shift()}var Kn=F.ReactCurrentBatchConfig,_l=!0;function $c(c,A,g,w){var T=xr,Z=Kn.transition;Kn.transition=null;try{xr=1,Ti(c,A,g,w)}finally{xr=T,Kn.transition=Z}}function Wc(c,A,g,w){var T=xr,Z=Kn.transition;Kn.transition=null;try{xr=4,Ti(c,A,g,w)}finally{xr=T,Kn.transition=Z}}function Ti(c,A,g,w){if(_l){var T=Yo(c,A,g,w);if(T===null)td(c,A,w,ui,g),Yd(c,w);else if(Li(T,c,A,g,w))w.stopPropagation();else if(Yd(c,w),A&4&&-1<FA.indexOf(c)){for(;T!==null;){var Z=$l(T);if(Z!==null&&kl(Z),Z=Yo(c,A,g,w),Z===null&&td(c,A,w,ui,g),Z===T)break;T=Z}T!==null&&w.stopPropagation()}else td(c,A,w,null,g)}}var ui=null;function Yo(c,A,g,w){if(ui=null,c=jt(w),c=No(c),c!==null)if(A=zs(c),A===null)c=null;else if(g=A.tag,g===13){if(c=Ha(A),c!==null)return c;c=null}else if(g===3){if(A.stateNode.current.memoizedState.isDehydrated)return A.tag===3?A.stateNode.containerInfo:null;c=null}else A!==c&&(c=null);return ui=c,null}function Jo(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qo()){case Pi:return 1;case aa:return 4;case ii:case mo:return 16;case ho:return 536870912;default:return 16}default:return 16}}var Sn=null,Di=null,fo=null;function Pl(){if(fo)return fo;var c,A=Di,g=A.length,w,T="value"in Sn?Sn.value:Sn.textContent,Z=T.length;for(c=0;c<g&&A[c]===T[c];c++);var xe=g-c;for(w=1;w<=xe&&A[g-w]===T[Z-w];w++);return fo=T.slice(c,1<w?1-w:void 0)}function ga(c){var A=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&A===13&&(c=13)):c=A,c===10&&(c=13),32<=c||c===13?c:0}function gn(){return!0}function R(){return!1}function me(c){function A(g,w,T,Z,xe){this._reactName=g,this._targetInst=T,this.type=w,this.nativeEvent=Z,this.target=xe,this.currentTarget=null;for(var Pe in c)c.hasOwnProperty(Pe)&&(g=c[Pe],this[Pe]=g?g(Z):Z[Pe]);return this.isDefaultPrevented=(Z.defaultPrevented!=null?Z.defaultPrevented:Z.returnValue===!1)?gn:R,this.isPropagationStopped=R,this}return K(A.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=gn)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=gn)},persist:function(){},isPersistent:gn}),A}var Ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ue=me(Ee),$e=K({},Ee,{view:0,detail:0}),at=me($e),dt,kt,Et,Ht=K({},$e,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:po,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Et&&(Et&&c.type==="mousemove"?(dt=c.screenX-Et.screenX,kt=c.screenY-Et.screenY):kt=dt=0,Et=c),dt)},movementY:function(c){return"movementY"in c?c.movementY:kt}}),er=me(Ht),yr=K({},Ht,{dataTransfer:0}),rs=me(yr),Cs=K({},$e,{relatedTarget:0}),Cr=me(Cs),Is=K({},Ee,{animationName:0,elapsedTime:0,pseudoElement:0}),Ss=me(Is),na=K({},Ee,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),Mi=me(na),go=K({},Ee,{data:0}),Xd=me(go),Zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kc(c){var A=this.nativeEvent;return A.getModifierState?A.getModifierState(c):(c=zn[c])?!!A[c]:!1}function po(){return Kc}var xo=K({},$e,{key:function(c){if(c.key){var A=Zd[c.key]||c.key;if(A!=="Unidentified")return A}return c.type==="keypress"?(c=ga(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Xo[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:po,charCode:function(c){return c.type==="keypress"?ga(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?ga(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),Gs=me(xo),Ri=K({},Ht,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ai=me(Ri),Il=K({},$e,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:po}),zc=me(Il),Fa=K({},Ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),eu=me(Fa),Ul=K({},Ht,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),tu=me(Ul),Us=[9,13,27,32],Ka=l&&"CompositionEvent"in window,Qi=null;l&&"documentMode"in document&&(Qi=document.documentMode);var Gc=l&&"TextEvent"in window&&!Qi,Oi=l&&(!Ka||Qi&&8<Qi&&11>=Qi),Zo=" ",Ea=!1;function _a(c,A){switch(c){case"keyup":return Us.indexOf(A.keyCode)!==-1;case"keydown":return A.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bo(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Pa=!1;function yo(c,A){switch(c){case"compositionend":return bo(A);case"keypress":return A.which!==32?null:(Ea=!0,Zo);case"textInput":return c=A.data,c===Zo&&Ea?null:c;default:return null}}function Vc(c,A){if(Pa)return c==="compositionend"||!Ka&&_a(c,A)?(c=Pl(),fo=Di=Sn=null,Pa=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(A.ctrlKey||A.altKey||A.metaKey)||A.ctrlKey&&A.altKey){if(A.char&&1<A.char.length)return A.char;if(A.which)return String.fromCharCode(A.which)}return null;case"compositionend":return Oi&&A.locale!=="ko"?null:A.data;default:return null}}var vo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function os(c){var A=c&&c.nodeName&&c.nodeName.toLowerCase();return A==="input"?!!vo[c.type]:A==="textarea"}function ru(c,A,g,w){Qt(w),A=lu(A,"onChange"),0<A.length&&(g=new Ue("onChange","change",null,g,w),c.push({event:g,listeners:A}))}var za=null,Ga=null;function Ll(c){Zc(c,0)}function wo(c){var A=ol(c);if(pe(A))return c}function Tl(c,A){if(c==="change")return A}var el=!1;if(l){var Hi;if(l){var qi="oninput"in document;if(!qi){var mi=document.createElement("div");mi.setAttribute("oninput","return;"),qi=typeof mi.oninput=="function"}Hi=qi}else Hi=!1;el=Hi&&(!document.documentMode||9<document.documentMode)}function Dl(){za&&(za.detachEvent("onpropertychange",Va),Ga=za=null)}function Va(c){if(c.propertyName==="value"&&wo(Ga)){var A=[];ru(A,Ga,c,jt(c)),Dt(Ll,A)}}function hi(c,A,g){c==="focusin"?(Dl(),za=A,Ga=g,za.attachEvent("onpropertychange",Va)):c==="focusout"&&Dl()}function Or(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return wo(Ga)}function Hr(c,A){if(c==="click")return wo(A)}function ps(c,A){if(c==="input"||c==="change")return wo(A)}function xs(c,A){return c===A&&(c!==0||1/c===1/A)||c!==c&&A!==A}var Ls=typeof Object.is=="function"?Object.is:xs;function fi(c,A){if(Ls(c,A))return!0;if(typeof c!="object"||c===null||typeof A!="object"||A===null)return!1;var g=Object.keys(c),w=Object.keys(A);if(g.length!==w.length)return!1;for(w=0;w<g.length;w++){var T=g[w];if(!d.call(A,T)||!Ls(c[T],A[T]))return!1}return!0}function Gn(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Ml(c,A){var g=Gn(c);c=0;for(var w;g;){if(g.nodeType===3){if(w=c+g.textContent.length,c<=A&&w>=A)return{node:g,offset:A-c};c=w}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Gn(g)}}function EA(c,A){return c&&A?c===A?!0:c&&c.nodeType===3?!1:A&&A.nodeType===3?EA(c,A.parentNode):"contains"in c?c.contains(A):c.compareDocumentPosition?!!(c.compareDocumentPosition(A)&16):!1:!1}function _A(){for(var c=window,A=Ce();A instanceof c.HTMLIFrameElement;){try{var g=typeof A.contentWindow.location.href=="string"}catch{g=!1}if(g)c=A.contentWindow;else break;A=Ce(c.document)}return A}function su(c){var A=c&&c.nodeName&&c.nodeName.toLowerCase();return A&&(A==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||A==="textarea"||c.contentEditable==="true")}function Mh(c){var A=_A(),g=c.focusedElem,w=c.selectionRange;if(A!==g&&g&&g.ownerDocument&&EA(g.ownerDocument.documentElement,g)){if(w!==null&&su(g)){if(A=w.start,c=w.end,c===void 0&&(c=A),"selectionStart"in g)g.selectionStart=A,g.selectionEnd=Math.min(c,g.value.length);else if(c=(A=g.ownerDocument||document)&&A.defaultView||window,c.getSelection){c=c.getSelection();var T=g.textContent.length,Z=Math.min(w.start,T);w=w.end===void 0?Z:Math.min(w.end,T),!c.extend&&Z>w&&(T=w,w=Z,Z=T),T=Ml(g,Z);var xe=Ml(g,w);T&&xe&&(c.rangeCount!==1||c.anchorNode!==T.node||c.anchorOffset!==T.offset||c.focusNode!==xe.node||c.focusOffset!==xe.offset)&&(A=A.createRange(),A.setStart(T.node,T.offset),c.removeAllRanges(),Z>w?(c.addRange(A),c.extend(xe.node,xe.offset)):(A.setEnd(xe.node,xe.offset),c.addRange(A)))}}for(A=[],c=g;c=c.parentNode;)c.nodeType===1&&A.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<A.length;g++)c=A[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Rh=l&&"documentMode"in document&&11>=document.documentMode,tl=null,au=null,Rl=null,nu=!1;function PA(c,A,g){var w=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;nu||tl==null||tl!==Ce(w)||(w=tl,"selectionStart"in w&&su(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Rl&&fi(Rl,w)||(Rl=w,w=lu(au,"onSelect"),0<w.length&&(A=new Ue("onSelect","select",null,A,g),c.push({event:A,listeners:w}),A.target=tl)))}function Yc(c,A){var g={};return g[c.toLowerCase()]=A.toLowerCase(),g["Webkit"+c]="webkit"+A,g["Moz"+c]="moz"+A,g}var rl={animationend:Yc("Animation","AnimationEnd"),animationiteration:Yc("Animation","AnimationIteration"),animationstart:Yc("Animation","AnimationStart"),transitionend:Yc("Transition","TransitionEnd")},sl={},IA={};l&&(IA=document.createElement("div").style,"AnimationEvent"in window||(delete rl.animationend.animation,delete rl.animationiteration.animation,delete rl.animationstart.animation),"TransitionEvent"in window||delete rl.transitionend.transition);function Jc(c){if(sl[c])return sl[c];if(!rl[c])return c;var A=rl[c],g;for(g in A)if(A.hasOwnProperty(g)&&g in IA)return sl[c]=A[g];return c}var UA=Jc("animationend"),LA=Jc("animationiteration"),TA=Jc("animationstart"),DA=Jc("transitionend"),MA=new Map,RA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gi(c,A){MA.set(c,A),i(A,[c])}for(var Ql=0;Ql<RA.length;Ql++){var Ia=RA[Ql],Bn=Ia.toLowerCase(),iu=Ia[0].toUpperCase()+Ia.slice(1);gi(Bn,"on"+iu)}gi(UA,"onAnimationEnd"),gi(LA,"onAnimationIteration"),gi(TA,"onAnimationStart"),gi("dblclick","onDoubleClick"),gi("focusin","onFocus"),gi("focusout","onBlur"),gi(DA,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qh=new Set("cancel close invalid load scroll toggle".split(" ").concat(jo));function Xc(c,A,g){var w=c.type||"unknown-event";c.currentTarget=g,jn(w,A,void 0,c),c.currentTarget=null}function Zc(c,A){A=(A&4)!==0;for(var g=0;g<c.length;g++){var w=c[g],T=w.event;w=w.listeners;e:{var Z=void 0;if(A)for(var xe=w.length-1;0<=xe;xe--){var Pe=w[xe],Me=Pe.instance,Xe=Pe.currentTarget;if(Pe=Pe.listener,Me!==Z&&T.isPropagationStopped())break e;Xc(T,Pe,Xe),Z=Me}else for(xe=0;xe<w.length;xe++){if(Pe=w[xe],Me=Pe.instance,Xe=Pe.currentTarget,Pe=Pe.listener,Me!==Z&&T.isPropagationStopped())break e;Xc(T,Pe,Xe),Z=Me}}}if(is)throw c=wn,is=!1,wn=null,c}function Ur(c,A){var g=A[Ja];g===void 0&&(g=A[Ja]=new Set);var w=c+"__bubble";g.has(w)||(ed(A,c,2,!1),g.add(w))}function ou(c,A,g){var w=0;A&&(w|=4),ed(g,c,w,A)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function al(c){if(!c[Ol]){c[Ol]=!0,a.forEach(function(g){g!=="selectionchange"&&(Qh.has(g)||ou(g,!1,c),ou(g,!0,c))});var A=c.nodeType===9?c:c.ownerDocument;A===null||A[Ol]||(A[Ol]=!0,ou("selectionchange",!1,A))}}function ed(c,A,g,w){switch(Jo(A)){case 1:var T=$c;break;case 4:T=Wc;break;default:T=Ti}g=T.bind(null,A,g,c),T=void 0,!Ps||A!=="touchstart"&&A!=="touchmove"&&A!=="wheel"||(T=!0),w?T!==void 0?c.addEventListener(A,g,{capture:!0,passive:T}):c.addEventListener(A,g,!0):T!==void 0?c.addEventListener(A,g,{passive:T}):c.addEventListener(A,g,!1)}function td(c,A,g,w,T){var Z=w;if((A&1)===0&&(A&2)===0&&w!==null)e:for(;;){if(w===null)return;var xe=w.tag;if(xe===3||xe===4){var Pe=w.stateNode.containerInfo;if(Pe===T||Pe.nodeType===8&&Pe.parentNode===T)break;if(xe===4)for(xe=w.return;xe!==null;){var Me=xe.tag;if((Me===3||Me===4)&&(Me=xe.stateNode.containerInfo,Me===T||Me.nodeType===8&&Me.parentNode===T))return;xe=xe.return}for(;Pe!==null;){if(xe=No(Pe),xe===null)return;if(Me=xe.tag,Me===5||Me===6){w=Z=xe;continue e}Pe=Pe.parentNode}}w=w.return}Dt(function(){var Xe=Z,At=jt(g),mt=[];e:{var ut=MA.get(c);if(ut!==void 0){var Nt=Ue,It=c;switch(c){case"keypress":if(ga(g)===0)break e;case"keydown":case"keyup":Nt=Gs;break;case"focusin":It="focus",Nt=Cr;break;case"focusout":It="blur",Nt=Cr;break;case"beforeblur":case"afterblur":Nt=Cr;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Nt=er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Nt=rs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Nt=zc;break;case UA:case LA:case TA:Nt=Ss;break;case DA:Nt=eu;break;case"scroll":Nt=at;break;case"wheel":Nt=tu;break;case"copy":case"cut":case"paste":Nt=Mi;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Nt=Ai}var Tt=(A&4)!==0,Ms=!Tt&&c==="scroll",Ge=Tt?ut!==null?ut+"Capture":null:ut;Tt=[];for(var He=Xe,Je;He!==null;){Je=He;var gt=Je.stateNode;if(Je.tag===5&&gt!==null&&(Je=gt,Ge!==null&&(gt=ts(He,Ge),gt!=null&&Tt.push(rd(He,gt,Je)))),Ms)break;He=He.return}0<Tt.length&&(ut=new Nt(ut,It,null,g,At),mt.push({event:ut,listeners:Tt}))}}if((A&7)===0){e:{if(ut=c==="mouseover"||c==="pointerover",Nt=c==="mouseout"||c==="pointerout",ut&&g!==Ut&&(It=g.relatedTarget||g.fromElement)&&(No(It)||It[pa]))break e;if((Nt||ut)&&(ut=At.window===At?At:(ut=At.ownerDocument)?ut.defaultView||ut.parentWindow:window,Nt?(It=g.relatedTarget||g.toElement,Nt=Xe,It=It?No(It):null,It!==null&&(Ms=zs(It),It!==Ms||It.tag!==5&&It.tag!==6)&&(It=null)):(Nt=null,It=Xe),Nt!==It)){if(Tt=er,gt="onMouseLeave",Ge="onMouseEnter",He="mouse",(c==="pointerout"||c==="pointerover")&&(Tt=Ai,gt="onPointerLeave",Ge="onPointerEnter",He="pointer"),Ms=Nt==null?ut:ol(Nt),Je=It==null?ut:ol(It),ut=new Tt(gt,He+"leave",Nt,g,At),ut.target=Ms,ut.relatedTarget=Je,gt=null,No(At)===Xe&&(Tt=new Tt(Ge,He+"enter",It,g,At),Tt.target=Je,Tt.relatedTarget=Ms,gt=Tt),Ms=gt,Nt&&It)t:{for(Tt=Nt,Ge=It,He=0,Je=Tt;Je;Je=nl(Je))He++;for(Je=0,gt=Ge;gt;gt=nl(gt))Je++;for(;0<He-Je;)Tt=nl(Tt),He--;for(;0<Je-He;)Ge=nl(Ge),Je--;for(;He--;){if(Tt===Ge||Ge!==null&&Tt===Ge.alternate)break t;Tt=nl(Tt),Ge=nl(Ge)}Tt=null}else Tt=null;Nt!==null&&Oh(mt,ut,Nt,Tt,!1),It!==null&&Ms!==null&&Oh(mt,Ms,It,Tt,!0)}}e:{if(ut=Xe?ol(Xe):window,Nt=ut.nodeName&&ut.nodeName.toLowerCase(),Nt==="select"||Nt==="input"&&ut.type==="file")var Rt=Tl;else if(os(ut))if(el)Rt=ps;else{Rt=Or;var qt=hi}else(Nt=ut.nodeName)&&Nt.toLowerCase()==="input"&&(ut.type==="checkbox"||ut.type==="radio")&&(Rt=Hr);if(Rt&&(Rt=Rt(c,Xe))){ru(mt,Rt,g,At);break e}qt&&qt(c,ut,Xe),c==="focusout"&&(qt=ut._wrapperState)&&qt.controlled&&ut.type==="number"&&U(ut,"number",ut.value)}switch(qt=Xe?ol(Xe):window,c){case"focusin":(os(qt)||qt.contentEditable==="true")&&(tl=qt,au=Xe,Rl=null);break;case"focusout":Rl=au=tl=null;break;case"mousedown":nu=!0;break;case"contextmenu":case"mouseup":case"dragend":nu=!1,PA(mt,g,At);break;case"selectionchange":if(Rh)break;case"keydown":case"keyup":PA(mt,g,At)}var $t;if(Ka)e:{switch(c){case"compositionstart":var Yt="onCompositionStart";break e;case"compositionend":Yt="onCompositionEnd";break e;case"compositionupdate":Yt="onCompositionUpdate";break e}Yt=void 0}else Pa?_a(c,g)&&(Yt="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(Yt="onCompositionStart");Yt&&(Oi&&g.locale!=="ko"&&(Pa||Yt!=="onCompositionStart"?Yt==="onCompositionEnd"&&Pa&&($t=Pl()):(Sn=At,Di="value"in Sn?Sn.value:Sn.textContent,Pa=!0)),qt=lu(Xe,Yt),0<qt.length&&(Yt=new Xd(Yt,c,null,g,At),mt.push({event:Yt,listeners:qt}),$t?Yt.data=$t:($t=bo(g),$t!==null&&(Yt.data=$t)))),($t=Gc?yo(c,g):Vc(c,g))&&(Xe=lu(Xe,"onBeforeInput"),0<Xe.length&&(At=new Xd("onBeforeInput","beforeinput",null,g,At),mt.push({event:At,listeners:Xe}),At.data=$t))}Zc(mt,A)})}function rd(c,A,g){return{instance:c,listener:A,currentTarget:g}}function lu(c,A){for(var g=A+"Capture",w=[];c!==null;){var T=c,Z=T.stateNode;T.tag===5&&Z!==null&&(T=Z,Z=ts(c,g),Z!=null&&w.unshift(rd(c,Z,T)),Z=ts(c,A),Z!=null&&w.push(rd(c,Z,T))),c=c.return}return w}function nl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Oh(c,A,g,w,T){for(var Z=A._reactName,xe=[];g!==null&&g!==w;){var Pe=g,Me=Pe.alternate,Xe=Pe.stateNode;if(Me!==null&&Me===w)break;Pe.tag===5&&Xe!==null&&(Pe=Xe,T?(Me=ts(g,Z),Me!=null&&xe.unshift(rd(g,Me,Pe))):T||(Me=ts(g,Z),Me!=null&&xe.push(rd(g,Me,Pe)))),g=g.return}xe.length!==0&&c.push({event:A,listeners:xe})}var Cp=/\r\n?/g,Sp=/\u0000|\uFFFD/g;function Hh(c){return(typeof c=="string"?c:""+c).replace(Cp,`
`).replace(Sp,"")}function cu(c,A,g){if(A=Hh(A),Hh(c)!==A&&g)throw Error(r(425))}function Hl(){}var sd=null,il=null;function QA(c,A){return c==="textarea"||c==="noscript"||typeof A.children=="string"||typeof A.children=="number"||typeof A.dangerouslySetInnerHTML=="object"&&A.dangerouslySetInnerHTML!==null&&A.dangerouslySetInnerHTML.__html!=null}var OA=typeof setTimeout=="function"?setTimeout:void 0,qh=typeof clearTimeout=="function"?clearTimeout:void 0,$h=typeof Promise=="function"?Promise:void 0,Bp=typeof queueMicrotask=="function"?queueMicrotask:typeof $h<"u"?function(c){return $h.resolve(null).then(c).catch(kp)}:OA;function kp(c){setTimeout(function(){throw c})}function HA(c,A){var g=A,w=0;do{var T=g.nextSibling;if(c.removeChild(g),T&&T.nodeType===8)if(g=T.data,g==="/$"){if(w===0){c.removeChild(T),di(A);return}w--}else g!=="$"&&g!=="$?"&&g!=="$!"||w++;g=T}while(g);di(A)}function Ua(c){for(;c!=null;c=c.nextSibling){var A=c.nodeType;if(A===1||A===3)break;if(A===8){if(A=c.data,A==="$"||A==="$!"||A==="$?")break;if(A==="/$")return null}}return c}function kn(c){c=c.previousSibling;for(var A=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(A===0)return c;A--}else g==="/$"&&A++}c=c.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),pi="__reactFiber$"+Ya,ql="__reactProps$"+Ya,pa="__reactContainer$"+Ya,Ja="__reactEvents$"+Ya,Fp="__reactListeners$"+Ya,Ep="__reactHandles$"+Ya;function No(c){var A=c[pi];if(A)return A;for(var g=c.parentNode;g;){if(A=g[pa]||g[pi]){if(g=A.alternate,A.child!==null||g!==null&&g.child!==null)for(c=kn(c);c!==null;){if(g=c[pi])return g;c=kn(c)}return A}c=g,g=c.parentNode}return null}function $l(c){return c=c[pi]||c[pa],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function ol(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function ad(c){return c[ql]||null}var qA=[],$i=-1;function Vn(c){return{current:c}}function kr(c){0>$i||(c.current=qA[$i],qA[$i]=null,$i--)}function Er(c,A){$i++,qA[$i]=c.current,c.current=A}var Co={},ia=Vn(Co),Xa=Vn(!1),ll=Co;function Wl(c,A){var g=c.type.contextTypes;if(!g)return Co;var w=c.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===A)return w.__reactInternalMemoizedMaskedChildContext;var T={},Z;for(Z in g)T[Z]=A[Z];return w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=A,c.__reactInternalMemoizedMaskedChildContext=T),T}function Za(c){return c=c.childContextTypes,c!=null}function du(){kr(Xa),kr(ia)}function Wh(c,A,g){if(ia.current!==Co)throw Error(r(168));Er(ia,A),Er(Xa,g)}function $A(c,A,g){var w=c.stateNode;if(A=A.childContextTypes,typeof w.getChildContext!="function")return g;w=w.getChildContext();for(var T in w)if(!(T in A))throw Error(r(108,z(c)||"Unknown",T));return K({},g,w)}function cl(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Co,ll=ia.current,Er(ia,c),Er(Xa,Xa.current),!0}function Kh(c,A,g){var w=c.stateNode;if(!w)throw Error(r(169));g?(c=$A(c,A,ll),w.__reactInternalMemoizedMergedChildContext=c,kr(Xa),kr(ia),Er(ia,c)):kr(Xa),Er(Xa,g)}var Wi=null,nd=!1,y=!1;function N(c){Wi===null?Wi=[c]:Wi.push(c)}function W(c){nd=!0,N(c)}function ae(){if(!y&&Wi!==null){y=!0;var c=0,A=xr;try{var g=Wi;for(xr=1;c<g.length;c++){var w=g[c];do w=w(!0);while(w!==null)}Wi=null,nd=!1}catch(T){throw Wi!==null&&(Wi=Wi.slice(c+1)),_i(Pi,ae),T}finally{xr=A,y=!1}}return null}var he=[],be=0,ve=null,we=0,Ne=[],Be=0,De=null,ze=1,ke="";function Oe(c,A){he[be++]=we,he[be++]=ve,ve=c,we=A}function Ke(c,A,g){Ne[Be++]=ze,Ne[Be++]=ke,Ne[Be++]=De,De=c;var w=ze;c=ke;var T=32-fa(w)-1;w&=~(1<<T),g+=1;var Z=32-fa(A)+T;if(30<Z){var xe=T-T%5;Z=(w&(1<<xe)-1).toString(32),w>>=xe,T-=xe,ze=1<<32-fa(A)+T|g<<T|w,ke=Z+c}else ze=1<<Z|g<<T|w,ke=c}function rt(c){c.return!==null&&(Oe(c,1),Ke(c,1,0))}function Ye(c){for(;c===ve;)ve=he[--be],he[be]=null,we=he[--be],he[be]=null;for(;c===De;)De=Ne[--Be],Ne[Be]=null,ke=Ne[--Be],Ne[Be]=null,ze=Ne[--Be],Ne[Be]=null}var Ze=null,tt=null,nt=!1,it=null;function Mt(c,A){var g=wi(5,null,null,0);g.elementType="DELETED",g.stateNode=A,g.return=c,A=c.deletions,A===null?(c.deletions=[g],c.flags|=16):A.push(g)}function St(c,A){switch(c.tag){case 5:var g=c.type;return A=A.nodeType!==1||g.toLowerCase()!==A.nodeName.toLowerCase()?null:A,A!==null?(c.stateNode=A,Ze=c,tt=Ua(A.firstChild),!0):!1;case 6:return A=c.pendingProps===""||A.nodeType!==3?null:A,A!==null?(c.stateNode=A,Ze=c,tt=null,!0):!1;case 13:return A=A.nodeType!==8?null:A,A!==null?(g=De!==null?{id:ze,overflow:ke}:null,c.memoizedState={dehydrated:A,treeContext:g,retryLane:1073741824},g=wi(18,null,null,0),g.stateNode=A,g.return=c,c.child=g,Ze=c,tt=null,!0):!1;default:return!1}}function tr(c){return(c.mode&1)!==0&&(c.flags&128)===0}function _t(c){if(nt){var A=tt;if(A){var g=A;if(!St(c,A)){if(tr(c))throw Error(r(418));A=Ua(g.nextSibling);var w=Ze;A&&St(c,A)?Mt(w,g):(c.flags=c.flags&-4097|2,nt=!1,Ze=c)}}else{if(tr(c))throw Error(r(418));c.flags=c.flags&-4097|2,nt=!1,Ze=c}}}function dr(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ze=c}function ls(c){if(c!==Ze)return!1;if(!nt)return dr(c),nt=!0,!1;var A;if((A=c.tag!==3)&&!(A=c.tag!==5)&&(A=c.type,A=A!=="head"&&A!=="body"&&!QA(c.type,c.memoizedProps)),A&&(A=tt)){if(tr(c))throw rr(),Error(r(418));for(;A;)Mt(c,A),A=Ua(A.nextSibling)}if(dr(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,A=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(A===0){tt=Ua(c.nextSibling);break e}A--}else g!=="$"&&g!=="$!"&&g!=="$?"||A++}c=c.nextSibling}tt=null}}else tt=Ze?Ua(c.stateNode.nextSibling):null;return!0}function rr(){for(var c=tt;c;)c=Ua(c.nextSibling)}function Bt(){tt=Ze=null,nt=!1}function pt(c){it===null?it=[c]:it.push(c)}var bs=F.ReactCurrentBatchConfig;function Vt(c,A,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var w=g.stateNode}if(!w)throw Error(r(147,c));var T=w,Z=""+c;return A!==null&&A.ref!==null&&typeof A.ref=="function"&&A.ref._stringRef===Z?A.ref:(A=function(xe){var Pe=T.refs;xe===null?delete Pe[Z]:Pe[Z]=xe},A._stringRef=Z,A)}if(typeof c!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,c))}return c}function lr(c,A){throw c=Object.prototype.toString.call(A),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":c))}function qr(c){var A=c._init;return A(c._payload)}function Vs(c){function A(Ge,He){if(c){var Je=Ge.deletions;Je===null?(Ge.deletions=[He],Ge.flags|=16):Je.push(He)}}function g(Ge,He){if(!c)return null;for(;He!==null;)A(Ge,He),He=He.sibling;return null}function w(Ge,He){for(Ge=new Map;He!==null;)He.key!==null?Ge.set(He.key,He):Ge.set(He.index,He),He=He.sibling;return Ge}function T(Ge,He){return Ge=tc(Ge,He),Ge.index=0,Ge.sibling=null,Ge}function Z(Ge,He,Je){return Ge.index=Je,c?(Je=Ge.alternate,Je!==null?(Je=Je.index,Je<He?(Ge.flags|=2,He):Je):(Ge.flags|=2,He)):(Ge.flags|=1048576,He)}function xe(Ge){return c&&Ge.alternate===null&&(Ge.flags|=2),Ge}function Pe(Ge,He,Je,gt){return He===null||He.tag!==6?(He=n0(Je,Ge.mode,gt),He.return=Ge,He):(He=T(He,Je),He.return=Ge,He)}function Me(Ge,He,Je,gt){var Rt=Je.type;return Rt===P?At(Ge,He,Je.props.children,gt,Je.key):He!==null&&(He.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===te&&qr(Rt)===He.type)?(gt=T(He,Je.props),gt.ref=Vt(Ge,He,Je),gt.return=Ge,gt):(gt=mf(Je.type,Je.key,Je.props,null,Ge.mode,gt),gt.ref=Vt(Ge,He,Je),gt.return=Ge,gt)}function Xe(Ge,He,Je,gt){return He===null||He.tag!==4||He.stateNode.containerInfo!==Je.containerInfo||He.stateNode.implementation!==Je.implementation?(He=i0(Je,Ge.mode,gt),He.return=Ge,He):(He=T(He,Je.children||[]),He.return=Ge,He)}function At(Ge,He,Je,gt,Rt){return He===null||He.tag!==7?(He=md(Je,Ge.mode,gt,Rt),He.return=Ge,He):(He=T(He,Je),He.return=Ge,He)}function mt(Ge,He,Je){if(typeof He=="string"&&He!==""||typeof He=="number")return He=n0(""+He,Ge.mode,Je),He.return=Ge,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case Q:return Je=mf(He.type,He.key,He.props,null,Ge.mode,Je),Je.ref=Vt(Ge,null,He),Je.return=Ge,Je;case q:return He=i0(He,Ge.mode,Je),He.return=Ge,He;case te:var gt=He._init;return mt(Ge,gt(He._payload),Je)}if(fe(He)||ie(He))return He=md(He,Ge.mode,Je,null),He.return=Ge,He;lr(Ge,He)}return null}function ut(Ge,He,Je,gt){var Rt=He!==null?He.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number")return Rt!==null?null:Pe(Ge,He,""+Je,gt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case Q:return Je.key===Rt?Me(Ge,He,Je,gt):null;case q:return Je.key===Rt?Xe(Ge,He,Je,gt):null;case te:return Rt=Je._init,ut(Ge,He,Rt(Je._payload),gt)}if(fe(Je)||ie(Je))return Rt!==null?null:At(Ge,He,Je,gt,null);lr(Ge,Je)}return null}function Nt(Ge,He,Je,gt,Rt){if(typeof gt=="string"&&gt!==""||typeof gt=="number")return Ge=Ge.get(Je)||null,Pe(He,Ge,""+gt,Rt);if(typeof gt=="object"&&gt!==null){switch(gt.$$typeof){case Q:return Ge=Ge.get(gt.key===null?Je:gt.key)||null,Me(He,Ge,gt,Rt);case q:return Ge=Ge.get(gt.key===null?Je:gt.key)||null,Xe(He,Ge,gt,Rt);case te:var qt=gt._init;return Nt(Ge,He,Je,qt(gt._payload),Rt)}if(fe(gt)||ie(gt))return Ge=Ge.get(Je)||null,At(He,Ge,gt,Rt,null);lr(He,gt)}return null}function It(Ge,He,Je,gt){for(var Rt=null,qt=null,$t=He,Yt=He=0,wa=null;$t!==null&&Yt<Je.length;Yt++){$t.index>Yt?(wa=$t,$t=null):wa=$t.sibling;var Sr=ut(Ge,$t,Je[Yt],gt);if(Sr===null){$t===null&&($t=wa);break}c&&$t&&Sr.alternate===null&&A(Ge,$t),He=Z(Sr,He,Yt),qt===null?Rt=Sr:qt.sibling=Sr,qt=Sr,$t=wa}if(Yt===Je.length)return g(Ge,$t),nt&&Oe(Ge,Yt),Rt;if($t===null){for(;Yt<Je.length;Yt++)$t=mt(Ge,Je[Yt],gt),$t!==null&&(He=Z($t,He,Yt),qt===null?Rt=$t:qt.sibling=$t,qt=$t);return nt&&Oe(Ge,Yt),Rt}for($t=w(Ge,$t);Yt<Je.length;Yt++)wa=Nt($t,Ge,Yt,Je[Yt],gt),wa!==null&&(c&&wa.alternate!==null&&$t.delete(wa.key===null?Yt:wa.key),He=Z(wa,He,Yt),qt===null?Rt=wa:qt.sibling=wa,qt=wa);return c&&$t.forEach(function(rc){return A(Ge,rc)}),nt&&Oe(Ge,Yt),Rt}function Tt(Ge,He,Je,gt){var Rt=ie(Je);if(typeof Rt!="function")throw Error(r(150));if(Je=Rt.call(Je),Je==null)throw Error(r(151));for(var qt=Rt=null,$t=He,Yt=He=0,wa=null,Sr=Je.next();$t!==null&&!Sr.done;Yt++,Sr=Je.next()){$t.index>Yt?(wa=$t,$t=null):wa=$t.sibling;var rc=ut(Ge,$t,Sr.value,gt);if(rc===null){$t===null&&($t=wa);break}c&&$t&&rc.alternate===null&&A(Ge,$t),He=Z(rc,He,Yt),qt===null?Rt=rc:qt.sibling=rc,qt=rc,$t=wa}if(Sr.done)return g(Ge,$t),nt&&Oe(Ge,Yt),Rt;if($t===null){for(;!Sr.done;Yt++,Sr=Je.next())Sr=mt(Ge,Sr.value,gt),Sr!==null&&(He=Z(Sr,He,Yt),qt===null?Rt=Sr:qt.sibling=Sr,qt=Sr);return nt&&Oe(Ge,Yt),Rt}for($t=w(Ge,$t);!Sr.done;Yt++,Sr=Je.next())Sr=Nt($t,Ge,Yt,Sr.value,gt),Sr!==null&&(c&&Sr.alternate!==null&&$t.delete(Sr.key===null?Yt:Sr.key),He=Z(Sr,He,Yt),qt===null?Rt=Sr:qt.sibling=Sr,qt=Sr);return c&&$t.forEach(function(u3){return A(Ge,u3)}),nt&&Oe(Ge,Yt),Rt}function Ms(Ge,He,Je,gt){if(typeof Je=="object"&&Je!==null&&Je.type===P&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case Q:e:{for(var Rt=Je.key,qt=He;qt!==null;){if(qt.key===Rt){if(Rt=Je.type,Rt===P){if(qt.tag===7){g(Ge,qt.sibling),He=T(qt,Je.props.children),He.return=Ge,Ge=He;break e}}else if(qt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===te&&qr(Rt)===qt.type){g(Ge,qt.sibling),He=T(qt,Je.props),He.ref=Vt(Ge,qt,Je),He.return=Ge,Ge=He;break e}g(Ge,qt);break}else A(Ge,qt);qt=qt.sibling}Je.type===P?(He=md(Je.props.children,Ge.mode,gt,Je.key),He.return=Ge,Ge=He):(gt=mf(Je.type,Je.key,Je.props,null,Ge.mode,gt),gt.ref=Vt(Ge,He,Je),gt.return=Ge,Ge=gt)}return xe(Ge);case q:e:{for(qt=Je.key;He!==null;){if(He.key===qt)if(He.tag===4&&He.stateNode.containerInfo===Je.containerInfo&&He.stateNode.implementation===Je.implementation){g(Ge,He.sibling),He=T(He,Je.children||[]),He.return=Ge,Ge=He;break e}else{g(Ge,He);break}else A(Ge,He);He=He.sibling}He=i0(Je,Ge.mode,gt),He.return=Ge,Ge=He}return xe(Ge);case te:return qt=Je._init,Ms(Ge,He,qt(Je._payload),gt)}if(fe(Je))return It(Ge,He,Je,gt);if(ie(Je))return Tt(Ge,He,Je,gt);lr(Ge,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"?(Je=""+Je,He!==null&&He.tag===6?(g(Ge,He.sibling),He=T(He,Je),He.return=Ge,Ge=He):(g(Ge,He),He=n0(Je,Ge.mode,gt),He.return=Ge,Ge=He),xe(Ge)):g(Ge,He)}return Ms}var Bs=Vs(!0),ss=Vs(!1),Ts=Vn(null),Ys=null,Yr=null,mr=null;function vr(){mr=Yr=Ys=null}function Jr(c){var A=Ts.current;kr(Ts),c._currentValue=A}function wr(c,A,g){for(;c!==null;){var w=c.alternate;if((c.childLanes&A)!==A?(c.childLanes|=A,w!==null&&(w.childLanes|=A)):w!==null&&(w.childLanes&A)!==A&&(w.childLanes|=A),c===g)break;c=c.return}}function cs(c,A){Ys=c,mr=Yr=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&A)!==0&&(En=!0),c.firstContext=null)}function ds(c){var A=c._currentValue;if(mr!==c)if(c={context:c,memoizedValue:A,next:null},Yr===null){if(Ys===null)throw Error(r(308));Yr=c,Ys.dependencies={lanes:0,firstContext:c}}else Yr=Yr.next=c;return A}var Lr=null;function xa(c){Lr===null?Lr=[c]:Lr.push(c)}function _r(c,A,g,w){var T=A.interleaved;return T===null?(g.next=g,xa(A)):(g.next=T.next,T.next=g),A.interleaved=g,Tr(c,w)}function Tr(c,A){c.lanes|=A;var g=c.alternate;for(g!==null&&(g.lanes|=A),g=c,c=c.return;c!==null;)c.childLanes|=A,g=c.alternate,g!==null&&(g.childLanes|=A),g=c,c=c.return;return g.tag===3?g.stateNode:null}var ks=!1;function oa(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function en(c,A){c=c.updateQueue,A.updateQueue===c&&(A.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function ys(c,A){return{eventTime:c,lane:A,tag:0,payload:null,callback:null,next:null}}function vs(c,A,g){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(jr&2)!==0){var T=w.pending;return T===null?A.next=A:(A.next=T.next,T.next=A),w.pending=A,Tr(c,g)}return T=w.interleaved,T===null?(A.next=A,xa(w)):(A.next=T.next,T.next=A),w.interleaved=A,Tr(c,g)}function ba(c,A,g){if(A=A.updateQueue,A!==null&&(A=A.shared,(g&4194240)!==0)){var w=A.lanes;w&=c.pendingLanes,g|=w,A.lanes=g,Bl(c,g)}}function Dr(c,A){var g=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,g===w)){var T=null,Z=null;if(g=g.firstBaseUpdate,g!==null){do{var xe={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};Z===null?T=Z=xe:Z=Z.next=xe,g=g.next}while(g!==null);Z===null?T=Z=A:Z=Z.next=A}else T=Z=A;g={baseState:w.baseState,firstBaseUpdate:T,lastBaseUpdate:Z,shared:w.shared,effects:w.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=A:c.next=A,g.lastBaseUpdate=A}function ya(c,A,g,w){var T=c.updateQueue;ks=!1;var Z=T.firstBaseUpdate,xe=T.lastBaseUpdate,Pe=T.shared.pending;if(Pe!==null){T.shared.pending=null;var Me=Pe,Xe=Me.next;Me.next=null,xe===null?Z=Xe:xe.next=Xe,xe=Me;var At=c.alternate;At!==null&&(At=At.updateQueue,Pe=At.lastBaseUpdate,Pe!==xe&&(Pe===null?At.firstBaseUpdate=Xe:Pe.next=Xe,At.lastBaseUpdate=Me))}if(Z!==null){var mt=T.baseState;xe=0,At=Xe=Me=null,Pe=Z;do{var ut=Pe.lane,Nt=Pe.eventTime;if((w&ut)===ut){At!==null&&(At=At.next={eventTime:Nt,lane:0,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null});e:{var It=c,Tt=Pe;switch(ut=A,Nt=g,Tt.tag){case 1:if(It=Tt.payload,typeof It=="function"){mt=It.call(Nt,mt,ut);break e}mt=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Tt.payload,ut=typeof It=="function"?It.call(Nt,mt,ut):It,ut==null)break e;mt=K({},mt,ut);break e;case 2:ks=!0}}Pe.callback!==null&&Pe.lane!==0&&(c.flags|=64,ut=T.effects,ut===null?T.effects=[Pe]:ut.push(Pe))}else Nt={eventTime:Nt,lane:ut,tag:Pe.tag,payload:Pe.payload,callback:Pe.callback,next:null},At===null?(Xe=At=Nt,Me=mt):At=At.next=Nt,xe|=ut;if(Pe=Pe.next,Pe===null){if(Pe=T.shared.pending,Pe===null)break;ut=Pe,Pe=ut.next,ut.next=null,T.lastBaseUpdate=ut,T.shared.pending=null}}while(!0);if(At===null&&(Me=mt),T.baseState=Me,T.firstBaseUpdate=Xe,T.lastBaseUpdate=At,A=T.shared.interleaved,A!==null){T=A;do xe|=T.lane,T=T.next;while(T!==A)}else Z===null&&(T.shared.lanes=0);cd|=xe,c.lanes=xe,c.memoizedState=mt}}function Fn(c,A,g){if(c=A.effects,A.effects=null,c!==null)for(A=0;A<c.length;A++){var w=c[A],T=w.callback;if(T!==null){if(w.callback=null,w=g,typeof T!="function")throw Error(r(191,T));T.call(w)}}}var Yn={},Js=Vn(Yn),ws=Vn(Yn),So=Vn(Yn);function Ki(c){if(c===Yn)throw Error(r(174));return c}function Kl(c,A){switch(Er(So,A),Er(ws,c),Er(Js,Yn),c=A.nodeType,c){case 9:case 11:A=(A=A.documentElement)?A.namespaceURI:J(null,"");break;default:c=c===8?A.parentNode:A,A=c.namespaceURI||null,c=c.tagName,A=J(A,c)}kr(Js),Er(Js,A)}function xi(){kr(Js),kr(ws),kr(So)}function zh(c){Ki(So.current);var A=Ki(Js.current),g=J(A,c.type);A!==g&&(Er(ws,c),Er(Js,g))}function WA(c){ws.current===c&&(kr(Js),kr(ws))}var Kr=Vn(0);function Jn(c){for(var A=c;A!==null;){if(A.tag===13){var g=A.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return A}else if(A.tag===19&&A.memoizedProps.revealOrder!==void 0){if((A.flags&128)!==0)return A}else if(A.child!==null){A.child.return=A,A=A.child;continue}if(A===c)break;for(;A.sibling===null;){if(A.return===null||A.return===c)return null;A=A.return}A.sibling.return=A.return,A=A.sibling}return null}var KA=[];function zA(){for(var c=0;c<KA.length;c++)KA[c]._workInProgressVersionPrimary=null;KA.length=0}var uu=F.ReactCurrentDispatcher,Au=F.ReactCurrentBatchConfig,bi=0,Xr=null,Fs=null,js=null,zl=!1,zi=!1,Gl=0,_p=0;function Ds(){throw Error(r(321))}function mu(c,A){if(A===null)return!1;for(var g=0;g<A.length&&g<c.length;g++)if(!Ls(c[g],A[g]))return!1;return!0}function id(c,A,g,w,T,Z){if(bi=Z,Xr=A,A.memoizedState=null,A.updateQueue=null,A.lanes=0,uu.current=c===null||c.memoizedState===null?DB:MB,c=g(w,T),zi){Z=0;do{if(zi=!1,Gl=0,25<=Z)throw Error(r(301));Z+=1,js=Fs=null,A.updateQueue=null,uu.current=RB,c=g(w,T)}while(zi)}if(uu.current=Xh,A=Fs!==null&&Fs.next!==null,bi=0,js=Fs=Xr=null,zl=!1,A)throw Error(r(300));return c}function yi(){var c=Gl!==0;return Gl=0,c}function Xn(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return js===null?Xr.memoizedState=js=c:js=js.next=c,js}function pn(){if(Fs===null){var c=Xr.alternate;c=c!==null?c.memoizedState:null}else c=Fs.next;var A=js===null?Xr.memoizedState:js.next;if(A!==null)js=A,Fs=c;else{if(c===null)throw Error(r(310));Fs=c,c={memoizedState:Fs.memoizedState,baseState:Fs.baseState,baseQueue:Fs.baseQueue,queue:Fs.queue,next:null},js===null?Xr.memoizedState=js=c:js=js.next=c}return js}function od(c,A){return typeof A=="function"?A(c):A}function hu(c){var A=pn(),g=A.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var w=Fs,T=w.baseQueue,Z=g.pending;if(Z!==null){if(T!==null){var xe=T.next;T.next=Z.next,Z.next=xe}w.baseQueue=T=Z,g.pending=null}if(T!==null){Z=T.next,w=w.baseState;var Pe=xe=null,Me=null,Xe=Z;do{var At=Xe.lane;if((bi&At)===At)Me!==null&&(Me=Me.next={lane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),w=Xe.hasEagerState?Xe.eagerState:c(w,Xe.action);else{var mt={lane:At,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null};Me===null?(Pe=Me=mt,xe=w):Me=Me.next=mt,Xr.lanes|=At,cd|=At}Xe=Xe.next}while(Xe!==null&&Xe!==Z);Me===null?xe=w:Me.next=Pe,Ls(w,A.memoizedState)||(En=!0),A.memoizedState=w,A.baseState=xe,A.baseQueue=Me,g.lastRenderedState=w}if(c=g.interleaved,c!==null){T=c;do Z=T.lane,Xr.lanes|=Z,cd|=Z,T=T.next;while(T!==c)}else T===null&&(g.lanes=0);return[A.memoizedState,g.dispatch]}function Bo(c){var A=pn(),g=A.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var w=g.dispatch,T=g.pending,Z=A.memoizedState;if(T!==null){g.pending=null;var xe=T=T.next;do Z=c(Z,xe.action),xe=xe.next;while(xe!==T);Ls(Z,A.memoizedState)||(En=!0),A.memoizedState=Z,A.baseQueue===null&&(A.baseState=Z),g.lastRenderedState=Z}return[Z,w]}function Gh(){}function GA(c,A){var g=Xr,w=pn(),T=A(),Z=!Ls(w.memoizedState,T);if(Z&&(w.memoizedState=T,En=!0),w=w.queue,pu(Yh.bind(null,g,w,c),[c]),w.getSnapshot!==A||Z||js!==null&&js.memoizedState.tag&1){if(g.flags|=2048,xn(9,VA.bind(null,g,w,T,A),void 0,null),va===null)throw Error(r(349));(bi&30)!==0||Vh(g,A,T)}return T}function Vh(c,A,g){c.flags|=16384,c={getSnapshot:A,value:g},A=Xr.updateQueue,A===null?(A={lastEffect:null,stores:null},Xr.updateQueue=A,A.stores=[c]):(g=A.stores,g===null?A.stores=[c]:g.push(c))}function VA(c,A,g,w){A.value=g,A.getSnapshot=w,Vl(A)&&fu(c)}function Yh(c,A,g){return g(function(){Vl(A)&&fu(c)})}function Vl(c){var A=c.getSnapshot;c=c.value;try{var g=A();return!Ls(c,g)}catch{return!0}}function fu(c){var A=Tr(c,1);A!==null&&Xi(A,c,1,-1)}function ld(c){var A=Xn();return typeof c=="function"&&(c=c()),A.memoizedState=A.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:c},A.queue=c,c=c.dispatch=TB.bind(null,Xr,c),[A.memoizedState,c]}function xn(c,A,g,w){return c={tag:c,create:A,destroy:g,deps:w,next:null},A=Xr.updateQueue,A===null?(A={lastEffect:null,stores:null},Xr.updateQueue=A,A.lastEffect=c.next=c):(g=A.lastEffect,g===null?A.lastEffect=c.next=c:(w=g.next,g.next=c,c.next=w,A.lastEffect=c)),c}function Gi(){return pn().memoizedState}function Zn(c,A,g,w){var T=Xn();Xr.flags|=c,T.memoizedState=xn(1|A,g,void 0,w===void 0?null:w)}function dl(c,A,g,w){var T=pn();w=w===void 0?null:w;var Z=void 0;if(Fs!==null){var xe=Fs.memoizedState;if(Z=xe.destroy,w!==null&&mu(w,xe.deps)){T.memoizedState=xn(A,g,Z,w);return}}Xr.flags|=c,T.memoizedState=xn(1|A,g,Z,w)}function gu(c,A){return Zn(8390656,8,c,A)}function pu(c,A){return dl(2048,8,c,A)}function Jh(c,A){return dl(4,2,c,A)}function xu(c,A){return dl(4,4,c,A)}function bu(c,A){if(typeof A=="function")return c=c(),A(c),function(){A(null)};if(A!=null)return c=c(),A.current=c,function(){A.current=null}}function Ly(c,A,g){return g=g!=null?g.concat([c]):null,dl(4,4,bu.bind(null,A,c),g)}function Pp(){}function Ty(c,A){var g=pn();A=A===void 0?null:A;var w=g.memoizedState;return w!==null&&A!==null&&mu(A,w[1])?w[0]:(g.memoizedState=[c,A],c)}function Dy(c,A){var g=pn();A=A===void 0?null:A;var w=g.memoizedState;return w!==null&&A!==null&&mu(A,w[1])?w[0]:(c=c(),g.memoizedState=[c,A],c)}function My(c,A,g){return(bi&21)===0?(c.baseState&&(c.baseState=!1,En=!0),c.memoizedState=g):(Ls(g,A)||(g=zd(),Xr.lanes|=g,cd|=g,c.baseState=!0),A)}function UB(c,A){var g=xr;xr=g!==0&&4>g?g:4,c(!0);var w=Au.transition;Au.transition={};try{c(!1),A()}finally{xr=g,Au.transition=w}}function Ry(){return pn().memoizedState}function LB(c,A,g){var w=Zl(c);if(g={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null},Qy(c))Oy(A,g);else if(g=_r(c,A,g,w),g!==null){var T=yn();Xi(g,c,w,T),Hy(g,A,w)}}function TB(c,A,g){var w=Zl(c),T={lane:w,action:g,hasEagerState:!1,eagerState:null,next:null};if(Qy(c))Oy(A,T);else{var Z=c.alternate;if(c.lanes===0&&(Z===null||Z.lanes===0)&&(Z=A.lastRenderedReducer,Z!==null))try{var xe=A.lastRenderedState,Pe=Z(xe,g);if(T.hasEagerState=!0,T.eagerState=Pe,Ls(Pe,xe)){var Me=A.interleaved;Me===null?(T.next=T,xa(A)):(T.next=Me.next,Me.next=T),A.interleaved=T;return}}catch{}finally{}g=_r(c,A,T,w),g!==null&&(T=yn(),Xi(g,c,w,T),Hy(g,A,w))}}function Qy(c){var A=c.alternate;return c===Xr||A!==null&&A===Xr}function Oy(c,A){zi=zl=!0;var g=c.pending;g===null?A.next=A:(A.next=g.next,g.next=A),c.pending=A}function Hy(c,A,g){if((g&4194240)!==0){var w=A.lanes;w&=c.pendingLanes,g|=w,A.lanes=g,Bl(c,g)}}var Xh={readContext:ds,useCallback:Ds,useContext:Ds,useEffect:Ds,useImperativeHandle:Ds,useInsertionEffect:Ds,useLayoutEffect:Ds,useMemo:Ds,useReducer:Ds,useRef:Ds,useState:Ds,useDebugValue:Ds,useDeferredValue:Ds,useTransition:Ds,useMutableSource:Ds,useSyncExternalStore:Ds,useId:Ds,unstable_isNewReconciler:!1},DB={readContext:ds,useCallback:function(c,A){return Xn().memoizedState=[c,A===void 0?null:A],c},useContext:ds,useEffect:gu,useImperativeHandle:function(c,A,g){return g=g!=null?g.concat([c]):null,Zn(4194308,4,bu.bind(null,A,c),g)},useLayoutEffect:function(c,A){return Zn(4194308,4,c,A)},useInsertionEffect:function(c,A){return Zn(4,2,c,A)},useMemo:function(c,A){var g=Xn();return A=A===void 0?null:A,c=c(),g.memoizedState=[c,A],c},useReducer:function(c,A,g){var w=Xn();return A=g!==void 0?g(A):A,w.memoizedState=w.baseState=A,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:A},w.queue=c,c=c.dispatch=LB.bind(null,Xr,c),[w.memoizedState,c]},useRef:function(c){var A=Xn();return c={current:c},A.memoizedState=c},useState:ld,useDebugValue:Pp,useDeferredValue:function(c){return Xn().memoizedState=c},useTransition:function(){var c=ld(!1),A=c[0];return c=UB.bind(null,c[1]),Xn().memoizedState=c,[A,c]},useMutableSource:function(){},useSyncExternalStore:function(c,A,g){var w=Xr,T=Xn();if(nt){if(g===void 0)throw Error(r(407));g=g()}else{if(g=A(),va===null)throw Error(r(349));(bi&30)!==0||Vh(w,A,g)}T.memoizedState=g;var Z={value:g,getSnapshot:A};return T.queue=Z,gu(Yh.bind(null,w,Z,c),[c]),w.flags|=2048,xn(9,VA.bind(null,w,Z,g,A),void 0,null),g},useId:function(){var c=Xn(),A=va.identifierPrefix;if(nt){var g=ke,w=ze;g=(w&~(1<<32-fa(w)-1)).toString(32)+g,A=":"+A+"R"+g,g=Gl++,0<g&&(A+="H"+g.toString(32)),A+=":"}else g=_p++,A=":"+A+"r"+g.toString(32)+":";return c.memoizedState=A},unstable_isNewReconciler:!1},MB={readContext:ds,useCallback:Ty,useContext:ds,useEffect:pu,useImperativeHandle:Ly,useInsertionEffect:Jh,useLayoutEffect:xu,useMemo:Dy,useReducer:hu,useRef:Gi,useState:function(){return hu(od)},useDebugValue:Pp,useDeferredValue:function(c){var A=pn();return My(A,Fs.memoizedState,c)},useTransition:function(){var c=hu(od)[0],A=pn().memoizedState;return[c,A]},useMutableSource:Gh,useSyncExternalStore:GA,useId:Ry,unstable_isNewReconciler:!1},RB={readContext:ds,useCallback:Ty,useContext:ds,useEffect:pu,useImperativeHandle:Ly,useInsertionEffect:Jh,useLayoutEffect:xu,useMemo:Dy,useReducer:Bo,useRef:Gi,useState:function(){return Bo(od)},useDebugValue:Pp,useDeferredValue:function(c){var A=pn();return Fs===null?A.memoizedState=c:My(A,Fs.memoizedState,c)},useTransition:function(){var c=Bo(od)[0],A=pn().memoizedState;return[c,A]},useMutableSource:Gh,useSyncExternalStore:GA,useId:Ry,unstable_isNewReconciler:!1};function Vi(c,A){if(c&&c.defaultProps){A=K({},A),c=c.defaultProps;for(var g in c)A[g]===void 0&&(A[g]=c[g]);return A}return A}function Ip(c,A,g,w){A=c.memoizedState,g=g(w,A),g=g==null?A:K({},A,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var Zh={isMounted:function(c){return(c=c._reactInternals)?zs(c)===c:!1},enqueueSetState:function(c,A,g){c=c._reactInternals;var w=yn(),T=Zl(c),Z=ys(w,T);Z.payload=A,g!=null&&(Z.callback=g),A=vs(c,Z,T),A!==null&&(Xi(A,c,T,w),ba(A,c,T))},enqueueReplaceState:function(c,A,g){c=c._reactInternals;var w=yn(),T=Zl(c),Z=ys(w,T);Z.tag=1,Z.payload=A,g!=null&&(Z.callback=g),A=vs(c,Z,T),A!==null&&(Xi(A,c,T,w),ba(A,c,T))},enqueueForceUpdate:function(c,A){c=c._reactInternals;var g=yn(),w=Zl(c),T=ys(g,w);T.tag=2,A!=null&&(T.callback=A),A=vs(c,T,w),A!==null&&(Xi(A,c,w,g),ba(A,c,w))}};function qy(c,A,g,w,T,Z,xe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,Z,xe):A.prototype&&A.prototype.isPureReactComponent?!fi(g,w)||!fi(T,Z):!0}function $y(c,A,g){var w=!1,T=Co,Z=A.contextType;return typeof Z=="object"&&Z!==null?Z=ds(Z):(T=Za(A)?ll:ia.current,w=A.contextTypes,Z=(w=w!=null)?Wl(c,T):Co),A=new A(g,Z),c.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Zh,c.stateNode=A,A._reactInternals=c,w&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=T,c.__reactInternalMemoizedMaskedChildContext=Z),A}function Wy(c,A,g,w){c=A.state,typeof A.componentWillReceiveProps=="function"&&A.componentWillReceiveProps(g,w),typeof A.UNSAFE_componentWillReceiveProps=="function"&&A.UNSAFE_componentWillReceiveProps(g,w),A.state!==c&&Zh.enqueueReplaceState(A,A.state,null)}function Up(c,A,g,w){var T=c.stateNode;T.props=g,T.state=c.memoizedState,T.refs={},oa(c);var Z=A.contextType;typeof Z=="object"&&Z!==null?T.context=ds(Z):(Z=Za(A)?ll:ia.current,T.context=Wl(c,Z)),T.state=c.memoizedState,Z=A.getDerivedStateFromProps,typeof Z=="function"&&(Ip(c,A,Z,g),T.state=c.memoizedState),typeof A.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(A=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),A!==T.state&&Zh.enqueueReplaceState(T,T.state,null),ya(c,g,T,w),T.state=c.memoizedState),typeof T.componentDidMount=="function"&&(c.flags|=4194308)}function yu(c,A){try{var g="",w=A;do g+=de(w),w=w.return;while(w);var T=g}catch(Z){T=`
Error generating stack: `+Z.message+`
`+Z.stack}return{value:c,source:A,stack:T,digest:null}}function Lp(c,A,g){return{value:c,source:null,stack:g??null,digest:A??null}}function Tp(c,A){try{console.error(A.value)}catch(g){setTimeout(function(){throw g})}}var QB=typeof WeakMap=="function"?WeakMap:Map;function Ky(c,A,g){g=ys(-1,g),g.tag=3,g.payload={element:null};var w=A.value;return g.callback=function(){of||(of=!0,Jp=w),Tp(c,A)},g}function zy(c,A,g){g=ys(-1,g),g.tag=3;var w=c.type.getDerivedStateFromError;if(typeof w=="function"){var T=A.value;g.payload=function(){return w(T)},g.callback=function(){Tp(c,A)}}var Z=c.stateNode;return Z!==null&&typeof Z.componentDidCatch=="function"&&(g.callback=function(){Tp(c,A),typeof w!="function"&&(Jl===null?Jl=new Set([this]):Jl.add(this));var xe=A.stack;this.componentDidCatch(A.value,{componentStack:xe!==null?xe:""})}),g}function Gy(c,A,g){var w=c.pingCache;if(w===null){w=c.pingCache=new QB;var T=new Set;w.set(A,T)}else T=w.get(A),T===void 0&&(T=new Set,w.set(A,T));T.has(g)||(T.add(g),c=e3.bind(null,c,A,g),A.then(c,c))}function Vy(c){do{var A;if((A=c.tag===13)&&(A=c.memoizedState,A=A!==null?A.dehydrated!==null:!0),A)return c;c=c.return}while(c!==null);return null}function Yy(c,A,g,w,T){return(c.mode&1)===0?(c===A?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(A=ys(-1,1),A.tag=2,vs(g,A,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=T,c)}var OB=F.ReactCurrentOwner,En=!1;function bn(c,A,g,w){A.child=c===null?ss(A,null,g,w):Bs(A,c.child,g,w)}function Jy(c,A,g,w,T){g=g.render;var Z=A.ref;return cs(A,T),w=id(c,A,g,w,Z,T),g=yi(),c!==null&&!En?(A.updateQueue=c.updateQueue,A.flags&=-2053,c.lanes&=~T,ul(c,A,T)):(nt&&g&&rt(A),A.flags|=1,bn(c,A,w,T),A.child)}function Xy(c,A,g,w,T){if(c===null){var Z=g.type;return typeof Z=="function"&&!a0(Z)&&Z.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(A.tag=15,A.type=Z,Zy(c,A,Z,w,T)):(c=mf(g.type,null,w,A,A.mode,T),c.ref=A.ref,c.return=A,A.child=c)}if(Z=c.child,(c.lanes&T)===0){var xe=Z.memoizedProps;if(g=g.compare,g=g!==null?g:fi,g(xe,w)&&c.ref===A.ref)return ul(c,A,T)}return A.flags|=1,c=tc(Z,w),c.ref=A.ref,c.return=A,A.child=c}function Zy(c,A,g,w,T){if(c!==null){var Z=c.memoizedProps;if(fi(Z,w)&&c.ref===A.ref)if(En=!1,A.pendingProps=w=Z,(c.lanes&T)!==0)(c.flags&131072)!==0&&(En=!0);else return A.lanes=c.lanes,ul(c,A,T)}return Dp(c,A,g,w,T)}function ev(c,A,g){var w=A.pendingProps,T=w.children,Z=c!==null?c.memoizedState:null;if(w.mode==="hidden")if((A.mode&1)===0)A.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(wu,ei),ei|=g;else{if((g&1073741824)===0)return c=Z!==null?Z.baseLanes|g:g,A.lanes=A.childLanes=1073741824,A.memoizedState={baseLanes:c,cachePool:null,transitions:null},A.updateQueue=null,Er(wu,ei),ei|=c,null;A.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=Z!==null?Z.baseLanes:g,Er(wu,ei),ei|=w}else Z!==null?(w=Z.baseLanes|g,A.memoizedState=null):w=g,Er(wu,ei),ei|=w;return bn(c,A,T,g),A.child}function tv(c,A){var g=A.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(A.flags|=512,A.flags|=2097152)}function Dp(c,A,g,w,T){var Z=Za(g)?ll:ia.current;return Z=Wl(A,Z),cs(A,T),g=id(c,A,g,w,Z,T),w=yi(),c!==null&&!En?(A.updateQueue=c.updateQueue,A.flags&=-2053,c.lanes&=~T,ul(c,A,T)):(nt&&w&&rt(A),A.flags|=1,bn(c,A,g,T),A.child)}function rv(c,A,g,w,T){if(Za(g)){var Z=!0;cl(A)}else Z=!1;if(cs(A,T),A.stateNode===null)tf(c,A),$y(A,g,w),Up(A,g,w,T),w=!0;else if(c===null){var xe=A.stateNode,Pe=A.memoizedProps;xe.props=Pe;var Me=xe.context,Xe=g.contextType;typeof Xe=="object"&&Xe!==null?Xe=ds(Xe):(Xe=Za(g)?ll:ia.current,Xe=Wl(A,Xe));var At=g.getDerivedStateFromProps,mt=typeof At=="function"||typeof xe.getSnapshotBeforeUpdate=="function";mt||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Pe!==w||Me!==Xe)&&Wy(A,xe,w,Xe),ks=!1;var ut=A.memoizedState;xe.state=ut,ya(A,w,xe,T),Me=A.memoizedState,Pe!==w||ut!==Me||Xa.current||ks?(typeof At=="function"&&(Ip(A,g,At,w),Me=A.memoizedState),(Pe=ks||qy(A,g,Pe,w,ut,Me,Xe))?(mt||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(A.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(A.flags|=4194308),A.memoizedProps=w,A.memoizedState=Me),xe.props=w,xe.state=Me,xe.context=Xe,w=Pe):(typeof xe.componentDidMount=="function"&&(A.flags|=4194308),w=!1)}else{xe=A.stateNode,en(c,A),Pe=A.memoizedProps,Xe=A.type===A.elementType?Pe:Vi(A.type,Pe),xe.props=Xe,mt=A.pendingProps,ut=xe.context,Me=g.contextType,typeof Me=="object"&&Me!==null?Me=ds(Me):(Me=Za(g)?ll:ia.current,Me=Wl(A,Me));var Nt=g.getDerivedStateFromProps;(At=typeof Nt=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(Pe!==mt||ut!==Me)&&Wy(A,xe,w,Me),ks=!1,ut=A.memoizedState,xe.state=ut,ya(A,w,xe,T);var It=A.memoizedState;Pe!==mt||ut!==It||Xa.current||ks?(typeof Nt=="function"&&(Ip(A,g,Nt,w),It=A.memoizedState),(Xe=ks||qy(A,g,Xe,w,ut,It,Me)||!1)?(At||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(w,It,Me),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(w,It,Me)),typeof xe.componentDidUpdate=="function"&&(A.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(A.flags|=1024)):(typeof xe.componentDidUpdate!="function"||Pe===c.memoizedProps&&ut===c.memoizedState||(A.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Pe===c.memoizedProps&&ut===c.memoizedState||(A.flags|=1024),A.memoizedProps=w,A.memoizedState=It),xe.props=w,xe.state=It,xe.context=Me,w=Xe):(typeof xe.componentDidUpdate!="function"||Pe===c.memoizedProps&&ut===c.memoizedState||(A.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||Pe===c.memoizedProps&&ut===c.memoizedState||(A.flags|=1024),w=!1)}return Mp(c,A,g,w,Z,T)}function Mp(c,A,g,w,T,Z){tv(c,A);var xe=(A.flags&128)!==0;if(!w&&!xe)return T&&Kh(A,g,!1),ul(c,A,Z);w=A.stateNode,OB.current=A;var Pe=xe&&typeof g.getDerivedStateFromError!="function"?null:w.render();return A.flags|=1,c!==null&&xe?(A.child=Bs(A,c.child,null,Z),A.child=Bs(A,null,Pe,Z)):bn(c,A,Pe,Z),A.memoizedState=w.state,T&&Kh(A,g,!0),A.child}function sv(c){var A=c.stateNode;A.pendingContext?Wh(c,A.pendingContext,A.pendingContext!==A.context):A.context&&Wh(c,A.context,!1),Kl(c,A.containerInfo)}function av(c,A,g,w,T){return Bt(),pt(T),A.flags|=256,bn(c,A,g,w),A.child}var Rp={dehydrated:null,treeContext:null,retryLane:0};function Qp(c){return{baseLanes:c,cachePool:null,transitions:null}}function nv(c,A,g){var w=A.pendingProps,T=Kr.current,Z=!1,xe=(A.flags&128)!==0,Pe;if((Pe=xe)||(Pe=c!==null&&c.memoizedState===null?!1:(T&2)!==0),Pe?(Z=!0,A.flags&=-129):(c===null||c.memoizedState!==null)&&(T|=1),Er(Kr,T&1),c===null)return _t(A),c=A.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((A.mode&1)===0?A.lanes=1:c.data==="$!"?A.lanes=8:A.lanes=1073741824,null):(xe=w.children,c=w.fallback,Z?(w=A.mode,Z=A.child,xe={mode:"hidden",children:xe},(w&1)===0&&Z!==null?(Z.childLanes=0,Z.pendingProps=xe):Z=hf(xe,w,0,null),c=md(c,w,g,null),Z.return=A,c.return=A,Z.sibling=c,A.child=Z,A.child.memoizedState=Qp(g),A.memoizedState=Rp,c):Op(A,xe));if(T=c.memoizedState,T!==null&&(Pe=T.dehydrated,Pe!==null))return HB(c,A,xe,w,Pe,T,g);if(Z){Z=w.fallback,xe=A.mode,T=c.child,Pe=T.sibling;var Me={mode:"hidden",children:w.children};return(xe&1)===0&&A.child!==T?(w=A.child,w.childLanes=0,w.pendingProps=Me,A.deletions=null):(w=tc(T,Me),w.subtreeFlags=T.subtreeFlags&14680064),Pe!==null?Z=tc(Pe,Z):(Z=md(Z,xe,g,null),Z.flags|=2),Z.return=A,w.return=A,w.sibling=Z,A.child=w,w=Z,Z=A.child,xe=c.child.memoizedState,xe=xe===null?Qp(g):{baseLanes:xe.baseLanes|g,cachePool:null,transitions:xe.transitions},Z.memoizedState=xe,Z.childLanes=c.childLanes&~g,A.memoizedState=Rp,w}return Z=c.child,c=Z.sibling,w=tc(Z,{mode:"visible",children:w.children}),(A.mode&1)===0&&(w.lanes=g),w.return=A,w.sibling=null,c!==null&&(g=A.deletions,g===null?(A.deletions=[c],A.flags|=16):g.push(c)),A.child=w,A.memoizedState=null,w}function Op(c,A){return A=hf({mode:"visible",children:A},c.mode,0,null),A.return=c,c.child=A}function ef(c,A,g,w){return w!==null&&pt(w),Bs(A,c.child,null,g),c=Op(A,A.pendingProps.children),c.flags|=2,A.memoizedState=null,c}function HB(c,A,g,w,T,Z,xe){if(g)return A.flags&256?(A.flags&=-257,w=Lp(Error(r(422))),ef(c,A,xe,w)):A.memoizedState!==null?(A.child=c.child,A.flags|=128,null):(Z=w.fallback,T=A.mode,w=hf({mode:"visible",children:w.children},T,0,null),Z=md(Z,T,xe,null),Z.flags|=2,w.return=A,Z.return=A,w.sibling=Z,A.child=w,(A.mode&1)!==0&&Bs(A,c.child,null,xe),A.child.memoizedState=Qp(xe),A.memoizedState=Rp,Z);if((A.mode&1)===0)return ef(c,A,xe,null);if(T.data==="$!"){if(w=T.nextSibling&&T.nextSibling.dataset,w)var Pe=w.dgst;return w=Pe,Z=Error(r(419)),w=Lp(Z,w,void 0),ef(c,A,xe,w)}if(Pe=(xe&c.childLanes)!==0,En||Pe){if(w=va,w!==null){switch(xe&-xe){case 4:T=2;break;case 16:T=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:T=32;break;case 536870912:T=268435456;break;default:T=0}T=(T&(w.suspendedLanes|xe))!==0?0:T,T!==0&&T!==Z.retryLane&&(Z.retryLane=T,Tr(c,T),Xi(w,c,T,-1))}return s0(),w=Lp(Error(r(421))),ef(c,A,xe,w)}return T.data==="$?"?(A.flags|=128,A.child=c.child,A=t3.bind(null,c),T._reactRetry=A,null):(c=Z.treeContext,tt=Ua(T.nextSibling),Ze=A,nt=!0,it=null,c!==null&&(Ne[Be++]=ze,Ne[Be++]=ke,Ne[Be++]=De,ze=c.id,ke=c.overflow,De=A),A=Op(A,w.children),A.flags|=4096,A)}function iv(c,A,g){c.lanes|=A;var w=c.alternate;w!==null&&(w.lanes|=A),wr(c.return,A,g)}function Hp(c,A,g,w,T){var Z=c.memoizedState;Z===null?c.memoizedState={isBackwards:A,rendering:null,renderingStartTime:0,last:w,tail:g,tailMode:T}:(Z.isBackwards=A,Z.rendering=null,Z.renderingStartTime=0,Z.last=w,Z.tail=g,Z.tailMode=T)}function ov(c,A,g){var w=A.pendingProps,T=w.revealOrder,Z=w.tail;if(bn(c,A,w.children,g),w=Kr.current,(w&2)!==0)w=w&1|2,A.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=A.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&iv(c,g,A);else if(c.tag===19)iv(c,g,A);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===A)break e;for(;c.sibling===null;){if(c.return===null||c.return===A)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}if(Er(Kr,w),(A.mode&1)===0)A.memoizedState=null;else switch(T){case"forwards":for(g=A.child,T=null;g!==null;)c=g.alternate,c!==null&&Jn(c)===null&&(T=g),g=g.sibling;g=T,g===null?(T=A.child,A.child=null):(T=g.sibling,g.sibling=null),Hp(A,!1,T,g,Z);break;case"backwards":for(g=null,T=A.child,A.child=null;T!==null;){if(c=T.alternate,c!==null&&Jn(c)===null){A.child=T;break}c=T.sibling,T.sibling=g,g=T,T=c}Hp(A,!0,g,null,Z);break;case"together":Hp(A,!1,null,null,void 0);break;default:A.memoizedState=null}return A.child}function tf(c,A){(A.mode&1)===0&&c!==null&&(c.alternate=null,A.alternate=null,A.flags|=2)}function ul(c,A,g){if(c!==null&&(A.dependencies=c.dependencies),cd|=A.lanes,(g&A.childLanes)===0)return null;if(c!==null&&A.child!==c.child)throw Error(r(153));if(A.child!==null){for(c=A.child,g=tc(c,c.pendingProps),A.child=g,g.return=A;c.sibling!==null;)c=c.sibling,g=g.sibling=tc(c,c.pendingProps),g.return=A;g.sibling=null}return A.child}function qB(c,A,g){switch(A.tag){case 3:sv(A),Bt();break;case 5:zh(A);break;case 1:Za(A.type)&&cl(A);break;case 4:Kl(A,A.stateNode.containerInfo);break;case 10:var w=A.type._context,T=A.memoizedProps.value;Er(Ts,w._currentValue),w._currentValue=T;break;case 13:if(w=A.memoizedState,w!==null)return w.dehydrated!==null?(Er(Kr,Kr.current&1),A.flags|=128,null):(g&A.child.childLanes)!==0?nv(c,A,g):(Er(Kr,Kr.current&1),c=ul(c,A,g),c!==null?c.sibling:null);Er(Kr,Kr.current&1);break;case 19:if(w=(g&A.childLanes)!==0,(c.flags&128)!==0){if(w)return ov(c,A,g);A.flags|=128}if(T=A.memoizedState,T!==null&&(T.rendering=null,T.tail=null,T.lastEffect=null),Er(Kr,Kr.current),w)break;return null;case 22:case 23:return A.lanes=0,ev(c,A,g)}return ul(c,A,g)}var lv,qp,cv,dv;lv=function(c,A){for(var g=A.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===A)break;for(;g.sibling===null;){if(g.return===null||g.return===A)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},qp=function(){},cv=function(c,A,g,w){var T=c.memoizedProps;if(T!==w){c=A.stateNode,Ki(Js.current);var Z=null;switch(g){case"input":T=je(c,T),w=je(c,w),Z=[];break;case"select":T=K({},T,{value:void 0}),w=K({},w,{value:void 0}),Z=[];break;case"textarea":T=Re(c,T),w=Re(c,w),Z=[];break;default:typeof T.onClick!="function"&&typeof w.onClick=="function"&&(c.onclick=Hl)}ct(g,w);var xe;g=null;for(Xe in T)if(!w.hasOwnProperty(Xe)&&T.hasOwnProperty(Xe)&&T[Xe]!=null)if(Xe==="style"){var Pe=T[Xe];for(xe in Pe)Pe.hasOwnProperty(xe)&&(g||(g={}),g[xe]="")}else Xe!=="dangerouslySetInnerHTML"&&Xe!=="children"&&Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&Xe!=="autoFocus"&&(n.hasOwnProperty(Xe)?Z||(Z=[]):(Z=Z||[]).push(Xe,null));for(Xe in w){var Me=w[Xe];if(Pe=T?.[Xe],w.hasOwnProperty(Xe)&&Me!==Pe&&(Me!=null||Pe!=null))if(Xe==="style")if(Pe){for(xe in Pe)!Pe.hasOwnProperty(xe)||Me&&Me.hasOwnProperty(xe)||(g||(g={}),g[xe]="");for(xe in Me)Me.hasOwnProperty(xe)&&Pe[xe]!==Me[xe]&&(g||(g={}),g[xe]=Me[xe])}else g||(Z||(Z=[]),Z.push(Xe,g)),g=Me;else Xe==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,Pe=Pe?Pe.__html:void 0,Me!=null&&Pe!==Me&&(Z=Z||[]).push(Xe,Me)):Xe==="children"?typeof Me!="string"&&typeof Me!="number"||(Z=Z||[]).push(Xe,""+Me):Xe!=="suppressContentEditableWarning"&&Xe!=="suppressHydrationWarning"&&(n.hasOwnProperty(Xe)?(Me!=null&&Xe==="onScroll"&&Ur("scroll",c),Z||Pe===Me||(Z=[])):(Z=Z||[]).push(Xe,Me))}g&&(Z=Z||[]).push("style",g);var Xe=Z;(A.updateQueue=Xe)&&(A.flags|=4)}},dv=function(c,A,g,w){g!==w&&(A.flags|=4)};function YA(c,A){if(!nt)switch(c.tailMode){case"hidden":A=c.tail;for(var g=null;A!==null;)A.alternate!==null&&(g=A),A=A.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var w=null;g!==null;)g.alternate!==null&&(w=g),g=g.sibling;w===null?A||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function tn(c){var A=c.alternate!==null&&c.alternate.child===c.child,g=0,w=0;if(A)for(var T=c.child;T!==null;)g|=T.lanes|T.childLanes,w|=T.subtreeFlags&14680064,w|=T.flags&14680064,T.return=c,T=T.sibling;else for(T=c.child;T!==null;)g|=T.lanes|T.childLanes,w|=T.subtreeFlags,w|=T.flags,T.return=c,T=T.sibling;return c.subtreeFlags|=w,c.childLanes=g,A}function $B(c,A,g){var w=A.pendingProps;switch(Ye(A),A.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(A),null;case 1:return Za(A.type)&&du(),tn(A),null;case 3:return w=A.stateNode,xi(),kr(Xa),kr(ia),zA(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(c===null||c.child===null)&&(ls(A)?A.flags|=4:c===null||c.memoizedState.isDehydrated&&(A.flags&256)===0||(A.flags|=1024,it!==null&&(e0(it),it=null))),qp(c,A),tn(A),null;case 5:WA(A);var T=Ki(So.current);if(g=A.type,c!==null&&A.stateNode!=null)cv(c,A,g,w,T),c.ref!==A.ref&&(A.flags|=512,A.flags|=2097152);else{if(!w){if(A.stateNode===null)throw Error(r(166));return tn(A),null}if(c=Ki(Js.current),ls(A)){w=A.stateNode,g=A.type;var Z=A.memoizedProps;switch(w[pi]=A,w[ql]=Z,c=(A.mode&1)!==0,g){case"dialog":Ur("cancel",w),Ur("close",w);break;case"iframe":case"object":case"embed":Ur("load",w);break;case"video":case"audio":for(T=0;T<jo.length;T++)Ur(jo[T],w);break;case"source":Ur("error",w);break;case"img":case"image":case"link":Ur("error",w),Ur("load",w);break;case"details":Ur("toggle",w);break;case"input":ce(w,Z),Ur("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!Z.multiple},Ur("invalid",w);break;case"textarea":G(w,Z),Ur("invalid",w)}ct(g,Z),T=null;for(var xe in Z)if(Z.hasOwnProperty(xe)){var Pe=Z[xe];xe==="children"?typeof Pe=="string"?w.textContent!==Pe&&(Z.suppressHydrationWarning!==!0&&cu(w.textContent,Pe,c),T=["children",Pe]):typeof Pe=="number"&&w.textContent!==""+Pe&&(Z.suppressHydrationWarning!==!0&&cu(w.textContent,Pe,c),T=["children",""+Pe]):n.hasOwnProperty(xe)&&Pe!=null&&xe==="onScroll"&&Ur("scroll",w)}switch(g){case"input":ye(w),Le(w,Z,!0);break;case"textarea":ye(w),ge(w);break;case"select":case"option":break;default:typeof Z.onClick=="function"&&(w.onclick=Hl)}w=T,A.updateQueue=w,w!==null&&(A.flags|=4)}else{xe=T.nodeType===9?T:T.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=oe(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=xe.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof w.is=="string"?c=xe.createElement(g,{is:w.is}):(c=xe.createElement(g),g==="select"&&(xe=c,w.multiple?xe.multiple=!0:w.size&&(xe.size=w.size))):c=xe.createElementNS(c,g),c[pi]=A,c[ql]=w,lv(c,A,!1,!1),A.stateNode=c;e:{switch(xe=bt(g,w),g){case"dialog":Ur("cancel",c),Ur("close",c),T=w;break;case"iframe":case"object":case"embed":Ur("load",c),T=w;break;case"video":case"audio":for(T=0;T<jo.length;T++)Ur(jo[T],c);T=w;break;case"source":Ur("error",c),T=w;break;case"img":case"image":case"link":Ur("error",c),Ur("load",c),T=w;break;case"details":Ur("toggle",c),T=w;break;case"input":ce(c,w),T=je(c,w),Ur("invalid",c);break;case"option":T=w;break;case"select":c._wrapperState={wasMultiple:!!w.multiple},T=K({},w,{value:void 0}),Ur("invalid",c);break;case"textarea":G(c,w),T=Re(c,w),Ur("invalid",c);break;default:T=w}ct(g,T),Pe=T;for(Z in Pe)if(Pe.hasOwnProperty(Z)){var Me=Pe[Z];Z==="style"?lt(c,Me):Z==="dangerouslySetInnerHTML"?(Me=Me?Me.__html:void 0,Me!=null&&Fe(c,Me)):Z==="children"?typeof Me=="string"?(g!=="textarea"||Me!=="")&&Qe(c,Me):typeof Me=="number"&&Qe(c,""+Me):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(n.hasOwnProperty(Z)?Me!=null&&Z==="onScroll"&&Ur("scroll",c):Me!=null&&B(c,Z,Me,xe))}switch(g){case"input":ye(c),Le(c,w,!1);break;case"textarea":ye(c),ge(c);break;case"option":w.value!=null&&c.setAttribute("value",""+ne(w.value));break;case"select":c.multiple=!!w.multiple,Z=w.value,Z!=null?Se(c,!!w.multiple,Z,!1):w.defaultValue!=null&&Se(c,!!w.multiple,w.defaultValue,!0);break;default:typeof T.onClick=="function"&&(c.onclick=Hl)}switch(g){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(A.flags|=4)}A.ref!==null&&(A.flags|=512,A.flags|=2097152)}return tn(A),null;case 6:if(c&&A.stateNode!=null)dv(c,A,c.memoizedProps,w);else{if(typeof w!="string"&&A.stateNode===null)throw Error(r(166));if(g=Ki(So.current),Ki(Js.current),ls(A)){if(w=A.stateNode,g=A.memoizedProps,w[pi]=A,(Z=w.nodeValue!==g)&&(c=Ze,c!==null))switch(c.tag){case 3:cu(w.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&cu(w.nodeValue,g,(c.mode&1)!==0)}Z&&(A.flags|=4)}else w=(g.nodeType===9?g:g.ownerDocument).createTextNode(w),w[pi]=A,A.stateNode=w}return tn(A),null;case 13:if(kr(Kr),w=A.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(nt&&tt!==null&&(A.mode&1)!==0&&(A.flags&128)===0)rr(),Bt(),A.flags|=98560,Z=!1;else if(Z=ls(A),w!==null&&w.dehydrated!==null){if(c===null){if(!Z)throw Error(r(318));if(Z=A.memoizedState,Z=Z!==null?Z.dehydrated:null,!Z)throw Error(r(317));Z[pi]=A}else Bt(),(A.flags&128)===0&&(A.memoizedState=null),A.flags|=4;tn(A),Z=!1}else it!==null&&(e0(it),it=null),Z=!0;if(!Z)return A.flags&65536?A:null}return(A.flags&128)!==0?(A.lanes=g,A):(w=w!==null,w!==(c!==null&&c.memoizedState!==null)&&w&&(A.child.flags|=8192,(A.mode&1)!==0&&(c===null||(Kr.current&1)!==0?la===0&&(la=3):s0())),A.updateQueue!==null&&(A.flags|=4),tn(A),null);case 4:return xi(),qp(c,A),c===null&&al(A.stateNode.containerInfo),tn(A),null;case 10:return Jr(A.type._context),tn(A),null;case 17:return Za(A.type)&&du(),tn(A),null;case 19:if(kr(Kr),Z=A.memoizedState,Z===null)return tn(A),null;if(w=(A.flags&128)!==0,xe=Z.rendering,xe===null)if(w)YA(Z,!1);else{if(la!==0||c!==null&&(c.flags&128)!==0)for(c=A.child;c!==null;){if(xe=Jn(c),xe!==null){for(A.flags|=128,YA(Z,!1),w=xe.updateQueue,w!==null&&(A.updateQueue=w,A.flags|=4),A.subtreeFlags=0,w=g,g=A.child;g!==null;)Z=g,c=w,Z.flags&=14680066,xe=Z.alternate,xe===null?(Z.childLanes=0,Z.lanes=c,Z.child=null,Z.subtreeFlags=0,Z.memoizedProps=null,Z.memoizedState=null,Z.updateQueue=null,Z.dependencies=null,Z.stateNode=null):(Z.childLanes=xe.childLanes,Z.lanes=xe.lanes,Z.child=xe.child,Z.subtreeFlags=0,Z.deletions=null,Z.memoizedProps=xe.memoizedProps,Z.memoizedState=xe.memoizedState,Z.updateQueue=xe.updateQueue,Z.type=xe.type,c=xe.dependencies,Z.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return Er(Kr,Kr.current&1|2),A.child}c=c.sibling}Z.tail!==null&&Ir()>ju&&(A.flags|=128,w=!0,YA(Z,!1),A.lanes=4194304)}else{if(!w)if(c=Jn(xe),c!==null){if(A.flags|=128,w=!0,g=c.updateQueue,g!==null&&(A.updateQueue=g,A.flags|=4),YA(Z,!0),Z.tail===null&&Z.tailMode==="hidden"&&!xe.alternate&&!nt)return tn(A),null}else 2*Ir()-Z.renderingStartTime>ju&&g!==1073741824&&(A.flags|=128,w=!0,YA(Z,!1),A.lanes=4194304);Z.isBackwards?(xe.sibling=A.child,A.child=xe):(g=Z.last,g!==null?g.sibling=xe:A.child=xe,Z.last=xe)}return Z.tail!==null?(A=Z.tail,Z.rendering=A,Z.tail=A.sibling,Z.renderingStartTime=Ir(),A.sibling=null,g=Kr.current,Er(Kr,w?g&1|2:g&1),A):(tn(A),null);case 22:case 23:return r0(),w=A.memoizedState!==null,c!==null&&c.memoizedState!==null!==w&&(A.flags|=8192),w&&(A.mode&1)!==0?(ei&1073741824)!==0&&(tn(A),A.subtreeFlags&6&&(A.flags|=8192)):tn(A),null;case 24:return null;case 25:return null}throw Error(r(156,A.tag))}function WB(c,A){switch(Ye(A),A.tag){case 1:return Za(A.type)&&du(),c=A.flags,c&65536?(A.flags=c&-65537|128,A):null;case 3:return xi(),kr(Xa),kr(ia),zA(),c=A.flags,(c&65536)!==0&&(c&128)===0?(A.flags=c&-65537|128,A):null;case 5:return WA(A),null;case 13:if(kr(Kr),c=A.memoizedState,c!==null&&c.dehydrated!==null){if(A.alternate===null)throw Error(r(340));Bt()}return c=A.flags,c&65536?(A.flags=c&-65537|128,A):null;case 19:return kr(Kr),null;case 4:return xi(),null;case 10:return Jr(A.type._context),null;case 22:case 23:return r0(),null;case 24:return null;default:return null}}var rf=!1,rn=!1,KB=typeof WeakSet=="function"?WeakSet:Set,Ft=null;function vu(c,A){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(w){Es(c,A,w)}else g.current=null}function $p(c,A,g){try{g()}catch(w){Es(c,A,w)}}var uv=!1;function zB(c,A){if(sd=_l,c=_A(),su(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var w=g.getSelection&&g.getSelection();if(w&&w.rangeCount!==0){g=w.anchorNode;var T=w.anchorOffset,Z=w.focusNode;w=w.focusOffset;try{g.nodeType,Z.nodeType}catch{g=null;break e}var xe=0,Pe=-1,Me=-1,Xe=0,At=0,mt=c,ut=null;t:for(;;){for(var Nt;mt!==g||T!==0&&mt.nodeType!==3||(Pe=xe+T),mt!==Z||w!==0&&mt.nodeType!==3||(Me=xe+w),mt.nodeType===3&&(xe+=mt.nodeValue.length),(Nt=mt.firstChild)!==null;)ut=mt,mt=Nt;for(;;){if(mt===c)break t;if(ut===g&&++Xe===T&&(Pe=xe),ut===Z&&++At===w&&(Me=xe),(Nt=mt.nextSibling)!==null)break;mt=ut,ut=mt.parentNode}mt=Nt}g=Pe===-1||Me===-1?null:{start:Pe,end:Me}}else g=null}g=g||{start:0,end:0}}else g=null;for(il={focusedElem:c,selectionRange:g},_l=!1,Ft=A;Ft!==null;)if(A=Ft,c=A.child,(A.subtreeFlags&1028)!==0&&c!==null)c.return=A,Ft=c;else for(;Ft!==null;){A=Ft;try{var It=A.alternate;if((A.flags&1024)!==0)switch(A.tag){case 0:case 11:case 15:break;case 1:if(It!==null){var Tt=It.memoizedProps,Ms=It.memoizedState,Ge=A.stateNode,He=Ge.getSnapshotBeforeUpdate(A.elementType===A.type?Tt:Vi(A.type,Tt),Ms);Ge.__reactInternalSnapshotBeforeUpdate=He}break;case 3:var Je=A.stateNode.containerInfo;Je.nodeType===1?Je.textContent="":Je.nodeType===9&&Je.documentElement&&Je.removeChild(Je.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(gt){Es(A,A.return,gt)}if(c=A.sibling,c!==null){c.return=A.return,Ft=c;break}Ft=A.return}return It=uv,uv=!1,It}function JA(c,A,g){var w=A.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var T=w=w.next;do{if((T.tag&c)===c){var Z=T.destroy;T.destroy=void 0,Z!==void 0&&$p(A,g,Z)}T=T.next}while(T!==w)}}function sf(c,A){if(A=A.updateQueue,A=A!==null?A.lastEffect:null,A!==null){var g=A=A.next;do{if((g.tag&c)===c){var w=g.create;g.destroy=w()}g=g.next}while(g!==A)}}function Wp(c){var A=c.ref;if(A!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof A=="function"?A(c):A.current=c}}function Av(c){var A=c.alternate;A!==null&&(c.alternate=null,Av(A)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(A=c.stateNode,A!==null&&(delete A[pi],delete A[ql],delete A[Ja],delete A[Fp],delete A[Ep])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function mv(c){return c.tag===5||c.tag===3||c.tag===4}function hv(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||mv(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Kp(c,A,g){var w=c.tag;if(w===5||w===6)c=c.stateNode,A?g.nodeType===8?g.parentNode.insertBefore(c,A):g.insertBefore(c,A):(g.nodeType===8?(A=g.parentNode,A.insertBefore(c,g)):(A=g,A.appendChild(c)),g=g._reactRootContainer,g!=null||A.onclick!==null||(A.onclick=Hl));else if(w!==4&&(c=c.child,c!==null))for(Kp(c,A,g),c=c.sibling;c!==null;)Kp(c,A,g),c=c.sibling}function zp(c,A,g){var w=c.tag;if(w===5||w===6)c=c.stateNode,A?g.insertBefore(c,A):g.appendChild(c);else if(w!==4&&(c=c.child,c!==null))for(zp(c,A,g),c=c.sibling;c!==null;)zp(c,A,g),c=c.sibling}var La=null,Yi=!1;function Yl(c,A,g){for(g=g.child;g!==null;)fv(c,A,g),g=g.sibling}function fv(c,A,g){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(qa,g)}catch{}switch(g.tag){case 5:rn||vu(g,A);case 6:var w=La,T=Yi;La=null,Yl(c,A,g),La=w,Yi=T,La!==null&&(Yi?(c=La,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):La.removeChild(g.stateNode));break;case 18:La!==null&&(Yi?(c=La,g=g.stateNode,c.nodeType===8?HA(c.parentNode,g):c.nodeType===1&&HA(c,g),di(c)):HA(La,g.stateNode));break;case 4:w=La,T=Yi,La=g.stateNode.containerInfo,Yi=!0,Yl(c,A,g),La=w,Yi=T;break;case 0:case 11:case 14:case 15:if(!rn&&(w=g.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){T=w=w.next;do{var Z=T,xe=Z.destroy;Z=Z.tag,xe!==void 0&&((Z&2)!==0||(Z&4)!==0)&&$p(g,A,xe),T=T.next}while(T!==w)}Yl(c,A,g);break;case 1:if(!rn&&(vu(g,A),w=g.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=g.memoizedProps,w.state=g.memoizedState,w.componentWillUnmount()}catch(Pe){Es(g,A,Pe)}Yl(c,A,g);break;case 21:Yl(c,A,g);break;case 22:g.mode&1?(rn=(w=rn)||g.memoizedState!==null,Yl(c,A,g),rn=w):Yl(c,A,g);break;default:Yl(c,A,g)}}function gv(c){var A=c.updateQueue;if(A!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new KB),A.forEach(function(w){var T=r3.bind(null,c,w);g.has(w)||(g.add(w),w.then(T,T))})}}function Ji(c,A){var g=A.deletions;if(g!==null)for(var w=0;w<g.length;w++){var T=g[w];try{var Z=c,xe=A,Pe=xe;e:for(;Pe!==null;){switch(Pe.tag){case 5:La=Pe.stateNode,Yi=!1;break e;case 3:La=Pe.stateNode.containerInfo,Yi=!0;break e;case 4:La=Pe.stateNode.containerInfo,Yi=!0;break e}Pe=Pe.return}if(La===null)throw Error(r(160));fv(Z,xe,T),La=null,Yi=!1;var Me=T.alternate;Me!==null&&(Me.return=null),T.return=null}catch(Xe){Es(T,A,Xe)}}if(A.subtreeFlags&12854)for(A=A.child;A!==null;)pv(A,c),A=A.sibling}function pv(c,A){var g=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Ji(A,c),ko(c),w&4){try{JA(3,c,c.return),sf(3,c)}catch(Tt){Es(c,c.return,Tt)}try{JA(5,c,c.return)}catch(Tt){Es(c,c.return,Tt)}}break;case 1:Ji(A,c),ko(c),w&512&&g!==null&&vu(g,g.return);break;case 5:if(Ji(A,c),ko(c),w&512&&g!==null&&vu(g,g.return),c.flags&32){var T=c.stateNode;try{Qe(T,"")}catch(Tt){Es(c,c.return,Tt)}}if(w&4&&(T=c.stateNode,T!=null)){var Z=c.memoizedProps,xe=g!==null?g.memoizedProps:Z,Pe=c.type,Me=c.updateQueue;if(c.updateQueue=null,Me!==null)try{Pe==="input"&&Z.type==="radio"&&Z.name!=null&&Te(T,Z),bt(Pe,xe);var Xe=bt(Pe,Z);for(xe=0;xe<Me.length;xe+=2){var At=Me[xe],mt=Me[xe+1];At==="style"?lt(T,mt):At==="dangerouslySetInnerHTML"?Fe(T,mt):At==="children"?Qe(T,mt):B(T,At,mt,Xe)}switch(Pe){case"input":We(T,Z);break;case"textarea":ue(T,Z);break;case"select":var ut=T._wrapperState.wasMultiple;T._wrapperState.wasMultiple=!!Z.multiple;var Nt=Z.value;Nt!=null?Se(T,!!Z.multiple,Nt,!1):ut!==!!Z.multiple&&(Z.defaultValue!=null?Se(T,!!Z.multiple,Z.defaultValue,!0):Se(T,!!Z.multiple,Z.multiple?[]:"",!1))}T[ql]=Z}catch(Tt){Es(c,c.return,Tt)}}break;case 6:if(Ji(A,c),ko(c),w&4){if(c.stateNode===null)throw Error(r(162));T=c.stateNode,Z=c.memoizedProps;try{T.nodeValue=Z}catch(Tt){Es(c,c.return,Tt)}}break;case 3:if(Ji(A,c),ko(c),w&4&&g!==null&&g.memoizedState.isDehydrated)try{di(A.containerInfo)}catch(Tt){Es(c,c.return,Tt)}break;case 4:Ji(A,c),ko(c);break;case 13:Ji(A,c),ko(c),T=c.child,T.flags&8192&&(Z=T.memoizedState!==null,T.stateNode.isHidden=Z,!Z||T.alternate!==null&&T.alternate.memoizedState!==null||(Yp=Ir())),w&4&&gv(c);break;case 22:if(At=g!==null&&g.memoizedState!==null,c.mode&1?(rn=(Xe=rn)||At,Ji(A,c),rn=Xe):Ji(A,c),ko(c),w&8192){if(Xe=c.memoizedState!==null,(c.stateNode.isHidden=Xe)&&!At&&(c.mode&1)!==0)for(Ft=c,At=c.child;At!==null;){for(mt=Ft=At;Ft!==null;){switch(ut=Ft,Nt=ut.child,ut.tag){case 0:case 11:case 14:case 15:JA(4,ut,ut.return);break;case 1:vu(ut,ut.return);var It=ut.stateNode;if(typeof It.componentWillUnmount=="function"){w=ut,g=ut.return;try{A=w,It.props=A.memoizedProps,It.state=A.memoizedState,It.componentWillUnmount()}catch(Tt){Es(w,g,Tt)}}break;case 5:vu(ut,ut.return);break;case 22:if(ut.memoizedState!==null){yv(mt);continue}}Nt!==null?(Nt.return=ut,Ft=Nt):yv(mt)}At=At.sibling}e:for(At=null,mt=c;;){if(mt.tag===5){if(At===null){At=mt;try{T=mt.stateNode,Xe?(Z=T.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none"):(Pe=mt.stateNode,Me=mt.memoizedProps.style,xe=Me!=null&&Me.hasOwnProperty("display")?Me.display:null,Pe.style.display=ot("display",xe))}catch(Tt){Es(c,c.return,Tt)}}}else if(mt.tag===6){if(At===null)try{mt.stateNode.nodeValue=Xe?"":mt.memoizedProps}catch(Tt){Es(c,c.return,Tt)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===c)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===c)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===c)break e;At===mt&&(At=null),mt=mt.return}At===mt&&(At=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:Ji(A,c),ko(c),w&4&&gv(c);break;case 21:break;default:Ji(A,c),ko(c)}}function ko(c){var A=c.flags;if(A&2){try{e:{for(var g=c.return;g!==null;){if(mv(g)){var w=g;break e}g=g.return}throw Error(r(160))}switch(w.tag){case 5:var T=w.stateNode;w.flags&32&&(Qe(T,""),w.flags&=-33);var Z=hv(c);zp(c,Z,T);break;case 3:case 4:var xe=w.stateNode.containerInfo,Pe=hv(c);Kp(c,Pe,xe);break;default:throw Error(r(161))}}catch(Me){Es(c,c.return,Me)}c.flags&=-3}A&4096&&(c.flags&=-4097)}function GB(c,A,g){Ft=c,xv(c)}function xv(c,A,g){for(var w=(c.mode&1)!==0;Ft!==null;){var T=Ft,Z=T.child;if(T.tag===22&&w){var xe=T.memoizedState!==null||rf;if(!xe){var Pe=T.alternate,Me=Pe!==null&&Pe.memoizedState!==null||rn;Pe=rf;var Xe=rn;if(rf=xe,(rn=Me)&&!Xe)for(Ft=T;Ft!==null;)xe=Ft,Me=xe.child,xe.tag===22&&xe.memoizedState!==null?vv(T):Me!==null?(Me.return=xe,Ft=Me):vv(T);for(;Z!==null;)Ft=Z,xv(Z),Z=Z.sibling;Ft=T,rf=Pe,rn=Xe}bv(c)}else(T.subtreeFlags&8772)!==0&&Z!==null?(Z.return=T,Ft=Z):bv(c)}}function bv(c){for(;Ft!==null;){var A=Ft;if((A.flags&8772)!==0){var g=A.alternate;try{if((A.flags&8772)!==0)switch(A.tag){case 0:case 11:case 15:rn||sf(5,A);break;case 1:var w=A.stateNode;if(A.flags&4&&!rn)if(g===null)w.componentDidMount();else{var T=A.elementType===A.type?g.memoizedProps:Vi(A.type,g.memoizedProps);w.componentDidUpdate(T,g.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var Z=A.updateQueue;Z!==null&&Fn(A,Z,w);break;case 3:var xe=A.updateQueue;if(xe!==null){if(g=null,A.child!==null)switch(A.child.tag){case 5:g=A.child.stateNode;break;case 1:g=A.child.stateNode}Fn(A,xe,g)}break;case 5:var Pe=A.stateNode;if(g===null&&A.flags&4){g=Pe;var Me=A.memoizedProps;switch(A.type){case"button":case"input":case"select":case"textarea":Me.autoFocus&&g.focus();break;case"img":Me.src&&(g.src=Me.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(A.memoizedState===null){var Xe=A.alternate;if(Xe!==null){var At=Xe.memoizedState;if(At!==null){var mt=At.dehydrated;mt!==null&&di(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}rn||A.flags&512&&Wp(A)}catch(ut){Es(A,A.return,ut)}}if(A===c){Ft=null;break}if(g=A.sibling,g!==null){g.return=A.return,Ft=g;break}Ft=A.return}}function yv(c){for(;Ft!==null;){var A=Ft;if(A===c){Ft=null;break}var g=A.sibling;if(g!==null){g.return=A.return,Ft=g;break}Ft=A.return}}function vv(c){for(;Ft!==null;){var A=Ft;try{switch(A.tag){case 0:case 11:case 15:var g=A.return;try{sf(4,A)}catch(Me){Es(A,g,Me)}break;case 1:var w=A.stateNode;if(typeof w.componentDidMount=="function"){var T=A.return;try{w.componentDidMount()}catch(Me){Es(A,T,Me)}}var Z=A.return;try{Wp(A)}catch(Me){Es(A,Z,Me)}break;case 5:var xe=A.return;try{Wp(A)}catch(Me){Es(A,xe,Me)}}}catch(Me){Es(A,A.return,Me)}if(A===c){Ft=null;break}var Pe=A.sibling;if(Pe!==null){Pe.return=A.return,Ft=Pe;break}Ft=A.return}}var VB=Math.ceil,af=F.ReactCurrentDispatcher,Gp=F.ReactCurrentOwner,vi=F.ReactCurrentBatchConfig,jr=0,va=null,Xs=null,Ta=0,ei=0,wu=Vn(0),la=0,XA=null,cd=0,nf=0,Vp=0,ZA=null,_n=null,Yp=0,ju=1/0,Al=null,of=!1,Jp=null,Jl=null,lf=!1,Xl=null,cf=0,em=0,Xp=null,df=-1,uf=0;function yn(){return(jr&6)!==0?Ir():df!==-1?df:df=Ir()}function Zl(c){return(c.mode&1)===0?1:(jr&2)!==0&&Ta!==0?Ta&-Ta:bs.transition!==null?(uf===0&&(uf=zd()),uf):(c=xr,c!==0||(c=window.event,c=c===void 0?16:Jo(c.type)),c)}function Xi(c,A,g,w){if(50<em)throw em=0,Xp=null,Error(r(185));zo(c,g,w),((jr&2)===0||c!==va)&&(c===va&&((jr&2)===0&&(nf|=g),la===4&&ec(c,Ta)),Pn(c,w),g===1&&jr===0&&(A.mode&1)===0&&(ju=Ir()+500,nd&&ae()))}function Pn(c,A){var g=c.callbackNode;gs(c,A);var w=$a(c,c===va?Ta:0);if(w===0)g!==null&&Hn(g),c.callbackNode=null,c.callbackPriority=0;else if(A=w&-w,c.callbackPriority!==A){if(g!=null&&Hn(g),A===1)c.tag===0?W(jv.bind(null,c)):N(jv.bind(null,c)),Bp(function(){(jr&6)===0&&ae()}),g=null;else{switch(Ii(w)){case 1:g=Pi;break;case 4:g=aa;break;case 16:g=ii;break;case 536870912:g=ho;break;default:g=ii}g=_v(g,wv.bind(null,c))}c.callbackPriority=A,c.callbackNode=g}}function wv(c,A){if(df=-1,uf=0,(jr&6)!==0)throw Error(r(327));var g=c.callbackNode;if(Nu()&&c.callbackNode!==g)return null;var w=$a(c,c===va?Ta:0);if(w===0)return null;if((w&30)!==0||(w&c.expiredLanes)!==0||A)A=Af(c,w);else{A=w;var T=jr;jr|=2;var Z=Cv();(va!==c||Ta!==A)&&(Al=null,ju=Ir()+500,ud(c,A));do try{XB();break}catch(Pe){Nv(c,Pe)}while(!0);vr(),af.current=Z,jr=T,Xs!==null?A=0:(va=null,Ta=0,A=la)}if(A!==0){if(A===2&&(T=Ko(c),T!==0&&(w=T,A=Zp(c,T))),A===1)throw g=XA,ud(c,0),ec(c,w),Pn(c,Ir()),g;if(A===6)ec(c,w);else{if(T=c.current.alternate,(w&30)===0&&!YB(T)&&(A=Af(c,w),A===2&&(Z=Ko(c),Z!==0&&(w=Z,A=Zp(c,Z))),A===1))throw g=XA,ud(c,0),ec(c,w),Pn(c,Ir()),g;switch(c.finishedWork=T,c.finishedLanes=w,A){case 0:case 1:throw Error(r(345));case 2:Ad(c,_n,Al);break;case 3:if(ec(c,w),(w&130023424)===w&&(A=Yp+500-Ir(),10<A)){if($a(c,0)!==0)break;if(T=c.suspendedLanes,(T&w)!==w){yn(),c.pingedLanes|=c.suspendedLanes&T;break}c.timeoutHandle=OA(Ad.bind(null,c,_n,Al),A);break}Ad(c,_n,Al);break;case 4:if(ec(c,w),(w&4194240)===w)break;for(A=c.eventTimes,T=-1;0<w;){var xe=31-fa(w);Z=1<<xe,xe=A[xe],xe>T&&(T=xe),w&=~Z}if(w=T,w=Ir()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*VB(w/1960))-w,10<w){c.timeoutHandle=OA(Ad.bind(null,c,_n,Al),w);break}Ad(c,_n,Al);break;case 5:Ad(c,_n,Al);break;default:throw Error(r(329))}}}return Pn(c,Ir()),c.callbackNode===g?wv.bind(null,c):null}function Zp(c,A){var g=ZA;return c.current.memoizedState.isDehydrated&&(ud(c,A).flags|=256),c=Af(c,A),c!==2&&(A=_n,_n=g,A!==null&&e0(A)),c}function e0(c){_n===null?_n=c:_n.push.apply(_n,c)}function YB(c){for(var A=c;;){if(A.flags&16384){var g=A.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var w=0;w<g.length;w++){var T=g[w],Z=T.getSnapshot;T=T.value;try{if(!Ls(Z(),T))return!1}catch{return!1}}}if(g=A.child,A.subtreeFlags&16384&&g!==null)g.return=A,A=g;else{if(A===c)break;for(;A.sibling===null;){if(A.return===null||A.return===c)return!0;A=A.return}A.sibling.return=A.return,A=A.sibling}}return!0}function ec(c,A){for(A&=~Vp,A&=~nf,c.suspendedLanes|=A,c.pingedLanes&=~A,c=c.expirationTimes;0<A;){var g=31-fa(A),w=1<<g;c[g]=-1,A&=~w}}function jv(c){if((jr&6)!==0)throw Error(r(327));Nu();var A=$a(c,0);if((A&1)===0)return Pn(c,Ir()),null;var g=Af(c,A);if(c.tag!==0&&g===2){var w=Ko(c);w!==0&&(A=w,g=Zp(c,w))}if(g===1)throw g=XA,ud(c,0),ec(c,A),Pn(c,Ir()),g;if(g===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=A,Ad(c,_n,Al),Pn(c,Ir()),null}function t0(c,A){var g=jr;jr|=1;try{return c(A)}finally{jr=g,jr===0&&(ju=Ir()+500,nd&&ae())}}function dd(c){Xl!==null&&Xl.tag===0&&(jr&6)===0&&Nu();var A=jr;jr|=1;var g=vi.transition,w=xr;try{if(vi.transition=null,xr=1,c)return c()}finally{xr=w,vi.transition=g,jr=A,(jr&6)===0&&ae()}}function r0(){ei=wu.current,kr(wu)}function ud(c,A){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,qh(g)),Xs!==null)for(g=Xs.return;g!==null;){var w=g;switch(Ye(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&du();break;case 3:xi(),kr(Xa),kr(ia),zA();break;case 5:WA(w);break;case 4:xi();break;case 13:kr(Kr);break;case 19:kr(Kr);break;case 10:Jr(w.type._context);break;case 22:case 23:r0()}g=g.return}if(va=c,Xs=c=tc(c.current,null),Ta=ei=A,la=0,XA=null,Vp=nf=cd=0,_n=ZA=null,Lr!==null){for(A=0;A<Lr.length;A++)if(g=Lr[A],w=g.interleaved,w!==null){g.interleaved=null;var T=w.next,Z=g.pending;if(Z!==null){var xe=Z.next;Z.next=T,w.next=xe}g.pending=w}Lr=null}return c}function Nv(c,A){do{var g=Xs;try{if(vr(),uu.current=Xh,zl){for(var w=Xr.memoizedState;w!==null;){var T=w.queue;T!==null&&(T.pending=null),w=w.next}zl=!1}if(bi=0,js=Fs=Xr=null,zi=!1,Gl=0,Gp.current=null,g===null||g.return===null){la=1,XA=A,Xs=null;break}e:{var Z=c,xe=g.return,Pe=g,Me=A;if(A=Ta,Pe.flags|=32768,Me!==null&&typeof Me=="object"&&typeof Me.then=="function"){var Xe=Me,At=Pe,mt=At.tag;if((At.mode&1)===0&&(mt===0||mt===11||mt===15)){var ut=At.alternate;ut?(At.updateQueue=ut.updateQueue,At.memoizedState=ut.memoizedState,At.lanes=ut.lanes):(At.updateQueue=null,At.memoizedState=null)}var Nt=Vy(xe);if(Nt!==null){Nt.flags&=-257,Yy(Nt,xe,Pe,Z,A),Nt.mode&1&&Gy(Z,Xe,A),A=Nt,Me=Xe;var It=A.updateQueue;if(It===null){var Tt=new Set;Tt.add(Me),A.updateQueue=Tt}else It.add(Me);break e}else{if((A&1)===0){Gy(Z,Xe,A),s0();break e}Me=Error(r(426))}}else if(nt&&Pe.mode&1){var Ms=Vy(xe);if(Ms!==null){(Ms.flags&65536)===0&&(Ms.flags|=256),Yy(Ms,xe,Pe,Z,A),pt(yu(Me,Pe));break e}}Z=Me=yu(Me,Pe),la!==4&&(la=2),ZA===null?ZA=[Z]:ZA.push(Z),Z=xe;do{switch(Z.tag){case 3:Z.flags|=65536,A&=-A,Z.lanes|=A;var Ge=Ky(Z,Me,A);Dr(Z,Ge);break e;case 1:Pe=Me;var He=Z.type,Je=Z.stateNode;if((Z.flags&128)===0&&(typeof He.getDerivedStateFromError=="function"||Je!==null&&typeof Je.componentDidCatch=="function"&&(Jl===null||!Jl.has(Je)))){Z.flags|=65536,A&=-A,Z.lanes|=A;var gt=zy(Z,Pe,A);Dr(Z,gt);break e}}Z=Z.return}while(Z!==null)}Bv(g)}catch(Rt){A=Rt,Xs===g&&g!==null&&(Xs=g=g.return);continue}break}while(!0)}function Cv(){var c=af.current;return af.current=Xh,c===null?Xh:c}function s0(){(la===0||la===3||la===2)&&(la=4),va===null||(cd&268435455)===0&&(nf&268435455)===0||ec(va,Ta)}function Af(c,A){var g=jr;jr|=2;var w=Cv();(va!==c||Ta!==A)&&(Al=null,ud(c,A));do try{JB();break}catch(T){Nv(c,T)}while(!0);if(vr(),jr=g,af.current=w,Xs!==null)throw Error(r(261));return va=null,Ta=0,la}function JB(){for(;Xs!==null;)Sv(Xs)}function XB(){for(;Xs!==null&&!Ho();)Sv(Xs)}function Sv(c){var A=Ev(c.alternate,c,ei);c.memoizedProps=c.pendingProps,A===null?Bv(c):Xs=A,Gp.current=null}function Bv(c){var A=c;do{var g=A.alternate;if(c=A.return,(A.flags&32768)===0){if(g=$B(g,A,ei),g!==null){Xs=g;return}}else{if(g=WB(g,A),g!==null){g.flags&=32767,Xs=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{la=6,Xs=null;return}}if(A=A.sibling,A!==null){Xs=A;return}Xs=A=c}while(A!==null);la===0&&(la=5)}function Ad(c,A,g){var w=xr,T=vi.transition;try{vi.transition=null,xr=1,ZB(c,A,g,w)}finally{vi.transition=T,xr=w}return null}function ZB(c,A,g,w){do Nu();while(Xl!==null);if((jr&6)!==0)throw Error(r(327));g=c.finishedWork;var T=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var Z=g.lanes|g.childLanes;if(oi(c,Z),c===va&&(Xs=va=null,Ta=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||lf||(lf=!0,_v(ii,function(){return Nu(),null})),Z=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||Z){Z=vi.transition,vi.transition=null;var xe=xr;xr=1;var Pe=jr;jr|=4,Gp.current=null,zB(c,g),pv(g,c),Mh(il),_l=!!sd,il=sd=null,c.current=g,GB(g),Sl(),jr=Pe,xr=xe,vi.transition=Z}else c.current=g;if(lf&&(lf=!1,Xl=c,cf=T),Z=c.pendingLanes,Z===0&&(Jl=null),Wd(g.stateNode),Pn(c,Ir()),A!==null)for(w=c.onRecoverableError,g=0;g<A.length;g++)T=A[g],w(T.value,{componentStack:T.stack,digest:T.digest});if(of)throw of=!1,c=Jp,Jp=null,c;return(cf&1)!==0&&c.tag!==0&&Nu(),Z=c.pendingLanes,(Z&1)!==0?c===Xp?em++:(em=0,Xp=c):em=0,ae(),null}function Nu(){if(Xl!==null){var c=Ii(cf),A=vi.transition,g=xr;try{if(vi.transition=null,xr=16>c?16:c,Xl===null)var w=!1;else{if(c=Xl,Xl=null,cf=0,(jr&6)!==0)throw Error(r(331));var T=jr;for(jr|=4,Ft=c.current;Ft!==null;){var Z=Ft,xe=Z.child;if((Ft.flags&16)!==0){var Pe=Z.deletions;if(Pe!==null){for(var Me=0;Me<Pe.length;Me++){var Xe=Pe[Me];for(Ft=Xe;Ft!==null;){var At=Ft;switch(At.tag){case 0:case 11:case 15:JA(8,At,Z)}var mt=At.child;if(mt!==null)mt.return=At,Ft=mt;else for(;Ft!==null;){At=Ft;var ut=At.sibling,Nt=At.return;if(Av(At),At===Xe){Ft=null;break}if(ut!==null){ut.return=Nt,Ft=ut;break}Ft=Nt}}}var It=Z.alternate;if(It!==null){var Tt=It.child;if(Tt!==null){It.child=null;do{var Ms=Tt.sibling;Tt.sibling=null,Tt=Ms}while(Tt!==null)}}Ft=Z}}if((Z.subtreeFlags&2064)!==0&&xe!==null)xe.return=Z,Ft=xe;else e:for(;Ft!==null;){if(Z=Ft,(Z.flags&2048)!==0)switch(Z.tag){case 0:case 11:case 15:JA(9,Z,Z.return)}var Ge=Z.sibling;if(Ge!==null){Ge.return=Z.return,Ft=Ge;break e}Ft=Z.return}}var He=c.current;for(Ft=He;Ft!==null;){xe=Ft;var Je=xe.child;if((xe.subtreeFlags&2064)!==0&&Je!==null)Je.return=xe,Ft=Je;else e:for(xe=He;Ft!==null;){if(Pe=Ft,(Pe.flags&2048)!==0)try{switch(Pe.tag){case 0:case 11:case 15:sf(9,Pe)}}catch(Rt){Es(Pe,Pe.return,Rt)}if(Pe===xe){Ft=null;break e}var gt=Pe.sibling;if(gt!==null){gt.return=Pe.return,Ft=gt;break e}Ft=Pe.return}}if(jr=T,ae(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(qa,c)}catch{}w=!0}return w}finally{xr=g,vi.transition=A}}return!1}function kv(c,A,g){A=yu(g,A),A=Ky(c,A,1),c=vs(c,A,1),A=yn(),c!==null&&(zo(c,1,A),Pn(c,A))}function Es(c,A,g){if(c.tag===3)kv(c,c,g);else for(;A!==null;){if(A.tag===3){kv(A,c,g);break}else if(A.tag===1){var w=A.stateNode;if(typeof A.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(Jl===null||!Jl.has(w))){c=yu(g,c),c=zy(A,c,1),A=vs(A,c,1),c=yn(),A!==null&&(zo(A,1,c),Pn(A,c));break}}A=A.return}}function e3(c,A,g){var w=c.pingCache;w!==null&&w.delete(A),A=yn(),c.pingedLanes|=c.suspendedLanes&g,va===c&&(Ta&g)===g&&(la===4||la===3&&(Ta&130023424)===Ta&&500>Ir()-Yp?ud(c,0):Vp|=g),Pn(c,A)}function Fv(c,A){A===0&&((c.mode&1)===0?A=1:(A=Nn,Nn<<=1,(Nn&130023424)===0&&(Nn=4194304)));var g=yn();c=Tr(c,A),c!==null&&(zo(c,A,g),Pn(c,g))}function t3(c){var A=c.memoizedState,g=0;A!==null&&(g=A.retryLane),Fv(c,g)}function r3(c,A){var g=0;switch(c.tag){case 13:var w=c.stateNode,T=c.memoizedState;T!==null&&(g=T.retryLane);break;case 19:w=c.stateNode;break;default:throw Error(r(314))}w!==null&&w.delete(A),Fv(c,g)}var Ev;Ev=function(c,A,g){if(c!==null)if(c.memoizedProps!==A.pendingProps||Xa.current)En=!0;else{if((c.lanes&g)===0&&(A.flags&128)===0)return En=!1,qB(c,A,g);En=(c.flags&131072)!==0}else En=!1,nt&&(A.flags&1048576)!==0&&Ke(A,we,A.index);switch(A.lanes=0,A.tag){case 2:var w=A.type;tf(c,A),c=A.pendingProps;var T=Wl(A,ia.current);cs(A,g),T=id(null,A,w,c,T,g);var Z=yi();return A.flags|=1,typeof T=="object"&&T!==null&&typeof T.render=="function"&&T.$$typeof===void 0?(A.tag=1,A.memoizedState=null,A.updateQueue=null,Za(w)?(Z=!0,cl(A)):Z=!1,A.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,oa(A),T.updater=Zh,A.stateNode=T,T._reactInternals=A,Up(A,w,c,g),A=Mp(null,A,w,!0,Z,g)):(A.tag=0,nt&&Z&&rt(A),bn(null,A,T,g),A=A.child),A;case 16:w=A.elementType;e:{switch(tf(c,A),c=A.pendingProps,T=w._init,w=T(w._payload),A.type=w,T=A.tag=a3(w),c=Vi(w,c),T){case 0:A=Dp(null,A,w,c,g);break e;case 1:A=rv(null,A,w,c,g);break e;case 11:A=Jy(null,A,w,c,g);break e;case 14:A=Xy(null,A,w,Vi(w.type,c),g);break e}throw Error(r(306,w,""))}return A;case 0:return w=A.type,T=A.pendingProps,T=A.elementType===w?T:Vi(w,T),Dp(c,A,w,T,g);case 1:return w=A.type,T=A.pendingProps,T=A.elementType===w?T:Vi(w,T),rv(c,A,w,T,g);case 3:e:{if(sv(A),c===null)throw Error(r(387));w=A.pendingProps,Z=A.memoizedState,T=Z.element,en(c,A),ya(A,w,null,g);var xe=A.memoizedState;if(w=xe.element,Z.isDehydrated)if(Z={element:w,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},A.updateQueue.baseState=Z,A.memoizedState=Z,A.flags&256){T=yu(Error(r(423)),A),A=av(c,A,w,g,T);break e}else if(w!==T){T=yu(Error(r(424)),A),A=av(c,A,w,g,T);break e}else for(tt=Ua(A.stateNode.containerInfo.firstChild),Ze=A,nt=!0,it=null,g=ss(A,null,w,g),A.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Bt(),w===T){A=ul(c,A,g);break e}bn(c,A,w,g)}A=A.child}return A;case 5:return zh(A),c===null&&_t(A),w=A.type,T=A.pendingProps,Z=c!==null?c.memoizedProps:null,xe=T.children,QA(w,T)?xe=null:Z!==null&&QA(w,Z)&&(A.flags|=32),tv(c,A),bn(c,A,xe,g),A.child;case 6:return c===null&&_t(A),null;case 13:return nv(c,A,g);case 4:return Kl(A,A.stateNode.containerInfo),w=A.pendingProps,c===null?A.child=Bs(A,null,w,g):bn(c,A,w,g),A.child;case 11:return w=A.type,T=A.pendingProps,T=A.elementType===w?T:Vi(w,T),Jy(c,A,w,T,g);case 7:return bn(c,A,A.pendingProps,g),A.child;case 8:return bn(c,A,A.pendingProps.children,g),A.child;case 12:return bn(c,A,A.pendingProps.children,g),A.child;case 10:e:{if(w=A.type._context,T=A.pendingProps,Z=A.memoizedProps,xe=T.value,Er(Ts,w._currentValue),w._currentValue=xe,Z!==null)if(Ls(Z.value,xe)){if(Z.children===T.children&&!Xa.current){A=ul(c,A,g);break e}}else for(Z=A.child,Z!==null&&(Z.return=A);Z!==null;){var Pe=Z.dependencies;if(Pe!==null){xe=Z.child;for(var Me=Pe.firstContext;Me!==null;){if(Me.context===w){if(Z.tag===1){Me=ys(-1,g&-g),Me.tag=2;var Xe=Z.updateQueue;if(Xe!==null){Xe=Xe.shared;var At=Xe.pending;At===null?Me.next=Me:(Me.next=At.next,At.next=Me),Xe.pending=Me}}Z.lanes|=g,Me=Z.alternate,Me!==null&&(Me.lanes|=g),wr(Z.return,g,A),Pe.lanes|=g;break}Me=Me.next}}else if(Z.tag===10)xe=Z.type===A.type?null:Z.child;else if(Z.tag===18){if(xe=Z.return,xe===null)throw Error(r(341));xe.lanes|=g,Pe=xe.alternate,Pe!==null&&(Pe.lanes|=g),wr(xe,g,A),xe=Z.sibling}else xe=Z.child;if(xe!==null)xe.return=Z;else for(xe=Z;xe!==null;){if(xe===A){xe=null;break}if(Z=xe.sibling,Z!==null){Z.return=xe.return,xe=Z;break}xe=xe.return}Z=xe}bn(c,A,T.children,g),A=A.child}return A;case 9:return T=A.type,w=A.pendingProps.children,cs(A,g),T=ds(T),w=w(T),A.flags|=1,bn(c,A,w,g),A.child;case 14:return w=A.type,T=Vi(w,A.pendingProps),T=Vi(w.type,T),Xy(c,A,w,T,g);case 15:return Zy(c,A,A.type,A.pendingProps,g);case 17:return w=A.type,T=A.pendingProps,T=A.elementType===w?T:Vi(w,T),tf(c,A),A.tag=1,Za(w)?(c=!0,cl(A)):c=!1,cs(A,g),$y(A,w,T),Up(A,w,T,g),Mp(null,A,w,!0,c,g);case 19:return ov(c,A,g);case 22:return ev(c,A,g)}throw Error(r(156,A.tag))};function _v(c,A){return _i(c,A)}function s3(c,A,g,w){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=A,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wi(c,A,g,w){return new s3(c,A,g,w)}function a0(c){return c=c.prototype,!(!c||!c.isReactComponent)}function a3(c){if(typeof c=="function")return a0(c)?1:0;if(c!=null){if(c=c.$$typeof,c===L)return 11;if(c===le)return 14}return 2}function tc(c,A){var g=c.alternate;return g===null?(g=wi(c.tag,A,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=A,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,A=c.dependencies,g.dependencies=A===null?null:{lanes:A.lanes,firstContext:A.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function mf(c,A,g,w,T,Z){var xe=2;if(w=c,typeof c=="function")a0(c)&&(xe=1);else if(typeof c=="string")xe=5;else e:switch(c){case P:return md(g.children,T,Z,A);case D:xe=8,T|=8;break;case _:return c=wi(12,g,A,T|2),c.elementType=_,c.lanes=Z,c;case E:return c=wi(13,g,A,T),c.elementType=E,c.lanes=Z,c;case O:return c=wi(19,g,A,T),c.elementType=O,c.lanes=Z,c;case V:return hf(g,T,Z,A);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case $:xe=10;break e;case k:xe=9;break e;case L:xe=11;break e;case le:xe=14;break e;case te:xe=16,w=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return A=wi(xe,g,A,T),A.elementType=c,A.type=w,A.lanes=Z,A}function md(c,A,g,w){return c=wi(7,c,w,A),c.lanes=g,c}function hf(c,A,g,w){return c=wi(22,c,w,A),c.elementType=V,c.lanes=g,c.stateNode={isHidden:!1},c}function n0(c,A,g){return c=wi(6,c,null,A),c.lanes=g,c}function i0(c,A,g){return A=wi(4,c.children!==null?c.children:[],c.key,A),A.lanes=g,A.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},A}function n3(c,A,g,w,T){this.tag=A,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oc(0),this.expirationTimes=Oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oc(0),this.identifierPrefix=w,this.onRecoverableError=T,this.mutableSourceEagerHydrationData=null}function o0(c,A,g,w,T,Z,xe,Pe,Me){return c=new n3(c,A,g,Pe,Me),A===1?(A=1,Z===!0&&(A|=8)):A=0,Z=wi(3,null,null,A),c.current=Z,Z.stateNode=c,Z.memoizedState={element:w,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},oa(Z),c}function i3(c,A,g){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:w==null?null:""+w,children:c,containerInfo:A,implementation:g}}function Pv(c){if(!c)return Co;c=c._reactInternals;e:{if(zs(c)!==c||c.tag!==1)throw Error(r(170));var A=c;do{switch(A.tag){case 3:A=A.stateNode.context;break e;case 1:if(Za(A.type)){A=A.stateNode.__reactInternalMemoizedMergedChildContext;break e}}A=A.return}while(A!==null);throw Error(r(171))}if(c.tag===1){var g=c.type;if(Za(g))return $A(c,g,A)}return A}function Iv(c,A,g,w,T,Z,xe,Pe,Me){return c=o0(g,w,!0,c,T,Z,xe,Pe,Me),c.context=Pv(null),g=c.current,w=yn(),T=Zl(g),Z=ys(w,T),Z.callback=A??null,vs(g,Z,T),c.current.lanes=T,zo(c,T,w),Pn(c,w),c}function ff(c,A,g,w){var T=A.current,Z=yn(),xe=Zl(T);return g=Pv(g),A.context===null?A.context=g:A.pendingContext=g,A=ys(Z,xe),A.payload={element:c},w=w===void 0?null:w,w!==null&&(A.callback=w),c=vs(T,A,xe),c!==null&&(Xi(c,T,xe,Z),ba(c,T,xe)),xe}function gf(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Uv(c,A){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<A?g:A}}function l0(c,A){Uv(c,A),(c=c.alternate)&&Uv(c,A)}function o3(){return null}var Lv=typeof reportError=="function"?reportError:function(c){console.error(c)};function c0(c){this._internalRoot=c}pf.prototype.render=c0.prototype.render=function(c){var A=this._internalRoot;if(A===null)throw Error(r(409));ff(c,A,null,null)},pf.prototype.unmount=c0.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var A=c.containerInfo;dd(function(){ff(null,c,null,null)}),A[pa]=null}};function pf(c){this._internalRoot=c}pf.prototype.unstable_scheduleHydration=function(c){if(c){var A=Vd();c={blockedOn:null,target:c,priority:A};for(var g=0;g<ci.length&&A!==0&&A<ci[g].priority;g++);ci.splice(g,0,c),g===0&&Jd(c)}};function d0(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function xf(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Tv(){}function l3(c,A,g,w,T){if(T){if(typeof w=="function"){var Z=w;w=function(){var Xe=gf(xe);Z.call(Xe)}}var xe=Iv(A,w,c,0,null,!1,!1,"",Tv);return c._reactRootContainer=xe,c[pa]=xe.current,al(c.nodeType===8?c.parentNode:c),dd(),xe}for(;T=c.lastChild;)c.removeChild(T);if(typeof w=="function"){var Pe=w;w=function(){var Xe=gf(Me);Pe.call(Xe)}}var Me=o0(c,0,!1,null,null,!1,!1,"",Tv);return c._reactRootContainer=Me,c[pa]=Me.current,al(c.nodeType===8?c.parentNode:c),dd(function(){ff(A,Me,g,w)}),Me}function bf(c,A,g,w,T){var Z=g._reactRootContainer;if(Z){var xe=Z;if(typeof T=="function"){var Pe=T;T=function(){var Me=gf(xe);Pe.call(Me)}}ff(A,xe,c,T)}else xe=l3(g,A,c,T,w);return gf(xe)}kl=function(c){switch(c.tag){case 3:var A=c.stateNode;if(A.current.memoizedState.isDehydrated){var g=qn(A.pendingLanes);g!==0&&(Bl(A,g|1),Pn(A,Ir()),(jr&6)===0&&(ju=Ir()+500,ae()))}break;case 13:dd(function(){var w=Tr(c,1);if(w!==null){var T=yn();Xi(w,c,1,T)}}),l0(c,1)}},Hc=function(c){if(c.tag===13){var A=Tr(c,134217728);if(A!==null){var g=yn();Xi(A,c,134217728,g)}l0(c,134217728)}},Gd=function(c){if(c.tag===13){var A=Zl(c),g=Tr(c,A);if(g!==null){var w=yn();Xi(g,c,A,w)}l0(c,A)}},Vd=function(){return xr},Fl=function(c,A){var g=xr;try{return xr=c,A()}finally{xr=g}},qe=function(c,A,g){switch(A){case"input":if(We(c,g),A=g.name,g.type==="radio"&&A!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+A)+'][type="radio"]'),A=0;A<g.length;A++){var w=g[A];if(w!==c&&w.form===c.form){var T=ad(w);if(!T)throw Error(r(90));pe(w),We(w,T)}}}break;case"textarea":ue(c,g);break;case"select":A=g.value,A!=null&&Se(c,!!g.multiple,A,!1)}},Wt=t0,pr=dd;var c3={usingClientEntryPoint:!1,Events:[$l,ol,ad,Qt,br,t0]},tm={findFiberByHostInstance:No,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},d3={bundleType:tm.bundleType,version:tm.version,rendererPackageName:tm.rendererPackageName,rendererConfig:tm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=fs(c),c===null?null:c.stateNode},findFiberByHostInstance:tm.findFiberByHostInstance||o3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yf.isDisabled&&yf.supportsFiber)try{qa=yf.inject(d3),hn=yf}catch{}}return In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=c3,In.createPortal=function(c,A){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d0(A))throw Error(r(200));return i3(c,A,null,g)},In.createRoot=function(c,A){if(!d0(c))throw Error(r(299));var g=!1,w="",T=Lv;return A!=null&&(A.unstable_strictMode===!0&&(g=!0),A.identifierPrefix!==void 0&&(w=A.identifierPrefix),A.onRecoverableError!==void 0&&(T=A.onRecoverableError)),A=o0(c,1,!1,null,null,g,!1,w,T),c[pa]=A.current,al(c.nodeType===8?c.parentNode:c),new c0(A)},In.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var A=c._reactInternals;if(A===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=fs(A),c=c===null?null:c.stateNode,c},In.flushSync=function(c){return dd(c)},In.hydrate=function(c,A,g){if(!xf(A))throw Error(r(200));return bf(null,c,A,!0,g)},In.hydrateRoot=function(c,A,g){if(!d0(c))throw Error(r(405));var w=g!=null&&g.hydratedSources||null,T=!1,Z="",xe=Lv;if(g!=null&&(g.unstable_strictMode===!0&&(T=!0),g.identifierPrefix!==void 0&&(Z=g.identifierPrefix),g.onRecoverableError!==void 0&&(xe=g.onRecoverableError)),A=Iv(A,null,c,1,g??null,T,!1,Z,xe),c[pa]=A.current,al(c),w)for(c=0;c<w.length;c++)g=w[c],T=g._getVersion,T=T(g._source),A.mutableSourceEagerHydrationData==null?A.mutableSourceEagerHydrationData=[g,T]:A.mutableSourceEagerHydrationData.push(g,T);return new pf(A)},In.render=function(c,A,g){if(!xf(A))throw Error(r(200));return bf(null,c,A,!1,g)},In.unmountComponentAtNode=function(c){if(!xf(c))throw Error(r(40));return c._reactRootContainer?(dd(function(){bf(null,null,c,!1,function(){c._reactRootContainer=null,c[pa]=null})}),!0):!1},In.unstable_batchedUpdates=t0,In.unstable_renderSubtreeIntoContainer=function(c,A,g,w){if(!xf(g))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return bf(c,A,g,!1,w)},In.version="18.3.1-next-f1338f8080-20240426",In}var $v;function Q5(){if($v)return m0.exports;$v=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),m0.exports=y3(),m0.exports}var Wv;function v3(){if(Wv)return vf;Wv=1;var s=Q5();return vf.createRoot=s.createRoot,vf.hydrateRoot=s.hydrateRoot,vf}var w3=v3();Q5();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hh(){return hh=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},hh.apply(this,arguments)}var gc;(function(s){s.Pop="POP",s.Push="PUSH",s.Replace="REPLACE"})(gc||(gc={}));const Kv="popstate";function j3(s){s===void 0&&(s={});function t(a,n){let{pathname:i,search:o,hash:l}=a.location;return Fx("",{pathname:i,search:o,hash:l},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function r(a,n){return typeof n=="string"?n:_g(n)}return C3(t,r,null,s)}function $s(s,t){if(s===!1||s===null||typeof s>"u")throw new Error(t)}function O5(s,t){if(!s){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function N3(){return Math.random().toString(36).substr(2,8)}function zv(s,t){return{usr:s.state,key:s.key,idx:t}}function Fx(s,t,r,a){return r===void 0&&(r=null),hh({pathname:typeof s=="string"?s:s.pathname,search:"",hash:""},typeof t=="string"?bA(t):t,{state:r,key:t&&t.key||a||N3()})}function _g(s){let{pathname:t="/",search:r="",hash:a=""}=s;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function bA(s){let t={};if(s){let r=s.indexOf("#");r>=0&&(t.hash=s.substr(r),s=s.substr(0,r));let a=s.indexOf("?");a>=0&&(t.search=s.substr(a),s=s.substr(0,a)),s&&(t.pathname=s)}return t}function C3(s,t,r,a){a===void 0&&(a={});let{window:n=document.defaultView,v5Compat:i=!1}=a,o=n.history,l=gc.Pop,d=null,u=m();u==null&&(u=0,o.replaceState(hh({},o.state,{idx:u}),""));function m(){return(o.state||{idx:null}).idx}function h(){l=gc.Pop;let j=m(),S=j==null?null:j-u;u=j,d&&d({action:l,location:v.location,delta:S})}function x(j,S){l=gc.Push;let C=Fx(v.location,j,S);u=m()+1;let B=zv(C,u),F=v.createHref(C);try{o.pushState(B,"",F)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;n.location.assign(F)}i&&d&&d({action:l,location:v.location,delta:1})}function f(j,S){l=gc.Replace;let C=Fx(v.location,j,S);u=m();let B=zv(C,u),F=v.createHref(C);o.replaceState(B,"",F),i&&d&&d({action:l,location:v.location,delta:0})}function b(j){let S=n.location.origin!=="null"?n.location.origin:n.location.href,C=typeof j=="string"?j:_g(j);return C=C.replace(/ $/,"%20"),$s(S,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,S)}let v={get action(){return l},get location(){return s(n,o)},listen(j){if(d)throw new Error("A history only accepts one active listener");return n.addEventListener(Kv,h),d=j,()=>{n.removeEventListener(Kv,h),d=null}},createHref(j){return t(n,j)},createURL:b,encodeLocation(j){let S=b(j);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:x,replace:f,go(j){return o.go(j)}};return v}var Gv;(function(s){s.data="data",s.deferred="deferred",s.redirect="redirect",s.error="error"})(Gv||(Gv={}));function S3(s,t,r){return r===void 0&&(r="/"),B3(s,t,r)}function B3(s,t,r,a){let n=typeof t=="string"?bA(t):t,i=Vb(n.pathname||"/",r);if(i==null)return null;let o=H5(s);k3(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let u=Q3(i);l=D3(o[d],u)}return l}function H5(s,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let n=(i,o,l)=>{let d={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&($s(d.relativePath.startsWith(a),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(a.length));let u=Cc([a,d.relativePath]),m=r.concat(d);i.children&&i.children.length>0&&($s(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),H5(i.children,t,m,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:L3(u,i.index),routesMeta:m})};return s.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))n(i,o);else for(let d of q5(i.path))n(i,o,d)}),t}function q5(s){let t=s.split("/");if(t.length===0)return[];let[r,...a]=t,n=r.endsWith("?"),i=r.replace(/\?$/,"");if(a.length===0)return n?[i,""]:[i];let o=q5(a.join("/")),l=[];return l.push(...o.map(d=>d===""?i:[i,d].join("/"))),n&&l.push(...o),l.map(d=>s.startsWith("/")&&d===""?"/":d)}function k3(s){s.sort((t,r)=>t.score!==r.score?r.score-t.score:T3(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const F3=/^:[\w-]+$/,E3=3,_3=2,P3=1,I3=10,U3=-2,Vv=s=>s==="*";function L3(s,t){let r=s.split("/"),a=r.length;return r.some(Vv)&&(a+=U3),t&&(a+=_3),r.filter(n=>!Vv(n)).reduce((n,i)=>n+(F3.test(i)?E3:i===""?P3:I3),a)}function T3(s,t){return s.length===t.length&&s.slice(0,-1).every((a,n)=>a===t[n])?s[s.length-1]-t[t.length-1]:0}function D3(s,t,r){let{routesMeta:a}=s,n={},i="/",o=[];for(let l=0;l<a.length;++l){let d=a[l],u=l===a.length-1,m=i==="/"?t:t.slice(i.length)||"/",h=M3({path:d.relativePath,caseSensitive:d.caseSensitive,end:u},m),x=d.route;if(!h)return null;Object.assign(n,h.params),o.push({params:n,pathname:Cc([i,h.pathname]),pathnameBase:$3(Cc([i,h.pathnameBase])),route:x}),h.pathnameBase!=="/"&&(i=Cc([i,h.pathnameBase]))}return o}function M3(s,t){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[r,a]=R3(s.path,s.caseSensitive,s.end),n=t.match(r);if(!n)return null;let i=n[0],o=i.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((u,m,h)=>{let{paramName:x,isOptional:f}=m;if(x==="*"){let v=l[h]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const b=l[h];return f&&!b?u[x]=void 0:u[x]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:s}}function R3(s,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),O5(s==="*"||!s.endsWith("*")||s.endsWith("/*"),'Route path "'+s+'" will be treated as if it were '+('"'+s.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+s.replace(/\*$/,"/*")+'".'));let a=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(a.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return s.endsWith("*")?(a.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),a]}function Q3(s){try{return s.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return O5(!1,'The URL path "'+s+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),s}}function Vb(s,t){if(t==="/")return s;if(!s.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=s.charAt(r);return a&&a!=="/"?null:s.slice(r)||"/"}function O3(s,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:n=""}=typeof s=="string"?bA(s):s;return{pathname:r?r.startsWith("/")?r:H3(r,t):t,search:W3(a),hash:K3(n)}}function H3(s,t){let r=t.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?r.length>1&&r.pop():n!=="."&&r.push(n)}),r.length>1?r.join("/"):"/"}function g0(s,t,r,a){return"Cannot include a '"+s+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q3(s){return s.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Yb(s,t){let r=q3(s);return t?r.map((a,n)=>n===r.length-1?a.pathname:a.pathnameBase):r.map(a=>a.pathnameBase)}function Jb(s,t,r,a){a===void 0&&(a=!1);let n;typeof s=="string"?n=bA(s):(n=hh({},s),$s(!n.pathname||!n.pathname.includes("?"),g0("?","pathname","search",n)),$s(!n.pathname||!n.pathname.includes("#"),g0("#","pathname","hash",n)),$s(!n.search||!n.search.includes("#"),g0("#","search","hash",n)));let i=s===""||n.pathname==="",o=i?"/":n.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!a&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),h-=1;n.pathname=x.join("/")}l=h>=0?t[h]:"/"}let d=O3(n,l),u=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(u||m)&&(d.pathname+="/"),d}const Cc=s=>s.join("/").replace(/\/\/+/g,"/"),$3=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),W3=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,K3=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function z3(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}const $5=["post","put","patch","delete"];new Set($5);const G3=["get",...$5];new Set(G3);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fh(){return fh=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},fh.apply(this,arguments)}const Xb=p.createContext(null),V3=p.createContext(null),Uc=p.createContext(null),ap=p.createContext(null),Lc=p.createContext({outlet:null,matches:[],isDataRoute:!1}),W5=p.createContext(null);function Y3(s,t){let{relative:r}=t===void 0?{}:t;yA()||$s(!1);let{basename:a,navigator:n}=p.useContext(Uc),{hash:i,pathname:o,search:l}=z5(s,{relative:r}),d=o;return a!=="/"&&(d=o==="/"?a:Cc([a,o])),n.createHref({pathname:d,search:l,hash:i})}function yA(){return p.useContext(ap)!=null}function Tc(){return yA()||$s(!1),p.useContext(ap).location}function K5(s){p.useContext(Uc).static||p.useLayoutEffect(s)}function Zt(){let{isDataRoute:s}=p.useContext(Lc);return s?ck():J3()}function J3(){yA()||$s(!1);let s=p.useContext(Xb),{basename:t,future:r,navigator:a}=p.useContext(Uc),{matches:n}=p.useContext(Lc),{pathname:i}=Tc(),o=JSON.stringify(Yb(n,r.v7_relativeSplatPath)),l=p.useRef(!1);return K5(()=>{l.current=!0}),p.useCallback(function(u,m){if(m===void 0&&(m={}),!l.current)return;if(typeof u=="number"){a.go(u);return}let h=Jb(u,JSON.parse(o),i,m.relative==="path");s==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:Cc([t,h.pathname])),(m.replace?a.replace:a.push)(h,m.state,m)},[t,a,o,i,s])}function z5(s,t){let{relative:r}=t===void 0?{}:t,{future:a}=p.useContext(Uc),{matches:n}=p.useContext(Lc),{pathname:i}=Tc(),o=JSON.stringify(Yb(n,a.v7_relativeSplatPath));return p.useMemo(()=>Jb(s,JSON.parse(o),i,r==="path"),[s,o,i,r])}function X3(s,t){return Z3(s,t)}function Z3(s,t,r,a){yA()||$s(!1);let{navigator:n}=p.useContext(Uc),{matches:i}=p.useContext(Lc),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let u=Tc(),m;if(t){var h;let j=typeof t=="string"?bA(t):t;d==="/"||(h=j.pathname)!=null&&h.startsWith(d)||$s(!1),m=j}else m=u;let x=m.pathname||"/",f=x;if(d!=="/"){let j=d.replace(/^\//,"").split("/");f="/"+x.replace(/^\//,"").split("/").slice(j.length).join("/")}let b=S3(s,{pathname:f}),v=ak(b&&b.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:Cc([d,n.encodeLocation?n.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?d:Cc([d,n.encodeLocation?n.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,r,a);return t&&v?p.createElement(ap.Provider,{value:{location:fh({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:gc.Pop}},v):v}function ek(){let s=lk(),t=z3(s)?s.status+" "+s.statusText:s instanceof Error?s.message:JSON.stringify(s),r=s instanceof Error?s.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:n},r):null,null)}const tk=p.createElement(ek,null);class rk extends p.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?p.createElement(Lc.Provider,{value:this.props.routeContext},p.createElement(W5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sk(s){let{routeContext:t,match:r,children:a}=s,n=p.useContext(Xb);return n&&n.static&&n.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=r.route.id),p.createElement(Lc.Provider,{value:t},a)}function ak(s,t,r,a){var n;if(t===void 0&&(t=[]),r===void 0&&(r=null),a===void 0&&(a=null),s==null){var i;if(!r)return null;if(r.errors)s=r.matches;else if((i=a)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)s=r.matches;else return null}let o=s,l=(n=r)==null?void 0:n.errors;if(l!=null){let m=o.findIndex(h=>h.route.id&&l?.[h.route.id]!==void 0);m>=0||$s(!1),o=o.slice(0,Math.min(o.length,m+1))}let d=!1,u=-1;if(r&&a&&a.v7_partialHydration)for(let m=0;m<o.length;m++){let h=o[m];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=m),h.route.id){let{loaderData:x,errors:f}=r,b=h.route.loader&&x[h.route.id]===void 0&&(!f||f[h.route.id]===void 0);if(h.route.lazy||b){d=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((m,h,x)=>{let f,b=!1,v=null,j=null;r&&(f=l&&h.route.id?l[h.route.id]:void 0,v=h.route.errorElement||tk,d&&(u<0&&x===0?(dk("route-fallback"),b=!0,j=null):u===x&&(b=!0,j=h.route.hydrateFallbackElement||null)));let S=t.concat(o.slice(0,x+1)),C=()=>{let B;return f?B=v:b?B=j:h.route.Component?B=p.createElement(h.route.Component,null):h.route.element?B=h.route.element:B=m,p.createElement(sk,{match:h,routeContext:{outlet:m,matches:S,isDataRoute:r!=null},children:B})};return r&&(h.route.ErrorBoundary||h.route.errorElement||x===0)?p.createElement(rk,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:C(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):C()},null)}var G5=(function(s){return s.UseBlocker="useBlocker",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s})(G5||{}),V5=(function(s){return s.UseBlocker="useBlocker",s.UseLoaderData="useLoaderData",s.UseActionData="useActionData",s.UseRouteError="useRouteError",s.UseNavigation="useNavigation",s.UseRouteLoaderData="useRouteLoaderData",s.UseMatches="useMatches",s.UseRevalidator="useRevalidator",s.UseNavigateStable="useNavigate",s.UseRouteId="useRouteId",s})(V5||{});function nk(s){let t=p.useContext(Xb);return t||$s(!1),t}function ik(s){let t=p.useContext(V3);return t||$s(!1),t}function ok(s){let t=p.useContext(Lc);return t||$s(!1),t}function Y5(s){let t=ok(),r=t.matches[t.matches.length-1];return r.route.id||$s(!1),r.route.id}function lk(){var s;let t=p.useContext(W5),r=ik(),a=Y5();return t!==void 0?t:(s=r.errors)==null?void 0:s[a]}function ck(){let{router:s}=nk(G5.UseNavigateStable),t=Y5(V5.UseNavigateStable),r=p.useRef(!1);return K5(()=>{r.current=!0}),p.useCallback(function(n,i){i===void 0&&(i={}),r.current&&(typeof n=="number"?s.navigate(n):s.navigate(n,fh({fromRouteId:t},i)))},[s,t])}const Yv={};function dk(s,t,r){Yv[s]||(Yv[s]=!0)}function uk(s,t){s?.v7_startTransition,s?.v7_relativeSplatPath}function p0(s){let{to:t,replace:r,state:a,relative:n}=s;yA()||$s(!1);let{future:i,static:o}=p.useContext(Uc),{matches:l}=p.useContext(Lc),{pathname:d}=Tc(),u=Zt(),m=Jb(t,Yb(l,i.v7_relativeSplatPath),d,n==="path"),h=JSON.stringify(m);return p.useEffect(()=>u(JSON.parse(h),{replace:r,state:a,relative:n}),[u,h,n,r,a]),null}function Ot(s){$s(!1)}function Ak(s){let{basename:t="/",children:r=null,location:a,navigationType:n=gc.Pop,navigator:i,static:o=!1,future:l}=s;yA()&&$s(!1);let d=t.replace(/^\/*/,"/"),u=p.useMemo(()=>({basename:d,navigator:i,static:o,future:fh({v7_relativeSplatPath:!1},l)}),[d,l,i,o]);typeof a=="string"&&(a=bA(a));let{pathname:m="/",search:h="",hash:x="",state:f=null,key:b="default"}=a,v=p.useMemo(()=>{let j=Vb(m,d);return j==null?null:{location:{pathname:j,search:h,hash:x,state:f,key:b},navigationType:n}},[d,m,h,x,f,b,n]);return v==null?null:p.createElement(Uc.Provider,{value:u},p.createElement(ap.Provider,{children:r,value:v}))}function x0(s){let{children:t,location:r}=s;return X3(Ex(t),r)}new Promise(()=>{});function Ex(s,t){t===void 0&&(t=[]);let r=[];return p.Children.forEach(s,(a,n)=>{if(!p.isValidElement(a))return;let i=[...t,n];if(a.type===p.Fragment){r.push.apply(r,Ex(a.props.children,i));return}a.type!==Ot&&$s(!1),!a.props.index||!a.props.children||$s(!1);let o={id:a.props.id||i.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(o.children=Ex(a.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _x(){return _x=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(s[a]=r[a])}return s},_x.apply(this,arguments)}function mk(s,t){if(s==null)return{};var r={},a=Object.keys(s),n,i;for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&(r[n]=s[n]);return r}function hk(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function fk(s,t){return s.button===0&&(!t||t==="_self")&&!hk(s)}function Px(s){return s===void 0&&(s=""),new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((t,r)=>{let a=s[r];return t.concat(Array.isArray(a)?a.map(n=>[r,n]):[[r,a]])},[]))}function gk(s,t){let r=Px(s);return t&&t.forEach((a,n)=>{r.has(n)||t.getAll(n).forEach(i=>{r.append(n,i)})}),r}const pk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xk="6";try{window.__reactRouterVersion=xk}catch{}const bk="startTransition",Jv=p3[bk];function yk(s){let{basename:t,children:r,future:a,window:n}=s,i=p.useRef();i.current==null&&(i.current=j3({window:n,v5Compat:!0}));let o=i.current,[l,d]=p.useState({action:o.action,location:o.location}),{v7_startTransition:u}=a||{},m=p.useCallback(h=>{u&&Jv?Jv(()=>d(h)):d(h)},[d,u]);return p.useLayoutEffect(()=>o.listen(m),[o,m]),p.useEffect(()=>uk(a),[a]),p.createElement(Ak,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:a})}const vk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yl=p.forwardRef(function(t,r){let{onClick:a,relative:n,reloadDocument:i,replace:o,state:l,target:d,to:u,preventScrollReset:m,viewTransition:h}=t,x=mk(t,pk),{basename:f}=p.useContext(Uc),b,v=!1;if(typeof u=="string"&&wk.test(u)&&(b=u,vk))try{let B=new URL(window.location.href),F=u.startsWith("//")?new URL(B.protocol+u):new URL(u),Q=Vb(F.pathname,f);F.origin===B.origin&&Q!=null?u=Q+F.search+F.hash:v=!0}catch{}let j=Y3(u,{relative:n}),S=jk(u,{replace:o,state:l,target:d,preventScrollReset:m,relative:n,viewTransition:h});function C(B){a&&a(B),B.defaultPrevented||S(B)}return p.createElement("a",_x({},x,{href:b||j,onClick:v||i?a:C,ref:r,target:d}))});var Xv;(function(s){s.UseScrollRestoration="useScrollRestoration",s.UseSubmit="useSubmit",s.UseSubmitFetcher="useSubmitFetcher",s.UseFetcher="useFetcher",s.useViewTransitionState="useViewTransitionState"})(Xv||(Xv={}));var Zv;(function(s){s.UseFetcher="useFetcher",s.UseFetchers="useFetchers",s.UseScrollRestoration="useScrollRestoration"})(Zv||(Zv={}));function jk(s,t){let{target:r,replace:a,state:n,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,d=Zt(),u=Tc(),m=z5(s,{relative:o});return p.useCallback(h=>{if(fk(h,r)){h.preventDefault();let x=a!==void 0?a:_g(u)===_g(m);d(s,{replace:x,state:n,preventScrollReset:i,relative:o,viewTransition:l})}},[u,d,m,a,n,r,s,i,o,l])}function J5(s){let t=p.useRef(Px(s)),r=p.useRef(!1),a=Tc(),n=p.useMemo(()=>gk(a.search,r.current?null:t.current),[a.search]),i=Zt(),o=p.useCallback((l,d)=>{const u=Px(typeof l=="function"?l(n):l);r.current=!0,i("?"+u,d)},[i,n]);return[n,o]}var Ph=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nk={setTimeout:(s,t)=>setTimeout(s,t),clearTimeout:s=>clearTimeout(s),setInterval:(s,t)=>setInterval(s,t),clearInterval:s=>clearInterval(s)},Ck=class{#e=Nk;#t=!1;setTimeoutProvider(s){this.#e=s}setTimeout(s,t){return this.#e.setTimeout(s,t)}clearTimeout(s){this.#e.clearTimeout(s)}setInterval(s,t){return this.#e.setInterval(s,t)}clearInterval(s){this.#e.clearInterval(s)}},wd=new Ck;function Sk(s){setTimeout(s,0)}var Ld=typeof window>"u"||"Deno"in globalThis;function Tn(){}function Bk(s,t){return typeof s=="function"?s(t):s}function Ix(s){return typeof s=="number"&&s>=0&&s!==1/0}function X5(s,t){return Math.max(s+(t||0)-Date.now(),0)}function Sc(s,t){return typeof s=="function"?s(t):s}function Ci(s,t){return typeof s=="function"?s(t):s}function ew(s,t){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:o,stale:l}=s;if(o){if(a){if(t.queryHash!==Zb(o,t.options))return!1}else if(!ph(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||n&&n!==t.state.fetchStatus||i&&!i(t))}function tw(s,t){const{exact:r,status:a,predicate:n,mutationKey:i}=s;if(i){if(!t.options.mutationKey)return!1;if(r){if(gh(t.options.mutationKey)!==gh(i))return!1}else if(!ph(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||n&&!n(t))}function Zb(s,t){return(t?.queryKeyHashFn||gh)(s)}function gh(s){return JSON.stringify(s,(t,r)=>Lx(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function ph(s,t){return s===t?!0:typeof s!=typeof t?!1:s&&t&&typeof s=="object"&&typeof t=="object"?Object.keys(t).every(r=>ph(s[r],t[r])):!1}var kk=Object.prototype.hasOwnProperty;function Z5(s,t){if(s===t)return s;const r=rw(s)&&rw(t);if(!r&&!(Lx(s)&&Lx(t)))return t;const n=(r?s:Object.keys(s)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let d=0;for(let u=0;u<o;u++){const m=r?u:i[u],h=s[m],x=t[m];if(h===x){l[m]=h,(r?u<n:kk.call(s,m))&&d++;continue}if(h===null||x===null||typeof h!="object"||typeof x!="object"){l[m]=x;continue}const f=Z5(h,x);l[m]=f,f===h&&d++}return n===o&&d===n?s:l}function Ux(s,t){if(!t||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(s[r]!==t[r])return!1;return!0}function rw(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Lx(s){if(!sw(s))return!1;const t=s.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!sw(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function sw(s){return Object.prototype.toString.call(s)==="[object Object]"}function Fk(s){return new Promise(t=>{wd.setTimeout(t,s)})}function Tx(s,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(s,t):r.structuralSharing!==!1?Z5(s,t):t}function Ek(s,t,r=0){const a=[...s,t];return r&&a.length>r?a.slice(1):a}function _k(s,t,r=0){const a=[t,...s];return r&&a.length>r?a.slice(0,-1):a}var ey=Symbol();function eC(s,t){return!s.queryFn&&t?.initialPromise?()=>t.initialPromise:!s.queryFn||s.queryFn===ey?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function Pk(s,t){return typeof s=="function"?s(...t):!!s}var Ik=class extends Ph{#e;#t;#r;constructor(){super(),this.#r=s=>{if(!Ld&&window.addEventListener){const t=()=>s();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#r=s,this.#t?.(),this.#t=s(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(t=>{t(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ty=new Ik;function Dx(){let s,t;const r=new Promise((n,i)=>{s=n,t=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),s(n)},r.reject=n=>{a({status:"rejected",reason:n}),t(n)},r}var Uk=Sk;function Lk(){let s=[],t=0,r=l=>{l()},a=l=>{l()},n=Uk;const i=l=>{t?s.push(l):n(()=>{r(l)})},o=()=>{const l=s;s=[],l.length&&n(()=>{a(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{n=l}}}var Ma=Lk(),Tk=class extends Ph{#e=!0;#t;#r;constructor(){super(),this.#r=s=>{if(!Ld&&window.addEventListener){const t=()=>s(!0),r=()=>s(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#r=s,this.#t?.(),this.#t=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(r=>{r(s)}))}isOnline(){return this.#e}},Pg=new Tk;function Dk(s){return Math.min(1e3*2**s,3e4)}function tC(s){return(s??"online")==="online"?Pg.isOnline():!0}var Mx=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function rC(s){let t=!1,r=0,a;const n=Dx(),i=()=>n.status!=="pending",o=v=>{if(!i()){const j=new Mx(v);x(j),s.onCancel?.(j)}},l=()=>{t=!0},d=()=>{t=!1},u=()=>ty.isFocused()&&(s.networkMode==="always"||Pg.isOnline())&&s.canRun(),m=()=>tC(s.networkMode)&&s.canRun(),h=v=>{i()||(a?.(),n.resolve(v))},x=v=>{i()||(a?.(),n.reject(v))},f=()=>new Promise(v=>{a=j=>{(i()||u())&&v(j)},s.onPause?.()}).then(()=>{a=void 0,i()||s.onContinue?.()}),b=()=>{if(i())return;let v;const j=r===0?s.initialPromise:void 0;try{v=j??s.fn()}catch(S){v=Promise.reject(S)}Promise.resolve(v).then(h).catch(S=>{if(i())return;const C=s.retry??(Ld?0:3),B=s.retryDelay??Dk,F=typeof B=="function"?B(r,S):B,Q=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,S);if(t||!Q){x(S);return}r++,s.onFail?.(r,S),Fk(F).then(()=>u()?void 0:f()).then(()=>{t?x(S):b()})})};return{promise:n,status:()=>n.status,cancel:o,continue:()=>(a?.(),n),cancelRetry:l,continueRetry:d,canStart:m,start:()=>(m()?b():f().then(b),n)}}var sC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ix(this.gcTime)&&(this.#e=wd.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Ld?1/0:300*1e3))}clearGcTimeout(){this.#e&&(wd.clearTimeout(this.#e),this.#e=void 0)}},Mk=class extends sC{#e;#t;#r;#a;#s;#o;#i;constructor(s){super(),this.#i=!1,this.#o=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#a=s.client,this.#r=this.#a.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=aw(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(s){if(this.options={...this.#o,...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=aw(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(s,t){const r=Tx(this.state.data,s,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(s,t){this.#n({type:"setState",state:s,setStateOptions:t})}cancel(s){const t=this.#s?.promise;return this.#s?.cancel(s),t?t.then(Tn).catch(Tn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>Ci(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===ey||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>Sc(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!X5(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(t=>t!==s),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(s,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(s&&this.setOptions(s),!this.options.queryFn){const l=this.observers.find(d=>d.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,a=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#i=!0,r.signal)})},n=()=>{const l=eC(this.options,t),u=(()=>{const m={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(m),m})();return this.#i=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:n};return a(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#n({type:"fetch",meta:o.fetchOptions?.meta}),this.#s=rC({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof Mx&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,d)=>{this.#n({type:"failed",failureCount:l,error:d})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#s.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Mx){if(l.silent)return this.#s.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#n({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#n(s){const t=r=>{switch(s.type){case"failed":return{...r,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...aC(r.data,this.options),fetchMeta:s.meta??null};case"success":const a={...r,data:s.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=s.manual?a:void 0,a;case"error":const n=s.error;return{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...s.state}}};this.state=t(this.state),Ma.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:s})})}};function aC(s,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:tC(t.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function aw(s){const t=typeof s.initialData=="function"?s.initialData():s.initialData,r=t!==void 0,a=r?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Rk=class extends Ph{constructor(s,t){super(),this.options=t,this.#e=s,this.#n=null,this.#i=Dx(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#s;#o;#i;#n;#f;#A;#m;#c;#d;#l;#h=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),nw(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Rx(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Rx(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#v(),this.#t.removeObserver(this)}setOptions(s){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ci(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#t.setOptions(this.options),t._defaulted&&!Ux(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&iw(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#t!==r||Ci(this.options.enabled,this.#t)!==Ci(t.enabled,this.#t)||Sc(this.options.staleTime,this.#t)!==Sc(t.staleTime,this.#t))&&this.#g();const n=this.#p();a&&(this.#t!==r||Ci(this.options.enabled,this.#t)!==Ci(t.enabled,this.#t)||n!==this.#l)&&this.#x(n)}getOptimisticResult(s){const t=this.#e.getQueryCache().build(this.#e,s),r=this.createResult(t,s);return Ok(this,r)&&(this.#a=r,this.#o=this.options,this.#s=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(s,t){return new Proxy(s,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(s){this.#h.add(s)}getCurrentQuery(){return this.#t}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const t=this.#e.defaultQueryOptions(s),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(s){return this.#u({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(s){this.#w();let t=this.#t.fetch(this.options,s);return s?.throwOnError||(t=t.catch(Tn)),t}#g(){this.#y();const s=Sc(this.options.staleTime,this.#t);if(Ld||this.#a.isStale||!Ix(s))return;const r=X5(this.#a.dataUpdatedAt,s)+1;this.#c=wd.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#p(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#x(s){this.#v(),this.#l=s,!(Ld||Ci(this.options.enabled,this.#t)===!1||!Ix(this.#l)||this.#l===0)&&(this.#d=wd.setInterval(()=>{(this.options.refetchIntervalInBackground||ty.isFocused())&&this.#u()},this.#l))}#b(){this.#g(),this.#x(this.#p())}#y(){this.#c&&(wd.clearTimeout(this.#c),this.#c=void 0)}#v(){this.#d&&(wd.clearInterval(this.#d),this.#d=void 0)}createResult(s,t){const r=this.#t,a=this.options,n=this.#a,i=this.#s,o=this.#o,d=s!==r?s.state:this.#r,{state:u}=s;let m={...u},h=!1,x;if(t._optimisticResults){const D=this.hasListeners(),_=!D&&nw(s,t),$=D&&iw(s,r,t,a);(_||$)&&(m={...m,...aC(u.data,s.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:f,errorUpdatedAt:b,status:v}=m;x=m.data;let j=!1;if(t.placeholderData!==void 0&&x===void 0&&v==="pending"){let D;n?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(D=n.data,j=!0):D=typeof t.placeholderData=="function"?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,D!==void 0&&(v="success",x=Tx(n?.data,D,t),h=!0)}if(t.select&&x!==void 0&&!j)if(n&&x===i?.data&&t.select===this.#f)x=this.#A;else try{this.#f=t.select,x=t.select(x),x=Tx(n?.data,x,t),this.#A=x,this.#n=null}catch(D){this.#n=D}this.#n&&(f=this.#n,x=this.#A,b=Date.now(),v="error");const S=m.fetchStatus==="fetching",C=v==="pending",B=v==="error",F=C&&S,Q=x!==void 0,P={status:v,fetchStatus:m.fetchStatus,isPending:C,isSuccess:v==="success",isError:B,isInitialLoading:F,isLoading:F,data:x,dataUpdatedAt:m.dataUpdatedAt,error:f,errorUpdatedAt:b,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:S,isRefetching:S&&!C,isLoadingError:B&&!Q,isPaused:m.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:B&&Q,isStale:ry(s,t),refetch:this.refetch,promise:this.#i,isEnabled:Ci(t.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const D=k=>{P.status==="error"?k.reject(P.error):P.data!==void 0&&k.resolve(P.data)},_=()=>{const k=this.#i=P.promise=Dx();D(k)},$=this.#i;switch($.status){case"pending":s.queryHash===r.queryHash&&D($);break;case"fulfilled":(P.status==="error"||P.data!==$.value)&&_();break;case"rejected":(P.status!=="error"||P.error!==$.reason)&&_();break}}return P}updateResult(){const s=this.#a,t=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#m=this.#t),Ux(t,s))return;this.#a=t;const r=()=>{if(!s)return!0;const{notifyOnChangeProps:a}=this.options,n=typeof a=="function"?a():a;if(n==="all"||!n&&!this.#h.size)return!0;const i=new Set(n??this.#h);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==s[l]&&i.has(l)})};this.#j({listeners:r()})}#w(){const s=this.#e.getQueryCache().build(this.#e,this.options);if(s===this.#t)return;const t=this.#t;this.#t=s,this.#r=s.state,this.hasListeners()&&(t?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#j(s){Ma.batch(()=>{s.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Qk(s,t){return Ci(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function nw(s,t){return Qk(s,t)||s.state.data!==void 0&&Rx(s,t,t.refetchOnMount)}function Rx(s,t,r){if(Ci(t.enabled,s)!==!1&&Sc(t.staleTime,s)!=="static"){const a=typeof r=="function"?r(s):r;return a==="always"||a!==!1&&ry(s,t)}return!1}function iw(s,t,r,a){return(s!==t||Ci(a.enabled,s)===!1)&&(!r.suspense||s.state.status!=="error")&&ry(s,r)}function ry(s,t){return Ci(t.enabled,s)!==!1&&s.isStaleByTime(Sc(t.staleTime,s))}function Ok(s,t){return!Ux(s.getCurrentResult(),t)}function ow(s){return{onFetch:(t,r)=>{const a=t.options,n=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},d=0;const u=async()=>{let m=!1;const h=b=>{Object.defineProperty(b,"signal",{enumerable:!0,get:()=>(t.signal.aborted?m=!0:t.signal.addEventListener("abort",()=>{m=!0}),t.signal)})},x=eC(t.options,t.fetchOptions),f=async(b,v,j)=>{if(m)return Promise.reject();if(v==null&&b.pages.length)return Promise.resolve(b);const C=(()=>{const q={client:t.client,queryKey:t.queryKey,pageParam:v,direction:j?"backward":"forward",meta:t.options.meta};return h(q),q})(),B=await x(C),{maxPages:F}=t.options,Q=j?_k:Ek;return{pages:Q(b.pages,B,F),pageParams:Q(b.pageParams,v,F)}};if(n&&i.length){const b=n==="backward",v=b?Hk:lw,j={pages:i,pageParams:o},S=v(a,j);l=await f(j,S,b)}else{const b=s??i.length;do{const v=d===0?o[0]??a.initialPageParam:lw(a,l);if(d>0&&v==null)break;l=await f(l,v),d++}while(d<b)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function lw(s,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?s.getNextPageParam(t[a],t,r[a],r):void 0}function Hk(s,{pages:t,pageParams:r}){return t.length>0?s.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var qk=class extends sC{#e;#t;#r;#a;constructor(s){super(),this.#e=s.client,this.mutationId=s.mutationId,this.#r=s.mutationCache,this.#t=[],this.state=s.state||$k(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(t=>t!==s),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(s){const t=()=>{this.#s({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=rC({fn:()=>this.options.mutationFn?this.options.mutationFn(s,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#s({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",n=!this.#a.canStart();try{if(a)t();else{this.#s({type:"pending",variables:s,isPaused:n}),await this.#r.config.onMutate?.(s,this,r);const o=await this.options.onMutate?.(s,r);o!==this.state.context&&this.#s({type:"pending",context:o,variables:s,isPaused:n})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,s,this.state.context,this,r),await this.options.onSuccess?.(i,s,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,s,this.state.context,r),this.#s({type:"success",data:i}),i}catch(i){try{throw await this.#r.config.onError?.(i,s,this.state.context,this,r),await this.options.onError?.(i,s,this.state.context,r),await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,i,s,this.state.context,r),i}finally{this.#s({type:"error",error:i})}}finally{this.#r.runNext(this)}}#s(s){const t=r=>{switch(s.type){case"failed":return{...r,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...r,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:s.error,failureCount:r.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ma.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(s)}),this.#r.notify({mutation:this,type:"updated",action:s})})}};function $k(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Wk=class extends Ph{constructor(s={}){super(),this.config=s,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(s,t,r){const a=new qk({client:s,mutationCache:this,mutationId:++this.#r,options:s.defaultMutationOptions(t),state:r});return this.add(a),a}add(s){this.#e.add(s);const t=wf(s);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(s):this.#t.set(t,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#e.delete(s)){const t=wf(s);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(s);a!==-1&&r.splice(a,1)}else r[0]===s&&this.#t.delete(t)}}this.notify({type:"removed",mutation:s})}canRun(s){const t=wf(s);if(typeof t=="string"){const a=this.#t.get(t)?.find(n=>n.state.status==="pending");return!a||a===s}else return!0}runNext(s){const t=wf(s);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==s&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ma.batch(()=>{this.#e.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(s){const t={exact:!0,...s};return this.getAll().find(r=>tw(t,r))}findAll(s={}){return this.getAll().filter(t=>tw(s,t))}notify(s){Ma.batch(()=>{this.listeners.forEach(t=>{t(s)})})}resumePausedMutations(){const s=this.getAll().filter(t=>t.state.isPaused);return Ma.batch(()=>Promise.all(s.map(t=>t.continue().catch(Tn))))}};function wf(s){return s.options.scope?.id}var Kk=class extends Ph{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,t,r){const a=t.queryKey,n=t.queryHash??Zb(a,t);let i=this.get(n);return i||(i=new Mk({client:s,queryKey:a,queryHash:n,options:s.defaultQueryOptions(t),state:r,defaultOptions:s.getQueryDefaults(a)}),this.add(i)),i}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const t=this.#e.get(s.queryHash);t&&(s.destroy(),t===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){Ma.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const t={exact:!0,...s};return this.getAll().find(r=>ew(t,r))}findAll(s={}){const t=this.getAll();return Object.keys(s).length>0?t.filter(r=>ew(s,r)):t}notify(s){Ma.batch(()=>{this.listeners.forEach(t=>{t(s)})})}onFocus(){Ma.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){Ma.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},zk=class{#e;#t;#r;#a;#s;#o;#i;#n;constructor(s={}){this.#e=s.queryCache||new Kk,this.#t=s.mutationCache||new Wk,this.#r=s.defaultOptions||{},this.#a=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#i=ty.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Pg.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#i?.(),this.#i=void 0,this.#n?.(),this.#n=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#t.findAll({...s,status:"pending"}).length}getQueryData(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(s){const t=this.defaultQueryOptions(s),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(s):(s.revalidateIfStale&&r.isStaleByTime(Sc(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(s,t,r){const a=this.defaultQueryOptions({queryKey:s}),i=this.#e.get(a.queryHash)?.state.data,o=Bk(t,i);if(o!==void 0)return this.#e.build(this,a).setData(o,{...r,manual:!0})}setQueriesData(s,t,r){return Ma.batch(()=>this.#e.findAll(s).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(s){const t=this.defaultQueryOptions({queryKey:s});return this.#e.get(t.queryHash)?.state}removeQueries(s){const t=this.#e;Ma.batch(()=>{t.findAll(s).forEach(r=>{t.remove(r)})})}resetQueries(s,t){const r=this.#e;return Ma.batch(()=>(r.findAll(s).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...s},t)))}cancelQueries(s,t={}){const r={revert:!0,...t},a=Ma.batch(()=>this.#e.findAll(s).map(n=>n.cancel(r)));return Promise.all(a).then(Tn).catch(Tn)}invalidateQueries(s,t={}){return Ma.batch(()=>(this.#e.findAll(s).forEach(r=>{r.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},t)))}refetchQueries(s,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Ma.batch(()=>this.#e.findAll(s).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch(Tn)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(Tn)}fetchQuery(s){const t=this.defaultQueryOptions(s);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(Sc(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(Tn).catch(Tn)}fetchInfiniteQuery(s){return s.behavior=ow(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(Tn).catch(Tn)}ensureInfiniteQueryData(s){return s.behavior=ow(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Pg.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(s){this.#r=s}setQueryDefaults(s,t){this.#a.set(gh(s),{queryKey:s,defaultOptions:t})}getQueryDefaults(s){const t=[...this.#a.values()],r={};return t.forEach(a=>{ph(s,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(s,t){this.#s.set(gh(s),{mutationKey:s,defaultOptions:t})}getMutationDefaults(s){const t=[...this.#s.values()],r={};return t.forEach(a=>{ph(s,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(s){if(s._defaulted)return s;const t={...this.#r.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return t.queryHash||(t.queryHash=Zb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===ey&&(t.enabled=!1),t}defaultMutationOptions(s){return s?._defaulted?s:{...this.#r.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},nC=p.createContext(void 0),iC=s=>{const t=p.useContext(nC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Gk=({client:s,children:t})=>(p.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(nC.Provider,{value:s,children:t})),oC=p.createContext(!1),Vk=()=>p.useContext(oC);oC.Provider;function Yk(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Jk=p.createContext(Yk()),Xk=()=>p.useContext(Jk),Zk=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},eF=s=>{p.useEffect(()=>{s.clearReset()},[s])},tF=({result:s,errorResetBoundary:t,throwOnError:r,query:a,suspense:n})=>s.isError&&!t.isReset()&&!s.isFetching&&a&&(n&&s.data===void 0||Pk(r,[s.error,a])),rF=s=>{if(s.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=s.staleTime;s.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},sF=(s,t)=>s.isLoading&&s.isFetching&&!t,aF=(s,t)=>s?.suspense&&t.isPending,cw=(s,t,r)=>t.fetchOptimistic(s).catch(()=>{r.clearReset()});function nF(s,t,r){const a=Vk(),n=Xk(),i=iC(),o=i.defaultQueryOptions(s);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o),o._optimisticResults=a?"isRestoring":"optimistic",rF(o),Zk(o,n),eF(n);const l=!i.getQueryCache().get(o.queryHash),[d]=p.useState(()=>new t(i,o)),u=d.getOptimisticResult(o),m=!a&&s.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(h=>{const x=m?d.subscribe(Ma.batchCalls(h)):Tn;return d.updateResult(),x},[d,m]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),p.useEffect(()=>{d.setOptions(o)},[o,d]),aF(o,u))throw cw(o,d,n);if(tF({result:u,errorResetBoundary:n,throwOnError:o.throwOnError,query:i.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!Ld&&sF(u,a)&&(l?cw(o,d,n):i.getQueryCache().get(o.queryHash)?.promise)?.catch(Tn).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?u:d.trackResult(u)}function lC(s,t){return nF(s,Rk)}const sy=new zk({defaultOptions:{queries:{staleTime:600*1e3,gcTime:1800*1e3,retry:1,refetchOnWindowFocus:!0,refetchOnMount:!1,refetchOnReconnect:!0,placeholderData:s=>s},mutations:{retry:1}}}),pc={projects:["projects"],project:s=>["projects",s],clients:["clients"],client:s=>["clients",s],estimates:["estimates"],estimate:s=>["estimates",s],receipts:["receipts"],payments:["payments"],invoices:["invoices"],expenses:["expenses"],financeSummary:["finance","summary"],events:["events"],event:s=>["events",s],employees:["employees"],employee:s=>["employees",s],subscription:["subscription"]},Xt=s=>typeof s=="string",sm=()=>{let s,t;const r=new Promise((a,n)=>{s=a,t=n});return r.resolve=s,r.reject=t,r},dw=s=>s==null?"":""+s,iF=(s,t,r)=>{s.forEach(a=>{t[a]&&(r[a]=t[a])})},oF=/###/g,uw=s=>s&&s.indexOf("###")>-1?s.replace(oF,"."):s,Aw=s=>!s||Xt(s),Xm=(s,t,r)=>{const a=Xt(t)?t.split("."):t;let n=0;for(;n<a.length-1;){if(Aw(s))return{};const i=uw(a[n]);!s[i]&&r&&(s[i]=new r),Object.prototype.hasOwnProperty.call(s,i)?s=s[i]:s={},++n}return Aw(s)?{}:{obj:s,k:uw(a[n])}},mw=(s,t,r)=>{const{obj:a,k:n}=Xm(s,t,Object);if(a!==void 0||t.length===1){a[n]=r;return}let i=t[t.length-1],o=t.slice(0,t.length-1),l=Xm(s,o,Object);for(;l.obj===void 0&&o.length;)i=`${o[o.length-1]}.${i}`,o=o.slice(0,o.length-1),l=Xm(s,o,Object),l?.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=r},lF=(s,t,r,a)=>{const{obj:n,k:i}=Xm(s,t,Object);n[i]=n[i]||[],n[i].push(r)},Ig=(s,t)=>{const{obj:r,k:a}=Xm(s,t);if(r&&Object.prototype.hasOwnProperty.call(r,a))return r[a]},cF=(s,t,r)=>{const a=Ig(s,r);return a!==void 0?a:Ig(t,r)},cC=(s,t,r)=>{for(const a in t)a!=="__proto__"&&a!=="constructor"&&(a in s?Xt(s[a])||s[a]instanceof String||Xt(t[a])||t[a]instanceof String?r&&(s[a]=t[a]):cC(s[a],t[a],r):s[a]=t[a]);return s},Cu=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var dF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const uF=s=>Xt(s)?s.replace(/[&<>"'\/]/g,t=>dF[t]):s;class AF{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const r=this.regExpMap.get(t);if(r!==void 0)return r;const a=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,a),this.regExpQueue.push(t),a}}const mF=[" ",",","?","!",";"],hF=new AF(20),fF=(s,t,r)=>{t=t||"",r=r||"";const a=mF.filter(o=>t.indexOf(o)<0&&r.indexOf(o)<0);if(a.length===0)return!0;const n=hF.getRegExp(`(${a.map(o=>o==="?"?"\\?":o).join("|")})`);let i=!n.test(s);if(!i){const o=s.indexOf(r);o>0&&!n.test(s.substring(0,o))&&(i=!0)}return i},Qx=(s,t,r=".")=>{if(!s)return;if(s[t])return Object.prototype.hasOwnProperty.call(s,t)?s[t]:void 0;const a=t.split(r);let n=s;for(let i=0;i<a.length;){if(!n||typeof n!="object")return;let o,l="";for(let d=i;d<a.length;++d)if(d!==i&&(l+=r),l+=a[d],o=n[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&d<a.length-1)continue;i+=d-i+1;break}n=o}return n},xh=s=>s?.replace("_","-"),gF={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,t){console?.[s]?.apply?.(console,t)}};let pF=class Ox{constructor(t,r={}){this.init(t,r)}init(t,r={}){this.prefix=r.prefix||"i18next:",this.logger=t||gF,this.options=r,this.debug=r.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,r,a,n){return n&&!this.debug?null:(Xt(t[0])&&(t[0]=`${a}${this.prefix} ${t[0]}`),this.logger[r](t))}create(t){return new Ox(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Ox(this.logger,t)}};var Uo=new pF;class np{constructor(){this.observers={}}on(t,r){return t.split(" ").forEach(a=>{this.observers[a]||(this.observers[a]=new Map);const n=this.observers[a].get(r)||0;this.observers[a].set(r,n+1)}),this}off(t,r){if(this.observers[t]){if(!r){delete this.observers[t];return}this.observers[t].delete(r)}}emit(t,...r){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([n,i])=>{for(let o=0;o<i;o++)n(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([n,i])=>{for(let o=0;o<i;o++)n.apply(n,[t,...r])})}}class hw extends np{constructor(t,r={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const r=this.options.ns.indexOf(t);r>-1&&this.options.ns.splice(r,1)}getResource(t,r,a,n={}){const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,o=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,r],a&&(Array.isArray(a)?l.push(...a):Xt(a)&&i?l.push(...a.split(i)):l.push(a)));const d=Ig(this.data,l);return!d&&!r&&!a&&t.indexOf(".")>-1&&(t=l[0],r=l[1],a=l.slice(2).join(".")),d||!o||!Xt(a)?d:Qx(this.data?.[t]?.[r],a,i)}addResource(t,r,a,n,i={silent:!1}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[t,r];a&&(l=l.concat(o?a.split(o):a)),t.indexOf(".")>-1&&(l=t.split("."),n=r,r=l[1]),this.addNamespaces(r),mw(this.data,l,n),i.silent||this.emit("added",t,r,a,n)}addResources(t,r,a,n={silent:!1}){for(const i in a)(Xt(a[i])||Array.isArray(a[i]))&&this.addResource(t,r,i,a[i],{silent:!0});n.silent||this.emit("added",t,r,a)}addResourceBundle(t,r,a,n,i,o={silent:!1,skipCopy:!1}){let l=[t,r];t.indexOf(".")>-1&&(l=t.split("."),n=a,a=r,r=l[1]),this.addNamespaces(r);let d=Ig(this.data,l)||{};o.skipCopy||(a=JSON.parse(JSON.stringify(a))),n?cC(d,a,i):d={...d,...a},mw(this.data,l,d),o.silent||this.emit("added",t,r,a)}removeResourceBundle(t,r){this.hasResourceBundle(t,r)&&delete this.data[t][r],this.removeNamespaces(r),this.emit("removed",t,r)}hasResourceBundle(t,r){return this.getResource(t,r)!==void 0}getResourceBundle(t,r){return r||(r=this.options.defaultNS),this.getResource(t,r)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const r=this.getDataByLanguage(t);return!!(r&&Object.keys(r)||[]).find(n=>r[n]&&Object.keys(r[n]).length>0)}toJSON(){return this.data}}var dC={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,t,r,a,n){return s.forEach(i=>{t=this.processors[i]?.process(t,r,a,n)??t}),t}};const uC=Symbol("i18next/PATH_KEY");function xF(){const s=[],t=Object.create(null);let r;return t.get=(a,n)=>(r?.revoke?.(),n===uC?s:(s.push(n),r=Proxy.revocable(a,t),r.proxy)),Proxy.revocable(Object.create(null),t).proxy}function Hx(s,t){const{[uC]:r}=s(xF());return r.join(t?.keySeparator??".")}const fw={},gw=s=>!Xt(s)&&typeof s!="boolean"&&typeof s!="number";class Ug extends np{constructor(t,r={}){super(),iF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=r,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Uo.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,r={interpolation:{}}){const a={...r};return t==null?!1:this.resolve(t,a)?.res!==void 0}extractFromKey(t,r){let a=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const n=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let i=r.ns||this.options.defaultNS||[];const o=a&&t.indexOf(a)>-1,l=!this.options.userDefinedKeySeparator&&!r.keySeparator&&!this.options.userDefinedNsSeparator&&!r.nsSeparator&&!fF(t,a,n);if(o&&!l){const d=t.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:t,namespaces:Xt(i)?[i]:i};const u=t.split(a);(a!==n||a===n&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),t=u.join(n)}return{key:t,namespaces:Xt(i)?[i]:i}}translate(t,r,a){let n=typeof r=="object"?{...r}:r;if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";typeof t=="function"&&(t=Hx(t,{...this.options,...n})),Array.isArray(t)||(t=[String(t)]);const i=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:l,namespaces:d}=this.extractFromKey(t[t.length-1],n),u=d[d.length-1];let m=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const h=n.lng||this.language,x=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(h?.toLowerCase()==="cimode")return x?i?{res:`${u}${m}${l}`,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:`${u}${m}${l}`:i?{res:l,usedKey:l,exactUsedKey:l,usedLng:h,usedNS:u,usedParams:this.getUsedParamsDetails(n)}:l;const f=this.resolve(t,n);let b=f?.res;const v=f?.usedKey||l,j=f?.exactUsedKey||l,S=["[object Number]","[object Function]","[object RegExp]"],C=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,B=!this.i18nFormat||this.i18nFormat.handleAsObject,F=n.count!==void 0&&!Xt(n.count),Q=Ug.hasDefaultValue(n),q=F?this.pluralResolver.getSuffix(h,n.count,n):"",P=n.ordinal&&F?this.pluralResolver.getSuffix(h,n.count,{ordinal:!1}):"",D=F&&!n.ordinal&&n.count===0,_=D&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${q}`]||n[`defaultValue${P}`]||n.defaultValue;let $=b;B&&!b&&Q&&($=_);const k=gw($),L=Object.prototype.toString.apply($);if(B&&$&&k&&S.indexOf(L)<0&&!(Xt(C)&&Array.isArray($))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,$,{...n,ns:d}):`key '${l} (${this.language})' returned an object instead of string.`;return i?(f.res=E,f.usedParams=this.getUsedParamsDetails(n),f):E}if(o){const E=Array.isArray($),O=E?[]:{},le=E?j:v;for(const te in $)if(Object.prototype.hasOwnProperty.call($,te)){const V=`${le}${o}${te}`;Q&&!b?O[te]=this.translate(V,{...n,defaultValue:gw(_)?_[te]:void 0,joinArrays:!1,ns:d}):O[te]=this.translate(V,{...n,joinArrays:!1,ns:d}),O[te]===V&&(O[te]=$[te])}b=O}}else if(B&&Xt(C)&&Array.isArray(b))b=b.join(C),b&&(b=this.extendTranslation(b,t,n,a));else{let E=!1,O=!1;!this.isValidLookup(b)&&Q&&(E=!0,b=_),this.isValidLookup(b)||(O=!0,b=l);const te=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:b,V=Q&&_!==b&&this.options.updateMissing;if(O||E||V){if(this.logger.log(V?"updateKey":"missingKey",h,u,l,V?_:b),o){const H=this.resolve(l,{...n,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let M=[];const ie=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ie&&ie[0])for(let H=0;H<ie.length;H++)M.push(ie[H]);else this.options.saveMissingTo==="all"?M=this.languageUtils.toResolveHierarchy(n.lng||this.language):M.push(n.lng||this.language);const K=(H,I,ee)=>{const se=Q&&ee!==b?ee:te;this.options.missingKeyHandler?this.options.missingKeyHandler(H,u,I,se,V,n):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(H,u,I,se,V,n),this.emit("missingKey",H,u,I,b)};this.options.saveMissing&&(this.options.saveMissingPlurals&&F?M.forEach(H=>{const I=this.pluralResolver.getSuffixes(H,n);D&&n[`defaultValue${this.options.pluralSeparator}zero`]&&I.indexOf(`${this.options.pluralSeparator}zero`)<0&&I.push(`${this.options.pluralSeparator}zero`),I.forEach(ee=>{K([H],l+ee,n[`defaultValue${ee}`]||_)})}):K(M,l,_))}b=this.extendTranslation(b,t,n,f,a),O&&b===l&&this.options.appendNamespaceToMissingKey&&(b=`${u}${m}${l}`),(O||E)&&this.options.parseMissingKeyHandler&&(b=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${m}${l}`:l,E?b:void 0,n))}return i?(f.res=b,f.usedParams=this.getUsedParamsDetails(n),f):b}extendTranslation(t,r,a,n,i){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...a},a.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const d=Xt(t)&&(a?.interpolation?.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(d){const h=t.match(this.interpolator.nestingRegexp);u=h&&h.length}let m=a.replace&&!Xt(a.replace)?a.replace:a;if(this.options.interpolation.defaultVariables&&(m={...this.options.interpolation.defaultVariables,...m}),t=this.interpolator.interpolate(t,m,a.lng||this.language||n.usedLng,a),d){const h=t.match(this.interpolator.nestingRegexp),x=h&&h.length;u<x&&(a.nest=!1)}!a.lng&&n&&n.res&&(a.lng=this.language||n.usedLng),a.nest!==!1&&(t=this.interpolator.nest(t,(...h)=>i?.[0]===h[0]&&!a.context?(this.logger.warn(`It seems you are nesting recursively key: ${h[0]} in key: ${r[0]}`),null):this.translate(...h,r),a)),a.interpolation&&this.interpolator.reset()}const o=a.postProcess||this.options.postProcess,l=Xt(o)?[o]:o;return t!=null&&l?.length&&a.applyPostProcessor!==!1&&(t=dC.handle(l,t,r,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(a)},...a}:a,this)),t}resolve(t,r={}){let a,n,i,o,l;return Xt(t)&&(t=[t]),t.forEach(d=>{if(this.isValidLookup(a))return;const u=this.extractFromKey(d,r),m=u.key;n=m;let h=u.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const x=r.count!==void 0&&!Xt(r.count),f=x&&!r.ordinal&&r.count===0,b=r.context!==void 0&&(Xt(r.context)||typeof r.context=="number")&&r.context!=="",v=r.lngs?r.lngs:this.languageUtils.toResolveHierarchy(r.lng||this.language,r.fallbackLng);h.forEach(j=>{this.isValidLookup(a)||(l=j,!fw[`${v[0]}-${j}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(fw[`${v[0]}-${j}`]=!0,this.logger.warn(`key "${n}" for languages "${v.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),v.forEach(S=>{if(this.isValidLookup(a))return;o=S;const C=[m];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(C,m,S,j,r);else{let F;x&&(F=this.pluralResolver.getSuffix(S,r.count,r));const Q=`${this.options.pluralSeparator}zero`,q=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(r.ordinal&&F.indexOf(q)===0&&C.push(m+F.replace(q,this.options.pluralSeparator)),C.push(m+F),f&&C.push(m+Q)),b){const P=`${m}${this.options.contextSeparator||"_"}${r.context}`;C.push(P),x&&(r.ordinal&&F.indexOf(q)===0&&C.push(P+F.replace(q,this.options.pluralSeparator)),C.push(P+F),f&&C.push(P+Q))}}let B;for(;B=C.pop();)this.isValidLookup(a)||(i=B,a=this.getResource(S,j,B,r))}))})}),{res:a,usedKey:n,exactUsedKey:i,usedLng:o,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,r,a,n={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,r,a,n):this.resourceStore.getResource(t,r,a,n)}getUsedParamsDetails(t={}){const r=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],a=t.replace&&!Xt(t.replace);let n=a?t.replace:t;if(a&&typeof t.count<"u"&&(n.count=t.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!a){n={...n};for(const i of r)delete n[i]}return n}static hasDefaultValue(t){const r="defaultValue";for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&r===a.substring(0,r.length)&&t[a]!==void 0)return!0;return!1}}class pw{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Uo.create("languageUtils")}getScriptPartFromCode(t){if(t=xh(t),!t||t.indexOf("-")<0)return null;const r=t.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}getLanguagePartFromCode(t){if(t=xh(t),!t||t.indexOf("-")<0)return t;const r=t.split("-");return this.formatLanguageCode(r[0])}formatLanguageCode(t){if(Xt(t)&&t.indexOf("-")>-1){let r;try{r=Intl.getCanonicalLocales(t)[0]}catch{}return r&&this.options.lowerCaseLng&&(r=r.toLowerCase()),r||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let r;return t.forEach(a=>{if(r)return;const n=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(n))&&(r=n)}),!r&&this.options.supportedLngs&&t.forEach(a=>{if(r)return;const n=this.getScriptPartFromCode(a);if(this.isSupportedCode(n))return r=n;const i=this.getLanguagePartFromCode(a);if(this.isSupportedCode(i))return r=i;r=this.options.supportedLngs.find(o=>{if(o===i)return o;if(!(o.indexOf("-")<0&&i.indexOf("-")<0)&&(o.indexOf("-")>0&&i.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===i||o.indexOf(i)===0&&i.length>1))return o})}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}getFallbackCodes(t,r){if(!t)return[];if(typeof t=="function"&&(t=t(r)),Xt(t)&&(t=[t]),Array.isArray(t))return t;if(!r)return t.default||[];let a=t[r];return a||(a=t[this.getScriptPartFromCode(r)]),a||(a=t[this.formatLanguageCode(r)]),a||(a=t[this.getLanguagePartFromCode(r)]),a||(a=t.default),a||[]}toResolveHierarchy(t,r){const a=this.getFallbackCodes((r===!1?[]:r)||this.options.fallbackLng||[],t),n=[],i=o=>{o&&(this.isSupportedCode(o)?n.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return Xt(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(t))):Xt(t)&&i(this.formatLanguageCode(t)),a.forEach(o=>{n.indexOf(o)<0&&i(this.formatLanguageCode(o))}),n}}const xw={zero:0,one:1,two:2,few:3,many:4,other:5},bw={select:s=>s===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class bF{constructor(t,r={}){this.languageUtils=t,this.options=r,this.logger=Uo.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,r){this.rules[t]=r}clearCache(){this.pluralRulesCache={}}getRule(t,r={}){const a=xh(t==="dev"?"en":t),n=r.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:a,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let o;try{o=new Intl.PluralRules(a,{type:n})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),bw;if(!t.match(/-|_/))return bw;const d=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(d,r)}return this.pluralRulesCache[i]=o,o}needsPlural(t,r={}){let a=this.getRule(t,r);return a||(a=this.getRule("dev",r)),a?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,r,a={}){return this.getSuffixes(t,a).map(n=>`${r}${n}`)}getSuffixes(t,r={}){let a=this.getRule(t,r);return a||(a=this.getRule("dev",r)),a?a.resolvedOptions().pluralCategories.sort((n,i)=>xw[n]-xw[i]).map(n=>`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n}`):[]}getSuffix(t,r,a={}){const n=this.getRule(t,a);return n?`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${n.select(r)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",r,a))}}const yw=(s,t,r,a=".",n=!0)=>{let i=cF(s,t,r);return!i&&n&&Xt(r)&&(i=Qx(s,r,a),i===void 0&&(i=Qx(t,r,a))),i},b0=s=>s.replace(/\$/g,"$$$$");class yF{constructor(t={}){this.logger=Uo.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(r=>r),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:r,escapeValue:a,useRawValueToEscape:n,prefix:i,prefixEscaped:o,suffix:l,suffixEscaped:d,formatSeparator:u,unescapeSuffix:m,unescapePrefix:h,nestingPrefix:x,nestingPrefixEscaped:f,nestingSuffix:b,nestingSuffixEscaped:v,nestingOptionsSeparator:j,maxReplaces:S,alwaysFormat:C}=t.interpolation;this.escape=r!==void 0?r:uF,this.escapeValue=a!==void 0?a:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?Cu(i):o||"{{",this.suffix=l?Cu(l):d||"}}",this.formatSeparator=u||",",this.unescapePrefix=m?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=x?Cu(x):f||Cu("$t("),this.nestingSuffix=b?Cu(b):v||Cu(")"),this.nestingOptionsSeparator=j||",",this.maxReplaces=S||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(r,a)=>r?.source===a?(r.lastIndex=0,r):new RegExp(a,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,r,a,n){let i,o,l;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=f=>{if(f.indexOf(this.formatSeparator)<0){const S=yw(r,d,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(S,void 0,a,{...n,...r,interpolationkey:f}):S}const b=f.split(this.formatSeparator),v=b.shift().trim(),j=b.join(this.formatSeparator).trim();return this.format(yw(r,d,v,this.options.keySeparator,this.options.ignoreJSONStructure),j,a,{...n,...r,interpolationkey:v})};this.resetRegExp();const m=n?.missingInterpolationHandler||this.options.missingInterpolationHandler,h=n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>b0(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?b0(this.escape(f)):b0(f)}].forEach(f=>{for(l=0;i=f.regex.exec(t);){const b=i[1].trim();if(o=u(b),o===void 0)if(typeof m=="function"){const j=m(t,i,n);o=Xt(j)?j:""}else if(n&&Object.prototype.hasOwnProperty.call(n,b))o="";else if(h){o=i[0];continue}else this.logger.warn(`missed to pass in variable ${b} for interpolating ${t}`),o="";else!Xt(o)&&!this.useRawValueToEscape&&(o=dw(o));const v=f.safeValue(o);if(t=t.replace(i[0],v),h?(f.regex.lastIndex+=o.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,r,a={}){let n,i,o;const l=(d,u)=>{const m=this.nestingOptionsSeparator;if(d.indexOf(m)<0)return d;const h=d.split(new RegExp(`${m}[ ]*{`));let x=`{${h[1]}`;d=h[0],x=this.interpolate(x,o);const f=x.match(/'/g),b=x.match(/"/g);((f?.length??0)%2===0&&!b||b.length%2!==0)&&(x=x.replace(/'/g,'"'));try{o=JSON.parse(x),u&&(o={...u,...o})}catch(v){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,v),`${d}${m}${x}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,d};for(;n=this.nestingRegexp.exec(t);){let d=[];o={...a},o=o.replace&&!Xt(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const u=/{.*}/.test(n[1])?n[1].lastIndexOf("}")+1:n[1].indexOf(this.formatSeparator);if(u!==-1&&(d=n[1].slice(u).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),n[1]=n[1].slice(0,u)),i=r(l.call(this,n[1].trim(),o),o),i&&n[0]===t&&!Xt(i))return i;Xt(i)||(i=dw(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${t}`),i=""),d.length&&(i=d.reduce((m,h)=>this.format(m,h,a.lng,{...a,interpolationkey:n[1].trim()}),i.trim())),t=t.replace(n[0],i),this.regexp.lastIndex=0}return t}}const vF=s=>{let t=s.toLowerCase().trim();const r={};if(s.indexOf("(")>-1){const a=s.split("(");t=a[0].toLowerCase().trim();const n=a[1].substring(0,a[1].length-1);t==="currency"&&n.indexOf(":")<0?r.currency||(r.currency=n.trim()):t==="relativetime"&&n.indexOf(":")<0?r.range||(r.range=n.trim()):n.split(";").forEach(o=>{if(o){const[l,...d]=o.split(":"),u=d.join(":").trim().replace(/^'+|'+$/g,""),m=l.trim();r[m]||(r[m]=u),u==="false"&&(r[m]=!1),u==="true"&&(r[m]=!0),isNaN(u)||(r[m]=parseInt(u,10))}})}return{formatName:t,formatOptions:r}},vw=s=>{const t={};return(r,a,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const o=a+JSON.stringify(i);let l=t[o];return l||(l=s(xh(a),n),t[o]=l),l(r)}},wF=s=>(t,r,a)=>s(xh(r),a)(t);class jF{constructor(t={}){this.logger=Uo.create("formatter"),this.options=t,this.init(t)}init(t,r={interpolation:{}}){this.formatSeparator=r.interpolation.formatSeparator||",";const a=r.cacheInBuiltFormats?vw:wF;this.formats={number:a((n,i)=>{const o=new Intl.NumberFormat(n,{...i});return l=>o.format(l)}),currency:a((n,i)=>{const o=new Intl.NumberFormat(n,{...i,style:"currency"});return l=>o.format(l)}),datetime:a((n,i)=>{const o=new Intl.DateTimeFormat(n,{...i});return l=>o.format(l)}),relativetime:a((n,i)=>{const o=new Intl.RelativeTimeFormat(n,{...i});return l=>o.format(l,i.range||"day")}),list:a((n,i)=>{const o=new Intl.ListFormat(n,{...i});return l=>o.format(l)})}}add(t,r){this.formats[t.toLowerCase().trim()]=r}addCached(t,r){this.formats[t.toLowerCase().trim()]=vw(r)}format(t,r,a,n={}){const i=r.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(d=>d.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,d)=>{const{formatName:u,formatOptions:m}=vF(d);if(this.formats[u]){let h=l;try{const x=n?.formatParams?.[n.interpolationkey]||{},f=x.locale||x.lng||n.locale||n.lng||a;h=this.formats[u](l,f,{...m,...n,...x})}catch(x){this.logger.warn(x)}return h}else this.logger.warn(`there was no format function for ${u}`);return l},t)}}const NF=(s,t)=>{s.pending[t]!==void 0&&(delete s.pending[t],s.pendingCount--)};class CF extends np{constructor(t,r,a,n={}){super(),this.backend=t,this.store=r,this.services=a,this.languageUtils=a.languageUtils,this.options=n,this.logger=Uo.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(a,n.backend,n)}queueLoad(t,r,a,n){const i={},o={},l={},d={};return t.forEach(u=>{let m=!0;r.forEach(h=>{const x=`${u}|${h}`;!a.reload&&this.store.hasResourceBundle(u,h)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?o[x]===void 0&&(o[x]=!0):(this.state[x]=1,m=!1,o[x]===void 0&&(o[x]=!0),i[x]===void 0&&(i[x]=!0),d[h]===void 0&&(d[h]=!0)))}),m||(l[u]=!0)}),(Object.keys(i).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(d)}}loaded(t,r,a){const n=t.split("|"),i=n[0],o=n[1];r&&this.emit("failedLoading",i,o,r),!r&&a&&this.store.addResourceBundle(i,o,a,void 0,void 0,{skipCopy:!0}),this.state[t]=r?-1:2,r&&a&&(this.state[t]=0);const l={};this.queue.forEach(d=>{lF(d.loaded,[i],o),NF(d,t),r&&d.errors.push(r),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(u=>{l[u]||(l[u]={});const m=d.loaded[u];m.length&&m.forEach(h=>{l[u][h]===void 0&&(l[u][h]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(d=>!d.done)}read(t,r,a,n=0,i=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:r,fcName:a,tried:n,wait:i,callback:o});return}this.readingCalls++;const l=(u,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(u&&m&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,t,r,a,n+1,i*2,o)},i);return}o(u,m)},d=this.backend[a].bind(this.backend);if(d.length===2){try{const u=d(t,r);u&&typeof u.then=="function"?u.then(m=>l(null,m)).catch(l):l(null,u)}catch(u){l(u)}return}return d(t,r,l)}prepareLoading(t,r,a={},n){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();Xt(t)&&(t=this.languageUtils.toResolveHierarchy(t)),Xt(r)&&(r=[r]);const i=this.queueLoad(t,r,a,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(o=>{this.loadOne(o)})}load(t,r,a){this.prepareLoading(t,r,{},a)}reload(t,r,a){this.prepareLoading(t,r,{reload:!0},a)}loadOne(t,r=""){const a=t.split("|"),n=a[0],i=a[1];this.read(n,i,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${r}loading namespace ${i} for language ${n} failed`,o),!o&&l&&this.logger.log(`${r}loaded namespace ${i} for language ${n}`,l),this.loaded(t,o,l)})}saveMissing(t,r,a,n,i,o={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(r)){this.logger.warn(`did not save key "${a}" as the namespace "${r}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend?.create){const d={...o,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let m;u.length===5?m=u(t,r,a,n,d):m=u(t,r,a,n),m&&typeof m.then=="function"?m.then(h=>l(null,h)).catch(l):l(null,m)}catch(m){l(m)}else u(t,r,a,n,l,d)}!t||!t[0]||this.store.addResource(t[0],r,a,n)}}}const ww=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let t={};if(typeof s[1]=="object"&&(t=s[1]),Xt(s[1])&&(t.defaultValue=s[1]),Xt(s[2])&&(t.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const r=s[3]||s[2];Object.keys(r).forEach(a=>{t[a]=r[a]})}return t},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),jw=s=>(Xt(s.ns)&&(s.ns=[s.ns]),Xt(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),Xt(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs?.indexOf?.("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),typeof s.initImmediate=="boolean"&&(s.initAsync=s.initImmediate),s),jf=()=>{},SF=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(r=>{typeof s[r]=="function"&&(s[r]=s[r].bind(s))})};class bh extends np{constructor(t={},r){if(super(),this.options=jw(t),this.services={},this.logger=Uo,this.modules={external:[]},SF(this),r&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,r),this;setTimeout(()=>{this.init(t,r)},0)}}init(t={},r){this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),t.defaultNS==null&&t.ns&&(Xt(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const a=ww();this.options={...a,...this.options,...jw(t)},this.options.interpolation={...a.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const n=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Uo.init(n(this.modules.logger),this.options):Uo.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=jF;const m=new pw(this.options);this.store=new hw(this.options.resources,this.options);const h=this.services;h.logger=Uo,h.resourceStore=this.store,h.languageUtils=m,h.pluralResolver=new bF(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==a.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===a.interpolation.format)&&(h.formatter=n(u),h.formatter.init&&h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new yF(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new CF(n(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",(f,...b)=>{this.emit(f,...b)}),this.modules.languageDetector&&(h.languageDetector=n(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=n(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new Ug(this.services,this.options),this.translator.on("*",(f,...b)=>{this.emit(f,...b)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,r||(r=jf),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...m)=>this.store[u](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...m)=>(this.store[u](...m),this)});const l=sm(),d=()=>{const u=(m,h)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(h),r(m,h)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(t,r=jf){let a=r;const n=Xt(t)?t:this.language;if(typeof t=="function"&&(a=t),!this.options.resources||this.options.partialBundledLanguages){if(n?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return a();const i=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};n?o(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>o(d)),this.options.preload?.forEach?.(l=>o(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(l)})}else a(null)}reloadResources(t,r,a){const n=sm();return typeof t=="function"&&(a=t,t=void 0),typeof r=="function"&&(a=r,r=void 0),t||(t=this.languages),r||(r=this.options.ns),a||(a=jf),this.services.backendConnector.reload(t,r,i=>{n.resolve(),a(i)}),n}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&dC.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let r=0;r<this.languages.length;r++){const a=this.languages[r];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,r){this.isLanguageChangingTo=t;const a=sm();this.emit("languageChanging",t);const n=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,d)=>{d?this.isLanguageChangingTo===t&&(n(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,a.resolve((...u)=>this.t(...u)),r&&r(l,(...u)=>this.t(...u))},o=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const d=Xt(l)?l:l&&l[0],u=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(Xt(l)?[l]:l);u&&(this.language||n(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector?.cacheUserLanguage?.(u)),this.loadResources(u,m=>{i(m,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),a}getFixedT(t,r,a){const n=(i,o,...l)=>{let d;typeof o!="object"?d=this.options.overloadTranslationOptionHandler([i,o].concat(l)):d={...o},d.lng=d.lng||n.lng,d.lngs=d.lngs||n.lngs,d.ns=d.ns||n.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||a||n.keyPrefix);const u=this.options.keySeparator||".";let m;return d.keyPrefix&&Array.isArray(i)?m=i.map(h=>(typeof h=="function"&&(h=Hx(h,{...this.options,...o})),`${d.keyPrefix}${u}${h}`)):(typeof i=="function"&&(i=Hx(i,{...this.options,...o})),m=d.keyPrefix?`${d.keyPrefix}${u}${i}`:i),this.t(m,d)};return Xt(t)?n.lng=t:n.lngs=t,n.ns=r,n.keyPrefix=a,n}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,r={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=r.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const o=(l,d)=>{const u=this.services.backendConnector.state[`${l}|${d}`];return u===-1||u===0||u===2};if(r.precheck){const l=r.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(a,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(a,t)&&(!n||o(i,t)))}loadNamespaces(t,r){const a=sm();return this.options.ns?(Xt(t)&&(t=[t]),t.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{a.resolve(),r&&r(n)}),a):(r&&r(),Promise.resolve())}loadLanguages(t,r){const a=sm();Xt(t)&&(t=[t]);const n=this.options.preload||[],i=t.filter(o=>n.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return i.length?(this.options.preload=n.concat(i),this.loadResources(o=>{a.resolve(),r&&r(o)}),a):(r&&r(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const n=new Intl.Locale(t);if(n&&n.getTextInfo){const i=n.getTextInfo();if(i&&i.direction)return i.direction}}catch{}const r=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services?.languageUtils||new pw(ww());return t.toLowerCase().indexOf("-latn")>1?"ltr":r.indexOf(a.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},r){return new bh(t,r)}cloneInstance(t={},r=jf){const a=t.forkResourceStore;a&&delete t.forkResourceStore;const n={...this.options,...t,isClone:!0},i=new bh(n);if((t.debug!==void 0||t.prefix!==void 0)&&(i.logger=i.logger.clone(t)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},a){const l=Object.keys(this.store.data).reduce((d,u)=>(d[u]={...this.store.data[u]},d[u]=Object.keys(d[u]).reduce((m,h)=>(m[h]={...d[u][h]},m),d[u]),d),{});i.store=new hw(l,n),i.services.resourceStore=i.store}return i.translator=new Ug(i.services,n),i.translator.on("*",(l,...d)=>{i.emit(l,...d)}),i.init(n,r),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const ta=bh.createInstance();ta.createInstance=bh.createInstance;ta.createInstance;ta.dir;ta.init;ta.loadResources;ta.reloadResources;ta.use;ta.changeLanguage;ta.getFixedT;ta.t;ta.exists;ta.setDefaultNamespace;ta.hasLoadedNamespace;ta.loadNamespaces;ta.loadLanguages;const BF=(s,t,r,a)=>{const n=[r,{code:t,...a||{}}];if(s?.services?.logger?.forward)return s.services.logger.forward(n,"warn","react-i18next::",!0);Cd(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),s?.services?.logger?.warn?s.services.logger.warn(...n):console?.warn&&console.warn(...n)},Nw={},qx=(s,t,r,a)=>{Cd(r)&&Nw[r]||(Cd(r)&&(Nw[r]=new Date),BF(s,t,r,a))},AC=(s,t)=>()=>{if(s.isInitialized)t();else{const r=()=>{setTimeout(()=>{s.off("initialized",r)},0),t()};s.on("initialized",r)}},$x=(s,t,r)=>{s.loadNamespaces(t,AC(s,r))},Cw=(s,t,r,a)=>{if(Cd(r)&&(r=[r]),s.options.preload&&s.options.preload.indexOf(t)>-1)return $x(s,r,a);r.forEach(n=>{s.options.ns.indexOf(n)<0&&s.options.ns.push(n)}),s.loadLanguages(t,AC(s,a))},kF=(s,t,r={})=>!t.languages||!t.languages.length?(qx(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(s,{lng:r.lng,precheck:(a,n)=>{if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!n(a.isLanguageChangingTo,s))return!1}}),Cd=s=>typeof s=="string",FF=s=>typeof s=="object"&&s!==null,EF=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,_F={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},PF=s=>_F[s],IF=s=>s.replace(EF,PF);let Wx={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:IF};const UF=(s={})=>{Wx={...Wx,...s}},LF=()=>Wx;let mC;const TF=s=>{mC=s},DF=()=>mC,MF={type:"3rdParty",init(s){UF(s.options.react),TF(s)}},RF=p.createContext();class QF{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(r=>{this.usedNamespaces[r]||(this.usedNamespaces[r]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const OF=(s,t)=>{const r=p.useRef();return p.useEffect(()=>{r.current=s},[s,t]),r.current},hC=(s,t,r,a)=>s.getFixedT(t,r,a),HF=(s,t,r,a)=>p.useCallback(hC(s,t,r,a),[s,t,r,a]),fr=(s,t={})=>{const{i18n:r}=t,{i18n:a,defaultNS:n}=p.useContext(RF)||{},i=r||a||DF();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new QF),!i){qx(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const F=(q,P)=>Cd(P)?P:FF(P)&&Cd(P.defaultValue)?P.defaultValue:Array.isArray(q)?q[q.length-1]:q,Q=[F,{},!1];return Q.t=F,Q.i18n={},Q.ready=!1,Q}i.options.react?.wait&&qx(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...LF(),...i.options.react,...t},{useSuspense:l,keyPrefix:d}=o;let u=n||i.options?.defaultNS;u=Cd(u)?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces?.(u);const m=(i.isInitialized||i.initializedStoreOnce)&&u.every(F=>kF(F,i,o)),h=HF(i,t.lng||null,o.nsMode==="fallback"?u:u[0],d),x=()=>h,f=()=>hC(i,t.lng||null,o.nsMode==="fallback"?u:u[0],d),[b,v]=p.useState(x);let j=u.join();t.lng&&(j=`${t.lng}${j}`);const S=OF(j),C=p.useRef(!0);p.useEffect(()=>{const{bindI18n:F,bindI18nStore:Q}=o;C.current=!0,!m&&!l&&(t.lng?Cw(i,t.lng,u,()=>{C.current&&v(f)}):$x(i,u,()=>{C.current&&v(f)})),m&&S&&S!==j&&C.current&&v(f);const q=()=>{C.current&&v(f)};return F&&i?.on(F,q),Q&&i?.store.on(Q,q),()=>{C.current=!1,i&&F&&F?.split(" ").forEach(P=>i.off(P,q)),Q&&i&&Q.split(" ").forEach(P=>i.store.off(P,q))}},[i,j]),p.useEffect(()=>{C.current&&m&&v(x)},[i,d,m]);const B=[b,i,m];if(B.t=b,B.i18n=i,B.ready=m,m||!m&&!l)return B;throw new Promise(F=>{t.lng?Cw(i,t.lng,u,()=>F()):$x(i,u,()=>F())})},{slice:qF,forEach:$F}=[];function WF(s){return $F.call(qF.call(arguments,1),t=>{if(t)for(const r in t)s[r]===void 0&&(s[r]=t[r])}),s}function KF(s){return typeof s!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(r=>r.test(s))}const Sw=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,zF=function(s,t){const a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},n=encodeURIComponent(t);let i=`${s}=${n}`;if(a.maxAge>0){const o=a.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(o)}`}if(a.domain){if(!Sw.test(a.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${a.domain}`}if(a.path){if(!Sw.test(a.path))throw new TypeError("option path is invalid");i+=`; Path=${a.path}`}if(a.expires){if(typeof a.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${a.expires.toUTCString()}`}if(a.httpOnly&&(i+="; HttpOnly"),a.secure&&(i+="; Secure"),a.sameSite)switch(typeof a.sameSite=="string"?a.sameSite.toLowerCase():a.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return a.partitioned&&(i+="; Partitioned"),i},Bw={create(s,t,r,a){let n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+r*60*1e3)),a&&(n.domain=a),document.cookie=zF(s,t,n)},read(s){const t=`${s}=`,r=document.cookie.split(";");for(let a=0;a<r.length;a++){let n=r[a];for(;n.charAt(0)===" ";)n=n.substring(1,n.length);if(n.indexOf(t)===0)return n.substring(t.length,n.length)}return null},remove(s,t){this.create(s,"",-1,t)}};var GF={name:"cookie",lookup(s){let{lookupCookie:t}=s;if(t&&typeof document<"u")return Bw.read(t)||void 0},cacheUserLanguage(s,t){let{lookupCookie:r,cookieMinutes:a,cookieDomain:n,cookieOptions:i}=t;r&&typeof document<"u"&&Bw.create(r,s,a,n,i)}},VF={name:"querystring",lookup(s){let{lookupQuerystring:t}=s,r;if(typeof window<"u"){let{search:a}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(a=window.location.hash.substring(window.location.hash.indexOf("?")));const i=a.substring(1).split("&");for(let o=0;o<i.length;o++){const l=i[o].indexOf("=");l>0&&i[o].substring(0,l)===t&&(r=i[o].substring(l+1))}}return r}},YF={name:"hash",lookup(s){let{lookupHash:t,lookupFromHashIndex:r}=s,a;if(typeof window<"u"){const{hash:n}=window.location;if(n&&n.length>2){const i=n.substring(1);if(t){const o=i.split("&");for(let l=0;l<o.length;l++){const d=o[l].indexOf("=");d>0&&o[l].substring(0,d)===t&&(a=o[l].substring(d+1))}}if(a)return a;if(!a&&r>-1){const o=n.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof r=="number"?r:0]?.replace("/",""):void 0}}}return a}};let Su=null;const kw=()=>{if(Su!==null)return Su;try{if(Su=typeof window<"u"&&window.localStorage!==null,!Su)return!1;const s="i18next.translate.boo";window.localStorage.setItem(s,"foo"),window.localStorage.removeItem(s)}catch{Su=!1}return Su};var JF={name:"localStorage",lookup(s){let{lookupLocalStorage:t}=s;if(t&&kw())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(s,t){let{lookupLocalStorage:r}=t;r&&kw()&&window.localStorage.setItem(r,s)}};let Bu=null;const Fw=()=>{if(Bu!==null)return Bu;try{if(Bu=typeof window<"u"&&window.sessionStorage!==null,!Bu)return!1;const s="i18next.translate.boo";window.sessionStorage.setItem(s,"foo"),window.sessionStorage.removeItem(s)}catch{Bu=!1}return Bu};var XF={name:"sessionStorage",lookup(s){let{lookupSessionStorage:t}=s;if(t&&Fw())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(s,t){let{lookupSessionStorage:r}=t;r&&Fw()&&window.sessionStorage.setItem(r,s)}},ZF={name:"navigator",lookup(s){const t=[];if(typeof navigator<"u"){const{languages:r,userLanguage:a,language:n}=navigator;if(r)for(let i=0;i<r.length;i++)t.push(r[i]);a&&t.push(a),n&&t.push(n)}return t.length>0?t:void 0}},eE={name:"htmlTag",lookup(s){let{htmlTag:t}=s,r;const a=t||(typeof document<"u"?document.documentElement:null);return a&&typeof a.getAttribute=="function"&&(r=a.getAttribute("lang")),r}},tE={name:"path",lookup(s){let{lookupFromPathIndex:t}=s;if(typeof window>"u")return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(r)?r[typeof t=="number"?t:0]?.replace("/",""):void 0}},rE={name:"subdomain",lookup(s){let{lookupFromSubdomainIndex:t}=s;const r=typeof t=="number"?t+1:1,a=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(a)return a[r]}};let fC=!1;try{document.cookie,fC=!0}catch{}const gC=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];fC||gC.splice(1,1);const sE=()=>({order:gC,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:s=>s});class pC{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,r)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=WF(r,this.options||{},sE()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=n=>n.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=a,this.addDetector(GF),this.addDetector(VF),this.addDetector(JF),this.addDetector(XF),this.addDetector(ZF),this.addDetector(eE),this.addDetector(tE),this.addDetector(rE),this.addDetector(YF)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,r=[];return t.forEach(a=>{if(this.detectors[a]){let n=this.detectors[a].lookup(this.options);n&&typeof n=="string"&&(n=[n]),n&&(r=r.concat(n))}}),r=r.filter(a=>a!=null&&!KF(a)).map(a=>this.options.convertDetectedLanguage(a)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?r:r.length>0?r[0]:null}cacheUserLanguage(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||r.forEach(a=>{this.detectors[a]&&this.detectors[a].cacheUserLanguage(t,this.options)}))}}pC.type="languageDetector";const aE={save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",add:"Add",search:"Search",filter:"Filter",loading:"Loading...",success:"Success",error:"Error",validUntil:"Valid until",upgradeMessage:"Upgrade to unlock all features",manageSubscription:"Manage Subscription",upgradeNow:"Upgrade Now",newProject:"New Project",newEstimate:"New Estimate",viewAll:"View All",viewFull:"View Full",upcomingEvents:"Upcoming Events",noUpcomingEvents:"No upcoming events",export:"Export",refresh:"Refresh",addClient:"Add Client",totalClients:"Total Clients",active:"Active",inactive:"Inactive",prospects:"Prospects",searchClients:"Search clients...",allStatus:"All Status",totalRevenue:"Total Revenue",low:"Low",medium:"Medium",high:"High",amount:"Amount",company:"Company",status:"Status"},nE={dashboard:"Dashboard",projects:"Project Manager",clients:"Clients",estimates:"Estimate Generator",calculator:"Pricing Calculator",finance:"Finance Tracker",calendar:"Calendar",settings:"Settings",subscriptions:"Subscription Plans",employees:"Employees"},iE={title:"Settings",saveChanges:"Save Changes",saving:"Saving...",profile:"Profile Information",fullName:"Full Name",phone:"Phone",company:"Company Name",address:"Business Address",defaultTerms:"Default Terms & Conditions",defaultTermsPlaceholder:"Enter your standard terms and conditions that will be pre-filled on all new estimates...",defaultTermsHelp:"These terms will automatically populate on new estimates. You can always edit them on individual estimates.",companyLogo:"Company Logo",uploadLogo:"Upload Logo",updateLogo:"Update Logo",uploading:"Uploading...",logoHelp:"PNG, JPG up to 2MB. Logo will appear on estimates and in header.",notifications:"Notification Preferences",calendarReminders:"Calendar Reminders",calendarRemindersDesc:"Get notified about calendar events and deadlines",marketingEmails:"Marketing Emails",marketingEmailsDesc:"Receive news and special offers",securityAlerts:"Security Alerts",securityAlertsDesc:"Important security notifications",security:"Security Settings",changePassword:"Change Password",changePasswordDesc:"Update your account password",language:"Language",selectLanguage:"Select Language",english:"English",spanish:"Spanish"},oE={title:"Dashboard",welcome:"Welcome back",overview:"Overview",activeProjects:"Active Projects",totalClients:"Total Clients",pendingEstimates:"Pending Estimates",thisMonth:"This Month",recentActivity:"Recent Activity",upcomingDeadlines:"Upcoming Deadlines",financialOverview:"Financial Overview",calendar:"Calendar",recentEstimates:"Recent Estimates",projectStatus:"Project Status",last30Days:"Last 30 days",last90Days:"Last 90 days",thisYear:"This Year",noProjectsYet:"No projects yet. Create your first project to get started!"},lE={title:"Projects",subtitle:"Manage your construction projects",newProject:"New Project",projectName:"Project Name",client:"Client",status:"Status",priority:"Priority",budget:"Budget",spent:"Spent",progress:"Progress",startDate:"Start Date",endDate:"End Date",description:"Description",tasks:"Tasks",comments:"Comments",team:"Team",addTask:"Add Task",addComment:"Add Comment",taskTitle:"Task Title",assignee:"Assignee",dueDate:"Due Date",active:"Active",completed:"Completed",onHold:"On Hold",cancelled:"Cancelled",searchPlaceholder:"Search projects...",allStatus:"All Status",selectClient:"Select a client (optional)",selectTask:"Select a task",addCommentPlaceholder:"Add a comment...",overview:"Overview",estimates:"Estimates"},cE={title:"Clients",subtitle:"Manage your client relationships",newClient:"New Client",clientName:"Client Name",email:"Email",phone:"Phone",company:"Company",address:"Address",city:"City",state:"State",zip:"ZIP Code",notes:"Notes",status:"Status",active:"Active",inactive:"Inactive",prospect:"Prospect",totalClients:"Total Clients",searchPlaceholder:"Search clients...",allStatus:"All Status",addClient:"Add Client",client:"CLIENT",contact:"CONTACT",location:"LOCATION"},dE={title:"Estimates",subtitle:"Create and manage project estimates",newEstimate:"New Estimate",estimateTitle:"Estimate Title",client:"Client",project:"Project",subtotal:"Subtotal",tax:"Tax",total:"Total",status:"Status",draft:"Draft",sent:"Sent",approved:"Approved",rejected:"Rejected",items:"Items",addItem:"Add Item",description:"Description",quantity:"Quantity",unitPrice:"Unit Price",amount:"Amount",yourEstimates:"Your Estimates",clientAndProject:"CLIENT & PROJECT",date:"DATE",actions:"ACTIONS",noEstimateLoaded:"No estimate loaded. Please select a template or create from scratch.",createNewEstimate:"Create New Estimate",noEstimatesYet:"No estimates yet. Create your first estimate!",unsavedChanges:"You have unsaved changes. Are you sure you want to leave?",deleteConfirm:"Are you sure you want to delete this estimate?",previewInvoice:"Preview Invoice",preview:"Preview",sendToCustomer:"Send to Customer",send:"Send",saveEstimate:"Save Estimate",exportAsPDF:"Export as PDF",exportAsExcel:"Export as Excel",customerApproved:"Customer Approved",alreadyInvoiced:"Already Invoiced",convertToInvoice:"Convert to Invoice",clearDataConfirm:"Are you sure you want to clear all data? This action cannot be undone.",clearDataTitle:"Clear all data and start fresh",clearData:"Clear Data",savedSuccessfully:"Saved Successfully"},uE={title:"Finance Tracker",subtitle:"Track expenses, revenue, and manage your finances",addExpense:"Add Expense",addIncome:"Add Income",type:"Type",category:"Category",project:"Project",amount:"Amount",date:"Date",receipt:"Receipt",uploadReceipt:"Upload Receipt",income:"Income",expense:"Expense",totalIncome:"Total Income",totalExpenses:"Total Expenses",netProfit:"Net Profit",materials:"Materials",labor:"Labor",equipment:"Equipment",other:"Other",dashboard:"Dashboard",revenue:"Revenue",expenses:"Expenses",payments:"Payments",invoices:"Invoices",recurring:"Recurring",budget:"Budget",reports:"Reports",sync:"Sync",syncing:"Syncing..."},AE={title:"Tasks",addTask:"Add Task",taskName:"Task Name",description:"Description",project:"Project",assignedTo:"Assigned To",dueDate:"Due Date",priority:"Priority",status:"Status",high:"High",medium:"Medium",low:"Low",todo:"To Do",inProgress:"In Progress",completed:"Completed",comments:"Comments",addComment:"Add a comment..."},mE={title:"Employees",subtitle:"Manage your team members",addEmployee:"Add Employee",firstName:"First Name",lastName:"Last Name",email:"Email",phone:"Phone",role:"Role",department:"Department",status:"Status",active:"Active",inactive:"Inactive",totalEmployees:"Total Employees",searchPlaceholder:"Search employees...",allStatus:"All Status",namePlaceholder:"John Doe",emailPlaceholder:"john@example.com",phonePlaceholder:"(555) 123-4567",rolePlaceholder:"Project Manager",salaryPlaceholder:"50",notesPlaceholder:"Additional notes about this employee...",noEmployeesFound:"No employees found",addFirstEmployee:"Add First Employee",editEmployee:"Edit Employee",addNewEmployee:"Add New Employee"},hE={title:"Pricing Calculator",subtitle:"Get accurate, AI-powered pricing estimates for your construction projects",exportPDF:"Export PDF",copyToEstimate:"Copy to Estimate",selectTrade:"Select Trade",projectSpecifications:"Project Specifications",calculating:"Calculating...",calculatePricing:"Calculate Pricing",selectTradeToBegin:"Select a Trade to Begin",selectTradeDescription:"Choose from 20+ trades to get accurate, AI-powered pricing for your project. We'll analyze current material and labor costs to provide you with detailed estimates.",calculatingPricing:"Calculating Pricing...",readyToCalculate:"Ready to Calculate",aiAnalyzing:"Our AI is analyzing current material and labor costs for your project...",fillSpecifications:'Fill in the project specifications and click "Calculate Pricing" to get your detailed estimate.'},fE={title:"Project Calendar",subtitle:"Manage your project schedules and deadlines",export:"Export",addEvent:"Add Event",month:"Month",week:"Week",day:"Day"},gE={title:"Subscription Plans",subtitle:"Choose the perfect plan for your business. All plans include our core features with different levels of functionality.",feature1:"AI-powered pricing calculator",feature2:"Advanced project management",feature3:"Financial tracking and reporting",feature4:"Professional estimate generator",feature5:"Calendar and scheduling",feature6:"Ad performance analyzer",currentPlan:"Current Plan",subscribeNow:"Subscribe Now",currentlySubscribed:"You are currently subscribed to this plan",needHelp:"Need Help?",needHelpDescription:"Have questions about our pricing or need a custom solution? We're here to help.",contactSupport:"Contact Support",guarantee:"30-Day Money-Back Guarantee",guaranteeDescription:"Try our service risk-free. If you're not completely satisfied, get a full refund.",securePayments:"Secure Payments",securePaymentsDescription:"All transactions are secured with 256-bit SSL encryption powered by Stripe.",support247:"24/7 Support",support247Description:"Get help whenever you need it from our dedicated support team.",plan1Month:"1 Month",plan3Months:"3 Months",plan1Year:"1 Year",perMonth:"/month",per3Months:"/3 months",perYear:"/year",save3Months:"Save $19.98",save1Year:"Save $99.89",yourSubscription:"Your Subscription",choosePlan:"Choose Your Plan",manageDetails:"Manage your subscription details",selectPerfectPlan:"Select the perfect plan for your contracting business",pleaseLogin:"Please log in to continue",cancelConfirm:"Are you sure you want to cancel your subscription? You will still have access until the end of your current billing period.",cancelSuccess:"Your subscription has been cancelled. You will still have access until the end of your current billing period.",resumeAutoRenewalConfirm:"Resume auto-renewal for your subscription?",turnOffAutoRenewalConfirm:"Turn off auto-renewal? You will still have access until the end of your current billing period."},pE={deck:"Deck",siding:"Siding",concrete:"Concrete",pavers:"Pavers",retainingWalls:"Retaining Walls",doorsWindows:"Doors & Windows",fence:"Fence",gutters:"Gutters",roofing:"Roofing",drywall:"Drywall",paint:"Paint",flooring:"Flooring",tile:"Tile",framing:"Framing",foundation:"Foundation",excavation:"Excavation",junkRemoval:"Junk Removal",electrical:"Electrical",hvac:"HVAC",plumbing:"Plumbing"},xE=JSON.parse(`{"calculateMaterials":"Calculate Materials","useDimensions":"Use Dimensions","useSquareFootage":"Use Square Footage","lengthFeet":"Length (feet)","widthFeet":"Width (feet)","heightFeet":"Height (feet)","enterLength":"Enter length in feet","enterWidth":"Enter width in feet","enterHeight":"Enter height in feet","deck":{"title":"Deck Calculator","useDimensions":"Use Dimensions","useSquareFootage":"Use Square Footage","length":"Length (feet)","lengthPlaceholder":"Enter length in feet","width":"Width (feet)","widthPlaceholder":"Enter width in feet","totalArea":"Total Area (square feet)","totalAreaPlaceholder":"Enter total area in square feet","deckingType":"Decking Type","framingDetails":"Framing Details","customBoardWidth":"Custom Board Width (inches)","enterBoardWidth":"Enter board width","boardSpacing":"Board Spacing (inches)","enterSpacing":"Enter spacing between boards","joistSpacing":"Joist Spacing","joistSpacing12":"12\\" on center","joistSpacing16":"16\\" on center","joistSize":"Joist Size","joists2x6":"2x6 Joists","joists2x8":"2x8 Joists","joists2x10":"2x10 Joists","joists2x12":"2x12 Joists","beamSpan":"Beam Span (feet)","enterBeamSpan":"Enter beam span","includeCantilever":"Include Cantilever","cantileverLength":"Cantilever Length (inches) - Max 24 inches","enterCantilever":"Enter cantilever length (max 24 inches)","cantileverWarning":"Warning: Maximum recommended cantilever is 24 inches","includeStairs":"Include Stairs","heightAboveGrade":"Height Above Grade (inches)","enterHeightInches":"Enter height in inches","stairWidth":"Stair Width (inches)","enterStairWidth":"Enter stair width (min. 36 inches)","stairWidthWarning":"Warning: Minimum recommended stair width is 36 inches","stairRun":"Stair Run (inches)","stairRun10":"10\\" (Standard)","stairRun12":"12\\" (Extended)","includeRailing":"Include Railing","railingType":"Railing Type","pressureTreated":"Pressure Treated","trexComposite":"Trex Composite","railingLength":"Total Railing Length (feet)","enterRailingLength":"Enter total railing length in feet","includeFascia":"Include Fascia Boards","fasciaMaterial":"Fascia Material","azekPVC":"Azek PVC","metalStock":"Metal Stock","fasciaLength":"Total Fascia Length (feet)","enterFasciaLength":"Enter total fascia length in feet"},"concrete":{"title":"Concrete Calculator","flatwork":"Flatwork","wall":"Wall","imperial":"Imperial","metric":"Metric","bags":"Bags","readyMixTruck":"Ready-Mix Truck","truck":"Truck","length":"Length","width":"Width","height":"Height","thickness":"Thickness","feet":"feet","meters":"meters","inches":"inches","centimeters":"centimeters","enterLength":"Enter length","enterWidth":"Enter width","enterHeight":"Enter height","enterThickness":"Enter thickness","reinforcementOptions":"Reinforcement Options","reinforcementType":"Reinforcement Type","noReinforcement":"No Reinforcement","rebarGrid":"Rebar Grid","wireMesh":"Wire Mesh","rebarSpacing":"Rebar Spacing","meshType":"Mesh Type","concreteVolume":"Concrete Volume","cubicYards":"cubic yards","cubicMeters":"cubic meters","bagsOfConcrete":"Bags of Concrete","lbBags":"60lb bags","kgBags":"25kg bags","readyMix":"Ready-Mix Truck","note":"Note","minimumLoad":"yard minimum load required","rebarLengthNeeded":"Rebar Length Needed","meshSheetsNeeded":"Mesh Sheets Needed","sheets":"sheets"},"drywall":{"title":"Drywall Calculator","wall":"Wall","ceiling":"Ceiling","imperial":"Imperial","metric":"Metric","length":"Length","height":"Height","feet":"feet","meters":"meters","enterLength":"Enter length","enterHeight":"Enter height","sheetSize":"Sheet Size","sheets4x8":"4' x 8' Sheets","sheets4x12":"4' x 12' Sheets","sheetThickness":"Sheet Thickness","halfInch":"1/2 inch","fiveEighthsInch":"5/8 inch","numberOfLayers":"Number of Layers","singleLayer":"Single Layer","doubleLayer":"Double Layer","openings":"Openings","addDoor":"Add Door","addWindow":"Add Window","doors":"Doors","windows":"Windows","width":"Width","remove":"Remove","includeWasteFactor":"Include Waste Factor","wasteFactorPercentage":"Waste Factor Percentage","waste5":"5% - Simple room, few cuts","waste10":"10% - Average complexity","waste15":"15% - Complex layout, many cuts","totalWallArea":"Total Wall Area","squareFeet":"square feet","drywallSheets":"Drywall Sheets","drywallScrews":"Drywall Screws","screws":"screws","jointCompound":"Joint Compound","galBuckets":"5-gallon buckets","jointTape":"Joint Tape","rolls":"rolls"},"pavers":{"title":"Pavers Calculator"},"siding":{"title":"Siding Calculator","totalWallArea":"Total Wall Area","squareFeet":"square feet","siding":"Siding","squares":"squares","houseWrap":"House Wrap","rolls1000sf":"1000 sq ft rolls","houseWrapTape":"House Wrap Tape","rolls":"rolls","foamInsulation":"Foam Insulation","bundles":"bundles","starterStrip":"Starter Strip","pieces12ft":"12ft pieces","jChannel":"J-Channel","pieces12_5ft":"12.5ft pieces","cornerPosts":"Corner Posts","pieces10ft":"10ft pieces","trim":"Trim","pieces16ft":"16ft pieces","sidingFasteners":"Siding Fasteners","boxes1000ct":"1000ct boxes","totalEstimatedCost":"Total Estimated Cost","sidingMaterial":"Siding Material","vinylSiding":"Vinyl Siding","fiberCementSiding":"Fiber Cement Siding","woodSiding":"Wood Siding","metalSiding":"Metal Siding","engineeredWoodSiding":"Engineered Wood Siding","sidingProfile":"Siding Profile","traditionalLap":"Traditional Lap","dutchLap":"Dutch Lap","verticalBoardBatten":"Vertical Board & Batten","shakeShingle":"Shake/Shingle","exposureInches":"Exposure (inches)","exposure4":"4\\" Exposure","exposure5":"5\\" Exposure","exposure6":"6\\" Exposure","exposure7":"7\\" Exposure","exposure8":"8\\" Exposure","wasteFactor":"Waste Factor","wasteFactor10":"10% - Simple","wasteFactor15":"15% - Average","wasteFactor20":"20% - Complex","walls":"Walls","addWall":"Add Wall","wallLength":"Wall Length (feet)","enterWallLength":"Enter wall length","wallHeight":"Wall Height (feet)","enterWallHeight":"Enter wall height","isGableWall":"Is Gable Wall?","gableHeight":"Gable Height (feet)","enterGableHeight":"Enter gable height","openings":"Openings","addDoor":"Add Door","addWindow":"Add Window","addGarage":"Add Garage","addCustom":"Add Custom","widthFeet":"Width (feet)","heightFeet":"Height (feet)","remove":"Remove","removeWall":"Remove Wall","additionalOptions":"Additional Options","includeHouseWrap":"Include House Wrap","includeFoamInsulation":"Include Foam Insulation","includeStarterStrip":"Include Starter Strip","includeJChannel":"Include J-Channel","includeCornerPosts":"Include Corner Posts","includeTrim":"Include Trim","trimMaterial":"Trim Material","vinylTrim":"Vinyl Trim","woodTrim":"Wood Trim","aluminumTrim":"Aluminum Trim","fiberCementTrim":"Fiber Cement Trim"},"fencing":{"title":"Fencing Calculator","posts":"Posts","postsUnit":"posts","postCaps":"Post Caps","capsUnit":"caps","concreteMix":"Concrete Mix","concreteBagsUnit":"60lb bags","postSpikes":"Post Spikes","piecesUnit":"pieces","postMountingBrackets":"Post Mounting Brackets","panels":"Panels","panelsUnit":"panels","pickets":"Pickets","picketsUnit":"pickets","chainLinkFabric":"Chain Link Fabric","squareYardsUnit":"square yards","rails":"Rails","railsUnit":"rails","kickboard":"Kickboard","kickboardUnit":"8ft pieces","gate":"Gate","gateUnit":"gate","gateHardware":"Gate Hardware","gateHardwareUnit":"set","totalEstimatedCost":"Total Estimated Cost","currencyUnit":"USD","fenceType":"Fence Type","privacyFence":"Privacy Fence","picketFence":"Picket Fence","chainLinkFence":"Chain Link Fence","ranchRailFence":"Ranch Rail Fence","panelFence":"Panel Fence","material":"Material","wood":"Wood","vinyl":"Vinyl","composite":"Composite","metal":"Metal","totalLength":"Total Length (feet)","enterFenceLength":"Enter fence length","height":"Height (feet)","enterFenceHeight":"Enter fence height","postSpacing":"Post Spacing","sixFeet":"6 feet","eightFeet":"8 feet","gates":"Gates","addSingleGate":"Add Single Gate","addDoubleGate":"Add Double Gate","addRollingGate":"Add Rolling Gate","gateWidth":"Gate Width (inches)","gateHeight":"Gate Height (inches)","includeHardware":"Include Hardware","removeGate":"Remove Gate","corners":"Corners","addCorner":"Add Corner","cornerAngle":"Corner Angle (degrees)","removeCorner":"Remove Corner","terrainInstallation":"Terrain & Installation","slopeType":"Slope Type","levelGround":"Level Ground","stepping":"Stepping","racking":"Racking","slopePercentage":"Slope Percentage","enterSlopePercentage":"Enter slope percentage","postMountingMethod":"Post Mounting Method","concrete":"Concrete","groundSpike":"Ground Spike","surfaceMountBracket":"Surface Mount Bracket","postHoleDepth":"Post Hole Depth (inches)","enterPostHoleDepth":"Enter post hole depth","additionalOptions":"Additional Options","includePostCaps":"Include Post Caps","includeKickboard":"Include Kickboard","wasteFactor":"Waste Factor","wasteFactorSimple":"10% - Simple","wasteFactorAverage":"15% - Average","wasteFactorComplex":"20% - Complex"},"gutters":{"title":"Gutters Calculator","roofEdgeLength":"Roof Edge Length (feet)","enterRoofEdgeLength":"Enter total length in feet","roofPitch":"Roof Pitch (inches per foot)","gutterSpecifications":"Gutter Specifications","gutterMaterial":"Gutter Material","aluminum":"Aluminum","vinyl":"Vinyl","galvanizedSteel":"Galvanized Steel","copper":"Copper","gutterSize":"Gutter Size","fiveInchKStyle":"5\\" K-Style","sixInchKStyle":"6\\" K-Style","customSize":"Custom Size","customGutterPrice":"Custom Gutter Price (per foot)","enterPricePerFoot":"Enter price per foot","maximumSpan":"Maximum Span (feet)","enterMaximumSpan":"Enter maximum span","downspouts":"Downspouts","downspoutSize":"Downspout Size","twoByThree":"2\\" x 3\\"","threeByFour":"3\\" x 4\\"","customDownspoutPrice":"Custom Downspout Price (per foot)","additionalDetails":"Additional Details","numberOfValleys":"Number of Valleys","enterNumberOfValleys":"Enter number of valleys","includeLeafGuards":"Include Leaf Guards","includeEndcaps":"Include Endcaps","includeCorners":"Include Corners","numberOfCorners":"Number of Corners","enterNumberOfCorners":"Enter number of corners","includeHeatTape":"Include Heat Tape","heatTapeLength":"Heat Tape Length (feet)","enterHeatTapeLength":"Enter heat tape length"},"retainingWall":{"title":"Retaining Wall Calculator","totalWallArea":"Total Wall Area","squareFeet":"square feet","customBlocks":"Custom Blocks","blocks":"blocks","retainingWallBlocks":"Retaining Wall Blocks","capstoneBlocks":"Capstone Blocks","pieces":"pieces","concreteNeeded":"Concrete Needed","cubicYards":"cubic yards","rebarNeeded":"Rebar Needed","linearFeet":"linear feet","pressureTreatedTimbers":"Pressure Treated Timbers","eightFootLengths":"8 foot lengths","deadmenTimbers":"Deadmen Timbers","gravelBaseMaterial":"Gravel Base Material","drainageGravel":"Drainage Gravel","drainagePipe":"Drainage Pipe","tenFootSections":"10ft sections","geogridReinforcement":"Geogrid Reinforcement","twoHundredSfRolls":"200 sq ft rolls","filterFabric":"Filter Fabric","threeHundredSfRolls":"300 sq ft rolls","totalEstimatedCost":"Total Estimated Cost","usd":"USD","blockWall":"Block Wall","concreteWall":"Concrete Wall","timberWall":"Timber Wall","wallLengthFeet":"Wall Length (feet)","enterWallLengthPlaceholder":"Enter wall length","wallHeightFeet":"Wall Height (feet)","enterWallHeightPlaceholder":"Enter wall height","blockType":"Block Type","standardBlock":"Standard Block (12\\"x8\\"x12\\")","pinnedBlock":"Pinned Block (16\\"x6\\"x12\\")","gravityBlock":"Gravity Block (18\\"x8\\"x24\\")","customBlockSize":"Custom Block Size","blockWidthInches":"Block Width (inches)","widthInInchesPlaceholder":"Width in inches","blockHeightInches":"Block Height (inches)","heightInInchesPlaceholder":"Height in inches","blockDepthInches":"Block Depth (inches)","depthInInchesPlaceholder":"Depth in inches","pricePerBlock":"Price per Block ($)","pricePerBlockPlaceholder":"Price per block","blockWeightLbs":"Block Weight (lbs)","weightInPoundsPlaceholder":"Weight in pounds","soilType":"Soil Type","sandySoil":"Sandy Soil","claySoil":"Clay Soil","gravelRockySoil":"Gravel/Rocky Soil","drainageSystem":"Drainage System","gravelAndPipe":"Gravel & Pipe","gravelOnly":"Gravel Only","pipeOnly":"Pipe Only","noDrainage":"No Drainage","additionalOptions":"Additional Options","includeFrostProtection":"Include Frost Protection","includeCapstone":"Include Capstone","includeGeogridReinforcement":"Include Geogrid Reinforcement (for walls >4ft)","numberOfGeogridLayers":"Number of Geogrid Layers","layersCount":"{{count}} layers"},"doorsWindows":{"title":"Doors & Windows Calculator","units":{"units":"units","kits":"kits","linearFeet":"linear feet","sets":"sets","rolls20ft":"20ft rolls","rolls":"rolls","tubes":"tubes","packs":"packs"},"doorStyles":{"entry":"Entry Door","interior":"Interior Door","patio":"Patio Door","french":"French Door","bifold":"Bi-fold Door"},"windowStyles":{"singleHung":"Single Hung","doubleHung":"Double Hung","casement":"Casement","sliding":"Sliding","picture":"Picture"},"trimStyles":{"basic":"Basic Trim","colonial":"Colonial Trim","craftsman":"Craftsman Trim","modern":"Modern Trim"},"materials":{"steel":"Steel","fiberglass":"Fiberglass","wood":"Wood","hollow-core":"Hollow Core","solid-core":"Solid Core","vinyl":"Vinyl","aluminum":"Aluminum"},"finishes":{"primed":"Primed","stained":"Stained","painted":"Painted","white":"White","bronze":"Bronze"},"preHungFrame":"Pre-Hung Frame","trim":"Trim","door":"Door","window":"Window","hardware":"Hardware","insulation":"Foam Insulation","flashingTape":"Flashing Tape","caulk":"Caulk","shimPacks":"Shim Packs","addDoor":"Add Door","addWindow":"Add Window","doorStyle":"Door Style","windowStyle":"Window Style","material":"Material","finish":"Finish","widthInches":"Width (inches)","heightInches":"Height (inches)","quantity":"Quantity","exteriorInstallation":"Exterior Installation","preHung":"Pre-Hung","includeTrim":"Include Trim","trimStyle":"Trim Style","includeHardware":"Include Hardware","remove":"Remove","emptyMessage":"No doors or windows added. Click the buttons above to get started.","additionalMaterials":"Additional Materials","includeInsulation":"Include Foam Insulation","includeFlashing":"Include Flashing Tape","includeCaulk":"Include Caulk","includeShims":"Include Shims"},"electrical":{"title":"Electrical Calculator","ampPanel":"A Panel","spaces":"spaces","panel":"panel","groundingSystem":"Grounding System","set":"set","wire":"Wire","ftRolls":"ft rolls","conduit":"Conduit","tenFtLengths":"10ft lengths","conduitFittings":"Conduit Fittings","pieces":"pieces","devices":"Devices","electricalBoxes":"Electrical Boxes","ampCircuitBreaker":"A Circuit Breaker","afci":"AFCI","piece":"piece","circuits":"Circuits","addCircuit":"Add Circuit","addCircuitsPrompt":"No circuits added. Add circuits to calculate electrical materials.","addFirstCircuit":"Add First Circuit","circuitType":"Circuit Type","lightingCircuit":"Lighting Circuit","receptacleCircuit":"Receptacle Circuit","applianceCircuit":"Appliance Circuit","hvacCircuit":"HVAC Circuit","amperage":"Amperage","fifteenAmp":"15 Amp","twentyAmp":"20 Amp","thirtyAmp":"30 Amp","fortyAmp":"40 Amp","fiftyAmp":"50 Amp","voltage":"Voltage","onetwentyV":"120V","twofortyV":"240V","wireLengthFeet":"Wire Length (feet)","enterWireLength":"Enter wire length","wireGauge":"Wire Gauge","fourteenAWG":"14 AWG","twelveAWG":"12 AWG","tenAWG":"10 AWG","eightAWG":"8 AWG","sixAWG":"6 AWG","wireType":"Wire Type","nmb":"NM-B (Romex)","thhn":"THHN (In Conduit)","ser":"SER (Feeder)","ufb":"UF-B (Underground)","deviceCount":"Device Count","enterDeviceCount":"Enter device count","boxCount":"Box Count","enterBoxCount":"Enter box count","requiresConduit":"Requires Conduit","conduitType":"Conduit Type","emt":"EMT (Metal)","pvc":"PVC","flexible":"Flexible","conduitSize":"Conduit Size","halfInch":"1/2\\"","threeQuarterInch":"3/4\\"","oneInch":"1\\"","removeCircuit":"Remove Circuit","additionalOptions":"Additional Options","includePanel":"Include Main Panel","panelSize":"Panel Size","oneHundredAmp":"100 Amp","oneFiftyAmp":"150 Amp","twoHundredAmp":"200 Amp","panelSpaces":"Panel Spaces","twentySpace":"20 Space","thirtySpace":"30 Space","fortySpace":"40 Space","includeGroundRods":"Include Ground Rods","includeGFCIProtection":"Include GFCI Protection (for receptacle circuits)","includeAFCIProtection":"Include AFCI Protection (for bedroom circuits)"},"plumbing":{"title":"Plumbing Calculator","standardStainlessSteelKitchenSink":"Standard Stainless Steel Kitchen Sink","standardTwoPieceToilet":"Standard Two-Piece Toilet","standardShowerKit":"Standard Shower Kit","pressureBalanceShowerValve":"Pressure Balance Shower Valve","standardShowerHead":"Standard Shower Head","showerTrimKit":"Shower Trim Kit","showerDrainAssembly":"Shower Drain Assembly","standardAlcoveBathtub":"Standard Alcove Bathtub","washerConnectionBox":"Washer Connection Box","dishwasherConnectionKit":"Dishwasher Connection Kit","customFixture":"Custom Fixture","piece":"piece","supplyLines":"Supply Lines","pieces":"pieces","drainAssembly":"Drain Assembly","set":"set","pipe":"Pipe","feet":"feet","gallon":"gallons","tankless":"Tankless","waterHeater":"Water Heater","unit":"unit","waterHeaterInstallationKit":"Water Heater Installation Kit","kit":"kit","waterSoftenerSystem":"Water Softener System","softenerInstallationKit":"Softener Installation Kit","pressureTank":"Pressure Tank","pressureTankInstallationKit":"Pressure Tank Installation Kit","sewerPipe":"Sewer Pipe (4\\" PVC)","cleanouts":"Cleanouts","totalEstimatedCost":"Total Estimated Cost","fixtures":"Fixtures","addSink":"Add Sink","addToilet":"Add Toilet","addShower":"Add Shower","addTub":"Add Tub","addCustom":"Add Custom","fixtureName":"Fixture Name","enterFixtureName":"Enter fixture name","fixtureCost":"Fixture Cost ($)","enterFixtureCost":"Enter fixture cost","drainSize":"Drain Size","ventSize":"Vent Size","distanceFromStack":"Distance from Stack (feet)","removeFixture":"Remove Fixture","pipingRuns":"Piping Runs","addSupplyLine":"Add Supply Line","addDrainLine":"Add Drain Line","addVentLine":"Add Vent Line","pipeSize":"Pipe Size","pipeMaterial":"Pipe Material","copper":"Copper","castIron":"Cast Iron","length":"Length (feet)","enterLength":"Enter length","fittings":"Fittings","elbows90":"90 Elbows","elbows45":"45 Elbows","tees":"Tees","couplings":"Couplings","adapters":"Adapters","valves":"Valves","removePipingRun":"Remove Piping Run","equipment":"Equipment","includeWaterHeater":"Include Water Heater","waterHeaterType":"Water Heater Type","tankWaterHeater":"Tank Water Heater","tanklessWaterHeater":"Tankless Water Heater","tankSize":"Tank Size (gallons)","capacity":"Capacity (gallons)","includeWaterSoftener":"Include Water Softener","includePressureTank":"Include Pressure Tank","pressureTankSize":"Pressure Tank Size (gallons)","drainage":"Drainage","includeSewerConnection":"Include Sewer Connection","sewerLineLength":"Sewer Line Length (feet)","enterSewerLineLength":"Enter sewer line length","includeCleanouts":"Include Cleanouts","numberOfCleanouts":"Number of Cleanouts","enterNumberOfCleanouts":"Enter number of cleanouts"},"excavation":{"title":"Excavation Calculator","baseExcavationVolume":"Base Excavation Volume","cubicYards":"cubic yards","volumeWithSpoilFactor":"Volume with Spoil Factor ({{factor}}%)","removalCost":"Removal Cost","usd":"USD","totalHaulOffCost":"Total Haul-Off Cost","totalCost":"Total Cost","lengthFeet":"Length (feet)","enterLengthInFeet":"Enter length in feet","widthFeet":"Width (feet)","enterWidthInFeet":"Enter width in feet","depthFeet":"Depth (feet)","enterDepthInFeet":"Enter depth in feet","removalCostPerCubicYard":"Removal Cost per Cubic Yard ($)","enterRemovalCostPerCubicYard":"Enter removal cost per cubic yard","siteConditions":"Site Conditions","soilType":"Soil Type","looseSoil":"Loose Soil (easy to excavate)","compactedSoil":"Compacted Soil (medium difficulty)","rockySoil":"Rocky Soil (difficult to excavate)","includeSlopedSides":"Include Sloped Sides","slopeRatio":"Slope Ratio","slope1to1":"1:1 (45 degrees)","slope1_5to1":"1.5:1 (more gradual)","slope2to1":"2:1 (gentle slope)","additionalOptions":"Additional Options","addSpoilFactor":"Add Spoil Factor","spoilFactorPercentage":"Spoil Factor Percentage","spoilFactor10":"10% - Sandy soil","spoilFactor15":"15% - Average soil","spoilFactor20":"20% - Clay soil","includeHaulOff":"Include Haul-Off","totalHaulOffCostForJob":"Total Haul-Off Cost for Job","enterTotalHaulOffCost":"Enter total haul-off cost"},"junkRemoval":{"title":"Junk Removal Calculator","itemsToRemove":"Items to Remove","categories":{"furniture":"Furniture","appliances":"Appliances","construction":"Construction Debris","yardWaste":"Yard Waste","electronics":"Electronics","miscellaneous":"Miscellaneous"},"items":{"sofa":"Sofa","loveseat":"Loveseat","armchair":"Armchair","dining-table":"Dining Table","mattress-twin":"Twin Mattress","mattress-full":"Full Mattress","mattress-queen":"Queen Mattress","mattress-king":"King Mattress","dresser":"Dresser","bookshelf":"Bookshelf","refrigerator":"Refrigerator","washer":"Washer","dryer":"Dryer","dishwasher":"Dishwasher","stove":"Stove","microwave":"Microwave","drywall-pile":"Drywall Pile","lumber-pile":"Lumber Pile","concrete-debris":"Concrete Debris","roofing-material":"Roofing Material","tiles":"Tiles","branches":"Branches","dirt":"Dirt","grass-clippings":"Grass Clippings","leaves":"Leaves","rocks":"Rocks","tv-crt":"CRT TV","tv-flat":"Flat Screen TV","computer":"Computer","printer":"Printer","monitor":"Monitor","boxes":"Boxes","bags":"Bags","tires":"Tires","metal-scrap":"Metal Scrap","glass":"Glass"},"itemType":"Item Type","quantity":"Quantity","requiresSpecialDisposal":"Requires Special Disposal","mayRequireDisassembly":"May Require Disassembly","removeItem":"Remove Item","serviceDetails":"Service Details","distanceToDisposalSite":"Distance to Disposal Site (miles)","enterDistancePlaceholder":"Enter distance in miles","accessDifficulty":"Access Difficulty","accessLevels":{"easy":"Easy (ground level, near truck)","moderate":"Moderate (some stairs, short distance)","difficult":"Difficult (multiple floors, long distance)"},"numberOfFloors":"Number of Floors","needLoadingAssistance":"Need Loading Assistance?","numberOfWorkers":"Number of Workers","workersCount":{"two":"2 Workers","three":"3 Workers","four":"4 Workers"},"additionalOptions":"Additional Options","includeDisposalFees":"Include Disposal Fees","requiresDisposalPermit":"Requires Disposal Permit","containsHazardousMaterials":"Contains Hazardous Materials","units":{"items":"items","cubicFeet":"cubic feet","pounds":"pounds","usd":"USD","laborHours":"labor hours","miles":"miles","permit":"permit","multiplier":"multiplier"},"results":{"totalVolume":"Total Volume","totalWeight":"Total Weight","baseRemovalCost":"Base Removal Cost","labor":"Labor","workers":"workers","hours":"hours","distanceFee":"Distance Fee","specialDisposalFee":"Special Disposal Fee","disposalPermit":"Disposal Permit","hazardousMaterialFee":"Hazardous Material Fee","accessDifficultyFloorAdjustment":"Access Difficulty/Floor Adjustment","totalEstimatedCost":"Total Estimated Cost"}},"hvac":{"title":"HVAC Calculator","condenserUnit":"{{tonnage}} Ton Condenser Unit","unit":"unit","airHandler":"{{tonnage}} Ton Air Handler","packageUnit":"{{tonnage}} Ton Package Unit","miniSplitOutdoor":"{{tonnage}} Ton Mini-Split Outdoor","miniSplitIndoor":"Mini-Split Indoor Units","units":"units","ductworkSupply":"{{size}}\\" Supply Ductwork","ductworkReturn":"{{size}}\\" Return Ductwork","linearFeet":"linear feet","refrigerantLineSet":"Refrigerant Line Set","feet":"feet","condensateDrainLine":"Condensate Drain Line","wholeHouseHumidifier":"Whole House Humidifier","uvLightSystem":"UV Light System","airCleanerSystem":"Air Cleaner System","zoneControlSystem":"Zone Control System ({{zones}} zones)","system":"system","installationLabor":"Installation Labor","service":"service","totalEstimatedCost":"Total Estimated Cost","usd":"USD","splitSystem":"Split System","miniSplit":"Mini-Split","mildClimate":"Mild Climate","moderateClimate":"Moderate Climate","extremeClimate":"Extreme Climate","rooms":"Rooms","addRoom":"Add Room","roomName":"Room Name","enterRoomName":"Enter room name","defaultRoomName":"Room {{number}}","lengthFeet":"Length (feet)","enterLength":"Enter length","widthFeet":"Width (feet)","enterWidth":"Enter width","heightFeet":"Height (feet)","enterHeight":"Enter height","numberOfWindows":"Number of Windows","enterNumberOfWindows":"Enter number of windows","primaryExposure":"Primary Exposure","north":"North","south":"South","east":"East","west":"West","insulationQuality":"Insulation Quality","poor":"Poor","average":"Average","good":"Good","removeRoom":"Remove Room","estimatedLoad":"Estimated Load: {{btus}} BTU","ductwork":"Ductwork","addDuctRun":"Add Duct Run","ductType":"Duct Type","supply":"Supply","return":"Return","ductSizeInches":"Duct Size (inches)","numberOfElbows":"Number of Elbows","enterNumberOfElbows":"Enter number of elbows","numberOfTakeoffs":"Number of Takeoffs","enterNumberOfTakeoffs":"Enter number of takeoffs","removeDuctRun":"Remove Duct Run","lineSetsAndDrains":"Line Sets & Drains","refrigerantLineLengthFeet":"Refrigerant Line Length (feet)","enterLineSetLength":"Enter line set length","condensateDrainLengthFeet":"Condensate Drain Length (feet)","enterDrainLength":"Enter drain length","additionalOptions":"Additional Options","includeWholeHouseHumidifier":"Include Whole House Humidifier","includeUVLightSystem":"Include UV Light System","includeAirCleanerSystem":"Include Air Cleaner System","includeZoningSystem":"Include Zoning System","numberOfZones":"Number of Zones","twoZones":"2 Zones","threeZones":"3 Zones","fourZones":"4 Zones"},"framing":{"title":"Framing Calculator","studs":"{{size}} Studs @ {{spacing}}\\" on center","pieces":"pieces","plates":"{{size}} Plates","headers":"{{size}} Headers","blocking":"Blocking","fireblocking":"Fireblocking","tiedowns":"Tiedowns","sheathing":"{{type}} Sheathing {{thickness}}","sheets":"sheets","nails":"Framing Nails","nailBoxes":"1000ct boxes","wall":"Wall","floor":"Floor","ceiling":"Ceiling","length":"Length (feet)","lengthPlaceholder":"Enter length in feet","height":"Height (feet)","heightPlaceholder":"Enter height in feet","studSpacing":"Stud Spacing","spacing16":"16\\" on center","spacing24":"24\\" on center","lumberSize":"Lumber Size","lumber2x4":"2x4","lumber2x6":"2x6","plateConfiguration":"Plate Configuration","singleTopPlate":"Single Top Plate","doubleTopPlate":"Double Top Plate","openings":"Openings","addDoor":"Add Door","addWindow":"Add Window","widthFeet":"Width (feet)","heightFeet":"Height (feet)","includeRoughOpening":"Include Rough Opening","add2Inches":"Add 2\\" for clearance","removeOpening":"Remove Opening","additionalOptions":"Additional Options","includeBlocking":"Include Blocking","includeFireblocking":"Include Fireblocking","includeTiedowns":"Include Tiedowns","includeSheathing":"Include Sheathing","sheathingType":"Sheathing Type","osb":"OSB","plywood":"Plywood","thickness":"Thickness"},"roofing":{"title":"Roofing Calculator","roofArea":"Roof Area (square feet)","roofAreaPlaceholder":"Enter total roof area","roofType":"Roof Type","roofTypes":{"gable":"Gable Roof","hip":"Hip Roof","flat":"Flat Roof","mansard":"Mansard Roof","gambrel":"Gambrel Roof","shed":"Shed Roof"},"roofingMaterial":"Roofing Material","materialOptions":{"asphalt":"Asphalt Shingles","metal":"Metal Roofing","tile":"Tile Roofing","slate":"Slate Roofing","tpo":"TPO (Thermoplastic)","epdm":"EPDM (Rubber)","wood":"Wood Shakes"},"materials":{"asphalt":"Asphalt Shingles","metal":"Metal Roofing","tile":"Tile Roofing","slate":"Slate Roofing","tpo":"TPO (Thermoplastic)","epdm":"EPDM (Rubber)","wood":"Wood Shakes"},"roofPitch":"Roof Pitch","pitchOptions":{"1:12":"1:12 (Low Slope)","2:12":"2:12 (Low Slope)","3:12":"3:12 (Low Slope)","4:12":"4:12 (Standard)","5:12":"5:12 (Standard)","6:12":"6:12 (Standard)","7:12":"7:12 (Steep)","8:12":"8:12 (Steep)","9:12":"9:12 (Very Steep)","10:12":"10:12 (Very Steep)","12:12":"12:12 (Very Steep)"},"numberOfStories":"Number of Stories","storiesOptions":{"1":"1 Story","2":"2 Stories","3":"3 Stories"},"layersToRemove":"Layers to Remove","skylights":"Number of Skylights","chimneys":"Number of Chimneys","valleys":"Number of Valleys","optionalFeatures":"Optional Features","ventilationUpgrade":"Include Ventilation System Upgrade","iceWaterShieldOption":"Include Ice & Water Shield","extendedWarrantyOption":"Include Extended Warranty","alerts":{"enterRoofArea":"Please enter a valid roof area"},"results":{"roofArea":"Roof Area","syntheticUnderlayment":"Synthetic Underlayment","iceWaterShield":"Ice & Water Shield","ridgeCapShingles":"Ridge Cap Shingles","dripEdge":"Drip Edge","starterStrips":"Starter Strips","pipeBoots":"Pipe Boots","nailsFasteners":"Nails & Fasteners","installationLabor":"Installation Labor","tearOffLabor":"Tear-Off Labor ({{layers}} layers)","chimneyFlashing":"Chimney Flashing","skylightFlashing":"Skylight Flashing","valleyFlashing":"Valley Flashing","ventilationSystem":"Ventilation System","extendedWarranty":"Extended Warranty","debrisDisposal":"Debris Disposal","totalEstimate":"Total Estimate"},"units":{"sqft":"square feet","squares":"squares","rolls":"rolls","linearFeet":"linear feet","bundles":"bundles","each":"each","hours":"hours","chimneys":"chimneys","skylights":"skylights","system":"system","project":"project"}},"paint":{"title":"Paint Calculator","interior":"Interior","exterior":"Exterior","imperial":"Imperial","metric":"Metric","surfacesToPaint":"Surfaces to Paint","addSurface":"Add Surface","length":"Length","height":"Height","feet":"feet","meters":"meters","surfaceCondition":"Surface Condition","conditionGood":"Good (no prep needed)","conditionFair":"Fair (some prep needed)","conditionPoor":"Poor (extensive prep needed)","removeSurface":"Remove Surface","paintTypeLabel":"Paint Quality","paintType":{"economy":"Economy","standard":"Standard","premium":"Premium"},"paintFinishLabel":"Paint Finish","paintFinish":{"flat":"Flat/Matte","eggshell":"Eggshell","satin":"Satin","semiGloss":"Semi-Gloss"},"numberOfCoats":"Number of Coats","singleCoat":"1 Coat","twoCoats":"2 Coats","includePrimer":"Include Primer","includeWasteFactor":"Include Waste Factor","wasteFactorPercentage":"Waste Factor Percentage","wasteFactor5":"5% - Experienced painter, simple room","wasteFactor10":"10% - Average complexity","wasteFactor15":"15% - Complex layout, many corners","totalWallArea":"Total Wall Area","squareFeet":"square feet","paintNeeded":"Paint Needed","gallons":"gallons","primerNeeded":"Primer Needed","paintingSupplies":"Painting Supplies (brushes, rollers, tape, drop cloths)","set":"set","totalCost":"Total Estimated Cost","usd":"USD"},"tile":{"title":"Tile Calculator","floor":"Floor","wall":"Wall","useDimensions":"Use Dimensions","useSquareFootage":"Use Square Footage","lengthFeet":"Length (feet)","wallLengthFeet":"Wall Length (feet)","widthFeet":"Width (feet)","wallHeightFeet":"Wall Height (feet)","placeholderLength":"Enter length in feet","placeholderWallLength":"Enter wall length in feet","placeholderWidth":"Enter width in feet","placeholderWallHeight":"Enter wall height in feet","totalAreaSquareFeet":"Total Area (square feet)","placeholderTotalArea":"Enter total area in square feet","tileSpecifications":"Tile Specifications","tileWidthInches":"Tile Width (inches)","tileLengthInches":"Tile Length (inches)","placeholderTileWidth":"Enter tile width","placeholderTileLength":"Enter tile length","piecesPerBox":"Pieces per Box","placeholderPiecesPerBox":"Enter pieces per box","pricePerBox":"Price per Box ($)","placeholderPricePerBox":"Enter price per box","installationDetails":"Installation Details","installationPattern":"Installation Pattern","patterns":{"straight":"Straight/Grid","diagonal":"Diagonal","herringbone":"Herringbone","brick":"Brick/Offset","basketweave":"Basketweave"},"groutJointWidth":"Grout Joint Width","groutWidths":{"1_8":"1/8 inch (3mm)","1_4":"1/4 inch (6mm)","3_8":"3/8 inch (10mm)"},"openings":"Openings (Doors, Windows, Cabinets)","addDoor":"Add Door","addWindow":"Add Window","addCabinet":"Add Cabinet","addCustom":"Add Custom","openingWidth":"Width (feet)","openingHeight":"Height (feet)","openingType":"Type","openingTypes":{"door":"Door","window":"Window","cabinet":"Cabinet","custom":"Custom"},"removeOpening":"Remove Opening","materials":"Materials","mortarType":"Mortar Type","mortarTypes":{"modified":"Modified Thin-Set Mortar","unmodified":"Unmodified Thin-Set Mortar","epoxy":"Epoxy Mortar"},"groutType":"Grout Type","groutTypes":{"sanded":"Sanded Grout","unsanded":"Unsanded Grout","epoxy":"Epoxy Grout"},"additionalOptions":"Additional Options","wasteFactor":"Waste Factor","wasteFactors":{"10":"10% - Simple layout","15":"15% - Average complexity","20":"20% - Complex layout"},"includeBackerBoard":"Include Backer Board","backerBoardThicknessLabel":"Backer Board Thickness","backerBoardThicknesses":{"1_4":"1/4 inch","1_2":"1/2 inch"},"includeWaterproofMembrane":"Include Waterproof Membrane","includeEdgeTrim":"Include Edge Trim","edgeTrimType":"Edge Trim Type","edgingTypes":{"metal":"Metal Trim","stone":"Stone/Schluter Trim"},"totalSurfaceArea":"Total Surface Area","squareFeet":"square feet","areaWithWastePattern":"Area with {{wasteFactor}}% Waste + {{pattern}} Pattern","tileSize":"Tiles ({{width}}\\" x {{length}}\\")","boxes":"boxes","bags50lb":"50lb bags","groutWithJoints":"{{groutType}} ({{width}}\\" joints)","bags25lb":"25lb bags","backerBoardThickness":"Backer Board ({{thickness}}\\" thick)","sheets3x5":"3' x 5' sheets","backerBoardScrews":"Backer Board Screws","boxes100ct":"100-count boxes","waterproofMembrane":"Waterproof Membrane","rolls100sf":"100 sq ft rolls","pieces8ft":"8ft pieces","totalEstimatedCost":"Total Estimated Cost","usd":"USD"},"flooring":{"title":"Flooring Calculator","useDimensions":"Use Dimensions","useSquareFootage":"Use Square Footage","length":"Length (feet)","lengthPlaceholder":"Enter length in feet","width":"Width (feet)","widthPlaceholder":"Enter width in feet","totalArea":"Total Floor Area","totalAreaPlaceholder":"Enter total area in square feet","flooringSelection":"Flooring Selection","flooringType":"Flooring Type","hardwood":"Hardwood","engineered":"Engineered","laminate":"Laminate","vinyl":"Vinyl","carpet":"Carpet","productSelection":"Product Selection","productName":"Product Name","productNamePlaceholder":"Enter product name","pricePerBox":"Price per Box ($)","pricePerBoxPlaceholder":"Enter price per box","sqftPerBox":"Square Feet per Box","sqftPerBoxPlaceholder":"Enter square feet per box","installationDetails":"Installation Details","installationPattern":"Installation Pattern","wasteFactor":"Waste Factor","wasteFactor10":"10% - Simple room","wasteFactor15":"15% - Average complexity","wasteFactor20":"20% - Complex layout","includeUnderlayment":"Include Underlayment","underlaymentType":"Underlayment Type","includeTransitionStrips":"Include Transition Strips","transitionStripLength":"Transition Strip Length (feet)","transitionStripLengthPlaceholder":"Enter total length in feet","squareFeet":"square feet","areaWith":"Area with","waste":"Waste","pattern":"Pattern","boxes":"boxes","rolls100sf":"100 sq ft rolls","transitionStrips":"Transition Strips","pieces4ft":"4ft pieces","totalCost":"Total Cost"},"foundation":{"title":"Foundation Calculator","stripFooting":"Strip Footing","spreadFootings":"Spread Footings","thickenedEdge":"Thickened Edge","frostWall":"Frost Wall","isBasement":"Is Basement","length":"Length (feet)","width":"Width (feet)","enterLength":"Enter length in feet","enterWidth":"Enter width in feet","footingDetails":"Footing Details","footingWidth":"Footing Width (inches)","footingDepth":"Footing Depth (inches)","enterFootingWidth":"Enter footing width in inches","enterFootingDepth":"Enter footing depth in inches","stemWallDetails":"Stem Wall Details","basementWallDetails":"Basement Wall Details","stemWallHeight":"Stem Wall Height (feet)","wallHeight":"Wall Height (feet)","enterStemWallHeight":"Enter stem wall height in feet","enterWallHeight":"Enter wall height in feet","wallThickness":"Wall Thickness (inches)","enterWallThickness":"Enter wall thickness in inches","slabDetails":"Slab Details","basementFloorDetails":"Basement Floor Details","slabThickness":"Slab Thickness (inches)","floorThickness":"Floor Thickness (inches)","enterSlabThickness":"Enter slab thickness in inches","enterFloorThickness":"Enter floor thickness in inches","gravelBaseDepth":"Gravel Base Depth (inches)","enterGravelBaseDepth":"Enter gravel base depth in inches","siteConditions":"Site Conditions","soilType":"Soil Type","sandySoil":"Sandy Soil","claySoil":"Clay Soil","rockySoil":"Rocky Soil","backfillMaterial":"Backfill Material","native":"Native Soil","gravel":"Gravel","sand":"Sand","frostDepth":"Frost Depth (inches)","enterFrostDepth":"Enter frost depth in inches","concreteReinforcement":"Concrete & Reinforcement","concreteStrength":"Concrete Strength","includeSteelReinforcement":"Include Steel Reinforcement","rebarSize":"Rebar Size","rebarSpacing":"Rebar Spacing","onCenter":"on center","additionalOptions":"Additional Options","includeVaporBarrier":"Include Vapor Barrier","includeWaterproofing":"Include Waterproofing","includeDrainage":"Include Drainage","calculateMaterials":"Calculate Materials","footingConcrete":"Footing Concrete","cubicYards":"cubic yards","basementWall":"Basement Wall","stemWall":"Stem Wall","concrete":"Concrete","backfill":"Backfill","gravelBase":"Gravel Base","basementFloor":"Basement Floor","slab":"Slab","footingRebar":"Footing Rebar","pieces20ft":"20ft pieces","rebar":"Rebar","floor":"Floor","vaporBarrier":"Vapor Barrier (6mil poly)","rolls1000sf":"1000 sq ft rolls","waterproofing":"Waterproofing Membrane","gallons":"gallons","drainagePipe":"Drainage Pipe (4\\" perforated)","sections10ft":"10ft sections","drainageGravel":"Drainage Gravel","totalCost":"Total Estimated Cost"}}`),bE={common:aE,navigation:nE,settings:iE,dashboard:oE,projects:lE,clients:cE,estimates:dE,finance:uE,tasks:AE,employees:mE,calculator:hE,calendar:fE,subscriptions:gE,trades:pE,calculators:xE},yE={save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",add:"Agregar",search:"Buscar",filter:"Filtrar",loading:"Cargando...",success:"xito",error:"Error",validUntil:"Vlido hasta",upgradeMessage:"Actualice para desbloquear todas las funciones",manageSubscription:"Administrar Suscripcin",upgradeNow:"Actualizar Ahora",newProject:"Nuevo Proyecto",newEstimate:"Nuevo Presupuesto",viewAll:"Ver Todo",viewFull:"Ver Completo",upcomingEvents:"Prximos Eventos",noUpcomingEvents:"No hay prximos eventos",export:"Exportar",refresh:"Actualizar",addClient:"Agregar Cliente",totalClients:"Total de Clientes",active:"Activo",inactive:"Inactivo",prospects:"Prospectos",searchClients:"Buscar clientes...",allStatus:"Todos los Estados",totalRevenue:"Ingresos Totales",low:"Baja",medium:"Media",high:"Alta",amount:"Cantidad",company:"Empresa",status:"Estado"},vE={dashboard:"Panel",projects:"Gestor de Proyectos",clients:"Clientes",estimates:"Generador de Presupuestos",calculator:"Calculadora de Precios",finance:"Rastreador de Finanzas",calendar:"Calendario",settings:"Configuracin",subscriptions:"Planes de Suscripcin",employees:"Empleados"},wE={title:"Configuracin",saveChanges:"Guardar Cambios",saving:"Guardando...",profile:"Informacin del Perfil",fullName:"Nombre Completo",phone:"Telfono",company:"Nombre de la Empresa",address:"Direccin Comercial",defaultTerms:"Trminos y Condiciones Predeterminados",defaultTermsPlaceholder:"Ingrese sus trminos y condiciones estndar que se completarn automticamente en todos los presupuestos nuevos...",defaultTermsHelp:"Estos trminos se completarn automticamente en los nuevos presupuestos. Siempre puede editarlos en presupuestos individuales.",companyLogo:"Logo de la Empresa",uploadLogo:"Subir Logo",updateLogo:"Actualizar Logo",uploading:"Subiendo...",logoHelp:"PNG, JPG hasta 2MB. El logo aparecer en presupuestos y en el encabezado.",notifications:"Preferencias de Notificacin",calendarReminders:"Recordatorios de Calendario",calendarRemindersDesc:"Reciba notificaciones sobre eventos y fechas lmite del calendario",marketingEmails:"Correos de Marketing",marketingEmailsDesc:"Reciba noticias y ofertas especiales",securityAlerts:"Alertas de Seguridad",securityAlertsDesc:"Notificaciones importantes de seguridad",security:"Configuracin de Seguridad",changePassword:"Cambiar Contrasea",changePasswordDesc:"Actualice la contrasea de su cuenta",language:"Idioma",selectLanguage:"Seleccionar Idioma",english:"Ingls",spanish:"Espaol"},jE={title:"Panel",welcome:"Bienvenido de nuevo",overview:"Resumen",activeProjects:"Proyectos Activos",totalClients:"Total de Clientes",pendingEstimates:"Presupuestos Pendientes",thisMonth:"Este Mes",recentActivity:"Actividad Reciente",upcomingDeadlines:"Fechas Lmite Prximas",financialOverview:"Resumen Financiero",calendar:"Calendario",recentEstimates:"Presupuestos Recientes",projectStatus:"Estado del Proyecto",last30Days:"ltimos 30 das",last90Days:"ltimos 90 das",thisYear:"Este Ao",noProjectsYet:"An no hay proyectos. Crea tu primer proyecto para comenzar!"},NE={title:"Proyectos",subtitle:"Gestione sus proyectos de construccin",newProject:"Nuevo Proyecto",projectName:"Nombre del Proyecto",client:"Cliente",status:"Estado",priority:"Prioridad",budget:"Presupuesto",spent:"Gastado",progress:"Progreso",startDate:"Fecha de Inicio",endDate:"Fecha de Finalizacin",description:"Descripcin",tasks:"Tareas",comments:"Comentarios",team:"Equipo",addTask:"Agregar Tarea",addComment:"Agregar Comentario",taskTitle:"Ttulo de la Tarea",assignee:"Asignado a",dueDate:"Fecha de Vencimiento",active:"Activo",completed:"Completado",onHold:"En Espera",cancelled:"Cancelado",searchPlaceholder:"Buscar proyectos...",allStatus:"Todos los Estados",selectClient:"Seleccionar un cliente (opcional)",selectTask:"Seleccionar una tarea",addCommentPlaceholder:"Agregar un comentario...",overview:"Resumen",estimates:"Presupuestos"},CE={title:"Clientes",subtitle:"Gestione sus relaciones con clientes",newClient:"Nuevo Cliente",clientName:"Nombre del Cliente",email:"Correo Electrnico",phone:"Telfono",company:"Empresa",address:"Direccin",city:"Ciudad",state:"Estado",zip:"Cdigo Postal",notes:"Notas",status:"Estado",active:"Activo",inactive:"Inactivo",prospect:"Prospecto",totalClients:"Total de Clientes",searchPlaceholder:"Buscar clientes...",allStatus:"Todos los Estados",addClient:"Agregar Cliente",client:"CLIENTE",contact:"CONTACTO",location:"UBICACIN"},SE={title:"Presupuestos",subtitle:"Crear y gestionar presupuestos de proyectos",newEstimate:"Nuevo Presupuesto",estimateTitle:"Ttulo del Presupuesto",client:"Cliente",project:"Proyecto",subtotal:"Subtotal",tax:"Impuesto",total:"Total",status:"Estado",draft:"Borrador",sent:"Enviado",approved:"Aprobado",rejected:"Rechazado",items:"Artculos",addItem:"Agregar Artculo",description:"Descripcin",quantity:"Cantidad",unitPrice:"Precio Unitario",amount:"Cantidad",yourEstimates:"Sus Presupuestos",clientAndProject:"CLIENTE Y PROYECTO",date:"FECHA",actions:"ACCIONES",noEstimateLoaded:"No hay presupuesto cargado. Seleccione una plantilla o cree uno desde cero.",createNewEstimate:"Crear Nuevo Presupuesto",noEstimatesYet:"An no hay presupuestos. Crea tu primer presupuesto!",unsavedChanges:"Tiene cambios sin guardar. Est seguro de que desea salir?",deleteConfirm:"Est seguro de que desea eliminar este presupuesto?",previewInvoice:"Vista Previa de Factura",preview:"Vista Previa",sendToCustomer:"Enviar al Cliente",send:"Enviar",saveEstimate:"Guardar Presupuesto",exportAsPDF:"Exportar como PDF",exportAsExcel:"Exportar como Excel",customerApproved:"Aprobado por el Cliente",alreadyInvoiced:"Ya Facturado",convertToInvoice:"Convertir a Factura",clearDataConfirm:"Est seguro de que desea borrar todos los datos? Esta accin no se puede deshacer.",clearDataTitle:"Borrar todos los datos y empezar de nuevo",clearData:"Borrar Datos",savedSuccessfully:"Guardado Exitosamente"},BE={title:"Rastreador de Finanzas",subtitle:"Seguimiento de gastos, ingresos y gestin de finanzas",addExpense:"Agregar Gasto",addIncome:"Agregar Ingreso",type:"Tipo",category:"Categora",project:"Proyecto",amount:"Monto",date:"Fecha",receipt:"Recibo",uploadReceipt:"Subir Recibo",income:"Ingreso",expense:"Gasto",totalIncome:"Ingresos Totales",totalExpenses:"Gastos Totales",netProfit:"Ganancia Neta",materials:"Materiales",labor:"Mano de Obra",equipment:"Equipo",other:"Otro",dashboard:"Panel",revenue:"Ingresos",expenses:"Gastos",payments:"Pagos",invoices:"Facturas",recurring:"Recurrente",budget:"Presupuesto",reports:"Informes",sync:"Sincronizar",syncing:"Sincronizando..."},kE={title:"Tareas",addTask:"Agregar Tarea",taskName:"Nombre de la Tarea",description:"Descripcin",project:"Proyecto",assignedTo:"Asignado a",dueDate:"Fecha de Vencimiento",priority:"Prioridad",status:"Estado",high:"Alta",medium:"Media",low:"Baja",todo:"Por Hacer",inProgress:"En Progreso",completed:"Completado",comments:"Comentarios",addComment:"Agregar un comentario..."},FE={title:"Empleados",subtitle:"Gestione los miembros de su equipo",addEmployee:"Agregar Empleado",firstName:"Nombre",lastName:"Apellido",email:"Correo Electrnico",phone:"Telfono",role:"Rol",department:"Departamento",status:"Estado",active:"Activo",inactive:"Inactivo",totalEmployees:"Total de Empleados",searchPlaceholder:"Buscar empleados...",allStatus:"Todos los Estados",namePlaceholder:"Juan Prez",emailPlaceholder:"juan@ejemplo.com",phonePlaceholder:"(555) 123-4567",rolePlaceholder:"Gerente de Proyecto",salaryPlaceholder:"50",notesPlaceholder:"Notas adicionales sobre este empleado...",noEmployeesFound:"No se encontraron empleados",addFirstEmployee:"Agregar Primer Empleado",editEmployee:"Editar Empleado",addNewEmployee:"Agregar Nuevo Empleado"},EE={title:"Calculadora de Precios",subtitle:"Obtenga estimaciones de precios precisas impulsadas por IA para sus proyectos de construccin",exportPDF:"Exportar PDF",copyToEstimate:"Copiar a Presupuesto",selectTrade:"Seleccionar Oficio",projectSpecifications:"Especificaciones del Proyecto",calculating:"Calculando...",calculatePricing:"Calcular Precio",selectTradeToBegin:"Seleccione un Oficio para Comenzar",selectTradeDescription:"Elija entre ms de 20 oficios para obtener precios precisos impulsados por IA para su proyecto. Analizaremos los costos actuales de materiales y mano de obra para proporcionarle estimaciones detalladas.",calculatingPricing:"Calculando Precio...",readyToCalculate:"Listo para Calcular",aiAnalyzing:"Nuestra IA est analizando los costos actuales de materiales y mano de obra para su proyecto...",fillSpecifications:'Complete las especificaciones del proyecto y haga clic en "Calcular Precio" para obtener su estimacin detallada.'},_E={title:"Calendario de Proyectos",subtitle:"Gestione sus cronogramas y fechas lmite de proyectos",export:"Exportar",addEvent:"Agregar Evento",month:"Mes",week:"Semana",day:"Da"},PE={title:"Planes de Suscripcin",subtitle:"Elija el plan perfecto para su negocio. Todos los planes incluyen nuestras funciones principales con diferentes niveles de funcionalidad.",feature1:"Calculadora de precios impulsada por IA",feature2:"Gestin avanzada de proyectos",feature3:"Seguimiento financiero e informes",feature4:"Generador de presupuestos profesional",feature5:"Calendario y programacin",feature6:"Analizador de rendimiento de anuncios",currentPlan:"Plan Actual",subscribeNow:"Suscribirse Ahora",currentlySubscribed:"Actualmente est suscrito a este plan",needHelp:"Necesita Ayuda?",needHelpDescription:"Tiene preguntas sobre nuestros precios o necesita una solucin personalizada? Estamos aqu para ayudar.",contactSupport:"Contactar Soporte",guarantee:"Garanta de Devolucin de Dinero de 30 Das",guaranteeDescription:"Pruebe nuestro servicio sin riesgos. Si no est completamente satisfecho, obtenga un reembolso completo.",securePayments:"Pagos Seguros",securePaymentsDescription:"Todas las transacciones estn protegidas con cifrado SSL de 256 bits con tecnologa de Stripe.",support247:"Soporte 24/7",support247Description:"Obtenga ayuda cuando la necesite de nuestro equipo de soporte dedicado.",plan1Month:"1 Mes",plan3Months:"3 Meses",plan1Year:"1 Ao",perMonth:"/mes",per3Months:"/3 meses",perYear:"/ao",save3Months:"Ahorre $19.98",save1Year:"Ahorre $99.89",yourSubscription:"Su Suscripcin",choosePlan:"Elija Su Plan",manageDetails:"Administre los detalles de su suscripcin",selectPerfectPlan:"Seleccione el plan perfecto para su negocio de construccin",pleaseLogin:"Por favor inicie sesin para continuar",cancelConfirm:"Est seguro de que desea cancelar su suscripcin? Seguir teniendo acceso hasta el final de su perodo de facturacin actual.",cancelSuccess:"Su suscripcin ha sido cancelada. Seguir teniendo acceso hasta el final de su perodo de facturacin actual.",resumeAutoRenewalConfirm:"Reanudar la renovacin automtica de su suscripcin?",turnOffAutoRenewalConfirm:"Desactivar la renovacin automtica? Seguir teniendo acceso hasta el final de su perodo de facturacin actual."},IE={deck:"Terraza",siding:"Revestimiento",concrete:"Concreto",pavers:"Adoquines",retainingWalls:"Muros de Contencin",doorsWindows:"Puertas y Ventanas",fence:"Cerca",gutters:"Canalones",roofing:"Techado",drywall:"Paneles de Yeso",paint:"Pintura",flooring:"Pisos",tile:"Azulejos",framing:"Enmarcado",foundation:"Cimientos",excavation:"Excavacin",junkRemoval:"Remocin de Basura",electrical:"Elctrico",hvac:"HVAC",plumbing:"Plomera"},UE=JSON.parse('{"calculateMaterials":"Calcular Materiales","useDimensions":"Usar Dimensiones","useSquareFootage":"Usar Pies Cuadrados","lengthFeet":"Longitud (pies)","widthFeet":"Ancho (pies)","heightFeet":"Altura (pies)","enterLength":"Ingresar longitud en pies","enterWidth":"Ingresar ancho en pies","enterHeight":"Ingresar altura en pies","deck":{"title":"Calculadora de Terrazas","useDimensions":"Usar Dimensiones","useSquareFootage":"Usar Pies Cuadrados","length":"Longitud (pies)","lengthPlaceholder":"Ingrese la longitud en pies","width":"Ancho (pies)","widthPlaceholder":"Ingrese el ancho en pies","totalArea":"rea Total (pies cuadrados)","totalAreaPlaceholder":"Ingrese el rea total en pies cuadrados","deckingType":"Tipo de Entarimado","framingDetails":"Detalles del Enmarcado","customBoardWidth":"Ancho de Tabla Personalizado (pulgadas)","enterBoardWidth":"Ingresar ancho de tabla","boardSpacing":"Espaciado de Tablas (pulgadas)","enterSpacing":"Ingresar espaciado entre tablas","joistSpacing":"Espaciado de Vigas","joistSpacing12":"12\\" al centro","joistSpacing16":"16\\" al centro","joistSize":"Tamao de Viga","joists2x6":"Vigas 2x6","joists2x8":"Vigas 2x8","joists2x10":"Vigas 2x10","joists2x12":"Vigas 2x12","beamSpan":"Tramo de Viga (pies)","enterBeamSpan":"Ingresar tramo de viga","includeCantilever":"Incluir Voladizo","cantileverLength":"Longitud de Voladizo (pulgadas) - Mx 24 pulgadas","enterCantilever":"Ingresar longitud de voladizo (mx 24 pulgadas)","cantileverWarning":"Advertencia: El voladizo mximo recomendado es de 24 pulgadas","includeStairs":"Incluir Escaleras","heightAboveGrade":"Altura Sobre el Nivel (pulgadas)","enterHeightInches":"Ingresar altura en pulgadas","stairWidth":"Ancho de Escalera (pulgadas)","enterStairWidth":"Ingresar ancho de escalera (mn. 36 pulgadas)","stairWidthWarning":"Advertencia: El ancho mnimo recomendado de escalera es de 36 pulgadas","stairRun":"Huella de Escalera (pulgadas)","stairRun10":"10\\" (Estndar)","stairRun12":"12\\" (Extendida)","includeRailing":"Incluir Barandilla","railingType":"Tipo de Barandilla","pressureTreated":"Tratada a Presin","trexComposite":"Compuesto Trex","railingLength":"Longitud Total de Barandilla (pies)","enterRailingLength":"Ingresar longitud total de barandilla en pies","includeFascia":"Incluir Tablas de Fascia","fasciaMaterial":"Material de Fascia","azekPVC":"Azek PVC","metalStock":"Lmina de Metal","fasciaLength":"Longitud Total de Fascia (pies)","enterFasciaLength":"Ingresar longitud total de fascia en pies"},"siding":{"title":"Calculadora de Revestimiento","totalWallArea":"rea Total de Pared","squareFeet":"pies cuadrados","siding":"Revestimiento","squares":"cuadrados","houseWrap":"Papel de Casa","rolls1000sf":"rollos de 1000 pies cuadrados","houseWrapTape":"Cinta de Papel de Casa","rolls":"rollos","foamInsulation":"Aislamiento de Espuma","bundles":"paquetes","starterStrip":"Tira de Arranque","pieces12ft":"piezas de 12 pies","jChannel":"Canal J","pieces12_5ft":"piezas de 12.5 pies","cornerPosts":"Postes de Esquina","pieces10ft":"piezas de 10 pies","trim":"Moldura","pieces16ft":"piezas de 16 pies","sidingFasteners":"Sujetadores de Revestimiento","boxes1000ct":"cajas de 1000 unidades","totalEstimatedCost":"Costo Total Estimado","sidingMaterial":"Material de Revestimiento","vinylSiding":"Revestimiento de Vinilo","fiberCementSiding":"Revestimiento de Fibrocemento","woodSiding":"Revestimiento de Madera","metalSiding":"Revestimiento de Metal","engineeredWoodSiding":"Revestimiento de Madera Ingeniera","sidingProfile":"Perfil de Revestimiento","traditionalLap":"Solapa Tradicional","dutchLap":"Solapa Holandesa","verticalBoardBatten":"Tabla Vertical y Listn","shakeShingle":"Teja Sacudida","exposureInches":"Exposicin (pulgadas)","exposure4":"4\\" de Exposicin","exposure5":"5\\" de Exposicin","exposure6":"6\\" de Exposicin","exposure7":"7\\" de Exposicin","exposure8":"8\\" de Exposicin","wasteFactor":"Factor de Desperdicio","wasteFactor10":"10% - Simple","wasteFactor15":"15% - Promedio","wasteFactor20":"20% - Complejo","walls":"Paredes","addWall":"Agregar Pared","wallLength":"Longitud de Pared (pies)","enterWallLength":"Ingresar longitud de pared","wallHeight":"Altura de Pared (pies)","enterWallHeight":"Ingresar altura de pared","isGableWall":"Es Pared de Hastial?","gableHeight":"Altura de Hastial (pies)","enterGableHeight":"Ingresar altura de hastial","openings":"Aberturas","addDoor":"Agregar Puerta","addWindow":"Agregar Ventana","addGarage":"Agregar Garaje","addCustom":"Agregar Personalizado","widthFeet":"Ancho (pies)","heightFeet":"Altura (pies)","remove":"Eliminar","removeWall":"Eliminar Pared","additionalOptions":"Opciones Adicionales","includeHouseWrap":"Incluir Papel de Casa","includeFoamInsulation":"Incluir Aislamiento de Espuma","includeStarterStrip":"Incluir Tira de Arranque","includeJChannel":"Incluir Canal J","includeCornerPosts":"Incluir Postes de Esquina","includeTrim":"Incluir Moldura","trimMaterial":"Material de Moldura","vinylTrim":"Moldura de Vinilo","woodTrim":"Moldura de Madera","aluminumTrim":"Moldura de Aluminio","fiberCementTrim":"Moldura de Fibrocemento"},"fencing":{"title":"Calculadora de Cercas","posts":"Postes","postsUnit":"postes","postCaps":"Tapas de Postes","capsUnit":"tapas","concreteMix":"Mezcla de Concreto","concreteBagsUnit":"bolsas de 60 lb","postSpikes":"Pinchos de Poste","piecesUnit":"piezas","postMountingBrackets":"Soportes de Montaje de Poste","panels":"Paneles","panelsUnit":"paneles","pickets":"Estacas","picketsUnit":"estacas","chainLinkFabric":"Tela de Malla Ciclnica","squareYardsUnit":"yardas cuadradas","rails":"Rieles","railsUnit":"rieles","kickboard":"Tabla de Rodapi","kickboardUnit":"piezas de 8 pies","gate":"Puerta","gateUnit":"puerta","gateHardware":"Herrajes de Puerta","gateHardwareUnit":"juego","totalEstimatedCost":"Costo Total Estimado","currencyUnit":"USD","fenceType":"Tipo de Cerca","privacyFence":"Cerca de Privacidad","picketFence":"Cerca de Estacas","chainLinkFence":"Cerca de Malla Ciclnica","ranchRailFence":"Cerca de Riel de Rancho","panelFence":"Cerca de Paneles","material":"Material","wood":"Madera","vinyl":"Vinilo","composite":"Compuesto","metal":"Metal","totalLength":"Longitud Total (pies)","enterFenceLength":"Ingresar longitud de cerca","height":"Altura (pies)","enterFenceHeight":"Ingresar altura de cerca","postSpacing":"Espaciado de Postes","sixFeet":"6 pies","eightFeet":"8 pies","gates":"Puertas","addSingleGate":"Agregar Puerta Simple","addDoubleGate":"Agregar Puerta Doble","addRollingGate":"Agregar Puerta Rodante","gateWidth":"Ancho de Puerta (pulgadas)","gateHeight":"Altura de Puerta (pulgadas)","includeHardware":"Incluir Herrajes","removeGate":"Eliminar Puerta","corners":"Esquinas","addCorner":"Agregar Esquina","cornerAngle":"ngulo de Esquina (grados)","removeCorner":"Eliminar Esquina","terrainInstallation":"Terreno e Instalacin","slopeType":"Tipo de Pendiente","levelGround":"Terreno Nivelado","stepping":"Escalonado","racking":"Inclinado","slopePercentage":"Porcentaje de Pendiente","enterSlopePercentage":"Ingresar porcentaje de pendiente","postMountingMethod":"Mtodo de Montaje de Postes","concrete":"Concreto","groundSpike":"Pincho de Tierra","surfaceMountBracket":"Soporte de Montaje en Superficie","postHoleDepth":"Profundidad de Agujero de Poste (pulgadas)","enterPostHoleDepth":"Ingresar profundidad de agujero de poste","additionalOptions":"Opciones Adicionales","includePostCaps":"Incluir Tapas de Postes","includeKickboard":"Incluir Tabla de Rodapi","wasteFactor":"Factor de Desperdicio","wasteFactorSimple":"10% - Simple","wasteFactorAverage":"15% - Promedio","wasteFactorComplex":"20% - Complejo"},"gutters":{"title":"Calculadora de Canalones","roofEdgeLength":"Longitud del Borde del Techo (pies)","enterRoofEdgeLength":"Ingresar longitud total en pies","roofPitch":"Pendiente del Techo (pulgadas por pie)","gutterSpecifications":"Especificaciones de Canalones","gutterMaterial":"Material de Canaln","aluminum":"Aluminio","vinyl":"Vinilo","galvanizedSteel":"Acero Galvanizado","copper":"Cobre","gutterSize":"Tamao de Canaln","fiveInchKStyle":"K-Style de 5\\"","sixInchKStyle":"K-Style de 6\\"","customSize":"Tamao Personalizado","customGutterPrice":"Precio de Canaln Personalizado (por pie)","enterPricePerFoot":"Ingresar precio por pie","maximumSpan":"Tramo Mximo (pies)","enterMaximumSpan":"Ingresar tramo mximo","downspouts":"Bajantes","downspoutSize":"Tamao de Bajante","twoByThree":"2\\" x 3\\"","threeByFour":"3\\" x 4\\"","customDownspoutPrice":"Precio de Bajante Personalizado (por pie)","additionalDetails":"Detalles Adicionales","numberOfValleys":"Nmero de Valles","enterNumberOfValleys":"Ingresar nmero de valles","includeLeafGuards":"Incluir Protectores de Hojas","includeEndcaps":"Incluir Tapas de Extremo","includeCorners":"Incluir Esquinas","numberOfCorners":"Nmero de Esquinas","enterNumberOfCorners":"Ingresar nmero de esquinas","includeHeatTape":"Incluir Cinta Trmica","heatTapeLength":"Longitud de Cinta Trmica (pies)","enterHeatTapeLength":"Ingresar longitud de cinta trmica"},"retainingWall":{"title":"Calculadora de Muros de Contencin","totalWallArea":"rea Total del Muro","squareFeet":"pies cuadrados","customBlocks":"Bloques Personalizados","blocks":"bloques","retainingWallBlocks":"Bloques de Muro de Contencin","capstoneBlocks":"Bloques de Remate","pieces":"piezas","concreteNeeded":"Concreto Necesario","cubicYards":"yardas cbicas","rebarNeeded":"Varilla Necesaria","linearFeet":"pies lineales","pressureTreatedTimbers":"Vigas Tratadas a Presin","eightFootLengths":"longitudes de 8 pies","deadmenTimbers":"Vigas de Anclaje","gravelBaseMaterial":"Material de Base de Grava","drainageGravel":"Grava de Drenaje","drainagePipe":"Tubera de Drenaje","tenFootSections":"secciones de 10 pies","geogridReinforcement":"Refuerzo de Geomalla","twoHundredSfRolls":"rollos de 200 pies cuadrados","filterFabric":"Tela Filtrante","threeHundredSfRolls":"rollos de 300 pies cuadrados","totalEstimatedCost":"Costo Total Estimado","usd":"USD","blockWall":"Muro de Bloques","concreteWall":"Muro de Concreto","timberWall":"Muro de Madera","wallLengthFeet":"Longitud del Muro (pies)","enterWallLengthPlaceholder":"Ingresar longitud del muro","wallHeightFeet":"Altura del Muro (pies)","enterWallHeightPlaceholder":"Ingresar altura del muro","blockType":"Tipo de Bloque","standardBlock":"Bloque Estndar (12\\"x8\\"x12\\")","pinnedBlock":"Bloque con Pasador (16\\"x6\\"x12\\")","gravityBlock":"Bloque de Gravedad (18\\"x8\\"x24\\")","customBlockSize":"Tamao de Bloque Personalizado","blockWidthInches":"Ancho de Bloque (pulgadas)","widthInInchesPlaceholder":"Ancho en pulgadas","blockHeightInches":"Altura de Bloque (pulgadas)","heightInInchesPlaceholder":"Altura en pulgadas","blockDepthInches":"Profundidad de Bloque (pulgadas)","depthInInchesPlaceholder":"Profundidad en pulgadas","pricePerBlock":"Precio por Bloque ($)","pricePerBlockPlaceholder":"Precio por bloque","blockWeightLbs":"Peso del Bloque (libras)","weightInPoundsPlaceholder":"Peso en libras","soilType":"Tipo de Suelo","sandySoil":"Suelo Arenoso","claySoil":"Suelo Arcilloso","gravelRockySoil":"Suelo de Grava/Rocoso","drainageSystem":"Sistema de Drenaje","gravelAndPipe":"Grava y Tubera","gravelOnly":"Solo Grava","pipeOnly":"Solo Tubera","noDrainage":"Sin Drenaje","additionalOptions":"Opciones Adicionales","includeFrostProtection":"Incluir Proteccin contra Heladas","includeCapstone":"Incluir Remate","includeGeogridReinforcement":"Incluir Refuerzo de Geomalla (para muros >4 pies)","numberOfGeogridLayers":"Nmero de Capas de Geomalla","layersCount":"{{count}} capas"},"doorsWindows":{"title":"Calculadora de Puertas y Ventanas","units":{"units":"unidades","kits":"kits","linearFeet":"pies lineales","sets":"juegos","rolls20ft":"rollos de 20 pies","rolls":"rollos","tubes":"tubos","packs":"paquetes"},"doorStyles":{"entry":"Puerta de Entrada","interior":"Puerta Interior","patio":"Puerta de Patio","french":"Puerta Francesa","bifold":"Puerta Plegable"},"windowStyles":{"singleHung":"Ventana de Guillotina Simple","doubleHung":"Ventana de Guillotina Doble","casement":"Ventana Abatible","sliding":"Ventana Deslizante","picture":"Ventana Panormica"},"trimStyles":{"basic":"Moldura Bsica","colonial":"Moldura Colonial","craftsman":"Moldura Artesanal","modern":"Moldura Moderna"},"materials":{"steel":"Acero","fiberglass":"Fibra de Vidrio","wood":"Madera","hollow-core":"Ncleo Hueco","solid-core":"Ncleo Slido","vinyl":"Vinilo","aluminum":"Aluminio"},"finishes":{"primed":"Imprimado","stained":"Teido","painted":"Pintado","white":"Blanco","bronze":"Bronce"},"preHungFrame":"Marco Pre-Colgado","trim":"Moldura","door":"Puerta","window":"Ventana","hardware":"Herrajes","insulation":"Aislamiento de Espuma","flashingTape":"Cinta Impermeable","caulk":"Sellador","shimPacks":"Paquetes de Cuas","addDoor":"Agregar Puerta","addWindow":"Agregar Ventana","doorStyle":"Estilo de Puerta","windowStyle":"Estilo de Ventana","material":"Material","finish":"Acabado","widthInches":"Ancho (pulgadas)","heightInches":"Altura (pulgadas)","quantity":"Cantidad","exteriorInstallation":"Instalacin Exterior","preHung":"Pre-Colgado","includeTrim":"Incluir Moldura","trimStyle":"Estilo de Moldura","includeHardware":"Incluir Herrajes","remove":"Eliminar","emptyMessage":"No se han agregado puertas ni ventanas. Haga clic en los botones de arriba para comenzar.","additionalMaterials":"Materiales Adicionales","includeInsulation":"Incluir Aislamiento de Espuma","includeFlashing":"Incluir Cinta Impermeable","includeCaulk":"Incluir Sellador","includeShims":"Incluir Cuas"},"electrical":{"title":"Calculadora Elctrica","ampPanel":"A Panel","spaces":"espacios","panel":"panel","groundingSystem":"Sistema de Puesta a Tierra","set":"juego","wire":"Cable","ftRolls":"ft rollos","conduit":"Conducto","tenFtLengths":"longitudes de 10 pies","conduitFittings":"Accesorios de Conducto","pieces":"piezas","devices":"Dispositivos","electricalBoxes":"Cajas Elctricas","ampCircuitBreaker":"A Interruptor Automtico","afci":"AFCI","piece":"pieza","circuits":"Circuitos","addCircuit":"Agregar Circuito","addCircuitsPrompt":"No se han agregado circuitos. Agregue circuitos para calcular materiales elctricos.","addFirstCircuit":"Agregar Primer Circuito","circuitType":"Tipo de Circuito","lightingCircuit":"Circuito de Iluminacin","receptacleCircuit":"Circuito de Receptculos","applianceCircuit":"Circuito de Electrodomsticos","hvacCircuit":"Circuito de HVAC","amperage":"Amperaje","fifteenAmp":"15 Amperios","twentyAmp":"20 Amperios","thirtyAmp":"30 Amperios","fortyAmp":"40 Amperios","fiftyAmp":"50 Amperios","voltage":"Voltaje","onetwentyV":"120V","twofortyV":"240V","wireLengthFeet":"Longitud de Cable (pies)","enterWireLength":"Ingresar longitud de cable","wireGauge":"Calibre de Cable","fourteenAWG":"14 AWG","twelveAWG":"12 AWG","tenAWG":"10 AWG","eightAWG":"8 AWG","sixAWG":"6 AWG","wireType":"Tipo de Cable","nmb":"NM-B (Romex)","thhn":"THHN (En Conducto)","ser":"SER (Alimentador)","ufb":"UF-B (Subterrneo)","deviceCount":"Cantidad de Dispositivos","enterDeviceCount":"Ingresar cantidad de dispositivos","boxCount":"Cantidad de Cajas","enterBoxCount":"Ingresar cantidad de cajas","requiresConduit":"Requiere Conducto","conduitType":"Tipo de Conducto","emt":"EMT (Metal)","pvc":"PVC","flexible":"Flexible","conduitSize":"Tamao de Conducto","halfInch":"1/2\\"","threeQuarterInch":"3/4\\"","oneInch":"1\\"","removeCircuit":"Eliminar Circuito","additionalOptions":"Opciones Adicionales","includePanel":"Incluir Panel Principal","panelSize":"Tamao de Panel","oneHundredAmp":"100 Amperios","oneFiftyAmp":"150 Amperios","twoHundredAmp":"200 Amperios","panelSpaces":"Espacios del Panel","twentySpace":"20 Espacios","thirtySpace":"30 Espacios","fortySpace":"40 Espacios","includeGroundRods":"Incluir Varillas de Puesta a Tierra","includeGFCIProtection":"Incluir Proteccin GFCI (para circuitos de receptculos)","includeAFCIProtection":"Incluir Proteccin AFCI (para circuitos de dormitorios)"},"excavation":{"title":"Calculadora de Excavacin","baseExcavationVolume":"Volumen de Excavacin Base","cubicYards":"yardas cbicas","volumeWithSpoilFactor":"Volumen con Factor de Esponjamiento ({{factor}}%)","removalCost":"Costo de Remocin","usd":"USD","totalHaulOffCost":"Costo Total de Transporte","totalCost":"Costo Total","lengthFeet":"Longitud (pies)","enterLengthInFeet":"Ingresar longitud en pies","widthFeet":"Ancho (pies)","enterWidthInFeet":"Ingresar ancho en pies","depthFeet":"Profundidad (pies)","enterDepthInFeet":"Ingresar profundidad en pies","removalCostPerCubicYard":"Costo de Remocin por Yarda Cbica ($)","enterRemovalCostPerCubicYard":"Ingresar costo de remocin por yarda cbica","siteConditions":"Condiciones del Sitio","soilType":"Tipo de Suelo","looseSoil":"Suelo Suelto (fcil de excavar)","compactedSoil":"Suelo Compactado (dificultad media)","rockySoil":"Suelo Rocoso (difcil de excavar)","includeSlopedSides":"Incluir Lados Inclinados","slopeRatio":"Relacin de Pendiente","slope1to1":"1:1 (45 grados)","slope1_5to1":"1.5:1 (ms gradual)","slope2to1":"2:1 (pendiente suave)","additionalOptions":"Opciones Adicionales","addSpoilFactor":"Agregar Factor de Esponjamiento","spoilFactorPercentage":"Porcentaje de Factor de Esponjamiento","spoilFactor10":"10% - Suelo arenoso","spoilFactor15":"15% - Suelo promedio","spoilFactor20":"20% - Suelo arcilloso","includeHaulOff":"Incluir Transporte Fuera del Sitio","totalHaulOffCostForJob":"Costo Total de Transporte para el Trabajo","enterTotalHaulOffCost":"Ingresar costo total de transporte"},"junkRemoval":{"title":"Calculadora de Remocin de Basura","itemsToRemove":"Artculos a Remover","categories":{"furniture":"Muebles","appliances":"Electrodomsticos","construction":"Escombros de Construccin","yardWaste":"Desechos de Jardn","electronics":"Electrnicos","miscellaneous":"Miscelneos"},"items":{"sofa":"Sof","loveseat":"Sof de Dos Plazas","armchair":"Silln","dining-table":"Mesa de Comedor","mattress-twin":"Colchn Individual","mattress-full":"Colchn Completo","mattress-queen":"Colchn Queen","mattress-king":"Colchn King","dresser":"Cmoda","bookshelf":"Estante","refrigerator":"Refrigerador","washer":"Lavadora","dryer":"Secadora","dishwasher":"Lavavajillas","stove":"Estufa","microwave":"Microondas","drywall-pile":"Pila de Paneles de Yeso","lumber-pile":"Pila de Madera","concrete-debris":"Escombros de Concreto","roofing-material":"Material de Techado","tiles":"Azulejos","branches":"Ramas","dirt":"Tierra","grass-clippings":"Recortes de Csped","leaves":"Hojas","rocks":"Rocas","tv-crt":"TV de Tubo CRT","tv-flat":"TV de Pantalla Plana","computer":"Computadora","printer":"Impresora","monitor":"Monitor","boxes":"Cajas","bags":"Bolsas","tires":"Neumticos","metal-scrap":"Chatarra Metlica","glass":"Vidrio"},"itemType":"Tipo de Artculo","quantity":"Cantidad","requiresSpecialDisposal":"Requiere Eliminacin Especial","mayRequireDisassembly":"Puede Requerir Desmontaje","removeItem":"Eliminar Artculo","serviceDetails":"Detalles del Servicio","distanceToDisposalSite":"Distancia al Sitio de Eliminacin (millas)","enterDistancePlaceholder":"Ingresar distancia en millas","accessDifficulty":"Dificultad de Acceso","accessLevels":{"easy":"Fcil (nivel del suelo, cerca del camin)","moderate":"Moderado (algunos escalones, distancia corta)","difficult":"Difcil (mltiples pisos, larga distancia)"},"numberOfFloors":"Nmero de Pisos","needLoadingAssistance":"Necesita Asistencia de Carga?","numberOfWorkers":"Nmero de Trabajadores","workersCount":{"two":"2 Trabajadores","three":"3 Trabajadores","four":"4 Trabajadores"},"additionalOptions":"Opciones Adicionales","includeDisposalFees":"Incluir Tarifas de Eliminacin","requiresDisposalPermit":"Requiere Permiso de Eliminacin","containsHazardousMaterials":"Contiene Materiales Peligrosos","units":{"items":"artculos","cubicFeet":"pies cbicos","pounds":"libras","usd":"USD","laborHours":"horas-hombre","miles":"millas","permit":"permiso","multiplier":"multiplicador"},"results":{"totalVolume":"Volumen Total","totalWeight":"Peso Total","baseRemovalCost":"Costo Base de Remocin","labor":"Mano de Obra","workers":"trabajadores","hours":"horas","distanceFee":"Tarifa de Distancia","specialDisposalFee":"Tarifa de Eliminacin Especial","disposalPermit":"Permiso de Eliminacin","hazardousMaterialFee":"Tarifa de Material Peligroso","accessDifficultyFloorAdjustment":"Ajuste por Dificultad de Acceso/Pisos","totalEstimatedCost":"Costo Total Estimado"}},"hvac":{"title":"Calculadora de HVAC","condenserUnit":"Unidad Condensadora de {{tonnage}} Toneladas","unit":"unidad","airHandler":"Manejador de Aire de {{tonnage}} Toneladas","packageUnit":"Unidad Empaquetada de {{tonnage}} Toneladas","miniSplitOutdoor":"Mini-Split Exterior de {{tonnage}} Toneladas","miniSplitIndoor":"Unidades Interiores Mini-Split","units":"unidades","ductworkSupply":"Conducto de Suministro de {{size}}\\"","ductworkReturn":"Conducto de Retorno de {{size}}\\"","linearFeet":"pies lineales","refrigerantLineSet":"Juego de Lnea de Refrigerante","feet":"pies","condensateDrainLine":"Lnea de Drenaje de Condensado","wholeHouseHumidifier":"Humidificador para Toda la Casa","uvLightSystem":"Sistema de Luz UV","airCleanerSystem":"Sistema Purificador de Aire","zoneControlSystem":"Sistema de Control por Zonas ({{zones}} zonas)","system":"sistema","installationLabor":"Mano de Obra de Instalacin","service":"servicio","totalEstimatedCost":"Costo Total Estimado","usd":"USD","splitSystem":"Sistema Dividido","miniSplit":"Mini-Split","mildClimate":"Clima Suave","moderateClimate":"Clima Moderado","extremeClimate":"Clima Extremo","rooms":"Habitaciones","addRoom":"Agregar Habitacin","roomName":"Nombre de Habitacin","enterRoomName":"Ingresar nombre de habitacin","defaultRoomName":"Habitacin {{number}}","lengthFeet":"Longitud (pies)","enterLength":"Ingresar longitud","widthFeet":"Ancho (pies)","enterWidth":"Ingresar ancho","heightFeet":"Altura (pies)","enterHeight":"Ingresar altura","numberOfWindows":"Nmero de Ventanas","enterNumberOfWindows":"Ingresar nmero de ventanas","primaryExposure":"Exposicin Principal","north":"Norte","south":"Sur","east":"Este","west":"Oeste","insulationQuality":"Calidad de Aislamiento","poor":"Pobre","average":"Promedio","good":"Bueno","removeRoom":"Eliminar Habitacin","estimatedLoad":"Carga Estimada: {{btus}} BTU","ductwork":"Conductos","addDuctRun":"Agregar Tramo de Conducto","ductType":"Tipo de Conducto","supply":"Suministro","return":"Retorno","ductSizeInches":"Tamao de Conducto (pulgadas)","numberOfElbows":"Nmero de Codos","enterNumberOfElbows":"Ingresar nmero de codos","numberOfTakeoffs":"Nmero de Derivaciones","enterNumberOfTakeoffs":"Ingresar nmero de derivaciones","removeDuctRun":"Eliminar Tramo de Conducto","lineSetsAndDrains":"Juegos de Lnea y Drenajes","refrigerantLineLengthFeet":"Longitud de Lnea de Refrigerante (pies)","enterLineSetLength":"Ingresar longitud de juego de lnea","condensateDrainLengthFeet":"Longitud de Lnea de Drenaje de Condensado (pies)","enterDrainLength":"Ingresar longitud de drenaje","additionalOptions":"Opciones Adicionales","includeWholeHouseHumidifier":"Incluir Humidificador para Toda la Casa","includeUVLightSystem":"Incluir Sistema de Luz UV","includeAirCleanerSystem":"Incluir Sistema Purificador de Aire","includeZoningSystem":"Incluir Sistema de Zonificacin","numberOfZones":"Nmero de Zonas","twoZones":"2 Zonas","threeZones":"3 Zonas","fourZones":"4 Zonas"},"plumbing":{"title":"Calculadora de Plomera","standardStainlessSteelKitchenSink":"Fregadero de Cocina Estndar de Acero Inoxidable","standardTwoPieceToilet":"Inodoro Estndar de Dos Piezas","standardShowerKit":"Kit de Ducha Estndar","pressureBalanceShowerValve":"Vlvula de Ducha de Balance de Presin","standardShowerHead":"Cabezal de Ducha Estndar","showerTrimKit":"Kit de Acabado de Ducha","showerDrainAssembly":"Ensamblaje de Drenaje de Ducha","standardAlcoveBathtub":"Baera de Alcoba Estndar","washerConnectionBox":"Caja de Conexin de Lavadora","dishwasherConnectionKit":"Kit de Conexin de Lavavajillas","customFixture":"Accesorio Personalizado","piece":"pieza","supplyLines":"Lneas de Suministro","pieces":"piezas","drainAssembly":"Ensamblaje de Drenaje","set":"juego","pipe":"Tubera","feet":"pies","gallon":"galones","tankless":"Sin Tanque","waterHeater":"Calentador de Agua","unit":"unidad","waterHeaterInstallationKit":"Kit de Instalacin de Calentador de Agua","kit":"kit","waterSoftenerSystem":"Sistema de Ablandador de Agua","softenerInstallationKit":"Kit de Instalacin de Ablandador","pressureTank":"Tanque de Presin","pressureTankInstallationKit":"Kit de Instalacin de Tanque de Presin","sewerPipe":"Tubera de Alcantarillado (4\\" PVC)","cleanouts":"Limpiezas","totalEstimatedCost":"Costo Total Estimado","fixtures":"Accesorios","addSink":"Agregar Fregadero","addToilet":"Agregar Inodoro","addShower":"Agregar Ducha","addTub":"Agregar Baera","addCustom":"Agregar Personalizado","fixtureName":"Nombre del Accesorio","enterFixtureName":"Ingresar nombre del accesorio","fixtureCost":"Costo del Accesorio ($)","enterFixtureCost":"Ingresar costo del accesorio","drainSize":"Tamao de Drenaje","ventSize":"Tamao de Ventilacin","distanceFromStack":"Distancia de la Columna (pies)","removeFixture":"Eliminar Accesorio","pipingRuns":"Tramos de Tubera","addSupplyLine":"Agregar Lnea de Suministro","addDrainLine":"Agregar Lnea de Drenaje","addVentLine":"Agregar Lnea de Ventilacin","pipeSize":"Tamao de Tubera","pipeMaterial":"Material de Tubera","copper":"Cobre","castIron":"Hierro Fundido","length":"Longitud (pies)","enterLength":"Ingresar longitud","fittings":"Accesorios","elbows90":"Codos de 90","elbows45":"Codos de 45","tees":"Tees","couplings":"Acoplamientos","adapters":"Adaptadores","valves":"Vlvulas","removePipingRun":"Eliminar Tramo de Tubera","equipment":"Equipo","includeWaterHeater":"Incluir Calentador de Agua","waterHeaterType":"Tipo de Calentador de Agua","tankWaterHeater":"Calentador de Agua con Tanque","tanklessWaterHeater":"Calentador de Agua Sin Tanque","tankSize":"Tamao del Tanque (galones)","capacity":"Capacidad (galones)","includeWaterSoftener":"Incluir Ablandador de Agua","includePressureTank":"Incluir Tanque de Presin","pressureTankSize":"Tamao del Tanque de Presin (galones)","drainage":"Drenaje","includeSewerConnection":"Incluir Conexin de Alcantarillado","sewerLineLength":"Longitud de Lnea de Alcantarillado (pies)","enterSewerLineLength":"Ingresar longitud de lnea de alcantarillado","includeCleanouts":"Incluir Limpiezas","numberOfCleanouts":"Nmero de Limpiezas","enterNumberOfCleanouts":"Ingresar nmero de limpiezas"},"framing":{"title":"Calculadora de Enmarcado","studs":"Vigas {{size}} @ {{spacing}}\\" al centro","pieces":"piezas","plates":"Placas {{size}}","headers":"Cabeceras {{size}}","blocking":"Bloqueo","fireblocking":"Bloqueo Contra Incendios","tiedowns":"Anclajes","sheathing":"Revestimiento {{type}} {{thickness}}","sheets":"lminas","nails":"Clavos de Enmarcado","nailBoxes":"cajas de 1000","wall":"Pared","floor":"Piso","ceiling":"Techo","length":"Longitud (pies)","lengthPlaceholder":"Ingresar longitud en pies","height":"Altura (pies)","heightPlaceholder":"Ingresar altura en pies","studSpacing":"Espaciado de Vigas","spacing16":"16\\" al centro","spacing24":"24\\" al centro","lumberSize":"Tamao de Madera","lumber2x4":"2x4","lumber2x6":"2x6","plateConfiguration":"Configuracin de Placas","singleTopPlate":"Placa Superior Simple","doubleTopPlate":"Placa Superior Doble","openings":"Aberturas","addDoor":"Agregar Puerta","addWindow":"Agregar Ventana","widthFeet":"Ancho (pies)","heightFeet":"Altura (pies)","includeRoughOpening":"Incluir Abertura Rugosa","add2Inches":"Agregar 2\\" para espacio","removeOpening":"Eliminar Abertura","additionalOptions":"Opciones Adicionales","includeBlocking":"Incluir Bloqueo","includeFireblocking":"Incluir Bloqueo Contra Incendios","includeTiedowns":"Incluir Anclajes","includeSheathing":"Incluir Revestimiento","sheathingType":"Tipo de Revestimiento","osb":"OSB","plywood":"Contrachapado","thickness":"Espesor"},"concrete":{"title":"Calculadora de Concreto"},"drywall":{"title":"Calculadora de Paneles de Yeso"},"pavers":{"title":"Calculadora de Adoquines"},"roofing":{"title":"Calculadora de Techado"},"paint":{"title":"Calculadora de Pintura"},"tile":{"title":"Calculadora de Azulejos"},"flooring":{"title":"Calculadora de Pisos","useDimensions":"Usar Dimensiones","useSquareFootage":"Usar Pies Cuadrados","length":"Longitud (pies)","lengthPlaceholder":"Ingrese la longitud en pies","width":"Ancho (pies)","widthPlaceholder":"Ingrese el ancho en pies","totalArea":"rea Total del Piso","totalAreaPlaceholder":"Ingrese el rea total en pies cuadrados","flooringSelection":"Seleccin de Piso","flooringType":"Tipo de Piso","hardwood":"Madera Dura","engineered":"Madera Ingeniera","laminate":"Laminado","vinyl":"Vinilo","carpet":"Alfombra","productSelection":"Seleccin de Producto","productName":"Nombre del Producto","productNamePlaceholder":"Ingrese el nombre del producto","pricePerBox":"Precio por Caja ($)","pricePerBoxPlaceholder":"Ingrese el precio por caja","sqftPerBox":"Pies Cuadrados por Caja","sqftPerBoxPlaceholder":"Ingrese pies cuadrados por caja","installationDetails":"Detalles de Instalacin","installationPattern":"Patrn de Instalacin","wasteFactor":"Factor de Desperdicio","wasteFactor10":"10% - Habitacin simple","wasteFactor15":"15% - Complejidad promedio","wasteFactor20":"20% - Diseo complejo","includeUnderlayment":"Incluir Base","underlaymentType":"Tipo de Base","includeTransitionStrips":"Incluir Tiras de Transicin","transitionStripLength":"Longitud de Tiras de Transicin (pies)","transitionStripLengthPlaceholder":"Ingrese la longitud total en pies","squareFeet":"pies cuadrados","areaWith":"rea con","waste":"Desperdicio","pattern":"Patrn","boxes":"cajas","rolls100sf":"rollos de 100 pies cuadrados","transitionStrips":"Tiras de Transicin","pieces4ft":"piezas de 4 pies","totalCost":"Costo Total"},"foundation":{"title":"Calculadora de Cimientos","stripFooting":"Zapata Corrida","spreadFootings":"Zapatas Aisladas","thickenedEdge":"Borde Engrosado","frostWall":"Muro de Helada","isBasement":"Es Stano","length":"Longitud (pies)","width":"Ancho (pies)","enterLength":"Ingresar longitud en pies","enterWidth":"Ingresar ancho en pies","footingDetails":"Detalles de Zapata","footingWidth":"Ancho de Zapata (pulgadas)","footingDepth":"Profundidad de Zapata (pulgadas)","enterFootingWidth":"Ingresar ancho de zapata en pulgadas","enterFootingDepth":"Ingresar profundidad de zapata en pulgadas","stemWallDetails":"Detalles del Muro de Cimentacin","basementWallDetails":"Detalles del Muro de Stano","stemWallHeight":"Altura del Muro de Cimentacin (pies)","wallHeight":"Altura del Muro (pies)","enterStemWallHeight":"Ingresar altura del muro de cimentacin en pies","enterWallHeight":"Ingresar altura del muro en pies","wallThickness":"Espesor del Muro (pulgadas)","enterWallThickness":"Ingresar espesor del muro en pulgadas","slabDetails":"Detalles de la Losa","basementFloorDetails":"Detalles del Piso del Stano","slabThickness":"Espesor de Losa (pulgadas)","floorThickness":"Espesor del Piso (pulgadas)","enterSlabThickness":"Ingresar espesor de losa en pulgadas","enterFloorThickness":"Ingresar espesor del piso en pulgadas","gravelBaseDepth":"Profundidad de Base de Grava (pulgadas)","enterGravelBaseDepth":"Ingresar profundidad de base de grava en pulgadas","siteConditions":"Condiciones del Sitio","soilType":"Tipo de Suelo","sandySoil":"Suelo Arenoso","claySoil":"Suelo Arcilloso","rockySoil":"Suelo Rocoso","backfillMaterial":"Material de Relleno","native":"Suelo Nativo","gravel":"Grava","sand":"Arena","frostDepth":"Profundidad de Helada (pulgadas)","enterFrostDepth":"Ingresar profundidad de helada en pulgadas","concreteReinforcement":"Concreto y Refuerzo","concreteStrength":"Resistencia del Concreto","includeSteelReinforcement":"Incluir Refuerzo de Acero","rebarSize":"Tamao de Varilla","rebarSpacing":"Espaciado de Varilla","onCenter":"al centro","additionalOptions":"Opciones Adicionales","includeVaporBarrier":"Incluir Barrera de Vapor","includeWaterproofing":"Incluir Impermeabilizacin","includeDrainage":"Incluir Drenaje","calculateMaterials":"Calcular Materiales","footingConcrete":"Concreto de Zapata","cubicYards":"yardas cbicas","basementWall":"Muro de Stano","stemWall":"Muro de Cimentacin","concrete":"Concreto","backfill":"Relleno","gravelBase":"Base de Grava","basementFloor":"Piso de Stano","slab":"Losa","footingRebar":"Varilla de Zapata","pieces20ft":"piezas de 20 pies","rebar":"Varilla","floor":"Piso","vaporBarrier":"Barrera de Vapor (polietileno 6mil)","rolls1000sf":"rollos de 1000 pies cuadrados","waterproofing":"Membrana Impermeabilizante","gallons":"galones","drainagePipe":"Tubera de Drenaje (4\\" perforada)","sections10ft":"secciones de 10 pies","drainageGravel":"Grava de Drenaje","totalCost":"Costo Total Estimado"}}'),LE={common:yE,navigation:vE,settings:wE,dashboard:jE,projects:NE,clients:CE,estimates:SE,finance:BE,tasks:kE,employees:FE,calculator:EE,calendar:_E,subscriptions:PE,trades:IE,calculators:UE};ta.use(pC).use(MF).init({resources:{en:{translation:bE},es:{translation:LE}},fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),st=(s,t)=>{const r=p.forwardRef(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:d,...u},m)=>p.createElement("svg",{ref:m,...TE,width:n,height:n,stroke:a,strokeWidth:o?Number(i)*24/Number(n):i,className:["lucide",`lucide-${DE(s)}`,l].join(" "),...u},[...t.map(([h,x])=>p.createElement(h,x)),...Array.isArray(d)?d:[d]]));return r.displayName=`${s}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=st("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=st("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=st("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dm=st("AppWindow",[["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}],["path",{d:"M10 4v4",key:"pp8u80"}],["path",{d:"M2 8h20",key:"d11cs7"}],["path",{d:"M6 4v4",key:"1svtjw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=st("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=st("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=st("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=st("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lg=st("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xc=st("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=st("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=st("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tg=st("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=st("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=st("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=st("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=st("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ip=st("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=st("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=st("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iy=st("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kx=st("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=st("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=st("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Td=st("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=st("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=st("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dg=st("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=st("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=st("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=st("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zx=st("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=st("Columns2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sd=st("Construction",[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=st("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=st("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=st("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yu=st("DoorClosed",[["path",{d:"M18 20V6a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v14",key:"36qu9e"}],["path",{d:"M2 20h20",key:"owomy5"}],["path",{d:"M14 12v.01",key:"xfcn54"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=st("DoorOpen",[["path",{d:"M13 4h3a2 2 0 0 1 2 2v14",key:"hrm0s9"}],["path",{d:"M2 20h3",key:"1gaodv"}],["path",{d:"M13 20h9",key:"s90cdi"}],["path",{d:"M10 12v.01",key:"vx6srw"}],["path",{d:"M13 4.562v16.157a1 1 0 0 1-1.242.97L5 20V5.562a2 2 0 0 1 1.515-1.94l4-1A2 2 0 0 1 13 4.561Z",key:"199qr4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=st("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=st("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nf=st("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oy=st("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gx=st("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=st("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cf=st("Fence",[["path",{d:"M4 3 2 5v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"1n2rgs"}],["path",{d:"M6 8h4",key:"utf9t1"}],["path",{d:"M6 18h4",key:"12yh4b"}],["path",{d:"m12 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"3ha7mj"}],["path",{d:"M14 8h4",key:"1r8wg2"}],["path",{d:"M14 18h4",key:"1t3kbu"}],["path",{d:"m20 3-2 2v15c0 .6.4 1 1 1h2c.6 0 1-.4 1-1V5Z",key:"dfd4e2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=st("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=st("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yh=st("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=st("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=st("Footprints",[["path",{d:"M4 16v-2.38C4 11.5 2.97 10.5 3 8c.03-2.72 1.49-6 4.5-6C9.37 2 10 3.8 10 5.5c0 3.11-2 5.66-2 8.68V16a2 2 0 1 1-4 0Z",key:"1dudjm"}],["path",{d:"M20 20v-2.38c0-2.12 1.03-3.12 1-5.62-.03-2.72-1.49-6-4.5-6C14.63 6 14 7.8 14 9.5c0 3.11 2 5.66 2 8.68V20a2 2 0 1 0 4 0Z",key:"l2t8xc"}],["path",{d:"M16 17h4",key:"1dejxt"}],["path",{d:"M4 13h4",key:"1bwh8b"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=st("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mn=st("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cy=st("Hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=st("HardHat",[["path",{d:"M2 18a1 1 0 0 0 1 1h18a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1H3a1 1 0 0 0-1 1v2z",key:"1dej2m"}],["path",{d:"M10 10V5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v5",key:"1p9q5i"}],["path",{d:"M4 15v-3a6 6 0 0 1 6-6h0",key:"1uc279"}],["path",{d:"M14 6h0a6 6 0 0 1 6 6v3",key:"1j9mnm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dy=st("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=st("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=st("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dd=st("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _w=st("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vx=st("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=st("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=st("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=st("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pw=st("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=st("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=st("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=st("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lp=st("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=st("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=st("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=st("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=st("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yx=st("MousePointer",[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z",key:"y2ucgo"}],["path",{d:"m13 13 6 6",key:"1nhxnf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=st("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=st("PaintBucket",[["path",{d:"m19 11-8-8-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0L19 11Z",key:"irua1i"}],["path",{d:"m5 2 5 5",key:"1lls2c"}],["path",{d:"M2 13h15",key:"1hkzvu"}],["path",{d:"M22 20a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4 .3 1.6 2 2.4 2 4Z",key:"xk76lq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sf=st("Paintbrush",[["path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z",key:"m6k5sh"}],["path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7",key:"arzq70"}],["path",{d:"M14.5 17.5 4.5 15",key:"s7fvrz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=st("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wg=st("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iw=st("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=st("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=st("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=st("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=st("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=st("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kf=st("Pipette",[["path",{d:"m2 22 1-1h3l9-9",key:"1sre89"}],["path",{d:"M3 21v-3l9-9",key:"hpe2y6"}],["path",{d:"m15 6 3.4-3.4a2.1 2.1 0 1 1 3 3L18 9l.4.4a2.1 2.1 0 1 1-3 3l-3.8-3.8a2.1 2.1 0 1 1 3-3l.4.4Z",key:"196du1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=st("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=st("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=st("Radiation",[["path",{d:"M12 12h0.01",key:"6ztbls"}],["path",{d:"M7.5 4.2c-.3-.5-.9-.7-1.3-.4C3.9 5.5 2.3 8.1 2 11c-.1.5.4 1 1 1h5c0-1.5.8-2.8 2-3.4-1.1-1.9-2-3.5-2.5-4.4z",key:"wy49g3"}],["path",{d:"M21 12c.6 0 1-.4 1-1-.3-2.9-1.8-5.5-4.1-7.1-.4-.3-1.1-.2-1.3.3-.6.9-1.5 2.5-2.6 4.3 1.2.7 2 2 2 3.5h5z",key:"vklnvr"}],["path",{d:"M7.5 19.8c-.3.5-.1 1.1.4 1.3 2.6 1.2 5.6 1.2 8.2 0 .5-.2.7-.8.4-1.3-.5-.9-1.4-2.5-2.5-4.3-1.2.7-2.8.7-4 0-1.1 1.8-2 3.4-2.5 4.3z",key:"wkdf1o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=st("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=st("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=st("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=st("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=st("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=st("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lw=st("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mo=st("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=st("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=st("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=st("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=st("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=st("Shovel",[["path",{d:"M2 22v-5l5-5 5 5-5 5z",key:"1fh25c"}],["path",{d:"M9.5 14.5 16 8",key:"1smz5x"}],["path",{d:"m17 2 5 5-.5.5a3.53 3.53 0 0 1-5 0s0 0 0 0a3.53 3.53 0 0 1 0-5L17 2",key:"1q8uv5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jx=st("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=st("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lo=st("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=st("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=st("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=st("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=st("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=st("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=st("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=st("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=st("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tw=st("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=st("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=st("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=st("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=st("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=st("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=st("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ef=st("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=st("Warehouse",[["path",{d:"M22 8.35V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8.35A2 2 0 0 1 3.26 6.5l8-3.2a2 2 0 0 1 1.48 0l8 3.2A2 2 0 0 1 22 8.35Z",key:"gksnxg"}],["path",{d:"M6 18h12",key:"9pbo8z"}],["path",{d:"M6 14h12",key:"4cwo0f"}],["rect",{width:"12",height:"12",x:"6",y:"10",key:"apd30q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=st("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=st("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=st("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=st("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),s6={},Dw=s=>{let t;const r=new Set,a=(m,h)=>{const x=typeof m=="function"?m(t):m;if(!Object.is(x,t)){const f=t;t=h??(typeof x!="object"||x===null)?x:Object.assign({},t,x),r.forEach(b=>b(t,f))}},n=()=>t,d={setState:a,getState:n,getInitialState:()=>u,subscribe:m=>(r.add(m),()=>r.delete(m)),destroy:()=>{(s6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=s(a,n,d);return d},a6=s=>s?Dw(s):Dw;var y0={exports:{}},v0={},w0={exports:{}},j0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mw;function n6(){if(Mw)return j0;Mw=1;var s=_h();function t(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var r=typeof Object.is=="function"?Object.is:t,a=s.useState,n=s.useEffect,i=s.useLayoutEffect,o=s.useDebugValue;function l(h,x){var f=x(),b=a({inst:{value:f,getSnapshot:x}}),v=b[0].inst,j=b[1];return i(function(){v.value=f,v.getSnapshot=x,d(v)&&j({inst:v})},[h,f,x]),n(function(){return d(v)&&j({inst:v}),h(function(){d(v)&&j({inst:v})})},[h]),o(f),f}function d(h){var x=h.getSnapshot;h=h.value;try{var f=x();return!r(h,f)}catch{return!0}}function u(h,x){return x()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:l;return j0.useSyncExternalStore=s.useSyncExternalStore!==void 0?s.useSyncExternalStore:m,j0}var Rw;function i6(){return Rw||(Rw=1,w0.exports=n6()),w0.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qw;function o6(){if(Qw)return v0;Qw=1;var s=_h(),t=i6();function r(u,m){return u===m&&(u!==0||1/u===1/m)||u!==u&&m!==m}var a=typeof Object.is=="function"?Object.is:r,n=t.useSyncExternalStore,i=s.useRef,o=s.useEffect,l=s.useMemo,d=s.useDebugValue;return v0.useSyncExternalStoreWithSelector=function(u,m,h,x,f){var b=i(null);if(b.current===null){var v={hasValue:!1,value:null};b.current=v}else v=b.current;b=l(function(){function S(q){if(!C){if(C=!0,B=q,q=x(q),f!==void 0&&v.hasValue){var P=v.value;if(f(P,q))return F=P}return F=q}if(P=F,a(B,q))return P;var D=x(q);return f!==void 0&&f(P,D)?(B=q,P):(B=q,F=D)}var C=!1,B,F,Q=h===void 0?null:h;return[function(){return S(m())},Q===null?void 0:function(){return S(Q())}]},[m,h,x,f]);var j=n(u,b[0],b[1]);return o(function(){v.hasValue=!0,v.value=j},[j]),d(j),j},v0}var Ow;function l6(){return Ow||(Ow=1,y0.exports=o6()),y0.exports}var c6=l6();const d6=Gb(c6),DC={},{useDebugValue:u6}=R5,{useSyncExternalStoreWithSelector:A6}=d6;let Hw=!1;const m6=s=>s;function h6(s,t=m6,r){(DC?"production":void 0)!=="production"&&r&&!Hw&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Hw=!0);const a=A6(s.subscribe,s.getState,s.getServerState||s.getInitialState,t,r);return u6(a),a}const qw=s=>{(DC?"production":void 0)!=="production"&&typeof s!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof s=="function"?a6(s):s,r=(a,n)=>h6(t,a,n);return Object.assign(r,t),r},Mc=s=>s?qw(s):qw,f6="modulepreload",g6=function(s){return"/"+s},$w={},Fi=function(t,r,a){let n=Promise.resolve();if(r&&r.length>0){let d=function(u){return Promise.all(u.map(m=>Promise.resolve(m).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");n=d(r.map(u=>{if(u=g6(u),u in $w)return;$w[u]=!0;const m=u.endsWith(".css"),h=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const x=document.createElement("link");if(x.rel=m?"stylesheet":f6,m||(x.as="script"),x.crossOrigin="",x.href=u,l&&x.setAttribute("nonce",l),document.head.appendChild(x),m)return new Promise((f,b)=>{x.addEventListener("load",f),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},p6=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>Fi(async()=>{const{default:a}=await Promise.resolve().then(()=>wA);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)};class hy extends Error{constructor(t,r="FunctionsError",a){super(t),this.name=r,this.context=a}}class Ww extends hy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Kw extends hy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class zw extends hy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xx;(function(s){s.Any="any",s.ApNortheast1="ap-northeast-1",s.ApNortheast2="ap-northeast-2",s.ApSouth1="ap-south-1",s.ApSoutheast1="ap-southeast-1",s.ApSoutheast2="ap-southeast-2",s.CaCentral1="ca-central-1",s.EuCentral1="eu-central-1",s.EuWest1="eu-west-1",s.EuWest2="eu-west-2",s.EuWest3="eu-west-3",s.SaEast1="sa-east-1",s.UsEast1="us-east-1",s.UsWest1="us-west-1",s.UsWest2="us-west-2"})(Xx||(Xx={}));var x6=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};class b6{constructor(t,{headers:r={},customFetch:a,region:n=Xx.Any}={}){this.url=t,this.headers=r,this.region=n,this.fetch=p6(a)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var a;return x6(this,void 0,void 0,function*(){try{const{headers:n,method:i,body:o,signal:l}=r;let d={},{region:u}=r;u||(u=this.region);const m=new URL(`${this.url}/${t}`);u&&u!=="any"&&(d["x-region"]=u,m.searchParams.set("forceFunctionRegion",u));let h;o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(d["Content-Type"]="application/octet-stream",h=o):typeof o=="string"?(d["Content-Type"]="text/plain",h=o):typeof FormData<"u"&&o instanceof FormData?h=o:(d["Content-Type"]="application/json",h=JSON.stringify(o)));const x=yield this.fetch(m.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},d),this.headers),n),body:h,signal:l}).catch(j=>{throw j.name==="AbortError"?j:new Ww(j)}),f=x.headers.get("x-relay-error");if(f&&f==="true")throw new Kw(x);if(!x.ok)throw new zw(x);let b=((a=x.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),v;return b==="application/json"?v=yield x.json():b==="application/octet-stream"?v=yield x.blob():b==="text/event-stream"?v=x:b==="multipart/form-data"?v=yield x.formData():v=yield x.text(),{data:v,error:null,response:x}}catch(n){return n instanceof Error&&n.name==="AbortError"?{data:null,error:new Ww(n)}:{data:null,error:n,response:n instanceof zw||n instanceof Kw?n.context:void 0}}})}}var ja={},ku={},Fu={},Eu={},_u={},Pu={},y6=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},fA=y6();const v6=fA.fetch,MC=fA.fetch.bind(fA),RC=fA.Headers,w6=fA.Request,j6=fA.Response,wA=Object.freeze(Object.defineProperty({__proto__:null,Headers:RC,Request:w6,Response:j6,default:MC,fetch:v6},Symbol.toStringTag,{value:"Module"})),N6=m3(wA);var _f={},Gw;function QC(){if(Gw)return _f;Gw=1,Object.defineProperty(_f,"__esModule",{value:!0});class s extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return _f.default=s,_f}var Vw;function OC(){if(Vw)return Pu;Vw=1;var s=Pu&&Pu.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Pu,"__esModule",{value:!0});const t=s(N6),r=s(QC());class a{constructor(i){var o,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var m,h,x,f;let b=null,v=null,j=null,S=u.status,C=u.statusText;if(u.ok){if(this.method!=="HEAD"){const q=await u.text();q===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?v=q:v=JSON.parse(q))}const F=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),Q=(x=u.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");F&&Q&&Q.length>1&&(j=parseInt(Q[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(v)&&(v.length>1?(b={code:"PGRST116",details:`Results contain ${v.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},v=null,j=null,S=406,C="Not Acceptable"):v.length===1?v=v[0]:v=null)}else{const F=await u.text();try{b=JSON.parse(F),Array.isArray(b)&&u.status===404&&(v=[],b=null,S=200,C="OK")}catch{u.status===404&&F===""?(S=204,C="No Content"):b={message:F}}if(b&&this.isMaybeSingle&&(!((f=b?.details)===null||f===void 0)&&f.includes("0 rows"))&&(b=null,S=200,C="OK"),b&&this.shouldThrowOnError)throw new r.default(b)}return{error:b,data:v,count:j,status:S,statusText:C}});return this.shouldThrowOnError||(d=d.catch(u=>{var m,h,x;return{error:{message:`${(m=u?.name)!==null&&m!==void 0?m:"FetchError"}: ${u?.message}`,details:`${(h=u?.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(x=u?.code)!==null&&x!==void 0?x:""}`},data:null,count:null,status:0,statusText:""}})),d.then(i,o)}returns(){return this}overrideTypes(){return this}}return Pu.default=a,Pu}var Yw;function HC(){if(Yw)return _u;Yw=1;var s=_u&&_u.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(_u,"__esModule",{value:!0});const t=s(OC());class r extends t.default{select(n){let i=!1;const o=(n??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:d=l}={}){const u=d?`${d}.order`:"order",m=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${m?`${m},`:""}${n}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${n}`),this}range(n,i,{foreignTable:o,referencedTable:l=o}={}){const d=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${n}`),this.url.searchParams.set(u,`${i-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:d=!1,format:u="text"}={}){var m;const h=[n?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),x=(m=this.headers.get("Accept"))!==null&&m!==void 0?m:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${x}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}}return _u.default=r,_u}var Jw;function fy(){if(Jw)return Eu;Jw=1;var s=Eu&&Eu.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Eu,"__esModule",{value:!0});const t=s(HC());class r extends t.default{eq(n,i){return this.url.searchParams.append(n,`eq.${i}`),this}neq(n,i){return this.url.searchParams.append(n,`neq.${i}`),this}gt(n,i){return this.url.searchParams.append(n,`gt.${i}`),this}gte(n,i){return this.url.searchParams.append(n,`gte.${i}`),this}lt(n,i){return this.url.searchParams.append(n,`lt.${i}`),this}lte(n,i){return this.url.searchParams.append(n,`lte.${i}`),this}like(n,i){return this.url.searchParams.append(n,`like.${i}`),this}likeAllOf(n,i){return this.url.searchParams.append(n,`like(all).{${i.join(",")}}`),this}likeAnyOf(n,i){return this.url.searchParams.append(n,`like(any).{${i.join(",")}}`),this}ilike(n,i){return this.url.searchParams.append(n,`ilike.${i}`),this}ilikeAllOf(n,i){return this.url.searchParams.append(n,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(n,i){return this.url.searchParams.append(n,`ilike(any).{${i.join(",")}}`),this}is(n,i){return this.url.searchParams.append(n,`is.${i}`),this}in(n,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(n,`in.(${o})`),this}contains(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cs.{${i.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(i)}`),this}containedBy(n,i){return typeof i=="string"?this.url.searchParams.append(n,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(n,`cd.{${i.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(i)}`),this}rangeGt(n,i){return this.url.searchParams.append(n,`sr.${i}`),this}rangeGte(n,i){return this.url.searchParams.append(n,`nxl.${i}`),this}rangeLt(n,i){return this.url.searchParams.append(n,`sl.${i}`),this}rangeLte(n,i){return this.url.searchParams.append(n,`nxr.${i}`),this}rangeAdjacent(n,i){return this.url.searchParams.append(n,`adj.${i}`),this}overlaps(n,i){return typeof i=="string"?this.url.searchParams.append(n,`ov.${i}`):this.url.searchParams.append(n,`ov.{${i.join(",")}}`),this}textSearch(n,i,{config:o,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const u=o===void 0?"":`(${o})`;return this.url.searchParams.append(n,`${d}fts${u}.${i}`),this}match(n){return Object.entries(n).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(n,i,o){return this.url.searchParams.append(n,`not.${i}.${o}`),this}or(n,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${n})`),this}filter(n,i,o){return this.url.searchParams.append(n,`${i}.${o}`),this}}return Eu.default=r,Eu}var Xw;function qC(){if(Xw)return Fu;Xw=1;var s=Fu&&Fu.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(Fu,"__esModule",{value:!0});const t=s(fy());class r{constructor(n,{headers:i={},schema:o,fetch:l}){this.url=n,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(n,{head:i=!1,count:o}={}){const l=i?"HEAD":"GET";let d=!1;const u=(n??"*").split("").map(m=>/\s/.test(m)&&!d?"":(m==='"'&&(d=!d),m)).join("");return this.url.searchParams.set("select",u),o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(n,{count:i,defaultToNull:o=!0}={}){var l;const d="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const u=n.reduce((m,h)=>m.concat(Object.keys(h)),[]);if(u.length>0){const m=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",m.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(n,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:d=!0}={}){var u;const m="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(n)){const h=n.reduce((x,f)=>x.concat(Object.keys(f)),[]);if(h.length>0){const x=[...new Set(h)].map(f=>`"${f}"`);this.url.searchParams.set("columns",x.join(","))}}return new t.default({method:m,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(n,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:n}={}){var i;const o="DELETE";return n&&this.headers.append("Prefer",`count=${n}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Fu.default=r,Fu}var Zw;function C6(){if(Zw)return ku;Zw=1;var s=ku&&ku.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(ku,"__esModule",{value:!0});const t=s(qC()),r=s(fy());class a{constructor(i,{headers:o={},schema:l,fetch:d}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=d}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new a(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:d=!1,count:u}={}){var m;let h;const x=new URL(`${this.url}/rpc/${i}`);let f;l||d?(h=l?"HEAD":"GET",Object.entries(o).filter(([v,j])=>j!==void 0).map(([v,j])=>[v,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([v,j])=>{x.searchParams.append(v,j)})):(h="POST",f=o);const b=new Headers(this.headers);return u&&b.set("Prefer",`count=${u}`),new r.default({method:h,url:x,headers:b,schema:this.schemaName,body:f,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}}return ku.default=a,ku}var e2;function S6(){if(e2)return ja;e2=1;var s=ja&&ja.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(ja,"__esModule",{value:!0}),ja.PostgrestError=ja.PostgrestBuilder=ja.PostgrestTransformBuilder=ja.PostgrestFilterBuilder=ja.PostgrestQueryBuilder=ja.PostgrestClient=void 0;const t=s(C6());ja.PostgrestClient=t.default;const r=s(qC());ja.PostgrestQueryBuilder=r.default;const a=s(fy());ja.PostgrestFilterBuilder=a.default;const n=s(HC());ja.PostgrestTransformBuilder=n.default;const i=s(OC());ja.PostgrestBuilder=i.default;const o=s(QC());return ja.PostgrestError=o.default,ja.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:a.default,PostgrestTransformBuilder:n.default,PostgrestBuilder:i.default,PostgrestError:o.default},ja}var B6=S6();const k6=Gb(B6),{PostgrestClient:F6,PostgrestQueryBuilder:Fq,PostgrestFilterBuilder:Eq,PostgrestTransformBuilder:_q,PostgrestBuilder:Pq,PostgrestError:Iq}=k6;class E6{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const a=r.node,n=parseInt(a.replace(/^v/,"").split(".")[0]);return n>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${n} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const a=this.getWebSocketConstructor();return new a(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const _6="2.15.5",P6=`realtime-js/${_6}`,I6="1.0.0",Zx=1e4,U6=1e3,L6=100;var Zm;(function(s){s[s.connecting=0]="connecting",s[s.open=1]="open",s[s.closing=2]="closing",s[s.closed=3]="closed"})(Zm||(Zm={}));var ca;(function(s){s.closed="closed",s.errored="errored",s.joined="joined",s.joining="joining",s.leaving="leaving"})(ca||(ca={}));var so;(function(s){s.close="phx_close",s.error="phx_error",s.join="phx_join",s.reply="phx_reply",s.leave="phx_leave",s.access_token="access_token"})(so||(so={}));var eb;(function(s){s.websocket="websocket"})(eb||(eb={}));var yd;(function(s){s.Connecting="connecting",s.Open="open",s.Closing="closing",s.Closed="closed"})(yd||(yd={}));class T6{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),a=new TextDecoder;return this._decodeBroadcast(t,r,a)}_decodeBroadcast(t,r,a){const n=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=a.decode(t.slice(o,o+n));o=o+n;const d=a.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(a.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:d,payload:u}}}class $C{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Zr;(function(s){s.abstime="abstime",s.bool="bool",s.date="date",s.daterange="daterange",s.float4="float4",s.float8="float8",s.int2="int2",s.int4="int4",s.int4range="int4range",s.int8="int8",s.int8range="int8range",s.json="json",s.jsonb="jsonb",s.money="money",s.numeric="numeric",s.oid="oid",s.reltime="reltime",s.text="text",s.time="time",s.timestamp="timestamp",s.timestamptz="timestamptz",s.timetz="timetz",s.tsrange="tsrange",s.tstzrange="tstzrange"})(Zr||(Zr={}));const t2=(s,t,r={})=>{var a;const n=(a=r.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(t).reduce((i,o)=>(i[o]=D6(o,s,t,n),i),{})},D6=(s,t,r,a)=>{const n=t.find(l=>l.name===s),i=n?.type,o=r[s];return i&&!a.includes(i)?WC(i,o):tb(o)},WC=(s,t)=>{if(s.charAt(0)==="_"){const r=s.slice(1,s.length);return O6(t,r)}switch(s){case Zr.bool:return M6(t);case Zr.float4:case Zr.float8:case Zr.int2:case Zr.int4:case Zr.int8:case Zr.numeric:case Zr.oid:return R6(t);case Zr.json:case Zr.jsonb:return Q6(t);case Zr.timestamp:return H6(t);case Zr.abstime:case Zr.date:case Zr.daterange:case Zr.int4range:case Zr.int8range:case Zr.money:case Zr.reltime:case Zr.text:case Zr.time:case Zr.timestamptz:case Zr.timetz:case Zr.tsrange:case Zr.tstzrange:return tb(t);default:return tb(t)}},tb=s=>s,M6=s=>{switch(s){case"t":return!0;case"f":return!1;default:return s}},R6=s=>{if(typeof s=="string"){const t=parseFloat(s);if(!Number.isNaN(t))return t}return s},Q6=s=>{if(typeof s=="string")try{return JSON.parse(s)}catch(t){return console.log(`JSON parse error: ${t}`),s}return s},O6=(s,t)=>{if(typeof s!="string")return s;const r=s.length-1,a=s[r];if(s[0]==="{"&&a==="}"){let i;const o=s.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>WC(t,l))}return s},H6=s=>typeof s=="string"?s.replace(" ","T"):s,KC=s=>{let t=s;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class N0{constructor(t,r,a={},n=Zx){this.channel=t,this.event=r,this.payload=a,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var a;return this._hasReceived(t)&&r((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(a=>a.status===t).forEach(a=>a.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var r2;(function(s){s.SYNC="sync",s.JOIN="join",s.LEAVE="leave"})(r2||(r2={}));class eh{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=eh.syncState(this.state,n,i,o),this.pendingDiffs.forEach(d=>{this.state=eh.syncDiff(this.state,d,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},n=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(n):(this.state=eh.syncDiff(this.state,n,i,o),l())}),this.onJoin((n,i,o)=>{this.channel._trigger("presence",{event:"join",key:n,currentPresences:i,newPresences:o})}),this.onLeave((n,i,o)=>{this.channel._trigger("presence",{event:"leave",key:n,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,a,n){const i=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(i,(u,m)=>{o[u]||(d[u]=m)}),this.map(o,(u,m)=>{const h=i[u];if(h){const x=m.map(j=>j.presence_ref),f=h.map(j=>j.presence_ref),b=m.filter(j=>f.indexOf(j.presence_ref)<0),v=h.filter(j=>x.indexOf(j.presence_ref)<0);b.length>0&&(l[u]=b),v.length>0&&(d[u]=v)}else l[u]=m}),this.syncDiff(i,{joins:l,leaves:d},a,n)}static syncDiff(t,r,a,n){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return a||(a=()=>{}),n||(n=()=>{}),this.map(i,(l,d)=>{var u;const m=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(d),m.length>0){const h=t[l].map(f=>f.presence_ref),x=m.filter(f=>h.indexOf(f.presence_ref)<0);t[l].unshift(...x)}a(l,m,d)}),this.map(o,(l,d)=>{let u=t[l];if(!u)return;const m=d.map(h=>h.presence_ref);u=u.filter(h=>m.indexOf(h.presence_ref)<0),t[l]=u,n(l,u,d),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(a=>r(a,t[a]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,a)=>{const n=t[a];return"metas"in n?r[a]=n.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[a]=n,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var s2;(function(s){s.ALL="*",s.INSERT="INSERT",s.UPDATE="UPDATE",s.DELETE="DELETE"})(s2||(s2={}));var th;(function(s){s.BROADCAST="broadcast",s.PRESENCE="presence",s.POSTGRES_CHANGES="postgres_changes",s.SYSTEM="system"})(th||(th={}));var pl;(function(s){s.SUBSCRIBED="SUBSCRIBED",s.TIMED_OUT="TIMED_OUT",s.CLOSED="CLOSED",s.CHANNEL_ERROR="CHANNEL_ERROR"})(pl||(pl={}));class gy{constructor(t,r={config:{}},a){this.topic=t,this.params=r,this.socket=a,this.bindings={},this.state=ca.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new N0(this,so.join,this.params,this.timeout),this.rejoinTimer=new $C(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ca.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(n=>n.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ca.closed,this.socket._remove(this)}),this._onError(n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ca.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ca.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",n=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,n),this.state=ca.errored,this.rejoinTimer.scheduleTimeout())}),this._on(so.reply,{},(n,i)=>{this._trigger(this._replyEventName(i),n)}),this.presence=new eh(this),this.broadcastEndpointURL=KC(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var a,n,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ca.closed){const{config:{broadcast:o,presence:l,private:d}}=this.params,u=(n=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(f=>f.filter))!==null&&n!==void 0?n:[],m=!!this.bindings[th.PRESENCE]&&this.bindings[th.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},x={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:m}),postgres_changes:u,private:d};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(pl.CHANNEL_ERROR,f)),this._onClose(()=>t?.(pl.CLOSED)),this.updateJoinPayload(Object.assign({config:x},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var b;if(this.socket.setAuth(),f===void 0){t?.(pl.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,j=(b=v?.length)!==null&&b!==void 0?b:0,S=[];for(let C=0;C<j;C++){const B=v[C],{filter:{event:F,schema:Q,table:q,filter:P}}=B,D=f&&f[C];if(D&&D.event===F&&D.schema===Q&&D.table===q&&D.filter===P)S.push(Object.assign(Object.assign({},B),{id:D.id}));else{this.unsubscribe(),this.state=ca.errored,t?.(pl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(pl.SUBSCRIBED);return}}).receive("error",f=>{this.state=ca.errored,t?.(pl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(pl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,a){return this.state===ca.joined&&t===th.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,a)}async send(t,r={}){var a,n;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(a=r.timeout)!==null&&a!==void 0?a:this.timeout);return await((n=u.body)===null||n===void 0?void 0:n.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,d;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ca.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(so.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(n=>{a=new N0(this,so.leave,{},t),a.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ca.closed,this.bindings={}}async _fetchWithTimeout(t,r,a){const n=new AbortController,i=setTimeout(()=>n.abort(),a),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:n.signal}));return clearTimeout(i),o}_push(t,r,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new N0(this,t,r,a);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>L6){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,a){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,a){var n,i;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:u,join:m}=so;if(a&&[l,d,u,m].indexOf(o)>=0&&a!==this._joinRef())return;let x=this._onMessage(o,r,a);if(r&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(n=this.bindings.postgres_changes)===null||n===void 0||n.filter(f=>{var b,v,j;return((b=f.filter)===null||b===void 0?void 0:b.event)==="*"||((j=(v=f.filter)===null||v===void 0?void 0:v.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(f=>f.callback(x,a)):(i=this.bindings[o])===null||i===void 0||i.filter(f=>{var b,v,j,S,C,B;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const F=f.id,Q=(b=f.filter)===null||b===void 0?void 0:b.event;return F&&((v=r.ids)===null||v===void 0?void 0:v.includes(F))&&(Q==="*"||Q?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const F=(C=(S=f?.filter)===null||S===void 0?void 0:S.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return F==="*"||F===((B=r?.event)===null||B===void 0?void 0:B.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof x=="object"&&"ids"in x){const b=x.data,{schema:v,table:j,commit_timestamp:S,type:C,errors:B}=b;x=Object.assign(Object.assign({},{schema:v,table:j,commit_timestamp:S,eventType:C,new:{},old:{},errors:B}),this._getPayloadRecords(b))}f.callback(x,a)})}_isClosed(){return this.state===ca.closed}_isJoined(){return this.state===ca.joined}_isJoining(){return this.state===ca.joining}_isLeaving(){return this.state===ca.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,a){const n=t.toLocaleLowerCase(),i={type:n,filter:r,callback:a};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(t,r){const a=t.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(n=>{var i;return!(((i=n.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===a&&gy.isEqual(n.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const a in t)if(t[a]!==r[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(so.close,{},t)}_onError(t){this._on(so.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ca.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=t2(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=t2(t.columns,t.old_record)),r}}const C0=()=>{},Pf={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},q6=[1e3,2e3,5e3,1e4],$6=1e4,W6=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class K6{constructor(t,r){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zx,this.transport=null,this.heartbeatIntervalMs=Pf.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=C0,this.ref=0,this.reconnectTimer=null,this.logger=C0,this.conn=null,this.sendBuffer=[],this.serializer=new T6,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=n=>{let i;return n?i=n:typeof fetch>"u"?i=(...o)=>Fi(async()=>{const{default:l}=await Promise.resolve().then(()=>wA);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((a=r?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${eb.websocket}`,this.httpEndpoint=KC(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=E6.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:I6}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,a){this.logger(t,r,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Zm.connecting:return yd.Connecting;case Zm.open:return yd.Open;case Zm.closing:return yd.Closing;default:return yd.Closed}}isConnected(){return this.connectionState()===yd.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const a=`realtime:${t}`,n=this.getChannels().find(i=>i.topic===a);if(n)return n;{const i=new gy(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:a,payload:n,ref:i}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${a} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(U6,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Pf.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(a=>a.topic===t&&(a._isJoined()||a._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:n,payload:i,ref:o}=r,l=o?`(${o})`:"",d=i.status||"";this.log("receive",`${d} ${a} ${n} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(a)).forEach(u=>u._trigger(n,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(so.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const a=t.match(/\?/)?"&":"?",n=new URLSearchParams(r);return`${t}${a}${n}`}_workerObjectUrl(t){let r;if(t)r=t;else{const a=new Blob([W6],{type:"application/javascript"});r=URL.createObjectURL(a)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(a=>{const n={access_token:r,version:P6};r&&a.updateJoinPayload(n),a.joinedOnce&&a._isJoined()&&a._push(so.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(a=>{try{a(r)}catch(n){this.log("error",`error in ${t} callback`,n)}})}catch(a){this.log("error",`error triggering ${t} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new $C(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Pf.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,a,n,i,o,l,d,u,m;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(a=t?.timeout)!==null&&a!==void 0?a:Zx,this.heartbeatIntervalMs=(n=t?.heartbeatIntervalMs)!==null&&n!==void 0?n:Pf.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:C0,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(h=>q6[h-1]||$6),this.encode=(u=t?.encode)!==null&&u!==void 0?u:((h,x)=>x(JSON.stringify(h))),this.decode=(m=t?.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class py extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Zs(s){return typeof s=="object"&&s!==null&&"__isStorageError"in s}class z6 extends py{constructor(t,r,a){super(t),this.name="StorageApiError",this.status=r,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class rb extends py{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var G6=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};const zC=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>Fi(async()=>{const{default:a}=await Promise.resolve().then(()=>wA);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},V6=()=>G6(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fi(()=>Promise.resolve().then(()=>wA),void 0)).Response:Response}),sb=s=>{if(Array.isArray(s))return s.map(r=>sb(r));if(typeof s=="function"||s!==Object(s))return s;const t={};return Object.entries(s).forEach(([r,a])=>{const n=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[n]=sb(a)}),t},Y6=s=>{if(typeof s!="object"||s===null)return!1;const t=Object.getPrototypeOf(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)};var Hd=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};const S0=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),J6=(s,t,r)=>Hd(void 0,void 0,void 0,function*(){const a=yield V6();s instanceof a&&!r?.noResolveJson?s.json().then(n=>{const i=s.status||500,o=n?.statusCode||i+"";t(new z6(S0(n),i,o))}).catch(n=>{t(new rb(S0(n),n))}):t(new rb(S0(s),s))}),X6=(s,t,r,a)=>{const n={method:s,headers:t?.headers||{}};return s==="GET"||!a?n:(Y6(a)?(n.headers=Object.assign({"Content-Type":"application/json"},t?.headers),n.body=JSON.stringify(a)):n.body=a,t?.duplex&&(n.duplex=t.duplex),Object.assign(Object.assign({},n),r))};function Ih(s,t,r,a,n,i){return Hd(this,void 0,void 0,function*(){return new Promise((o,l)=>{s(r,X6(t,a,n,i)).then(d=>{if(!d.ok)throw d;return a?.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>J6(d,l,a))})})}function Mg(s,t,r,a){return Hd(this,void 0,void 0,function*(){return Ih(s,"GET",t,r,a)})}function Io(s,t,r,a,n){return Hd(this,void 0,void 0,function*(){return Ih(s,"POST",t,a,n,r)})}function ab(s,t,r,a,n){return Hd(this,void 0,void 0,function*(){return Ih(s,"PUT",t,a,n,r)})}function Z6(s,t,r,a){return Hd(this,void 0,void 0,function*(){return Ih(s,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),a)})}function GC(s,t,r,a,n){return Hd(this,void 0,void 0,function*(){return Ih(s,"DELETE",t,a,n,r)})}var e_=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};class t_{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return e_(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zs(t))return{data:null,error:t};throw t}})}}var r_=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};class s_{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}asStream(){return new t_(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.execute().then(t,r)}execute(){return r_(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zs(t))return{data:null,error:t};throw t}})}}var Un=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};const a_={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},a2={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class n_{constructor(t,r={},a,n){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=a,this.fetch=zC(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,a,n){return Un(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},a2),n);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&a instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d)),i.append("",a)):typeof FormData<"u"&&a instanceof FormData?(i=a,i.append("cacheControl",o.cacheControl),d&&i.append("metadata",this.encodeMetadata(d))):(i=a,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),n?.headers&&(l=Object.assign(Object.assign({},l),n.headers));const u=this._removeEmptyFolders(r),m=this._getFinalPath(u),h=yield(t=="PUT"?ab:Io)(this.fetch,`${this.url}/object/${m}`,i,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Zs(i))return{data:null,error:i};throw i}})}upload(t,r,a){return Un(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,a)})}uploadToSignedUrl(t,r,a,n){return Un(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const u=Object.assign({upsert:a2.upsert},n),m=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&a instanceof Blob?(d=new FormData,d.append("cacheControl",u.cacheControl),d.append("",a)):typeof FormData<"u"&&a instanceof FormData?(d=a,d.append("cacheControl",u.cacheControl)):(d=a,m["cache-control"]=`max-age=${u.cacheControl}`,m["content-type"]=u.contentType);const h=yield ab(this.fetch,l.toString(),d,{headers:m});return{data:{path:i,fullPath:h.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if(Zs(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Un(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t);const n=Object.assign({},this.headers);r?.upsert&&(n["x-upsert"]="true");const i=yield Io(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:n}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new py("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}update(t,r,a){return Un(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,a)})}move(t,r,a){return Un(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}copy(t,r,a){return Un(this,void 0,void 0,function*(){try{return{data:{path:(yield Io(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}createSignedUrl(t,r,a){return Un(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=yield Io(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:r},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const o=a?.download?`&download=${a.download===!0?"":a.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}createSignedUrls(t,r,a){return Un(this,void 0,void 0,function*(){try{const n=yield Io(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:n.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}download(t,r){const n=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),d=()=>Mg(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new s_(d,this.shouldThrowOnError)}info(t){return Un(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const a=yield Mg(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:sb(a),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}exists(t){return Un(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield Z6(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a)&&a instanceof rb){const n=a.originalError;if([400,404].includes(n?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(t,r){const a=this._getFinalPath(t),n=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&n.push(i);const l=typeof r?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(r?.transform||{});d!==""&&n.push(d);let u=n.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${u}`)}}}remove(t){return Un(this,void 0,void 0,function*(){try{return{data:yield GC(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}list(t,r,a){return Un(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},a_),r),{prefix:t||""});return{data:yield Io(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},a),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zs(n))return{data:null,error:n};throw n}})}listV2(t,r){return Un(this,void 0,void 0,function*(){try{const a=Object.assign({},t);return{data:yield Io(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const i_="2.12.2",o_={"X-Client-Info":`storage-js/${i_}`};var Iu=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};class l_{constructor(t,r={},a,n){this.shouldThrowOnError=!1;const i=new URL(t);n?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},o_),r),this.fetch=zC(a)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Iu(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Zs(t))return{data:null,error:t};throw t}})}getBucket(t){return Iu(this,void 0,void 0,function*(){try{return{data:yield Mg(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Iu(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return Iu(this,void 0,void 0,function*(){try{return{data:yield ab(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Zs(a))return{data:null,error:a};throw a}})}emptyBucket(t){return Iu(this,void 0,void 0,function*(){try{return{data:yield Io(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Iu(this,void 0,void 0,function*(){try{return{data:yield GC(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zs(r))return{data:null,error:r};throw r}})}}class c_ extends l_{constructor(t,r={},a,n){super(t,r,a,n)}from(t){return new n_(this.url,this.headers,t,this.fetch)}}const d_="2.58.0";let Qm="";typeof Deno<"u"?Qm="deno":typeof document<"u"?Qm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Qm="react-native":Qm="node";const u_={"X-Client-Info":`supabase-js-${Qm}/${d_}`},A_={headers:u_},m_={schema:"public"},h_={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},f_={};var g_=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};const p_=s=>{let t;return s?t=s:typeof fetch>"u"?t=MC:t=fetch,(...r)=>t(...r)},x_=()=>typeof Headers>"u"?RC:Headers,b_=(s,t,r)=>{const a=p_(r),n=x_();return(i,o)=>g_(void 0,void 0,void 0,function*(){var l;const d=(l=yield t())!==null&&l!==void 0?l:s;let u=new n(o?.headers);return u.has("apikey")||u.set("apikey",s),u.has("Authorization")||u.set("Authorization",`Bearer ${d}`),a(i,Object.assign(Object.assign({},o),{headers:u}))})};var y_=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};function v_(s){return s.endsWith("/")?s:s+"/"}function w_(s,t){var r,a;const{db:n,auth:i,realtime:o,global:l}=s,{db:d,auth:u,realtime:m,global:h}=t,x={db:Object.assign(Object.assign({},d),n),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},m),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h?.headers)!==null&&r!==void 0?r:{}),(a=l?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>y_(this,void 0,void 0,function*(){return""})};return s.accessToken?x.accessToken=s.accessToken:delete x.accessToken,x}function j_(s){const t=s?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(v_(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const VC="2.72.0",Ju=30*1e3,nb=3,B0=nb*Ju,N_="http://localhost:9999",C_="supabase.auth.token",S_={"X-Client-Info":`gotrue-js/${VC}`},ib="X-Supabase-Api-Version",YC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},B_=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,k_=600*1e3;class xy extends Error{constructor(t,r,a){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=a}}function ar(s){return typeof s=="object"&&s!==null&&"__isAuthError"in s}class F_ extends xy{constructor(t,r,a){super(t,r,a),this.name="AuthApiError",this.status=r,this.code=a}}function E_(s){return ar(s)&&s.name==="AuthApiError"}class JC extends xy{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Rc extends xy{constructor(t,r,a,n){super(t,a,n),this.name=r,this.status=a}}class cc extends Rc{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function __(s){return ar(s)&&s.name==="AuthSessionMissingError"}class nm extends Rc{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class If extends Rc{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Uf extends Rc{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function P_(s){return ar(s)&&s.name==="AuthImplicitGrantRedirectError"}class n2 extends Rc{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ob extends Rc{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function k0(s){return ar(s)&&s.name==="AuthRetryableFetchError"}class i2 extends Rc{constructor(t,r,a){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=a}}class lb extends Rc{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),o2=` 	
\r=`.split(""),I_=(()=>{const s=new Array(128);for(let t=0;t<s.length;t+=1)s[t]=-1;for(let t=0;t<o2.length;t+=1)s[o2[t].charCodeAt(0)]=-2;for(let t=0;t<Rg.length;t+=1)s[Rg[t].charCodeAt(0)]=t;return s})();function l2(s,t,r){if(s!==null)for(t.queue=t.queue<<8|s,t.queuedBits+=8;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Rg[a]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const a=t.queue>>t.queuedBits-6&63;r(Rg[a]),t.queuedBits-=6}}function XC(s,t,r){const a=I_[s];if(a>-1)for(t.queue=t.queue<<6|a,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(s)}"`)}}function c2(s){const t=[],r=o=>{t.push(String.fromCodePoint(o))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},i=o=>{T_(o,a,r)};for(let o=0;o<s.length;o+=1)XC(s.charCodeAt(o),n,i);return t.join("")}function U_(s,t){if(s<=127){t(s);return}else if(s<=2047){t(192|s>>6),t(128|s&63);return}else if(s<=65535){t(224|s>>12),t(128|s>>6&63),t(128|s&63);return}else if(s<=1114111){t(240|s>>18),t(128|s>>12&63),t(128|s>>6&63),t(128|s&63);return}throw new Error(`Unrecognized Unicode codepoint: ${s.toString(16)}`)}function L_(s,t){for(let r=0;r<s.length;r+=1){let a=s.charCodeAt(r);if(a>55295&&a<=56319){const n=(a-55296)*1024&65535;a=(s.charCodeAt(r+1)-56320&65535|n)+65536,r+=1}U_(a,t)}}function T_(s,t,r){if(t.utf8seq===0){if(s<=127){r(s);return}for(let a=1;a<6;a+=1)if((s>>7-a&1)===0){t.utf8seq=a;break}if(t.utf8seq===2)t.codepoint=s&31;else if(t.utf8seq===3)t.codepoint=s&15;else if(t.utf8seq===4)t.codepoint=s&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(s<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|s&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function D_(s){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};for(let n=0;n<s.length;n+=1)XC(s.charCodeAt(n),r,a);return new Uint8Array(t)}function M_(s){const t=[];return L_(s,r=>t.push(r)),new Uint8Array(t)}function R_(s){const t=[],r={queue:0,queuedBits:0},a=n=>{t.push(n)};return s.forEach(n=>l2(n,r,a)),l2(null,r,a),t.join("")}function Q_(s){return Math.round(Date.now()/1e3)+s}function O_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(s){const t=Math.random()*16|0;return(s=="x"?t:t&3|8).toString(16)})}const ji=()=>typeof window<"u"&&typeof document<"u",hd={tested:!1,writable:!1},ZC=()=>{if(!ji())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(hd.tested)return hd.writable;const s=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(s,s),globalThis.localStorage.removeItem(s),hd.tested=!0,hd.writable=!0}catch{hd.tested=!0,hd.writable=!1}return hd.writable};function H_(s){const t={},r=new URL(s);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((n,i)=>{t[i]=n})}catch{}return r.searchParams.forEach((a,n)=>{t[n]=a}),t}const eS=s=>{let t;return s?t=s:typeof fetch>"u"?t=(...r)=>Fi(async()=>{const{default:a}=await Promise.resolve().then(()=>wA);return{default:a}},void 0).then(({default:a})=>a(...r)):t=fetch,(...r)=>t(...r)},q_=s=>typeof s=="object"&&s!==null&&"status"in s&&"ok"in s&&"json"in s&&typeof s.json=="function",Xu=async(s,t,r)=>{await s.setItem(t,JSON.stringify(r))},fd=async(s,t)=>{const r=await s.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},sc=async(s,t)=>{await s.removeItem(t)};class cp{constructor(){this.promise=new cp.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}cp.promiseConstructor=Promise;function F0(s){const t=s.split(".");if(t.length!==3)throw new lb("Invalid JWT structure");for(let a=0;a<t.length;a++)if(!B_.test(t[a]))throw new lb("JWT not in base64url format");return{header:JSON.parse(c2(t[0])),payload:JSON.parse(c2(t[1])),signature:D_(t[2]),raw:{header:t[0],payload:t[1]}}}async function $_(s){return await new Promise(t=>{setTimeout(()=>t(null),s)})}function W_(s,t){return new Promise((a,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await s(i);if(!t(i,null,o)){a(o);return}}catch(o){if(!t(i,o)){n(o);return}}})()})}function K_(s){return("0"+s.toString(16)).substr(-2)}function z_(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=r.length;let n="";for(let i=0;i<56;i++)n+=r.charAt(Math.floor(Math.random()*a));return n}return crypto.getRandomValues(t),Array.from(t,K_).join("")}async function G_(s){const r=new TextEncoder().encode(s),a=await crypto.subtle.digest("SHA-256",r),n=new Uint8Array(a);return Array.from(n).map(i=>String.fromCharCode(i)).join("")}async function V_(s){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),s;const r=await G_(s);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Uu(s,t,r=!1){const a=z_();let n=a;r&&(n+="/PASSWORD_RECOVERY"),await Xu(s,`${t}-code-verifier`,n);const i=await V_(a);return[i,a===i?"plain":"s256"]}const Y_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function J_(s){const t=s.headers.get(ib);if(!t||!t.match(Y_))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function X_(s){if(!s)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(s<=t)throw new Error("JWT has expired")}function Z_(s){switch(s){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const eP=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Lu(s){if(!eP.test(s))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function E0(){const s={};return new Proxy(s,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function d2(s){return JSON.parse(JSON.stringify(s))}var tP=function(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r};const pd=s=>s.msg||s.message||s.error_description||s.error||JSON.stringify(s),rP=[502,503,504];async function u2(s){var t;if(!q_(s))throw new ob(pd(s),0);if(rP.includes(s.status))throw new ob(pd(s),s.status);let r;try{r=await s.json()}catch(i){throw new JC(pd(i),i)}let a;const n=J_(s);if(n&&n.getTime()>=YC["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?a=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(a=r.error_code),a){if(a==="weak_password")throw new i2(pd(r),s.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(a==="session_not_found")throw new cc}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new i2(pd(r),s.status,r.weak_password.reasons);throw new F_(pd(r),s.status||500,a)}const sP=(s,t,r,a)=>{const n={method:s,headers:t?.headers||{}};return s==="GET"?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),r))};async function Ar(s,t,r,a){var n;const i=Object.assign({},a?.headers);i[ib]||(i[ib]=YC["2024-01-01"].name),a?.jwt&&(i.Authorization=`Bearer ${a.jwt}`);const o=(n=a?.query)!==null&&n!==void 0?n:{};a?.redirectTo&&(o.redirect_to=a.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await aP(s,t,r+l,{headers:i,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(d):{data:Object.assign({},d),error:null}}async function aP(s,t,r,a,n,i){const o=sP(t,a,n,i);let l;try{l=await s(r,Object.assign({},o))}catch(d){throw console.error(d),new ob(pd(d),0)}if(l.ok||await u2(l),a?.noResolveJson)return l;try{return await l.json()}catch(d){await u2(d)}}function _o(s){var t;let r=null;lP(s)&&(r=Object.assign({},s),s.expires_at||(r.expires_at=Q_(s.expires_in)));const a=(t=s.user)!==null&&t!==void 0?t:s;return{data:{session:r,user:a},error:null}}function A2(s){const t=_o(s);return!t.error&&s.weak_password&&typeof s.weak_password=="object"&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.message&&typeof s.weak_password.message=="string"&&s.weak_password.reasons.reduce((r,a)=>r&&typeof a=="string",!0)&&(t.data.weak_password=s.weak_password),t}function hc(s){var t;return{data:{user:(t=s.user)!==null&&t!==void 0?t:s},error:null}}function nP(s){return{data:s,error:null}}function iP(s){const{action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i}=s,o=tP(s,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:a,redirect_to:n,verification_type:i},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function oP(s){return s}function lP(s){return s.access_token&&s.refresh_token&&s.expires_in}const _0=["global","local","others"];var cP=function(s,t){var r={};for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&t.indexOf(a)<0&&(r[a]=s[a]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,a=Object.getOwnPropertySymbols(s);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(s,a[n])&&(r[a[n]]=s[a[n]]);return r};class dP{constructor({url:t="",headers:r={},fetch:a}){this.url=t,this.headers=r,this.fetch=eS(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=_0[0]){if(_0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_0.join(", ")}`);try{return await Ar(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(a){if(ar(a))return{data:null,error:a};throw a}}async inviteUserByEmail(t,r={}){try{return await Ar(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:hc})}catch(a){if(ar(a))return{data:{user:null},error:a};throw a}}async generateLink(t){try{const{options:r}=t,a=cP(t,["options"]),n=Object.assign(Object.assign({},a),r);return"newEmail"in a&&(n.new_email=a?.newEmail,delete n.newEmail),await Ar(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:iP,redirectTo:r?.redirectTo})}catch(r){if(ar(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ar(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hc})}catch(r){if(ar(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,a,n,i,o,l,d;try{const u={nextPage:null,lastPage:0,total:0},m=await Ar(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:"",per_page:(i=(n=t?.perPage)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:""},xform:oP});if(m.error)throw m.error;const h=await m.json(),x=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(d=(l=m.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return f.length>0&&(f.forEach(b=>{const v=parseInt(b.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(b.split(";")[1].split("=")[1]);u[`${j}Page`]=v}),u.total=parseInt(x)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(ar(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Lu(t);try{return await Ar(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hc})}catch(r){if(ar(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Lu(t);try{return await Ar(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:hc})}catch(a){if(ar(a))return{data:{user:null},error:a};throw a}}async deleteUser(t,r=!1){Lu(t);try{return await Ar(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:hc})}catch(a){if(ar(a))return{data:{user:null},error:a};throw a}}async _listFactors(t){Lu(t.userId);try{const{data:r,error:a}=await Ar(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:n=>({data:{factors:n},error:null})});return{data:r,error:a}}catch(r){if(ar(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Lu(t.userId),Lu(t.id);try{return{data:await Ar(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}}}function m2(s={}){return{getItem:t=>s[t]||null,setItem:(t,r)=>{s[t]=r},removeItem:t=>{delete s[t]}}}function uP(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Tu={debug:!!(globalThis&&ZC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tS extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class AP extends tS{}async function mP(s,t,r){Tu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",s,t);const a=new globalThis.AbortController;return t>0&&setTimeout(()=>{a.abort(),Tu.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",s)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(s,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async n=>{if(n){Tu.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",s,n.name);try{return await r()}finally{Tu.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",s,n.name)}}else{if(t===0)throw Tu.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",s),new AP(`Acquiring an exclusive Navigator LockManager lock "${s}" immediately failed`);if(Tu.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function rS(s){if(!/^0x[a-fA-F0-9]{40}$/.test(s))throw new Error(`@supabase/auth-js: Address "${s}" is invalid.`);return s.toLowerCase()}function hP(s){return parseInt(s,16)}function fP(s){const t=new TextEncoder().encode(s);return"0x"+Array.from(t,a=>a.toString(16).padStart(2,"0")).join("")}function gP(s){var t;const{chainId:r,domain:a,expirationTime:n,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:d,resources:u,scheme:m,uri:h,version:x}=s;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((t=s.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${s.statement}`)}const f=rS(s.address),b=m?`${m}://${a}`:a,v=s.statement?`${s.statement}
`:"",j=`${b} wants you to sign in with your Ethereum account:
${f}

${v}`;let S=`URI: ${h}
Version: ${x}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(n&&(S+=`
Expiration Time: ${n.toISOString()}`),l&&(S+=`
Not Before: ${l.toISOString()}`),d&&(S+=`
Request ID: ${d}`),u){let C=`
Resources:`;for(const B of u){if(!B||typeof B!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${B}`);C+=`
- ${B}`}S+=C}return`${j}
${S}`}uP();const pP={url:N_,storageKey:C_,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:S_,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function h2(s,t,r){return await r()}const Du={};class wh{constructor(t){var r,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=wh.nextInstanceID,wh.nextInstanceID+=1,this.instanceID>0&&ji()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},pP),t);if(this.logDebugMessages=!!n.debug,typeof n.debug=="function"&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new dP({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=eS(n.fetch),this.lock=n.lock||h2,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:ji()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=mP:this.lock=h2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(n.storage?this.storage=n.storage:ZC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=m2(this.memoryStorage)),n.userStorage&&(this.userStorage=n.userStorage)):(this.memoryStorage={},this.storage=m2(this.memoryStorage)),ji()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Du[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Du[this.storageKey]=Object.assign(Object.assign({},Du[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Du[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Du[this.storageKey]=Object.assign(Object.assign({},Du[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${VC}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=H_(window.location.href);let a="none";if(this._isImplicitGrantCallback(r)?a="implicit":await this._isPKCECallback(r)&&(a="pkce"),ji()&&this.detectSessionInUrl&&a!=="none"){const{data:n,error:i}=await this._getSessionFromURL(r,a);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),P_(i)){const d=(t=i.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return ar(r)?{error:r}:{error:new JC("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,a,n;try{const i=await Ar(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(n=t?.options)===null||n===void 0?void 0:n.captchaToken}},xform:_o}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(i){if(ar(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,a,n;try{let i;if("email"in t){const{email:m,password:h,options:x}=t;let f=null,b=null;this.flowType==="pkce"&&([f,b]=await Uu(this.storage,this.storageKey)),i=await Ar(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x?.emailRedirectTo,body:{email:m,password:h,data:(r=x?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:x?.captchaToken},code_challenge:f,code_challenge_method:b},xform:_o})}else if("phone"in t){const{phone:m,password:h,options:x}=t;i=await Ar(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:m,password:h,data:(a=x?.data)!==null&&a!==void 0?a:{},channel:(n=x?.channel)!==null&&n!==void 0?n:"sms",gotrue_meta_security:{captcha_token:x?.captchaToken}},xform:_o})}else throw new If("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(i){if(ar(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Ar(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:A2})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Ar(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:A2})}else throw new If("You must provide either an email or phone number and a password");const{data:a,error:n}=r;return n?{data:{user:null,session:null},error:n}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new nm}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:n})}catch(r){if(ar(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,a,n,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(a=t.options)===null||a===void 0?void 0:a.scopes,queryParams:(n=t.options)===null||n===void 0?void 0:n.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,a,n,i,o,l,d,u,m,h,x;let f,b;if("message"in t)f=t.message,b=t.signature;else{const{chain:v,wallet:j,statement:S,options:C}=t;let B;if(ji())if(typeof j=="object")B=j;else{const _=window;if("ethereum"in _&&typeof _.ethereum=="object"&&"request"in _.ethereum&&typeof _.ethereum.request=="function")B=_.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=j}const F=new URL((r=C?.url)!==null&&r!==void 0?r:window.location.href),Q=await B.request({method:"eth_requestAccounts"}).then(_=>_).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Q||Q.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const q=rS(Q[0]);let P=(a=C?.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!P){const _=await B.request({method:"eth_chainId"});P=hP(_)}const D={domain:F.host,address:q,statement:S,uri:F.href,version:"1",chainId:P,nonce:(n=C?.signInWithEthereum)===null||n===void 0?void 0:n.nonce,issuedAt:(o=(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=C?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=C?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(m=C?.signInWithEthereum)===null||m===void 0?void 0:m.resources};f=gP(D),b=await B.request({method:"personal_sign",params:[fP(f),q]})}try{const{data:v,error:j}=await Ar(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:b},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(x=t.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:_o});if(j)throw j;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new nm}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:j})}catch(v){if(ar(v))return{data:{user:null,session:null},error:v};throw v}}async signInWithSolana(t){var r,a,n,i,o,l,d,u,m,h,x,f;let b,v;if("message"in t)b=t.message,v=t.signature;else{const{chain:j,wallet:S,statement:C,options:B}=t;let F;if(ji())if(typeof S=="object")F=S;else{const q=window;if("solana"in q&&typeof q.solana=="object"&&("signIn"in q.solana&&typeof q.solana.signIn=="function"||"signMessage"in q.solana&&typeof q.solana.signMessage=="function"))F=q.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!B?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");F=S}const Q=new URL((r=B?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in F&&F.signIn){const q=await F.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},B?.signInWithSolana),{version:"1",domain:Q.host,uri:Q.href}),C?{statement:C}:null));let P;if(Array.isArray(q)&&q[0]&&typeof q[0]=="object")P=q[0];else if(q&&typeof q=="object"&&"signedMessage"in q&&"signature"in q)P=q;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)b=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),v=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in F)||typeof F.signMessage!="function"||!("publicKey"in F)||typeof F!="object"||!F.publicKey||!("toBase58"in F.publicKey)||typeof F.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");b=[`${Q.host} wants you to sign in with your Solana account:`,F.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${Q.href}`,`Issued At: ${(n=(a=B?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&n!==void 0?n:new Date().toISOString()}`,...!((i=B?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${B.signInWithSolana.notBefore}`]:[],...!((o=B?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${B.signInWithSolana.expirationTime}`]:[],...!((l=B?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${B.signInWithSolana.chainId}`]:[],...!((d=B?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${B.signInWithSolana.nonce}`]:[],...!((u=B?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${B.signInWithSolana.requestId}`]:[],...!((h=(m=B?.signInWithSolana)===null||m===void 0?void 0:m.resources)===null||h===void 0)&&h.length?["Resources",...B.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const q=await F.signMessage(new TextEncoder().encode(b),"utf8");if(!q||!(q instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=q}}try{const{data:j,error:S}=await Ar(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:b,signature:R_(v)},!((x=t.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:_o});if(S)throw S;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new nm}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:S})}catch(j){if(ar(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await fd(this.storage,`${this.storageKey}-code-verifier`),[a,n]=(r??"").split("/");try{const{data:i,error:o}=await Ar(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:a},xform:_o});if(await sc(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new nm}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:n??null}),error:o})}catch(i){if(ar(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:a,token:n,access_token:i,nonce:o}=t,l=await Ar(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:_o}),{data:d,error:u}=l;return u?{data:{user:null,session:null},error:u}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new nm}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:u})}catch(r){if(ar(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,a,n,i,o;try{if("email"in t){const{email:l,options:d}=t;let u=null,m=null;this.flowType==="pkce"&&([u,m]=await Uu(this.storage,this.storageKey));const{error:h}=await Ar(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:u,code_challenge_method:m},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:d}=t,{data:u,error:m}=await Ar(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(n=d?.data)!==null&&n!==void 0?n:{},create_user:(i=d?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:m}}throw new If("You must provide either an email or phone number.")}catch(l){if(ar(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,a;try{let n,i;"options"in t&&(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(a=t.options)===null||a===void 0?void 0:a.captchaToken);const{data:o,error:l}=await Ar(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:_o});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,u=o.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:u,session:d},error:null}}catch(n){if(ar(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(t){var r,a,n;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Uu(this.storage,this.storageKey)),await Ar(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&a!==void 0?a:void 0}),!((n=t?.options)===null||n===void 0)&&n.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:nP})}catch(i){if(ar(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:a}=t;if(a)throw a;if(!r)throw new cc;const{error:n}=await Ar(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:n}})}catch(t){if(ar(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:a,type:n,options:i}=t,{error:o}=await Ar(this.fetch,"POST",r,{headers:this.headers,body:{email:a,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:a,type:n,options:i}=t,{data:o,error:l}=await Ar(this.fetch,"POST",r,{headers:this.headers,body:{phone:a,type:n,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new If("You must provide either an email or phone number and a type")}catch(r){if(ar(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await a,await r()))();return this.pendingInLock.push((async()=>{try{await n}catch{}})()),n}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=r();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const n=[...this.pendingInLock];await Promise.all(n),this.pendingInLock.splice(0,n.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await fd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const a=t.expires_at?t.expires_at*1e3-Date.now()<B0:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",t.expires_at),!a){if(this.userStorage){const o=await fd(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=E0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,u,m)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,u,m))})}return{data:{session:t},error:null}}const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ar(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hc}):await this._useSession(async r=>{var a,n,i;const{data:o,error:l}=r;if(l)throw l;return!(!((a=o.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new cc}:await Ar(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0,xform:hc})})}catch(r){if(ar(r))return __(r)&&(await this._removeSession(),await sc(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async a=>{const{data:n,error:i}=a;if(i)throw i;if(!n.session)throw new cc;const o=n.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await Uu(this.storage,this.storageKey));const{data:u,error:m}=await Ar(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:hc});if(m)throw m;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(a){if(ar(a))return{data:{user:null},error:a};throw a}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new cc;const r=Date.now()/1e3;let a=r,n=!0,i=null;const{payload:o}=F0(t.access_token);if(o.exp&&(a=o.exp,n=a<=r),n){const{session:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)throw d;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:a-r,expires_at:a},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(ar(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var a;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(a=o.session)!==null&&a!==void 0?a:void 0}if(!t?.refresh_token)throw new cc;const{session:n,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(ar(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ji())throw new Uf("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Uf(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new n2("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Uf("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new n2("No code detected.");const{data:C,error:B}=await this._exchangeCodeForSession(t.code);if(B)throw B;const F=new URL(window.location.href);return F.searchParams.delete("code"),window.history.replaceState(window.history.state,"",F.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:l,expires_at:d,token_type:u}=t;if(!i||!l||!o||!u)throw new Uf("No session defined in URL");const m=Math.round(Date.now()/1e3),h=parseInt(l);let x=m+h;d&&(x=parseInt(d));const f=x-m;f*1e3<=Ju&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${h}s`);const b=x-h;m-b>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",b,x,m):m-b<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",b,x,m);const{data:v,error:j}=await this._getUser(i);if(j)throw j;const S={provider_token:a,provider_refresh_token:n,access_token:i,expires_in:h,expires_at:x,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:t.type},error:null}}catch(a){if(ar(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await fd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{error:i};const o=(a=n.session)===null||a===void 0?void 0:a.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(E_(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await sc(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=O_(),a={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:a}}}async _emitInitialSession(t){return await this._useSession(async r=>{var a,n;try{const{data:{session:i},error:o}=r;if(o)throw o;await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let a=null,n=null;this.flowType==="pkce"&&([a,n]=await Uu(this.storage,this.storageKey,!0));try{return await Ar(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:a,code_challenge_method:n,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(ar(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(ar(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:a,error:n}=await this._useSession(async i=>{var o,l,d,u,m;const{data:h,error:x}=i;if(x)throw x;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await Ar(this.fetch,"GET",f,{headers:this.headers,jwt:(m=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&m!==void 0?m:void 0})});if(n)throw n;return ji()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:t.provider,url:a?.url},error:null}}catch(a){if(ar(a))return{data:{provider:t.provider,url:null},error:a};throw a}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)throw o;return await Ar(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(n=(a=i.session)===null||a===void 0?void 0:a.access_token)!==null&&n!==void 0?n:void 0})})}catch(r){if(ar(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const a=Date.now();return await W_(async n=>(n>0&&await $_(200*Math.pow(2,n-1)),this._debug(r,"refreshing attempt",n),await Ar(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:_o})),(n,i)=>{const o=200*Math.pow(2,n);return i&&k0(i)&&Date.now()+o-a<Ju})}catch(a){if(this._debug(r,"error",a),ar(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const a=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",a),ji()&&!r.skipBrowserRedirect&&window.location.assign(a),{data:{provider:t,url:a},error:null}}async _recoverAndRefresh(){var t,r;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const n=await fd(this.storage,this.storageKey);if(n&&this.userStorage){let o=await fd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:n.user},await Xu(this.userStorage,this.storageKey+"-user",o)),n.user=(t=o?.user)!==null&&t!==void 0?t:E0()}else if(n&&!n.user&&!n.user){const o=await fd(this.storage,this.storageKey+"-user");o&&o?.user?(n.user=o.user,await sc(this.storage,this.storageKey+"-user"),await Xu(this.storage,this.storageKey,n)):n.user=E0()}if(this._debug(a,"session from storage",n),!this._isValidSession(n)){this._debug(a,"session is not valid"),n!==null&&await this._removeSession();return}const i=((r=n.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<B0;if(this._debug(a,`session has${i?"":" not"} expired with margin of ${B0}s`),i){if(this.autoRefreshToken&&n.refresh_token){const{error:o}=await this._callRefreshToken(n.refresh_token);o&&(console.error(o),k0(o)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(n.user&&n.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(n.access_token);!l&&o?.user?(n.user=o.user,await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(a,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(a,"error",n),console.error(n);return}finally{this._debug(a,"end")}}async _callRefreshToken(t){var r,a;if(!t)throw new cc;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new cp;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new cc;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(n,"error",i),ar(i)){const o={session:null,error:i};return k0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(t,r,a=!0){const n=`#_notifyAllSubscribers(${t})`;this._debug(n,"begin",r,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){i.push(d)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(n,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),a=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&r.user&&await Xu(this.userStorage,this.storageKey+"-user",{user:r.user});const n=Object.assign({},r);delete n.user;const i=d2(n);await Xu(this.storage,this.storageKey,i)}else{const n=d2(r);await Xu(this.storage,this.storageKey,n)}}async _removeSession(){this._debug("#_removeSession()"),await sc(this.storage,this.storageKey),await sc(this.storage,this.storageKey+"-code-verifier"),await sc(this.storage,this.storageKey+"-user"),this.userStorage&&await sc(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ji()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ju);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:a}}=r;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const n=Math.floor((a.expires_at*1e3-t)/Ju);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts ${Ju}ms, refresh threshold is ${nb} ticks`),n<=nb&&await this._callRefreshToken(a.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof tS)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ji()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,a){const n=[`provider=${encodeURIComponent(r)}`];if(a?.redirectTo&&n.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&n.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[i,o]=await Uu(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});n.push(l.toString())}if(a?.queryParams){const i=new URLSearchParams(a.queryParams);n.push(i.toString())}return a?.skipBrowserRedirect&&n.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${t}?${n.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await Ar(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(a=n?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(ar(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var a,n;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:d,error:u}=await Ar(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((n=d?.totp)===null||n===void 0)&&n.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(ar(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Ar(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(a=n?.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(ar(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var a;const{data:n,error:i}=r;return i?{data:null,error:i}:await Ar(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(a=n?.session)===null||a===void 0?void 0:a.access_token})})}catch(r){if(ar(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:a}=await this._challenge({factorId:t.factorId});return a?{data:null,error:a}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const a=t?.factors||[],n=a.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=a.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:a,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,a;const{data:{session:n},error:i}=t;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=F0(n.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((a=(r=n.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(d="aal2");const m=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:m},error:null}}))}async fetchJwk(t,r={keys:[]}){let a=r.keys.find(l=>l.kid===t);if(a)return a;const n=Date.now();if(a=this.jwks.keys.find(l=>l.kid===t),a&&this.jwks_cached_at+k_>n)return a;const{data:i,error:o}=await Ar(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=n,a=i.keys.find(l=>l.kid===t),!a)?null:a}async getClaims(t,r={}){try{let a=t;if(!a){const{data:f,error:b}=await this.getSession();if(b||!f.session)return{data:null,error:b};a=f.session.access_token}const{header:n,payload:i,signature:o,raw:{header:l,payload:d}}=F0(a);r?.allowExpired||X_(i.exp);const u=!n.alg||n.alg.startsWith("HS")||!n.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(n.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!u){const{error:f}=await this.getUser(a);if(f)throw f;return{data:{claims:i,header:n,signature:o},error:null}}const m=Z_(n.alg),h=await crypto.subtle.importKey("jwk",u,m,!0,["verify"]);if(!await crypto.subtle.verify(m,h,o,M_(`${l}.${d}`)))throw new lb("Invalid JWT signature");return{data:{claims:i,header:n,signature:o},error:null}}catch(a){if(ar(a))return{data:null,error:a};throw a}}}wh.nextInstanceID=0;const xP=wh;class bP extends xP{constructor(t){super(t)}}var yP=function(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,t||[])).next())})};class vP{constructor(t,r,a){var n,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=j_(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:m_,realtime:f_,auth:Object.assign(Object.assign({},h_),{storageKey:d}),global:A_},m=w_(a??{},u);this.storageKey=(n=m.auth.storageKey)!==null&&n!==void 0?n:"",this.headers=(i=m.global.headers)!==null&&i!==void 0?i:{},m.accessToken?(this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(h,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=m.auth)!==null&&o!==void 0?o:{},this.headers,m.global.fetch),this.fetch=b_(r,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.rest=new F6(new URL("rest/v1",l).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new c_(this.storageUrl.href,this.headers,this.fetch,a?.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new b6(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},a={}){return this.rest.rpc(t,r,a)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return yP(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(r=(t=a.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,userStorage:i,storageKey:o,flowType:l,lock:d,debug:u},m,h){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new bP({url:this.authUrl.href,headers:Object.assign(Object.assign({},x),m),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:a,storage:n,userStorage:i,flowType:l,lock:d,debug:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new K6(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,a)=>{this._handleTokenChanged(r,"CLIENT",a?.access_token)})}_handleTokenChanged(t,r,a){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==a?(this.changedAccessToken=a,this.realtime.setAuth(a)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wP=(s,t,r)=>new vP(s,t,r);function jP(){if(typeof window<"u"||typeof process>"u")return!1;const s=process.version;if(s==null)return!1;const t=s.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}jP()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Om="https://ujhgwcurllkkeouzwvgk.supabase.co",NP="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVqaGd3Y3VybGxra2VvdXp3dmdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwMzIzMjQsImV4cCI6MjA3MjYwODMyNH0.ez6RDJ2FxgSfb7mo2Xug1lXaynKLR-2nJFO-x64UNnY";if(!Om.startsWith("http://")&&!Om.startsWith("https://"))throw console.error("Invalid Supabase URL format:",Om),new Error(`Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL. Got: ${Om}`);const _e=wP(Om,NP,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"contractorai-auth",flowType:"pkce"},global:{headers:{"x-client-info":"contractorai-web"}},db:{schema:"public"}});let im=null;const ka=Mc((s,t)=>({user:null,profile:null,session:null,loading:!1,initialized:!1,signIn:async(r,a)=>{s({loading:!0});try{const{data:n,error:i}=await _e.auth.signInWithPassword({email:r,password:a});return i?(s({loading:!1}),{error:i}):(n.user&&(s({user:n.user,session:n.session,loading:!1}),await t().fetchProfile()),{error:null})}catch(n){return s({loading:!1}),{error:n}}},signUp:async(r,a,n)=>{s({loading:!0});try{localStorage.clear(),console.log("[AuthStore] Signing up:",r);const{data:i,error:o}=await _e.auth.signUp({email:r,password:a,options:{emailRedirectTo:`${window.location.origin}/auth/callback`,data:{full_name:n?.fullName,company_name:n?.companyName,phone:n?.phoneNumber}}});if(console.log("[AuthStore] Signup response:",{hasUser:!!i.user,hasSession:!!i.session,emailConfirmed:i.user?.email_confirmed_at,identities:i.user?.identities?.length,error:o}),o)return s({loading:!1}),{error:o};if(i.user){if(i.user.identities&&i.user.identities.length===0)return console.log("[AuthStore] Email already registered - no new identity created"),s({loading:!1}),{error:new Error("This email is already registered. Please sign in instead or use password reset if you forgot your password."),user:null,session:null};if(i.user.email_confirmed_at||i.session?(console.log("[AuthStore] Email confirmed or confirmation disabled - logging in"),s({user:i.user,session:i.session,loading:!1})):(console.log("[AuthStore] Email confirmation required"),s({loading:!1})),i.user.identities&&i.user.identities.length>0)try{await fetch("https://contractorai.app.n8n.cloud/webhook/170d14a9-ace1-49cf-baab-49dd8aec1245",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,fullName:n?.fullName||"",companyName:n?.companyName||"",phoneNumber:n?.phoneNumber||"",userId:i.user.id,timestamp:new Date().toISOString(),source:"ContractorAI Web App"})})}catch(l){console.error("Webhook notification failed:",l)}}return s({loading:!1}),{error:null,user:i.user,session:i.session}}catch(i){return console.error("[AuthStore] Signup exception:",i),s({loading:!1}),{error:i}}},signOut:async()=>{s({loading:!0});try{await _e.auth.signOut(),localStorage.clear(),s({user:null,profile:null,session:null,loading:!1})}catch(r){console.error("Error signing out:",r),s({loading:!1})}},fetchProfile:async()=>{const{user:r}=t();if(r)try{const{data:a,error:n}=await _e.from("profiles").select("*").eq("id",r.id).single();!n&&a&&s({profile:a})}catch(a){console.error("Error fetching profile:",a)}},updateProfile:async r=>{const{user:a}=t();if(!a)return{error:new Error("No user logged in")};try{const{data:n,error:i}=await _e.from("profiles").update({...r,updated_at:new Date().toISOString()}).eq("id",a.id).select().single();return i?{error:i}:(n&&s({profile:n}),{error:null})}catch(n){return{error:n}}},initialize:async()=>im?(console.log(" Auth initialization already in progress, waiting..."),im):t().initialized?(console.log(" Auth already initialized"),Promise.resolve()):(im=(async()=>{let r=null;try{console.log(" Initializing auth...");const{data:{subscription:a}}=_e.auth.onAuthStateChange(async(n,i)=>{console.log(" Auth state changed:",n,i?"Session active":"No session"),i?(s({user:i.user,session:i,initialized:!0}),(n==="SIGNED_IN"||n==="INITIAL_SESSION")&&t().fetchProfile().catch(o=>console.error("Failed to fetch profile:",o))):n==="SIGNED_OUT"&&s({user:null,profile:null,session:null,initialized:!0})});r=a;try{const n=new Promise((l,d)=>setTimeout(()=>d(new Error("Session check timeout")),5e3)),i=_e.auth.getSession(),{data:{session:o}}=await Promise.race([i,n]);console.log(" Session retrieved immediately:",o?"Logged in":"Not logged in"),o?(s({user:o.user,session:o,initialized:!0}),t().fetchProfile().catch(l=>console.error("Failed to fetch profile:",l))):s({initialized:!0})}catch{console.warn("  Session check timed out, waiting for auth state event..."),await new Promise(i=>setTimeout(i,1e3)),t().initialized||(console.log(" Marking as initialized without session"),s({initialized:!0}))}return()=>{r&&r.unsubscribe()}}catch(a){console.error(" Error initializing auth:",a),s({initialized:!0,user:null,session:null,profile:null}),r&&r.unsubscribe()}finally{im=null}})(),im)}));typeof window<"u"&&ka.getState().initialize();const sS=p.createContext(void 0),Qc=()=>{const s=p.useContext(sS);if(!s)throw new Error("useData must be used within DataProvider");return s},CP=({children:s})=>{const{user:t}=ka(),[r,a]=p.useState(null),[n,i]=p.useState(null),[o,l]=p.useState(!0),d=async()=>{if(t)try{const{data:h,error:x}=await _e.from("profiles").select("*").eq("id",t.id).single();if(x&&x.code!=="PGRST116"){console.error("Error loading profile:",x),await new Promise(v=>setTimeout(v,1e3));const{data:f,error:b}=await _e.from("profiles").select("*").eq("id",t.id).single();b&&b.code!=="PGRST116"?console.error("Profile retry failed:",b):f&&(a(f),f.language&&f.language!==ta.language&&ta.changeLanguage(f.language))}else h&&(a(h),h.language&&h.language!==ta.language&&ta.changeLanguage(h.language))}catch(h){console.error("Error refreshing profile:",h)}},u=async()=>{if(t)try{const{data:h,error:x}=await _e.from("stripe_customers").select("customer_id").eq("user_id",t.id).single();if(x){console.error("Error loading customer:",x),await new Promise(S=>setTimeout(S,1e3));const{data:v}=await _e.from("stripe_customers").select("customer_id").eq("user_id",t.id).single();if(!v?.customer_id)return;const{data:j}=await _e.from("stripe_subscriptions").select("*").eq("customer_id",v.customer_id).eq("status","active").single();i(j);return}if(!h?.customer_id)return;const{data:f,error:b}=await _e.from("stripe_subscriptions").select("*").eq("customer_id",h.customer_id).eq("status","active").single();if(b){console.error("Error loading subscription:",b),await new Promise(j=>setTimeout(j,1e3));const{data:v}=await _e.from("stripe_subscriptions").select("*").eq("customer_id",h.customer_id).eq("status","active").single();i(v)}else i(f)}catch(h){console.error("Error refreshing subscription:",h)}},m=async()=>{console.log("Refreshing all data..."),l(!0),await Promise.all([d(),u()]),l(!1)};return p.useEffect(()=>{let h=!0;return(async()=>{t?(console.log("User detected, loading data for user:",t.id),h&&(l(!0),await Promise.all([d(),u()]),h&&l(!1))):(console.log("No user, clearing data"),h&&(a(null),i(null),l(!1)))})(),()=>{h=!1}},[t?.id]),e.jsx(sS.Provider,{value:{profile:r,subscription:n,loading:o,refreshProfile:d,refreshSubscription:u,refreshAll:m},children:s})},SP=({sidebarOpen:s,setSidebarOpen:t})=>{const r=Zt(),{user:a,signOut:n}=ka(),{subscription:i,profile:o}=Qc(),[l,d]=p.useState(!1),u=()=>{r("/settings")},m=async()=>{try{await n(),r("/auth/login")}catch(f){console.error("Error signing out:",f)}},h=()=>!i||i.status==="canceled"||!i.status?"Free Plan":"Pro Plan",x=[];return e.jsxs("header",{className:"sticky top-0 z-10 flex items-center justify-between h-16 px-4 bg-white border-b border-gray-200 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{type:"button",className:"p-2 text-gray-500 lg:hidden",onClick:()=>t(!s),children:e.jsx(IC,{className:"w-6 h-6"})}),e.jsx("h1",{className:"hidden ml-2 text-xl font-bold text-blue-900 md:block",children:"ContractorAI"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"hidden sm:block",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:h()})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>d(!l),className:"p-2 text-gray-500 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(dA,{className:"w-5 h-5"}),x.filter(f=>!f.read).length>0&&e.jsx("span",{className:"absolute top-1 right-1 flex items-center justify-center w-4 h-4 text-xs text-white bg-red-500 rounded-full",children:x.filter(f=>!f.read).length})]}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-md shadow-lg z-20 border border-gray-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Notifications"})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:x.length>0?x.map(f=>e.jsx("div",{className:`p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer ${f.read?"":"bg-blue-50"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:f.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:f.message}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:f.time})]}),!f.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-1 ml-2"})]})},f.id)):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(dA,{className:"w-12 h-12 mx-auto text-gray-300 mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No notifications"})]})})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center gap-1 sm:gap-2 p-1 sm:p-2 text-gray-700 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[o?.logo_url?e.jsx("img",{src:o.logo_url,alt:"Company Logo",className:"w-7 h-7 sm:w-8 sm:h-8 object-contain rounded-full border border-gray-200"}):e.jsx("div",{className:"flex items-center justify-center w-7 h-7 sm:w-8 sm:h-8 bg-blue-500 rounded-full",children:e.jsx(ns,{className:"w-3 h-3 sm:w-4 sm:h-4 text-white"})}),e.jsx("span",{className:"hidden text-xs sm:text-sm font-medium md:block max-w-[100px] truncate",children:a?.email}),e.jsx(Td,{className:"w-3 h-3 sm:w-4 sm:h-4"})]}),e.jsx("div",{className:"absolute right-0 mt-2 bg-white rounded-lg shadow-xl z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 border border-gray-200",children:e.jsxs("div",{className:"py-1 px-1 flex flex-col gap-1",children:[e.jsx("button",{onClick:u,className:"p-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Settings",children:e.jsx(ns,{className:"w-6 h-6"})}),e.jsx("button",{onClick:m,className:"p-3 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Sign Out",children:e.jsx(WE,{className:"w-6 h-6"})})]})})]})]})]})},BP=({sidebarOpen:s,setSidebarOpen:t})=>{const{t:r}=fr(),a=Tc();Zt();const{subscription:n}=Qc(),o=!n||n.status==="canceled"||!n.status?{name:"Free Plan",validUntil:null,isActive:!1}:{name:"Pro Plan",validUntil:n.current_period_end?new Date(n.current_period_end).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):null,isActive:!0},l=[{name:r("navigation.dashboard"),icon:uy,href:"/"},{name:"AI Team",icon:wC,href:"/ai-team",badge:"New!"},{name:r("navigation.calculator"),icon:dn,href:"/pricing"},{name:r("navigation.finance"),icon:Lg,href:"/finance"},{name:r("navigation.estimates"),icon:ra,href:"/estimates"},{name:r("navigation.projects"),icon:QE,href:"/projects"},{name:r("navigation.clients"),icon:Sa,href:"/clients"},{name:r("navigation.employees"),icon:t6,href:"/employees"},{name:r("navigation.calendar"),icon:Fr,href:"/calendar"},{name:"Ad Analyzer",icon:xc,href:"/ad-analyzer"},{name:r("navigation.settings"),icon:Bc,href:"/settings",badge:"Widgets now here"}];return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 z-20 bg-gray-600 bg-opacity-75 transition-opacity lg:hidden ${s?"opacity-100 ease-out duration-300":"opacity-0 ease-in duration-200 pointer-events-none"}`,onClick:()=>t(!1)}),e.jsxs("div",{className:`fixed inset-y-0 left-0 z-30 w-64 bg-blue-900 transition duration-300 transform lg:translate-x-0 lg:static lg:inset-0 ${s?"translate-x-0 ease-out":"-translate-x-full ease-in"}`,children:[e.jsx("div",{className:"flex items-center justify-between h-16 px-6 bg-blue-800 pt-safe",children:e.jsx("div",{className:"flex items-center",style:{marginTop:"44px"},children:e.jsx("span",{className:"text-xl font-bold text-white",children:"ContractorAI"})})}),e.jsx("nav",{className:"mt-5 px-2 space-y-1 pb-64 overflow-y-auto max-h-[calc(100vh-4rem)]",children:l.map(d=>{const u=a.pathname===d.href;return e.jsxs(yl,{to:d.href,onClick:()=>t(!1),className:`group flex items-center justify-between px-4 py-3 text-sm font-medium rounded-md transition-colors ${u?"bg-blue-800 text-white":"text-blue-100 hover:bg-blue-800 hover:text-white"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(d.icon,{className:"w-5 h-5 mr-3 text-blue-300 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:d.name})]}),d.badge&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium bg-teal-500 text-white rounded-full whitespace-nowrap",children:d.badge})]},d.name)})}),e.jsx("div",{className:"absolute bottom-0 w-full px-6 py-4",children:e.jsxs("div",{className:"bg-blue-800 rounded-lg p-4 text-blue-100 text-sm",children:[e.jsx("p",{className:"font-semibold mb-2",children:o.name}),o.validUntil&&e.jsxs("p",{className:"text-xs text-blue-300 mb-3",children:[r("common.validUntil")," ",o.validUntil]}),!o.isActive&&e.jsx("p",{className:"text-xs text-blue-300 mb-3",children:r("common.upgradeMessage")}),e.jsx("a",{href:"https://contractorai.work/login",target:"_blank",rel:"noopener noreferrer",className:"block w-full py-1.5 bg-teal-500 hover:bg-teal-600 text-white rounded-md text-xs font-medium transition-colors text-center",children:o.isActive?r("common.manageSubscription"):r("common.upgradeNow")})]})})]})]})},kP=({project:s})=>{const t=r=>{switch(r){case"Completed":return"bg-green-100 text-green-800";case"In Progress":return"bg-blue-100 text-blue-800";case"On Hold":return"bg-amber-100 text-amber-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsx("p",{className:"text-sm text-gray-600",children:s.client})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t(s.status)}`,children:s.status})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Progress"}),e.jsxs("span",{className:"text-xs font-medium text-gray-700",children:[s.progress,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-blue-600 rounded-full",style:{width:`${s.progress}%`}})})]})]})},Lf=({title:s,value:t,change:r,positive:a,icon:n})=>e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow transition-transform hover:translate-y-[-3px]",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s}),e.jsx("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:t})]}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-blue-100 rounded-lg",children:n})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[a?e.jsx(io,{className:"w-4 h-4 mr-1 text-green-600"}):e.jsx(vA,{className:"w-4 h-4 mr-1 text-red-600"}),e.jsx("span",{className:`text-sm font-medium ${a?"text-green-600":"text-red-600"}`,children:r}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"from last month"})]})]}),FP=()=>sy.getQueryData(pc.clients),EP=()=>sy.getQueryData(pc.estimates),Tf=async()=>{try{const{data:{user:s}}=await _e.auth.getUser();if(s?.id)return s.id}catch{console.log("Auth not available, using development mode")}return"00000000-0000-0000-0000-000000000000"},aS=Mc((s,t)=>({estimates:[],isLoading:!1,error:null,hasLoadedOnce:!1,fetchEstimates:async(r=!1)=>{const a=EP();if(a&&!r){s({estimates:a,isLoading:!1,hasLoadedOnce:!0,error:null});return}const n=t();if(n.hasLoadedOnce&&!r&&n.estimates.length>0){console.log(" Using Zustand cached estimates data");return}s({isLoading:!0,error:null});try{const i=await Tf(),{data:o,error:l}=await _e.from("estimates").select("*").order("created_at",{ascending:!1});if(l)throw l;s({estimates:o||[],isLoading:!1,hasLoadedOnce:!0})}catch(i){console.error("Error fetching estimates:",i),s({error:i.message,isLoading:!1})}},addEstimate:async r=>{try{const a=await Tf(),n=r.subtotal||0,i=r.tax_rate||0,o=n*(i/100),l=n+o,d={title:r.title||"New Estimate",client_name:r.client_name||null,project_name:r.project_name||null,project_id:r.project_id||null,status:r.status||"draft",subtotal:n,tax_rate:i,tax_amount:o,total:l,notes:r.notes||null,terms:r.terms||"Valid for 30 days",expires_at:r.expires_at||new Date(Date.now()+720*60*60*1e3).toISOString(),items:r.items||[],calculator_type:r.calculator_type||null,calculator_data:r.calculator_data||null,user_id:a},{data:u,error:m}=await _e.from("estimates").insert([d]).select().single();if(m)throw m;return s(h=>({estimates:[u,...h.estimates]})),u}catch(a){return console.error("Error adding estimate:",a),s({error:a.message}),null}},updateEstimate:async(r,a)=>{s({isLoading:!0,error:null});try{console.log(" updateEstimate called with id:",r);const n=await Tf();let i={...a};if(a.subtotal!==void 0||a.tax_rate!==void 0){const u=t().estimates.find(b=>b.id===r),m=a.subtotal??u?.subtotal??0,h=a.tax_rate??u?.tax_rate??0,x=m*(h/100),f=m+x;i={...i,tax_amount:x,total:f}}console.log(" Update data:",i);const{data:o,error:l}=await _e.from("estimates").select("id").eq("id",r).single();l&&l.code!=="PGRST116"&&console.error(" Error checking for existing estimate:",l);let d;if(o){console.log(" Updating existing estimate...");const{data:u,error:m}=await _e.from("estimates").update(i).eq("id",r).select().single();if(m)throw console.error(" Update error:",m),m;d=u,console.log(" Estimate updated successfully")}else{console.log(" Inserting new estimate...");const u={id:r,...i,user_id:n},{data:m,error:h}=await _e.from("estimates").insert(u).select().single();if(h)throw console.error(" Insert error:",h),h;d=m,console.log(" Estimate inserted successfully")}s(u=>{const m=u.estimates.findIndex(x=>x.id===r);let h;return m>=0?h=u.estimates.map(x=>x.id===r?{...x,...i}:x):h=[d,...u.estimates],{estimates:h,isLoading:!1}}),console.log(" Local state updated")}catch(n){throw console.error(" Error in updateEstimate:",n),s({error:n.message,isLoading:!1}),n}},deleteEstimate:async r=>{try{const{error:a}=await _e.from("estimates").delete().eq("id",r);if(a)throw a;s(n=>({estimates:n.estimates.filter(i=>i.id!==r)}))}catch(a){console.error("Error deleting estimate:",a),s({error:a.message})}},createFromCalculator:async r=>{try{const a=await Tf(),n=r.subtotal||r.total||0,i=r.taxRate||0,o=n*(i/100),l=n+o,d={title:r.title||"Calculator Estimate",client_name:r.clientName||null,project_name:r.projectName||null,project_id:r.projectId||null,status:"draft",subtotal:n,tax_rate:i,tax_amount:o,total:l,notes:r.notes||"Generated from Pricing Calculator",terms:r.terms||"Valid for 30 days from the date of issue",items:r.items||[],calculator_type:r.calculatorType||null,calculator_data:r.calculatorData||null,expires_at:r.expiresAt||new Date(Date.now()+720*60*60*1e3).toISOString(),user_id:a},{data:u,error:m}=await _e.from("estimates").insert([d]).select().single();if(m)throw m;if(r.items&&r.items.length>0){const h={trade_name:r.title||"Pricing Calculation",specifications:r.items,results:{subtotal:n,tax_rate:i,tax_amount:o,total:l},total_cost:l,user_id:a};await _e.from("calculations").insert([h])}return s(h=>({estimates:[u,...h.estimates]})),u}catch(a){return console.error("Error creating estimate from calculator:",a),s({error:a.message}),null}}})),_P=()=>{const{estimates:s,fetchEstimates:t}=aS();p.useEffect(()=>{t()},[t]);const r=i=>{switch(i){case"approved":return e.jsx(un,{className:"w-4 h-4 text-green-600"});case"draft":case"sent":return e.jsx(no,{className:"w-4 h-4 text-amber-500"});case"rejected":return e.jsx(Qa,{className:"w-4 h-4 text-red-500"});default:return null}},a=i=>{switch(i){case"approved":return"text-green-600 bg-green-100";case"draft":case"sent":return"text-amber-700 bg-amber-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},n=i=>{switch(i){case"approved":return"Approved";case"draft":return"Draft";case"sent":return"Sent";case"rejected":return"Rejected";default:return i}};return e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Client"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Type"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Status"}),e.jsx("th",{scope:"col",className:"px-4 py-3 text-xs font-medium tracking-wider text-left text-gray-500 uppercase",children:"Date"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[s.slice(0,5).map(i=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 whitespace-nowrap",children:i.client_name||"No Client"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:i.project_name||"General Estimate"}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-gray-900 whitespace-nowrap",children:["$",i.total?.toLocaleString()||"0"]}),e.jsx("td",{className:"px-4 py-3 text-sm whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${a(i.status)}`,children:[r(i.status),e.jsx("span",{className:"ml-1",children:n(i.status)})]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-700 whitespace-nowrap",children:i.created_at?new Date(i.created_at).toLocaleDateString():"N/A"})]},i.id)),s.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-8 text-center text-gray-500",children:"No estimates yet. Create your first estimate to get started!"})})]})]})})};function ms(s){const t=Object.prototype.toString.call(s);return s instanceof Date||typeof s=="object"&&t==="[object Date]"?new s.constructor(+s):typeof s=="number"||t==="[object Number]"||typeof s=="string"||t==="[object String]"?new Date(s):new Date(NaN)}function oo(s,t){return s instanceof Date?new s.constructor(t):new Date(t)}function bc(s,t){const r=ms(s);return isNaN(t)?oo(s,NaN):(t&&r.setDate(r.getDate()+t),r)}function dp(s,t){const r=ms(s);if(isNaN(t))return oo(s,NaN);if(!t)return r;const a=r.getDate(),n=oo(s,r.getTime());n.setMonth(r.getMonth()+t+1,0);const i=n.getDate();return a>=i?n:(r.setFullYear(n.getFullYear(),n.getMonth(),a),r)}const nS=6048e5,PP=864e5,iS=6e4,oS=36e5;let IP={};function Uh(){return IP}function kc(s,t){const r=Uh(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,n=ms(s),i=n.getDay(),o=(i<a?7:0)+i-a;return n.setDate(n.getDate()-o),n.setHours(0,0,0,0),n}function Qg(s){return kc(s,{weekStartsOn:1})}function lS(s){const t=ms(s),r=t.getFullYear(),a=oo(s,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const n=Qg(a),i=oo(s,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Qg(i);return t.getTime()>=n.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Og(s){const t=ms(s);return t.setHours(0,0,0,0),t}function f2(s){const t=ms(s),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+s-+r}function UP(s,t){const r=Og(s),a=Og(t),n=+r-f2(r),i=+a-f2(a);return Math.round((n-i)/PP)}function LP(s){const t=lS(s),r=oo(s,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Qg(r)}function cS(s,t){const r=t*3;return dp(s,r)}function TP(s){return oo(s,Date.now())}function cb(s,t){const r=Og(s),a=Og(t);return+r==+a}function DP(s){return s instanceof Date||typeof s=="object"&&Object.prototype.toString.call(s)==="[object Date]"}function MP(s){if(!DP(s)&&typeof s!="number")return!1;const t=ms(s);return!isNaN(Number(t))}function Hm(s){const t=ms(s),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Df(s,t){const r=ms(s.start),a=ms(s.end);let n=+r>+a;const i=n?+r:+a,o=n?a:r;o.setHours(0,0,0,0),o.setDate(1);let l=1;const d=[];for(;+o<=i;)d.push(ms(o)),o.setMonth(o.getMonth()+l);return n?d.reverse():d}function qm(s){const t=ms(s),r=t.getMonth(),a=r-r%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}function RP(s,t){const r=ms(s.start),a=ms(s.end);let n=+r>+a;const i=n?+qm(r):+qm(a);let o=qm(n?a:r),l=1;const d=[];for(;+o<=i;)d.push(ms(o)),o=cS(o,l);return n?d.reverse():d}function $m(s){const t=ms(s);return t.setDate(1),t.setHours(0,0,0,0),t}function QP(s){const t=ms(s),r=oo(s,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function OP(s,t){const r=Uh(),a=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,n=ms(s),i=n.getDay(),o=(i<a?-7:0)+6-(i-a);return n.setDate(n.getDate()+o),n.setHours(23,59,59,999),n}function HP(s){const t=ms(s),r=t.getMonth(),a=r-r%3+3;return t.setMonth(a,0),t.setHours(23,59,59,999),t}const qP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$P=(s,t,r)=>{let a;const n=qP[s];return typeof n=="string"?a=n:t===1?a=n.one:a=n.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+a:a+" ago":a};function P0(s){return(t={})=>{const r=t.width?String(t.width):s.defaultWidth;return s.formats[r]||s.formats[s.defaultWidth]}}const WP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},KP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},zP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},GP={date:P0({formats:WP,defaultWidth:"full"}),time:P0({formats:KP,defaultWidth:"full"}),dateTime:P0({formats:zP,defaultWidth:"full"})},VP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},YP=(s,t,r,a)=>VP[s];function om(s){return(t,r)=>{const a=r?.context?String(r.context):"standalone";let n;if(a==="formatting"&&s.formattingValues){const o=s.defaultFormattingWidth||s.defaultWidth,l=r?.width?String(r.width):o;n=s.formattingValues[l]||s.formattingValues[o]}else{const o=s.defaultWidth,l=r?.width?String(r.width):s.defaultWidth;n=s.values[l]||s.values[o]}const i=s.argumentCallback?s.argumentCallback(t):t;return n[i]}}const JP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},XP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ZP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},eI={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},rI={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sI=(s,t)=>{const r=Number(s),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},aI={ordinalNumber:sI,era:om({values:JP,defaultWidth:"wide"}),quarter:om({values:XP,defaultWidth:"wide",argumentCallback:s=>s-1}),month:om({values:ZP,defaultWidth:"wide"}),day:om({values:eI,defaultWidth:"wide"}),dayPeriod:om({values:tI,defaultWidth:"wide",formattingValues:rI,defaultFormattingWidth:"wide"})};function lm(s){return(t,r={})=>{const a=r.width,n=a&&s.matchPatterns[a]||s.matchPatterns[s.defaultMatchWidth],i=t.match(n);if(!i)return null;const o=i[0],l=a&&s.parsePatterns[a]||s.parsePatterns[s.defaultParseWidth],d=Array.isArray(l)?iI(l,h=>h.test(o)):nI(l,h=>h.test(o));let u;u=s.valueCallback?s.valueCallback(d):d,u=r.valueCallback?r.valueCallback(u):u;const m=t.slice(o.length);return{value:u,rest:m}}}function nI(s,t){for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&t(s[r]))return r}function iI(s,t){for(let r=0;r<s.length;r++)if(t(s[r]))return r}function oI(s){return(t,r={})=>{const a=t.match(s.matchPattern);if(!a)return null;const n=a[0],i=t.match(s.parsePattern);if(!i)return null;let o=s.valueCallback?s.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(n.length);return{value:o,rest:l}}}const lI=/^(\d+)(th|st|nd|rd)?/i,cI=/\d+/i,dI={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uI={any:[/^b/i,/^(a|c)/i]},AI={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mI={any:[/1/i,/2/i,/3/i,/4/i]},hI={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fI={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},gI={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},pI={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},xI={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bI={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yI={ordinalNumber:oI({matchPattern:lI,parsePattern:cI,valueCallback:s=>parseInt(s,10)}),era:lm({matchPatterns:dI,defaultMatchWidth:"wide",parsePatterns:uI,defaultParseWidth:"any"}),quarter:lm({matchPatterns:AI,defaultMatchWidth:"wide",parsePatterns:mI,defaultParseWidth:"any",valueCallback:s=>s+1}),month:lm({matchPatterns:hI,defaultMatchWidth:"wide",parsePatterns:fI,defaultParseWidth:"any"}),day:lm({matchPatterns:gI,defaultMatchWidth:"wide",parsePatterns:pI,defaultParseWidth:"any"}),dayPeriod:lm({matchPatterns:xI,defaultMatchWidth:"any",parsePatterns:bI,defaultParseWidth:"any"})},vI={code:"en-US",formatDistance:$P,formatLong:GP,formatRelative:YP,localize:aI,match:yI,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wI(s){const t=ms(s);return UP(t,QP(t))+1}function jI(s){const t=ms(s),r=+Qg(t)-+LP(t);return Math.round(r/nS)+1}function dS(s,t){const r=ms(s),a=r.getFullYear(),n=Uh(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=oo(s,0);o.setFullYear(a+1,0,i),o.setHours(0,0,0,0);const l=kc(o,t),d=oo(s,0);d.setFullYear(a,0,i),d.setHours(0,0,0,0);const u=kc(d,t);return r.getTime()>=l.getTime()?a+1:r.getTime()>=u.getTime()?a:a-1}function NI(s,t){const r=Uh(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,n=dS(s,t),i=oo(s,0);return i.setFullYear(n,0,a),i.setHours(0,0,0,0),kc(i,t)}function CI(s,t){const r=ms(s),a=+kc(r,t)-+NI(r,t);return Math.round(a/nS)+1}function Mr(s,t){const r=s<0?"-":"",a=Math.abs(s).toString().padStart(t,"0");return r+a}const ac={y(s,t){const r=s.getFullYear(),a=r>0?r:1-r;return Mr(t==="yy"?a%100:a,t.length)},M(s,t){const r=s.getMonth();return t==="M"?String(r+1):Mr(r+1,2)},d(s,t){return Mr(s.getDate(),t.length)},a(s,t){const r=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(s,t){return Mr(s.getHours()%12||12,t.length)},H(s,t){return Mr(s.getHours(),t.length)},m(s,t){return Mr(s.getMinutes(),t.length)},s(s,t){return Mr(s.getSeconds(),t.length)},S(s,t){const r=t.length,a=s.getMilliseconds(),n=Math.trunc(a*Math.pow(10,r-3));return Mr(n,t.length)}},Mu={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},g2={G:function(s,t,r){const a=s.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});case"GGGG":default:return r.era(a,{width:"wide"})}},y:function(s,t,r){if(t==="yo"){const a=s.getFullYear(),n=a>0?a:1-a;return r.ordinalNumber(n,{unit:"year"})}return ac.y(s,t)},Y:function(s,t,r,a){const n=dS(s,a),i=n>0?n:1-n;if(t==="YY"){const o=i%100;return Mr(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Mr(i,t.length)},R:function(s,t){const r=lS(s);return Mr(r,t.length)},u:function(s,t){const r=s.getFullYear();return Mr(r,t.length)},Q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return Mr(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(s,t,r){const a=Math.ceil((s.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return Mr(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(s,t,r){const a=s.getMonth();switch(t){case"M":case"MM":return ac.M(s,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(s,t,r){const a=s.getMonth();switch(t){case"L":return String(a+1);case"LL":return Mr(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(s,t,r,a){const n=CI(s,a);return t==="wo"?r.ordinalNumber(n,{unit:"week"}):Mr(n,t.length)},I:function(s,t,r){const a=jI(s);return t==="Io"?r.ordinalNumber(a,{unit:"week"}):Mr(a,t.length)},d:function(s,t,r){return t==="do"?r.ordinalNumber(s.getDate(),{unit:"date"}):ac.d(s,t)},D:function(s,t,r){const a=wI(s);return t==="Do"?r.ordinalNumber(a,{unit:"dayOfYear"}):Mr(a,t.length)},E:function(s,t,r){const a=s.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});case"EEEE":default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Mr(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(s,t,r,a){const n=s.getDay(),i=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Mr(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(s,t,r){const a=s.getDay(),n=a===0?7:a;switch(t){case"i":return String(n);case"ii":return Mr(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});case"iiii":default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(s,t,r){const n=s.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(s,t,r){const a=s.getHours();let n;switch(a===12?n=Mu.noon:a===0?n=Mu.midnight:n=a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(s,t,r){const a=s.getHours();let n;switch(a>=17?n=Mu.evening:a>=12?n=Mu.afternoon:a>=4?n=Mu.morning:n=Mu.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(s,t,r){if(t==="ho"){let a=s.getHours()%12;return a===0&&(a=12),r.ordinalNumber(a,{unit:"hour"})}return ac.h(s,t)},H:function(s,t,r){return t==="Ho"?r.ordinalNumber(s.getHours(),{unit:"hour"}):ac.H(s,t)},K:function(s,t,r){const a=s.getHours()%12;return t==="Ko"?r.ordinalNumber(a,{unit:"hour"}):Mr(a,t.length)},k:function(s,t,r){let a=s.getHours();return a===0&&(a=24),t==="ko"?r.ordinalNumber(a,{unit:"hour"}):Mr(a,t.length)},m:function(s,t,r){return t==="mo"?r.ordinalNumber(s.getMinutes(),{unit:"minute"}):ac.m(s,t)},s:function(s,t,r){return t==="so"?r.ordinalNumber(s.getSeconds(),{unit:"second"}):ac.s(s,t)},S:function(s,t){return ac.S(s,t)},X:function(s,t,r){const a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return x2(a);case"XXXX":case"XX":return xd(a);case"XXXXX":case"XXX":default:return xd(a,":")}},x:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"x":return x2(a);case"xxxx":case"xx":return xd(a);case"xxxxx":case"xxx":default:return xd(a,":")}},O:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+p2(a,":");case"OOOO":default:return"GMT"+xd(a,":")}},z:function(s,t,r){const a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+p2(a,":");case"zzzz":default:return"GMT"+xd(a,":")}},t:function(s,t,r){const a=Math.trunc(s.getTime()/1e3);return Mr(a,t.length)},T:function(s,t,r){const a=s.getTime();return Mr(a,t.length)}};function p2(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=Math.trunc(a/60),i=a%60;return i===0?r+String(n):r+String(n)+t+Mr(i,2)}function x2(s,t){return s%60===0?(s>0?"-":"+")+Mr(Math.abs(s)/60,2):xd(s,t)}function xd(s,t=""){const r=s>0?"-":"+",a=Math.abs(s),n=Mr(Math.trunc(a/60),2),i=Mr(a%60,2);return r+n+t+i}const b2=(s,t)=>{switch(s){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},uS=(s,t)=>{switch(s){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},SI=(s,t)=>{const r=s.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return b2(s,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",b2(a,t)).replace("{{time}}",uS(n,t))},BI={p:uS,P:SI},kI=/^D+$/,FI=/^Y+$/,EI=["D","DD","YY","YYYY"];function _I(s){return kI.test(s)}function PI(s){return FI.test(s)}function II(s,t,r){const a=UI(s,t,r);if(console.warn(a),EI.includes(s))throw new RangeError(a)}function UI(s,t,r){const a=s[0]==="Y"?"years":"days of the month";return`Use \`${s.toLowerCase()}\` instead of \`${s}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const LI=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,TI=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,DI=/^'([^]*?)'?$/,MI=/''/g,RI=/[a-zA-Z]/;function Nr(s,t,r){const a=Uh(),n=a.locale??vI,i=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,l=ms(s);if(!MP(l))throw new RangeError("Invalid time value");let d=t.match(TI).map(m=>{const h=m[0];if(h==="p"||h==="P"){const x=BI[h];return x(m,n.formatLong)}return m}).join("").match(LI).map(m=>{if(m==="''")return{isToken:!1,value:"'"};const h=m[0];if(h==="'")return{isToken:!1,value:QI(m)};if(g2[h])return{isToken:!0,value:m};if(h.match(RI))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:m}});n.localize.preprocessor&&(d=n.localize.preprocessor(l,d));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:n};return d.map(m=>{if(!m.isToken)return m.value;const h=m.value;(PI(h)||_I(h))&&II(h,t,String(s));const x=g2[h[0]];return x(l,h,n.localize,u)}).join("")}function QI(s){const t=s.match(DI);return t?t[1].replace(MI,"'"):s}function y2(s){return cb(s,TP(s))}function OI(s,t){return bc(s,-7)}function Ln(s,t){const a=WI(s);let n;if(a.date){const d=KI(a.date,2);n=zI(d.restDateString,d.year)}if(!n||isNaN(n.getTime()))return new Date(NaN);const i=n.getTime();let o=0,l;if(a.time&&(o=GI(a.time),isNaN(o)))return new Date(NaN);if(a.timezone){if(l=VI(a.timezone),isNaN(l))return new Date(NaN)}else{const d=new Date(i+o),u=new Date(0);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return new Date(i+o+l)}const Mf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},HI=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,qI=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,$I=/^([+-])(\d{2})(?::?(\d{2}))?$/;function WI(s){const t={},r=s.split(Mf.dateTimeDelimiter);let a;if(r.length>2)return t;if(/:/.test(r[0])?a=r[0]:(t.date=r[0],a=r[1],Mf.timeZoneDelimiter.test(t.date)&&(t.date=s.split(Mf.timeZoneDelimiter)[0],a=s.substr(t.date.length,s.length))),a){const n=Mf.timezone.exec(a);n?(t.time=a.replace(n[1],""),t.timezone=n[1]):t.time=a}return t}function KI(s,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=s.match(r);if(!a)return{year:NaN,restDateString:""};const n=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:i===null?n:i*100,restDateString:s.slice((a[1]||a[2]).length)}}function zI(s,t){if(t===null)return new Date(NaN);const r=s.match(HI);if(!r)return new Date(NaN);const a=!!r[4],n=cm(r[1]),i=cm(r[2])-1,o=cm(r[3]),l=cm(r[4]),d=cm(r[5])-1;if(a)return eU(t,l,d)?YI(t,l,d):new Date(NaN);{const u=new Date(0);return!XI(t,i,o)||!ZI(t,n)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(n,o)),u)}}function cm(s){return s?parseInt(s):1}function GI(s){const t=s.match(qI);if(!t)return NaN;const r=I0(t[1]),a=I0(t[2]),n=I0(t[3]);return tU(r,a,n)?r*oS+a*iS+n*1e3:NaN}function I0(s){return s&&parseFloat(s.replace(",","."))||0}function VI(s){if(s==="Z")return 0;const t=s.match($I);if(!t)return 0;const r=t[1]==="+"?-1:1,a=parseInt(t[2]),n=t[3]&&parseInt(t[3])||0;return rU(a,n)?r*(a*oS+n*iS):NaN}function YI(s,t,r){const a=new Date(0);a.setUTCFullYear(s,0,4);const n=a.getUTCDay()||7,i=(t-1)*7+r+1-n;return a.setUTCDate(a.getUTCDate()+i),a}const JI=[31,null,31,30,31,30,31,31,30,31,30,31];function AS(s){return s%400===0||s%4===0&&s%100!==0}function XI(s,t,r){return t>=0&&t<=11&&r>=1&&r<=(JI[t]||(AS(s)?29:28))}function ZI(s,t){return t>=1&&t<=(AS(s)?366:365)}function eU(s,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function tU(s,t,r){return s===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&s>=0&&s<25}function rU(s,t){return t>=0&&t<=59}function yc(s,t){return dp(s,-t)}function sU(s,t){return cS(s,-3)}const Ru=async()=>{try{const{data:{user:s}}=await _e.auth.getUser();if(s?.id)return s.id}catch{console.log("Auth not available, using development mode")}return"00000000-0000-0000-0000-000000000000"},ti=async()=>{try{const{data:{user:s}}=await _e.auth.getUser();if(s)return{id:s.id,email:s.email||"unknown@example.com"}}catch(s){console.error("Failed to get current user:",s)}return console.warn("  No authenticated user found, using fallback user ID"),{id:"5ff28ea6-751f-4a22-b584-ca6c8a43f506",email:"dev@example.com"}},Qu=async s=>{if(!s)return null;if(s==="revenue-tracker"){console.log("Resolving revenue-tracker to actual project ID...");const{data:t,error:r}=await _e.from("projects").select("id").eq("name","Revenue Tracker").single();return r?(console.error("Error resolving Revenue Tracker project:",r),console.log("Will use null as project_id instead"),null):t?(console.log("Resolved revenue-tracker to project ID:",t.id),t.id):(console.warn("Revenue Tracker project not found in database"),console.log("Will use null as project_id instead"),null)}return s},jA=Mc((s,t)=>({receipts:[],payments:[],recurringExpenses:[],budgetItems:[],projects:[],clients:[],invoices:[],invoicePayments:[],dateRange:"month",isLoading:!1,error:null,financialSummary:{totalRevenue:0,totalExpenses:0,profit:0,profitMargin:0,outstandingInvoices:0,upcomingPayments:[],recentTransactions:[],monthlyData:[],expensesByCategory:[]},fetchReceipts:async()=>{s({isLoading:!0,error:null});try{console.log(" Fetching receipts from finance_expenses...");const{data:r,error:a}=await _e.from("finance_expenses").select("*").order("created_at",{ascending:!1});if(a)throw console.error(" Error fetching receipts:",a),a;console.log(" Raw data from finance_expenses:",r),console.log(" Number of expenses:",r?.length||0);const n=r?.map(i=>({id:i.id,vendor:i.vendor||"Unknown Vendor",date:i.date||new Date().toISOString().split("T")[0],amount:i.amount||0,category:i.category||"General",notes:i.notes||"",status:"processed",projectId:i.project_id||null,userId:i.user_id,metadata:i.metadata||void 0}))||[];console.log(" Transformed receipts:",n),console.log(" Number of receipts:",n.length),s({receipts:n,isLoading:!1}),t().calculateFinancialSummary()}catch(r){console.error(" Failed to fetch receipts:",r),s({error:r.message,isLoading:!1})}},addReceipt:async r=>{s({isLoading:!0,error:null});try{const n=(await ti())?.id||null;console.log("Adding receipt:",r);const i=await Qu(r.projectId),{data:o,error:l}=await _e.from("finance_expenses").insert({vendor:r.vendor,amount:r.amount,date:r.date,category:r.category,status:r.status||"pending",notes:r.notes||null,project_id:i,user_id:n}).select().single();if(l){console.error("Error adding receipt:",l),console.error("Error details:",JSON.stringify(l,null,2)),s({error:`Failed to save expense: ${l.message}`,isLoading:!1}),alert(`Error saving expense: ${l.message}`);return}console.log("Receipt added successfully:",o);const d={id:o.id,vendor:r.vendor,date:r.date,amount:r.amount,category:r.category,notes:r.notes||"",status:r.status||"pending",projectId:r.projectId,userId:n};s(u=>({receipts:[d,...u.receipts],isLoading:!1,error:null})),t().calculateFinancialSummary(),alert("Expense saved successfully!")}catch(a){console.error("Failed to add receipt:",a),s({error:a.message||"Failed to save expense",isLoading:!1}),alert(`Error saving expense: ${a.message||"Unknown error"}`)}},updateReceipt:async r=>{s({isLoading:!0,error:null});try{if(!await ti()){s({error:"User not authenticated",isLoading:!1});return}const n=await Qu(r.projectId),i={vendor:r.vendor,amount:r.amount,date:r.date,category:r.category,status:r.status,notes:r.notes,project_id:n,metadata:r.metadata||null},{data:o,error:l}=await _e.from("finance_expenses").update(i).eq("id",r.id).select();if(l)throw l;s(d=>({receipts:d.receipts.map(u=>u.id===r.id?r:u),isLoading:!1})),t().calculateFinancialSummary()}catch(a){console.error("Update error:",a),s({error:a.message,isLoading:!1})}},deleteReceipt:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}const{error:n}=await _e.from("finance_expenses").delete().eq("id",r).eq("user_id",a.id);if(n)throw n;s(i=>({receipts:i.receipts.filter(o=>o.id!==r),isLoading:!1})),t().calculateFinancialSummary()}catch(a){s({error:a.message,isLoading:!1})}},fetchPayments:async()=>{s({isLoading:!0,error:null});try{const{data:r,error:a}=await _e.from("finance_payments").select("*").order("created_at",{ascending:!1});if(a)throw console.error("Error fetching payments:",a),a;const n=r?.map(i=>({id:i.id,clientId:i.client_name||"Unknown",projectId:i.project_id||null,amount:i.amount||0,date:i.date||new Date().toISOString().split("T")[0],method:i.method||"bank_transfer",status:"completed",reference:i.reference||"",notes:i.notes||"",userId:i.user_id}))||[];s({payments:n,isLoading:!1}),t().calculateFinancialSummary()}catch(r){s({error:r.message,isLoading:!1})}},addPayment:async r=>{s({isLoading:!0,error:null});try{const n=(await ti())?.id||null;console.log("Adding payment:",r);const i=await Qu(r.projectId),{data:o,error:l}=await _e.from("finance_payments").insert({client_name:r.clientId||"Unknown Client",project_id:i,amount:r.amount,date:r.date,method:r.method||"bank_transfer",reference:r.reference||"",notes:r.notes||null,user_id:n}).select().single();if(l){console.error("Error adding payment:",l),console.error("Error details:",JSON.stringify(l,null,2)),s({error:`Failed to save payment: ${l.message}`,isLoading:!1}),alert(`Error saving payment: ${l.message}`);return}const d={id:o.id,clientId:r.clientId,projectId:i,amount:r.amount,date:r.date,method:r.method||"bank_transfer",reference:r.reference,notes:r.notes||"",status:"completed",userId:n};s(u=>({payments:[d,...u.payments],isLoading:!1})),t().calculateFinancialSummary()}catch(a){s({error:a.message,isLoading:!1})}},updatePayment:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}const n=await Qu(r.projectId),{data:i,error:o}=await _e.from("finance_payments").update({client_name:r.clientId||"Unknown Client",project_id:n,amount:r.amount,date:r.date,method:r.method||"bank_transfer",reference:r.reference||"",notes:r.notes}).eq("id",r.id).eq("user_id",a.id).select().single();if(o)throw o;s(l=>({payments:l.payments.map(d=>d.id===r.id?{...r,projectId:n}:d),isLoading:!1})),t().calculateFinancialSummary()}catch(a){s({error:a.message,isLoading:!1})}},deletePayment:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}const{error:n}=await _e.from("finance_payments").delete().eq("id",r).eq("user_id",a.id);if(n)throw n;s(i=>({payments:i.payments.filter(o=>o.id!==r),isLoading:!1})),t().calculateFinancialSummary()}catch(a){s({error:a.message,isLoading:!1})}},fetchRecurringExpenses:async()=>{s({isLoading:!0,error:null});try{const{data:r,error:a}=await _e.from("recurring_expenses").select("*").order("created_at",{ascending:!1});if(a)throw a;const n=(r||[]).map(i=>({id:i.id,name:i.name,amount:i.amount,category:i.category,frequency:i.frequency,nextDueDate:i.next_due_date,startDate:i.start_date||void 0,projectId:i.project_id||void 0,vendor:i.vendor||"",isActive:i.is_active,userId:i.user_id}));s({recurringExpenses:n,isLoading:!1})}catch(r){s({error:r.message,isLoading:!1})}},addRecurringExpense:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}console.log("Adding recurring expense:",r),console.log("  - projectId:",r.projectId),console.log("  - startDate:",r.startDate);const n=await Qu(r.projectId);console.log("  - resolvedProjectId:",n);const{data:i,error:o}=await _e.from("recurring_expenses").insert({name:r.name,amount:r.amount,category:r.category,frequency:r.frequency,next_due_date:r.nextDueDate,start_date:r.startDate||null,project_id:n,vendor:r.vendor||"",is_active:r.isActive,user_id:a.id}).select().single();if(o){console.error("Error adding recurring expense:",o),console.error("Error details:",JSON.stringify(o,null,2)),s({error:`Failed to save recurring expense: ${o.message}`,isLoading:!1}),alert(`Error saving recurring expense: ${o.message}`);return}const l={id:i.id,name:r.name,amount:r.amount,category:r.category,frequency:r.frequency,nextDueDate:i.next_due_date,startDate:i.start_date||void 0,projectId:n||void 0,vendor:r.vendor||"",isActive:i.is_active,userId:a.id};s(d=>({recurringExpenses:[...d.recurringExpenses,l],isLoading:!1}))}catch(a){s({error:a.message,isLoading:!1})}},updateRecurringExpense:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}const n=await Qu(r.projectId),{data:i,error:o}=await _e.from("recurring_expenses").update({name:r.name,amount:r.amount,category:r.category,frequency:r.frequency,next_due_date:r.nextDueDate,start_date:r.startDate||null,project_id:n,vendor:r.vendor||"",is_active:r.isActive}).eq("id",r.id).eq("user_id",a.id).select().single();if(o)throw o;s(l=>({recurringExpenses:l.recurringExpenses.map(d=>d.id===r.id?r:d),isLoading:!1}))}catch(a){s({error:a.message,isLoading:!1})}},deleteRecurringExpense:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}const{error:n}=await _e.from("recurring_expenses").delete().eq("id",r).eq("user_id",a.id);if(n)throw n;s(i=>({recurringExpenses:i.recurringExpenses.filter(o=>o.id!==r),isLoading:!1}))}catch(a){s({error:a.message,isLoading:!1})}},toggleRecurringExpense:async(r,a)=>{s({isLoading:!0,error:null});try{const n=await ti();if(!n){s({error:"User not authenticated",isLoading:!1});return}const{data:i,error:o}=await _e.from("recurring_expenses").update({is_active:a}).eq("id",r).eq("user_id",n.id).select().single();if(o)throw o;s(l=>({recurringExpenses:l.recurringExpenses.map(d=>d.id===r?{...d,isActive:a}:d),isLoading:!1}))}catch(n){s({error:n.message,isLoading:!1})}},fetchBudgetItems:async()=>{s({isLoading:!0,error:null});try{const{data:r,error:a}=await _e.from("budget_items").select("*").order("created_at",{ascending:!1});if(a)throw console.error("Error fetching budget items:",a),a;const n=r?.map(i=>({id:i.id,projectId:i.project_id,category:i.category,name:i.name,budgetedAmount:i.budgeted_amount||0,actualAmount:i.actual_amount||0,variance:i.variance||0,variancePercentage:i.variance_percentage||0,userId:i.user_id}))||[];console.log("Fetched budget items:",n),s({budgetItems:n,isLoading:!1})}catch(r){console.error("Error fetching budget items:",r),s({error:r.message,isLoading:!1})}},addBudgetItem:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}console.log("Adding budget item:",r);const{data:n,error:i}=await _e.from("budget_items").insert({project_id:r.projectId,category:r.category,name:r.name||r.category,budgeted_amount:r.budgetedAmount,actual_amount:r.actualAmount,user_id:a.id}).select().single();if(i)throw console.error("Error adding budget item:",i),i;const o={id:n.id,projectId:n.project_id,category:n.category,name:n.name,budgetedAmount:n.budgeted_amount,actualAmount:n.actual_amount,variance:n.variance,variancePercentage:n.variance_percentage,userId:n.user_id};console.log("Budget item added successfully:",o),s(l=>({budgetItems:[o,...l.budgetItems],isLoading:!1}))}catch(a){console.error("Failed to add budget item:",a),s({error:a.message,isLoading:!1})}},updateBudgetItem:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}console.log("Updating budget item:",r);const{data:n,error:i}=await _e.from("budget_items").update({category:r.category,name:r.name||r.category,budgeted_amount:r.budgetedAmount,actual_amount:r.actualAmount}).eq("id",r.id).eq("user_id",a.id).select().single();if(i)throw console.error("Error updating budget item:",i),i;const o={id:n.id,projectId:n.project_id,category:n.category,name:n.name,budgetedAmount:n.budgeted_amount,actualAmount:n.actual_amount,variance:n.variance,variancePercentage:n.variance_percentage,userId:n.user_id};s(l=>({budgetItems:l.budgetItems.map(d=>d.id===r.id?o:d),isLoading:!1}))}catch(a){console.error("Failed to update budget item:",a),s({error:a.message,isLoading:!1})}},deleteBudgetItem:async r=>{s({isLoading:!0,error:null});try{const a=await ti();if(!a){s({error:"User not authenticated",isLoading:!1});return}console.log("Deleting budget item:",r);const{error:n}=await _e.from("budget_items").delete().eq("id",r).eq("user_id",a.id);if(n)throw console.error("Error deleting budget item:",n),n;console.log("Budget item deleted successfully"),s(i=>({budgetItems:i.budgetItems.filter(o=>o.id!==r),isLoading:!1}))}catch(a){console.error("Failed to delete budget item:",a),s({error:a.message,isLoading:!1})}},fetchProjects:async()=>{s({isLoading:!0,error:null});try{const{data:r,error:a}=await _e.from("projects").select("*").order("created_at",{ascending:!1});if(a)throw a;const i=(r||[]).map(o=>({id:o.id,name:o.name,clientId:o.client_id?o.client_id:null,clientName:o.client_name||"Unknown Client",totalBudget:o.budget||0,totalActual:o.spent||0,totalAmount:o.budget||0,paidAmount:o.spent||0,variance:(o.budget||0)-(o.spent||0),variancePercentage:o.budget?(o.budget-o.spent)/o.budget*100:0,userId:o.user_id}));console.log("Fetched projects:",i),s({projects:i,isLoading:!1})}catch(r){console.error("Error fetching projects:",r),s({error:r.message,isLoading:!1})}},fetchClients:async()=>{s({isLoading:!0,error:null});try{const{data:r,error:a}=await _e.from("clients").select("*").order("created_at",{ascending:!1});if(a)throw a;console.log("Fetched clients:",r),console.log("Number of clients:",r?.length||0),s({clients:r||[],isLoading:!1})}catch(r){console.error("Error fetching clients:",r),s({error:r.message,isLoading:!1})}},fetchInvoices:async()=>{s({isLoading:!0,error:null});try{const r=await Ru(),{data:a,error:n}=await _e.from("invoices").select("*").eq("user_id",r).order("created_at",{ascending:!1});if(n)throw n;const i=a?.map(o=>({id:o.id,projectId:o.project_id,clientId:o.client_id,estimateId:o.estimate_id,invoiceNumber:o.invoice_number,totalAmount:o.total_amount,paidAmount:o.paid_amount,balance:o.balance,dueDate:o.due_date,issuedDate:o.issued_date,status:o.status,lineItems:o.line_items,notes:o.notes,userId:o.user_id,createdAt:o.created_at,updatedAt:o.updated_at}))||[];s({invoices:i,isLoading:!1})}catch(r){console.error("Error fetching invoices:",r),s({error:r.message,isLoading:!1})}},convertEstimateToInvoice:async r=>{s({isLoading:!0,error:null});try{const a=await Ru(),{data:n,error:i}=await _e.from("estimates").select("*").eq("id",r).eq("user_id",a).single();if(i)throw i;if(!n)throw new Error("Estimate not found");const o=`INV-${Date.now()}`,l=bc(new Date,30).toISOString().split("T")[0],d={project_id:n.project_id,client_id:n.client_id,estimate_id:r,invoice_number:o,total_amount:n.total,paid_amount:0,balance:n.total,due_date:l,issued_date:new Date().toISOString().split("T")[0],status:"outstanding",line_items:n.items,notes:n.notes,user_id:a},{data:u,error:m}=await _e.from("invoices").insert([d]).select().single();if(m)throw m;await _e.from("estimates").update({status:"approved",converted_to_invoice:!0,invoice_id:u.id}).eq("id",r);const h={id:u.id,projectId:u.project_id,clientId:u.client_id,estimateId:u.estimate_id,invoiceNumber:u.invoice_number,totalAmount:u.total_amount,paidAmount:u.paid_amount,balance:u.balance,dueDate:u.due_date,issuedDate:u.issued_date,status:u.status,lineItems:u.line_items,notes:u.notes,userId:u.user_id,createdAt:u.created_at,updatedAt:u.updated_at};return s(x=>({invoices:[h,...x.invoices],isLoading:!1})),t().calculateFinancialSummary(),h}catch(a){return console.error("Error converting estimate to invoice:",a),s({error:a.message,isLoading:!1}),null}},updateInvoicePayment:async(r,a,n)=>{s({isLoading:!0,error:null});try{const i=await Ru(),{data:o,error:l}=await _e.from("invoices").select("*").eq("id",r).eq("user_id",i).single();if(l)throw l;if(!o)throw new Error("Invoice not found");const d=o.paid_amount+a,u=o.total_amount-d;let m=n;m||(m=u<=0?"paid":"partial");const{error:h}=await _e.from("invoices").update({paid_amount:d,balance:u,status:m,updated_at:new Date().toISOString()}).eq("id",r);if(h)throw h;s(x=>({invoices:x.invoices.map(f=>f.id===r?{...f,paidAmount:d,balance:u,status:m,updatedAt:new Date().toISOString()}:f),isLoading:!1})),t().calculateFinancialSummary()}catch(i){console.error("Error updating invoice payment:",i),s({error:i.message,isLoading:!1})}},addInvoice:async r=>{s({isLoading:!0,error:null});try{const a=await Ru(),{data:n,error:i}=await _e.from("invoices").insert([{project_id:r.projectId,client_id:r.clientId,estimate_id:r.estimateId,invoice_number:r.invoiceNumber,total_amount:r.totalAmount,paid_amount:r.paidAmount,balance:r.balance,due_date:r.dueDate,issued_date:r.issuedDate,status:r.status,line_items:r.lineItems,notes:r.notes,user_id:a}]).select().single();if(i)throw i;const o={id:n.id,projectId:n.project_id,clientId:n.client_id,estimateId:n.estimate_id,invoiceNumber:n.invoice_number,totalAmount:n.total_amount,paidAmount:n.paid_amount,balance:n.balance,dueDate:n.due_date,issuedDate:n.issued_date,status:n.status,lineItems:n.line_items,notes:n.notes,userId:n.user_id,createdAt:n.created_at,updatedAt:n.updated_at};s(l=>({invoices:[o,...l.invoices],isLoading:!1})),t().calculateFinancialSummary()}catch(a){console.error("Error adding invoice:",a),s({error:a.message,isLoading:!1})}},updateInvoice:async r=>{s({isLoading:!0,error:null});try{const{error:a}=await _e.from("invoices").update({project_id:r.projectId,client_id:r.clientId,invoice_number:r.invoiceNumber,total_amount:r.totalAmount,paid_amount:r.paidAmount,balance:r.balance,due_date:r.dueDate,issued_date:r.issuedDate,status:r.status,line_items:r.lineItems,notes:r.notes,updated_at:new Date().toISOString()}).eq("id",r.id);if(a)throw a;s(n=>({invoices:n.invoices.map(i=>i.id===r.id?{...r,updatedAt:new Date().toISOString()}:i),isLoading:!1})),t().calculateFinancialSummary()}catch(a){console.error("Error updating invoice:",a),s({error:a.message,isLoading:!1})}},deleteInvoice:async r=>{s({isLoading:!0,error:null});try{const{error:a}=await _e.from("invoices").delete().eq("id",r);if(a)throw a;s(n=>({invoices:n.invoices.filter(i=>i.id!==r),isLoading:!1})),t().calculateFinancialSummary()}catch(a){console.error("Error deleting invoice:",a),s({error:a.message,isLoading:!1})}},recordInvoicePayment:async(r,a)=>{s({isLoading:!0,error:null});try{const n=await Ru(),{data:i,error:o}=await _e.from("invoices").select("*").eq("id",r).eq("user_id",n).single();if(o)throw o;if(!i)throw new Error("Invoice not found");const{data:l,error:d}=await _e.from("invoice_payments").insert([{invoice_id:r,amount:a.amount,payment_date:a.paymentDate,payment_method:a.paymentMethod,reference_number:a.referenceNumber,notes:a.notes,user_id:n}]).select().single();if(d)throw d;const{data:u,error:m}=await _e.from("finance_payments").insert([{client_name:i.client_id||"Unknown Client",amount:a.amount,date:a.paymentDate,method:a.paymentMethod||"other",reference:a.referenceNumber||"",notes:a.notes||`Payment for invoice ${i.invoice_number}`,user_id:n}]).select().single();if(m)throw m;const h=i.paid_amount+a.amount,x=i.total_amount-h,f=x<=0?"paid":"partial",{error:b}=await _e.from("invoices").update({paid_amount:h,balance:x,status:f,updated_at:new Date().toISOString()}).eq("id",r);if(b)throw b;s(v=>({invoices:v.invoices.map(j=>j.id===r?{...j,paidAmount:h,balance:x,status:f,updatedAt:new Date().toISOString()}:j),invoicePayments:[...v.invoicePayments,{id:l.id,invoiceId:l.invoice_id,amount:l.amount,paymentDate:l.payment_date,paymentMethod:l.payment_method,referenceNumber:l.reference_number,notes:l.notes,userId:l.user_id,createdAt:l.created_at,updatedAt:l.updated_at}],payments:[...v.payments,{id:u.id,clientId:u.client_id,projectId:u.project_id,amount:u.amount,date:u.date,method:u.method,reference:u.reference,notes:u.notes,status:u.status,invoiceId:u.invoice_id,userId:u.user_id}],isLoading:!1})),t().calculateFinancialSummary()}catch(n){console.error("Error recording invoice payment:",n),s({error:n.message,isLoading:!1})}},fetchInvoicePayments:async r=>{try{const a=await Ru(),{data:n,error:i}=await _e.from("invoice_payments").select("*").eq("invoice_id",r).eq("user_id",a).order("payment_date",{ascending:!1});if(i)throw i;return n?.map(l=>({id:l.id,invoiceId:l.invoice_id,amount:l.amount,paymentDate:l.payment_date,paymentMethod:l.payment_method,referenceNumber:l.reference_number,notes:l.notes,userId:l.user_id,createdAt:l.created_at,updatedAt:l.updated_at}))||[]}catch(a){return console.error("Error fetching invoice payments:",a),[]}},calculateFinancialSummary:()=>{const r=t(),{receipts:a,payments:n,invoices:i,recurringExpenses:o,budgetItems:l}=r,d=0,u=0,m=o.filter(_=>_.isActive).reduce((_,$)=>{switch($.frequency){case"weekly":return _+$.amount*4.33;case"monthly":return _+$.amount;case"quarterly":return _+$.amount/3;case"yearly":return _+$.amount/12;default:return _+$.amount}},0),h=a.reduce((_,$)=>_+$.amount,0),x=d+u,f=m,b=l.reduce((_,$)=>_+($.actualAmount||0),0),v=h+x+f+b,j=n.filter(_=>_.status==="completed").reduce((_,$)=>_+$.amount,0),S=j-v,C=j>0?S/j*100:0;console.log(" Financial Summary Calculation:"),console.log("  Direct Expenses (receipts):",h),console.log("  Labor Costs (payroll):",x),console.log("  Operating Expenses (recurring):",f),console.log("  Budget Actuals:",b),console.log("  TOTAL EXPENSES:",v),console.log("  TOTAL REVENUE:",j),console.log("  NET PROFIT:",S);const B=i.filter(_=>_.status==="outstanding"||_.status==="partial"||_.status==="overdue").reduce((_,$)=>_+($.balance||0),0),F=[...a.map(_=>({id:_.id,date:_.date,description:`Expense: ${_.vendor}`,amount:_.amount,type:"expense"})),...n.map(_=>({id:_.id,date:_.date,description:"Payment received",amount:_.amount,type:"income"}))].sort((_,$)=>new Date($.date).getTime()-new Date(_.date).getTime()).slice(0,10),Q=a.reduce((_,$)=>(_[$.category]||(_[$.category]=0),_[$.category]+=$.amount,_),{}),q=Object.entries(Q).map(([_,$])=>({category:_,amount:$,percentage:v>0?$/v*100:0})),P=o.filter(_=>_.isActive).map(_=>({amount:_.amount,dueDate:_.nextDueDate,projectName:"Recurring Expense",clientName:_.vendor||_.name})).sort((_,$)=>new Date(_.dueDate).getTime()-new Date($.dueDate).getTime()).slice(0,5),D=[];for(let _=5;_>=0;_--){const $=new Date;$.setMonth($.getMonth()-_);const k=new Date($.getFullYear(),$.getMonth(),1),L=new Date($.getFullYear(),$.getMonth()+1,0),E=n.filter(M=>{const ie=new Date(M.date);return ie>=k&&ie<=L}).reduce((M,ie)=>M+ie.amount,0),O=a.filter(M=>{const ie=new Date(M.date);return ie>=k&&ie<=L}).reduce((M,ie)=>M+ie.amount,0),le=o.filter(M=>M.isActive).reduce((M,ie)=>{switch(ie.frequency){case"weekly":return M+ie.amount*4.33;case"monthly":return M+ie.amount;case"quarterly":return M+ie.amount/3;case"yearly":return M+ie.amount/12;default:return M+ie.amount}},0),te=l.filter(M=>M.actualAmount>0).reduce((M,ie)=>M+ie.actualAmount/6,0),V=O+le+te;D.push({month:$.toLocaleDateString("en-US",{month:"short",year:"numeric"}),revenue:E,expenses:V})}console.log(" Monthly data calculated:",D),console.log("  Total payments:",n.length),console.log("  Total receipts:",a.length),s({financialSummary:{totalRevenue:j,totalExpenses:v,profit:S,profitMargin:C,outstandingInvoices:B,upcomingPayments:P,recentTransactions:F,monthlyData:D,expensesByCategory:q}})},setDateRange:r=>s({dateRange:r}),generateReport:async r=>{s({isLoading:!0,error:null});try{console.log("Generating report with options:",r);const a=t(),{receipts:n,payments:i,projects:o,clients:l,financialSummary:d,recurringExpenses:u,budgetItems:m}=a;!n&&!i&&!o&&console.warn("No data available for report generation");const h=r.type==="project"&&r.projectId,x=h?n.filter(B=>B.projectId===r.projectId):n,f=h?m.filter(B=>B.projectId===r.projectId):m,b=h?u.filter(B=>B.projectId===r.projectId):u,j=[...(h?i.filter(B=>B.projectId===r.projectId):i).map(B=>({date:B.date,type:"Income",description:`Payment #${B.id?.substring(0,8)||"N/A"}`,category:"Payment",income:B.amount,expense:0,source:"payment"})),...x.map(B=>({date:B.date,type:"Expense",description:B.vendor,category:B.category,income:0,expense:B.amount,source:"receipt"})),...f.map(B=>({date:new Date().toISOString().split("T")[0],type:"Budget",description:`${B.category} - Budget Item`,category:B.category,income:0,expense:B.actual||0,source:"budget"})),...b.filter(B=>B.isActive).map(B=>({date:B.nextDueDate||new Date().toISOString().split("T")[0],type:"Recurring",description:`${B.name} (${B.frequency})`,category:B.category,income:0,expense:B.amount,source:"recurring"}))].sort((B,F)=>new Date(F.date).getTime()-new Date(B.date).getTime()),S=j.filter(B=>B.expense>0).reduce((B,F)=>(B[F.category]||(B[F.category]={amount:0,count:0}),B[F.category].amount+=F.expense,B[F.category].count++,B),{}),C=r.type==="project"?`PROJECT-BASED FINANCIAL REPORT${r.projectId?` - Project ${r.projectId.substring(0,8)}`:""}`:"WHOLE COMPANY FINANCIAL REPORT";if(r.format==="csv"){let B=`${C}
`;B+=`"Report Type:","${r.type==="whole"?"All Company Expenses":"Project-Specific"}"
`,B+=`"Period:",="${r.dateRange.start}","to",="${r.dateRange.end}"

`,B+=`FINANCIAL SUMMARY
`,B+=`"Metric","Amount"
`,B+=`"Total Revenue","$${d.totalRevenue.toFixed(2)}"
`,B+=`"Total Expenses","$${d.totalExpenses.toFixed(2)}"
`,B+=`"Net Profit","$${d.profit.toFixed(2)}"
`,B+=`"Profit Margin","${d.profitMargin.toFixed(2)}%"

`,B+=`ALL TRANSACTIONS (Receipts + Budget Items + Recurring Expenses + Payments)
`,B+=`"Date","Type","Description","Category","Income","Expense","Source"
`,j.forEach(_=>{B+=`"${_.date}","${_.type}","${_.description}","${_.category}","$${_.income.toFixed(2)}","$${_.expense.toFixed(2)}","${_.source}"
`}),B+=`
`,B+=`EXPENSE SUMMARY BY CATEGORY
`,B+=`"Category","Total Amount","Count"
`,Object.entries(S).forEach(([_,$])=>{B+=`"${_}","$${$.amount.toFixed(2)}","${$.count}"
`}),B+=`
`,o.length>0&&(B+=`PROJECT PROFITABILITY
`,B+=`"Project","Budget","Spent","Remaining","Profit Margin %"
`,o.forEach(_=>{const $=_.totalBudget||_.totalAmount||0,k=_.totalActual||_.paidAmount||0,L=$-k,E=$?L/$*100:0;B+=`"${_.name}","$${$.toFixed(2)}","$${k.toFixed(2)}","$${L.toFixed(2)}","${E.toFixed(2)}%"
`}),B+=`
`),f.length>0&&(B+=`
`,B+=`BUDGET ITEMS DETAIL
`,B+=`"Category","Planned","Actual","Variance","Variance %"
`,f.forEach(_=>{B+=`"${_.category}","$${_.budgetedAmount.toFixed(2)}","$${_.actualAmount.toFixed(2)}","$${_.variance.toFixed(2)}","${_.variancePercentage.toFixed(2)}%"
`})),b.length>0&&(B+=`
`,B+=`RECURRING EXPENSES DETAIL
`,B+=`"Name","Amount","Category","Frequency","Next Due","Status"
`,b.forEach(_=>{B+=`"${_.name}","$${_.amount.toFixed(2)}","${_.category}","${_.frequency}","${_.nextDueDate}","${_.isActive?"Active":"Inactive"}"
`}));const F=new Blob([B],{type:"text/csv;charset=utf-8;"}),Q=document.createElement("a"),q=URL.createObjectURL(F);Q.setAttribute("href",q);const P=r.type==="whole"?"whole_company":"project";Q.setAttribute("download",`${P}_report_${r.dateRange.start}_${r.dateRange.end}.csv`),Q.style.visibility="hidden",document.body.appendChild(Q),Q.click(),document.body.removeChild(Q);const D=document.createElement("textarea");D.value=B,D.style.position="fixed",D.style.top="50%",D.style.left="50%",D.style.transform="translate(-50%, -50%)",D.style.width="80%",D.style.height="60%",D.style.zIndex="9999",D.style.backgroundColor="white",D.style.border="2px solid #333",D.style.padding="10px",D.style.fontFamily="monospace",document.body.appendChild(D),D.select(),alert(`CSV Report Generated!

The file has been downloaded.

The data is also displayed in a text box - you can copy it (Ctrl+C) and paste into Excel or Google Sheets.

Click OK to close the text box.`),document.body.removeChild(D)}else{const{jsPDF:B}=await Fi(async()=>{const{jsPDF:O}=await Promise.resolve().then(()=>tD);return{jsPDF:O}},void 0),F=(await Fi(async()=>{const{default:O}=await Promise.resolve().then(()=>mq);return{default:O}},void 0)).default,Q=new B;let q=20;Q.setFontSize(24);const P=r.type==="whole"?"WHOLE COMPANY REPORT":"PROJECT-BASED REPORT";Q.text(P,105,q,{align:"center"}),q+=10,Q.setFontSize(10);const D=r.type==="whole"?"All Company Expenses":"Project-Specific Expenses";Q.text(D,105,q,{align:"center"}),q+=10,Q.setFontSize(12),Q.text(`Period: ${r.dateRange.start} to ${r.dateRange.end}`,105,q,{align:"center"}),q+=20,Q.setFontSize(16),Q.text("Executive Summary",14,q),q+=10,Q.setFontSize(10),[`Total Revenue: $${d.totalRevenue.toLocaleString()}`,`Total Expenses: $${d.totalExpenses.toLocaleString()}`,`Net Profit: $${d.profit.toLocaleString()}`,`Profit Margin: ${d.profitMargin.toFixed(2)}%`].forEach(O=>{Q.text(O,14,q),q+=7}),q+=10,Q.setFontSize(14),Q.text("1. All Transactions (Receipts + Budget + Recurring + Payments)",14,q),q+=10;const $=j.slice(0,20).map(O=>[O.date,O.type,O.description.substring(0,20),O.category.substring(0,15),O.income>0?`$${O.income.toFixed(2)}`:"",O.expense>0?`$${O.expense.toFixed(2)}`:"",O.source]);F(Q,{head:[["Date","Type","Description","Category","Income","Expense","Source"]],body:$,startY:q,margin:{left:14},styles:{fontSize:7}}),Q.addPage(),q=20,Q.setFontSize(14),Q.text("2. Expense Summary by Category",14,q),q+=10;const k=Object.entries(S).map(([O,le])=>[O,`$${le.amount.toFixed(2)}`,le.count.toString(),`$${(le.amount/le.count).toFixed(2)}`]);if(F(Q,{head:[["Category","Total Amount","Count","Average"]],body:k,startY:q,margin:{left:14},styles:{fontSize:9}}),o.length>0){q=Q.lastAutoTable.finalY+20,q>240&&(Q.addPage(),q=20),Q.setFontSize(14),Q.text("3. Project Profitability Analysis",14,q),q+=10;const O=o.map(le=>{const te=le.totalBudget||le.totalAmount||0,V=le.totalActual||le.paidAmount||0;return[le.name.substring(0,30),`$${te.toFixed(2)}`,`$${V.toFixed(2)}`,`$${(te-V).toFixed(2)}`,te?`${((te-V)/te*100).toFixed(1)}%`:"0%"]});F(Q,{head:[["Project","Budget","Spent","Remaining","Margin"]],body:O,startY:q,margin:{left:14},styles:{fontSize:9}})}if(f.length>0){q=Q.lastAutoTable.finalY+20,q>240&&(Q.addPage(),q=20),Q.setFontSize(14),Q.text("4. Budget Items Detail",14,q),q+=10;const O=f.map(le=>[le.category,`$${le.budgetedAmount.toFixed(2)}`,`$${le.actualAmount.toFixed(2)}`,`$${le.variance.toFixed(2)}`,`${le.variancePercentage.toFixed(1)}%`]);F(Q,{head:[["Category","Planned","Actual","Variance","Variance %"]],body:O,startY:q,margin:{left:14},styles:{fontSize:9}})}if(b.length>0){q=Q.lastAutoTable.finalY+20,q>240&&(Q.addPage(),q=20),Q.setFontSize(14),Q.text("5. Recurring Expenses Detail",14,q),q+=10;const O=b.map(le=>[le.name,`$${le.amount.toFixed(2)}`,le.category,le.frequency,le.nextDueDate||"N/A",le.isActive?"Active":"Inactive"]);F(Q,{head:[["Name","Amount","Category","Frequency","Next Due","Status"]],body:O,startY:q,margin:{left:14},styles:{fontSize:8}})}const E=`${r.type==="whole"?"whole_company":"project"}_report_${r.dateRange.start}_${r.dateRange.end}.pdf`;Q.save(E)}s({isLoading:!1,error:null})}catch(a){console.error("Error generating report:",a);const n=a.message||"Failed to generate report";s({isLoading:!1,error:n}),alert(`Error generating report: ${n}`)}},predictCashFlow:async r=>(console.log(`Predicting cash flow for ${r} months`),{prediction:"Feature coming soon"}),detectAnomalies:async()=>(console.log("Detecting anomalies"),{anomalies:[]}),suggestCostSavings:async()=>(console.log("Suggesting cost savings"),{suggestions:[]})})),aU=()=>{const{financialSummary:s}=jA();return e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3 mb-6",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Total Revenue"}),e.jsxs("span",{className:"text-xl font-bold text-blue-900",children:["$",s.totalRevenue.toLocaleString()]})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-100",children:[e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Profit Margin"}),e.jsxs("span",{className:"text-xl font-bold text-green-900",children:[s.profitMargin.toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-100",children:[e.jsx("p",{className:"text-sm text-amber-700 font-medium",children:"Outstanding Invoices"}),e.jsxs("span",{className:"text-xl font-bold text-amber-900",children:["$",s.outstandingInvoices.toLocaleString()]})]})]}),e.jsxs("div",{className:"w-full h-60 bg-gray-50 rounded-lg relative p-4",children:[e.jsx("div",{className:"absolute top-2 left-2 text-xs text-gray-500",children:"Revenue vs. Expenses (Last 6 Months)"}),e.jsx("div",{className:"h-full w-full flex items-end justify-between pt-8 pb-8",children:(()=>{const r=(s.monthlyData||[]).slice(-6);for(;r.length<6;){const n=new Date;n.setMonth(n.getMonth()-(6-r.length)),r.unshift({month:n.toLocaleDateString("en-US",{month:"short",year:"numeric"}),revenue:0,expenses:0})}const a=Math.max(...r.map(n=>Math.max(n.revenue,n.expenses)),1);return r.map((n,i)=>e.jsxs("div",{className:"flex flex-col items-center flex-1 max-w-[16%]",children:[e.jsxs("div",{className:"w-full flex justify-center items-end space-x-1 h-40",children:[e.jsx("div",{className:"bg-blue-500 rounded-t-sm w-[40%]",style:{height:`${Math.max(n.revenue/a*100,2)}%`,minHeight:n.revenue>0?"4px":"0"}}),e.jsx("div",{className:"bg-teal-500 rounded-t-sm w-[40%]",style:{height:`${Math.max(n.expenses/a*100,2)}%`,minHeight:n.expenses>0?"4px":"0"}})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 whitespace-nowrap",children:n.month.split(" ")[0]})]},i))})()}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex items-center text-xs",children:[e.jsxs("div",{className:"flex items-center mr-3",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-sm mr-1"}),e.jsx("span",{children:"Revenue"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-teal-500 rounded-sm mr-1"}),e.jsx("span",{children:"Expenses"})]})]})]})]})},nU=()=>{const s=ka(t=>t.user);return lC({queryKey:pc.projects,queryFn:async()=>{const{data:t,error:r}=await _e.from("projects").select("*").eq("user_id",s?.id).order("created_at",{ascending:!1});if(r)throw r;return t||[]},enabled:!!s})},iU=()=>{const s=ka(t=>t.user);return lC({queryKey:pc.estimates,queryFn:async()=>{const{data:t,error:r}=await _e.from("estimates").select("*").eq("user_id",s?.id).order("created_at",{ascending:!1});if(r)throw r;return t||[]},enabled:!!s})},oU=()=>{const{data:s=[],isLoading:t}=nU();return{projects:s,loading:t,fetchProjects:()=>Promise.resolve()}},lU=()=>{const{data:s=[],isLoading:t}=iU();return{estimates:s,loading:t,fetchEstimates:()=>Promise.resolve()}};class ro{static async fetchEvents(t){try{const{data:r,error:a}=await _e.from("calendar_events").select("*").eq("user_id",t).order("start_date",{ascending:!0});if(a)throw a;return r||[]}catch(r){return console.error("Error fetching calendar events:",r),[]}}static async fetchEventsByDateRange(t,r,a){try{const{data:n,error:i}=await _e.from("calendar_events").select("*").eq("user_id",t).gte("start_date",r).lte("start_date",a).order("start_date",{ascending:!0});if(i)throw i;return n||[]}catch(n){return console.error("Error fetching calendar events by date range:",n),[]}}static async createEvent(t){try{let r=t.user_id;if(!r){const{data:{user:o}}=await _e.auth.getUser();o?r=o.id:(console.warn("No authenticated user, using development mode for calendar"),r="00000000-0000-0000-0000-000000000000")}const a={...t,user_id:r,created_at:new Date().toISOString()};console.log("Creating event with data:",a);const{data:n,error:i}=await _e.from("calendar_events").insert(a).select().single();if(i)throw console.error("Supabase error creating event:",i),i;return console.log("Event created successfully:",n),n}catch(r){return console.error("Error creating calendar event:",r),null}}static async updateEvent(t,r){try{const{error:a}=await _e.from("calendar_events").update(r).eq("id",t);if(a)throw a}catch(a){throw console.error("Error updating calendar event:",a),a}}static async deleteEvent(t){try{const{error:r}=await _e.from("calendar_events").delete().eq("id",t);if(r)throw r}catch(r){throw console.error("Error deleting calendar event:",r),r}}static async syncProjectDates(t,r){try{const{data:{user:a}}=await _e.auth.getUser(),n=a?.id||"00000000-0000-0000-0000-000000000000";console.log("Syncing project dates to calendar for project:",t,r),await _e.from("calendar_events").delete().eq("project_id",t).eq("auto_generated",!0);const i=r.start_date||r.startDate,o=r.end_date||r.endDate,l=r.name||r.projectName;i?(console.log("Creating project start event:",i),await this.createEvent({title:`Project Start: ${l}`,start_date:i,event_type:"project_start",status:"pending",user_id:n,project_id:t,auto_generated:!0})):console.log("No start date found for project"),o?(console.log("Creating project end event:",o),await this.createEvent({title:`Project Deadline: ${l}`,start_date:o,event_type:"project_end",status:"pending",user_id:n,project_id:t,auto_generated:!0})):console.log("No end date found for project")}catch(a){console.error("Error syncing project dates:",a)}}static async syncEstimateDates(t,r){try{const{data:{user:a}}=await _e.auth.getUser();if(!a)return;if(await _e.from("calendar_events").delete().eq("estimate_id",t).eq("auto_generated",!0),r.expires_at){await this.createEvent({title:`Estimate Expires: ${r.title}`,description:`Estimate for ${r.client_name||"Client"} expires`,start_date:r.expires_at,event_type:"estimate_expires",status:"pending",estimate_id:t,auto_generated:!0});const n=new Date(r.expires_at),i=new Date(n.getTime()-4320*60*1e3);await this.createEvent({title:`Follow up: ${r.title}`,description:`Follow up with ${r.client_name||"Client"} about estimate`,start_date:i.toISOString(),event_type:"task",status:"pending",estimate_id:t,auto_generated:!0})}}catch(a){console.error("Error syncing estimate dates:",a)}}static async syncTaskDates(t,r){try{const{data:{user:a}}=await _e.auth.getUser();if(!a)return;await _e.from("calendar_events").delete().eq("task_id",t).eq("auto_generated",!0),r.due_date&&await this.createEvent({title:`Task Due: ${r.title}`,description:r.description||"",start_date:r.due_date,event_type:"task",status:"pending",task_id:t,project_id:r.project_id,auto_generated:!0})}catch(a){console.error("Error syncing task dates:",a)}}static async generateProjectMilestones(t,r){try{const{data:{user:a}}=await _e.auth.getUser();if(!a)return[];const n=[];if(r.start_date&&r.end_date){const i=new Date(r.start_date),l=new Date(r.end_date).getTime()-i.getTime(),d=Math.ceil(l/(1e3*60*60*24)),u=new Date(i.getTime()+l*.25);n.push({id:"",title:`${r.name} - 25% Milestone`,description:"Project should be 25% complete",start_date:u.toISOString(),event_type:"milestone",status:"pending",user_id:a.id,project_id:t,auto_generated:!0});const m=new Date(i.getTime()+l*.5);n.push({id:"",title:`${r.name} - 50% Milestone`,description:"Project should be 50% complete",start_date:m.toISOString(),event_type:"milestone",status:"pending",user_id:a.id,project_id:t,auto_generated:!0});const h=new Date(i.getTime()+l*.75);n.push({id:"",title:`${r.name} - 75% Milestone`,description:"Project should be 75% complete",start_date:h.toISOString(),event_type:"milestone",status:"pending",user_id:a.id,project_id:t,auto_generated:!0});for(const x of n)await this.createEvent(x)}return n}catch(a){return console.error("Error generating project milestones:",a),[]}}static async getEventsByProject(t){try{const{data:r,error:a}=await _e.from("calendar_events").select("*").eq("project_id",t).order("start_date",{ascending:!0});if(a)throw a;return r||[]}catch(r){return console.error("Error fetching events by project:",r),[]}}static async getEventsByEstimate(t){try{const{data:r,error:a}=await _e.from("calendar_events").select("*").eq("estimate_id",t).order("start_date",{ascending:!0});if(a)throw a;return r||[]}catch(r){return console.error("Error fetching events by estimate:",r),[]}}}const cU={deck:[{title:"Site Preparation",event_type:"task"},{title:"Material Delivery",event_type:"task"},{title:"Foundation Work",event_type:"task",weather_sensitive:!0},{title:"Framing",event_type:"task"},{title:"Decking Installation",event_type:"task"},{title:"Railing Installation",event_type:"task"},{title:"Final Inspection",event_type:"milestone"}],bathroom:[{title:"Demo Day",event_type:"task"},{title:"Plumbing Rough-in",event_type:"task"},{title:"Electrical Rough-in",event_type:"task"},{title:"Tile Work",event_type:"task"},{title:"Fixture Installation",event_type:"task"},{title:"Final Touches",event_type:"task"}],kitchen:[{title:"Kitchen Demo",event_type:"task"},{title:"Plumbing/Electrical Updates",event_type:"task"},{title:"Cabinet Installation",event_type:"task"},{title:"Countertop Measurement",event_type:"milestone"},{title:"Countertop Installation",event_type:"task"},{title:"Appliance Installation",event_type:"task"},{title:"Backsplash Installation",event_type:"task"},{title:"Final Walkthrough",event_type:"milestone"}]},jh=Mc((s,t)=>({events:[],loading:!1,error:null,fetchEvents:async()=>{s({loading:!0,error:null});try{const{data:{user:r}}=await _e.auth.getUser();if(!r)throw new Error("User not authenticated");const a=await ro.fetchEvents(r.id);s({events:a,loading:!1})}catch(r){console.error("Error fetching events:",r),s({error:"Failed to fetch events",loading:!1})}},fetchEventsByDateRange:async(r,a)=>{s({loading:!0,error:null});try{const{data:{user:n}}=await _e.auth.getUser();if(!n)throw new Error("User not authenticated");const i=await ro.fetchEventsByDateRange(n.id,r,a);s({events:i,loading:!1})}catch(n){console.error("Error fetching events by date range:",n),s({error:"Failed to fetch events",loading:!1})}},addEvent:async r=>{s({loading:!0,error:null});try{console.log("Adding event:",r);const a=await ro.createEvent(r);console.log("Event created:",a),a?(s(n=>({events:[...n.events,a],loading:!1})),await t().fetchEvents()):(console.error("Failed to create event - no data returned"),s({error:"Failed to add event - no data returned",loading:!1}))}catch(a){console.error("Error adding event:",a),s({error:`Failed to add event: ${a}`,loading:!1})}},updateEvent:async(r,a)=>{s({loading:!0,error:null});try{await ro.updateEvent(r,a),s(n=>({events:n.events.map(i=>i.id===r?{...i,...a}:i),loading:!1}))}catch(n){console.error("Error updating event:",n),s({error:"Failed to update event",loading:!1})}},deleteEvent:async r=>{s({loading:!0,error:null});try{await ro.deleteEvent(r),s(a=>({events:a.events.filter(n=>n.id!==r),loading:!1}))}catch(a){console.error("Error deleting event:",a),s({error:"Failed to delete event",loading:!1})}},syncProjectDates:async(r,a)=>{try{await ro.syncProjectDates(r,a),await t().fetchEvents()}catch(n){console.error("Error syncing project dates:",n),s({error:"Failed to sync project dates"})}},syncEstimateDates:async(r,a)=>{try{await ro.syncEstimateDates(r,a),await t().fetchEvents()}catch(n){console.error("Error syncing estimate dates:",n),s({error:"Failed to sync estimate dates"})}},syncTaskDates:async(r,a)=>{try{await ro.syncTaskDates(r,a),await t().fetchEvents()}catch(n){console.error("Error syncing task dates:",n),s({error:"Failed to sync task dates"})}},getEventsByDate:r=>t().events.filter(a=>{const n=Ln(a.start_date);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()&&n.getDate()===r.getDate()}),getEventsByDateRange:(r,a)=>t().events.filter(n=>{const i=Ln(n.start_date);return i>=r&&i<=a}),getEventsByProject:r=>t().events.filter(a=>a.project_id===r),getEventsByEstimate:r=>t().events.filter(a=>a.estimate_id===r),getEventsByType:r=>t().events.filter(a=>a.event_type===r),generateProjectMilestones:async(r,a)=>{try{await ro.generateProjectMilestones(r,a),await t().fetchEvents()}catch(n){console.error("Error generating project milestones:",n),s({error:"Failed to generate milestones"})}},generateAIRecommendations:(r,a)=>{const n=cU[r.toLowerCase()];if(!n)return[];let i=a;const o=[];return n.forEach((l,d)=>{const u=d===0?0:Math.floor(Math.random()*3)+1;i=bc(i,u);const m={id:`ai-${Date.now()}-${d}`,title:l.title||"",description:`AI-generated event for ${r} project`,start_date:i.toISOString(),end_date:bc(i,1).toISOString(),event_type:l.event_type||"task",status:"pending",user_id:"",weather_sensitive:l.weather_sensitive||!1,auto_generated:!0};o.push(m)}),o}})),dU=()=>{const{t:s}=fr(),t=Zt(),{projects:r}=oU(),{estimates:a}=lU(),{events:n,fetchEvents:i}=jh(),{financialSummary:o,fetchReceipts:l,fetchPayments:d,fetchInvoices:u,fetchRecurringExpenses:m,fetchBudgetItems:h,fetchProjects:x,fetchClients:f}=jA(),[b,v]=p.useState(new Date);p.useEffect(()=>{console.log(" Dashboard: Fetching all data on mount"),i().then(()=>{console.log(" Dashboard: Events fetched, count:",n.length)}),Promise.all([l(),d(),u(),m(),h(),x(),f()]).then(()=>{console.log(" Dashboard: All finance data loaded")}).catch(_=>{console.error(" Dashboard: Error loading finance data:",_)})},[i,l,d,u,m,h,x,f]),p.useEffect(()=>{console.log(" Dashboard mounted with cached data"),console.log("  Projects:",r.length,"(cached)"),console.log("  Estimates:",a.length,"(cached)"),console.log("  Events:",n.length,"(from calendar store)"),console.log("  Financial Summary:",o)},[r.length,a.length,n.length]),p.useEffect(()=>{console.log(" Calendar events loaded:",n.length),n.forEach(_=>{const $=_.start_date?new Date(_.start_date):null,k=$&&!isNaN($.getTime());console.log(`  Event: "${_.title}" on ${_.start_date} - Valid: ${k}`)})},[n]);const j=r.filter(_=>_.status==="active").length,S=a.filter(_=>_.status==="draft"||_.status==="sent").length,C=o.totalRevenue,B=new Set(r.map(_=>_.client)).size,F=()=>{t("/projects")},Q=()=>{t("/estimates")},q=()=>{t("/calendar")},P=()=>{t("/estimates")},D=()=>{t("/projects")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s("dashboard.title")}),e.jsxs("div",{className:"flex gap-1.5",children:[e.jsx("button",{onClick:F,className:"px-2 py-1 text-xs font-medium text-white bg-blue-600 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:s("common.newProject")}),e.jsx("button",{onClick:Q,className:"px-2 py-1 text-xs font-medium text-blue-600 bg-white border border-blue-600 rounded hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500",children:s("common.newEstimate")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx(Lf,{title:s("dashboard.activeProjects"),value:j.toString(),change:`+${j}`,positive:!0,icon:e.jsx(xC,{className:"w-6 h-6 text-blue-600"})}),e.jsx(Lf,{title:s("dashboard.pendingEstimates"),value:S.toString(),change:`+${S}`,positive:!0,icon:e.jsx(ra,{className:"w-6 h-6 text-amber-500"})}),e.jsx(Lf,{title:s("common.totalRevenue"),value:`$${C.toLocaleString()}`,change:"+0%",positive:!0,icon:e.jsx(Br,{className:"w-6 h-6 text-green-600"})}),e.jsx(Lf,{title:s("common.totalClients"),value:B.toString(),change:`+${B}`,positive:!0,icon:e.jsx(Sa,{className:"w-6 h-6 text-purple-600"})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s("dashboard.financialOverview")}),e.jsxs("select",{className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{children:s("dashboard.last30Days")}),e.jsx("option",{children:s("dashboard.last90Days")}),e.jsx("option",{children:s("dashboard.thisYear")})]})]}),e.jsx(aU,{})]})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s("dashboard.calendar")}),e.jsx("button",{onClick:q,className:"text-blue-600 hover:text-blue-800 text-sm",children:s("common.viewFull")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>v(new Date(b.getFullYear(),b.getMonth()-1)),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(jC,{className:"w-4 h-4"})}),e.jsx("span",{className:"text-sm font-medium",children:b.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),e.jsx("button",{onClick:()=>v(new Date(b.getFullYear(),b.getMonth()+1)),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(NC,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[["S","M","T","W","T","F","S"].map((_,$)=>e.jsx("div",{className:"text-center text-xs font-medium text-gray-500 py-1",children:_},$)),(()=>{const _=b.getFullYear(),$=b.getMonth(),k=new Date(_,$,1).getDay(),L=new Date(_,$+1,0).getDate(),E=new Date,O=[];for(let le=0;le<k;le++)O.push(e.jsx("div",{className:"aspect-square"},`empty-${le}`));for(let le=1;le<=L;le++){const te=new Date(_,$,le),V=te.toISOString().split("T")[0],M=te.toDateString()===E.toDateString(),ie=n.some(K=>{if(!K.start_date)return!1;try{const H=new Date(K.start_date);return isNaN(H.getTime())?!1:H.toISOString().split("T")[0]===V}catch{return!1}});O.push(e.jsx("div",{className:`aspect-square flex items-center justify-center text-xs rounded-md cursor-pointer
                          ${M?"bg-orange-500 text-white font-semibold":""}
                          ${ie&&!M?"bg-blue-100 text-blue-700":""}
                          ${!M&&!ie?"hover:bg-gray-100":""}
                        `,onClick:()=>t("/calendar"),children:le},le))}return O})()]}),e.jsxs("div",{className:"mt-4 pt-4 border-t",children:[e.jsx("h3",{className:"text-xs font-semibold text-gray-700 mb-2",children:s("common.upcomingEvents")}),e.jsxs("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:[n.filter(_=>{if(!_.start_date)return!1;const $=new Date(_.start_date);return isNaN($.getTime())?!1:$>=new Date}).sort((_,$)=>{const k=new Date(_.start_date).getTime(),L=new Date($.start_date).getTime();return k-L}).slice(0,3).map(_=>{const $=new Date(_.start_date);return e.jsxs("div",{className:"text-xs flex items-start space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-1 flex-shrink-0 ${_.event_type==="meeting"?"bg-blue-500":_.event_type==="deadline"?"bg-red-500":_.event_type==="task"?"bg-green-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:_.title}),e.jsx("p",{className:"text-gray-500",children:$.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]},_.id)}),n.filter(_=>{if(!_.start_date)return!1;const $=new Date(_.start_date);return!isNaN($.getTime())&&$>=new Date}).length===0&&e.jsx("p",{className:"text-xs text-gray-500",children:s("common.noUpcomingEvents")})]})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s("dashboard.recentEstimates")}),e.jsx("button",{onClick:P,className:"text-blue-600 hover:text-blue-800",children:s("common.viewAll")})]}),e.jsx(_P,{})]}),e.jsxs("div",{className:"p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:s("dashboard.projectStatus")}),e.jsx("button",{onClick:D,className:"text-blue-600 hover:text-blue-800",children:s("common.viewAll")})]}),e.jsxs("div",{className:"space-y-4",children:[r.slice(0,3).map(_=>e.jsx(kP,{project:{id:parseInt(_.id)||0,name:_.name,client:_.client,progress:_.progress,status:_.status==="active"?"In Progress":_.status==="completed"?"Completed":_.status==="on_hold"?"On Hold":"Cancelled"}},_.id)),r.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:s("dashboard.noProjectsYet")})]})]})]})]})},uU=({trades:s,selectedTrade:t,onSelectTrade:r,activeTab:a})=>{const{t:n}=fr(),i=Zt(),o=["deck","roofing","concrete","siding","paint","flooring","tile","drywall","fencing","fence","pavers","veneer","hvac","electrical","gutter","foundation","retaining-wall","retaining_walls","doors-windows","doors_windows","plumbing","framing","junk-removal","junk_removal","excavation"],l=s.reduce((m,h)=>(m[h.category]||(m[h.category]=[]),m[h.category].push(h),m),{}),d=(m,h)=>{m.stopPropagation();const f={retaining_walls:"retaining-wall",doors_windows:"doors-windows",junk_removal:"junk-removal",fence:"fencing"}[h]||h;i(`/pricing/configure/${f}`)},u=m=>o.includes(m);return e.jsx("div",{className:"space-y-4",children:Object.entries(l).map(([m,h])=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:m}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:h.map(x=>e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(x),className:`w-full flex flex-col items-center justify-center p-3 border rounded-md transition-colors ${t?.id===x.id?"bg-blue-50 border-blue-500 text-blue-700":"border-gray-300 hover:bg-gray-50 text-gray-700"}`,children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center mb-1",children:x.icon}),e.jsx("span",{className:"text-xs font-medium text-center",children:n(x.name)})]}),a==="custom"&&u(x.id)&&e.jsx("button",{onClick:f=>d(f,x.id),className:"absolute top-1 right-1 p-1 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:border-blue-500 transition-colors shadow-sm",title:"Configure Calculator",children:e.jsx(JE,{className:"w-3 h-3 text-gray-600"})})]},x.id))})]},m))})},Bd="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201092%201092'%3e%3c!--%20Hard%20Hat%20--%3e%3ccircle%20cx='546'%20cy='336'%20r='230'%20fill='%23FF5722'/%3e%3crect%20x='477'%20y='90'%20width='138'%20height='246'%20fill='%23D84315'/%3e%3crect%20x='273'%20y='341'%20width='546'%20height='69'%20rx='10'%20fill='%23FF5722'/%3e%3c!--%20Face%20--%3e%3ccircle%20cx='546'%20cy='560'%20r='210'%20fill='%23FFD54F'/%3e%3c!--%20Ears%20--%3e%3cellipse%20cx='330'%20cy='500'%20rx='35'%20ry='55'%20fill='%23FFD54F'/%3e%3cellipse%20cx='762'%20cy='500'%20rx='35'%20ry='55'%20fill='%23FFD54F'/%3e%3c!--%20Eyes%20--%3e%3ccircle%20cx='455'%20cy='480'%20r='25'%20fill='%235D4037'/%3e%3ccircle%20cx='637'%20cy='480'%20r='25'%20fill='%235D4037'/%3e%3c!--%20Neck%20--%3e%3crect%20x='478'%20y='690'%20width='136'%20height='92'%20fill='%23FFA726'/%3e%3c!--%20Body/Overalls%20--%3e%3cpath%20d='M%20182,752%20Q%20182,900%20318,1000%20L%20318,900%20L%20364,900%20L%20364,982%20L%20728,982%20L%20728,900%20L%20774,900%20L%20774,1000%20Q%20910,900%20910,752%20Z'%20fill='%2300897B'/%3e%3cpath%20d='M%20318,752%20L%20318,900%20L%20364,900%20L%20364,752%20Z'%20fill='%23FFB300'/%3e%3cpath%20d='M%20728,752%20L%20728,900%20L%20774,900%20L%20774,752%20Z'%20fill='%23FFB300'/%3e%3crect%20x='318'%20y='900'%20width='46'%20height='46'%20fill='%2337474F'/%3e%3crect%20x='728'%20y='900'%20width='46'%20height='46'%20fill='%2337474F'/%3e%3crect%20x='318'%20y='982'%20width='410'%20height='46'%20fill='%23FFB300'/%3e%3c/svg%3e",AU=s=>/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s),kd={async saveEstimate(s){try{if(!s.id||!AU(s.id))throw new Error("Invalid or missing estimate ID");const{data:{user:t}}=await _e.auth.getUser();if(!t?.id)throw new Error("User not authenticated");const r={id:s.id,title:s.title,client_name:s.clientName||(typeof s.clientId=="string"&&!s.clientId.includes("-")?s.clientId:null)||null,project_name:s.projectName||(typeof s.projectId=="string"&&!s.projectId.includes("-")?s.projectId:null)||null,project_id:s.projectId||null,status:s.status||"draft",subtotal:s.subtotal||0,tax_rate:s.taxRate||0,tax_amount:s.taxAmount||0,total:s.total||0,notes:s.notes||null,terms:s.terms||null,expires_at:s.expiresAt||null,items:s.items||[],calculator_type:s.calculatorType||null,calculator_data:s.calculatorData||null,user_id:t.id,updated_at:new Date().toISOString()};console.log("Saving estimate with data:",r);const{data:a,error:n}=await _e.from("estimates").select("id").eq("id",s.id).single();n&&n.code!=="PGRST116"&&console.error("Error checking for existing estimate:",n);let i;if(a){console.log("Updating existing estimate...");const{data:o,error:l}=await _e.from("estimates").update(r).eq("id",s.id).select().single();if(l)throw console.error("Update error:",l),l;i=o,console.log("Estimate updated successfully:",i)}else{const o={...r};delete o.updated_at,console.log("Inserting new estimate...");const{data:l,error:d}=await _e.from("estimates").insert(o).select().single();if(d)throw console.error("Insert error:",d),d;i=l,console.log("Estimate inserted successfully:",i)}return{success:!0,data:i}}catch(t){return console.error("Error saving estimate:",t),{success:!1,error:t}}},async getEstimate(s){try{const{data:t,error:r}=await _e.from("estimates").select("*").eq("id",s).single();if(r)throw r;return t?{success:!0,data:{id:t.id,title:t.title,clientName:t.client_name,projectName:t.project_name,projectId:t.project_id,status:t.status,createdAt:t.created_at,expiresAt:t.expires_at,subtotal:t.subtotal,taxRate:t.tax_rate,taxAmount:t.tax_amount,total:t.total,notes:t.notes,terms:t.terms,items:t.items||[],convertedToInvoice:t.converted_to_invoice||!1,invoiceId:t.invoice_id||void 0,calculatorType:t.calculator_type||void 0,calculatorData:t.calculator_data||void 0}}:{success:!1,error:new Error("Estimate not found")}}catch(t){return console.error("Error fetching estimate:",t),{success:!1,error:t}}},async getEstimates(){try{const{data:{user:s}}=await _e.auth.getUser();if(!s?.id)throw new Error("User not authenticated");const{data:t,error:r}=await _e.from("estimates").select("*").eq("user_id",s.id).order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:(t||[]).map(n=>({id:n.id,title:n.title,clientName:n.client_name,projectName:n.project_name,projectId:n.project_id,status:n.status,createdAt:n.created_at,expiresAt:n.expires_at,subtotal:n.subtotal,taxRate:n.tax_rate,taxAmount:n.tax_amount,total:n.total,notes:n.notes,terms:n.terms,items:n.items||[],convertedToInvoice:n.converted_to_invoice||!1,invoiceId:n.invoice_id||void 0,calculatorType:n.calculator_type||void 0,calculatorData:n.calculator_data||void 0}))}}catch(s){return console.error("Error fetching estimates:",s),{success:!1,error:s}}},async deleteEstimate(s){try{const{data:{user:t}}=await _e.auth.getUser();if(!t?.id)throw new Error("User not authenticated");const{error:r}=await _e.from("estimates").delete().eq("id",s).eq("user_id",t.id);if(r)throw r;return{success:!0}}catch(t){return console.error("Error deleting estimate:",t),{success:!1,error:t}}}},mU=({trade:s,specifications:t,onChange:r})=>{const[a,n]=p.useState(null),i=l=>{n(a===l?null:l)},o=l=>{const d=t[l.id]||"";switch(l.type){case"number":return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",id:l.id,value:d,onChange:u=>r(l.id,u.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:l.placeholder,min:l.min,max:l.max,required:l.required}),l.unit&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:e.jsx("span",{className:"text-gray-500 text-sm",children:l.unit})})]});case"select":return e.jsxs("select",{id:l.id,value:d,onChange:u=>r(l.id,u.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm",required:l.required,children:[e.jsxs("option",{value:"",children:["Select ",l.label]}),l.options?.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]});case"radio":return e.jsx("div",{className:"space-y-2",children:l.options?.map(u=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"radio",id:`${l.id}-${u.value}`,name:l.id,value:u.value,checked:d===u.value,onChange:()=>r(l.id,u.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:`${l.id}-${u.value}`,className:"ml-2 text-sm text-gray-700",children:u.label})]},u.value))});case"checkbox":return e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:l.id,checked:!!d,onChange:u=>r(l.id,u.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 rounded"}),e.jsx("label",{htmlFor:l.id,className:"ml-2 text-sm text-gray-700",children:l.checkboxLabel||l.label})]});default:return e.jsx("input",{type:"text",id:l.id,value:d,onChange:u=>r(l.id,u.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm",placeholder:l.placeholder,required:l.required})}};return e.jsxs("div",{className:"space-y-4",children:[s.requiredFields.map(l=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{htmlFor:l.id,className:"block text-sm font-medium text-gray-700",children:[l.label," ",l.required&&e.jsx("span",{className:"text-red-600",children:"*"})]}),l.helpText&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>i(l.id),className:"flex items-center text-gray-400 hover:text-gray-500",children:e.jsx(Dd,{className:"h-4 w-4"})}),a===l.id&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 p-2 bg-white rounded-md shadow-lg z-10 text-xs text-gray-600 border border-gray-200",children:l.helpText})]})]}),o(l)]},l.id)),s.optionalFields&&s.optionalFields.length>0&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:"pt-2 border-t border-gray-200 mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-3",children:"Additional Options"}),s.optionalFields.map(l=>e.jsxs("div",{className:"space-y-1 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{htmlFor:l.id,className:"block text-sm font-medium text-gray-700",children:l.label}),l.helpText&&e.jsxs("div",{className:"relative",children:[e.jsx("button",{type:"button",onClick:()=>i(l.id),className:"flex items-center text-gray-400 hover:text-gray-500",children:e.jsx(Dd,{className:"h-4 w-4"})}),a===l.id&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 p-2 bg-white rounded-md shadow-lg z-10 text-xs text-gray-600 border border-gray-200",children:l.helpText})]})]}),o(l)]},l.id))]})})]})},mS=p.createContext(void 0);function hU({children:s}){const[t,r]=p.useState(null),[a,n]=p.useState({}),[i,o]=p.useState(null),[l,d]=p.useState([]),u=f=>{d(b=>[...b,{...f,id:Date.now().toString()}])},m=(f,b)=>{const v={trade:f,results:b,timestamp:Date.now()};localStorage.setItem("pendingCalculatorImport",JSON.stringify(v))},h=()=>{try{const f=localStorage.getItem("pendingCalculatorImport");if(!f)return null;const b=JSON.parse(f),v=Date.now()-3600*1e3;return b.timestamp<v?(localStorage.removeItem("pendingCalculatorImport"),null):b}catch(f){return console.error("Error getting pending calculator import:",f),null}},x=()=>{localStorage.removeItem("pendingCalculatorImport")};return e.jsx(mS.Provider,{value:{selectedTrade:t,setSelectedTrade:r,specifications:a,setSpecifications:n,pricingResults:i,setPricingResults:o,savedEstimates:l,saveEstimate:u,saveCalculatorResults:m,getPendingCalculatorImport:h,clearPendingCalculatorImport:x},children:s})}function hS(){const s=p.useContext(mS);if(s===void 0)throw new Error("usePricing must be used within a PricingProvider");return s}const fU=({trade:s,specifications:t,calculationResults:r})=>{const{saveCalculatorResults:a}=hS(),n=Zt(),i=()=>{r&&(a(s.name,r),n("/estimates"))},o={totalPrice:14250,materials:{total:8650,items:[{name:"Pressure Treated Lumber",quantity:"350 sq ft",price:3850},{name:"Concrete for Footings",quantity:"1.5 cubic yards",price:750},{name:"Railing System",quantity:"42 linear ft",price:2100},{name:"Hardware & Fasteners",quantity:"1 set",price:450},{name:"Stain & Sealant",quantity:"4 gallons",price:320},{name:"Misc Materials",quantity:"1 lot",price:1180}]},labor:{total:5600,items:[{name:"Site Preparation",hours:6,price:450},{name:"Footing Installation",hours:8,price:640},{name:"Framing & Structure",hours:24,price:1920},{name:"Decking Installation",hours:16,price:1280},{name:"Railing Installation",hours:8,price:640},{name:"Finishing & Cleanup",hours:8,price:670}]},recommendations:[{title:"Material Supplier Options",items:[{name:"Home Depot",note:"Best price on pressure-treated lumber",link:"#"},{name:"Lowe's",note:"Quality railing systems in stock",link:"#"},{name:"Local Lumber Co.",note:"Premium material, 10% contractor discount",link:"#"}]},{title:"Potential Cost Savings",items:[{description:"Composite decking would increase durability but add $3,200 to material costs"},{description:"Simplified railing design could save $800 in materials and labor"},{description:"DIY staining could save $450 in labor costs"}]}],timeEstimate:"2-3 weeks"};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["Pricing Results: ",s.name]}),e.jsxs("div",{className:"flex gap-2",children:[r&&e.jsxs("button",{onClick:i,className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),"Import to New Estimate"]}),e.jsxs("button",{className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx(ly,{className:"w-4 h-4 mr-2"}),"Export Report"]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-lg p-4 mb-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-800 font-medium",children:"Total Estimated Price"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:["$",o.totalPrice.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Project Specifications:"}),e.jsxs("p",{className:"text-sm text-blue-600",children:[t.size||"Custom"," ",s.name," | ",t.quality||"Standard"," Quality"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("h3",{className:"flex items-center text-lg font-medium text-gray-900",children:[e.jsx(AA,{className:"w-5 h-5 mr-2 text-blue-600"}),"Materials Breakdown"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.materials.items.map((l,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 text-sm text-gray-900",children:l.name}),e.jsx("td",{className:"px-2 py-2 text-sm text-gray-500",children:l.quantity}),e.jsxs("td",{className:"px-2 py-2 text-sm text-gray-900 text-right",children:["$",l.price]})]},d))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{colSpan:2,className:"px-2 py-2 text-sm font-medium text-gray-900",children:"Materials Subtotal"}),e.jsxs("td",{className:"px-2 py-2 text-sm font-medium text-gray-900 text-right",children:["$",o.materials.total]})]})})]})})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("h3",{className:"flex items-center text-lg font-medium text-gray-900",children:[e.jsx(cy,{className:"w-5 h-5 mr-2 text-blue-600"}),"Labor Breakdown"]})}),e.jsx("div",{className:"p-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),e.jsx("th",{className:"px-2 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Hours"}),e.jsx("th",{className:"px-2 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.labor.items.map((l,d)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 text-sm text-gray-900",children:l.name}),e.jsx("td",{className:"px-2 py-2 text-sm text-gray-500",children:l.hours}),e.jsxs("td",{className:"px-2 py-2 text-sm text-gray-900 text-right",children:["$",l.price]})]},d))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{colSpan:2,className:"px-2 py-2 text-sm font-medium text-gray-900",children:"Labor Subtotal"}),e.jsxs("td",{className:"px-2 py-2 text-sm font-medium text-gray-900 text-right",children:["$",o.labor.total]})]})})]})})]})]}),e.jsxs("div",{className:"mt-6 bg-white border border-gray-200 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:e.jsxs("h3",{className:"flex items-center text-lg font-medium text-gray-900",children:[e.jsx(Dd,{className:"w-5 h-5 mr-2 text-blue-600"}),"Additional Information"]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-3 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-1",children:[e.jsx(no,{className:"w-4 h-4 mr-2 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Time Estimate"})]}),e.jsx("p",{className:"text-gray-900 font-medium ml-6",children:o.timeEstimate})]}),e.jsxs("div",{className:"p-3 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-1",children:[e.jsx(Br,{className:"w-4 h-4 mr-2 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Price Confidence"})]}),e.jsxs("div",{className:"flex items-center ml-6",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-2 bg-green-500 rounded-full",style:{width:"85%"}})}),e.jsx("span",{className:"ml-2 text-sm font-medium text-green-600",children:"85%"})]})]}),e.jsxs("div",{className:"p-3 border border-gray-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center text-gray-700 mb-1",children:[e.jsx(e6,{className:"w-4 h-4 mr-2 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Material Availability"})]}),e.jsx("p",{className:"text-green-600 font-medium ml-6",children:"All materials in stock"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:o.recommendations.map((l,d)=>e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:l.title}),e.jsx("ul",{className:"space-y-2",children:l.items.map((u,m)=>e.jsxs("li",{className:"text-sm pl-5 relative",children:[e.jsx("span",{className:"absolute left-0 top-1.5 w-1.5 h-1.5 rounded-full bg-blue-500"}),"name"in u?e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:u.name}),u.note&&e.jsxs("span",{className:"text-gray-600",children:[" - ",u.note]})]}):e.jsx("span",{className:"text-gray-700",children:u.description})]},m))})]},d))}),e.jsx("div",{className:"mt-6 p-3 bg-amber-50 border border-amber-200 rounded-md",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Dd,{className:"w-5 h-5 mr-2 text-amber-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-800 font-medium",children:"Permit Required"}),e.jsx("p",{className:"text-sm text-amber-700",children:"This project will likely require a building permit. Check with your local building department for specific requirements."})]})]})})]})]})]})},aA=[{id:"deck",name:"Deck Calculator",translationKey:"trades.deck",icon:Sd,description:"Custom deck building and installation",category:"Exterior",route:"/pricing?calculator=deck"},{id:"foundation",name:"Foundation Calculator",translationKey:"trades.foundation",icon:RE,description:"Foundation construction and repair",category:"Construction",route:"/pricing?calculator=foundation"},{id:"roofing",name:"Roofing Calculator",translationKey:"trades.roofing",icon:my,description:"Roof installation and replacement",category:"Exterior",route:"/pricing?calculator=roofing"},{id:"concrete",name:"Concrete Calculator",translationKey:"trades.concrete",icon:PC,description:"Concrete slabs, driveways, and patios",category:"Exterior",route:"/pricing?calculator=concrete"},{id:"siding",name:"Siding Calculator",translationKey:"trades.siding",icon:uy,description:"Siding installation and replacement",category:"Exterior",route:"/pricing?calculator=siding"},{id:"pavers",name:"Pavers Calculator",translationKey:"trades.pavers",icon:Lw,description:"Paver patios, walkways, and driveways",category:"Exterior",route:"/pricing?calculator=pavers"},{id:"drywall",name:"Drywall Calculator",translationKey:"trades.drywall",icon:Vx,description:"Drywall installation and repair",category:"Interior",route:"/pricing?calculator=drywall"},{id:"paint",name:"Paint Calculator",translationKey:"trades.paint",icon:UC,description:"Interior and exterior painting",category:"Interior",route:"/pricing?calculator=paint"},{id:"flooring",name:"Flooring Calculator",translationKey:"trades.flooring",icon:EC,description:"Flooring installation (hardwood, tile, carpet, vinyl)",category:"Interior",route:"/pricing?calculator=flooring"},{id:"tile",name:"Tile Calculator",translationKey:"trades.tile",icon:Lw,description:"Tile installation for floors, walls, and showers",category:"Interior",route:"/pricing?calculator=tile"},{id:"framing",name:"Framing Calculator",translationKey:"trades.framing",icon:cy,description:"Structural framing for new construction",category:"Construction",route:"/pricing?calculator=framing"},{id:"retaining_walls",name:"Retaining Walls Calculator",translationKey:"trades.retainingWalls",icon:SC,description:"Retaining wall construction",category:"Exterior",route:"/pricing?calculator=retaining_walls"},{id:"excavation",name:"Excavation Calculator",translationKey:"trades.excavation",icon:Sd,description:"Site excavation and grading",category:"Site Work",route:"/pricing?calculator=excavation"},{id:"electrical",name:"Electrical Calculator",translationKey:"trades.electrical",icon:op,description:"Electrical installation and repairs",category:"Systems",route:"/pricing?calculator=electrical"},{id:"hvac",name:"HVAC Calculator",translationKey:"trades.hvac",icon:sA,description:"Heating, ventilation, and air conditioning",category:"Systems",route:"/pricing?calculator=hvac"},{id:"plumbing",name:"Plumbing Calculator",translationKey:"trades.plumbing",icon:FC,description:"Plumbing installation and repairs",category:"Systems",route:"/pricing?calculator=plumbing"},{id:"doors_windows",name:"Doors & Windows Calculator",translationKey:"trades.doorsWindows",icon:kC,description:"Door and window installation",category:"Exterior",route:"/pricing?calculator=doors_windows"},{id:"fence",name:"Fencing Calculator",translationKey:"trades.fence",icon:Vx,description:"Fence installation and replacement",category:"Exterior",route:"/pricing?calculator=fence"},{id:"gutter",name:"Gutters Calculator",translationKey:"trades.gutters",icon:CC,description:"Gutter installation and replacement",category:"Exterior",route:"/pricing?calculator=gutter"},{id:"junk_removal",name:"Junk Removal Calculator",translationKey:"trades.junkRemoval",icon:nr,description:"Junk and debris removal",category:"Site Work",route:"/pricing?calculator=junk_removal"},{id:"veneer",name:"Veneer Calculator",translationKey:"trades.veneer",icon:Tg,description:"Veneer installation for walls and facades",category:"Exterior",route:"/pricing?calculator=veneer"}],gU=()=>Array.from(new Set(aA.map(s=>s.category))),fS=()=>{const{user:s}=ka(),[t,r]=p.useState([]),[a,n]=p.useState(!0),[i,o]=p.useState(null),l=async()=>{if(!s){n(!1);return}try{n(!0),o(null);const{data:f,error:b}=await _e.from("user_calculators").select("*").eq("user_id",s.id).order("display_order",{ascending:!0});if(b)throw b;if(!f||f.length===0){r(aA);return}const v=f.map(j=>aA.find(S=>S.id===j.calculator_id)).filter(j=>j!==void 0);r(v)}catch(f){console.error("Error fetching calculators:",f),o(f instanceof Error?f.message:"Failed to load calculators"),r(aA)}finally{n(!1)}},d=async f=>{if(!s)return console.error(" No user logged in"),{success:!1,error:"No user logged in"};console.log(" Saving calculators for user:",s.id),console.log(" Calculator IDs to save:",f);try{o(null),console.log(" Deleting existing calculators...");const{error:b}=await _e.from("user_calculators").delete().eq("user_id",s.id);if(b)throw console.error(" Delete error:",b),b;const v=f.map((S,C)=>({user_id:s.id,calculator_id:S,display_order:C}));if(console.log(" Inserting new calculators:",v),v.length>0){const{error:S,data:C}=await _e.from("user_calculators").insert(v).select();if(S)throw console.error(" Insert error:",S),S;console.log(" Inserted data:",C)}const j=f.map(S=>aA.find(C=>C.id===S)).filter(S=>S!==void 0);return r(j),console.log(" Successfully saved",j.length,"calculators"),{success:!0}}catch(b){return console.error(" Error saving calculators:",b),o(b instanceof Error?b.message:"Failed to save calculators"),{success:!1,error:b}}},u=async f=>{const b=t.map(v=>v.id);b.includes(f)||await d([...b,f])},m=async f=>{const v=t.map(j=>j.id).filter(j=>j!==f);await d(v)},h=async f=>{await d(f)},x=f=>t.some(b=>b.id===f);return p.useEffect(()=>{l()},[s?.id]),{selectedCalculators:t,loading:a,error:i,saveCalculators:d,addCalculator:u,removeCalculator:m,reorderCalculators:h,isCalculatorSelected:x,refreshCalculators:l}},pU=({calculator:s,isSelected:t,onToggle:r})=>{const{t:a}=fr(),n=s.icon;return e.jsxs("button",{onClick:()=>r(s.id),className:`relative p-4 rounded-lg border-2 transition-all duration-200 text-left w-full ${t?"border-blue-500 bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-sm"}`,children:[e.jsx("div",{className:`absolute top-2 right-2 w-6 h-6 rounded-full flex items-center justify-center transition-all ${t?"bg-blue-600 scale-100":"bg-gray-200 scale-0"}`,children:e.jsx(zt,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mb-3 ${t?"bg-blue-600":"bg-gray-100"}`,children:e.jsx(n,{className:`w-6 h-6 ${t?"text-white":"text-gray-600"}`})}),e.jsx("h3",{className:`font-semibold mb-1 text-sm ${t?"text-blue-900":"text-gray-900"}`,children:a(s.translationKey)}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:s.description}),e.jsx("span",{className:`inline-block mt-2 px-2 py-0.5 rounded-full text-xs font-medium ${t?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"}`,children:s.category})]})},xU=({isOpen:s,onClose:t})=>{const{t:r}=fr(),{selectedCalculators:a,saveCalculators:n}=fS(),[i,o]=p.useState(""),[l,d]=p.useState("All"),[u,m]=p.useState([]),[h,x]=p.useState(!1),[f,b]=p.useState(!1),v=["All",...gU()];p.useEffect(()=>{s&&(m(a.map(Q=>Q.id)),b(!1))},[s,a]);const j=aA.filter(Q=>{const q=Q.name.toLowerCase().includes(i.toLowerCase())||Q.description.toLowerCase().includes(i.toLowerCase()),P=l==="All"||Q.category===l;return q&&P}),S=Q=>{m(q=>{const P=q.includes(Q)?q.filter(D=>D!==Q):[...q,Q];return b(!0),P})},C=async()=>{x(!0),console.log("Attempting to save calculators:",u),console.log("Number of calculators selected:",u.length);try{const Q=await n(u);console.log("Save result:",Q),Q?.success?(console.log(" Calculators saved successfully"),b(!1),setTimeout(()=>{t()},500)):(console.error(" Failed to save calculators:",Q),alert(`Failed to save calculators: ${Q?.error||"Unknown error"}`))}catch(Q){console.error(" Error saving calculators:",Q),alert(`Error saving calculators: ${Q instanceof Error?Q.message:"Unknown error"}`)}finally{x(!1)}},B=()=>{const Q=j.map(q=>q.id);m(Q),b(!0)},F=()=>{m([]),b(!0)};return s?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:t}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(dn,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Manage Calculators"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Select which calculators appear in your sidebar"})]})]}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(xt,{className:"w-6 h-6 text-gray-500"})})]}),e.jsxs("div",{className:"p-4 border-b border-gray-200 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Mo,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search calculators...",value:i,onChange:Q=>o(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:v.map(Q=>e.jsx("button",{onClick:()=>d(Q),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${l===Q?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:Q},Q))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:B,className:"px-3 py-1.5 text-sm border border-blue-600 text-blue-600 rounded-lg hover:bg-blue-50 transition-colors",children:"Select All"}),e.jsx("button",{onClick:F,className:"px-3 py-1.5 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Clear All"})]})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:u.length})," ","calculator",u.length!==1?"s":""," selected"]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No calculators found"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:j.map(Q=>e.jsx(pU,{calculator:Q,isSelected:u.includes(Q.id),onToggle:S},Q.id))})}),e.jsxs("div",{className:"p-6 border-t border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600",children:f&&e.jsx("span",{className:"text-amber-600 font-medium",children:"You have unsaved changes"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:t,disabled:h,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:C,disabled:h||!f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-4 h-4"}),"Save Changes"]})})]})]})]})})]}):null},bU=({isOpen:s,onClose:t,onSave:r,calculatorType:a,estimateData:n,resultsData:i})=>{const[o,l]=p.useState(""),[d,u]=p.useState(""),[m,h]=p.useState([]),[x,f]=p.useState(!1),[b,v]=p.useState(!1),[j,S]=p.useState(null),[C,B]=p.useState(!1);p.useEffect(()=>{s&&(F(),l(""),u(""),S(null),B(!1))},[s]);const F=async()=>{v(!0);try{const{data:P,error:D}=await _e.from("clients").select("id, name").order("name");if(D)throw D;h(P||[])}catch(P){console.error("Error fetching clients:",P),S("Failed to load clients")}finally{v(!1)}},Q=async()=>{if(console.log(" Modal Save button clicked!"),console.log("Estimate Name:",o),!o.trim()){S("Please enter an estimate name");return}f(!0),S(null);try{console.log(" Calling onSave callback..."),await r(o.trim(),d===""?null:d),console.log(" onSave completed successfully"),B(!0),setTimeout(()=>{t()},1500)}catch(P){console.error(" Error in modal save:",P),S(P instanceof Error?P.message:"Failed to save estimate")}finally{f(!1)}},q=P=>{P.key==="Enter"&&!x?Q():P.key==="Escape"&&t()};return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Save Calculator Estimate"}),e.jsx("button",{onClick:t,disabled:x,className:"text-gray-400 hover:text-gray-600 transition-colors disabled:opacity-50",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[C&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center",children:[e.jsx(Qn,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"Estimate saved successfully!"})]}),j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:j}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"estimateName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Estimate Name *"}),e.jsx("input",{id:"estimateName",type:"text",value:o,onChange:P=>l(P.target.value),onKeyPress:q,disabled:x,placeholder:"e.g., Kitchen Renovation Q1 2024",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"clientSelect",className:"block text-sm font-medium text-gray-700 mb-2",children:"Client"}),b?e.jsxs("div",{className:"flex items-center justify-center py-2",children:[e.jsx(hr,{className:"w-5 h-5 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading clients..."})]}):e.jsxs("select",{id:"clientSelect",value:d,onChange:P=>u(P.target.value),disabled:x,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"General (No Client)"}),m.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optional: Associate this estimate with a specific client"})]}),e.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Calculator Type:"})," ",e.jsx("span",{className:"capitalize",children:a.replace(/_/g," ")})]})})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:t,disabled:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:Q,disabled:x||!o.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:x?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-4 h-4 mr-2"}),"Save Estimate"]})})]})]})}):null},yU=({calculatorType:s,onLoad:t})=>{const[r,a]=p.useState(!1),[n,i]=p.useState([]),[o,l]=p.useState(!1),[d,u]=p.useState(null),m=p.useRef(null);p.useEffect(()=>{r&&h()},[r,s]),p.useEffect(()=>{const v=j=>{m.current&&!m.current.contains(j.target)&&a(!1)};return r&&document.addEventListener("mousedown",v),()=>{document.removeEventListener("mousedown",v)}},[r]);const h=async()=>{l(!0);try{const{data:{user:v}}=await _e.auth.getUser();if(!v)throw console.error("No authenticated user"),new Error("Not authenticated");console.log("Fetching estimates for calculator type:",s),console.log("User ID:",v.id);const{data:j,error:S}=await _e.from("calculator_estimates").select("*").eq("user_id",v.id).eq("calculator_type",s).order("created_at",{ascending:!1});if(S)throw console.error("Supabase error:",S),S;console.log("Fetched estimates:",j);const C=(j||[]).map(B=>({...B,client_name:null}));i(C)}catch(v){console.error("Error fetching estimates:",v),alert("Failed to load estimates. Check console for details.")}finally{l(!1)}},x=v=>{t(v.estimate_data,v.results_data),a(!1)},f=async(v,j)=>{if(v.stopPropagation(),!!confirm("Are you sure you want to delete this estimate?")){u(j);try{const{error:S}=await _e.from("calculator_estimates").delete().eq("id",j);if(S)throw S;i(C=>C.filter(B=>B.id!==j))}catch(S){console.error("Error deleting estimate:",S),alert("Failed to delete estimate")}finally{u(null)}}},b=v=>{const j=new Date(v),S=new Date,C=S.getTime()-j.getTime(),B=Math.floor(C/(1e3*60*60*24));return B===0?"Today":B===1?"Yesterday":B<7?`${B} days ago`:j.toLocaleDateString("en-US",{month:"short",day:"numeric",year:j.getFullYear()!==S.getFullYear()?"numeric":void 0})};return e.jsxs("div",{className:"relative",ref:m,children:[e.jsxs("button",{onClick:()=>a(!r),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center",children:[e.jsx(ra,{className:"w-4 h-4 mr-2"}),"Load Estimate",e.jsx(Td,{className:`w-4 h-4 ml-2 transition-transform ${r?"rotate-180":""}`})]}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-96 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200 bg-gray-50",children:e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Saved Estimates"})}),e.jsx("div",{className:"overflow-y-auto flex-1",children:o?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(hr,{className:"w-6 h-6 animate-spin text-gray-400"}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"Loading estimates..."})]}):n.length===0?e.jsxs("div",{className:"px-4 py-8 text-center",children:[e.jsx(ra,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No saved estimates"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Save your first estimate to see it here"})]}):e.jsx("div",{className:"py-2",children:n.map(v=>e.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors border-b border-gray-100 last:border-b-0",onClick:()=>x(v),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 truncate",children:v.estimate_name}),e.jsxs("div",{className:"mt-1 space-y-1",children:[v.client_name&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:v.client_name})]}),!v.client_name&&e.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[e.jsx(ns,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{children:"General"})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsx(Fr,{className:"w-3 h-3 mr-1 flex-shrink-0"}),e.jsx("span",{children:b(v.created_at)})]})]})]}),e.jsx("button",{onClick:j=>f(j,v.id),disabled:d===v.id,className:"ml-2 p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete estimate",children:d===v.id?e.jsx(hr,{className:"w-4 h-4 animate-spin"}):e.jsx(nr,{className:"w-4 h-4"})})]})},v.id))})})]})]})},Ks=({calculatorType:s,currentData:t,onLoad:r,resultsData:a,title:n,description:i})=>{const[o,l]=p.useState(!1),[d,u]=p.useState(null),m=async(h,x)=>{u(null);try{console.log(" Starting save operation..."),console.log("Calculator Type:",s),console.log("Estimate Name:",h),console.log("Current Data:",t),console.log("Results Data:",a);const{data:{user:f}}=await _e.auth.getUser();if(console.log("User:",f?.id),!f)throw new Error("Not authenticated");const b={user_id:f.id,estimate_name:h,calculator_type:s,estimate_data:t,results_data:a||{},client_id:x};console.log("Inserting data:",b);const{data:v,error:j}=await _e.from("calculator_estimates").insert(b).select();if(j)throw console.error(" Supabase error:",j),j;console.log(" Save successful! Data:",v)}catch(f){throw console.error(" Error saving estimate:",f),u(f instanceof Error?f.message:"Failed to save estimate"),f}};return e.jsxs("div",{className:"bg-white border-b border-gray-200",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[n&&e.jsx("h1",{className:"text-2xl font-bold text-gray-900 truncate",children:n}),i&&e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yU,{calculatorType:s,onLoad:r}),e.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[e.jsx(Qn,{className:"w-4 h-4 mr-2"}),"Save Estimate"]})]})]}),d&&e.jsx("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:d})]}),e.jsx(bU,{isOpen:o,onClose:()=>l(!1),onSave:m,calculatorType:s,estimateData:t,resultsData:a})]})},gS=p.createContext(void 0),vU=({children:s})=>{const[t,r]=p.useState("default");return e.jsx(gS.Provider,{value:{activeTab:t,setActiveTab:r},children:s})},sa=()=>{const s=p.useContext(gS);if(s===void 0)throw new Error("useCalculatorTab must be used within a CalculatorTabProvider");return s},Ve={async getOrCreateConfig(s){try{const{data:{user:t}}=await _e.auth.getUser();if(!t)return{success:!1,error:"User not authenticated"};const{data:r,error:a}=await _e.from("custom_calculator_configs").select("*").eq("user_id",t.id).eq("calculator_type",s).maybeSingle();if(a)return{success:!1,error:a.message};if(r)return{success:!0,data:r};const{data:n,error:i}=await _e.from("custom_calculator_configs").insert({user_id:t.id,calculator_type:s,is_configured:!1}).select().single();if(i){if(i.code==="23505"){const{data:o,error:l}=await _e.from("custom_calculator_configs").select("*").eq("user_id",t.id).eq("calculator_type",s).single();return l?{success:!1,error:l.message}:{success:!0,data:o}}return{success:!1,error:i.message}}return{success:!0,data:n}}catch(t){return{success:!1,error:t.message}}},async getMaterials(s){try{const{data:t,error:r}=await _e.from("custom_materials").select("*").eq("config_id",s).order("sort_order",{ascending:!0});return r?{success:!1,error:r.message}:{success:!0,data:t||[]}}catch(t){return{success:!1,error:t.message}}},async addMaterial(s,t){try{const{data:r,error:a}=await _e.from("custom_materials").insert({config_id:s,...t,is_archived:!1,sort_order:0}).select().single();return a?{success:!1,error:a.message}:(await this.markAsConfigured(s),{success:!0,data:r})}catch(r){return{success:!1,error:r.message}}},async updateMaterial(s,t){try{const{error:r}=await _e.from("custom_materials").update({...t,updated_at:new Date().toISOString()}).eq("id",s);return r?{success:!1,error:r.message}:{success:!0}}catch(r){return{success:!1,error:r.message}}},async archiveMaterial(s){return this.updateMaterial(s,{is_archived:!0})},async unarchiveMaterial(s){return this.updateMaterial(s,{is_archived:!1})},async deleteMaterial(s){try{const{error:t}=await _e.from("custom_materials").delete().eq("id",s);return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:t.message}}},async getPricingOverrides(s){try{const{data:t,error:r}=await _e.from("custom_pricing").select("*").eq("config_id",s);return r?{success:!1,error:r.message}:{success:!0,data:t||[]}}catch(t){return{success:!1,error:t.message}}},async updatePricing(s,t,r){try{const{error:a}=await _e.from("custom_pricing").upsert({config_id:s,component_key:t,value:r},{onConflict:"config_id,component_key"});return a?{success:!1,error:a.message}:{success:!0}}catch(a){return{success:!1,error:a.message}}},async markAsConfigured(s){try{const{error:t}=await _e.from("custom_calculator_configs").update({is_configured:!0,updated_at:new Date().toISOString()}).eq("id",s);return t?{success:!1,error:t.message}:{success:!0}}catch(t){return{success:!1,error:t.message}}},async updatePricingOverrides(s,t){try{const r=t.map(n=>({config_id:s,component_key:n.component_key,value:n.value})),{error:a}=await _e.from("custom_pricing").upsert(r,{onConflict:"config_id,component_key"});return a?{success:!1,error:a.message}:{success:!0}}catch(r){return{success:!1,error:r.message}}},async resetConfiguration(s){try{const{error:t}=await _e.from("custom_materials").delete().eq("config_id",s);if(t)return{success:!1,error:t.message};const{error:r}=await _e.from("custom_pricing").delete().eq("config_id",s);if(r)return{success:!1,error:r.message};const{error:a}=await _e.from("custom_calculator_configs").update({is_configured:!1,updated_at:new Date().toISOString()}).eq("id",s);return a?{success:!1,error:a.message}:{success:!0}}catch(t){return{success:!1,error:t.message}}},async getMaterialsByCategory(s,t){try{const{data:r,error:a}=await _e.from("custom_materials").select("*").eq("config_id",s).eq("category",t).eq("is_archived",!1).order("sort_order",{ascending:!0});return a?{success:!1,error:a.message}:{success:!0,data:r||[]}}catch(r){return{success:!1,error:r.message}}},async findMaterialByName(s,t,r){try{let a=_e.from("custom_materials").select("*").eq("config_id",s).ilike("name",t).eq("is_archived",!1);r&&(a=a.eq("category",r));const{data:n,error:i}=await a.maybeSingle();return i?{success:!1,error:i.message}:{success:!0,data:n||void 0}}catch(a){return{success:!1,error:a.message}}},parseUnitSpec(s){if(!s)return null;const t=s.match(/(\d+(?:\.\d+)?)/);return t?parseFloat(t[1]):null},getMaterialValue(s){return{price:s.price,unitValue:this.parseUnitSpec(s.metadata?.unitSpec),unitSpec:s.metadata?.unitSpec||null}}},Aa=(s,t)=>{const[r,a]=p.useState(null),[n,i]=p.useState([]),[o,l]=p.useState({}),[d,u]=p.useState(!1),[m,h]=p.useState(null);return p.useEffect(()=>{if(!t){a(null),i([]),l({});return}(async()=>{u(!0),h(null);try{const f=await Ve.getOrCreateConfig(s);if(!f.success||!f.data){h(f.error||"Failed to load config");return}if(a(f.data),f.data.is_configured){const b=await Ve.getMaterials(f.data.id);b.success&&b.data&&i(b.data.filter(j=>!j.is_archived));const v=await Ve.getPricingOverrides(f.data.id);if(v.success&&v.data){const j=v.data.reduce((S,C)=>(S[C.component_key]=C.value,S),{});l(j)}}}catch(f){h(f.message||"Failed to load custom calculator")}finally{u(!1)}})()},[s,t]),{config:r,materials:n,pricing:o,loading:d,error:m,isConfigured:r?.is_configured||!1}},ma=s=>{const[t,r]=p.useState([]),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(null);p.useEffect(()=>{(async()=>{try{o(!0),d(null);const v=await Ve.getOrCreateConfig(s);if(!v.success||!v.data){d(v.error||"Failed to load configuration");return}n(v.data.id);const j=await Ve.getMaterials(v.data.id);if(!j.success){d(j.error||"Failed to load materials");return}r(j.data||[])}catch(v){d(v.message||"An unexpected error occurred")}finally{o(!1)}})()},[s]);const u=(b,v,j)=>{const S=t.find(C=>C.name.toLowerCase()===b.toLowerCase()&&(!j||C.category===j)&&!C.is_archived);return S?S.price:v},m=(b,v,j)=>{const S=t.find(C=>C.name.toLowerCase()===b.toLowerCase()&&(!j||C.category===j)&&!C.is_archived);if(S?.metadata?.unitSpec){const C=Ve.parseUnitSpec(S.metadata.unitSpec);return C!==null?C:v}return v};return{customMaterials:t,configId:a,loading:i,error:l,getCustomPrice:u,getCustomUnitValue:m,getCustomMaterialValues:(b,v,j,S)=>({price:u(b,v,S),unitValue:j!==void 0?m(b,j,S):void 0}),findMaterial:(b,v)=>t.find(j=>j.name.toLowerCase()===b.toLowerCase()&&(!v||j.category===v)&&!j.is_archived),refresh:async()=>{if(!a)return;const b=await Ve.getMaterials(a);b.success&&b.data&&r(b.data)}}},wU=({onCalculate:s,onSaveSuccess:t})=>{const{t:r}=fr(),{activeTab:a}=sa(),{pricing:n,loading:i,isConfigured:o}=Aa("concrete",a==="custom"),{getCustomPrice:l}=ma("concrete"),[d,u]=p.useState("flatwork"),[m,h]=p.useState(""),[x,f]=p.useState(""),[b,v]=p.useState(""),[j,S]=p.useState(""),[C,B]=p.useState("imperial"),[F,Q]=p.useState("none"),[q,P]=p.useState(12),[D,_]=p.useState("6x6"),[$,k]=p.useState("truck"),[L,E]=p.useState(!1),[O,le]=p.useState(""),[te,V]=p.useState(!1),[M,ie]=p.useState(""),[K,H]=p.useState(null),I={bagPrice:C==="imperial"?l("Concrete Bag",6.98,"concrete"):l("Concrete Bag",7.5,"concrete"),truckPricePerYard:l("3000 PSI Concrete",185,"concrete"),deliveryFee:l("Delivery Fee",150,"concrete"),rebarPrice:C==="imperial"?l("#4 Rebar",8.98,"reinforcement"):l("#4 Rebar",9.5,"reinforcement"),meshPrice6x6:l("Wire Mesh",12.98,"reinforcement"),meshPrice4x4:l("Wire Mesh 4x4",16.98,"reinforcement")},ee=p.useMemo(()=>a==="custom"&&o&&n?{bagPrice:n.concrete_bag_price||I.bagPrice,truckPricePerYard:n.concrete_truck_per_yard||I.truckPricePerYard,deliveryFee:n.concrete_delivery_fee||I.deliveryFee,rebarPrice:n.rebar_price||I.rebarPrice,meshPrice6x6:n.mesh_price_6x6||I.meshPrice6x6,meshPrice4x4:n.mesh_price_4x4||I.meshPrice4x4}:I,[a,o,n,C]),se=()=>({concreteType:d,length:m,width:x,height:b,thickness:j,unit:C,reinforcement:F,rebarSpacing:q,meshType:D,deliveryMethod:$,addColor:L,colorPricePerYard:O,addFiber:te,fiberPricePerYard:M}),de=ne=>{u(ne.concreteType||"flatwork"),h(ne.length??""),f(ne.width??""),v(ne.height??""),S(ne.thickness??""),B(ne.unit||"imperial"),Q(ne.reinforcement||"none"),P(ne.rebarSpacing??12),_(ne.meshType||"6x6"),k(ne.deliveryMethod||"truck"),E(ne.addColor??!1),le(ne.colorPricePerYard??""),V(ne.addFiber??!1),ie(ne.fiberPricePerYard??"")},re=()=>{if(typeof m=="number"&&(d==="flatwork"?typeof x=="number"&&typeof b=="number":typeof b=="number"&&typeof j=="number")){let ne,Y,X,ye;C==="imperial"?(ne=d==="wall"?m*b*(j/12)/27:m*x*(b/12)/27,Y=r("calculators.concrete.cubicYards"),X=Math.ceil(ne*40),ye=r("calculators.concrete.lbBags")):(ne=d==="wall"?m*b*(j/100):m*x*(b/100),Y=r("calculators.concrete.cubicMeters"),X=Math.ceil(ne*90),ye=r("calculators.concrete.kgBags"));const pe=[{label:r("calculators.concrete.concreteVolume"),value:Number(ne.toFixed(2)),unit:Y}];if($==="bags"){const Ce=X*(ee?.bagPrice||I.bagPrice);pe.push({label:r("calculators.concrete.bagsOfConcrete"),value:X,unit:ye,cost:Ce})}else{const je=ee?.truckPricePerYard||I.truckPricePerYard,ce=ne<1?ee?.deliveryFee||I.deliveryFee:0;let Te=Math.max(ne,1)*je+ce;if(L&&typeof O=="number"){const We=Math.max(ne,1)*O;Te+=We,pe.push({label:"Concrete Color Additive",value:Math.max(ne,1),unit:Y,cost:We})}if(te&&typeof M=="number"){const We=Math.max(ne,1)*M;Te+=We,pe.push({label:"Fiber Reinforcement Additive",value:Math.max(ne,1),unit:Y,cost:We})}pe.push({label:r("calculators.concrete.readyMix"),value:Math.max(ne,1),unit:Y,cost:Te}),ne<1&&pe.push({label:r("calculators.concrete.note"),value:1,unit:r("calculators.concrete.minimumLoad")}),ne<3&&pe.push({label:" Small Load Fee Notice",value:0,unit:"Orders under 3 cubic yards typically incur a $150-$300 small load fee. Please add this to your estimate.",isWarning:!0})}if(F==="rebar"){const Ce=C==="imperial"?q/12:q/100,je=Math.ceil(x/Ce)+1,ce=Math.ceil(m/Ce)+1,Te=m*je+x*ce,We=ee?.rebarPrice||I.rebarPrice,Le=Math.ceil(Te/20)*We;pe.push({label:r("calculators.concrete.rebarLengthNeeded"),value:Number(Te.toFixed(2)),unit:r(C==="imperial"?"calculators.concrete.feet":"calculators.concrete.meters"),cost:Le})}else if(F==="mesh"){const Ce=m*x,ce=Math.ceil(Ce/(C==="imperial"?100:9.29)),Te=D==="6x6"?ee?.meshPrice6x6||I.meshPrice6x6:ee?.meshPrice4x4||I.meshPrice4x4,We=ce*Te;pe.push({label:`${D} ${r("calculators.concrete.meshSheetsNeeded")}`,value:ce,unit:r("calculators.concrete.sheets"),cost:We})}H(pe),s(pe)}};if(a==="custom"&&i)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(dn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:r("calculators.concrete.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]});if(a==="custom"&&!o)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(dn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:r("calculators.concrete.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(dn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]});const z=typeof m=="number"&&(d==="flatwork"?typeof x=="number"&&typeof b=="number":typeof b=="number"&&typeof j=="number");return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(dn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:r("calculators.concrete.title")})]}),e.jsx(Ks,{calculatorType:"concrete",currentData:se(),resultsData:K?{results:K}:void 0,onLoad:(ne,Y)=>{de(ne),Y?.results&&H(Y.results)}}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between gap-3 mb-4",children:[e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${d==="flatwork"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("flatwork"),children:r("calculators.concrete.flatwork")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${d==="wall"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("wall"),children:r("calculators.concrete.wall")})]}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${C==="imperial"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>B("imperial"),children:r("calculators.concrete.imperial")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${C==="metric"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>B("metric"),children:r("calculators.concrete.metric")})]}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 text-sm font-medium rounded-l-lg ${$==="bags"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>k("bags"),children:r("calculators.concrete.bags")}),e.jsxs("button",{type:"button",className:`flex-1 sm:flex-none px-3 sm:px-4 py-2 text-sm font-medium rounded-r-lg ${$==="truck"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>k("truck"),children:[e.jsx("span",{className:"hidden sm:inline",children:r("calculators.concrete.readyMixTruck")}),e.jsx("span",{className:"sm:hidden",children:r("calculators.concrete.truck")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:[d==="wall"?"Total Linear Feet":r("calculators.concrete.length")," (",r(C==="imperial"?"calculators.concrete.feet":"calculators.concrete.meters"),")"]}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.01",value:m,onChange:ne=>h(ne.target.value?Number(ne.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:d==="wall"?"Total wall length":`${r("calculators.concrete.enterLength")} ${r(C==="imperial"?"calculators.concrete.feet":"calculators.concrete.meters")}`})]}),d==="flatwork"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"width",className:"block text-sm font-medium text-slate-700 mb-1",children:[r("calculators.concrete.width")," (",r(C==="imperial"?"calculators.concrete.feet":"calculators.concrete.meters"),")"]}),e.jsx("input",{type:"number",id:"width",min:"0",step:"0.01",value:x,onChange:ne=>f(ne.target.value?Number(ne.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:`${r("calculators.concrete.enterWidth")} ${r(C==="imperial"?"calculators.concrete.feet":"calculators.concrete.meters")}`})]}),d==="wall"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"height",className:"block text-sm font-medium text-slate-700 mb-1",children:["Height of Wall (",C==="imperial"?"feet":r("calculators.concrete.meters"),")"]}),e.jsx("input",{type:"number",id:"height",min:"0",step:"0.01",value:b,onChange:ne=>v(ne.target.value?Number(ne.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 8"})]}),d==="wall"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"thickness",className:"block text-sm font-medium text-slate-700 mb-1",children:["Wall Thickness (",C==="imperial"?r("calculators.concrete.inches"):"cm",")"]}),e.jsx("input",{type:"number",id:"thickness",min:"0",step:"0.5",value:j,onChange:ne=>S(ne.target.value?Number(ne.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 8"})]}),d==="flatwork"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"flatworkThickness",className:"block text-sm font-medium text-slate-700 mb-1",children:[r("calculators.concrete.thickness")," (",r(C==="imperial"?"calculators.concrete.inches":"calculators.concrete.centimeters"),")"]}),e.jsx("input",{type:"number",id:"flatworkThickness",min:"0",step:"0.5",value:b,onChange:ne=>v(ne.target.value?Number(ne.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:`${r("calculators.concrete.enterThickness")} ${r(C==="imperial"?"calculators.concrete.inches":"calculators.concrete.centimeters")}`})]})]}),$==="truck"&&e.jsxs("div",{className:"mt-6 border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Concrete Add-ons"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"addColor",checked:L,onChange:ne=>E(ne.target.checked),className:"mt-1 h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"addColor",className:"block text-sm font-medium text-slate-700 mb-1",children:"Add Color to Concrete"}),L&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"colorPrice",className:"block text-xs text-slate-600 mb-1",children:"Price per Cubic Yard ($)"}),e.jsx("input",{type:"number",id:"colorPrice",min:"0",step:"0.01",value:O,onChange:ne=>le(ne.target.value?Number(ne.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 15.00"})]})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:"addFiber",checked:te,onChange:ne=>V(ne.target.checked),className:"mt-1 h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"addFiber",className:"block text-sm font-medium text-slate-700 mb-1",children:"Add Fiber Reinforcement"}),te&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{htmlFor:"fiberPrice",className:"block text-xs text-slate-600 mb-1",children:"Price per Cubic Yard ($)"}),e.jsx("input",{type:"number",id:"fiberPrice",min:"0",step:"0.01",value:M,onChange:ne=>ie(ne.target.value?Number(ne.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 8.00"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:r("calculators.concrete.reinforcementOptions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reinforcement",className:"block text-sm font-medium text-slate-700 mb-1",children:r("calculators.concrete.reinforcementType")}),e.jsxs("select",{id:"reinforcement",value:F,onChange:ne=>Q(ne.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"none",children:r("calculators.concrete.noReinforcement")}),e.jsx("option",{value:"rebar",children:r("calculators.concrete.rebarGrid")}),e.jsx("option",{value:"mesh",children:r("calculators.concrete.wireMesh")})]})]}),F==="rebar"&&e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"rebarSpacing",className:"block text-sm font-medium text-slate-700 mb-1",children:[r("calculators.concrete.rebarSpacing")," (",C==="imperial"?r("calculators.concrete.inches"):"cm",")"]}),e.jsx("select",{id:"rebarSpacing",value:q,onChange:ne=>P(Number(ne.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:C==="imperial"?e.jsxs(e.Fragment,{children:[e.jsxs("option",{value:"12",children:["12 ",r("calculators.concrete.inches")]}),e.jsxs("option",{value:"16",children:["16 ",r("calculators.concrete.inches")]}),e.jsxs("option",{value:"18",children:["18 ",r("calculators.concrete.inches")]}),e.jsxs("option",{value:"24",children:["24 ",r("calculators.concrete.inches")]})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"30",children:"30 cm"}),e.jsx("option",{value:"40",children:"40 cm"}),e.jsx("option",{value:"45",children:"45 cm"}),e.jsx("option",{value:"60",children:"60 cm"})]})})]}),F==="mesh"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"meshType",className:"block text-sm font-medium text-slate-700 mb-1",children:r("calculators.concrete.meshType")}),e.jsxs("select",{id:"meshType",value:D,onChange:ne=>_(ne.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"6x6",children:"6x6 - W2.9 x W2.9"}),e.jsx("option",{value:"4x4",children:"4x4 - W4.0 x W4.0"})]})]})]})]})]}),e.jsx("button",{onClick:re,disabled:!z,className:`w-full py-3 px-4 rounded-md font-medium text-white ${z?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:r("calculators.calculateMaterials")})]})},v2={pt:{name:"Pressure Treated",price:{"2x6":12.98,"2x8":17.98,"2x10":24.98,"2x12":32.98}},azek:{name:"Azek PVC",price:{"2x6":45.98,"2x8":59.98,"2x10":79.98,"2x12":99.98}},metal:{name:"Metal Stock",price:{"2x6":29.98,"2x8":39.98,"2x10":49.98,"2x12":59.98}}},w2=[{id:"5/4-deck",name:'5/4" Deck Board',width:5.5,spacing:.125,price:{12:15.98,16:21.98,20:27.98}},{id:"2x6-pt",name:"2x6 PT Lumber",width:5.5,spacing:.25,price:{12:12.98,16:17.98,20:22.98}},{id:"trex-enhance-basic",name:"Trex Enhance Basic",width:5.5,spacing:.25,price:{12:29.28,16:39.04,20:48.8}},{id:"trex-enhance-natural",name:"Trex Enhance Natural",width:5.5,spacing:.25,price:{12:40.92,16:54.56,20:68.2}},{id:"trex-select",name:"Trex Select",width:5.5,spacing:.25,price:{12:54.24,16:72.32,20:90.4}},{id:"trex-transcend",name:"Trex Transcend",width:5.5,spacing:.25,price:{12:81.6,16:108.8,20:136}},{id:"trex-lineage",name:"Trex Lineage",width:5.5,spacing:.25,price:{12:93.84,16:125.12,20:156.4}},{id:"deckorators-voyage",name:"Deckorators Voyage",width:5.5,spacing:.25,price:{12:84,16:112,20:140}},{id:"deckorators-vault",name:"Deckorators Vault",width:5.5,spacing:.25,price:{12:71.25,16:95,20:118.75}},{id:"deckorators-summit",name:"Deckorators Summit",width:5.5,spacing:.25,price:{12:63.75,16:85,20:106.25}},{id:"custom",name:"Custom Size",width:5.5,spacing:.125,price:{12:15.98,16:21.98,20:27.98}}],j2={pt:12.98,trex:45.98},N2={"2x6":{12:12.98,16:17.98,20:22.98},"2x8":{12:17.98,16:23.98,20:29.98},"2x10":{12:24.98,16:32.98,20:41.98},"2x12":{12:32.98,16:43.98,20:54.98},joist_hanger:1.98,hurricane_tie:1.25,deck_screws:39.98,concrete:6.98,post_base:12.98},jU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{materials:a,pricing:n,loading:i,isConfigured:o}=Aa("deck",r==="custom"),{getCustomUnitValue:l}=ma("deck"),[d,u]=p.useState("dimensions"),[m,h]=p.useState(""),[x,f]=p.useState(""),[b,v]=p.useState(""),[j,S]=p.useState(16),[C,B]=p.useState("2x10"),[F,Q]=p.useState(""),[q,P]=p.useState(!1),[D,_]=p.useState(1),[$,k]=p.useState([{width:36,heightAboveGrade:0,stairRun:10}]),[L,E]=p.useState(!1),[O,le]=p.useState(""),[te,V]=p.useState("5/4-deck"),[M,ie]=p.useState(""),[K,H]=p.useState(""),[I,ee]=p.useState(!1),[se,de]=p.useState("pt"),[re,z]=p.useState(""),[ne,Y]=p.useState(!1),[X,ye]=p.useState("pt"),[pe,Ce]=p.useState(""),[je,ce]=p.useState(!1),[Te,We]=p.useState(""),[Le,U]=p.useState(!1),[fe,Se]=p.useState(""),[Re,G]=p.useState("6x6"),[ue,ge]=p.useState(""),[oe,J]=p.useState(!1),[Ae,Fe]=p.useState(""),Qe=p.useMemo(()=>{if(r==="custom"&&o&&a.length>0){const qe=a.filter(ht=>ht.category==="deck_boards").map(ht=>{const yt=ht.metadata||{};return{id:ht.id,name:ht.name,width:yt.width||5.5,spacing:yt.spacing||.25,price:yt.prices||{12:ht.price,16:ht.price,20:ht.price}}});return qe.length>0?qe:w2}return w2},[r,o,a]);p.useEffect(()=>{r==="custom"&&Qe.length>0?Qe.find(ht=>ht.id===te)||V(Qe[0].id):r==="default"&&(Qe.find(ht=>ht.id===te)||V("5/4-deck"))},[r,Qe]);const Ie=p.useMemo(()=>r==="custom"&&o&&Object.keys(n).length>0?{...N2,...n}:N2,[r,o,n]),et=p.useMemo(()=>{if(r==="custom"&&o&&a.length>0){const qe=a.filter(ht=>ht.category==="fascia");if(qe.length>0){const ht={};return qe.forEach((yt,ft)=>{const Qt=yt.id.substring(0,10);ht[Qt]={name:yt.name,price:yt.metadata?.sizes||{"2x6":yt.price,"2x8":yt.price,"2x10":yt.price,"2x12":yt.price}}}),Object.keys(ht).length>0?ht:v2}}return v2},[r,o,a]),ot=p.useMemo(()=>{if(r==="custom"&&o&&a.length>0){const qe=a.filter(ht=>ht.category==="railings");if(qe.length>0){const ht={};return qe.forEach(yt=>{ht[yt.id.substring(0,10)]=yt.price}),Object.keys(ht).length>0?ht:j2}}return j2},[r,o,a]),lt=()=>({inputType:d,length:m,width:x,area:b,joistsSpacing:j,joistSize:C,beamSpan:F,includeStairs:q,numberOfStaircases:D,staircases:$,includeCantilever:L,cantileverLength:O,deckingType:te,customDeckingWidth:M,customDeckingSpacing:K,includeRailing:I,railingType:se,railingLength:re,includeFascia:ne,fasciaType:X,fasciaLength:pe,includeTripleBeam:je,tripleBeamLength:Te,includeFreestandingPosts:Le,numFreestandingPosts:fe,postSize:Re,postHeight:ue,includeLedgerBoard:oe,ledgerBoardLength:Ae}),vt=qe=>{u(qe.inputType||"dimensions"),h(qe.length??""),f(qe.width??""),v(qe.area??""),S(qe.joistsSpacing||16),B(qe.joistSize||"2x10"),Q(qe.beamSpan??""),P(qe.includeStairs||!1),_(qe.numberOfStaircases||1),k(qe.staircases||[{width:36,heightAboveGrade:0,stairRun:10}]),E(qe.includeCantilever||!1),le(qe.cantileverLength??""),V(qe.deckingType||"5/4-deck"),ie(qe.customDeckingWidth??""),H(qe.customDeckingSpacing??""),ee(qe.includeRailing||!1),de(qe.railingType||"pt"),z(qe.railingLength??""),Y(qe.includeFascia||!1),ye(qe.fasciaType||"pt"),Ce(qe.fasciaLength??""),ce(qe.includeTripleBeam||!1),We(qe.tripleBeamLength??""),U(qe.includeFreestandingPosts||!1),Se(qe.numFreestandingPosts??""),G(qe.postSize||"6x6"),ge(qe.postHeight??""),J(qe.includeLedgerBoard||!1),Fe(qe.ledgerBoardLength??"")},ct=()=>{u("dimensions"),h(""),f(""),v(""),S(16),B("2x10"),Q(""),P(!1),_(1),k([{width:36,heightAboveGrade:0,stairRun:10}]),E(!1),le(""),V("5/4-deck"),ie(""),H(""),ee(!1),de("pt"),z(""),Y(!1),ye("pt"),Ce(""),ce(!1),We(""),U(!1),Se(""),G("6x6"),ge(""),J(!1),Fe("")},bt=qe=>{const yt=[12,l("Lumber",16,"lumber"),20],ft=Qe.find(Wt=>Wt.id===te);if(!ft)return 16;const Qt=te.includes("trex"),br=yt.map(Wt=>{const pr=Math.floor(Wt/qe),Gr=Math.ceil(qe/Wt),ts=Gr*Wt-qe,Ps=Math.floor(ts/qe),ha=Math.ceil(qe/Wt)*ft.price[Wt.toString()],cr=Math.ceil(Gr/(pr>0?pr:1)),Qr=cr*ft.price[Wt.toString()];return{length:Wt,boardsNeeded:cr,totalCost:ha,wasteLength:ts,reusablePieces:Ps,effectiveCost:Qr}});if(br.sort((Wt,pr)=>Math.abs(Wt.effectiveCost-pr.effectiveCost)<.01?Wt.wasteLength-pr.wasteLength:Wt.effectiveCost-pr.effectiveCost),Qt){const Wt=br.filter(pr=>pr.length/qe>=1.8&&pr.length/qe<=2.2);if(Wt.length>0)return Wt[0].length}return br[0].length},Ut=()=>{let qe,ht,yt;if(d==="dimensions"&&typeof m=="number"&&typeof x=="number")qe=m,ht=x,yt=qe*ht;else if(d==="area"&&typeof b=="number")yt=b,qe=Math.sqrt(yt),ht=Math.sqrt(yt);else return;const ft=[{label:"Total Deck Area",value:Number(yt.toFixed(2)),unit:"square feet"}];let Qt,br,Wt;if(te==="custom"&&typeof M=="number"&&typeof K=="number"){Qt=M,br=K;const or=Qe.find(Wr=>Wr.id==="custom");Wt=or?or.price:{12:15.98,16:21.98,20:27.98}}else{const or=Qe.find(Wr=>Wr.id===te);if(!or){alert("Please select a valid decking type");return}Qt=or.width,br=or.spacing,Wt=or.price}const pr=bt(ht),Gr=qe*12,Dt=Qt+br,ts=Math.ceil(Gr/Dt),Ps=Math.floor(pr/ht),Vr=Math.ceil(ts/(Ps>0?Ps:1)),ha=Vr*Wt[pr.toString()];ft.push({label:`${te==="custom"?"Decking Boards":Qe.find(or=>or.id===te)?.name} (${pr}ft)`,value:Vr,unit:`${pr}ft boards`,cost:ha});const cr=Math.ceil(ht*12/j)+1,Qr=bt(qe),is=cr*Ie[C][Qr.toString()];ft.push({label:`${C} Joists (${Qr}ft)`,value:cr,unit:"pieces",cost:is});const wn=cr,ni=wn*Ie.joist_hanger;if(ft.push({label:"Joist Hangers",value:wn,unit:"pieces",cost:ni}),L&&typeof O=="number"){const or=cr*Ie.hurricane_tie;ft.push({label:"Hurricane Ties (required for cantilever)",value:cr,unit:"pieces",cost:or})}const Oa=Vr*cr*2,jn=l("Deck Screws Box",1e3,"hardware"),Ha=Math.ceil(Oa/jn)*Ie.deck_screws;if(ft.push({label:"Deck Screws",value:Oa,unit:"pieces",cost:Ha}),L&&typeof O=="number"&&(O>24&&ft.push({label:"WARNING",value:24,unit:"inches maximum cantilever exceeded"}),ft.push({label:"Cantilever Length",value:O,unit:"inches"})),q&&$.forEach((or,Wr)=>{const{width:fs,heightAboveGrade:mn,stairRun:_i}=or;if(mn>0&&fs>0){const Hn=mn,Sl=Math.ceil(Hn/7.5),Ir=Hn/Sl,qo=Sl-1,Pi=qo*_i,aa=Math.max(3,Math.ceil(fs/j)),ii=Math.sqrt(Math.pow(Pi,2)+Math.pow(Hn,2))/12,mo=bt(ii),ho=aa*Ie["2x12"][mo.toString()],qa=D>1?` (Staircase ${Wr+1})`:"";ft.push({label:`Number of Steps${qa}`,value:qo,unit:"steps"},{label:`Riser Height${qa}`,value:Number(Ir.toFixed(2)),unit:"inches"},{label:`Total Stair Run${qa}`,value:Number(Pi.toFixed(2)),unit:"inches"},{label:`Stair Width${qa}`,value:fs,unit:"inches"},{label:`Stringers Needed (${j}" o.c.)${qa}`,value:aa,unit:"pieces"},{label:`2x12 Stringer Boards (${mo}ft)${qa}`,value:aa,unit:`${mo}ft boards`,cost:ho})}}),I&&typeof re=="number"){const or=re*ot[se];ft.push({label:`${se.toUpperCase()} Railing`,value:re,unit:"linear feet",cost:or});const Wr=Math.ceil(re/6)+1,fs=Wr*(se==="pt"?24.98:89.98);ft.push({label:`${se.toUpperCase()} Railing Posts`,value:Wr,unit:"posts",cost:fs})}if(ne&&typeof pe=="number"){const or=l("Fascia",16,"fascia"),Wr=Math.ceil(pe/or),fs=et[X].price[C],mn=Wr*fs;ft.push({label:`${et[X].name} Fascia (${C})`,value:Wr,unit:"16ft boards",cost:mn})}if(je&&typeof Te=="number"){const or=Ie.triple_beam_per_ft||16,Wr=Te*or;ft.push({label:"Triple Beam (Cantilever Support)",value:Te,unit:"linear feet",cost:Wr})}if(Le&&typeof fe=="number"&&typeof ue=="number"){const or=Re==="6x6"?Ie.post_6x6_per_ft||9:Ie.post_4x4_per_ft||6,Wr=fe*ue*or;ft.push({label:`Freestanding Posts (${Re})`,value:fe,unit:`posts @ ${ue}ft height`,cost:Wr})}if(oe&&typeof Ae=="number"){const Wr={"2x6":Ie.ledger_2x6_per_ft||1.75,"2x8":Ie.ledger_2x8_per_ft||2,"2x10":Ie.ledger_2x10_per_ft||2.32,"2x12":Ie.ledger_2x12_per_ft||2.89}[C],fs=Ae*Wr;ft.push({label:`Ledger Board (${C})`,value:Ae,unit:"linear feet",cost:fs})}s(ft)};if(r==="custom"&&i)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.deck.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]});if(r==="custom"&&!o)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.deck.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Mn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]});const jt=(d==="dimensions"&&typeof m=="number"&&typeof x=="number"||d==="area"&&typeof b=="number")&&(!q||$.every(qe=>qe.heightAboveGrade>0&&qe.width>0))&&(!L||typeof O=="number")&&(te!=="custom"||typeof M=="number"&&typeof K=="number")&&(!I||typeof re=="number")&&(!ne||typeof pe=="number")&&(!je||typeof Te=="number")&&(!Le||typeof fe=="number"&&typeof ue=="number")&&(!oe||typeof Ae=="number");return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.deck.title")})]}),e.jsx(Ks,{calculatorType:"deck",currentInputs:lt(),onLoadEstimate:vt,onNewEstimate:ct}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-start mb-4",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${d==="dimensions"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("dimensions"),children:t("calculators.deck.useDimensions")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${d==="area"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("area"),children:t("calculators.deck.useSquareFootage")})]})}),d==="dimensions"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.length")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:m,onChange:qe=>h(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.lengthPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"width",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.width")}),e.jsx("input",{type:"number",id:"width",min:"0",step:"0.1",value:x,onChange:qe=>f(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.widthPlaceholder")})]})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.totalArea")}),e.jsx("input",{type:"number",id:"area",min:"0",step:"0.1",value:b,onChange:qe=>v(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.totalAreaPlaceholder")})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"deckingType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.deckingType")}),e.jsx("select",{id:"deckingType",value:te,onChange:qe=>V(qe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:Qe.map(qe=>e.jsx("option",{value:qe.id,children:qe.name},qe.id))})]}),te==="custom"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customDeckingWidth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.customBoardWidth")}),e.jsx("input",{type:"number",id:"customDeckingWidth",min:"0",step:"0.1",value:M,onChange:qe=>ie(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterBoardWidth")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customDeckingSpacing",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.boardSpacing")}),e.jsx("input",{type:"number",id:"customDeckingSpacing",min:"0",step:"0.01",value:K,onChange:qe=>H(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterSpacing")})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.deck.framingDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"joistsSpacing",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.joistSpacing")}),e.jsxs("select",{id:"joistsSpacing",value:j,onChange:qe=>S(Number(qe.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:12,children:t("calculators.deck.joistSpacing12")}),e.jsx("option",{value:16,children:t("calculators.deck.joistSpacing16")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"joistSize",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.joistSize")}),e.jsxs("select",{id:"joistSize",value:C,onChange:qe=>B(qe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"2x6",children:t("calculators.deck.joists2x6")}),e.jsx("option",{value:"2x8",children:t("calculators.deck.joists2x8")}),e.jsx("option",{value:"2x10",children:t("calculators.deck.joists2x10")}),e.jsx("option",{value:"2x12",children:t("calculators.deck.joists2x12")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"beamSpan",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.beamSpan")}),e.jsx("input",{type:"number",id:"beamSpan",min:"0",step:"0.1",value:F,onChange:qe=>Q(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterBeamSpan")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeCantilever",checked:L,onChange:qe=>{E(qe.target.checked),qe.target.checked||le("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeCantilever",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.deck.includeCantilever")})]}),L&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"cantileverLength",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.cantileverLength")}),e.jsx("input",{type:"number",id:"cantileverLength",min:"0",max:24,step:"1",value:O,onChange:qe=>le(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterCantilever")}),typeof O=="number"&&O>24&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t("calculators.deck.cantileverWarning")})]}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeStairs",checked:q,onChange:qe=>P(qe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeStairs",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.deck.includeStairs")})]}),q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"numberOfStaircases",className:"block text-sm font-medium text-slate-700 mb-1",children:"Number of Staircases"}),e.jsxs("select",{id:"numberOfStaircases",value:D,onChange:qe=>{const ht=Number(qe.target.value);_(ht);const yt=Array.from({length:ht},(ft,Qt)=>$[Qt]||{width:36,heightAboveGrade:0,stairRun:10});k(yt)},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:"1 Staircase"}),e.jsx("option",{value:2,children:"2 Staircases"}),e.jsx("option",{value:3,children:"3 Staircases"}),e.jsx("option",{value:4,children:"4 Staircases"})]})]}),$.map((qe,ht)=>e.jsxs("div",{className:"border border-slate-200 rounded-md p-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-slate-800",children:D>1?`Staircase ${ht+1}`:"Staircase Details"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`heightAboveGrade-${ht}`,className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.heightAboveGrade")}),e.jsx("input",{type:"number",id:`heightAboveGrade-${ht}`,min:"0",step:"1",value:qe.heightAboveGrade,onChange:yt=>{const ft=[...$];ft[ht].heightAboveGrade=yt.target.value?Number(yt.target.value):0,k(ft)},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterHeightInches")}),e.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:[" Tip: ",qe.heightAboveGrade>0?`${(qe.heightAboveGrade/12).toFixed(1)} feet`:"Enter height in inches (e.g., 8 feet = 96 inches)"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`stairWidth-${ht}`,className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.stairWidth")}),e.jsx("input",{type:"number",id:`stairWidth-${ht}`,min:"36",step:"1",value:qe.width,onChange:yt=>{const ft=[...$];ft[ht].width=yt.target.value?Number(yt.target.value):0,k(ft)},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterStairWidth")}),qe.width<36&&qe.width>0&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t("calculators.deck.stairWidthWarning")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:`stairRun-${ht}`,className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.stairRun")}),e.jsxs("select",{id:`stairRun-${ht}`,value:qe.stairRun,onChange:yt=>{const ft=[...$];ft[ht].stairRun=Number(yt.target.value),k(ft)},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:t("calculators.deck.stairRun10")}),e.jsx("option",{value:12,children:t("calculators.deck.stairRun12")})]})]})]},ht))]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeRailing",checked:I,onChange:qe=>{ee(qe.target.checked),qe.target.checked||z("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeRailing",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.deck.includeRailing")})]}),I&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"railingType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.railingType")}),e.jsxs("select",{id:"railingType",value:se,onChange:qe=>de(qe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"pt",children:t("calculators.deck.pressureTreated")}),e.jsx("option",{value:"trex",children:t("calculators.deck.trexComposite")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"railingLength",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.railingLength")}),e.jsx("input",{type:"number",id:"railingLength",min:"0",step:"0.1",value:re,onChange:qe=>z(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterRailingLength")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeFascia",checked:ne,onChange:qe=>{Y(qe.target.checked),qe.target.checked||Ce("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeFascia",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.deck.includeFascia")})]}),ne&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fasciaType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.fasciaMaterial")}),e.jsxs("select",{id:"fasciaType",value:X,onChange:qe=>ye(qe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"pt",children:t("calculators.deck.pressureTreated")}),e.jsx("option",{value:"azek",children:t("calculators.deck.azekPVC")}),e.jsx("option",{value:"metal",children:t("calculators.deck.metalStock")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fasciaLength",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.deck.fasciaLength")}),e.jsx("input",{type:"number",id:"fasciaLength",min:"0",step:"0.1",value:pe,onChange:qe=>Ce(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.deck.enterFasciaLength")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeTripleBeam",checked:je,onChange:qe=>{ce(qe.target.checked),qe.target.checked||We("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeTripleBeam",className:"ml-2 block text-sm font-medium text-slate-700",children:"Include Triple Beam (Cantilever Support)"})]}),je&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tripleBeamLength",className:"block text-sm font-medium text-slate-700 mb-1",children:"Triple Beam Length (feet)"}),e.jsx("input",{type:"number",id:"tripleBeamLength",min:"0",step:"0.1",value:Te,onChange:qe=>We(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter triple beam length"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:"Triple beam @ $16/linear foot for cantilever deck support"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeFreestandingPosts",checked:Le,onChange:qe=>{U(qe.target.checked),qe.target.checked||Se("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeFreestandingPosts",className:"ml-2 block text-sm font-medium text-slate-700",children:"Freestanding Deck Posts"})]}),Le&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postSize",className:"block text-sm font-medium text-slate-700 mb-1",children:"Post Size"}),e.jsxs("select",{id:"postSize",value:Re,onChange:qe=>G(qe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"6x6",children:"6x6 Posts ($9 per foot)"}),e.jsx("option",{value:"4x4",children:"4x4 Posts ($6 per foot)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"numFreestandingPosts",className:"block text-sm font-medium text-slate-700 mb-1",children:"Number of Posts"}),e.jsx("input",{type:"number",id:"numFreestandingPosts",min:"0",step:"1",value:fe,onChange:qe=>Se(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter number of posts"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postHeight",className:"block text-sm font-medium text-slate-700 mb-1",children:"Post Height (feet)"}),e.jsx("input",{type:"number",id:"postHeight",min:"0",step:"0.1",value:ue,onChange:qe=>ge(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter post height in feet"}),e.jsx("p",{className:"mt-1 text-sm text-slate-500",children:Re==="6x6"?"6x6 posts @ $9/linear foot":"4x4 posts @ $6/linear foot"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeLedgerBoard",checked:oe,onChange:qe=>{J(qe.target.checked),qe.target.checked||Fe("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeLedgerBoard",className:"ml-2 block text-sm font-medium text-slate-700",children:"Include Ledger Board"})]}),oe&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"ledgerBoardLength",className:"block text-sm font-medium text-slate-700 mb-1",children:"Ledger Board Length (feet)"}),e.jsx("input",{type:"number",id:"ledgerBoardLength",min:"0",step:"0.1",value:Ae,onChange:qe=>Fe(qe.target.value?Number(qe.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter ledger board length"}),e.jsxs("p",{className:"mt-1 text-sm text-slate-500",children:[C," ledger board matches joist size (2x8 @ $2.00/ft, 2x10 @ $2.32/ft, 2x12 @ $2.89/ft)"]})]})]})]}),e.jsx("button",{onClick:Ut,disabled:!jt,className:`w-full py-3 px-4 rounded-md font-medium text-white ${jt?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},NU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("doors-windows",r==="custom"),{getCustomPrice:i,getCustomUnitValue:o}=ma("doors-windows"),[l,d]=p.useState([]),[u,m]=p.useState(!0),[h,x]=p.useState(!0),[f,b]=p.useState(!0),[v,j]=p.useState(!0),S={entry:{name:t("calculators.doorsWindows.doorStyles.entry"),materials:["steel","fiberglass","wood"],finishes:["primed","stained","painted"],prices:{steel:299.98,fiberglass:499.98,wood:699.98}},interior:{name:t("calculators.doorsWindows.doorStyles.interior"),materials:["hollow-core","solid-core","wood"],finishes:["primed","stained","painted"],prices:{"hollow-core":49.98,"solid-core":99.98,wood:199.98}},patio:{name:t("calculators.doorsWindows.doorStyles.patio"),materials:["vinyl","aluminum","wood"],finishes:["white","bronze","stained"],prices:{vinyl:599.98,aluminum:799.98,wood:1299.98}},french:{name:t("calculators.doorsWindows.doorStyles.french"),materials:["wood","fiberglass","steel"],finishes:["primed","stained","painted"],prices:{wood:899.98,fiberglass:799.98,steel:699.98}},bifold:{name:t("calculators.doorsWindows.doorStyles.bifold"),materials:["hollow-core","solid-core","wood"],finishes:["primed","stained","painted"],prices:{"hollow-core":99.98,"solid-core":149.98,wood:249.98}}},C=["white","off-white","gray","beige","tan","clay","black","dark-bronze","brown","wood-tone"],B=["white","bronze","stained"],F={"single-hung":{name:t("calculators.doorsWindows.windowStyles.singleHung"),materials:["vinyl","aluminum","wood"],finishes:{vinyl:C,aluminum:B,wood:B},prices:{vinyl:199.98,aluminum:249.98,wood:399.98}},"double-hung":{name:t("calculators.doorsWindows.windowStyles.doubleHung"),materials:["vinyl","aluminum","wood"],finishes:{vinyl:C,aluminum:B,wood:B},prices:{vinyl:249.98,aluminum:299.98,wood:499.98}},casement:{name:t("calculators.doorsWindows.windowStyles.casement"),materials:["vinyl","aluminum","wood"],finishes:{vinyl:C,aluminum:B,wood:B},prices:{vinyl:299.98,aluminum:349.98,wood:599.98}},sliding:{name:t("calculators.doorsWindows.windowStyles.sliding"),materials:["vinyl","aluminum","wood"],finishes:{vinyl:C,aluminum:B,wood:B},prices:{vinyl:249.98,aluminum:299.98,wood:499.98}},picture:{name:t("calculators.doorsWindows.windowStyles.picture"),materials:["vinyl","aluminum","wood"],finishes:{vinyl:C,aluminum:B,wood:B},prices:{vinyl:299.98,aluminum:349.98,wood:599.98}}},Q={basic:{name:t("calculators.doorsWindows.trimStyles.basic"),price:2.98},colonial:{name:t("calculators.doorsWindows.trimStyles.colonial"),price:3.98},craftsman:{name:t("calculators.doorsWindows.trimStyles.craftsman"),price:4.98},modern:{name:t("calculators.doorsWindows.trimStyles.modern"),price:3.98}},q={door:{interior:{basic:24.98},exterior:{basic:79.98}},window:{basic:19.98}},P=te=>{const V=te==="door"?S:F,M=Object.keys(V)[0],ie=V[M].materials[0],K=te==="door"?V[M].finishes:V[M].finishes[ie],H=Array.isArray(K)?K[0]:K,I={id:Date.now().toString(),type:te,style:M,width:te==="door"?36:32,height:te==="door"?80:60,quantity:1,includeTrim:!0,trimStyle:"basic",includeHardware:!0,isExterior:te==="door",isPreHung:te==="door",material:ie,finish:H,useCustomCost:!1,customCostPerUnit:""};d([...l,I])},D=(te,V)=>{d(l.map(M=>M.id===te?{...M,...V}:M))},_=te=>{d(l.filter(V=>V.id!==te))},$=(te,V)=>(te*2+V*2)/12,k=()=>({openings:l,includeInsulation:u,includeFlashing:h,includeCaulk:f,includeShims:v}),L=te=>{d(te.openings||[]),m(te.includeInsulation??!0),x(te.includeFlashing??!0),b(te.includeCaulk??!0),j(te.includeShims??!0)},E=()=>{d([]),m(!0),x(!0),b(!0),j(!0)},O=()=>{const te=[];if(l.forEach(V=>{const M=V.type==="door"?S:F;let ie=V.useCustomCost&&typeof V.customCostPerUnit=="number"?V.customCostPerUnit:M[V.style]?.prices[V.material]||0;const K=`${V.type}_${V.style}_${V.material}`;ie=i(K,ie);const H=ie*V.quantity;if(te.push({label:`${M[V.style].name} (${V.material})${V.useCustomCost?" - Custom Price":""}`,value:V.quantity,unit:t("calculators.doorsWindows.units.units"),cost:H}),V.type==="door"&&V.isPreHung){const I=V.isExterior?149.98:79.98,se=i(V.isExterior?"prehung_exterior":"prehung_interior",I)*V.quantity;te.push({label:t("calculators.doorsWindows.preHungFrame"),value:V.quantity,unit:t("calculators.doorsWindows.units.kits"),cost:se})}if(V.includeTrim){const I=$(V.width,V.height),ee=Q[V.trimStyle].price,se=i(`trim_${V.trimStyle}`,ee),de=I*V.quantity,re=de*se;te.push({label:`${Q[V.trimStyle].name} ${t("calculators.doorsWindows.trim")}`,value:Number(de.toFixed(2)),unit:t("calculators.doorsWindows.units.linearFeet"),cost:re})}if(V.includeHardware){let I,ee;V.type==="door"?(I=V.isExterior?q.door.exterior.basic:q.door.interior.basic,ee=V.isExterior?"hardware_door_exterior":"hardware_door_interior"):(I=q.window.basic,ee="hardware_window");const de=i(ee,I)*V.quantity;te.push({label:`${V.type==="door"?t("calculators.doorsWindows.door"):t("calculators.doorsWindows.window")} ${t("calculators.doorsWindows.hardware")}`,value:V.quantity,unit:t("calculators.doorsWindows.units.sets"),cost:de})}}),u){const V=l.reduce((H,I)=>{const ee=(I.width+I.height)*2/12;return H+ee*I.quantity},0),M=i("insulation",12.98),ie=o("Insulation Roll",20,"insulation"),K=Math.ceil(V/ie)*M;te.push({label:t("calculators.doorsWindows.insulation"),value:Math.ceil(V/ie),unit:t("calculators.doorsWindows.units.rolls20ft"),cost:K})}if(h){const V=l.filter(K=>K.isExterior).reduce((K,H)=>K+H.quantity,0),M=i("flashing",12.98),ie=V*M;te.push({label:t("calculators.doorsWindows.flashingTape"),value:V,unit:t("calculators.doorsWindows.units.rolls"),cost:ie})}if(f){const V=o("Caulk",20,"caulk"),M=Math.ceil(l.reduce((H,I)=>{const ee=(I.width+I.height)*2/12;return H+ee*I.quantity/V},0)),ie=i("caulk",6.98),K=M*ie;te.push({label:t("calculators.doorsWindows.caulk"),value:M,unit:t("calculators.doorsWindows.units.tubes"),cost:K})}if(v){const V=o("Shims",2,"shims"),M=Math.ceil(l.reduce((H,I)=>H+I.quantity,0)/V),ie=i("shims",4.98),K=M*ie;te.push({label:t("calculators.doorsWindows.shimPacks"),value:M,unit:t("calculators.doorsWindows.units.packs"),cost:K})}s(te)},le=l.length>0;return r==="custom"&&a?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Yu,{className:"h-6 w-6 text-orange-500"}),e.jsx(Dm,{className:"h-6 w-6 text-orange-500"})]}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 ml-2",children:t("calculators.doorsWindows.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Yu,{className:"h-6 w-6 text-orange-500"}),e.jsx(Dm,{className:"h-6 w-6 text-orange-500"})]}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 ml-2",children:t("calculators.doorsWindows.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Yu,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Yu,{className:"h-6 w-6 text-orange-500"}),e.jsx(Dm,{className:"h-6 w-6 text-orange-500"})]}),e.jsx("h2",{className:"text-xl font-bold text-slate-800 ml-2",children:t("calculators.doorsWindows.title")})]}),e.jsx(Ks,{calculatorType:"doors-windows",getCurrentInputs:k,onLoadEstimate:L,onNewEstimate:E}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>P("door"),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.doorsWindows.addDoor")}),e.jsx("button",{onClick:()=>P("window"),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.doorsWindows.addWindow")})]})}),l.map(te=>e.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:te.type==="door"?t("calculators.doorsWindows.doorStyle"):t("calculators.doorsWindows.windowStyle")}),e.jsx("select",{value:te.style,onChange:V=>D(te.id,{style:V.target.value,material:(te.type==="door"?S:F)[V.target.value].materials[0]}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:Object.entries(te.type==="door"?S:F).map(([V,{name:M}])=>e.jsx("option",{value:V,children:M},V))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.doorsWindows.material")}),e.jsx("select",{value:te.material,onChange:V=>D(te.id,{material:V.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:(te.type==="door"?S:F)[te.style].materials.map(V=>e.jsx("option",{value:V,children:t(`calculators.doorsWindows.materials.${V}`)},V))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:te.type==="window"&&te.material==="vinyl"?"Color":t("calculators.doorsWindows.finish")}),e.jsx("select",{value:te.finish,onChange:V=>D(te.id,{finish:V.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:te.type==="window"?F[te.style].finishes[te.material].map(V=>e.jsx("option",{value:V,children:V.split("-").map(M=>M.charAt(0).toUpperCase()+M.slice(1)).join(" ")},V)):S[te.style].finishes.map(V=>e.jsx("option",{value:V,children:t(`calculators.doorsWindows.finishes.${V}`)},V))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.doorsWindows.widthInches")}),e.jsx("input",{type:"number",min:"0",step:"0.125",value:te.width,onChange:V=>D(te.id,{width:Number(V.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.doorsWindows.heightInches")}),e.jsx("input",{type:"number",min:"0",step:"0.125",value:te.height,onChange:V=>D(te.id,{height:Number(V.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.doorsWindows.quantity")}),e.jsx("input",{type:"number",min:"1",step:"1",value:te.quantity,onChange:V=>D(te.id,{quantity:Number(V.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsx("div",{className:"md:col-span-3 border-t border-slate-200 pt-4 mt-2",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("input",{type:"checkbox",id:`customCost-${te.id}`,checked:te.useCustomCost,onChange:V=>D(te.id,{useCustomCost:V.target.checked}),className:"mt-1 h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{htmlFor:`customCost-${te.id}`,className:"block text-sm font-medium text-slate-700 mb-1",children:["Use Custom Cost Per ",te.type==="door"?"Door":"Window"]}),te.useCustomCost&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-xs text-slate-600 mb-1",children:"Cost Per Unit ($)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:te.customCostPerUnit,onChange:V=>D(te.id,{customCostPerUnit:V.target.value?Number(V.target.value):""}),className:"w-full max-w-xs p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 350.00"})]})]})]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:te.isExterior,onChange:V=>D(te.id,{isExterior:V.target.checked}),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.exteriorInstallation")})]}),te.type==="door"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:te.isPreHung,onChange:V=>D(te.id,{isPreHung:V.target.checked}),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.preHung")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:te.includeTrim,onChange:V=>D(te.id,{includeTrim:V.target.checked}),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.includeTrim")})]}),te.includeTrim&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.doorsWindows.trimStyle")}),e.jsx("select",{value:te.trimStyle,onChange:V=>D(te.id,{trimStyle:V.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:Object.entries(Q).map(([V,{name:M}])=>e.jsx("option",{value:V,children:M},V))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:te.includeHardware,onChange:V=>D(te.id,{includeHardware:V.target.checked}),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.includeHardware")})]})]}),e.jsxs("button",{onClick:()=>_(te.id),className:"mt-4 text-red-500 hover:text-red-600 text-sm font-medium",children:[t("calculators.doorsWindows.remove")," ",te.type==="door"?t("calculators.doorsWindows.door"):t("calculators.doorsWindows.window")]})]},te.id)),l.length===0&&e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsxs("div",{className:"flex justify-center space-x-2 mb-4",children:[e.jsx(Yu,{className:"w-12 h-12 text-gray-400"}),e.jsx(Dm,{className:"w-12 h-12 text-gray-400"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("calculators.doorsWindows.emptyMessage")}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx("button",{onClick:()=>P("door"),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.doorsWindows.addDoor")}),e.jsx("button",{onClick:()=>P("window"),className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.doorsWindows.addWindow")})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.doorsWindows.additionalMaterials")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeInsulation",checked:u,onChange:te=>m(te.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeInsulation",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.includeInsulation")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeFlashing",checked:h,onChange:te=>x(te.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeFlashing",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.includeFlashing")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeCaulk",checked:f,onChange:te=>b(te.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeCaulk",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.includeCaulk")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeShims",checked:v,onChange:te=>j(te.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeShims",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.doorsWindows.includeShims")})]})]})]})]}),e.jsx("button",{onClick:O,disabled:!le,className:`w-full py-3 px-4 rounded-md font-medium text-white ${le?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},CU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("drywall",r==="custom"),{getCustomPrice:i}=ma("drywall"),[o,l]=p.useState("wall"),[d,u]=p.useState(""),[m,h]=p.useState(""),[x,f]=p.useState("imperial"),[b,v]=p.useState("4x8"),[j,S]=p.useState("1/2"),[C,B]=p.useState([]),[F,Q]=p.useState([]),[q,P]=p.useState(1),[D,_]=p.useState(!0),[$,k]=p.useState(10),[L,E]=p.useState(null),O=p.useMemo(()=>({sheetPrice:{"1/2":i('1/2" Drywall Sheet',15.98,"sheets"),"5/8":i('5/8" Drywall Sheet',17.98,"sheets")},screwBoxPrice:i("Drywall Screws",8.98,"fasteners"),mudPrice:i("Joint Compound (Mud)",19.98,"finishing"),tapePrice:i("Paper Tape",4.98,"finishing")}),[i]),le=()=>({surfaceType:o,length:d,height:m,unit:x,sheetSize:b,sheetThickness:j,doors:C,windows:F,layers:q,includeWaste:D,wasteFactor:$}),te=re=>{l(re.surfaceType||"wall"),u(re.length??""),h(re.height??""),f(re.unit||"imperial"),v(re.sheetSize||"4x8"),S(re.sheetThickness||"1/2"),B(re.doors??[]),Q(re.windows??[]),P(re.layers??1),_(re.includeWaste??!0),k(re.wasteFactor??10)},V=()=>{l("wall"),u(""),h(""),f("imperial"),v("4x8"),S("1/2"),B([]),Q([]),P(1),_(!0),k(10),E(null)},M=()=>{B([...C,{width:3,height:7}])},ie=()=>{Q([...F,{width:3,height:3}])},K=(re,z,ne)=>{const Y=[...C];Y[re]={...Y[re],[z]:ne},B(Y)},H=(re,z,ne)=>{const Y=[...F];Y[re]={...Y[re],[z]:ne},Q(Y)},I=re=>{B(C.filter((z,ne)=>ne!==re))},ee=re=>{Q(F.filter((z,ne)=>ne!==re))},se=()=>{if(typeof d=="number"&&typeof m=="number"){let re=d*m;const z=C.reduce((G,ue)=>G+ue.width*ue.height,0),ne=F.reduce((G,ue)=>G+ue.width*ue.height,0);re-=z+ne;const Y=D?re*(1+$/100):re,ye=Math.ceil(Y/(b==="4x8"?32:48))*q,Ce=ye*30,ce=Math.ceil(re/100),Te=Math.ceil(re/25),We=O.sheetPrice[j],Le=ye*We,U=Math.ceil(Ce/100)*O.screwBoxPrice,fe=ce*O.mudPrice,Se=Te*O.tapePrice,Re=[{label:t("calculators.drywall.totalWallArea"),value:Number(re.toFixed(2)),unit:t("calculators.drywall.squareFeet")},{label:t("calculators.drywall.drywallSheets",{size:b,thickness:j}),value:ye,unit:t("calculators.drywall.sheets"),cost:Le},{label:t("calculators.drywall.drywallScrews"),value:Ce,unit:t("calculators.drywall.screws"),cost:U},{label:t("calculators.drywall.jointCompound"),value:ce,unit:t("calculators.drywall.fiveGallonBuckets"),cost:fe},{label:t("calculators.drywall.jointTape"),value:Te,unit:t("calculators.drywall.rolls"),cost:Se}];E(Re),s(Re)}},de=typeof d=="number"&&typeof m=="number";return r==="custom"&&a?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Lo,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.drywall.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Lo,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.drywall.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Lo,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Lo,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.drywall.title")})]}),e.jsx(Ks,{calculatorType:"drywall",currentData:le(),onLoad:te,onNewEstimate:V}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${x==="imperial"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>f("imperial"),children:t("calculators.drywall.imperial")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${x==="metric"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>f("metric"),children:t("calculators.drywall.metric")})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:[t("calculators.drywall.length")," (",t(x==="imperial"?"calculators.drywall.feet":"calculators.drywall.meters"),")"]}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.01",value:d,onChange:re=>u(re.target.value?Number(re.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.drywall.enterLength",{unit:t(x==="imperial"?"calculators.drywall.feet":"calculators.drywall.meters")})})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"height",className:"block text-sm font-medium text-slate-700 mb-1",children:[t("calculators.drywall.height")," (",t(x==="imperial"?"calculators.drywall.feet":"calculators.drywall.meters"),")"]}),e.jsx("input",{type:"number",id:"height",min:"0",step:"0.01",value:m,onChange:re=>h(re.target.value?Number(re.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.drywall.enterHeight",{unit:t(x==="imperial"?"calculators.drywall.feet":"calculators.drywall.meters")})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sheetSize",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.drywall.sheetSize")}),e.jsxs("select",{id:"sheetSize",value:b,onChange:re=>v(re.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"4x8",children:t("calculators.drywall.sheetSize4x8")}),e.jsx("option",{value:"4x12",children:t("calculators.drywall.sheetSize4x12")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sheetThickness",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.drywall.sheetThickness")}),e.jsxs("select",{id:"sheetThickness",value:j,onChange:re=>S(re.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"1/2",children:t("calculators.drywall.halfInch")}),e.jsx("option",{value:"5/8",children:t("calculators.drywall.fiveEighthsInch")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"layers",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.drywall.numberOfLayers")}),e.jsxs("select",{id:"layers",value:q,onChange:re=>P(Number(re.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:t("calculators.drywall.singleLayer")}),e.jsx("option",{value:2,children:t("calculators.drywall.doubleLayer")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.drywall.openings")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:M,className:"flex items-center px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:[e.jsx(Yu,{className:"h-4 w-4 mr-2"}),t("calculators.drywall.addDoor")]}),e.jsxs("button",{onClick:ie,className:"flex items-center px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:[e.jsx(Dm,{className:"h-4 w-4 mr-2"}),t("calculators.drywall.addWindow")]})]})]}),C.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-md font-medium text-slate-700 mb-2",children:t("calculators.drywall.doors")}),C.map((re,z)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"number",value:re.width,onChange:ne=>K(z,"width",Number(ne.target.value)),className:"w-24 p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.drywall.width")}),e.jsx("span",{children:"x"}),e.jsx("input",{type:"number",value:re.height,onChange:ne=>K(z,"height",Number(ne.target.value)),className:"w-24 p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.drywall.height")}),e.jsx("button",{onClick:()=>I(z),className:"p-2 text-red-500 hover:bg-red-50 rounded-md",children:t("calculators.drywall.remove")})]},z))]}),F.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-md font-medium text-slate-700 mb-2",children:t("calculators.drywall.windows")}),F.map((re,z)=>e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"number",value:re.width,onChange:ne=>H(z,"width",Number(ne.target.value)),className:"w-24 p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.drywall.width")}),e.jsx("span",{children:"x"}),e.jsx("input",{type:"number",value:re.height,onChange:ne=>H(z,"height",Number(ne.target.value)),className:"w-24 p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.drywall.height")}),e.jsx("button",{onClick:()=>ee(z),className:"p-2 text-red-500 hover:bg-red-50 rounded-md",children:t("calculators.drywall.remove")})]},z))]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeWaste",checked:D,onChange:re=>_(re.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeWaste",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.drywall.includeWasteFactor")})]}),D&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"wasteFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.drywall.wasteFactorPercentage")}),e.jsxs("select",{id:"wasteFactor",value:$,onChange:re=>k(Number(re.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:5,children:t("calculators.drywall.waste5")}),e.jsx("option",{value:10,children:t("calculators.drywall.waste10")}),e.jsx("option",{value:15,children:t("calculators.drywall.waste15")})]})]})]})]}),e.jsx("button",{onClick:se,disabled:!de,className:`w-full py-3 px-4 rounded-md font-medium text-white ${de?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},SU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{materials:a,pricing:n,loading:i,isConfigured:o}=Aa("electrical",r==="custom"),{getCustomUnitValue:l}=ma("electrical"),[d,u]=p.useState([]),[m,h]=p.useState(!1),[x,f]=p.useState(200),[b,v]=p.useState(30),[j,S]=p.useState(!0),[C,B]=p.useState(!0),[F,Q]=p.useState(!0),[q,P]=p.useState(null),D=p.useMemo(()=>{if(r==="custom"&&o&&a.length>0){const K=a.filter(H=>H.category==="electrical_wire");if(K.length>0){const H={};return K.forEach(I=>{const ee=I.metadata?.wire_type||"nm-b",se=I.metadata?.gauge||14;H[ee]||(H[ee]={}),H[ee][se]=I.price}),H}}return{}},[r,o,a]),_=p.useMemo(()=>r==="custom"&&o&&Object.keys(n).length>0?n:{},[r,o,n]),$=()=>({circuits:d,includePanel:m,panelSize:x,panelSpaces:b,includeGroundRods:j,includeGFCI:C,includeAFCI:F}),k=K=>{u(K.circuits??[]),h(K.includePanel??!1),f(K.panelSize??200),v(K.panelSpaces??30),S(K.includeGroundRods??!0),B(K.includeGFCI??!0),Q(K.includeAFCI??!0)},L=()=>{u([]),h(!1),f(200),v(30),S(!0),B(!0),Q(!0),P(null)},E=()=>{const K={id:Date.now().toString(),type:"lighting",amperage:15,voltage:120,length:0,wireGauge:14,wireType:"nm-b",conduit:!1,deviceCount:0,boxCount:0};u([...d,K])},O=(K,H)=>{u(d.map(I=>I.id===K?{...I,...H}:I))},le=K=>{u(d.filter(H=>H.id!==K))},te=(K,H)=>D[H]&&D[H][K]?D[H][K]:{"nm-b":{14:89.98,12:109.98,10:159.98,8:249.98,6:399.98},thhn:{14:49.98,12:69.98,10:99.98,8:159.98,6:259.98},ser:{6:299.98,8:199.98},"uf-b":{14:119.98,12:149.98,10:199.98,8:299.98,6:449.98}}[H]?.[K]||0,V=(K,H)=>{const I=`conduit_${K}_${H}`;return _[I]?_[I]:{emt:{.5:4.98,.75:6.98,1:8.98},pvc:{.5:3.98,.75:5.98,1:7.98},flex:{.5:12.98,.75:15.98,1:19.98}}[K]?.[H]||0},M=()=>{const K=[];if(m){const H=`panel_${x}a_${b}sp`,I={100:{20:89.98,30:119.98,40:149.98},150:{20:119.98,30:149.98,40:179.98},200:{20:149.98,30:179.98,40:209.98}},ee=_[H]||I[x][b];if(K.push({label:`${x}${t("calculators.electrical.ampPanel")} (${b} ${t("calculators.electrical.spaces")})`,value:1,unit:t("calculators.electrical.panel"),cost:ee}),j){const se=2*(_.ground_rod||12.98),de=2*(_.ground_clamp||4.98),re=_.ground_wire||20.98;K.push({label:t("calculators.electrical.groundingSystem"),value:1,unit:t("calculators.electrical.set"),cost:se+de+re})}}d.forEach(H=>{const I=H.wireType==="ser"?125:250,ee=l(`Wire ${H.wireType.toUpperCase()}`,I,"wire"),se=H.voltage===240?3:2,de=H.length*se*1.2,re=Math.ceil(de/ee),z=re*te(H.wireGauge,H.wireType);if(K.push({label:`${H.wireGauge} AWG ${H.wireType.toUpperCase()} ${t("calculators.electrical.wire")}`,value:re,unit:`${ee}${t("calculators.electrical.ftRolls")}`,cost:z}),H.conduit&&H.conduitType&&H.conduitSize){const Y=Math.ceil(H.length*1.1),X=l("Conduit",10,"conduit"),ye=Math.ceil(Y/X),pe=ye*V(H.conduitType,H.conduitSize);K.push({label:`${H.conduitSize}" ${H.conduitType.toUpperCase()} ${t("calculators.electrical.conduit")}`,value:ye,unit:t("calculators.electrical.tenFtLengths"),cost:pe});const je=ye*2,ce=je*(_.conduit_fitting||1.98);K.push({label:t("calculators.electrical.conduitFittings"),value:je,unit:t("calculators.electrical.pieces"),cost:ce})}if(H.deviceCount>0){let Y=0;if(H.type==="receptacle"){const X=_.gfci_receptacle||19.98,ye=_.standard_receptacle||3.98,pe=C?Math.ceil(H.deviceCount/4):0,Ce=H.deviceCount-pe;Y=pe*X+Ce*ye}else H.type==="lighting"&&(Y=H.deviceCount*(_.switch||4.98));K.push({label:`${H.type.charAt(0).toUpperCase()+H.type.slice(1)} ${t("calculators.electrical.devices")}`,value:H.deviceCount,unit:t("calculators.electrical.pieces"),cost:Y})}if(H.boxCount>0){const Y=H.type==="lighting"?_.box_lighting||.98:_.box_receptacle||1.98,X=H.boxCount*Y;K.push({label:t("calculators.electrical.electricalBoxes"),value:H.boxCount,unit:t("calculators.electrical.pieces"),cost:X})}const ne=H.amperage>=30?_[`breaker_${H.amperage}a`]||24.98:F?_.breaker_afci||39.98:_.breaker_standard||8.98;K.push({label:`${H.amperage}${t("calculators.electrical.ampCircuitBreaker")}${F?` (${t("calculators.electrical.afci")})`:""}`,value:1,unit:t("calculators.electrical.piece"),cost:ne})}),P(K),s(K)},ie=d.length>0&&d.every(K=>typeof K.length=="number"&&K.length>0&&typeof K.deviceCount=="number"&&typeof K.boxCount=="number");return r==="custom"&&i?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(am,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.electrical.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!o?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(am,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.electrical.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(am,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(am,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.electrical.title")})]}),e.jsx(Ks,{calculatorType:"electrical",currentData:$(),onLoad:k,onNewEstimate:L}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.electrical.circuits")}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.electrical.addCircuit")})]}),d.length===0&&e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(am,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:t("calculators.electrical.addCircuitsPrompt")}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.electrical.addFirstCircuit")})]}),d.map(K=>e.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.circuitType")}),e.jsxs("select",{value:K.type,onChange:H=>O(K.id,{type:H.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"lighting",children:t("calculators.electrical.lightingCircuit")}),e.jsx("option",{value:"receptacle",children:t("calculators.electrical.receptacleCircuit")}),e.jsx("option",{value:"appliance",children:t("calculators.electrical.applianceCircuit")}),e.jsx("option",{value:"hvac",children:t("calculators.electrical.hvacCircuit")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.amperage")}),e.jsxs("select",{value:K.amperage,onChange:H=>O(K.id,{amperage:Number(H.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:15,children:t("calculators.electrical.fifteenAmp")}),e.jsx("option",{value:20,children:t("calculators.electrical.twentyAmp")}),e.jsx("option",{value:30,children:t("calculators.electrical.thirtyAmp")}),e.jsx("option",{value:40,children:t("calculators.electrical.fortyAmp")}),e.jsx("option",{value:50,children:t("calculators.electrical.fiftyAmp")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.voltage")}),e.jsxs("select",{value:K.voltage,onChange:H=>O(K.id,{voltage:Number(H.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:120,children:t("calculators.electrical.onetwentyV")}),e.jsx("option",{value:240,children:t("calculators.electrical.twofortyV")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.wireLengthFeet")}),e.jsx("input",{type:"number",min:"0",step:"1",value:K.length||"",onChange:H=>O(K.id,{length:Number(H.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.electrical.enterWireLength")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.wireGauge")}),e.jsxs("select",{value:K.wireGauge,onChange:H=>O(K.id,{wireGauge:Number(H.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:14,children:t("calculators.electrical.fourteenAWG")}),e.jsx("option",{value:12,children:t("calculators.electrical.twelveAWG")}),e.jsx("option",{value:10,children:t("calculators.electrical.tenAWG")}),e.jsx("option",{value:8,children:t("calculators.electrical.eightAWG")}),e.jsx("option",{value:6,children:t("calculators.electrical.sixAWG")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.wireType")}),e.jsxs("select",{value:K.wireType,onChange:H=>O(K.id,{wireType:H.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"nm-b",children:t("calculators.electrical.nmb")}),e.jsx("option",{value:"thhn",children:t("calculators.electrical.thhn")}),e.jsx("option",{value:"ser",children:t("calculators.electrical.ser")}),e.jsx("option",{value:"uf-b",children:t("calculators.electrical.ufb")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.deviceCount")}),e.jsx("input",{type:"number",min:"0",step:"1",value:K.deviceCount||"",onChange:H=>O(K.id,{deviceCount:Number(H.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.electrical.enterDeviceCount")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.boxCount")}),e.jsx("input",{type:"number",min:"0",step:"1",value:K.boxCount||"",onChange:H=>O(K.id,{boxCount:Number(H.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.electrical.enterBoxCount")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:K.conduit,onChange:H=>O(K.id,{conduit:H.target.checked}),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.electrical.requiresConduit")})]})]}),K.conduit&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.conduitType")}),e.jsxs("select",{value:K.conduitType,onChange:H=>O(K.id,{conduitType:H.target.value}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"emt",children:t("calculators.electrical.emt")}),e.jsx("option",{value:"pvc",children:t("calculators.electrical.pvc")}),e.jsx("option",{value:"flex",children:t("calculators.electrical.flexible")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.conduitSize")}),e.jsxs("select",{value:K.conduitSize,onChange:H=>O(K.id,{conduitSize:Number(H.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:.5,children:t("calculators.electrical.halfInch")}),e.jsx("option",{value:.75,children:t("calculators.electrical.threeQuarterInch")}),e.jsx("option",{value:1,children:t("calculators.electrical.oneInch")})]})]})]}),e.jsx("button",{onClick:()=>le(K.id),className:"mt-4 text-red-500 hover:text-red-600 text-sm font-medium",children:t("calculators.electrical.removeCircuit")})]},K.id)),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.electrical.additionalOptions")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includePanel",checked:m,onChange:K=>h(K.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includePanel",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.electrical.includePanel")})]}),m&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 pl-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"panelSize",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.panelSize")}),e.jsxs("select",{id:"panelSize",value:x,onChange:K=>f(Number(K.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:100,children:t("calculators.electrical.oneHundredAmp")}),e.jsx("option",{value:150,children:t("calculators.electrical.oneFiftyAmp")}),e.jsx("option",{value:200,children:t("calculators.electrical.twoHundredAmp")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"panelSpaces",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.electrical.panelSpaces")}),e.jsxs("select",{id:"panelSpaces",value:b,onChange:K=>v(Number(K.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:20,children:t("calculators.electrical.twentySpace")}),e.jsx("option",{value:30,children:t("calculators.electrical.thirtySpace")}),e.jsx("option",{value:40,children:t("calculators.electrical.fortySpace")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeGroundRods",checked:j,onChange:K=>S(K.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeGroundRods",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.electrical.includeGroundRods")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeGFCI",checked:C,onChange:K=>B(K.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeGFCI",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.electrical.includeGFCIProtection")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeAFCI",checked:F,onChange:K=>Q(K.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeAFCI",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.electrical.includeAFCIProtection")})]})]})]})]}),e.jsx("button",{onClick:M,disabled:!ie,className:`w-full py-3 px-4 rounded-md font-medium text-white ${ie?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},BU=({onCalculate:s})=>{const{t}=fr(),[r,a]=p.useState(""),[n,i]=p.useState(""),[o,l]=p.useState(""),[d,u]=p.useState(""),[m,h]=p.useState("loose"),[x,f]=p.useState(!1),[b,v]=p.useState(1.5),[j,S]=p.useState(!0),[C,B]=p.useState(""),[F,Q]=p.useState(!0),[q,P]=p.useState(15),D=()=>({length:r,width:n,depth:o,removalCostPerYard:d,soilType:m,hasSlopedSides:x,slopeRatio:b,includeHaulOff:j,totalHaulOffCost:C,addSpoilFactor:F,spoilFactor:q}),_=E=>{E.inputs&&(a(E.inputs.length??""),i(E.inputs.width??""),l(E.inputs.depth??""),u(E.inputs.removalCostPerYard??""),h(E.inputs.soilType??"loose"),f(E.inputs.hasSlopedSides??!1),v(E.inputs.slopeRatio??1.5),S(E.inputs.includeHaulOff??!0),B(E.inputs.totalHaulOffCost??""),Q(E.inputs.addSpoilFactor??!0),P(E.inputs.spoilFactor??15))},$=()=>{a(""),i(""),l(""),u(""),h("loose"),f(!1),v(1.5),S(!0),B(""),Q(!0),P(15)},k=()=>{if(typeof r=="number"&&typeof n=="number"&&typeof o=="number"&&typeof d=="number"){let E=0;const O=[];if(!x)E=r*n*o/27;else{const M=o*b,ie=r+2*M,K=n+2*M;E=(r*n+ie*K)/2*o/27}const le=F?E*(1+q/100):E;O.push({label:t("calculators.excavation.baseExcavationVolume"),value:Number(E.toFixed(2)),unit:t("calculators.excavation.cubicYards")}),F&&O.push({label:t("calculators.excavation.volumeWithSpoilFactor",{factor:q}),value:Number(le.toFixed(2)),unit:t("calculators.excavation.cubicYards")});const te=le*d;let V=te;O.push({label:t("calculators.excavation.removalCost"),value:Number(te.toFixed(2)),unit:t("calculators.excavation.usd"),cost:te}),j&&typeof C=="number"&&(V+=C,O.push({label:t("calculators.excavation.totalHaulOffCost"),value:Number(C.toFixed(2)),unit:t("calculators.excavation.usd"),cost:C})),O.push({label:t("calculators.excavation.totalCost"),value:Number(V.toFixed(2)),unit:t("calculators.excavation.usd"),isTotal:!0}),s(O)}},L=typeof r=="number"&&typeof n=="number"&&typeof o=="number"&&typeof d=="number"&&(!j||typeof C=="number");return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(TC,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.excavation.title")})]}),e.jsx(Ks,{calculatorType:"excavation",getCurrentInputs:D,onLoadEstimate:_,onNewEstimate:$}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.lengthFeet")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:r,onChange:E=>a(E.target.value?Number(E.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.excavation.enterLengthInFeet")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"width",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.widthFeet")}),e.jsx("input",{type:"number",id:"width",min:"0",step:"0.1",value:n,onChange:E=>i(E.target.value?Number(E.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.excavation.enterWidthInFeet")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"depth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.depthFeet")}),e.jsx("input",{type:"number",id:"depth",min:"0",step:"0.1",value:o,onChange:E=>l(E.target.value?Number(E.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.excavation.enterDepthInFeet")})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"removalCostPerYard",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.removalCostPerCubicYard")}),e.jsx("input",{type:"number",id:"removalCostPerYard",min:"0",step:"0.01",value:d,onChange:E=>u(E.target.value?Number(E.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.excavation.enterRemovalCostPerCubicYard")})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.excavation.siteConditions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"soilType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.soilType")}),e.jsxs("select",{id:"soilType",value:m,onChange:E=>h(E.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"loose",children:t("calculators.excavation.looseSoil")}),e.jsx("option",{value:"compacted",children:t("calculators.excavation.compactedSoil")}),e.jsx("option",{value:"rock",children:t("calculators.excavation.rockySoil")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"hasSlopedSides",checked:x,onChange:E=>f(E.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"hasSlopedSides",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.excavation.includeSlopedSides")})]})]}),x&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"slopeRatio",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.slopeRatio")}),e.jsxs("select",{id:"slopeRatio",value:b,onChange:E=>v(Number(E.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:1,children:t("calculators.excavation.slope1to1")}),e.jsx("option",{value:1.5,children:t("calculators.excavation.slope1_5to1")}),e.jsx("option",{value:2,children:t("calculators.excavation.slope2to1")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.excavation.additionalOptions")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"addSpoilFactor",checked:F,onChange:E=>Q(E.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"addSpoilFactor",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.excavation.addSpoilFactor")})]}),F&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"spoilFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.spoilFactorPercentage")}),e.jsxs("select",{id:"spoilFactor",value:q,onChange:E=>P(Number(E.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:t("calculators.excavation.spoilFactor10")}),e.jsx("option",{value:15,children:t("calculators.excavation.spoilFactor15")}),e.jsx("option",{value:20,children:t("calculators.excavation.spoilFactor20")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeHaulOff",checked:j,onChange:E=>S(E.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeHaulOff",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.excavation.includeHaulOff")})]}),j&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"totalHaulOffCost",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.excavation.totalHaulOffCostForJob")}),e.jsx("input",{type:"number",id:"totalHaulOffCost",min:"0",step:"0.01",value:C,onChange:E=>B(E.target.value?Number(E.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.excavation.enterTotalHaulOffCost")})]})]})]})]}),e.jsx("button",{onClick:k,disabled:!L,className:`w-full py-3 px-4 rounded-md font-medium text-white ${L?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},kU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("fence",r==="custom"),{getCustomPrice:i,getCustomUnitValue:o}=ma("fence"),[l,d]=p.useState("privacy"),[u,m]=p.useState("wood"),[h,x]=p.useState("wood"),[f,b]=p.useState(""),[v,j]=p.useState(""),[S,C]=p.useState(8),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState("level"),[_,$]=p.useState(""),[k,L]=p.useState(!0),[E,O]=p.useState(!1),[le,te]=p.useState("concrete"),[V,M]=p.useState(""),[ie,K]=p.useState(15),[H,I]=p.useState(""),[ee,se]=p.useState(""),de={wood:24.98,"vinyl-5x5":42,"vinyl-4x4":27,metal:42},re={privacy:{wood:{panel:45.98,rail:12.98,cap:4.98},vinyl:{panel:89.98,rail:19.98,cap:6.98},metal:{panel:79.98,rail:16.98,cap:5.98},composite:{panel:129.98,rail:24.98,cap:8.98}},picket:{wood:{picket:2.98,rail:9.98,cap:3.98},vinyl:{picket:4.98,rail:14.98,cap:5.98},metal:{picket:3.98,rail:12.98,cap:4.98},composite:{picket:6.98,rail:19.98,cap:7.98}},"chain-link":{metal:{fabric:5.98,rail:8.98,cap:2.98}},ranch:{wood:{rail:14.98,cap:4.98},vinyl:{rail:24.98,cap:6.98}},panel:{wood:{panel:69.98,cap:4.98},vinyl:{panel:129.98,cap:6.98},composite:{panel:189.98,cap:8.98}}},z={single:{wood:129.98,vinyl:199.98,metal:169.98,composite:249.98},double:{wood:249.98,vinyl:399.98,metal:329.98,composite:499.98},rolling:{wood:399.98,vinyl:599.98,metal:499.98,composite:799.98}},ne={single:49.98,double:89.98,rolling:149.98},Y=p.useMemo(()=>r==="custom"?{wood:i("Wood Post",24.98,"posts"),"vinyl-5x5":i("Vinyl 5x5 Post",42,"posts"),"vinyl-4x4":i("Vinyl 4x4 Post",27,"posts"),metal:i("Metal Post",42,"posts")}:de,[r,i]),X=p.useMemo(()=>r==="custom"?{privacy:{wood:{panel:i("Privacy Fence - Wood Panel",45.98,"panels"),rail:12.98,cap:4.98},vinyl:{panel:i("Privacy Fence - Vinyl Panel",89.98,"panels"),rail:19.98,cap:6.98},metal:{panel:i("Privacy Fence - Metal Panel",79.98,"panels"),rail:16.98,cap:5.98},composite:{panel:i("Privacy Fence - Composite Panel",129.98,"panels"),rail:24.98,cap:8.98}},picket:{wood:{picket:i("Picket Fence - Wood Picket",2.98,"panels"),rail:9.98,cap:3.98},vinyl:{picket:i("Picket Fence - Vinyl Picket",4.98,"panels"),rail:14.98,cap:5.98},metal:{picket:i("Picket Fence - Metal Picket",3.98,"panels"),rail:12.98,cap:4.98},composite:{picket:i("Picket Fence - Composite Picket",6.98,"panels"),rail:19.98,cap:7.98}},"chain-link":{metal:{fabric:i("Chain-Link Fabric",5.98,"panels"),rail:8.98,cap:2.98}},ranch:{wood:{rail:i("Ranch Rail - Wood",14.98,"panels"),cap:4.98},vinyl:{rail:i("Ranch Rail - Vinyl",24.98,"panels"),cap:6.98}},panel:{wood:{panel:i("Wood Panel (8ft)",69.98,"panels"),cap:4.98},vinyl:{panel:i("Vinyl Panel (8ft)",129.98,"panels"),cap:6.98},composite:{panel:i("Composite Panel (8ft)",189.98,"panels"),cap:8.98}}}:re,[r,i]),ye=p.useMemo(()=>r==="custom"?{single:{wood:i("Single Gate - Wood",129.98,"gates"),vinyl:i("Single Gate - Vinyl",199.98,"gates"),metal:i("Single Gate - Metal",169.98,"gates"),composite:i("Single Gate - Composite",249.98,"gates")},double:{wood:i("Double Gate - Wood",249.98,"gates"),vinyl:i("Double Gate - Vinyl",399.98,"gates"),metal:i("Double Gate - Metal",329.98,"gates"),composite:i("Double Gate - Composite",499.98,"gates")},rolling:{wood:i("Rolling Gate - Wood",399.98,"gates"),vinyl:i("Rolling Gate - Vinyl",599.98,"gates"),metal:i("Rolling Gate - Metal",499.98,"gates"),composite:i("Rolling Gate - Composite",799.98,"gates")}}:z,[r,i]),pe=p.useMemo(()=>r==="custom"?{single:i("Gate Hardware - Single",49.98,"components"),double:i("Gate Hardware - Double",89.98,"components"),rolling:i("Gate Hardware - Rolling",149.98,"components")}:ne,[r,i]),Ce=ue=>{const ge=typeof v=="number"?v:72,oe=ue==="single"?36:ue==="double"?72:120,J={id:Date.now().toString(),width:oe,height:ge,type:ue,material:u,includeHardware:!0};F([...B,J])},je=(ue,ge)=>{F(B.map(oe=>oe.id===ue?{...oe,...ge}:oe))},ce=ue=>{F(B.filter(ge=>ge.id!==ue))},Te=()=>{const ue={id:Date.now().toString(),angle:90};q([...Q,ue])},We=(ue,ge)=>{q(Q.map(oe=>oe.id===ue?{...oe,...ge}:oe))},Le=ue=>{q(Q.filter(ge=>ge.id!==ue))},U=()=>({fenceType:l,material:u,postMaterial:h,length:f,height:v,postSpacing:S,gates:B,corners:Q,slopeType:P,slopePercentage:_,includePostCaps:k,includeKickboard:E,postMountType:le,concreteDepth:V,wasteFactor:ie,customLinearFeet:H,customPricePerFoot:ee}),fe=ue=>{ue.fenceType&&d(ue.fenceType),ue.material&&m(ue.material),ue.postMaterial&&x(ue.postMaterial),ue.length!==void 0&&b(ue.length),ue.height!==void 0&&j(ue.height),ue.postSpacing&&C(ue.postSpacing),ue.gates&&F(ue.gates),ue.corners&&q(ue.corners),ue.slopeType&&D(ue.slopeType),ue.slopePercentage!==void 0&&$(ue.slopePercentage),ue.includePostCaps!==void 0&&L(ue.includePostCaps),ue.includeKickboard!==void 0&&O(ue.includeKickboard),ue.postMountType&&te(ue.postMountType),ue.concreteDepth!==void 0&&M(ue.concreteDepth),ue.wasteFactor&&K(ue.wasteFactor),ue.customLinearFeet!==void 0&&I(ue.customLinearFeet),ue.customPricePerFoot!==void 0&&se(ue.customPricePerFoot)},Se=()=>{d("privacy"),m("wood"),x("wood"),b(""),j(""),C(8),F([]),q([]),D("level"),$(""),L(!0),O(!1),te("concrete"),M(""),K(15),I(""),se("")},Re=()=>{if(l==="custom"){if(typeof H=="number"&&typeof ee=="number"){const ue=[],ge=H*ee;ue.push({label:"Custom Fencing",value:H,unit:"Linear Feet",cost:ge}),ue.push({label:t("calculators.fencing.totalEstimatedCost"),value:Number(ge.toFixed(2)),unit:t("calculators.fencing.currencyUnit"),isTotal:!0}),s(ue)}return}if(typeof f=="number"&&typeof v=="number"){const ue=[];let ge=0;const oe=Math.ceil(f/S)+1+Q.length,J=Y[h],Ae=oe*J;ge+=Ae;const Fe=h==="vinyl-5x5"?"Vinyl 5x5":h==="vinyl-4x4"?"Vinyl 4x4":h.charAt(0).toUpperCase()+h.slice(1);if(ue.push({label:`${Fe} ${t("calculators.fencing.posts")}`,value:oe,unit:t("calculators.fencing.postsUnit"),cost:Ae}),k){const Qe=X[l]?.[u]?.cap||0,Ie=oe*Qe;ge+=Ie,ue.push({label:t("calculators.fencing.postCaps"),value:oe,unit:t("calculators.fencing.capsUnit"),cost:Ie})}if(le==="concrete"&&typeof V=="number"){const Ie=V*.33*oe/27,et=Math.ceil(Ie*4)*6.98;ge+=et,ue.push({label:t("calculators.fencing.concreteMix"),value:Math.ceil(Ie*4),unit:t("calculators.fencing.concreteBagsUnit"),cost:et})}else if(le==="spike"){const Qe=oe*12.98;ge+=Qe,ue.push({label:t("calculators.fencing.postSpikes"),value:oe,unit:t("calculators.fencing.piecesUnit"),cost:Qe})}else if(le==="bracket"){const Qe=oe*14.98;ge+=Qe,ue.push({label:t("calculators.fencing.postMountingBrackets"),value:oe,unit:t("calculators.fencing.piecesUnit"),cost:Qe})}if(l==="privacy"||l==="panel"){const Qe=X[l]?.[u]?.panel||0,Ie=o("Fence Panel",8,"panels"),et=Math.ceil(f/Ie),ot=et*Qe;ge+=ot,ue.push({label:`${u.charAt(0).toUpperCase()+u.slice(1)} ${t("calculators.fencing.panels")}`,value:et,unit:t("calculators.fencing.panelsUnit"),cost:ot})}else if(l==="picket"){const Qe=X.picket?.[u]?.picket||0,Ie=o("Pickets",2,"pickets"),et=Math.ceil(f*Ie),ot=et*Qe;ge+=ot,ue.push({label:`${u.charAt(0).toUpperCase()+u.slice(1)} ${t("calculators.fencing.pickets")}`,value:et,unit:t("calculators.fencing.picketsUnit"),cost:ot})}else if(l==="chain-link"){const Qe=X["chain-link"]?.metal?.fabric||5.98,Ie=o("Chain-Link Fabric",9,"fabric"),et=f*v/Ie,ot=et*Qe;ge+=ot,ue.push({label:t("calculators.fencing.chainLinkFabric"),value:Number(et.toFixed(2)),unit:t("calculators.fencing.squareYardsUnit"),cost:ot})}if(l!=="panel"){const Qe=l==="ranch"?3:2,Ie=X[l]?.[u]?.rail||0,et=o("Rail Section",8,"rails"),ot=Math.ceil(f/et)*Qe,lt=ot*Ie;ge+=lt,ue.push({label:`${u.charAt(0).toUpperCase()+u.slice(1)} ${t("calculators.fencing.rails")}`,value:ot,unit:t("calculators.fencing.railsUnit"),cost:lt})}if(E){const Ie=Math.ceil(f/8),et=Ie*8.98;ge+=et,ue.push({label:t("calculators.fencing.kickboard"),value:Ie,unit:t("calculators.fencing.kickboardUnit"),cost:et})}B.forEach(Qe=>{const et=ye[Qe.type]?.[Qe.material]||0;if(ge+=et,ue.push({label:`${Qe.type.charAt(0).toUpperCase()+Qe.type.slice(1)} ${t("calculators.fencing.gate")}`,value:1,unit:t("calculators.fencing.gateUnit"),cost:et}),Qe.includeHardware){const ot=pe[Qe.type];ge+=ot,ue.push({label:`${Qe.type.charAt(0).toUpperCase()+Qe.type.slice(1)} ${t("calculators.fencing.gateHardware")}`,value:1,unit:t("calculators.fencing.gateHardwareUnit"),cost:ot})}}),ue.push({label:t("calculators.fencing.totalEstimatedCost"),value:Number(ge.toFixed(2)),unit:t("calculators.fencing.currencyUnit"),isTotal:!0}),s(ue)}},G=l==="custom"?typeof H=="number"&&typeof ee=="number":typeof f=="number"&&typeof v=="number"&&(!E||typeof v=="number")&&(le!=="concrete"||typeof V=="number");return r==="custom"&&a?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Cf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.fencing.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Cf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.fencing.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Cf,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Cf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.fencing.title")})]}),e.jsx(Ks,{calculatorType:"fence",getCurrentInputs:U,onLoadEstimate:fe,onNewEstimate:Se}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fenceType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.fenceType")}),e.jsxs("select",{id:"fenceType",value:l,onChange:ue=>d(ue.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"privacy",children:t("calculators.fencing.privacyFence")}),e.jsx("option",{value:"picket",children:t("calculators.fencing.picketFence")}),e.jsx("option",{value:"chain-link",children:t("calculators.fencing.chainLinkFence")}),e.jsx("option",{value:"ranch",children:t("calculators.fencing.ranchRailFence")}),e.jsx("option",{value:"panel",children:t("calculators.fencing.panelFence")}),e.jsx("option",{value:"custom",children:"Custom Fencing (Linear Footage)"})]})]}),l!=="custom"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"material",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.material")}),e.jsxs("select",{id:"material",value:u,onChange:ue=>m(ue.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[l!=="chain-link"&&e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"wood",children:t("calculators.fencing.wood")}),e.jsx("option",{value:"vinyl",children:t("calculators.fencing.vinyl")}),l!=="ranch"&&e.jsx("option",{value:"composite",children:t("calculators.fencing.composite")})]}),(l==="chain-link"||l==="picket")&&e.jsx("option",{value:"metal",children:t("calculators.fencing.metal")})]})]}),l!=="custom"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postMaterial",className:"block text-sm font-medium text-slate-700 mb-1",children:"Post Material"}),e.jsxs("select",{id:"postMaterial",value:h,onChange:ue=>x(ue.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"wood",children:"Wood ($24.98)"}),e.jsx("option",{value:"vinyl-5x5",children:"Vinyl 5x5 ($42.00)"}),e.jsx("option",{value:"vinyl-4x4",children:"Vinyl 4x4 ($27.00)"}),e.jsx("option",{value:"metal",children:"Metal ($42.00)"})]})]})]}),l==="custom"&&e.jsxs("div",{className:"mb-6 p-6 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Custom Fencing Calculator"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customLinearFeet",className:"block text-sm font-medium text-slate-700 mb-1",children:"Total Linear Feet"}),e.jsx("input",{type:"number",id:"customLinearFeet",min:"0",step:"0.1",value:H,onChange:ue=>I(ue.target.value?Number(ue.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter total linear feet"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customPricePerFoot",className:"block text-sm font-medium text-slate-700 mb-1",children:"Price Per Linear Foot ($)"}),e.jsx("input",{type:"number",id:"customPricePerFoot",min:"0",step:"0.01",value:ee,onChange:ue=>se(ue.target.value?Number(ue.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 25.00"})]})]}),e.jsxs("p",{className:"mt-4 text-sm text-slate-600",children:[e.jsx("strong",{children:"Note:"})," Custom fencing allows you to quickly calculate total cost based on your known linear footage and price per foot."]})]}),l!=="custom"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.totalLength")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:f,onChange:ue=>b(ue.target.value?Number(ue.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.fencing.enterFenceLength")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.height")}),e.jsx("input",{type:"number",id:"height",min:"0",step:"1",value:v,onChange:ue=>j(ue.target.value?Number(ue.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.fencing.enterFenceHeight")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postSpacing",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.postSpacing")}),e.jsxs("select",{id:"postSpacing",value:S,onChange:ue=>C(Number(ue.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:6,children:t("calculators.fencing.sixFeet")}),e.jsx("option",{value:8,children:t("calculators.fencing.eightFeet")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.fencing.gates")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Ce("single"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.fencing.addSingleGate")}),e.jsx("button",{onClick:()=>Ce("double"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.fencing.addDoubleGate")}),e.jsx("button",{onClick:()=>Ce("rolling"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.fencing.addRollingGate")})]})]}),B.map(ue=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.gateWidth")}),e.jsx("input",{type:"number",min:"0",step:"1",value:ue.width,onChange:ge=>je(ue.id,{width:Number(ge.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.gateHeight")}),e.jsx("input",{type:"number",min:"0",step:"1",value:ue.height,onChange:ge=>je(ue.id,{height:Number(ge.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.material")}),e.jsxs("select",{value:ue.material,onChange:ge=>je(ue.id,{material:ge.target.value}),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"wood",children:t("calculators.fencing.wood")}),e.jsx("option",{value:"vinyl",children:t("calculators.fencing.vinyl")}),e.jsx("option",{value:"metal",children:t("calculators.fencing.metal")}),e.jsx("option",{value:"composite",children:t("calculators.fencing.composite")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:ue.includeHardware,onChange:ge=>je(ue.id,{includeHardware:ge.target.checked}),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.fencing.includeHardware")})]})]}),e.jsx("button",{onClick:()=>ce(ue.id),className:"mt-4 text-red-500 hover:text-red-600",children:t("calculators.fencing.removeGate")})]},ue.id))]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.fencing.corners")}),e.jsx("button",{onClick:Te,className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.fencing.addCorner")})]}),Q.map(ue=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.cornerAngle")}),e.jsx("input",{type:"number",min:"0",max:"180",step:"1",value:ue.angle,onChange:ge=>We(ue.id,{angle:Number(ge.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsx("button",{onClick:()=>Le(ue.id),className:"mt-4 text-red-500 hover:text-red-600",children:t("calculators.fencing.removeCorner")})]},ue.id))]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.fencing.terrainInstallation")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"slopeType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.slopeType")}),e.jsxs("select",{id:"slopeType",value:P,onChange:ue=>D(ue.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"level",children:t("calculators.fencing.levelGround")}),e.jsx("option",{value:"stepping",children:t("calculators.fencing.stepping")}),e.jsx("option",{value:"racking",children:t("calculators.fencing.racking")})]})]}),P!=="level"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"slopePercentage",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.slopePercentage")}),e.jsx("input",{type:"number",id:"slopePercentage",min:"0",max:"100",step:"1",value:_,onChange:ue=>$(ue.target.value?Number(ue.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.fencing.enterSlopePercentage")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"postMountType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.postMountingMethod")}),e.jsxs("select",{id:"postMountType",value:le,onChange:ue=>te(ue.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"concrete",children:t("calculators.fencing.concrete")}),e.jsx("option",{value:"spike",children:t("calculators.fencing.groundSpike")}),e.jsx("option",{value:"bracket",children:t("calculators.fencing.surfaceMountBracket")})]})]}),le==="concrete"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"concreteDepth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.postHoleDepth")}),e.jsx("input",{type:"number",id:"concreteDepth",min:"0",step:"1",value:V,onChange:ue=>M(ue.target.value?Number(ue.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.fencing.enterPostHoleDepth")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.fencing.additionalOptions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includePostCaps",checked:k,onChange:ue=>L(ue.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includePostCaps",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.fencing.includePostCaps")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeKickboard",checked:E,onChange:ue=>O(ue.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeKickboard",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.fencing.includeKickboard")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wasteFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.fencing.wasteFactor")}),e.jsxs("select",{id:"wasteFactor",value:ie,onChange:ue=>K(Number(ue.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:t("calculators.fencing.wasteFactorSimple")}),e.jsx("option",{value:15,children:t("calculators.fencing.wasteFactorAverage")}),e.jsx("option",{value:20,children:t("calculators.fencing.wasteFactorComplex")})]})]})]})]})]})]}),e.jsx("button",{onClick:Re,disabled:!G,className:`w-full py-3 px-4 rounded-md font-medium text-white ${G?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},C2={hardwood:[{name:'3/4" Oak Strip',width:2.25,length:84,piecesPerBox:24,sqftPerBox:25,pricePerBox:159.98,requiresUnderlayment:!1,patterns:["straight","diagonal","herringbone"]},{name:'3/4" Oak Plank',width:5,length:84,piecesPerBox:12,sqftPerBox:25,pricePerBox:179.98,requiresUnderlayment:!1,patterns:["straight","diagonal"]},{name:"Custom Hardwood",width:0,length:0,piecesPerBox:0,sqftPerBox:0,pricePerBox:0,requiresUnderlayment:!1,patterns:["straight","diagonal","herringbone"]}],engineered:[{name:'3/8" Engineered Oak',width:5,length:48,piecesPerBox:8,sqftPerBox:22,pricePerBox:129.98,requiresUnderlayment:!0,patterns:["straight","diagonal"]},{name:'1/2" Engineered Maple',width:7,length:48,piecesPerBox:6,sqftPerBox:20,pricePerBox:149.98,requiresUnderlayment:!0,patterns:["straight","diagonal"]},{name:"Custom Engineered",width:0,length:0,piecesPerBox:0,sqftPerBox:0,pricePerBox:0,requiresUnderlayment:!0,patterns:["straight","diagonal"]}],laminate:[{name:"8mm Laminate",width:7.6,length:54,piecesPerBox:8,sqftPerBox:22.5,pricePerBox:49.98,requiresUnderlayment:!0,patterns:["straight"]},{name:"12mm Laminate",width:7.6,length:54,piecesPerBox:6,sqftPerBox:17.5,pricePerBox:69.98,requiresUnderlayment:!0,patterns:["straight"]},{name:"Custom Laminate",width:0,length:0,piecesPerBox:0,sqftPerBox:0,pricePerBox:0,requiresUnderlayment:!0,patterns:["straight"]}],vinyl:[{name:"Luxury Vinyl Plank",width:7,length:48,piecesPerBox:10,sqftPerBox:23.64,pricePerBox:89.98,requiresUnderlayment:!1,patterns:["straight","diagonal"]},{name:"WPC Vinyl Plank",width:7,length:48,piecesPerBox:8,sqftPerBox:19.2,pricePerBox:109.98,requiresUnderlayment:!1,patterns:["straight","diagonal"]},{name:"Custom Vinyl",width:0,length:0,piecesPerBox:0,sqftPerBox:0,pricePerBox:0,requiresUnderlayment:!1,patterns:["straight","diagonal"]}],carpet:[{name:"Plush Carpet",width:144,length:144,piecesPerBox:1,sqftPerBox:144,pricePerBox:359.98,requiresUnderlayment:!0,patterns:["straight"]},{name:"Berber Carpet",width:144,length:144,piecesPerBox:1,sqftPerBox:144,pricePerBox:299.98,requiresUnderlayment:!0,patterns:["straight"]},{name:"Custom Carpet",width:0,length:0,piecesPerBox:0,sqftPerBox:0,pricePerBox:0,requiresUnderlayment:!0,patterns:["straight"]}]},S2={standard:{name:"Standard Foam",pricePerSqft:.45},premium:{name:"Premium Foam with Vapor Barrier",pricePerSqft:.75},"moisture-barrier":{name:"Moisture Barrier",pricePerSqft:.35}},FU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{materials:a,loading:n,isConfigured:i}=Aa("flooring",r==="custom"),{getCustomPrice:o,getCustomUnitValue:l}=ma("flooring"),[d,u]=p.useState("dimensions"),[m,h]=p.useState(""),[x,f]=p.useState(""),[b,v]=p.useState(""),[j,S]=p.useState("hardwood"),[C,B]=p.useState(0),[F,Q]=p.useState("straight"),[q,P]=p.useState(10),[D,_]=p.useState(!0),[$,k]=p.useState("standard"),[L,E]=p.useState(!1),[O,le]=p.useState(""),[te,V]=p.useState(""),[M,ie]=p.useState(""),[K,H]=p.useState(""),I=X=>X.name.startsWith("Custom"),ee=p.useMemo(()=>{if(r==="custom"&&i&&a.length>0){const X=a.filter(ye=>ye.category==="flooring-material");if(X.length>0){const ye={hardwood:[],engineered:[],laminate:[],vinyl:[],carpet:[]};return X.forEach(pe=>{const Ce=pe.metadata||{},je=Ce.flooring_type||"hardwood";ye[je].push({name:pe.name,width:Ce.width||5,length:Ce.length||48,piecesPerBox:Ce.pieces_per_box||10,sqftPerBox:Ce.sqft_per_box||20,pricePerBox:pe.price,requiresUnderlayment:Ce.requires_underlayment!==!1,patterns:Ce.patterns||["straight"]})}),Object.keys(ye).forEach(pe=>{const Ce=pe;ye[Ce].length===0&&(ye[Ce]=C2[Ce])}),ye}}return C2},[r,i,a]),se=p.useMemo(()=>{if(r==="custom"&&i&&a.length>0){const X=a.filter(ye=>ye.category==="flooring-underlayment");if(X.length>0){const ye={};return X.forEach(pe=>{const Ce=pe.id.substring(0,10);ye[Ce]={name:pe.name,pricePerSqft:pe.metadata?.price_per_sqft||pe.price}}),Object.keys(ye).length>0?ye:S2}}return S2},[r,i,a]);p.useEffect(()=>{r==="custom"&&ee[j]?.length>0?ee[j].find((ye,pe)=>pe===C)||B(0):r==="default"&&(ee[j]?.find((ye,pe)=>pe===C)||B(0))},[r,ee,j]);const de=()=>({inputType:d,length:m,width:x,area:b,flooringType:j,selectedFlooring:C,installPattern:F,wasteFactor:q,includeUnderlayment:D,underlaymentType:$,includeTransitionStrips:L,transitionStripLength:O,customName:te,customPricePerBox:M,customSqftPerBox:K}),re=X=>{X.inputType&&u(X.inputType),X.length!==void 0&&h(X.length),X.width!==void 0&&f(X.width),X.area!==void 0&&v(X.area),X.flooringType&&S(X.flooringType),X.selectedFlooring!==void 0&&B(X.selectedFlooring),X.installPattern&&Q(X.installPattern),X.wasteFactor!==void 0&&P(X.wasteFactor),X.includeUnderlayment!==void 0&&_(X.includeUnderlayment),X.underlaymentType&&k(X.underlaymentType),X.includeTransitionStrips!==void 0&&E(X.includeTransitionStrips),X.transitionStripLength!==void 0&&le(X.transitionStripLength),X.customName!==void 0&&V(X.customName),X.customPricePerBox!==void 0&&ie(X.customPricePerBox),X.customSqftPerBox!==void 0&&H(X.customSqftPerBox)},z=()=>{u("dimensions"),h(""),f(""),v(""),S("hardwood"),B(0),Q("straight"),P(10),_(!0),k("standard"),E(!1),le(""),V(""),ie(""),H("")},ne=()=>{let X;if(d==="dimensions"&&typeof m=="number"&&typeof x=="number")X=m*x;else if(d==="area"&&typeof b=="number")X=b;else return;let ye=ee[j]?.[C];if(!ye)return;if(I(ye))if(typeof M=="number"&&typeof K=="number")ye={...ye,name:te||ye.name,sqftPerBox:K,pricePerBox:M};else return;const pe=F==="diagonal"?1.1:F==="herringbone"?1.15:1,Ce=X*(1+q/100)*pe,je=Math.ceil(Ce/ye.sqftPerBox),ce=je*ye.pricePerBox,Te=[{label:t("calculators.flooring.totalArea"),value:Number(X.toFixed(2)),unit:t("calculators.flooring.squareFeet")},{label:`${t("calculators.flooring.areaWith")} ${q}% ${t("calculators.flooring.waste")}${F!=="straight"?` & ${F} ${t("calculators.flooring.pattern")}`:""}`,value:Number(Ce.toFixed(2)),unit:t("calculators.flooring.squareFeet")},{label:`${ye.name}`,value:je,unit:t("calculators.flooring.boxes"),cost:ce}];let We=ce;if(D&&ye.requiresUnderlayment){const Le=l("Underlayment",100,"underlayment"),U=Math.ceil(Ce/Le),fe=se[$]?.pricePerSqft||.45,Se=o(se[$]?.name||"Standard Foam",fe,"underlayment"),Re=U*(Se*Le);We+=Re,Te.push({label:`${se[$]?.name||"Underlayment"}`,value:U,unit:t("calculators.flooring.rolls100sf"),cost:Re})}if(L&&typeof O=="number"){const Le=l("Transition Strips",4,"trim"),U=Math.ceil(O/Le),fe=U*o("Transition Strips",19.98,"trim");We+=fe,Te.push({label:t("calculators.flooring.transitionStrips"),value:U,unit:t("calculators.flooring.pieces4ft"),cost:fe})}Te.push({label:t("calculators.flooring.totalCost"),value:Number(We.toFixed(2)),unit:"USD",isTotal:!0}),s(Te)},Y=(d==="dimensions"&&typeof m=="number"&&typeof x=="number"||d==="area"&&typeof b=="number")&&(!L||typeof O=="number")&&(!I(ee[j]?.[C]||{})||typeof M=="number"&&typeof K=="number");return r==="custom"&&n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.flooring.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!i?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.flooring.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Mn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.flooring.title")})]}),e.jsx(Ks,{calculatorType:"flooring",getCurrentInputs:de,onLoadEstimate:re,onNewEstimate:z}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-between mb-4",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${d==="dimensions"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("dimensions"),children:t("calculators.flooring.useDimensions")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${d==="area"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("area"),children:t("calculators.flooring.useSquareFootage")})]})}),d==="dimensions"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.length")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:m,onChange:X=>h(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.flooring.lengthPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"width",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.width")}),e.jsx("input",{type:"number",id:"width",min:"0",step:"0.1",value:x,onChange:X=>f(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.flooring.widthPlaceholder")})]})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.totalArea")}),e.jsx("input",{type:"number",id:"area",min:"0",step:"0.1",value:b,onChange:X=>v(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.flooring.totalAreaPlaceholder")})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.flooring.flooringSelection")}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"flooringType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.flooringType")}),e.jsxs("select",{id:"flooringType",value:j,onChange:X=>{S(X.target.value),B(0),Q("straight"),V(""),ie(""),H("")},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"hardwood",children:t("calculators.flooring.hardwood")}),e.jsx("option",{value:"engineered",children:t("calculators.flooring.engineered")}),e.jsx("option",{value:"laminate",children:t("calculators.flooring.laminate")}),e.jsx("option",{value:"vinyl",children:t("calculators.flooring.vinyl")}),e.jsx("option",{value:"carpet",children:t("calculators.flooring.carpet")})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"selectedFlooring",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.productSelection")}),e.jsx("select",{id:"selectedFlooring",value:C,onChange:X=>{B(Number(X.target.value)),V(""),ie(""),H("")},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:ee[j]?.map((X,ye)=>e.jsxs("option",{value:ye,children:[X.name,!I(X)&&` ($${X.pricePerBox.toFixed(2)}/box, ${X.sqftPerBox} sq ft/box)`]},ye))})]}),I(ee[j]?.[C]||{})&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customName",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.productName")}),e.jsx("input",{type:"text",id:"customName",value:te,onChange:X=>V(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.flooring.productNamePlaceholder")})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customPricePerBox",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.pricePerBox")}),e.jsx("input",{type:"number",id:"customPricePerBox",min:"0",step:"0.01",value:M,onChange:X=>ie(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.flooring.pricePerBoxPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customSqftPerBox",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.sqftPerBox")}),e.jsx("input",{type:"number",id:"customSqftPerBox",min:"0",step:"0.01",value:K,onChange:X=>H(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.flooring.sqftPerBoxPlaceholder")})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.flooring.installationDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"installPattern",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.installationPattern")}),e.jsx("select",{id:"installPattern",value:F,onChange:X=>Q(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:(ee[j]?.[C]?.patterns||["straight"]).map(X=>e.jsx("option",{value:X,children:X.charAt(0).toUpperCase()+X.slice(1)},X))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wasteFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.wasteFactor")}),e.jsxs("select",{id:"wasteFactor",value:q,onChange:X=>P(Number(X.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:t("calculators.flooring.wasteFactor10")}),e.jsx("option",{value:15,children:t("calculators.flooring.wasteFactor15")}),e.jsx("option",{value:20,children:t("calculators.flooring.wasteFactor20")})]})]})]})]}),(ee[j]?.[C]?.requiresUnderlayment||!1)&&e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeUnderlayment",checked:D,onChange:X=>_(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeUnderlayment",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.flooring.includeUnderlayment")})]}),D&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"underlaymentType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.underlaymentType")}),e.jsx("select",{id:"underlaymentType",value:$,onChange:X=>k(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:Object.entries(se).map(([X,ye])=>e.jsxs("option",{value:X,children:[ye.name," ($",ye.pricePerSqft.toFixed(2),"/sqft)"]},X))})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeTransitionStrips",checked:L,onChange:X=>E(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeTransitionStrips",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.flooring.includeTransitionStrips")})]}),L&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"transitionStripLength",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.flooring.transitionStripLength")}),e.jsx("input",{type:"number",id:"transitionStripLength",min:"0",step:"0.1",value:O,onChange:X=>le(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.flooring.transitionStripLengthPlaceholder")})]})]})]}),e.jsx("button",{onClick:ne,disabled:!Y,className:`w-full py-3 px-4 rounded-md font-medium text-white ${Y?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},EU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("foundation",r==="custom"),{getCustomPrice:i,getCustomUnitValue:o}=ma("foundation"),[l,d]=p.useState("strip-footing"),[u,m]=p.useState(!1),[h,x]=p.useState(""),[f,b]=p.useState(""),[v,j]=p.useState(""),[S,C]=p.useState(""),[B,F]=p.useState(""),[Q,q]=p.useState(""),[P,D]=p.useState(""),[_,$]=p.useState("clay"),[k,L]=p.useState("gravel"),[E,O]=p.useState(""),[le,te]=p.useState(!0),[V,M]=p.useState(!0),[ie,K]=p.useState("#4"),[H,I]=p.useState(16),[ee,se]=p.useState(!0),[de,re]=p.useState(!0),[z,ne]=p.useState(3500),[Y,X]=p.useState(""),[ye,pe]=p.useState(!1),[Ce,je]=p.useState(""),ce=p.useMemo(()=>({3e3:i("concrete_3000",125),3500:i("concrete_3500",135),4e3:i("concrete_4000",145),4500:i("concrete_4500",155)}),[i]),Te=p.useMemo(()=>i("rebar",12.98),[i]),We=p.useMemo(()=>({vaporBarrier:i("vapor_barrier",89.98),waterproofing:i("waterproofing",45.98),drainPipe:i("drain_pipe",12.98),gravel:i("gravel",45),backfillNative:i("backfill_native",15),backfillGravel:i("backfill_gravel",45),backfillSand:i("backfill_sand",35),icfMaterial:i("icf_material",12)}),[i]),Le=()=>({foundationType:l,isBasement:u,length:h,width:f,footingWidth:v,footingDepth:S,stemWallHeight:B,stemWallThickness:Q,slabThickness:P,soilType:_,backfillType:k,frostDepth:E,includeVaporBarrier:le,includeSteelReinforcement:V,rebarSize:ie,rebarSpacing:H,includeWaterproofing:ee,includeDrainage:de,concreteStrength:z,gravelBaseDepth:Y,includeICF:ye,icfWallHeight:Ce}),U=G=>{d(G.foundationType||"strip-footing"),m(G.isBasement||!1),x(G.length||""),b(G.width||""),j(G.footingWidth||""),C(G.footingDepth||""),F(G.stemWallHeight||""),q(G.stemWallThickness||""),D(G.slabThickness||""),$(G.soilType||"clay"),L(G.backfillType||"gravel"),O(G.frostDepth||""),te(G.includeVaporBarrier??!0),M(G.includeSteelReinforcement??!0),K(G.rebarSize||"#4"),I(G.rebarSpacing||16),se(G.includeWaterproofing??!0),re(G.includeDrainage??!0),ne(G.concreteStrength||3500),X(G.gravelBaseDepth||""),pe(G.includeICF||!1),je(G.icfWallHeight||"")},fe=()=>{d("strip-footing"),m(!1),x(""),b(""),j(""),C(""),F(""),q(""),D(""),$("clay"),L("gravel"),O(""),te(!0),M(!0),K("#4"),I(16),se(!0),re(!0),ne(3500),X(""),pe(!1),je("")},Se=()=>{if(typeof h=="number"&&typeof f=="number"&&typeof v=="number"&&typeof S=="number"&&typeof B=="number"&&typeof Q=="number"&&typeof P=="number"&&typeof Y=="number"){const G=[];let ue=0;const ge=2*(h+f),oe=h*f,J=v/12,Ae=S/12,Fe=ge*J*Ae/27,Qe=Fe*(ce[z]||135);ue+=Qe,G.push({label:`${t("calculators.foundation.footingConcrete")} (${z} PSI)`,value:Number(Fe.toFixed(2)),unit:t("calculators.foundation.cubicYards"),cost:Qe});const Ie=ge*B*(Q/12)/27,et=Ie*(ce[z]||135);if(ue+=et,G.push({label:`${t(u?"calculators.foundation.basementWall":"calculators.foundation.stemWall")} ${t("calculators.foundation.concrete")} (${z} PSI)`,value:Number(Ie.toFixed(2)),unit:t("calculators.foundation.cubicYards"),cost:et}),!u){const bt=f-Q/12*2,jt=(h-Q/12*2)*bt,qe=B-(P/12+Y/12),ht=jt*qe/27,yt={native:We.backfillNative,gravel:We.backfillGravel,sand:We.backfillSand},ft=ht*(yt[k]||15);ue+=ft,G.push({label:`${t(`calculators.foundation.${k}`)} ${t("calculators.foundation.backfill")}`,value:Number(ht.toFixed(2)),unit:t("calculators.foundation.cubicYards"),cost:ft})}const ot=oe*(Y/12)/27,lt=ot*We.gravel;ue+=lt,G.push({label:t("calculators.foundation.gravelBase"),value:Number(ot.toFixed(2)),unit:t("calculators.foundation.cubicYards"),cost:lt});const vt=oe*(P/12)/27,ct=vt*(ce[z]||135);if(ue+=ct,G.push({label:`${t(u?"calculators.foundation.basementFloor":"calculators.foundation.slab")} ${t("calculators.foundation.concrete")} (${z} PSI)`,value:Number(vt.toFixed(2)),unit:t("calculators.foundation.cubicYards"),cost:ct}),V){const bt=ge*2,Ut=o("Rebar",20,"rebar"),jt=Math.ceil(bt/Ut),qe=jt*Te;ue+=qe,G.push({label:t("calculators.foundation.footingRebar"),value:jt,unit:t("calculators.foundation.pieces20ft"),cost:qe});const yt=Math.ceil(ge*12/16),ft=B+2,Qt=Math.ceil(yt*ft/Ut),br=Math.ceil(ge*2/Ut),Wt=(Qt+br)*Te;ue+=Wt,G.push({label:`${t(u?"calculators.foundation.basementWall":"calculators.foundation.stemWall")} ${t("calculators.foundation.rebar")}`,value:Qt+br,unit:t("calculators.foundation.pieces20ft"),cost:Wt});const pr=H/12,Gr=Math.ceil(f/pr)+1,Dt=Math.ceil(h/pr)+1,ts=Gr*h+Dt*f,Ps=Math.ceil(ts/Ut),Vr=Ps*Te;ue+=Vr,G.push({label:`${t(u?"calculators.foundation.floor":"calculators.foundation.slab")} ${t("calculators.foundation.rebar")} (${H}" ${t("calculators.foundation.onCenter")})`,value:Ps,unit:t("calculators.foundation.pieces20ft"),cost:Vr})}if(le){const bt=oe*1.1,Ut=o("Vapor Barrier",1e3,"vapor-barrier"),jt=Math.ceil(bt/Ut),qe=jt*We.vaporBarrier;ue+=qe,G.push({label:t("calculators.foundation.vaporBarrier"),value:jt,unit:t("calculators.foundation.rolls1000sf"),cost:qe})}if(ee){const bt=ge*B*1.1,Ut=o("Waterproofing",100,"waterproofing"),jt=Math.ceil(bt/Ut),qe=jt*We.waterproofing;ue+=qe,G.push({label:t("calculators.foundation.waterproofing"),value:jt,unit:t("calculators.foundation.gallons"),cost:qe})}if(de){const bt=Math.ceil(ge*1.1),Ut=Math.ceil(bt/10),jt=Ut*We.drainPipe;ue+=jt,G.push({label:t("calculators.foundation.drainagePipe"),value:Ut,unit:t("calculators.foundation.sections10ft"),cost:jt});const qe=ge*2*2/27,ht=qe*We.gravel;ue+=ht,G.push({label:t("calculators.foundation.drainageGravel"),value:Number(qe.toFixed(2)),unit:t("calculators.foundation.cubicYards"),cost:ht})}if(ye&&typeof Ce=="number"){const bt=ge*Ce,Ut=bt*We.icfMaterial;ue+=Ut,G.push({label:"ICF Walls (Materials Only)",value:Number(bt.toFixed(2)),unit:"sq ft",cost:Ut});const jt=ge*Ce*(6/12)/27,qe=jt*(ce[z]||135);ue+=qe,G.push({label:`ICF Wall Concrete (${z} PSI)`,value:Number(jt.toFixed(2)),unit:t("calculators.foundation.cubicYards"),cost:qe})}G.push({label:t("calculators.foundation.totalCost"),value:Number(ue.toFixed(2)),unit:"USD",isTotal:!0}),s(G)}},Re=typeof h=="number"&&typeof f=="number"&&typeof v=="number"&&typeof S=="number"&&typeof B=="number"&&typeof Q=="number"&&typeof P=="number"&&typeof Y=="number";return r==="custom"&&a?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Rm,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.foundation.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Rm,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.foundation.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Rm,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Rm,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.foundation.title")})]}),e.jsx(Ks,{calculatorType:"foundation",currentInputs:Le(),onLoadEstimate:U,onNewEstimate:fe}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-between mb-4",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="strip-footing"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-l-lg`,onClick:()=>d("strip-footing"),children:t("calculators.foundation.stripFooting")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="spread-footings"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border-t border-b border-slate-300`,onClick:()=>d("spread-footings"),children:t("calculators.foundation.spreadFootings")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="thickened-edge"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border-t border-b border-slate-300`,onClick:()=>d("thickened-edge"),children:t("calculators.foundation.thickenedEdge")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="frost-wall"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-r-lg`,onClick:()=>d("frost-wall"),children:t("calculators.foundation.frostWall")})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isBasement",checked:u,onChange:G=>m(G.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"isBasement",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.foundation.isBasement")})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.length")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:h,onChange:G=>x(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.foundation.enterLength")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"width",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.width")}),e.jsx("input",{type:"number",id:"width",min:"0",step:"0.1",value:f,onChange:G=>b(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.foundation.enterWidth")})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.foundation.footingDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"footingWidth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.footingWidth")}),e.jsx("input",{type:"number",id:"footingWidth",min:"0",step:"1",value:v,onChange:G=>j(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.foundation.enterFootingWidth")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"footingDepth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.footingDepth")}),e.jsx("input",{type:"number",id:"footingDepth",min:"0",step:"1",value:S,onChange:G=>C(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.foundation.enterFootingDepth")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t(u?"calculators.foundation.basementWallDetails":"calculators.foundation.stemWallDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stemWallHeight",className:"block text-sm font-medium text-slate-700 mb-1",children:t(u?"calculators.foundation.wallHeight":"calculators.foundation.stemWallHeight")}),e.jsx("input",{type:"number",id:"stemWallHeight",min:"0",step:"0.1",value:B,onChange:G=>F(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t(u?"calculators.foundation.enterWallHeight":"calculators.foundation.enterStemWallHeight")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"stemWallThickness",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.wallThickness")}),e.jsx("input",{type:"number",id:"stemWallThickness",min:"0",step:"1",value:Q,onChange:G=>q(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.foundation.enterWallThickness")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t(u?"calculators.foundation.basementFloorDetails":"calculators.foundation.slabDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"slabThickness",className:"block text-sm font-medium text-slate-700 mb-1",children:t(u?"calculators.foundation.floorThickness":"calculators.foundation.slabThickness")}),e.jsx("input",{type:"number",id:"slabThickness",min:"0",step:"0.5",value:P,onChange:G=>D(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t(u?"calculators.foundation.enterFloorThickness":"calculators.foundation.enterSlabThickness")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gravelBaseDepth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.gravelBaseDepth")}),e.jsx("input",{type:"number",id:"gravelBaseDepth",min:"0",step:"1",value:Y,onChange:G=>X(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.foundation.enterGravelBaseDepth")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.foundation.siteConditions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"soilType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.soilType")}),e.jsxs("select",{id:"soilType",value:_,onChange:G=>$(G.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"sandy",children:t("calculators.foundation.sandySoil")}),e.jsx("option",{value:"clay",children:t("calculators.foundation.claySoil")}),e.jsx("option",{value:"rock",children:t("calculators.foundation.rockySoil")})]})]}),!u&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"backfillType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.backfillMaterial")}),e.jsxs("select",{id:"backfillType",value:k,onChange:G=>L(G.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"native",children:t("calculators.foundation.native")}),e.jsx("option",{value:"gravel",children:t("calculators.foundation.gravel")}),e.jsx("option",{value:"sand",children:t("calculators.foundation.sand")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"frostDepth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.frostDepth")}),e.jsx("input",{type:"number",id:"frostDepth",min:"0",step:"1",value:E,onChange:G=>O(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.foundation.enterFrostDepth")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.foundation.concreteReinforcement")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"concreteStrength",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.concreteStrength")}),e.jsxs("select",{id:"concreteStrength",value:z,onChange:G=>ne(Number(G.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:3e3,children:"3000 PSI"}),e.jsx("option",{value:3500,children:"3500 PSI"}),e.jsx("option",{value:4e3,children:"4000 PSI"}),e.jsx("option",{value:4500,children:"4500 PSI"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeSteelReinforcement",checked:V,onChange:G=>M(G.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeSteelReinforcement",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.foundation.includeSteelReinforcement")})]})]}),V&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rebarSize",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.rebarSize")}),e.jsxs("select",{id:"rebarSize",value:ie,onChange:G=>K(G.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"#3",children:t("calculators.foundation.rebarSize3")}),e.jsx("option",{value:"#4",children:t("calculators.foundation.rebarSize4")}),e.jsx("option",{value:"#5",children:t("calculators.foundation.rebarSize5")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rebarSpacing",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.foundation.rebarSpacing")}),e.jsxs("select",{id:"rebarSpacing",value:H,onChange:G=>I(Number(G.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:12,children:t("calculators.foundation.rebarSpacing12")}),e.jsx("option",{value:16,children:t("calculators.foundation.rebarSpacing16")}),e.jsx("option",{value:18,children:t("calculators.foundation.rebarSpacing18")})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.foundation.additionalOptions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeVaporBarrier",checked:le,onChange:G=>te(G.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeVaporBarrier",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.foundation.includeVaporBarrier")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeWaterproofing",checked:ee,onChange:G=>se(G.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeWaterproofing",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.foundation.includeWaterproofing")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeDrainage",checked:de,onChange:G=>re(G.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeDrainage",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.foundation.includeDrainage")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"ICF Walls"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeICF",checked:ye,onChange:G=>pe(G.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeICF",className:"ml-2 block text-sm font-medium text-slate-700",children:"Include ICF Walls (Insulated Concrete Forms)"})]}),ye&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"icfWallHeight",className:"block text-sm font-medium text-slate-700 mb-1",children:"ICF Wall Height (ft)"}),e.jsx("input",{type:"number",id:"icfWallHeight",min:"0",step:"0.1",value:Ce,onChange:G=>je(G.target.value?Number(G.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter ICF wall height in feet"}),e.jsxs("p",{className:"mt-2 text-xs text-slate-500",children:["Formula: (Length  2 + Width  2)  Height = Total SqFt",e.jsx("br",{}),"Estimation = Total SqFt  $12/sqft (materials only, concrete calculated separately)"]})]})]})]}),e.jsx("button",{onClick:Se,disabled:!Re,className:`w-full py-3 px-4 rounded-md font-medium text-white ${Re?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.foundation.calculateMaterials")})]})},_U=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("framing",r==="custom"),{getCustomPrice:i,getCustomUnitValue:o}=ma("framing"),[l,d]=p.useState("wall"),[u,m]=p.useState(""),[h,x]=p.useState(""),[f,b]=p.useState(16),[v,j]=p.useState(2),[S,C]=p.useState("2x4"),[B,F]=p.useState([]),[Q,q]=p.useState(!1),[P,D]=p.useState(!1),[_,$]=p.useState(!1),[k,L]=p.useState(!0),[E,O]=p.useState("osb"),[le,te]=p.useState("7/16"),V={"2x4":3.98,"2x6":5.98},M={osb:{"7/16":15.98,"15/32":18.98,"19/32":22.98},plywood:{"7/16":24.98,"15/32":28.98,"19/32":32.98}},ie={tiedown:12.98,nailBox:89.98},K=X=>{F([...B,{width:3,height:X==="door"?7:4,type:X,roughOpening:!0}])},H=(X,ye,pe)=>{const Ce=[...B];Ce[X]={...Ce[X],[ye]:pe},F(Ce)},I=X=>{F(B.filter((ye,pe)=>pe!==X))},ee=X=>{const ye=V[X]||0;return i(`lumber_${X}`,ye,"lumber")},se=(X,ye)=>{const pe=M[X]?.[ye]||0,Ce=`${X}_${ye.replace(/\//g,"_")}`;return i(Ce,pe,"sheathing")},de=()=>({framingType:l,length:u,height:h,studSpacing:f,plateCount:v,lumberSize:S,openings:B,includeBlocking:Q,includeFireblocking:P,includeTiedowns:_,includeSheathing:k,sheathingType:E,sheathingThickness:le}),re=X=>{d(X.framingType||"wall"),m(X.length||""),x(X.height||""),b(X.studSpacing||16),j(X.plateCount||2),C(X.lumberSize||"2x4"),F(X.openings||[]),q(X.includeBlocking||!1),D(X.includeFireblocking||!1),$(X.includeTiedowns||!1),L(X.includeSheathing!==void 0?X.includeSheathing:!0),O(X.sheathingType||"osb"),te(X.sheathingThickness||"7/16")},z=()=>{d("wall"),m(""),x(""),b(16),j(2),C("2x4"),F([]),q(!1),D(!1),$(!1),L(!0),O("osb"),te("7/16")},ne=()=>{if(typeof u=="number"&&(l==="floor"||typeof h=="number")){const X=f/12,ye=Math.ceil(u/X)+1,pe=B.reduce((et,ot)=>et+(ot.roughOpening?4:2),0),Ce=ye+pe,je=o("Lumber",16,"lumber"),ce=u,Te=v,We=Math.ceil(ce/je)*Te,Le=B.reduce((et,ot)=>{const lt=ot.width+1;return et+Math.ceil(lt/je)*2},0),U=ee(S),fe=Ce*U,Se=We*U,Re=Le*U,G=[{label:t("calculators.framing.studs",{size:S,spacing:f}),value:Ce,unit:t("calculators.framing.pieces"),cost:fe},{label:t("calculators.framing.plates",{size:S}),value:We,unit:t("calculators.framing.pieces"),cost:Se}];if(B.length>0&&G.push({label:t("calculators.framing.headers",{size:S}),value:Le,unit:t("calculators.framing.pieces"),cost:Re}),Q){const et=Math.ceil(ye/2),ot=et*U;G.push({label:t("calculators.framing.blocking"),value:et,unit:t("calculators.framing.pieces"),cost:ot})}if(P&&l==="wall"){const et=Math.ceil(ye/3),ot=et*U;G.push({label:t("calculators.framing.fireblocking"),value:et,unit:t("calculators.framing.pieces"),cost:ot})}if(_){const et=Math.ceil(u/16)+1,ot=i("tiedown",ie.tiedown,"hardware"),lt=et*ot;G.push({label:t("calculators.framing.tiedowns"),value:et,unit:t("calculators.framing.pieces"),cost:lt})}if(k){const et=u*(l==="wall"?h:1),lt=Math.ceil(et/32),vt=lt*se(E,le);G.push({label:t("calculators.framing.sheathing",{type:E.toUpperCase(),thickness:le}),value:lt,unit:t("calculators.framing.sheets"),cost:vt})}const ge=Math.ceil((Ce+We+Le)*2),oe=o("Framing Nails",30,"hardware"),J=Math.ceil(ge/oe),Ae=o("Nail Box",1e3,"hardware"),Fe=Math.ceil(J*oe/Ae),Qe=i("nail_box",ie.nailBox,"hardware"),Ie=Fe*Qe;G.push({label:t("calculators.framing.nails"),value:Fe,unit:t("calculators.framing.nailBoxes"),cost:Ie}),s(G)}};if(r==="custom"&&a)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ff,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.framing.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]});if(r==="custom"&&!n)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ff,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.framing.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ff,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]});const Y=typeof u=="number"&&(l==="floor"||typeof h=="number");return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ff,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.framing.title")})]}),e.jsx(Ks,{calculatorType:"framing",getCurrentInputs:de,onLoadEstimate:re,onNewEstimate:z}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-between mb-4",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="wall"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-l-lg`,onClick:()=>d("wall"),children:t("calculators.framing.wall")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="floor"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border-t border-b border-slate-300`,onClick:()=>d("floor"),children:t("calculators.framing.floor")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="ceiling"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-r-lg`,onClick:()=>d("ceiling"),children:t("calculators.framing.ceiling")})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.length")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:u,onChange:X=>m(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.framing.lengthPlaceholder")})]}),l==="wall"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.height")}),e.jsx("input",{type:"number",id:"height",min:"0",step:"0.1",value:h,onChange:X=>x(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.framing.heightPlaceholder")})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"studSpacing",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.studSpacing")}),e.jsxs("select",{id:"studSpacing",value:f,onChange:X=>b(Number(X.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:16,children:t("calculators.framing.spacing16")}),e.jsx("option",{value:24,children:t("calculators.framing.spacing24")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lumberSize",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.lumberSize")}),e.jsxs("select",{id:"lumberSize",value:S,onChange:X=>C(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"2x4",children:t("calculators.framing.lumber2x4")}),e.jsx("option",{value:"2x6",children:t("calculators.framing.lumber2x6")})]})]}),l==="wall"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"plateCount",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.plateConfiguration")}),e.jsxs("select",{id:"plateCount",value:v,onChange:X=>j(Number(X.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:2,children:t("calculators.framing.singleTopPlate")}),e.jsx("option",{value:3,children:t("calculators.framing.doubleTopPlate")})]})]})]}),l==="wall"&&e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.framing.openings")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>K("door"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.framing.addDoor")}),e.jsx("button",{onClick:()=>K("window"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.framing.addWindow")})]})]}),B.map((X,ye)=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.widthFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:X.width,onChange:pe=>H(ye,"width",Number(pe.target.value)),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.heightFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:X.height,onChange:pe=>H(ye,"height",Number(pe.target.value)),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.includeRoughOpening")}),e.jsxs("div",{className:"flex items-center h-[42px]",children:[e.jsx("input",{type:"checkbox",checked:X.roughOpening,onChange:pe=>H(ye,"roughOpening",pe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("span",{className:"ml-2 text-sm text-slate-600",children:t("calculators.framing.add2Inches")})]})]})]}),e.jsx("button",{onClick:()=>I(ye),className:"mt-2 text-red-500 hover:text-red-600",children:t("calculators.framing.removeOpening")})]},ye))]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.framing.additionalOptions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeBlocking",checked:Q,onChange:X=>q(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeBlocking",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.framing.includeBlocking")})]}),l==="wall"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeFireblocking",checked:P,onChange:X=>D(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeFireblocking",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.framing.includeFireblocking")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeTiedowns",checked:_,onChange:X=>$(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeTiedowns",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.framing.includeTiedowns")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeSheathing",checked:k,onChange:X=>L(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeSheathing",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.framing.includeSheathing")})]}),k&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sheathingType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.sheathingType")}),e.jsxs("select",{id:"sheathingType",value:E,onChange:X=>O(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"osb",children:t("calculators.framing.osb")}),e.jsx("option",{value:"plywood",children:t("calculators.framing.plywood")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sheathingThickness",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.framing.thickness")}),e.jsxs("select",{id:"sheathingThickness",value:le,onChange:X=>te(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"7/16",children:'7/16"'}),e.jsx("option",{value:"15/32",children:'15/32"'}),e.jsx("option",{value:"19/32",children:'19/32"'})]})]})]})]})]}),e.jsx("button",{onClick:ne,disabled:!Y,className:`w-full py-3 px-4 rounded-md font-medium text-white ${Y?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},U0={aluminum:{5:{name:'5" K-Style Aluminum',pricePerFoot:4.98,maxSpan:35},6:{name:'6" K-Style Aluminum',pricePerFoot:6.98,maxSpan:40},custom:{name:"Custom Aluminum",pricePerFoot:0,maxSpan:0}},vinyl:{5:{name:'5" K-Style Vinyl',pricePerFoot:3.98,maxSpan:30},6:{name:'6" K-Style Vinyl',pricePerFoot:5.98,maxSpan:35},custom:{name:"Custom Vinyl",pricePerFoot:0,maxSpan:0}},galvanized:{5:{name:'5" K-Style Galvanized',pricePerFoot:7.98,maxSpan:35},6:{name:'6" K-Style Galvanized',pricePerFoot:9.98,maxSpan:40},custom:{name:"Custom Galvanized",pricePerFoot:0,maxSpan:0}},copper:{5:{name:'5" K-Style Copper',pricePerFoot:24.98,maxSpan:35},6:{name:'6" K-Style Copper',pricePerFoot:29.98,maxSpan:40},custom:{name:"Custom Copper",pricePerFoot:0,maxSpan:0}}},PU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{materials:a,pricing:n,loading:i,isConfigured:o}=Aa("gutter",r==="custom"),{getCustomUnitValue:l}=ma("gutter"),[d,u]=p.useState(""),[m,h]=p.useState("aluminum"),[x,f]=p.useState("5"),[b,v]=p.useState(""),[j,S]=p.useState(""),[C,B]=p.useState("2x3"),[F,Q]=p.useState(""),[q,P]=p.useState(4),[D,_]=p.useState(""),[$,k]=p.useState(!1),[L,E]=p.useState(!1),[O,le]=p.useState(""),[te,V]=p.useState(!0),[M,ie]=p.useState(!0),[K,H]=p.useState(""),I=p.useMemo(()=>{if(r==="custom"&&o&&a.length>0){const X=a.filter(ye=>ye.category==="gutters");if(X.length>0){const ye={};return X.forEach(pe=>{const Ce=pe.id.substring(0,10),je=pe.metadata||{};ye[Ce]={5:{name:`5" ${pe.name}`,pricePerFoot:je.price_5||pe.price,maxSpan:je.maxSpan_5||35},6:{name:`6" ${pe.name}`,pricePerFoot:je.price_6||pe.price,maxSpan:je.maxSpan_6||40},custom:{name:`Custom ${pe.name}`,pricePerFoot:0,maxSpan:0}}}),Object.keys(ye).length>0?ye:U0}}return U0},[r,o,a]),ee=p.useMemo(()=>{if(r==="custom"&&o&&a.length>0){const X=a.filter(ye=>ye.category==="downspouts");if(X.length>0){const ye={};return X.forEach(pe=>{const Ce=pe.metadata||{};ye["2x3"]=Ce.price_2x3||pe.price,ye["3x4"]=Ce.price_3x4||pe.price,ye.custom=0}),ye}}return{"2x3":3.98,"3x4":5.98,custom:0}},[r,o,a]),se=p.useMemo(()=>r==="custom"&&o&&n&&Object.keys(n).length>0?{leafGuard:n.leaf_guard||4.98,leafGuardCopper:n.leaf_guard_copper||8.98,heatTape:n.heat_tape||6.98,endcap:n.endcap||4.98,endcapCopper:n.endcap_copper||12.98,corner:n.corner||8.98,cornerCopper:n.corner_copper||24.98,hanger:n.hanger||1.98,hangerCopper:n.hanger_copper||3.98}:{leafGuard:4.98,leafGuardCopper:8.98,heatTape:6.98,endcap:4.98,endcapCopper:12.98,corner:8.98,cornerCopper:24.98,hanger:1.98,hangerCopper:3.98},[r,o,n]);p.useEffect(()=>{r==="custom"&&Object.keys(I).length>0?I[m]||(h(Object.keys(I)[0]),f("5")):r==="default"&&(U0[m]||(h("aluminum"),f("5")))},[r,I]);const de=()=>({roofLength:d,gutterMaterial:m,gutterSize:x,customGutterPrice:b,customGutterMaxSpan:j,downspoutSize:C,customDownspoutPrice:F,roofPitch:q,valleyCount:D,includeLeafGuards:$,includeHeatTape:L,heatTapeLength:O,includeEndcaps:te,includeCorners:M,cornerCount:K}),re=X=>{u(X.roofLength??""),h(X.gutterMaterial??"aluminum"),f(X.gutterSize??"5"),v(X.customGutterPrice??""),S(X.customGutterMaxSpan??""),B(X.downspoutSize??"2x3"),Q(X.customDownspoutPrice??""),P(X.roofPitch??4),_(X.valleyCount??""),k(X.includeLeafGuards??!1),E(X.includeHeatTape??!1),le(X.heatTapeLength??""),V(X.includeEndcaps??!0),ie(X.includeCorners??!0),H(X.cornerCount??"")},z=()=>{u(""),h("aluminum"),f("5"),v(""),S(""),B("2x3"),Q(""),P(4),_(""),k(!1),E(!1),le(""),V(!0),ie(!0),H("")},ne=()=>{if(typeof d=="number"){const X=[];let ye=0;const pe=1+q/12;let je=d*pe;if(typeof D=="number"){const J=D*5;je+=J}let ce=x==="custom"&&typeof b=="number"?b:I[m]?.[x]?.pricePerFoot||0;const Te=je*ce;ye+=Te,X.push({label:`${x}" ${m.charAt(0).toUpperCase()+m.slice(1)} Gutters`,value:Number(je.toFixed(2)),unit:"linear feet",cost:Te});const We=l("Downspout Spacing",35,"downspouts"),Le=Math.ceil(je/We),U=l("Downspout Length",15,"downspouts"),fe=Le*U,Se=C==="custom"&&typeof F=="number"?F:ee[C]||0,Re=fe*Se;if(ye+=Re,X.push({label:`${C} Downspouts`,value:Le,unit:"pieces",cost:Re}),te){const J=l("Endcap Section",50,"accessories"),Ae=Math.ceil(je/J)*2,Fe=m==="copper"?se.endcapCopper:se.endcap,Qe=Ae*Fe;ye+=Qe,X.push({label:"Endcaps",value:Ae,unit:"pieces",cost:Qe})}if(M&&typeof K=="number"){const J=m==="copper"?se.cornerCopper:se.corner,Ae=K*J;ye+=Ae,X.push({label:"Inside/Outside Corners",value:K,unit:"pieces",cost:Ae})}if($){const J=m==="copper"?se.leafGuardCopper:se.leafGuard,Ae=je*J;ye+=Ae,X.push({label:"Leaf Guards",value:Number(je.toFixed(2)),unit:"linear feet",cost:Ae})}if(L&&typeof O=="number"){const J=O*se.heatTape;ye+=J,X.push({label:"Heat Tape",value:O,unit:"linear feet",cost:J})}const G=l("Hanger Spacing",2,"accessories"),ue=Math.ceil(je/G),ge=m==="copper"?se.hangerCopper:se.hanger,oe=ue*ge;ye+=oe,X.push({label:"Hangers and Hardware",value:ue,unit:"pieces",cost:oe}),X.push({label:"Total Estimated Cost",value:Number(ye.toFixed(2)),unit:"USD",isTotal:!0}),s(X)}},Y=typeof d=="number"&&(x!=="custom"||typeof b=="number"&&typeof j=="number")&&(C!=="custom"||typeof F=="number")&&(!M||typeof K=="number")&&(!L||typeof O=="number");return r==="custom"&&i?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Nf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.gutters.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!o?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Nf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.gutters.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nf,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Nf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.gutters.title")})]}),e.jsx(Ks,{calculatorType:"gutter",currentInputs:de(),onLoadEstimate:re,onNewEstimate:z}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"roofLength",className:"block text-sm font-medium text-slate-700 mb-1",children:"Total Roof Edge Length (feet)"}),e.jsx("input",{type:"number",id:"roofLength",min:"0",step:"0.1",value:d,onChange:X=>u(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter total length in feet"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"roofPitch",className:"block text-sm font-medium text-slate-700 mb-1",children:"Roof Pitch (inches per foot)"}),e.jsx("select",{id:"roofPitch",value:q,onChange:X=>P(Number(X.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[2,3,4,5,6,7,8,9,10,12].map(X=>e.jsxs("option",{value:X,children:[X,"/12 pitch"]},X))})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Gutter Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gutterMaterial",className:"block text-sm font-medium text-slate-700 mb-1",children:"Gutter Material"}),e.jsxs("select",{id:"gutterMaterial",value:m,onChange:X=>{h(X.target.value),f("5")},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"aluminum",children:"Aluminum"}),e.jsx("option",{value:"vinyl",children:"Vinyl"}),e.jsx("option",{value:"galvanized",children:"Galvanized Steel"}),e.jsx("option",{value:"copper",children:"Copper"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"gutterSize",className:"block text-sm font-medium text-slate-700 mb-1",children:"Gutter Size"}),e.jsxs("select",{id:"gutterSize",value:x,onChange:X=>f(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"5",children:'5" K-Style'}),e.jsx("option",{value:"6",children:'6" K-Style'}),e.jsx("option",{value:"custom",children:"Custom Size"})]})]})]}),x==="custom"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customGutterPrice",className:"block text-sm font-medium text-slate-700 mb-1",children:"Custom Gutter Price (per foot)"}),e.jsx("input",{type:"number",id:"customGutterPrice",min:"0",step:"0.01",value:b,onChange:X=>v(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter price per foot"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customGutterMaxSpan",className:"block text-sm font-medium text-slate-700 mb-1",children:"Maximum Span (feet)"}),e.jsx("input",{type:"number",id:"customGutterMaxSpan",min:"0",step:"1",value:j,onChange:X=>S(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter maximum span"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Downspouts"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"downspoutSize",className:"block text-sm font-medium text-slate-700 mb-1",children:"Downspout Size"}),e.jsxs("select",{id:"downspoutSize",value:C,onChange:X=>B(X.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"2x3",children:'2" x 3"'}),e.jsx("option",{value:"3x4",children:'3" x 4"'}),e.jsx("option",{value:"custom",children:"Custom Size"})]})]}),C==="custom"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customDownspoutPrice",className:"block text-sm font-medium text-slate-700 mb-1",children:"Custom Downspout Price (per foot)"}),e.jsx("input",{type:"number",id:"customDownspoutPrice",min:"0",step:"0.01",value:F,onChange:X=>Q(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter price per foot"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Additional Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"valleyCount",className:"block text-sm font-medium text-slate-700 mb-1",children:"Number of Valleys"}),e.jsx("input",{type:"number",id:"valleyCount",min:"0",step:"1",value:D,onChange:X=>_(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter number of valleys"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeLeafGuards",checked:$,onChange:X=>k(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeLeafGuards",className:"ml-2 block text-sm font-medium text-slate-700",children:"Include Leaf Guards"})]})]})]}),e.jsx("div",{className:"border-t border-slate-200 pt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeEndcaps",checked:te,onChange:X=>V(X.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeEndcaps",className:"ml-2 block text-sm font-medium text-slate-700",children:"Include Endcaps"})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeCorners",checked:M,onChange:X=>{ie(X.target.checked),X.target.checked||H("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeCorners",className:"ml-2 block text-sm font-medium text-slate-700",children:"Include Corners"})]})}),M&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"cornerCount",className:"block text-sm font-medium text-slate-700 mb-1",children:"Number of Corners"}),e.jsx("input",{type:"number",id:"cornerCount",min:"0",step:"1",value:K,onChange:X=>H(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter number of corners"})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeHeatTape",checked:L,onChange:X=>{E(X.target.checked),X.target.checked||le("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeHeatTape",className:"ml-2 block text-sm font-medium text-slate-700",children:"Include Heat Tape"})]})}),L&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"heatTapeLength",className:"block text-sm font-medium text-slate-700 mb-1",children:"Heat Tape Length (feet)"}),e.jsx("input",{type:"number",id:"heatTapeLength",min:"0",step:"1",value:O,onChange:X=>le(X.target.value?Number(X.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter heat tape length"})]})]})})]}),e.jsx("button",{onClick:ne,disabled:!Y,className:`w-full py-3 px-4 rounded-md font-medium text-white ${Y?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},IU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{materials:a,pricing:n,loading:i,isConfigured:o}=Aa("hvac",r==="custom");ma("hvac");const[l,d]=p.useState("split"),[u,m]=p.useState([]),[h,x]=p.useState([]),[f,b]=p.useState("moderate"),[v,j]=p.useState(!1),[S,C]=p.useState(!1),[B,F]=p.useState(!1),[Q,q]=p.useState(!1),[P,D]=p.useState(2),[_,$]=p.useState(""),[k,L]=p.useState(""),E=p.useMemo(()=>r==="custom"&&o&&Object.keys(n).length>0?{...n}:{},[r,o,n]),O=p.useMemo(()=>{if(r==="custom"&&o&&a.length>0){const z=a.filter(ne=>ne.category==="hvac_ducts");if(z.length>0){const ne={};return z.forEach(Y=>{const X=Y.metadata?.size||6;ne[`duct_${X}`]=Y.price}),ne}}return{}},[r,o,a]),le=()=>{const z={id:Date.now().toString(),name:t("calculators.hvac.defaultRoomName",{number:u.length+1}),length:0,width:0,height:0,windows:0,exposure:"north",insulation:"average"};m([...u,z])},te=(z,ne)=>{m(u.map(Y=>Y.id===z?{...Y,...ne}:Y))},V=z=>{m(u.filter(ne=>ne.id!==z))},M=()=>{const z={id:Date.now().toString(),type:"supply",size:6,length:0,elbows:0,takeoffs:0};x([...h,z])},ie=(z,ne)=>{x(h.map(Y=>Y.id===z?{...Y,...ne}:Y))},K=z=>{x(h.filter(ne=>ne.id!==z))},H=()=>({systemType:l,rooms:u,ducts:h,climate:f,includeHumidifier:v,includeUVLight:S,includeAirCleaner:B,includeZoning:Q,zoneCount:P,refrigerantLineLength:_,condensateDrainLength:k}),I=z=>{z.systemType&&d(z.systemType),z.rooms&&m(z.rooms),z.ducts&&x(z.ducts),z.climate&&b(z.climate),z.includeHumidifier!==void 0&&j(z.includeHumidifier),z.includeUVLight!==void 0&&C(z.includeUVLight),z.includeAirCleaner!==void 0&&F(z.includeAirCleaner),z.includeZoning!==void 0&&q(z.includeZoning),z.zoneCount&&D(z.zoneCount),z.refrigerantLineLength!==void 0&&$(z.refrigerantLineLength),z.condensateDrainLength!==void 0&&L(z.condensateDrainLength)},ee=()=>{d("split"),m([]),x([]),b("moderate"),j(!1),C(!1),F(!1),q(!1),D(2),$(""),L("")},se=z=>{const ne=z.length*z.width;ne*z.height;let Y=ne*25;return Y*={mild:.9,moderate:1,extreme:1.2}[f],Y*={north:1,south:1.1,east:1.05,west:1.15}[z.exposure],Y*={poor:1.3,average:1,good:.8}[z.insulation],Y+=z.windows*1e3,Math.round(Y)},de=()=>{const z=[];let ne=0;const Y=u.reduce((Ce,je)=>Ce+se(je),0),X=Math.ceil(Y/12e3),ye={split:{condenser:E.condenser_per_ton||X*1200,airHandler:E.air_handler_per_ton||X*800,installation:E.installation_per_ton||X*1e3},package:{unit:E.package_unit_per_ton||X*1800,installation:E.package_installation_per_ton||X*800},"mini-split":{outdoor:E.mini_split_outdoor_per_ton||X*1500,indoor:E.mini_split_indoor_per_head||u.length*500,installation:E.mini_split_installation||X*800+u.length*200}};if(l==="split"){const Ce=ye.split.condenser,je=ye.split.airHandler;ne+=Ce+je,z.push({label:t("calculators.hvac.condenserUnit",{tonnage:X}),value:1,unit:t("calculators.hvac.unit"),cost:Ce},{label:t("calculators.hvac.airHandler",{tonnage:X}),value:1,unit:t("calculators.hvac.unit"),cost:je})}else if(l==="package"){const Ce=ye.package.unit;ne+=Ce,z.push({label:t("calculators.hvac.packageUnit",{tonnage:X}),value:1,unit:t("calculators.hvac.unit"),cost:Ce})}else{const Ce=ye["mini-split"].outdoor,je=ye["mini-split"].indoor;ne+=Ce+je,z.push({label:t("calculators.hvac.miniSplitOutdoor",{tonnage:X}),value:1,unit:t("calculators.hvac.unit"),cost:Ce},{label:t("calculators.hvac.miniSplitIndoor"),value:u.length,unit:t("calculators.hvac.units"),cost:je})}if(l!=="mini-split"){let Ce=0;h.forEach(je=>{const ce=O[`duct_${je.size}`]||(je.size<=6?4.98:je.size<=8?6.98:je.size<=10?8.98:12.98),Te=je.length*ce,We=E[`elbow_${je.size}`]||(je.size<=8?8.98:12.98),Le=je.elbows*We,U=E.takeoff_price||6.98,fe=je.takeoffs*U,Se=Te+Le+fe;Ce+=Se,z.push({label:t(`calculators.hvac.ductwork${je.type.charAt(0).toUpperCase()+je.type.slice(1)}`,{size:je.size}),value:je.length,unit:t("calculators.hvac.linearFeet"),cost:Se})}),ne+=Ce}if(typeof _=="number"&&l!=="package"){const Ce=E.refrigerant_line_per_foot||12.98,je=_*Ce;ne+=je,z.push({label:t("calculators.hvac.refrigerantLineSet"),value:_,unit:t("calculators.hvac.feet"),cost:je})}if(typeof k=="number"){const Ce=E.condensate_drain_per_foot||2.98,je=k*Ce;ne+=je,z.push({label:t("calculators.hvac.condensateDrainLine"),value:k,unit:t("calculators.hvac.feet"),cost:je})}if(v){const Ce=E.humidifier||299.98;ne+=Ce,z.push({label:t("calculators.hvac.wholeHouseHumidifier"),value:1,unit:t("calculators.hvac.unit"),cost:Ce})}if(S){const Ce=E.uv_light||249.98;ne+=Ce,z.push({label:t("calculators.hvac.uvLightSystem"),value:1,unit:t("calculators.hvac.unit"),cost:Ce})}if(B){const Ce=E.air_cleaner||399.98;ne+=Ce,z.push({label:t("calculators.hvac.airCleanerSystem"),value:1,unit:t("calculators.hvac.unit"),cost:Ce})}if(Q){const Ce=E.zone_board||299.98,je=(E.zone_damper||89.98)*P,ce=(E.zone_thermostat||79.98)*P,Te=Ce+je+ce;ne+=Te,z.push({label:t("calculators.hvac.zoneControlSystem",{zones:P}),value:1,unit:t("calculators.hvac.system"),cost:Te})}const pe=l==="split"?ye.split.installation:l==="package"?ye.package.installation:ye["mini-split"].installation;ne+=pe,z.push({label:t("calculators.hvac.installationLabor"),value:1,unit:t("calculators.hvac.service"),cost:pe}),z.push({label:t("calculators.hvac.totalEstimatedCost"),value:Number(ne.toFixed(2)),unit:t("calculators.hvac.usd"),isTotal:!0}),s(z)},re=u.length>0&&u.every(z=>typeof z.length=="number"&&z.length>0&&typeof z.width=="number"&&z.width>0&&typeof z.height=="number"&&z.height>0)&&(l==="mini-split"||h.length>0)&&h.every(z=>typeof z.length=="number"&&z.length>0&&typeof z.elbows=="number"&&typeof z.takeoffs=="number")&&(l==="package"||typeof _=="number")&&typeof k=="number";return r==="custom"&&i?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(sA,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.hvac.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!o?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(sA,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.hvac.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(sA,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(sA,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.hvac.title")})]}),e.jsx(Ks,{calculatorType:"hvac",getCurrentInputs:H,onLoadEstimate:I,onNewEstimate:ee}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="split"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-l-lg`,onClick:()=>d("split"),children:t("calculators.hvac.splitSystem")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="package"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border-t border-b border-slate-300`,onClick:()=>d("package"),children:t("calculators.hvac.packageUnit")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${l==="mini-split"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-r-lg`,onClick:()=>d("mini-split"),children:t("calculators.hvac.miniSplit")})]}),e.jsxs("select",{value:f,onChange:z=>b(z.target.value),className:"px-4 py-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"mild",children:t("calculators.hvac.mildClimate")}),e.jsx("option",{value:"moderate",children:t("calculators.hvac.moderateClimate")}),e.jsx("option",{value:"extreme",children:t("calculators.hvac.extremeClimate")})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.hvac.rooms")}),e.jsx("button",{onClick:le,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.hvac.addRoom")})]}),u.map(z=>e.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.roomName")}),e.jsx("input",{type:"text",value:z.name,onChange:ne=>te(z.id,{name:ne.target.value}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterRoomName")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.lengthFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:z.length||"",onChange:ne=>te(z.id,{length:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterLength")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.widthFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:z.width||"",onChange:ne=>te(z.id,{width:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterWidth")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.heightFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:z.height||"",onChange:ne=>te(z.id,{height:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterHeight")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.numberOfWindows")}),e.jsx("input",{type:"number",min:"0",step:"1",value:z.windows||"",onChange:ne=>te(z.id,{windows:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterNumberOfWindows")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.primaryExposure")}),e.jsxs("select",{value:z.exposure,onChange:ne=>te(z.id,{exposure:ne.target.value}),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"north",children:t("calculators.hvac.north")}),e.jsx("option",{value:"south",children:t("calculators.hvac.south")}),e.jsx("option",{value:"east",children:t("calculators.hvac.east")}),e.jsx("option",{value:"west",children:t("calculators.hvac.west")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.insulationQuality")}),e.jsxs("select",{value:z.insulation,onChange:ne=>te(z.id,{insulation:ne.target.value}),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"poor",children:t("calculators.hvac.poor")}),e.jsx("option",{value:"average",children:t("calculators.hvac.average")}),e.jsx("option",{value:"good",children:t("calculators.hvac.good")})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsx("button",{onClick:()=>V(z.id),className:"text-red-500 hover:text-red-600",children:t("calculators.hvac.removeRoom")}),e.jsx("div",{className:"text-slate-600",children:t("calculators.hvac.estimatedLoad",{btus:se(z).toLocaleString()})})]})]},z.id))]}),l!=="mini-split"&&e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.hvac.ductwork")}),e.jsx("button",{onClick:M,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.hvac.addDuctRun")})]}),h.map(z=>e.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.ductType")}),e.jsxs("select",{value:z.type,onChange:ne=>ie(z.id,{type:ne.target.value}),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"supply",children:t("calculators.hvac.supply")}),e.jsx("option",{value:"return",children:t("calculators.hvac.return")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.ductSizeInches")}),e.jsx("select",{value:z.size,onChange:ne=>ie(z.id,{size:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",children:[4,5,6,7,8,9,10,12,14,16].map(ne=>e.jsxs("option",{value:ne,children:[ne,'"']},ne))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.lengthFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:z.length||"",onChange:ne=>ie(z.id,{length:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterLength")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.numberOfElbows")}),e.jsx("input",{type:"number",min:"0",step:"1",value:z.elbows||"",onChange:ne=>ie(z.id,{elbows:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterNumberOfElbows")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.numberOfTakeoffs")}),e.jsx("input",{type:"number",min:"0",step:"1",value:z.takeoffs||"",onChange:ne=>ie(z.id,{takeoffs:Number(ne.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterNumberOfTakeoffs")})]})]}),e.jsx("button",{onClick:()=>K(z.id),className:"mt-4 text-red-500 hover:text-red-600",children:t("calculators.hvac.removeDuctRun")})]},z.id))]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.hvac.lineSetsAndDrains")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l!=="package"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.refrigerantLineLengthFeet")}),e.jsx("input",{type:"number",min:"0",step:"1",value:_,onChange:z=>$(z.target.value?Number(z.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterLineSetLength")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.condensateDrainLengthFeet")}),e.jsx("input",{type:"number",min:"0",step:"1",value:k,onChange:z=>L(z.target.value?Number(z.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.hvac.enterDrainLength")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.hvac.additionalOptions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeHumidifier",checked:v,onChange:z=>j(z.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeHumidifier",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.hvac.includeWholeHouseHumidifier")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeUVLight",checked:S,onChange:z=>C(z.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeUVLight",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.hvac.includeUVLightSystem")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeAirCleaner",checked:B,onChange:z=>F(z.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeAirCleaner",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.hvac.includeAirCleanerSystem")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeZoning",checked:Q,onChange:z=>q(z.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeZoning",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.hvac.includeZoningSystem")})]}),Q&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"zoneCount",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.hvac.numberOfZones")}),e.jsxs("select",{id:"zoneCount",value:P,onChange:z=>D(Number(z.target.value)),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:2,children:t("calculators.hvac.twoZones")}),e.jsx("option",{value:3,children:t("calculators.hvac.threeZones")}),e.jsx("option",{value:4,children:t("calculators.hvac.fourZones")})]})]})]})]})]}),e.jsx("button",{onClick:de,disabled:!re,className:`w-full py-3 px-4 rounded-md font-medium text-white ${re?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},UU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("junk-removal",r==="custom"),{getCustomPrice:i}=ma("junk-removal"),[o,l]=p.useState([]),[d,u]=p.useState(!0),[m,h]=p.useState(2),[x,f]=p.useState(""),[b,v]=p.useState(!0),[j,S]=p.useState(!1),[C,B]=p.useState(!1),[F,Q]=p.useState("easy"),[q,P]=p.useState(1),D={furniture:{sofa:{volume:60,weight:150},loveseat:{volume:40,weight:100},armchair:{volume:25,weight:75},"dining-table":{volume:45,weight:120},"mattress-twin":{volume:20,weight:40},"mattress-full":{volume:30,weight:55},"mattress-queen":{volume:35,weight:65},"mattress-king":{volume:42,weight:80},dresser:{volume:35,weight:100},bookshelf:{volume:30,weight:85}},appliances:{refrigerator:{volume:80,weight:250},washer:{volume:40,weight:200},dryer:{volume:40,weight:150},dishwasher:{volume:30,weight:120},stove:{volume:45,weight:180},microwave:{volume:8,weight:30}},construction:{"drywall-pile":{volume:50,weight:300},"lumber-pile":{volume:40,weight:200},"concrete-debris":{volume:30,weight:400},"roofing-material":{volume:45,weight:250},tiles:{volume:25,weight:150}},yard:{branches:{volume:35,weight:100},dirt:{volume:20,weight:300},"grass-clippings":{volume:30,weight:80},leaves:{volume:40,weight:60},rocks:{volume:15,weight:250}},electronics:{"tv-crt":{volume:15,weight:60},"tv-flat":{volume:20,weight:40},computer:{volume:8,weight:25},printer:{volume:6,weight:20},monitor:{volume:5,weight:15}},misc:{boxes:{volume:10,weight:30},bags:{volume:8,weight:20},tires:{volume:12,weight:25},"metal-scrap":{volume:15,weight:100},glass:{volume:10,weight:75}}},_=(M,ie)=>{const K=D[M][ie],H={id:Date.now().toString(),type:`${M}-${ie}`,volume:K.volume,weight:K.weight,quantity:1,requiresSpecialDisposal:M==="electronics"||ie.includes("mattress"),needsDisassembly:M==="furniture"&&!ie.includes("mattress")};l([...o,H])},$=(M,ie)=>{l(o.map(K=>K.id===M?{...K,...ie}:K))},k=M=>{l(o.filter(ie=>ie.id!==M))},L=(M,ie)=>{const I=i("volume_rate_per_cubic_foot",1.5,"pricing"),ee=i("weight_rate_per_pound",.5,"pricing"),se=M*I,de=ie*ee;return Math.max(se,de)},E=()=>({items:o,needsLabor:d,laborers:m,distance:x,includeDisposal:b,needsPermit:j,isHazardous:C,accessDifficulty:F,floors:q}),O=M=>{l(M.items||[]),u(M.needsLabor??!0),h(M.laborers||2),f(M.distance??""),v(M.includeDisposal??!0),S(M.needsPermit??!1),B(M.isHazardous??!1),Q(M.accessDifficulty||"easy"),P(M.floors||1)},le=()=>{l([]),u(!0),h(2),f(""),v(!0),S(!1),B(!1),Q("easy"),P(1)},te=()=>{if(o.length>0&&typeof x=="number"){const M=[];let ie=0,K=0,H=0;o.forEach(Y=>{const X=Y.volume*Y.quantity,ye=Y.weight*Y.quantity;K+=X,H+=ye,M.push({label:`${Y.type.split("-").map(pe=>pe.charAt(0).toUpperCase()+pe.slice(1)).join(" ")}`,value:Y.quantity,unit:t("calculators.junkRemoval.units.items")})});const I=L(K,H);if(ie+=I,M.push({label:t("calculators.junkRemoval.results.totalVolume"),value:K,unit:t("calculators.junkRemoval.units.cubicFeet")},{label:t("calculators.junkRemoval.results.totalWeight"),value:H,unit:t("calculators.junkRemoval.units.pounds")},{label:t("calculators.junkRemoval.results.baseRemovalCost"),value:Number(I.toFixed(2)),unit:t("calculators.junkRemoval.units.usd"),cost:I}),d){const X=i("labor_rate_per_hour",45,"pricing"),ye=Math.ceil(K/100),pe=X*m*ye;ie+=pe,M.push({label:`${t("calculators.junkRemoval.results.labor")} (${m} ${t("calculators.junkRemoval.results.workers")}, ${ye} ${t("calculators.junkRemoval.results.hours")})`,value:m*ye,unit:t("calculators.junkRemoval.units.laborHours"),cost:pe})}const se=i("distance_rate_per_mile",2.5,"pricing"),de=x*se;if(ie+=de,M.push({label:t("calculators.junkRemoval.results.distanceFee"),value:x,unit:t("calculators.junkRemoval.units.miles"),cost:de}),b){const Y=o.filter(X=>X.requiresSpecialDisposal);if(Y.length>0){const ye=i("special_disposal_fee",25,"pricing"),pe=Y.reduce((Ce,je)=>Ce+je.quantity*ye,0);ie+=pe,M.push({label:t("calculators.junkRemoval.results.specialDisposalFee"),value:Y.length,unit:t("calculators.junkRemoval.units.items"),cost:pe})}}if(j){const X=i("permit_fee",150,"pricing");ie+=X,M.push({label:t("calculators.junkRemoval.results.disposalPermit"),value:1,unit:t("calculators.junkRemoval.units.permit"),cost:X})}if(C){const X=i("hazardous_rate_per_pound",.75,"pricing"),ye=H*X;ie+=ye,M.push({label:t("calculators.junkRemoval.results.hazardousMaterialFee"),value:H,unit:t("calculators.junkRemoval.units.pounds"),cost:ye})}const z={easy:1,moderate:1.25,difficult:1.5}[F],ne=1+(q-1)*.15;ie=ie*z*ne,(F!=="easy"||q>1)&&M.push({label:t("calculators.junkRemoval.results.accessDifficultyFloorAdjustment"),value:Number((z*ne).toFixed(2)),unit:t("calculators.junkRemoval.units.multiplier")}),M.push({label:t("calculators.junkRemoval.results.totalEstimatedCost"),value:Number(ie.toFixed(2)),unit:t("calculators.junkRemoval.units.usd"),isTotal:!0}),s(M)}},V=o.length>0&&typeof x=="number";return r==="custom"&&a?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(To,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.junkRemoval.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(To,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.junkRemoval.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(To,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(To,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.junkRemoval.title")})]}),e.jsx(Ks,{calculatorType:"junk-removal",currentInputs:E(),onLoadEstimate:O,onNewEstimate:le}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.junkRemoval.itemsToRemove")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 md:grid-cols-3 gap-2",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.junkRemoval.categories.furniture")}),e.jsx("div",{className:"absolute z-10 hidden group-hover:block w-48 bg-white border border-slate-200 rounded-md shadow-lg mt-1 right-0",children:Object.keys(D.furniture).map(M=>e.jsx("button",{onClick:()=>_("furniture",M),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm",children:t(`calculators.junkRemoval.items.${M}`)},M))})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.junkRemoval.categories.appliances")}),e.jsx("div",{className:"absolute z-10 hidden group-hover:block w-48 bg-white border border-slate-200 rounded-md shadow-lg mt-1 right-0",children:Object.keys(D.appliances).map(M=>e.jsx("button",{onClick:()=>_("appliances",M),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm",children:t(`calculators.junkRemoval.items.${M}`)},M))})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.junkRemoval.categories.construction")}),e.jsx("div",{className:"absolute z-10 hidden group-hover:block w-48 bg-white border border-slate-200 rounded-md shadow-lg mt-1 right-0",children:Object.keys(D.construction).map(M=>e.jsx("button",{onClick:()=>_("construction",M),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm",children:t(`calculators.junkRemoval.items.${M}`)},M))})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.junkRemoval.categories.yardWaste")}),e.jsx("div",{className:"absolute z-10 hidden group-hover:block w-48 bg-white border border-slate-200 rounded-md shadow-lg mt-1 right-0",children:Object.keys(D.yard).map(M=>e.jsx("button",{onClick:()=>_("yard",M),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm",children:t(`calculators.junkRemoval.items.${M}`)},M))})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.junkRemoval.categories.electronics")}),e.jsx("div",{className:"absolute z-10 hidden group-hover:block w-48 bg-white border border-slate-200 rounded-md shadow-lg mt-1 right-0",children:Object.keys(D.electronics).map(M=>e.jsx("button",{onClick:()=>_("electronics",M),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm",children:t(`calculators.junkRemoval.items.${M}`)},M))})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.junkRemoval.categories.miscellaneous")}),e.jsx("div",{className:"absolute z-10 hidden group-hover:block w-48 bg-white border border-slate-200 rounded-md shadow-lg mt-1 right-0",children:Object.keys(D.misc).map(M=>e.jsx("button",{onClick:()=>_("misc",M),className:"block w-full text-left px-4 py-2 hover:bg-slate-100 text-sm",children:t(`calculators.junkRemoval.items.${M}`)},M))})]})]})]}),o.map(M=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.junkRemoval.itemType")}),e.jsx("div",{className:"p-2 bg-white border border-slate-300 rounded-md",children:t(`calculators.junkRemoval.items.${M.type.split("-").slice(1).join("-")}`)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.junkRemoval.quantity")}),e.jsx("input",{type:"number",min:"1",value:M.quantity,onChange:ie=>$(M.id,{quantity:Number(ie.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[M.requiresSpecialDisposal&&e.jsx("span",{className:"text-orange-500 text-sm",children:t("calculators.junkRemoval.requiresSpecialDisposal")}),M.needsDisassembly&&e.jsx("span",{className:"text-blue-500 text-sm",children:t("calculators.junkRemoval.mayRequireDisassembly")})]})]}),e.jsx("button",{onClick:()=>k(M.id),className:"mt-4 text-red-500 hover:text-red-600",children:t("calculators.junkRemoval.removeItem")})]},M.id))]}),e.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.junkRemoval.serviceDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"distance",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.junkRemoval.distanceToDisposalSite")}),e.jsx("input",{type:"number",id:"distance",min:"0",step:"0.1",value:x,onChange:M=>f(M.target.value?Number(M.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.junkRemoval.enterDistancePlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accessDifficulty",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.junkRemoval.accessDifficulty")}),e.jsxs("select",{id:"accessDifficulty",value:F,onChange:M=>Q(M.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"easy",children:t("calculators.junkRemoval.accessLevels.easy")}),e.jsx("option",{value:"moderate",children:t("calculators.junkRemoval.accessLevels.moderate")}),e.jsx("option",{value:"difficult",children:t("calculators.junkRemoval.accessLevels.difficult")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"floors",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.junkRemoval.numberOfFloors")}),e.jsx("input",{type:"number",id:"floors",min:"1",max:"10",value:q,onChange:M=>P(Number(M.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"needsLabor",checked:d,onChange:M=>u(M.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"needsLabor",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.junkRemoval.needLoadingAssistance")})]})]}),d&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"laborers",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.junkRemoval.numberOfWorkers")}),e.jsxs("select",{id:"laborers",value:m,onChange:M=>h(Number(M.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:2,children:t("calculators.junkRemoval.workersCount.two")}),e.jsx("option",{value:3,children:t("calculators.junkRemoval.workersCount.three")}),e.jsx("option",{value:4,children:t("calculators.junkRemoval.workersCount.four")})]})]})]}),e.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.junkRemoval.additionalOptions")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeDisposal",checked:b,onChange:M=>v(M.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeDisposal",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.junkRemoval.includeDisposalFees")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"needsPermit",checked:j,onChange:M=>S(M.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"needsPermit",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.junkRemoval.requiresDisposalPermit")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"isHazardous",checked:C,onChange:M=>B(M.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"isHazardous",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.junkRemoval.containsHazardousMaterials")})]})]})]})]}),e.jsx("button",{onClick:te,disabled:!V,className:`w-full py-3 px-4 rounded-md font-medium text-white ${V?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},LU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{materials:a,loading:n,isConfigured:i}=Aa("paint",r==="custom"),{getCustomPrice:o,getCustomUnitValue:l}=ma("paint"),[d,u]=p.useState("interior"),[m,h]=p.useState("imperial"),[x,f]=p.useState([{length:0,height:0,condition:"good"}]),[b,v]=p.useState([]),[j,S]=p.useState([]),[C,B]=p.useState(2),[F,Q]=p.useState("standard"),[q,P]=p.useState("eggshell"),[D,_]=p.useState(!1),[$,k]=p.useState(!0),[L,E]=p.useState(10),O=()=>{f([...x,{length:0,height:0,condition:"good"}])},le=(re,z,ne)=>{const Y=[...x];Y[re]={...Y[re],[z]:ne},f(Y)},te=re=>{f(x.filter((z,ne)=>ne!==re))},V=()=>({paintLocation:d,unit:m,surfaces:x,doors:b,windows:j,coats:C,paintType:F,paintFinish:q,includePrimer:D,includeWaste:$,wasteFactor:L}),M=re=>{u(re.paintLocation||"interior"),h(re.unit||"imperial"),f(re.surfaces||[{length:0,height:0,condition:"good"}]),v(re.doors||[]),S(re.windows||[]),B(re.coats||2),Q(re.paintType||"standard"),P(re.paintFinish||"eggshell"),_(re.includePrimer||!1),k(re.includeWaste!==void 0?re.includeWaste:!0),E(re.wasteFactor||10)},ie=()=>{u("interior"),h("imperial"),f([{length:0,height:0,condition:"good"}]),v([]),S([]),B(2),Q("standard"),P("eggshell"),_(!1),k(!0),E(10)},K=p.useMemo(()=>{if(r==="custom"&&i&&a.length>0){const re=a.filter(z=>z.category==="paint-type");if(re.length>0){const z={interior:{},exterior:{}};return re.forEach(ne=>{const Y=ne.metadata||{},X=Y.location||"interior",ye=Y.quality||"standard";z[X][ye]={gallon:ne.price,coverage:Y.coverage||(X==="interior"?400:350)}}),z}}return{interior:{economy:{gallon:o("Interior Paint - Economy",25.98,"paint"),coverage:l("Interior Paint - Economy",400,"paint")},standard:{gallon:o("Interior Paint - Standard",35.98,"paint"),coverage:l("Interior Paint - Standard",400,"paint")},premium:{gallon:o("Interior Paint - Premium",45.98,"paint"),coverage:l("Interior Paint - Premium",400,"paint")}},exterior:{economy:{gallon:o("Exterior Paint - Economy",30.98,"paint"),coverage:l("Exterior Paint - Economy",350,"paint")},standard:{gallon:o("Exterior Paint - Standard",40.98,"paint"),coverage:l("Exterior Paint - Standard",350,"paint")},premium:{gallon:o("Exterior Paint - Premium",50.98,"paint"),coverage:l("Exterior Paint - Premium",350,"paint")}}}},[r,i,a,o,l]),H=p.useMemo(()=>{if(r==="custom"&&i&&a.length>0){const re=a.filter(z=>z.category==="paint-primer");if(re.length>0){const z={};return re.forEach(ne=>{const X=(ne.metadata||{}).location||"interior";z[X]=ne.price}),z}}return{interior:o("Interior Primer",25.98,"primer"),exterior:o("Exterior Primer",30.98,"primer")}},[r,i,a,o]);p.useEffect(()=>{if(r==="custom"&&K){const re=Object.keys(K[d]||{});re.length>0&&!re.includes(F)&&Q(re[0])}else r==="default"&&(["economy","standard","premium"].includes(F)||Q("standard"))},[r,K,d]);const I=()=>{const re=K[d]?.[F];return re||{gallon:35.98,coverage:400}},ee=()=>H[d]||(d==="interior"?25.98:30.98),se=()=>{let re=x.reduce((ue,ge)=>ue+ge.length*ge.height,0);const z=b.reduce((ue,ge)=>ue+ge.width*ge.height,0),ne=j.reduce((ue,ge)=>ue+ge.width*ge.height,0);re-=z+ne;const Y=$?re*(1+L/100):re,X=I(),ye=C,pe=X.coverage,Ce={good:1,fair:.9,poor:.8},je=x.reduce((ue,ge)=>ue+Ce[ge.condition],0)/x.length,ce=pe*je,Te=Math.ceil(Y*ye/ce),We=Te*X.gallon,Le=[{label:t("calculators.paint.totalWallArea"),value:Number(re.toFixed(2)),unit:t("calculators.paint.squareFeet")},{label:`${t("calculators.paint.paintNeeded")} (${t(`calculators.paint.paintType.${F}`)}, ${t(`calculators.paint.paintFinish.${q}`)})`,value:Te,unit:t("calculators.paint.gallons"),cost:We}];if(D){const ue=l("Primer",400,"primer"),ge=Math.ceil(Y/ue),oe=ge*ee();Le.push({label:t("calculators.paint.primerNeeded"),value:ge,unit:t("calculators.paint.gallons"),cost:oe})}const fe=Math.ceil(re/400),Se=o("Painting Supplies Set",25,"supplies"),Re=fe*Se;Le.push({label:t("calculators.paint.paintingSupplies"),value:fe,unit:t("calculators.paint.set"),cost:Re});const G=Le.reduce((ue,ge)=>ue+(ge.cost||0),0);Le.push({label:t("calculators.paint.totalCost"),value:Number(G.toFixed(2)),unit:t("calculators.paint.usd"),isTotal:!0}),s(Le)},de=x.every(re=>typeof re.length=="number"&&re.length>0&&typeof re.height=="number"&&re.height>0);return r==="custom"&&n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Sf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.paint.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!i?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Sf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.paint.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Sf,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Sf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.paint.title")})]}),e.jsx(Ks,{calculatorType:"paint",getCurrentInputs:V,onLoadEstimate:M,onNewEstimate:ie}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${d==="interior"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("interior"),children:t("calculators.paint.interior")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${d==="exterior"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("exterior"),children:t("calculators.paint.exterior")})]}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${m==="imperial"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>h("imperial"),children:t("calculators.paint.imperial")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${m==="metric"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>h("metric"),children:t("calculators.paint.metric")})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.paint.surfacesToPaint")}),e.jsx("button",{onClick:O,className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.paint.addSurface")})]}),x.map((re,z)=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[t("calculators.paint.length")," (",t(m==="imperial"?"calculators.paint.feet":"calculators.paint.meters"),")"]}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:re.length||"",onChange:ne=>le(z,"length",Number(ne.target.value)),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[t("calculators.paint.height")," (",t(m==="imperial"?"calculators.paint.feet":"calculators.paint.meters"),")"]}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:re.height||"",onChange:ne=>le(z,"height",Number(ne.target.value)),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.paint.surfaceCondition")}),e.jsxs("select",{value:re.condition,onChange:ne=>le(z,"condition",ne.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"good",children:t("calculators.paint.conditionGood")}),e.jsx("option",{value:"fair",children:t("calculators.paint.conditionFair")}),e.jsx("option",{value:"poor",children:t("calculators.paint.conditionPoor")})]})]})]}),x.length>1&&e.jsx("button",{onClick:()=>te(z),className:"mt-2 text-red-500 hover:text-red-600",children:t("calculators.paint.removeSurface")})]},z))]}),e.jsx("div",{className:"border-t border-slate-200 pt-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.paint.paintTypeLabel")}),e.jsxs("select",{value:F,onChange:re=>Q(re.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"economy",children:t("calculators.paint.paintType.economy")}),e.jsx("option",{value:"standard",children:t("calculators.paint.paintType.standard")}),e.jsx("option",{value:"premium",children:t("calculators.paint.paintType.premium")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.paint.paintFinishLabel")}),e.jsxs("select",{value:q,onChange:re=>P(re.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"flat",children:t("calculators.paint.paintFinish.flat")}),e.jsx("option",{value:"eggshell",children:t("calculators.paint.paintFinish.eggshell")}),e.jsx("option",{value:"satin",children:t("calculators.paint.paintFinish.satin")}),e.jsx("option",{value:"semi-gloss",children:t("calculators.paint.paintFinish.semiGloss")})]})]})]})}),e.jsx("div",{className:"border-t border-slate-200 pt-6 mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.paint.numberOfCoats")}),e.jsxs("select",{value:C,onChange:re=>B(Number(re.target.value)),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:1,children:t("calculators.paint.singleCoat")}),e.jsx("option",{value:2,children:t("calculators.paint.twoCoats")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includePrimer",checked:D,onChange:re=>_(re.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includePrimer",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.paint.includePrimer")})]})]})}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeWaste",checked:$,onChange:re=>k(re.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeWaste",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.paint.includeWasteFactor")})]}),$&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wasteFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.paint.wasteFactorPercentage")}),e.jsxs("select",{id:"wasteFactor",value:L,onChange:re=>E(Number(re.target.value)),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:5,children:t("calculators.paint.wasteFactor5")}),e.jsx("option",{value:10,children:t("calculators.paint.wasteFactor10")}),e.jsx("option",{value:15,children:t("calculators.paint.wasteFactor15")})]})]})]})]}),e.jsx("button",{onClick:se,disabled:!de,className:`w-full py-3 px-4 rounded-md font-medium text-white ${de?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},TU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{pricing:a,loading:n,isConfigured:i}=Aa("pavers",r==="custom"),{getCustomPrice:o,getCustomUnitValue:l}=ma("pavers"),[d,u]=p.useState("dimensions"),[m,h]=p.useState(""),[x,f]=p.useState(""),[b,v]=p.useState(""),[j,S]=p.useState(""),[C,B]=p.useState("sand"),[F,Q]=p.useState(""),[q,P]=p.useState(!1),[D,_]=p.useState(""),[$,k]=p.useState("soldier"),[L,E]=p.useState("6x9"),[O,le]=p.useState(""),[te,V]=p.useState(""),[M,ie]=p.useState(10),[K,H]=p.useState(""),I=p.useMemo(()=>r==="custom"&&a?.paver_cost_per_sqft?a.paver_cost_per_sqft:K,[r,a,K]),ee=p.useMemo(()=>r==="custom"?{baseMaterialPerCubicYard:o("Base Material",45,"base"),beddingMaterialPerCubicYard:o("Sand",55,"bedding"),polymericSandPerBag:o("Polymeric Sand",45,"pavers"),edgeBlock4x8:o("Edge Blocks 4x8",1.5,"edging"),edgeBlock6x9:o("Edge Blocks 6x9",2,"edging"),edgeBlock6x12:o("Edge Blocks 6x12",2.25,"edging"),edgeBlockCustom:o("Edge Blocks Custom",2,"edging")}:{baseMaterialPerCubicYard:45,beddingMaterialPerCubicYard:55,polymericSandPerBag:45,edgeBlock4x8:1.5,edgeBlock6x9:2,edgeBlock6x12:2.25,edgeBlockCustom:2},[r,o]);p.useEffect(()=>{r==="custom"&&a?.paver_cost_per_sqft&&H(a.paver_cost_per_sqft)},[r,a]);const se=()=>({inputType:d,length:m,width:x,area:b,baseDepth:j,beddingType:C,beddingDepth:F,hasBorder:q,borderLength:D,borderStyle:$,edgeBlockSize:L,customEdgeWidth:O,customEdgeLength:te,wasteFactor:M,paverCostPerSqFt:K}),de=Y=>{u(Y.inputType||"dimensions"),h(Y.length||""),f(Y.width||""),v(Y.area||""),S(Y.baseDepth||""),B(Y.beddingType||"sand"),Q(Y.beddingDepth||""),P(Y.hasBorder||!1),_(Y.borderLength||""),k(Y.borderStyle||"soldier"),E(Y.edgeBlockSize||"6x9"),le(Y.customEdgeWidth||""),V(Y.customEdgeLength||""),ie(Y.wasteFactor||10),H(Y.paverCostPerSqFt||"")},re=()=>{u("dimensions"),h(""),f(""),v(""),S(""),B("sand"),Q(""),P(!1),_(""),k("soldier"),E("6x9"),le(""),V(""),ie(10),H("")},z=()=>{let Y;if(d==="dimensions"&&typeof m=="number"&&typeof x=="number")Y=m*x;else if(d==="area"&&typeof b=="number")Y=b;else return;const X=typeof I=="number"?I:K;if(typeof j=="number"&&typeof F=="number"&&typeof X=="number"){const ye=Y*(1+M/100),pe=ye*j/324,Ce=ye*F/324,je=l("Polymeric Sand",60,"pavers"),ce=Math.ceil(Y/je),Te=Y*X,We=[{label:"Total Patio Area",value:Number(Y.toFixed(2)),unit:"square feet"},{label:`Total Area (including ${M}% waste)`,value:Number(ye.toFixed(2)),unit:"square feet"},{label:"Paver Cost",value:Number(Te.toFixed(2)),unit:"USD",cost:Te},{label:"Base Material Needed",value:Number(pe.toFixed(2)),unit:"cubic yards",cost:pe*ee.baseMaterialPerCubicYard},{label:`${C.replace("-"," ").replace(/(^\w|\s\w)/g,U=>U.toUpperCase())} Needed`,value:Number(Ce.toFixed(2)),unit:"cubic yards",cost:Ce*ee.beddingMaterialPerCubicYard},{label:"Polymeric Sand Needed",value:ce,unit:"60lb bags",cost:ce*ee.polymericSandPerBag}];if(q&&typeof D=="number"){let U,fe;if(L==="custom"&&typeof te=="number"&&typeof O=="number")U=te/12,fe=O/12;else{const[Fe,Qe]=L.split("x").map(Number);fe=Fe/12,U=Qe/12}const Re=Math.ceil(D/($==="soldier"?fe:U)),G=$==="double-sailor"?Re*2:Re,ue=$.split("-").map(Fe=>Fe.charAt(0).toUpperCase()+Fe.slice(1)).join(" "),ge=L==="custom"?`${O}"x${te}"`:L,J=(Fe=>{switch(Fe){case"6x9":return ee.edgeBlock6x9;case"4x8":return ee.edgeBlock4x8;case"6x12":return ee.edgeBlock6x12;default:return ee.edgeBlockCustom}})(L),Ae=G*J;We.push({label:`Edge Blocks Needed (${ge}, ${ue})`,value:G,unit:"pieces",cost:Ae})}const Le=We.reduce((U,fe)=>U+(fe.cost||0),0);We.push({label:"Total Estimated Cost",value:Number(Le.toFixed(2)),unit:"USD",isTotal:!0}),s(We)}},ne=(d==="dimensions"&&typeof m=="number"&&typeof x=="number"||d==="area"&&typeof b=="number")&&typeof j=="number"&&typeof F=="number"&&(typeof K=="number"||r==="custom"&&typeof I=="number")&&(!q||typeof D=="number"&&(L!=="custom"||typeof O=="number"&&typeof te=="number"));return r==="custom"&&n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Bf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.pavers.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!i?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Bf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.pavers.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bf,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Bf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.pavers.title")})]}),e.jsx(Ks,{calculatorType:"pavers",currentInputs:se(),onLoadEstimate:de,onNewEstimate:re}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-start mb-4",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${d==="dimensions"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("dimensions"),children:t("calculators.useDimensions")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${d==="area"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>u("area"),children:t("calculators.useSquareFootage")})]})}),d==="dimensions"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.lengthFeet")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:m,onChange:Y=>h(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.enterLength")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"width",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.widthFeet")}),e.jsx("input",{type:"number",id:"width",min:"0",step:"0.1",value:x,onChange:Y=>f(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.enterWidth")})]})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-700 mb-1",children:"Total Area (square feet)"}),e.jsx("input",{type:"number",id:"area",min:"0",step:"0.1",value:b,onChange:Y=>v(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter total area in square feet"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"paverCostPerSqFt",className:"block text-sm font-medium text-slate-700 mb-1",children:["Paver Cost per Square Foot",r==="custom"&&a?.paver_cost_per_sqft&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600 font-normal",children:["(Using custom pricing: $",a.paver_cost_per_sqft,"/sq ft)"]})]}),e.jsx("input",{type:"number",id:"paverCostPerSqFt",min:"0",step:"0.01",value:K,onChange:Y=>H(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter paver cost per square foot",disabled:r==="custom"&&a?.paver_cost_per_sqft!==void 0}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:r==="custom"&&a?.paver_cost_per_sqft?"Custom pricing is being used from your materials configuration":"Enter the cost per square foot for paver materials"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"wasteFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:"Estimated Waste Factor"}),e.jsxs("select",{id:"wasteFactor",value:M,onChange:Y=>ie(Number(Y.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:5,children:"5% waste"}),e.jsx("option",{value:10,children:"10% waste"}),e.jsx("option",{value:15,children:"15% waste"}),e.jsx("option",{value:20,children:"20% waste"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Base Material"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"baseDepth",className:"block text-sm font-medium text-slate-700 mb-1",children:"Base Depth (inches)"}),e.jsx("input",{type:"number",id:"baseDepth",min:"0",step:"0.5",value:j,onChange:Y=>S(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter base depth in inches"})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Bedding Layer"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"beddingType",className:"block text-sm font-medium text-slate-700 mb-1",children:"Bedding Material"}),e.jsxs("select",{id:"beddingType",value:C,onChange:Y=>B(Y.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"sand",children:"Sand"}),e.jsx("option",{value:"stone-dust",children:"Stone Dust"}),e.jsx("option",{value:"3/8-stone",children:'3/8" Stone'})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"beddingDepth",className:"block text-sm font-medium text-slate-700 mb-1",children:"Bedding Depth (inches)"}),e.jsx("input",{type:"number",id:"beddingDepth",min:"0",step:"0.5",value:F,onChange:Y=>Q(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter bedding depth in inches"})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"hasBorder",checked:q,onChange:Y=>{P(Y.target.checked),Y.target.checked||_("")},className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"hasBorder",className:"ml-2 block text-sm font-medium text-slate-700",children:"Add border edge blocks"})]}),q&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"borderStyle",className:"block text-sm font-medium text-slate-700 mb-1",children:"Border Style"}),e.jsxs("select",{id:"borderStyle",value:$,onChange:Y=>k(Y.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"soldier",children:"Soldier"}),e.jsx("option",{value:"sailor",children:"Sailor"}),e.jsx("option",{value:"double-sailor",children:"Double Sailor"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edgeBlockSize",className:"block text-sm font-medium text-slate-700 mb-1",children:"Edge Block Size"}),e.jsxs("select",{id:"edgeBlockSize",value:L,onChange:Y=>{const X=Y.target.value;E(X),X!=="custom"&&(le(""),V(""))},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"4x8",children:'4" x 8"'}),e.jsx("option",{value:"6x9",children:'6" x 9"'}),e.jsx("option",{value:"6x12",children:'6" x 12"'}),e.jsx("option",{value:"custom",children:"Custom Size"})]})]}),L==="custom"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customEdgeWidth",className:"block text-sm font-medium text-slate-700 mb-1",children:"Custom Edge Block Width (inches)"}),e.jsx("input",{type:"number",id:"customEdgeWidth",min:"0",step:"0.5",value:O,onChange:Y=>le(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter width in inches"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"customEdgeLength",className:"block text-sm font-medium text-slate-700 mb-1",children:"Custom Edge Block Length (inches)"}),e.jsx("input",{type:"number",id:"customEdgeLength",min:"0",step:"0.5",value:te,onChange:Y=>V(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter length in inches"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"borderLength",className:"block text-sm font-medium text-slate-700 mb-1",children:"Total Border Length (feet)"}),e.jsx("input",{type:"number",id:"borderLength",min:"0",step:"0.1",value:D,onChange:Y=>_(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter total perimeter length in feet"})]})]})]})]}),e.jsx("button",{onClick:z,disabled:!ne,className:`w-full py-3 px-4 rounded-md font-medium text-white ${ne?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},DU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("plumbing",r==="custom"),{getCustomPrice:i}=ma("plumbing"),[o,l]=p.useState([]),[d,u]=p.useState([]),[m,h]=p.useState(!1),[x,f]=p.useState("tank"),[b,v]=p.useState(40),[j,S]=p.useState(!1),[C,B]=p.useState(!1),[F,Q]=p.useState(30),[q,P]=p.useState(!0),[D,_]=p.useState(""),[$,k]=p.useState(!0),[L,E]=p.useState(2),O=Y=>({sink:{cost:149.98,description:t("calculators.plumbing.standardStainlessSteelKitchenSink")},toilet:{cost:199.98,description:t("calculators.plumbing.standardTwoPieceToilet")},shower:{cost:299.98,description:t("calculators.plumbing.standardShowerKit"),components:{valve:{cost:129.98,description:t("calculators.plumbing.pressureBalanceShowerValve")},head:{cost:49.98,description:t("calculators.plumbing.standardShowerHead")},trim:{cost:79.98,description:t("calculators.plumbing.showerTrimKit")},drain:{cost:39.98,description:t("calculators.plumbing.showerDrainAssembly")}}},tub:{cost:399.98,description:t("calculators.plumbing.standardAlcoveBathtub")},washer:{cost:24.98,description:t("calculators.plumbing.washerConnectionBox")},dishwasher:{cost:19.98,description:t("calculators.plumbing.dishwasherConnectionKit")},custom:{cost:0,description:t("calculators.plumbing.customFixture")}})[Y],le=Y=>{const X={sink:6,toilet:4,shower:8,tub:8,washer:10,dishwasher:6,custom:0},ye={sink:1.5,toilet:3,shower:2,tub:2,washer:2,dishwasher:1.5,custom:2},{cost:pe}=O(Y),Ce={id:Date.now().toString(),type:Y,supplyLines:Y==="toilet"?1:2,drainSize:ye[Y],ventSize:1.5,distanceFromStack:X[Y],cost:pe};l([...o,Ce])},te=(Y,X)=>{l(o.map(ye=>ye.id===Y?{...ye,...X}:ye))},V=Y=>{l(o.filter(X=>X.id!==Y))},M=Y=>{const X={supply:.75,drain:3,vent:1.5},ye={supply:"pex",drain:"pvc",vent:"pvc"},pe={id:Date.now().toString(),type:Y,size:X[Y],length:0,material:ye[Y],fittings:{elbows90:0,elbows45:0,tees:0,couplings:0,adapters:0,valves:0}};u([...d,pe])},ie=(Y,X)=>{u(d.map(ye=>ye.id===Y?{...ye,...X}:ye))},K=(Y,X)=>{u(d.map(ye=>ye.id===Y?{...ye,fittings:{...ye.fittings,...X}}:ye))},H=Y=>{u(d.filter(X=>X.id!==Y))},I=()=>({fixtures:o,pipingRuns:d,includeWaterHeater:m,waterHeaterType:x,waterHeaterSize:b,includeWaterSoftener:j,includePressureTank:C,pressureTankSize:F,includeSewerConnection:q,sewerLength:D,includeCleanouts:$,cleanoutCount:L}),ee=Y=>{Y.fixtures&&l(Y.fixtures),Y.pipingRuns&&u(Y.pipingRuns),Y.includeWaterHeater!==void 0&&h(Y.includeWaterHeater),Y.waterHeaterType&&f(Y.waterHeaterType),Y.waterHeaterSize&&v(Y.waterHeaterSize),Y.includeWaterSoftener!==void 0&&S(Y.includeWaterSoftener),Y.includePressureTank!==void 0&&B(Y.includePressureTank),Y.pressureTankSize&&Q(Y.pressureTankSize),Y.includeSewerConnection!==void 0&&P(Y.includeSewerConnection),Y.sewerLength!==void 0&&_(Y.sewerLength),Y.includeCleanouts!==void 0&&k(Y.includeCleanouts),Y.cleanoutCount!==void 0&&E(Y.cleanoutCount)},se=()=>{l([]),u([]),h(!1),f("tank"),v(40),S(!1),B(!1),Q(30),P(!0),_(""),k(!0),E(2)},de=(Y,X)=>{const pe={pex:{.5:.89,.75:1.29,1:1.89},copper:{.5:3.98,.75:5.98,1:7.98},cpvc:{.5:1.29,.75:1.98,1:2.98},pvc:{1.5:2.98,2:3.98,3:5.98,4:8.98},abs:{1.5:3.98,2:4.98,3:6.98,4:9.98},"cast-iron":{2:12.98,3:18.98,4:24.98}}[Y]?.[X]||0,Ce=`${Y}_${X}`;return i(Ce,pe,"pipe")},re=(Y,X,ye)=>{const Ce={pex:{elbows90:1.98,elbows45:1.98,tees:2.49,couplings:1.49,adapters:2.98,valves:8.98},copper:{elbows90:3.98,elbows45:3.98,tees:4.98,couplings:2.98,adapters:4.98,valves:12.98},cpvc:{elbows90:1.98,elbows45:1.98,tees:2.98,couplings:1.49,adapters:2.98,valves:9.98},pvc:{elbows90:2.98,elbows45:2.98,tees:3.98,couplings:1.98,adapters:3.98,valves:12.98},abs:{elbows90:3.49,elbows45:3.49,tees:4.49,couplings:2.49,adapters:4.49,valves:14.98},"cast-iron":{elbows90:18.98,elbows45:18.98,tees:24.98,couplings:12.98,adapters:16.98,valves:49.98}}[Y]?.[ye]||0,je=`${Y}_${ye}`;return i(je,Ce,"fitting")},z=()=>{const Y=[];let X=0;if(o.forEach(ye=>{const pe=O(ye.type),Ce=ye.type==="custom"&&ye.name?ye.name:pe.description;if(Y.push({label:Ce,value:1,unit:t("calculators.plumbing.piece"),cost:ye.cost}),X+=ye.cost,ye.type==="shower"){const{components:Le}=pe;Object.entries(Le).forEach(([U,fe])=>{Y.push({label:fe.description,value:1,unit:t("calculators.plumbing.piece"),cost:fe.cost}),X+=fe.cost})}const je=i("supply_line",12.98,"fixture"),ce=ye.supplyLines*je;X+=ce,Y.push({label:`${ye.type} ${t("calculators.plumbing.supplyLines")}`,value:ye.supplyLines,unit:t("calculators.plumbing.pieces"),cost:ce});const Te=ye.type==="toilet"?24.98:ye.type==="tub"?49.98:ye.type==="shower"?39.98:29.98,We=i(`drain_assembly_${ye.type}`,Te,"fixture");X+=We,Y.push({label:`${ye.type} ${t("calculators.plumbing.drainAssembly")}`,value:1,unit:t("calculators.plumbing.set"),cost:We})}),d.forEach(ye=>{const pe=de(ye.material,ye.size),Ce=ye.length*pe;X+=Ce,Y.push({label:`${ye.size}" ${ye.material.toUpperCase()} ${ye.type} ${t("calculators.plumbing.pipe")}`,value:ye.length,unit:t("calculators.plumbing.feet"),cost:Ce}),Object.entries(ye.fittings).forEach(([je,ce])=>{if(ce>0){const Te=re(ye.material,ye.size,je),We=ce*Te;X+=We,Y.push({label:`${ye.size}" ${ye.material.toUpperCase()} ${je}`,value:ce,unit:t("calculators.plumbing.pieces"),cost:We})}})}),m){const pe={tank:{30:399.98,40:449.98,50:549.98,75:799.98},tankless:{30:699.98,40:899.98,50:1099.98,75:1499.98}}[x][b],Ce=i(`water_heater_${x}_${b}`,pe,"equipment");X+=Ce,Y.push({label:`${x==="tank"?`${b} ${t("calculators.plumbing.gallon")}`:t("calculators.plumbing.tankless")} ${t("calculators.plumbing.waterHeater")}`,value:1,unit:t("calculators.plumbing.unit"),cost:Ce});const je=x==="tank"?89.98:149.98,ce=i(`install_kit_${x}`,je,"equipment");X+=ce,Y.push({label:t("calculators.plumbing.waterHeaterInstallationKit"),value:1,unit:t("calculators.plumbing.kit"),cost:ce})}if(j){const ye=i("water_softener",599.98,"equipment"),pe=i("softener_install_kit",89.98,"equipment");X+=ye+pe,Y.push({label:t("calculators.plumbing.waterSoftenerSystem"),value:1,unit:t("calculators.plumbing.unit"),cost:ye},{label:t("calculators.plumbing.softenerInstallationKit"),value:1,unit:t("calculators.plumbing.kit"),cost:pe})}if(C){const pe={20:199.98,30:249.98,40:299.98}[F],Ce=i(`pressure_tank_${F}`,pe,"equipment"),je=i("pressure_tank_install_kit",69.98,"equipment");X+=Ce+je,Y.push({label:`${F} ${t("calculators.plumbing.gallon")} ${t("calculators.plumbing.pressureTank")}`,value:1,unit:t("calculators.plumbing.unit"),cost:Ce},{label:t("calculators.plumbing.pressureTankInstallationKit"),value:1,unit:t("calculators.plumbing.kit"),cost:je})}if(q&&typeof D=="number"){const ye=i("sewer_pipe_4",12.98,"pipe"),pe=D*ye;X+=pe,Y.push({label:t("calculators.plumbing.sewerPipe"),value:D,unit:t("calculators.plumbing.feet"),cost:pe})}if($){const ye=i("cleanout",24.98,"fixture"),pe=L*ye;X+=pe,Y.push({label:t("calculators.plumbing.cleanouts"),value:L,unit:t("calculators.plumbing.pieces"),cost:pe})}Y.push({label:t("calculators.plumbing.totalEstimatedCost"),value:Number(X.toFixed(2)),unit:"USD",isTotal:!0}),s(Y)},ne=d.length>0&&d.every(Y=>typeof Y.length=="number"&&Y.length>0)&&(!q||typeof D=="number");return r==="custom"&&a?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(kf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.plumbing.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(kf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.plumbing.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(kf,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(kf,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.plumbing.title")})]}),e.jsx(Ks,{calculatorType:"plumbing",getCurrentInputs:I,onLoadEstimate:ee,onNewEstimate:se}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.plumbing.fixtures")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>le("sink"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addSink")}),e.jsx("button",{onClick:()=>le("toilet"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addToilet")}),e.jsx("button",{onClick:()=>le("shower"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addShower")}),e.jsx("button",{onClick:()=>le("tub"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addTub")}),e.jsx("button",{onClick:()=>le("custom"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addCustom")})]})]}),o.map(Y=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[Y.type==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.fixtureName")}),e.jsx("input",{type:"text",value:Y.name||"",onChange:X=>te(Y.id,{name:X.target.value}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.plumbing.enterFixtureName")})]}),Y.type==="custom"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.fixtureCost")}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:Y.cost||"",onChange:X=>te(Y.id,{cost:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.plumbing.enterFixtureCost")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.supplyLines")}),e.jsx("input",{type:"number",min:"1",max:"3",value:Y.supplyLines,onChange:X=>te(Y.id,{supplyLines:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.drainSize")}),e.jsxs("select",{value:Y.drainSize,onChange:X=>te(Y.id,{drainSize:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:1.5,children:'1-1/2"'}),e.jsx("option",{value:2,children:'2"'}),e.jsx("option",{value:3,children:'3"'}),e.jsx("option",{value:4,children:'4"'})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.ventSize")}),e.jsxs("select",{value:Y.ventSize,onChange:X=>te(Y.id,{ventSize:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:1.25,children:'1-1/4"'}),e.jsx("option",{value:1.5,children:'1-1/2"'}),e.jsx("option",{value:2,children:'2"'})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.distanceFromStack")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:Y.distanceFromStack,onChange:X=>te(Y.id,{distanceFromStack:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]})]}),e.jsx("button",{onClick:()=>V(Y.id),className:"mt-4 text-red-500 hover:text-red-600",children:t("calculators.plumbing.removeFixture")})]},Y.id))]}),e.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.plumbing.pipingRuns")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>M("supply"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addSupplyLine")}),e.jsx("button",{onClick:()=>M("drain"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addDrainLine")}),e.jsx("button",{onClick:()=>M("vent"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.plumbing.addVentLine")})]})]}),d.map(Y=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.pipeSize")}),e.jsx("select",{value:Y.size,onChange:X=>ie(Y.id,{size:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",children:Y.type==="supply"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:.5,children:'1/2"'}),e.jsx("option",{value:.75,children:'3/4"'}),e.jsx("option",{value:1,children:'1"'})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:1.5,children:'1-1/2"'}),e.jsx("option",{value:2,children:'2"'}),e.jsx("option",{value:3,children:'3"'}),e.jsx("option",{value:4,children:'4"'})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.pipeMaterial")}),e.jsx("select",{value:Y.material,onChange:X=>ie(Y.id,{material:X.target.value}),className:"w-full p-2 border border-slate-300 rounded-md",children:Y.type==="supply"?e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"pex",children:"PEX"}),e.jsx("option",{value:"copper",children:t("calculators.plumbing.copper")}),e.jsx("option",{value:"cpvc",children:"CPVC"})]}):e.jsxs(e.Fragment,{children:[e.jsx("option",{value:"pvc",children:"PVC"}),e.jsx("option",{value:"abs",children:"ABS"}),e.jsx("option",{value:"cast-iron",children:t("calculators.plumbing.castIron")})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.length")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:Y.length||"",onChange:X=>ie(Y.id,{length:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.plumbing.enterLength")})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-md font-medium text-slate-700 mb-2",children:t("calculators.plumbing.fittings")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.elbows90")}),e.jsx("input",{type:"number",min:"0",value:Y.fittings.elbows90,onChange:X=>K(Y.id,{elbows90:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.elbows45")}),e.jsx("input",{type:"number",min:"0",value:Y.fittings.elbows45,onChange:X=>K(Y.id,{elbows45:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.tees")}),e.jsx("input",{type:"number",min:"0",value:Y.fittings.tees,onChange:X=>K(Y.id,{tees:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.couplings")}),e.jsx("input",{type:"number",min:"0",value:Y.fittings.couplings,onChange:X=>K(Y.id,{couplings:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.adapters")}),e.jsx("input",{type:"number",min:"0",value:Y.fittings.adapters,onChange:X=>K(Y.id,{adapters:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.valves")}),e.jsx("input",{type:"number",min:"0",value:Y.fittings.valves,onChange:X=>K(Y.id,{valves:Number(X.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]})]})]}),e.jsx("button",{onClick:()=>H(Y.id),className:"mt-4 text-red-500 hover:text-red-600",children:t("calculators.plumbing.removePipingRun")})]},Y.id))]}),e.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.plumbing.equipment")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeWaterHeater",checked:m,onChange:Y=>h(Y.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeWaterHeater",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.plumbing.includeWaterHeater")})]}),m&&e.jsxs("div",{className:"pl-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"waterHeaterType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.waterHeaterType")}),e.jsxs("select",{id:"waterHeaterType",value:x,onChange:Y=>f(Y.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"tank",children:t("calculators.plumbing.tankWaterHeater")}),e.jsx("option",{value:"tankless",children:t("calculators.plumbing.tanklessWaterHeater")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"waterHeaterSize",className:"block text-sm font-medium text-slate-700 mb-1",children:t(x==="tank"?"calculators.plumbing.tankSize":"calculators.plumbing.capacity")}),e.jsxs("select",{id:"waterHeaterSize",value:b,onChange:Y=>v(Number(Y.target.value)),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:30,children:"30"}),e.jsx("option",{value:40,children:"40"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:75,children:"75"})]})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeWaterSoftener",checked:j,onChange:Y=>S(Y.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeWaterSoftener",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.plumbing.includeWaterSoftener")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includePressureTank",checked:C,onChange:Y=>B(Y.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includePressureTank",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.plumbing.includePressureTank")})]}),C&&e.jsxs("div",{className:"pl-6",children:[e.jsx("label",{htmlFor:"pressureTankSize",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.pressureTankSize")}),e.jsxs("select",{id:"pressureTankSize",value:F,onChange:Y=>Q(Number(Y.target.value)),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:30,children:"30"}),e.jsx("option",{value:40,children:"40"})]})]})]})]}),e.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.plumbing.drainage")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeSewerConnection",checked:q,onChange:Y=>P(Y.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeSewerConnection",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.plumbing.includeSewerConnection")})]}),q&&e.jsxs("div",{className:"pl-6",children:[e.jsx("label",{htmlFor:"sewerLength",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.sewerLineLength")}),e.jsx("input",{type:"number",id:"sewerLength",min:"0",step:"1",value:D,onChange:Y=>_(Y.target.value?Number(Y.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.plumbing.enterSewerLineLength")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeCleanouts",checked:$,onChange:Y=>k(Y.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeCleanouts",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.plumbing.includeCleanouts")})]}),$&&e.jsxs("div",{className:"pl-6",children:[e.jsx("label",{htmlFor:"cleanoutCount",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.plumbing.numberOfCleanouts")}),e.jsx("input",{type:"number",id:"cleanoutCount",min:"1",step:"1",value:L,onChange:Y=>E(Number(Y.target.value)),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.plumbing.enterNumberOfCleanouts")})]})]})]})]}),e.jsx("button",{onClick:z,disabled:!ne,className:`w-full py-3 px-4 rounded-md font-medium text-white ${ne?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},MU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{materials:a,pricing:n,loading:i,isConfigured:o}=Aa("retaining-wall",r==="custom"),{getCustomPrice:l,getCustomUnitValue:d}=ma("retaining-wall"),[u,m]=p.useState("block"),[h,x]=p.useState(""),[f,b]=p.useState(""),[v,j]=p.useState(12),[S,C]=p.useState("standard"),[B,F]=p.useState(""),[Q,q]=p.useState(""),[P,D]=p.useState(""),[_,$]=p.useState(""),[k,L]=p.useState(""),[E,O]=p.useState("both"),[le,te]=p.useState(!0),[V,M]=p.useState("clay"),[ie,K]=p.useState(!1),[H,I]=p.useState(2),[ee,se]=p.useState(!0),[de,re]=p.useState(""),[z,ne]=p.useState(""),[Y,X]=p.useState(""),[ye,pe]=p.useState(""),Ce=p.useMemo(()=>{const U={standard:{width:12,height:8,depth:12,price:5.98,weightLbs:38},pinned:{width:16,height:6,depth:12,price:6.98,weightLbs:42},gravity:{width:18,height:8,depth:24,price:12.98,weightLbs:82},custom:{width:B,height:Q,depth:P,price:_,weightLbs:k}};if(r==="custom"&&o&&a.length>0){const fe=a.filter(Se=>Se.category==="wall-blocks");if(fe.length>0){const Se={...U};return fe.forEach(Re=>{const G=Re.metadata||{};Se[Re.id]={width:G.width||12,height:G.height||8,depth:G.depth||12,price:Re.price,weightLbs:G.weightLbs||40}}),Se}}return U},[r,o,a,B,Q,P,_,k]);p.useMemo(()=>r==="custom"&&o&&n?n:{},[r,o,n]);const je=()=>({wallType:u,length:h,height:f,concreteWidth:v,blockType:S,customBlockWidth:B,customBlockHeight:Q,customBlockDepth:P,customBlockPrice:_,customBlockWeight:k,drainageType:E,includeFrost:le,soilType:V,includeGeogrid:ie,geogridLayers:H,includeCapstone:ee,machineHours:de,pricePerHour:z,boulderQuantity:Y,pricePerBoulder:ye}),ce=U=>{m(U.inputs.wallType),x(U.inputs.length),b(U.inputs.height),j(U.inputs.concreteWidth),C(U.inputs.blockType),F(U.inputs.customBlockWidth),q(U.inputs.customBlockHeight),D(U.inputs.customBlockDepth),$(U.inputs.customBlockPrice),L(U.inputs.customBlockWeight),O(U.inputs.drainageType),te(U.inputs.includeFrost),M(U.inputs.soilType),K(U.inputs.includeGeogrid),I(U.inputs.geogridLayers),se(U.inputs.includeCapstone),re(U.inputs.machineHours),ne(U.inputs.pricePerHour),X(U.inputs.boulderQuantity),pe(U.inputs.pricePerBoulder)},Te=()=>{m("block"),x(""),b(""),j(12),C("standard"),F(""),q(""),D(""),$(""),L(""),O("both"),te(!0),M("clay"),K(!1),I(2),se(!0),re(""),ne(""),X(""),pe("")},We=()=>{if(u==="boulder"||typeof h=="number"&&typeof f=="number"){const U=[];let fe=0,Se=0;if(u!=="boulder"&&(Se=h*f,U.push({label:t("calculators.retainingWall.totalWallArea"),value:Number(Se.toFixed(2)),unit:t("calculators.retainingWall.squareFeet")})),u==="block"){const Re=Ce[S];if(S==="custom"&&typeof Re.width=="number"&&typeof Re.height=="number"&&typeof Re.depth=="number"&&typeof Re.price=="number"){const G=144/(Re.width*Re.height),ue=Math.ceil(Se*G),ge=l("wall_block_custom",Re.price),oe=ue*ge;fe+=oe,U.push({label:`${t("calculators.retainingWall.customBlocks")} (${Re.width}"x${Re.height}"x${Re.depth}")`,value:ue,unit:t("calculators.retainingWall.blocks"),cost:oe})}else if(S!=="custom"){const G=144/(Re.width*Re.height),ue=Math.ceil(Se*G),ge=l(`wall_block_${S}`,Re.price),oe=ue*ge;fe+=oe,U.push({label:`${t("calculators.retainingWall.retainingWallBlocks")} (${S})`,value:ue,unit:t("calculators.retainingWall.blocks"),cost:oe})}if(ee){const ue=Math.ceil(h*1),ge=l("capstone",8.98),oe=ue*ge;fe+=oe,U.push({label:t("calculators.retainingWall.capstoneBlocks"),value:ue,unit:t("calculators.retainingWall.pieces"),cost:oe})}}else if(u==="concrete"){const Re=typeof v=="number"?v:12,G=h*f*(Re/12)/27,ue=l("concrete",185),ge=G*ue;fe+=ge,U.push({label:t("calculators.retainingWall.concreteNeeded"),value:Number(G.toFixed(2)),unit:t("calculators.retainingWall.cubicYards"),cost:ge});const oe=12,J=16,Ae=Math.ceil(h*12/oe),Fe=Math.ceil(f*12/J),Qe=Ae*f+Fe*h,Ie=l("rebar",12.98),et=d("Rebar",20,"rebar"),ot=Math.ceil(Qe/et)*Ie;fe+=ot,U.push({label:t("calculators.retainingWall.rebarNeeded"),value:Math.ceil(Qe),unit:t("calculators.retainingWall.linearFeet"),cost:ot})}else if(u==="timber"){const G=Math.ceil(f*12/6),ge=Math.ceil(h/8)*G,oe=l("timber_6x6",24.98),J=ge*oe;fe+=J,U.push({label:t("calculators.retainingWall.pressureTreatedTimbers"),value:ge,unit:t("calculators.retainingWall.eightFootLengths"),cost:J});const Ae=Math.ceil(h/8)*Math.ceil(G/2),Fe=Ae*oe;fe+=Fe,U.push({label:t("calculators.retainingWall.deadmenTimbers"),value:Ae,unit:t("calculators.retainingWall.eightFootLengths"),cost:Fe})}else if(u==="boulder"){if(typeof de=="number"&&typeof z=="number"){const Re=de*z;fe+=Re,U.push({label:"Machine Hours",value:de,unit:"Hours",cost:Re})}if(typeof Y=="number"&&typeof ye=="number"){const Re=Y*ye;fe+=Re,U.push({label:"Boulders",value:Y,unit:"Pieces",cost:Re})}}if(u!=="boulder"){const ue=h*((u==="block"?24:36)/12)*(6/12)/27,ge=l("gravel",45),oe=ue*ge;if(fe+=oe,U.push({label:t("calculators.retainingWall.gravelBaseMaterial"),value:Number(ue.toFixed(2)),unit:t("calculators.retainingWall.cubicYards"),cost:oe}),E!=="none"){if(E==="gravel"||E==="both"){const et=h*f*1/27,ot=l("drainage_gravel",55),lt=et*ot;fe+=lt,U.push({label:t("calculators.retainingWall.drainageGravel"),value:Number(et.toFixed(2)),unit:t("calculators.retainingWall.cubicYards"),cost:lt})}if(E==="pipe"||E==="both"){const et=Math.ceil(h),ot=l("drain_pipe",8.98),lt=et*ot;fe+=lt,U.push({label:t("calculators.retainingWall.drainagePipe"),value:et,unit:t("calculators.retainingWall.tenFootSections"),cost:lt})}}if(ie&&f>4){const et=h*f*H,ot=d("Geogrid",200,"geogrid"),lt=Math.ceil(et/ot),vt=l("geogrid",89.98),ct=lt*vt;fe+=ct,U.push({label:t("calculators.retainingWall.geogridReinforcement"),value:lt,unit:t("calculators.retainingWall.twoHundredSfRolls"),cost:ct})}const J=h*(f+2),Ae=d("Filter Fabric",300,"fabric"),Fe=Math.ceil(J/Ae),Qe=l("filter_fabric",45.98),Ie=Fe*Qe;fe+=Ie,U.push({label:t("calculators.retainingWall.filterFabric"),value:Fe,unit:t("calculators.retainingWall.threeHundredSfRolls"),cost:Ie})}U.push({label:t("calculators.retainingWall.totalEstimatedCost"),value:Number(fe.toFixed(2)),unit:t("calculators.retainingWall.usd"),isTotal:!0}),s(U)}},Le=u==="boulder"?typeof de=="number"&&typeof z=="number"&&typeof Y=="number"&&typeof ye=="number":typeof h=="number"&&typeof f=="number"&&(S!=="custom"||typeof B=="number"&&typeof Q=="number"&&typeof P=="number"&&typeof _=="number"&&typeof k=="number");return r==="custom"&&i?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ef,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.retainingWall.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!o?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ef,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.retainingWall.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ef,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Ef,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.retainingWall.title")})]}),e.jsx(Ks,{calculatorType:"retaining-wall",getCurrentInputs:je,onLoadEstimate:ce,onNewEstimate:Te}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex justify-between mb-4",children:e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${u==="block"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-l-lg`,onClick:()=>m("block"),children:t("calculators.retainingWall.blockWall")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${u==="concrete"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border-t border-b border-slate-300`,onClick:()=>m("concrete"),children:t("calculators.retainingWall.concreteWall")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${u==="timber"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>m("timber"),children:t("calculators.retainingWall.timberWall")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium ${u==="boulder"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300 rounded-r-lg`,onClick:()=>m("boulder"),children:"Boulder Wall"})]})}),u==="boulder"?e.jsxs("div",{className:"mb-6 p-6 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:"Boulder Wall Calculator"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"machineHours",className:"block text-sm font-medium text-slate-700 mb-1",children:"Total Machine Hours"}),e.jsx("input",{type:"number",id:"machineHours",min:"0",step:"0.5",value:de,onChange:U=>re(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 8.5"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pricePerHour",className:"block text-sm font-medium text-slate-700 mb-1",children:"Price Per Hour ($)"}),e.jsx("input",{type:"number",id:"pricePerHour",min:"0",step:"0.01",value:z,onChange:U=>ne(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 150.00"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"boulderQuantity",className:"block text-sm font-medium text-slate-700 mb-1",children:"Estimated Quantity of Boulders"}),e.jsx("input",{type:"number",id:"boulderQuantity",min:"0",step:"1",value:Y,onChange:U=>X(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 25"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pricePerBoulder",className:"block text-sm font-medium text-slate-700 mb-1",children:"Price Per Boulder ($)"}),e.jsx("input",{type:"number",id:"pricePerBoulder",min:"0",step:"0.01",value:ye,onChange:U=>pe(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 75.00"})]})]}),e.jsxs("p",{className:"mt-4 text-sm text-slate-600",children:[e.jsx("strong",{children:"Note:"})," Boulder walls require specialized equipment and expertise. Total cost includes machine hours and boulder materials."]})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.wallLengthFeet")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:h,onChange:U=>x(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.retainingWall.enterWallLengthPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.wallHeightFeet")}),e.jsx("input",{type:"number",id:"height",min:"0",step:"0.1",value:f,onChange:U=>b(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.retainingWall.enterWallHeightPlaceholder")})]})]}),u==="block"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"blockType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.blockType")}),e.jsxs("select",{id:"blockType",value:S,onChange:U=>C(U.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"standard",children:t("calculators.retainingWall.standardBlock")}),e.jsx("option",{value:"pinned",children:t("calculators.retainingWall.pinnedBlock")}),e.jsx("option",{value:"gravity",children:t("calculators.retainingWall.gravityBlock")}),e.jsx("option",{value:"custom",children:t("calculators.retainingWall.customBlockSize")})]}),S==="custom"&&e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.blockWidthInches")}),e.jsx("input",{type:"number",min:"0",step:"0.125",value:B,onChange:U=>F(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.retainingWall.widthInInchesPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.blockHeightInches")}),e.jsx("input",{type:"number",min:"0",step:"0.125",value:Q,onChange:U=>q(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.retainingWall.heightInInchesPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.blockDepthInches")}),e.jsx("input",{type:"number",min:"0",step:"0.125",value:P,onChange:U=>D(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.retainingWall.depthInInchesPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.pricePerBlock")}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:_,onChange:U=>$(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.retainingWall.pricePerBlockPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.blockWeightLbs")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:k,onChange:U=>L(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.retainingWall.weightInPoundsPlaceholder")})]})]})]}),u==="concrete"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"concreteWidth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.wallThicknessInches")}),e.jsx("input",{type:"number",id:"concreteWidth",min:"0",step:"1",value:v,onChange:U=>j(U.target.value?Number(U.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.retainingWall.enterWallThicknessPlaceholder")}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t("calculators.retainingWall.typicalThickness")})]}),u!=="boulder"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"soilType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.soilType")}),e.jsxs("select",{id:"soilType",value:V,onChange:U=>M(U.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"sandy",children:t("calculators.retainingWall.sandySoil")}),e.jsx("option",{value:"clay",children:t("calculators.retainingWall.claySoil")}),e.jsx("option",{value:"gravel",children:t("calculators.retainingWall.gravelRockySoil")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"drainageType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.drainageSystem")}),e.jsxs("select",{id:"drainageType",value:E,onChange:U=>O(U.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"both",children:t("calculators.retainingWall.gravelAndPipe")}),e.jsx("option",{value:"gravel",children:t("calculators.retainingWall.gravelOnly")}),e.jsx("option",{value:"pipe",children:t("calculators.retainingWall.pipeOnly")}),e.jsx("option",{value:"none",children:t("calculators.retainingWall.noDrainage")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.retainingWall.additionalOptions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeFrost",checked:le,onChange:U=>te(U.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeFrost",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.retainingWall.includeFrostProtection")})]}),u==="block"&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeCapstone",checked:ee,onChange:U=>se(U.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeCapstone",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.retainingWall.includeCapstone")})]})]})]})]}),u!=="boulder"&&f>4&&e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("input",{type:"checkbox",id:"includeGeogrid",checked:ie,onChange:U=>K(U.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeGeogrid",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.retainingWall.includeGeogridReinforcement")})]}),ie&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"geogridLayers",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.retainingWall.numberOfGeogridLayers")}),e.jsx("select",{id:"geogridLayers",value:H,onChange:U=>I(Number(U.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[2,3,4,5].map(U=>e.jsx("option",{value:U,children:t("calculators.retainingWall.layersCount",{count:U})},U))})]})]})]}),e.jsx("button",{onClick:We,disabled:!Le,className:`w-full py-3 px-4 rounded-md font-medium text-white ${Le?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},RU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{pricing:a,loading:n,isConfigured:i}=Aa("siding",r==="custom"),{getCustomPrice:o,getCustomUnitValue:l}=ma("siding"),[d,u]=p.useState([]),[m,h]=p.useState("vinyl"),[x,f]=p.useState("lap"),[b,v]=p.useState(4),[j,S]=p.useState(!0),[C,B]=p.useState("vinyl"),[F,Q]=p.useState(!1),[q,P]=p.useState(!0),[D,_]=p.useState(!0),[$,k]=p.useState(!0),[L,E]=p.useState(!0),[O,le]=p.useState(15),te={vinyl:{lap:o("Vinyl Siding - Traditional Lap",179.98,"siding"),"dutch-lap":o("Vinyl Siding - Dutch Lap",199.98,"siding"),vertical:o("Vinyl Siding - Vertical Board & Batten",219.98,"siding"),shake:o("Vinyl Siding - Shake/Shingle",259.98,"siding")},"fiber-cement":{lap:o("Fiber Cement - Traditional Lap",319.98,"siding"),"dutch-lap":o("Fiber Cement - Dutch Lap",339.98,"siding"),vertical:o("Fiber Cement - Vertical Board & Batten",359.98,"siding"),shake:o("Fiber Cement - Shake/Shingle",399.98,"siding")},wood:{lap:o("Wood Siding - Traditional Lap",399.98,"siding"),"dutch-lap":o("Wood Siding - Dutch Lap",419.98,"siding"),vertical:o("Wood Siding - Vertical Board & Batten",439.98,"siding"),shake:o("Wood Siding - Shake/Shingle",479.98,"siding")},metal:{lap:o("Metal Siding - Traditional Lap",299.98,"siding"),"dutch-lap":o("Metal Siding - Dutch Lap",319.98,"siding"),vertical:o("Metal Siding - Vertical Board & Batten",279.98,"siding"),shake:o("Metal Siding - Shake/Shingle",379.98,"siding")},"engineered-wood":{lap:o("Engineered Wood - Traditional Lap",359.98,"siding"),"dutch-lap":o("Engineered Wood - Dutch Lap",379.98,"siding"),vertical:o("Engineered Wood - Vertical Board & Batten",399.98,"siding"),shake:o("Engineered Wood - Shake/Shingle",439.98,"siding")}},V={vinyl:o("Vinyl Trim",17.98,"trim"),wood:o("Wood Trim",25.98,"trim"),aluminum:o("Aluminum Trim",31.98,"trim"),"fiber-cement":o("Fiber Cement Trim",39.98,"trim")},M=p.useMemo(()=>{if(r==="custom"&&i&&a){const pe={};return Object.keys(te).forEach(Ce=>{pe[Ce]={},Object.keys(te[Ce]).forEach(je=>{const ce=`siding_${Ce}_${je}`;pe[Ce][je]=a[ce]||te[Ce][je]})}),pe}return te},[r,i,a]),ie=p.useMemo(()=>r==="custom"&&i&&a?{vinyl:a.trim_vinyl||V.vinyl,wood:a.trim_wood||V.wood,aluminum:a.trim_aluminum||V.aluminum,"fiber-cement":a.trim_fiber_cement||V["fiber-cement"]}:V,[r,i,a]);p.useEffect(()=>{r==="custom"&&i&&(Object.keys(M).includes(m)||h("vinyl"))},[r,i,M]);const K=()=>{const pe={id:Date.now().toString(),length:0,height:0,isGable:!1,openings:[]};u([...d,pe])},H=(pe,Ce)=>{u(d.map(je=>je.id===pe?{...je,...Ce}:je))},I=pe=>{u(d.filter(Ce=>Ce.id!==pe))},ee=(pe,Ce)=>{const je=d.find(ce=>ce.id===pe);if(je){const ce={width:Ce==="garage"?16:3,height:Ce==="garage"?7:Ce==="door"?6.67:4,type:Ce};H(pe,{openings:[...je.openings,ce]})}},se=(pe,Ce,je)=>{const ce=d.find(Te=>Te.id===pe);if(ce){const Te=[...ce.openings];Te[Ce]={...Te[Ce],...je},H(pe,{openings:Te})}},de=(pe,Ce)=>{const je=d.find(ce=>ce.id===pe);je&&H(pe,{openings:je.openings.filter((ce,Te)=>Te!==Ce)})},re=()=>({walls:d,sidingType:m,sidingProfile:x,sidingExposure:b,includeTrim:j,trimType:C,includeInsulation:F,includeHouseWrap:q,includeStarter:D,includeJChannel:$,includeCorners:L,wasteFactor:O}),z=pe=>{pe.walls&&u(pe.walls),pe.sidingType&&h(pe.sidingType),pe.sidingProfile&&f(pe.sidingProfile),pe.sidingExposure&&v(pe.sidingExposure),pe.includeTrim!==void 0&&S(pe.includeTrim),pe.trimType&&B(pe.trimType),pe.includeInsulation!==void 0&&Q(pe.includeInsulation),pe.includeHouseWrap!==void 0&&P(pe.includeHouseWrap),pe.includeStarter!==void 0&&_(pe.includeStarter),pe.includeJChannel!==void 0&&k(pe.includeJChannel),pe.includeCorners!==void 0&&E(pe.includeCorners),pe.wasteFactor&&le(pe.wasteFactor)},ne=()=>{u([]),h("vinyl"),f("lap"),v(4),S(!0),B("vinyl"),Q(!1),P(!0),_(!0),k(!0),E(!0),le(15)},Y=()=>M[m]?.[x]||0,X=()=>{const pe=[];let Ce=0,je=0,ce=0,Te=0;d.forEach(oe=>{let J;oe.isGable&&typeof oe.gableHeight=="number"?J=oe.length*oe.height+oe.length*oe.gableHeight/2:J=oe.length*oe.height;const Ae=oe.openings.reduce((Fe,Qe)=>(Te+=2*(Qe.width+Qe.height),Fe+Qe.width*Qe.height),0);je+=J-Ae,ce+=2*(oe.length+oe.height)});const We=je*(1+O/100),Le=Math.ceil(We/100),U=Y(),fe=Le*U;if(Ce+=fe,pe.push({label:t("calculators.siding.totalWallArea"),value:Number(je.toFixed(2)),unit:t("calculators.siding.squareFeet")},{label:`${m.replace("-"," ").replace(/(^\w|\s\w)/g,oe=>oe.toUpperCase())} ${t("calculators.siding.siding")} (${x.replace("-"," ")})`,value:Le,unit:t("calculators.siding.squares"),cost:fe}),q){const oe=l("House Wrap",1e3,"accessories"),J=Math.ceil(je/oe),Ae=o("House Wrap",159.98,"accessories"),Fe=J*Ae;Ce+=Fe,pe.push({label:t("calculators.siding.houseWrap"),value:J,unit:t("calculators.siding.rolls1000sf"),cost:Fe});const Qe=l("House Wrap Tape",165,"accessories"),Ie=Math.ceil(ce/Qe),et=o("House Wrap Tape",12.98,"accessories"),ot=Ie*et;Ce+=ot,pe.push({label:t("calculators.siding.houseWrapTape"),value:Ie,unit:t("calculators.siding.rolls"),cost:ot})}if(F){const oe=l("Foam Insulation",100,"accessories"),J=Math.ceil(je/oe),Ae=o("Foam Insulation",49.98,"accessories"),Fe=J*Ae;Ce+=Fe,pe.push({label:t("calculators.siding.foamInsulation"),value:J,unit:t("calculators.siding.bundles"),cost:Fe})}if(D){const oe=l("Starter Strip",12,"accessories"),J=Math.ceil(ce/oe),Ae=o("Starter Strip",13.98,"accessories"),Fe=J*Ae;Ce+=Fe,pe.push({label:t("calculators.siding.starterStrip"),value:J,unit:t("calculators.siding.pieces12ft"),cost:Fe})}if($){const oe=l("J-Channel",12.5,"accessories"),J=Math.ceil((Te+ce)/oe),Ae=o("J-Channel",17.98,"accessories"),Fe=J*Ae;Ce+=Fe,pe.push({label:t("calculators.siding.jChannel"),value:J,unit:t("calculators.siding.pieces12_5ft"),cost:Fe})}if(L){const oe=Math.max(...d.map(Ie=>Ie.height)),J=l("Corner Posts",10,"accessories"),Ae=Math.ceil(oe*4/J),Fe=o("Corner Posts",39.98,"accessories"),Qe=Ae*Fe;Ce+=Qe,pe.push({label:t("calculators.siding.cornerPosts"),value:Ae,unit:t("calculators.siding.pieces10ft"),cost:Qe})}if(j){const oe=Te>0?Te:ce*.3,J=Math.ceil(oe/16),Ae=J*(ie[C]||0);Ce+=Ae,pe.push({label:`${C.replace("-"," ").replace(/(^\w|\s\w)/g,Fe=>Fe.toUpperCase())} ${t("calculators.siding.trim")}`,value:J,unit:t("calculators.siding.pieces16ft"),cost:Ae})}const Se=250,Re=l("Siding Fasteners",1e3,"accessories"),G=Math.ceil(Le*Se/Re),ue=o("Siding Fasteners",29.98,"accessories"),ge=G*ue;Ce+=ge,pe.push({label:t("calculators.siding.sidingFasteners"),value:G,unit:t("calculators.siding.boxes1000ct"),cost:ge}),pe.push({label:t("calculators.siding.totalEstimatedCost"),value:Number(Ce.toFixed(2)),unit:"USD",isTotal:!0}),s(pe)};if(r==="custom"&&n)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Lo,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.siding.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]});if(r==="custom"&&!i)return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Lo,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.siding.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Lo,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]});const ye=d.length>0&&d.every(pe=>typeof pe.length=="number"&&pe.length>0&&typeof pe.height=="number"&&pe.height>0&&(!pe.isGable||typeof pe.gableHeight=="number"));return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Lo,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.siding.title")})]}),e.jsx(Ks,{calculatorType:"siding",currentInputs:re(),onLoadEstimate:z,onNewEstimate:ne}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sidingType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.sidingMaterial")}),e.jsxs("select",{id:"sidingType",value:m,onChange:pe=>h(pe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"vinyl",children:t("calculators.siding.vinylSiding")}),e.jsx("option",{value:"fiber-cement",children:t("calculators.siding.fiberCementSiding")}),e.jsx("option",{value:"wood",children:t("calculators.siding.woodSiding")}),e.jsx("option",{value:"metal",children:t("calculators.siding.metalSiding")}),e.jsx("option",{value:"engineered-wood",children:t("calculators.siding.engineeredWoodSiding")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sidingProfile",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.sidingProfile")}),e.jsxs("select",{id:"sidingProfile",value:x,onChange:pe=>f(pe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"lap",children:t("calculators.siding.traditionalLap")}),e.jsx("option",{value:"dutch-lap",children:t("calculators.siding.dutchLap")}),e.jsx("option",{value:"vertical",children:t("calculators.siding.verticalBoardBatten")}),e.jsx("option",{value:"shake",children:t("calculators.siding.shakeShingle")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"sidingExposure",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.exposureInches")}),e.jsxs("select",{id:"sidingExposure",value:b,onChange:pe=>v(Number(pe.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:4,children:t("calculators.siding.exposure4")}),e.jsx("option",{value:5,children:t("calculators.siding.exposure5")}),e.jsx("option",{value:6,children:t("calculators.siding.exposure6")}),e.jsx("option",{value:7,children:t("calculators.siding.exposure7")}),e.jsx("option",{value:8,children:t("calculators.siding.exposure8")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wasteFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.wasteFactor")}),e.jsxs("select",{id:"wasteFactor",value:O,onChange:pe=>le(Number(pe.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:t("calculators.siding.wasteFactor10")}),e.jsx("option",{value:15,children:t("calculators.siding.wasteFactor15")}),e.jsx("option",{value:20,children:t("calculators.siding.wasteFactor20")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.siding.walls")}),e.jsx("button",{onClick:K,className:"px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors",children:t("calculators.siding.addWall")})]}),d.map(pe=>e.jsxs("div",{className:"mb-6 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.wallLength")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:pe.length||"",onChange:Ce=>H(pe.id,{length:Number(Ce.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.siding.enterWallLength")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.wallHeight")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:pe.height||"",onChange:Ce=>H(pe.id,{height:Number(Ce.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.siding.enterWallHeight")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:pe.isGable,onChange:Ce=>H(pe.id,{isGable:Ce.target.checked}),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.siding.isGableWall")})]}),pe.isGable&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.gableHeight")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:pe.gableHeight||"",onChange:Ce=>H(pe.id,{gableHeight:Number(Ce.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md",placeholder:t("calculators.siding.enterGableHeight")})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"text-md font-medium text-slate-700",children:t("calculators.siding.openings")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ee(pe.id,"door"),className:"px-3 py-1 bg-slate-100 hover:bg-slate-200 rounded-md text-sm",children:t("calculators.siding.addDoor")}),e.jsx("button",{onClick:()=>ee(pe.id,"window"),className:"px-3 py-1 bg-slate-100 hover:bg-slate-200 rounded-md text-sm",children:t("calculators.siding.addWindow")}),e.jsx("button",{onClick:()=>ee(pe.id,"garage"),className:"px-3 py-1 bg-slate-100 hover:bg-slate-200 rounded-md text-sm",children:t("calculators.siding.addGarage")}),e.jsx("button",{onClick:()=>ee(pe.id,"custom"),className:"px-3 py-1 bg-slate-100 hover:bg-slate-200 rounded-md text-sm",children:t("calculators.siding.addCustom")})]})]}),pe.openings.map((Ce,je)=>e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-2 p-2 bg-white rounded",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.widthFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:Ce.width,onChange:ce=>se(pe.id,je,{width:Number(ce.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.heightFeet")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:Ce.height,onChange:ce=>se(pe.id,je,{height:Number(ce.target.value)}),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-slate-600",children:Ce.type}),e.jsx("button",{onClick:()=>de(pe.id,je),className:"text-red-500 hover:text-red-600",children:t("calculators.siding.remove")})]})]},je))]}),e.jsx("button",{onClick:()=>I(pe.id),className:"mt-4 text-red-500 hover:text-red-600",children:t("calculators.siding.removeWall")})]},pe.id))]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.siding.additionalOptions")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeHouseWrap",checked:q,onChange:pe=>P(pe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeHouseWrap",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.siding.includeHouseWrap")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeInsulation",checked:F,onChange:pe=>Q(pe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeInsulation",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.siding.includeFoamInsulation")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeStarter",checked:D,onChange:pe=>_(pe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeStarter",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.siding.includeStarterStrip")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeJChannel",checked:$,onChange:pe=>k(pe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeJChannel",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.siding.includeJChannel")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeCorners",checked:L,onChange:pe=>E(pe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeCorners",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.siding.includeCornerPosts")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeTrim",checked:j,onChange:pe=>S(pe.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeTrim",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.siding.includeTrim")})]}),j&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"trimType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.siding.trimMaterial")}),e.jsxs("select",{id:"trimType",value:C,onChange:pe=>B(pe.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"vinyl",children:t("calculators.siding.vinylTrim")}),e.jsx("option",{value:"wood",children:t("calculators.siding.woodTrim")}),e.jsx("option",{value:"aluminum",children:t("calculators.siding.aluminumTrim")}),e.jsx("option",{value:"fiber-cement",children:t("calculators.siding.fiberCementTrim")})]})]})]})]})]}),e.jsx("button",{onClick:X,disabled:!ye,className:`w-full py-3 px-4 rounded-md font-medium text-white ${ye?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},QU=({onCalculate:s})=>{const{t}=fr(),{activeTab:r}=sa(),{loading:a,isConfigured:n}=Aa("tile",r==="custom"),{getCustomPrice:i,getCustomUnitValue:o}=ma("tile"),[l,d]=p.useState("floor"),[u,m]=p.useState("dimensions"),[h,x]=p.useState(""),[f,b]=p.useState(""),[v,j]=p.useState(""),[S,C]=p.useState(""),[B,F]=p.useState({width:12,length:12,piecesPerBox:12,pricePerBox:45.98}),[Q,q]=p.useState(""),[P,D]=p.useState(""),[_,$]=p.useState(""),[k,L]=p.useState(""),[E,O]=p.useState("straight"),[le,te]=p.useState(.25),[V,M]=p.useState([]),[ie,K]=p.useState(15),[H,I]=p.useState(!0),[ee,se]=p.useState("1/4"),[de,re]=p.useState("modified"),[z,ne]=p.useState("sanded"),[Y,X]=p.useState(!1),[ye,pe]=p.useState(!0),[Ce,je]=p.useState("metal"),ce=ge=>{M([...V,{width:3,height:ge==="door"?7:ge==="window"?4:ge==="cabinet"?2:3,type:ge}])},Te=(ge,oe,J)=>{const Ae=[...V];Ae[ge]={...Ae[ge],[oe]:J},M(Ae)},We=ge=>{M(V.filter((oe,J)=>J!==ge))},Le=p.useMemo(()=>({modified:i("Modified Thinset Mortar",24.98,"mortar"),unmodified:i("Unmodified Thinset Mortar",19.98,"mortar"),epoxy:i("Epoxy Mortar",89.98,"mortar")}),[i]),U=p.useMemo(()=>({sanded:i("Sanded Grout",19.98,"grout"),unsanded:i("Unsanded Grout",22.98,"grout"),epoxy:i("Epoxy Grout",79.98,"grout")}),[i]);p.useEffect(()=>{if(r==="custom"){const ge=Object.keys(Le);ge.length>0&&!ge.includes(de)&&re(ge[0]);const oe=Object.keys(U);oe.length>0&&!oe.includes(z)&&ne(oe[0])}else r==="default"&&(["modified","unmodified","epoxy"].includes(de)||re("modified"),["sanded","unsanded","epoxy"].includes(z)||ne("sanded"))},[r,Le,U]);const fe=()=>({surfaceType:l,inputType:u,length:h,width:f,height:v,area:S,tileSize:B,pattern:E,groutWidth:le,openings:V,wasteFactor:ie,includeBackerBoard:H,backerBoardThickness:ee,mortarType:de,groutType:z,includeMembrane:Y,includeEdging:ye,edgingType:Ce}),Se=ge=>{ge.surfaceType&&d(ge.surfaceType),ge.inputType&&m(ge.inputType),ge.length!==void 0&&x(ge.length),ge.width!==void 0&&b(ge.width),ge.height!==void 0&&j(ge.height),ge.area!==void 0&&C(ge.area),ge.tileSize&&F(ge.tileSize),ge.pattern&&O(ge.pattern),ge.groutWidth!==void 0&&te(ge.groutWidth),ge.openings&&M(ge.openings),ge.wasteFactor!==void 0&&K(ge.wasteFactor),ge.includeBackerBoard!==void 0&&I(ge.includeBackerBoard),ge.backerBoardThickness&&se(ge.backerBoardThickness),ge.mortarType&&re(ge.mortarType),ge.groutType&&ne(ge.groutType),ge.includeMembrane!==void 0&&X(ge.includeMembrane),ge.includeEdging!==void 0&&pe(ge.includeEdging),ge.edgingType&&je(ge.edgingType)},Re=()=>{d("floor"),m("dimensions"),x(""),b(""),j(""),C(""),F({width:12,length:12,piecesPerBox:12,pricePerBox:45.98}),q(""),D(""),$(""),L(""),O("straight"),te(.25),M([]),K(15),I(!0),se("1/4"),re("modified"),ne("sanded"),X(!1),pe(!0),je("metal")},G=()=>{let ge;if(u==="dimensions")if(l==="wall"&&typeof h=="number"&&typeof v=="number")ge=h*v;else if(l==="floor"&&typeof h=="number"&&typeof f=="number")ge=h*f;else return;else if(u==="area"&&typeof S=="number")ge=S;else return;const oe=V.reduce((Qt,br)=>Qt+br.width*br.height,0);ge-=oe;const J={straight:1.1,diagonal:1.15,herringbone:1.2,brick:1.1,basketweave:1.15}[E],Ae=ge*(1+ie/100)*J,Fe=B.width*B.length/144,Qe=Math.ceil(Ae/Fe),Ie=Math.ceil(Qe/B.piecesPerBox),et=Ie*B.pricePerBox,ot=[{label:t("calculators.tile.totalSurfaceArea"),value:Number(ge.toFixed(2)),unit:t("calculators.tile.squareFeet")},{label:t("calculators.tile.areaWithWastePattern",{wasteFactor:ie,pattern:t(`calculators.tile.patterns.${E}`)}),value:Number(Ae.toFixed(2)),unit:t("calculators.tile.squareFeet")},{label:t("calculators.tile.tileSize",{width:B.width,length:B.length}),value:Ie,unit:t("calculators.tile.boxes"),cost:et}];let lt=et;const vt=o("Mortar",90,"mortar"),ct=Math.ceil(Ae/vt),bt=Le[de]||24.98,Ut=ct*bt;lt+=Ut,ot.push({label:t(`calculators.tile.mortarTypes.${de}`),value:ct,unit:t("calculators.tile.bags50lb"),cost:Ut});const jt={.125:200,.25:150,.375:100}[le],qe=o("Grout",jt,"grout"),ht=Math.ceil(Ae/qe),yt=U[z]||19.98,ft=ht*yt;if(lt+=ft,ot.push({label:t("calculators.tile.groutWithJoints",{groutType:t(`calculators.tile.groutTypes.${z}`),width:le}),value:ht,unit:t("calculators.tile.bags25lb"),cost:ft}),H){const Qt=o("Backer Board",32,"supplies"),br=Math.ceil(ge/Qt),Wt=ee==="1/4"?i('Backer Board 1/4"',15.98,"supplies"):i('Backer Board 5/8"',19.98,"supplies"),pr=br*Wt;lt+=pr,ot.push({label:t("calculators.tile.backerBoardThickness",{thickness:ee}),value:br,unit:t("calculators.tile.sheets3x5"),cost:pr});const Gr=br*30,Dt=Math.ceil(Gr/100),ts=Dt*i("Backer Board Screws",12.98,"supplies");lt+=ts,ot.push({label:t("calculators.tile.backerBoardScrews"),value:Dt,unit:t("calculators.tile.boxes100ct"),cost:ts})}if(Y){const Qt=o("Waterproof Membrane",100,"supplies"),br=Math.ceil(ge/Qt),Wt=br*i("Waterproof Membrane",89.98,"supplies");lt+=Wt,ot.push({label:t("calculators.tile.waterproofMembrane"),value:br,unit:t("calculators.tile.rolls100sf"),cost:Wt})}if(ye&&typeof h=="number"&&typeof f=="number"){const Qt=l==="floor"?2*(h+f):h+f,br=o("Edge Trim",8,"supplies"),Wt=Math.ceil(Qt/br),pr=Ce==="metal"?i("Metal Edge Trim",12.98,"supplies"):i("Stone Edge Trim",24.98,"supplies"),Gr=Wt*pr;lt+=Gr,ot.push({label:t(`calculators.tile.edgingTypes.${Ce}`),value:Wt,unit:t("calculators.tile.pieces8ft"),cost:Gr})}ot.push({label:t("calculators.tile.totalEstimatedCost"),value:Number(lt.toFixed(2)),unit:t("calculators.tile.usd"),isTotal:!0}),s(ot)},ue=(u==="dimensions"&&(l==="floor"&&typeof h=="number"&&typeof f=="number"||l==="wall"&&typeof h=="number"&&typeof v=="number")||u==="area"&&typeof S=="number")&&typeof B.width=="number"&&typeof B.length=="number"&&typeof B.piecesPerBox=="number"&&typeof B.pricePerBox=="number";return r==="custom"&&a?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.tile.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading custom configuration..."})]})]}):r==="custom"&&!n?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.tile.title")})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Mn,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Configuration Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This calculator hasn't been configured yet. Click the gear icon to set up your custom materials and pricing."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Mn,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:t("calculators.tile.title")})]}),e.jsx(Ks,{calculatorType:"tile",getCurrentInputs:fe,onLoadEstimate:Se,onNewEstimate:Re}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${l==="floor"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>d("floor"),children:t("calculators.tile.floor")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${l==="wall"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>d("wall"),children:t("calculators.tile.wall")})]}),e.jsxs("div",{className:"inline-flex rounded-md shadow-sm",children:[e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${u==="dimensions"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>m("dimensions"),children:t("calculators.tile.useDimensions")}),e.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${u==="area"?"bg-orange-500 text-white":"bg-white text-slate-700 hover:bg-slate-100"} border border-slate-300`,onClick:()=>m("area"),children:t("calculators.tile.useSquareFootage")})]})]}),u==="dimensions"?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:t(l==="wall"?"calculators.tile.wallLengthFeet":"calculators.tile.lengthFeet")}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:h,onChange:ge=>x(ge.target.value?Number(ge.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t(l==="wall"?"calculators.tile.placeholderWallLength":"calculators.tile.placeholderLength")})]}),l==="floor"?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"width",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.widthFeet")}),e.jsx("input",{type:"number",id:"width",min:"0",step:"0.1",value:f,onChange:ge=>b(ge.target.value?Number(ge.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.tile.placeholderWidth")})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.wallHeightFeet")}),e.jsx("input",{type:"number",id:"height",min:"0",step:"0.1",value:v,onChange:ge=>j(ge.target.value?Number(ge.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.tile.placeholderWallHeight")})]})]}):e.jsxs("div",{children:[e.jsx("label",{htmlFor:"area",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.totalAreaSquareFeet")}),e.jsx("input",{type:"number",id:"area",min:"0",step:"0.1",value:S,onChange:ge=>C(ge.target.value?Number(ge.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.tile.placeholderTotalArea")})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.tile.tileSpecifications")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tileWidth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.tileWidthInches")}),e.jsx("input",{type:"number",id:"tileWidth",min:"0",step:"0.125",value:Q||B.width,onChange:ge=>{const oe=ge.target.value?Number(ge.target.value):"";q(oe),F(J=>({...J,width:oe}))},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.tile.placeholderTileWidth")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tileLength",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.tileLengthInches")}),e.jsx("input",{type:"number",id:"tileLength",min:"0",step:"0.125",value:P||B.length,onChange:ge=>{const oe=ge.target.value?Number(ge.target.value):"";D(oe),F(J=>({...J,length:oe}))},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.tile.placeholderTileLength")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tilePiecesPerBox",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.piecesPerBox")}),e.jsx("input",{type:"number",id:"tilePiecesPerBox",min:"1",step:"1",value:_||B.piecesPerBox,onChange:ge=>{const oe=ge.target.value?Number(ge.target.value):"";$(oe),F(J=>({...J,piecesPerBox:oe}))},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.tile.placeholderPiecesPerBox")})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tilePricePerBox",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.pricePerBox")}),e.jsx("input",{type:"number",id:"tilePricePerBox",min:"0",step:"0.01",value:k||B.pricePerBox,onChange:ge=>{const oe=ge.target.value?Number(ge.target.value):"";L(oe),F(J=>({...J,pricePerBox:oe}))},className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:t("calculators.tile.placeholderPricePerBox")})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.tile.installationDetails")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pattern",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.installationPattern")}),e.jsxs("select",{id:"pattern",value:E,onChange:ge=>O(ge.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"straight",children:t("calculators.tile.patterns.straight")}),e.jsx("option",{value:"diagonal",children:t("calculators.tile.patterns.diagonal")}),e.jsx("option",{value:"herringbone",children:t("calculators.tile.patterns.herringbone")}),e.jsx("option",{value:"brick",children:t("calculators.tile.patterns.brick")}),e.jsx("option",{value:"basketweave",children:t("calculators.tile.patterns.basketweave")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"groutWidth",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.groutJointWidth")}),e.jsxs("select",{id:"groutWidth",value:le,onChange:ge=>te(Number(ge.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:.125,children:t("calculators.tile.groutWidths.1_8")}),e.jsx("option",{value:.25,children:t("calculators.tile.groutWidths.1_4")}),e.jsx("option",{value:.375,children:t("calculators.tile.groutWidths.3_8")})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800",children:t("calculators.tile.openings")}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ce("door"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.tile.addDoor")}),e.jsx("button",{onClick:()=>ce("window"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.tile.addWindow")}),l==="wall"&&e.jsx("button",{onClick:()=>ce("cabinet"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.tile.addCabinet")}),e.jsx("button",{onClick:()=>ce("custom"),className:"px-3 py-2 bg-slate-100 hover:bg-slate-200 rounded-md transition-colors",children:t("calculators.tile.addCustom")})]})]}),V.map((ge,oe)=>e.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.openingWidth")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:ge.width,onChange:J=>Te(oe,"width",Number(J.target.value)),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.openingHeight")}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:ge.height,onChange:J=>Te(oe,"height",Number(J.target.value)),className:"w-full p-2 border border-slate-300 rounded-md"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.openingType")}),e.jsxs("select",{value:ge.type,onChange:J=>Te(oe,"type",J.target.value),className:"w-full p-2 border border-slate-300 rounded-md",children:[e.jsx("option",{value:"door",children:t("calculators.tile.openingTypes.door")}),e.jsx("option",{value:"window",children:t("calculators.tile.openingTypes.window")}),l==="wall"&&e.jsx("option",{value:"cabinet",children:t("calculators.tile.openingTypes.cabinet")}),e.jsx("option",{value:"custom",children:t("calculators.tile.openingTypes.custom")})]})]})]}),e.jsx("button",{onClick:()=>We(oe),className:"mt-2 text-red-500 hover:text-red-600",children:t("calculators.tile.removeOpening")})]},oe))]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.tile.materials")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"mortarType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.mortarType")}),e.jsxs("select",{id:"mortarType",value:de,onChange:ge=>re(ge.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"modified",children:t("calculators.tile.mortarTypes.modified")}),e.jsx("option",{value:"unmodified",children:t("calculators.tile.mortarTypes.unmodified")}),e.jsx("option",{value:"epoxy",children:t("calculators.tile.mortarTypes.epoxy")})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"groutType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.groutType")}),e.jsxs("select",{id:"groutType",value:z,onChange:ge=>ne(ge.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"sanded",children:t("calculators.tile.groutTypes.sanded")}),e.jsx("option",{value:"unsanded",children:t("calculators.tile.groutTypes.unsanded")}),e.jsx("option",{value:"epoxy",children:t("calculators.tile.groutTypes.epoxy")})]})]})]})]}),e.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[e.jsx("h3",{className:"text-lg font-medium text-slate-800 mb-4",children:t("calculators.tile.additionalOptions")}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wasteFactor",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.wasteFactor")}),e.jsxs("select",{id:"wasteFactor",value:ie,onChange:ge=>K(Number(ge.target.value)),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:10,children:t("calculators.tile.wasteFactors.10")}),e.jsx("option",{value:15,children:t("calculators.tile.wasteFactors.15")}),e.jsx("option",{value:20,children:t("calculators.tile.wasteFactors.20")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeBackerBoard",checked:H,onChange:ge=>I(ge.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeBackerBoard",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.tile.includeBackerBoard")})]}),H&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"backerBoardThickness",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.backerBoardThicknessLabel")}),e.jsxs("select",{id:"backerBoardThickness",value:ee,onChange:ge=>se(ge.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"1/4",children:t("calculators.tile.backerBoardThicknesses.1_4")}),e.jsx("option",{value:"1/2",children:t("calculators.tile.backerBoardThicknesses.1_2")})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeMembrane",checked:Y,onChange:ge=>X(ge.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeMembrane",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.tile.includeWaterproofMembrane")})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"includeEdging",checked:ye,onChange:ge=>pe(ge.target.checked),className:"h-4 w-4 text-orange-500 focus:ring-orange-500 border-slate-300 rounded"}),e.jsx("label",{htmlFor:"includeEdging",className:"ml-2 block text-sm font-medium text-slate-700",children:t("calculators.tile.includeEdgeTrim")})]}),ye&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edgingType",className:"block text-sm font-medium text-slate-700 mb-1",children:t("calculators.tile.edgeTrimType")}),e.jsxs("select",{id:"edgingType",value:Ce,onChange:ge=>je(ge.target.value),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"metal",children:t("calculators.tile.edgingTypes.metal")}),e.jsx("option",{value:"stone",children:t("calculators.tile.edgingTypes.stone")})]})]})]})]})]}),e.jsx("button",{onClick:G,disabled:!ue,className:`w-full py-3 px-4 rounded-md font-medium text-white ${ue?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},Rf=async()=>{try{const{data:{user:s}}=await _e.auth.getUser();if(s?.id)return s.id}catch{console.log("Auth not available, using development mode")}return"00000000-0000-0000-0000-000000000000"},jl=Mc((s,t)=>({clients:[],isLoading:!1,error:null,searchTerm:"",statusFilter:"all",hasLoadedOnce:!1,fetchClients:async(r=!1)=>{const a=FP();if(a&&!r){s({clients:a,isLoading:!1,hasLoadedOnce:!0,error:null});return}const n=t();if(n.hasLoadedOnce&&!r&&n.clients.length>0){console.log(" Using Zustand cached clients data");return}if(!n.isLoading){s({isLoading:!0,error:null});try{const i=await Rf(),{data:o,error:l}=await _e.from("clients").select("*").order("created_at",{ascending:!1});if(l)throw l;s({clients:o?.map(d=>({id:d.id,name:d.name,email:d.email||"",phone:d.phone||"",address:d.address||"",city:d.city||"",state:d.state||"",zip:d.zip||"",company:d.company||"",notes:d.notes||"",status:d.status||"active",createdAt:d.created_at,updatedAt:d.updated_at}))||[],isLoading:!1,hasLoadedOnce:!0})}catch(i){console.error("Error fetching clients:",i),s({error:i instanceof Error?i.message:"Failed to fetch clients",isLoading:!1})}}},addClient:async r=>{console.log(" addClient called with:",r),s({isLoading:!0,error:null});try{const a=await Rf();console.log(" User ID:",a);const n={name:r.name,email:r.email||null,phone:r.phone||null,address:r.address||null,city:r.city||null,state:r.state||null,zip:r.zip||null,company:r.company||null,status:r.status||"active",notes:r.notes||null,user_id:a};console.log(" Sending to Supabase:",n);const{data:i,error:o}=await _e.from("clients").insert(n).select().single();if(console.log(" Supabase response:",{data:i,error:o}),o)throw console.error(" Supabase error:",o),o;const l={id:i.id,name:i.name,email:i.email||"",phone:i.phone||"",address:i.address||"",city:i.city||"",state:i.state||"",zip:i.zip||"",company:i.company||"",notes:i.notes||"",status:i.status||"active",createdAt:i.created_at,updatedAt:i.updated_at};s(d=>({clients:[l,...d.clients],isLoading:!1})),console.log(" Client added successfully:",l),alert("Client saved successfully!")}catch(a){throw console.error(" Error adding client:",a),alert(`Failed to save client: ${a instanceof Error?a.message:"Unknown error"}`),s({error:a instanceof Error?a.message:"Failed to add client",isLoading:!1}),a}},updateClient:async(r,a)=>{s({isLoading:!0,error:null});try{const n=await Rf(),{data:i,error:o}=await _e.from("clients").update({...a,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(o)throw o;const l={id:i.id,name:i.name,email:i.email||"",phone:i.phone||"",address:i.address||"",city:i.city||"",state:i.state||"",zip:i.zip||"",company:i.company||"",notes:i.notes||"",status:i.status||"active",createdAt:i.created_at,updatedAt:i.updated_at};s(d=>({clients:d.clients.map(u=>u.id===r?l:u),isLoading:!1}))}catch(n){console.error("Error updating client:",n),s({error:n instanceof Error?n.message:"Failed to update client",isLoading:!1})}},deleteClient:async r=>{s({isLoading:!0,error:null});try{const a=await Rf(),{error:n}=await _e.from("clients").delete().eq("id",r);if(n)throw n;s(i=>({clients:i.clients.filter(o=>o.id!==r),isLoading:!1}))}catch(a){console.error("Error deleting client:",a),s({error:a instanceof Error?a.message:"Failed to delete client",isLoading:!1})}},setSearchTerm:r=>s({searchTerm:r}),setStatusFilter:r=>s({statusFilter:r})})),OU=({onCalculate:s,onSaveSuccess:t})=>{const{t:r}=fr(),{clients:a,fetchClients:n,isLoading:i}=jl(),[o,l]=p.useState(""),[d,u]=p.useState(!1),[m,h]=p.useState({type:null,message:""}),[x,f]=p.useState(""),[b,v]=p.useState("asphalt"),[j,S]=p.useState("medium"),[C,B]=p.useState("1"),[F,Q]=p.useState(""),[q,P]=p.useState(""),[D,_]=p.useState(10),[$,k]=p.useState(!1),[L,E]=p.useState(!0),[O,le]=p.useState(!1),[te,V]=p.useState(!1),[M,ie]=p.useState(""),[K,H]=p.useState(""),[I,ee]=p.useState(!1),[se,de]=p.useState(""),[re,z]=p.useState(""),[ne,Y]=p.useState(!1),[X,ye]=p.useState(null),[pe,Ce]=p.useState([]),[je,ce]=p.useState(null);p.useEffect(()=>{I&&n()},[I,n]),p.useEffect(()=>{(async()=>{const J=await Ve.getOrCreateConfig("roofing");if(J.success&&J.data){ce(J.data.id);const Ae=await Ve.getMaterials(J.data.id);Ae.success&&Ae.data&&Ce(Ae.data)}})()},[]);const Te={asphalt:350,architectural:475,metal:850,tile:625,composite:425,"atlas-storm":550,"sbs-malarkey":500,"brava-synthetic":950},We=async()=>{if(!o.trim()){h({type:"error",message:" Please enter an address"});return}u(!0),h({type:"info",message:" Analyzing roof from satellite imagery..."});try{const J=await(await fetch("https://ujhgwcurllkkeouzwvgk.supabase.co/functions/v1/get-roof-area",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:o.trim()})})).json();J.success&&J.roofAreaSqFeet?(f(J.roofAreaSqFeet),h({type:"success",message:` Found ${J.roofAreaSqFeet.toLocaleString()} sq ft roof at ${J.address}${J.imageryDate?`
Imagery from: ${J.imageryDate}`:""}`}),setTimeout(()=>{J.roofAreaSqFeet>0&&fe(J.roofAreaSqFeet)},500)):h({type:"error",message:` ${J.error||"Unable to detect roof area"}`})}catch(oe){console.error("Address search error:",oe),h({type:"error",message:" Error searching address. Please try again."})}finally{u(!1)}},Le=(oe,J,Ae)=>{const Fe=pe.find(Qe=>Qe.name.toLowerCase()===oe.toLowerCase()&&(!Ae||Qe.category===Ae)&&!Qe.is_archived);return Fe?Fe.price:J},U=(oe,J,Ae)=>{const Fe=pe.find(Qe=>Qe.name.toLowerCase()===oe.toLowerCase()&&Qe.category===Ae&&!Qe.is_archived);if(Fe?.metadata?.unitSpec){const Qe=Ve.parseUnitSpec(Fe.metadata.unitSpec);return Qe!==null?Qe:J}return J},fe=oe=>{const J=oe||x;if(!J||J<=0){alert("Please enter a valid roof area or search by address");return}const Ae=[],Fe=Number(J),Qe=Fe/100,Ie=1+D/100,et=Qe*Ie,ot=te&&K?Number(K):Te[b],lt=et*ot;Ae.push({label:te&&M?`Roofing Material (${M}) - with ${D}% waste`:`Roofing Material - with ${D}% waste`,value:et,unit:"squares",cost:lt});const vt=Le("Standard Underlayment",26,"underlayment");if(Ae.push({label:"Underlayment",value:et,unit:"squares",cost:et*vt}),L){const ht=U("Ice & Water Shield",200,"underlayment"),yt=Le("Ice & Water Shield",70,"underlayment"),ft=Math.ceil(Fe/ht);Ae.push({label:"Ice & Water Shield",value:ft,unit:"rolls",cost:ft*yt})}const ct=Fe*.1,bt=Le("Ridge Cap",3.25,"components");Ae.push({label:"Ridge Cap",value:ct,unit:"linear feet",cost:ct*bt});const Ut=Math.sqrt(Fe)*4,jt=Le("Drip Edge",2.5,"components");Ae.push({label:"Drip Edge",value:Ut,unit:"linear feet",cost:Ut*jt});const qe=Le("Nails & Fasteners",32,"components");if(Ae.push({label:"Nails & Fasteners",value:et,unit:"squares",cost:et*qe}),F&&F>0){const ht=Le("Debris Disposal",32,"components");Ae.push({label:"Debris Disposal",value:et,unit:"squares",cost:et*ht})}if(q&&q>0){const ht=Le("Skylight Flashing",85,"components");Ae.push({label:"Skylight Flashing",value:Number(q),unit:q>1?"skylights":"skylight",cost:Number(q)*ht})}if($){const ht=Le("Ventilation System",625,"components");Ae.push({label:"Ventilation System",value:1,unit:"system",cost:ht})}if(O){const ht=Le("Extended Warranty",27,"components");Ae.push({label:"Extended Warranty",value:et,unit:"squares",cost:et*ht})}ye(Ae),s(Ae)},Se=()=>{fe()},Re=async()=>{if(!X||X.length===0){alert("Please calculate an estimate first");return}if(!se.trim()){alert("Please enter a title for this calculation");return}Y(!0);try{const oe=X.reduce((Ie,et)=>Ie+et.cost,0),J=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(Ie){const et=Math.random()*16|0;return(Ie==="x"?et:et&3|8).toString(16)}),Ae=a.find(Ie=>Ie.id===re),Fe={id:J(),title:se.trim(),clientId:re||void 0,clientName:Ae?.name||void 0,status:"draft",subtotal:oe,taxRate:0,taxAmount:0,total:oe,items:X.map(Ie=>({id:Math.random().toString(36).substr(2,9),description:Ie.label,quantity:Ie.value,unit:Ie.unit,unitPrice:Ie.cost/Ie.value,total:Ie.cost})),calculatorType:"roofing",calculatorData:{address:o,roofArea:x,material:b,pitch:j,stories:C,layers:F,skylights:q,wasteFactor:D,includeVentilation:$,includeIceShield:L,includeWarranty:O,useCustomPricing:te,customMaterialName:te?M:void 0,customPricePerSquare:te?K:void 0}};if((await kd.saveEstimate(Fe)).success)alert(" Calculation saved successfully!"),ee(!1),de(""),z(""),t&&t();else throw new Error("Failed to save calculation")}catch(oe){console.error("Error saving calculation:",oe),alert(" Failed to save calculation. Please try again.")}finally{Y(!1)}},G=oe=>{oe.key==="Enter"&&(oe.preventDefault(),We())},ue=()=>{if(!m.type)return null;switch(m.type){case"success":return e.jsx(Kx,{className:"w-4 h-4 text-green-600"});case"error":return e.jsx(Qa,{className:"w-4 h-4 text-red-600"});case"info":return e.jsx(hr,{className:"w-4 h-4 text-blue-600 animate-spin"});default:return null}},ge=()=>{switch(m.type){case"success":return"text-green-600 bg-green-50 border-green-200";case"error":return"text-red-600 bg-red-50 border-red-200";case"info":return"text-blue-600 bg-blue-50 border-blue-200";default:return""}};return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(my,{className:"h-6 w-6 text-orange-600 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Roofing Cost Calculator"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 border-2 border-blue-200",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:" Find Your Roof Area by Address"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:oe=>l(oe.target.value),onKeyPress:G,placeholder:"Enter your address (e.g., 1600 Pennsylvania Ave NW, Washington, DC)",className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{type:"button",onClick:We,disabled:d||!o.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 whitespace-nowrap",children:d?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Searching..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Mo,{className:"w-4 h-4"}),"Search"]})})]}),m.type&&e.jsxs("div",{className:`mt-2 p-2 rounded-md border flex items-start gap-2 ${ge()}`,children:[ue(),e.jsx("p",{className:"text-sm whitespace-pre-line",children:m.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roof Area (sq ft) *"}),e.jsx("input",{type:"number",value:x,onChange:oe=>f(oe.target.value?parseFloat(oe.target.value):""),placeholder:"2000",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",required:!0}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Or search by address above to auto-fill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Type *"}),e.jsxs("select",{value:b,onChange:oe=>v(oe.target.value),disabled:te,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500 disabled:cursor-not-allowed",children:[e.jsxs("option",{value:"asphalt",children:["Asphalt Shingles - $",Te.asphalt,"/sq"]}),e.jsxs("option",{value:"architectural",children:["Architectural Shingles - $",Te.architectural,"/sq"]}),e.jsxs("option",{value:"atlas-storm",children:["Atlas Storm Master Shingles - $",Te["atlas-storm"],"/sq"]}),e.jsxs("option",{value:"sbs-malarkey",children:["SBS Malarkey Shingles - $",Te["sbs-malarkey"],"/sq"]}),e.jsxs("option",{value:"metal",children:["Metal Roofing - $",Te.metal,"/sq"]}),e.jsxs("option",{value:"tile",children:["Tile Roofing - $",Te.tile,"/sq"]}),e.jsxs("option",{value:"brava-synthetic",children:["Brava Synthetic Tiles - $",Te["brava-synthetic"],"/sq"]}),e.jsxs("option",{value:"composite",children:["Composite Shingles - $",Te.composite,"/sq"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roof Pitch"}),e.jsxs("select",{value:j,onChange:oe=>S(oe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"low",children:"Low (0-4/12)"}),e.jsx("option",{value:"medium",children:"Medium (5-8/12)"}),e.jsx("option",{value:"high",children:"High (9-12/12)"}),e.jsx("option",{value:"steep",children:"Steep (12+/12)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Stories"}),e.jsxs("select",{value:C,onChange:oe=>B(oe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"1",children:"1 Story"}),e.jsx("option",{value:"2",children:"2 Stories"}),e.jsx("option",{value:"3",children:"3+ Stories"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Old Layers to Remove"}),e.jsxs("select",{value:F,onChange:oe=>Q(oe.target.value?parseInt(oe.target.value):""),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:[e.jsx("option",{value:"0",children:"0 (New Build)"}),e.jsx("option",{value:"1",children:"1 Layer"}),e.jsx("option",{value:"2",children:"2 Layers"}),e.jsx("option",{value:"3",children:"3 Layers"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Skylights"}),e.jsx("input",{type:"number",value:q,onChange:oe=>P(oe.target.value?parseInt(oe.target.value):""),placeholder:"0",min:"0",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Waste Factor (%)"}),e.jsx("input",{type:"number",value:D,onChange:oe=>_(oe.target.value?parseFloat(oe.target.value):0),placeholder:"10",min:"0",max:"100",step:"1",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"Accounts for cuts, overlaps, and roof complexity (10-25% typical)"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-4 border-2 border-purple-200",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer mb-3",children:[e.jsx("input",{type:"checkbox",checked:te,onChange:oe=>{V(oe.target.checked),oe.target.checked||(ie(""),H(""))},className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:" Use Custom Shingle Pricing"})]}),te&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-3 pt-3 border-t border-purple-200",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Material Name"}),e.jsx("input",{type:"text",value:M,onChange:oe=>ie(oe.target.value),placeholder:"e.g., Premium Designer Shingles",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per Square ($/sq)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{type:"number",value:K,onChange:oe=>H(oe.target.value?parseFloat(oe.target.value):""),placeholder:"500",min:"0",step:"0.01",className:"w-full pl-7 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:"1 square = 100 sq ft"})]})]}),te&&e.jsx("div",{className:"mt-3 p-2 bg-purple-100 rounded-md",children:e.jsx("p",{className:"text-xs text-purple-700",children:" Standard material dropdown is disabled when using custom pricing"})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Optional Features"}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:$,onChange:oe=>k(oe.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Include Ventilation System (+$625)"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:L,onChange:oe=>E(oe.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Include Ice & Water Shield"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:O,onChange:oe=>le(oe.target.checked),className:"w-4 h-4 text-orange-600 border-gray-300 rounded focus:ring-orange-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Extended Warranty ($27/sq)"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:Se,className:"flex-1 py-3 px-4 border border-transparent text-base font-medium rounded-md text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-colors",children:"Calculate Estimate"}),X&&X.length>0&&e.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 border-2 border-green-600 text-base font-medium rounded-md text-green-600 bg-white hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors flex items-center gap-2",children:[e.jsx(Qn,{className:"w-5 h-5"}),"Save Calculation"]})]})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Save Calculation"}),e.jsx("button",{onClick:()=>ee(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:se,onChange:oe=>de(oe.target.value),placeholder:"e.g., Main Street Roof Replacement",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client (Optional)"}),i?e.jsxs("div",{className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-50 flex items-center gap-2",children:[e.jsx(hr,{className:"w-4 h-4 animate-spin text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Loading clients..."})]}):e.jsxs("select",{value:re,onChange:oe=>z(oe.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"-- Select a client --"}),a.filter(oe=>oe.status==="active").map(oe=>e.jsxs("option",{value:oe.id,children:[oe.name," ",oe.company?`(${oe.company})`:""]},oe.id))]}),!i&&a.length===0&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No clients found. Add clients in the CRM section first."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsx("p",{className:"text-sm text-blue-800",children:' This calculation will be saved and can be loaded later from the "Saved Calculations" section.'})}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>ee(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:ne,children:"Cancel"}),e.jsx("button",{onClick:Re,disabled:ne||!se.trim(),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center gap-2",children:ne?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-4 h-4"}),"Save"]})})]})]})]})})]})},HU=({onCalculate:s})=>{const{t}=fr(),[r,a]=p.useState(""),[n,i]=p.useState(""),[o,l]=p.useState(""),{activeTab:d}=sa(),{pricing:u,loading:m,isConfigured:h}=Aa("veneer",d==="custom"),{getCustomPrice:x}=ma("veneer"),f=p.useMemo(()=>{if(d==="custom"){const B=x("Natural Stone Veneer",o||12.5,"veneer");return B!==(o||12.5)?B:o}return o},[d,x,o]);p.useEffect(()=>{d==="custom"&&u?.veneer_cost_per_sqft&&l(u.veneer_cost_per_sqft)},[d,u]);const b=()=>{const B=typeof f=="number"?f:o;if(typeof r=="number"&&typeof n=="number"&&typeof B=="number"){const F=[],Q=r*n;F.push({label:"Total Square Footage",value:Number(Q.toFixed(2)),unit:"sq ft"});const q=Q*B;F.push({label:"Veneer Materials",value:Number(Q.toFixed(2)),unit:"sq ft",cost:q}),F.push({label:t("calculators.totalEstimatedCost"),value:Number(q.toFixed(2)),unit:t("calculators.currencyUnit"),isTotal:!0}),s(F)}},v=typeof r=="number"&&typeof n=="number"&&(typeof o=="number"||d==="custom"&&typeof f=="number"),j=()=>({length:r,height:n,costPerSqFt:o}),S=B=>{a(B.length||""),i(B.height||""),l(B.costPerSqFt||"")},C=()=>{a(""),i(""),l("")};return m?e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-600",children:"Loading calculator configuration..."})]})}):d==="custom"&&!h?e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Tg,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Veneer Calculator"})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h3",{className:"text-lg font-semibold text-slate-800 mb-2",children:"Custom Materials Not Configured"}),e.jsx("p",{className:"text-slate-600 mb-4",children:"Please add custom veneer pricing in the Business Settings page under the Materials & Pricing section."})]})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md animate-fade-in",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx(Tg,{className:"h-6 w-6 text-orange-500 mr-2"}),e.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Veneer Calculator"})]}),e.jsx(Ks,{calculatorType:"veneer",currentInputs:j(),onLoadEstimate:S,onNewEstimate:C}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"block text-sm font-medium text-slate-700 mb-1",children:"Length (feet)"}),e.jsx("input",{type:"number",id:"length",min:"0",step:"0.1",value:r,onChange:B=>a(B.target.value?Number(B.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter length in feet"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:"block text-sm font-medium text-slate-700 mb-1",children:"Height (feet)"}),e.jsx("input",{type:"number",id:"height",min:"0",step:"0.1",value:n,onChange:B=>i(B.target.value?Number(B.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Enter height in feet"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{htmlFor:"costPerSqFt",className:"block text-sm font-medium text-slate-700 mb-1",children:["Cost Per Square Foot ($)",d==="custom"&&u?.veneer_cost_per_sqft&&e.jsxs("span",{className:"ml-2 text-xs text-blue-600 font-normal",children:["(Using custom pricing: $",u.veneer_cost_per_sqft,"/sq ft)"]})]}),e.jsx("input",{type:"number",id:"costPerSqFt",min:"0",step:"0.01",value:o,onChange:B=>l(B.target.value?Number(B.target.value):""),className:"w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"e.g., 12.50",disabled:d==="custom"&&u?.veneer_cost_per_sqft!==void 0}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:d==="custom"&&u?.veneer_cost_per_sqft?"Custom pricing is being used from your materials configuration":"Enter the cost per square foot for veneer materials"})]}),typeof r=="number"&&typeof n=="number"&&e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-slate-700",children:[e.jsx("strong",{children:"Calculated Area:"})," ",(r*n).toFixed(2)," square feet"]})})]}),e.jsx("button",{onClick:b,disabled:!v,className:`w-full py-3 px-4 rounded-md font-medium text-white ${v?"bg-orange-500 hover:bg-orange-600 transition-colors":"bg-slate-300 cursor-not-allowed"}`,children:t("calculators.calculateMaterials")})]})},qU=({isOpen:s,onClose:t,calculatorType:r,calculatorName:a,results:n,calculatorData:i,onSaveSuccess:o})=>{const{clients:l,fetchClients:d,isLoading:u}=jl(),[m,h]=p.useState(""),[x,f]=p.useState(""),[b,v]=p.useState(!1);p.useEffect(()=>{s&&(d(),h(""),f(""))},[s,d]);const j=async()=>{if(!m.trim()){alert("Please enter a title for this calculation");return}v(!0);try{const S=n.reduce((q,P)=>q+(P.cost||0),0),C=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){const P=Math.random()*16|0;return(q==="x"?P:P&3|8).toString(16)}),B=l.find(q=>q.id===x),F={id:C(),title:m.trim(),clientId:x||void 0,clientName:B?.name||void 0,status:"draft",subtotal:S,taxRate:0,taxAmount:0,total:S,items:n.map(q=>({id:Math.random().toString(36).substr(2,9),description:q.label,quantity:q.value,unit:q.unit,unitPrice:q.cost?q.cost/q.value:0,total:q.cost||0})),calculatorType:r,calculatorData:i};if((await kd.saveEstimate(F)).success)alert(" Calculation saved successfully!"),t(),o&&o();else throw new Error("Failed to save calculation")}catch(S){console.error("Error saving calculation:",S),alert(" Failed to save calculation. Please try again.")}finally{v(!1)}};return s?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Save ",a," Calculation"]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),e.jsx("input",{type:"text",value:m,onChange:S=>h(S.target.value),placeholder:`e.g., Main Street ${a}`,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Client (Optional)"}),u?e.jsxs("div",{className:"w-full px-4 py-2 border border-gray-300 rounded-md bg-gray-50 flex items-center gap-2",children:[e.jsx(hr,{className:"w-4 h-4 animate-spin text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:"Loading clients..."})]}):e.jsxs("select",{value:x,onChange:S=>f(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"-- Select a client --"}),l.filter(S=>S.status==="active").map(S=>e.jsxs("option",{value:S.id,children:[S.name," ",S.company?`(${S.company})`:""]},S.id))]}),!u&&l.length===0&&e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"No clients found. Add clients in the CRM section first."})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:e.jsx("p",{className:"text-sm text-blue-800",children:' This calculation will be saved and can be loaded later from the "Saved Calculations" section.'})})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-3",children:[e.jsx("button",{onClick:j,disabled:b||!m.trim(),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-4 h-4 mr-2"}),"Save"]})}),e.jsx("button",{onClick:t,disabled:b,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm disabled:opacity-50",children:"Cancel"})]})]})]})}):null},$U=({results:s,title:t})=>{const r=Zt(),{t:a}=fr(),[n,i]=p.useState(!1),o=s.filter(u=>!u.isTotal).reduce((u,m)=>u+(m.cost||0),0),l=()=>{console.log("Generate Estimate clicked"),console.log("Results:",s),console.log("Total Cost:",o);const u=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){const b=Math.random()*16|0;return(f==="x"?b:b&3|8).toString(16)}),m=s.filter(f=>f.cost&&f.cost>0).map((f,b)=>({id:u(),description:`${f.label} - ${f.value} ${f.unit}`,quantity:f.value,unit:f.unit,unitPrice:f.cost/f.value,totalPrice:f.cost,type:"material"}));console.log("Generated items:",m);let h=t;if(t.startsWith("trades.")){const f=a(t);h=f===t?t.replace("trades.",""):f}const x={id:u(),title:`${h} Estimate`,clientName:"",projectName:"",items:m,subtotal:o,taxRate:0,taxAmount:0,total:o,status:"draft",notes:`Generated from ${h} Calculator`,terms:"Valid for 30 days from the date of issue.",createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+720*60*60*1e3).toDateString()};console.log("New estimate object:",x),console.log("Navigating to /estimates with calculator data"),r("/estimates",{state:{fromCalculator:!0,calculatorData:x}})};let d=t;if(t.startsWith("trades.")){const u=a(t);d=u===t?t.replace("trades.",""):u}return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:[d," Results"]}),e.jsxs("div",{className:"space-y-4",children:[s.map((u,m)=>u.isWarning?e.jsx("div",{className:"p-4 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-amber-400 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ay,{className:"w-6 h-6 text-amber-600 mr-3 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-bold text-amber-900 mb-1",children:u.label}),e.jsx("p",{className:"text-sm text-amber-800 leading-relaxed",children:u.unit})]})]})},m):e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[u.cost?e.jsx(Br,{className:"w-5 h-5 text-green-600 mr-3"}):u.label==="Note"?e.jsx(Dd,{className:"w-5 h-5 text-blue-600 mr-3"}):e.jsx(AA,{className:"w-5 h-5 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.label}),e.jsxs("p",{className:"text-sm text-gray-600",children:[u.value," ",u.unit]})]})]}),u.cost&&e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-bold text-green-600",children:["$",u.cost.toFixed(2)]})})]},m)),o>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"border-t border-gray-200 pt-4 mt-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Br,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"Total Estimated Cost"})]}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["$",o.toFixed(2)]})]})}),e.jsxs("div",{className:"mt-6 flex justify-center gap-3",children:[e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(Qn,{className:"w-5 h-5 mr-2"}),"Save Calculation"]}),e.jsxs("button",{onClick:l,className:"inline-flex items-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:[e.jsx(ra,{className:"w-5 h-5 mr-2"}),"Generate Estimate"]})]})]})]}),e.jsx(qU,{isOpen:n,onClose:()=>i(!1),calculatorType:d.toLowerCase().replace(/\s+/g,"_"),calculatorName:d,results:s})]})},WU="https://contractorai.app.n8n.cloud/webhook/423c81ec-2d2b-497e-872d-8ade013f7c9a",KU=["Roofing","HVAC","Plumbing","Electrical","Concrete","Painting","Flooring","Drywall","Framing","Insulation","Siding","Windows & Doors","Cabinets","Countertops","Tile","Landscaping","Fencing","Decking","Solar","Excavation","Foundation","Gutter","Junk Removal","Pavers","Retaining Walls","Veneer","Other"],zU=["sqft","sq","feet","inches","yards","meters","unit","linear feet","other"],GU=({onClose:s})=>{const[t,r]=p.useState(""),[a,n]=p.useState(""),[i,o]=p.useState(""),[l,d]=p.useState("sqft"),[u,m]=p.useState(""),[h,x]=p.useState(""),[f,b]=p.useState(!1),[v,j]=p.useState("idle"),[S,C]=p.useState(""),[B,F]=p.useState({calculatorType:"",materialName:"",price:"",unit:"",customUnit:""});p.useEffect(()=>{const P=D=>{D.key==="Escape"&&s()};return window.addEventListener("keydown",P),()=>window.removeEventListener("keydown",P)},[s]),p.useEffect(()=>{if(v==="success"){const P=setTimeout(()=>{s()},2e3);return()=>clearTimeout(P)}},[v,s]);const Q=()=>{const P={calculatorType:"",materialName:"",price:"",unit:"",customUnit:""};return t||(P.calculatorType="Calculator type is required"),a.trim()?a.trim().length<2&&(P.materialName="Material name must be at least 2 characters"):P.materialName="Material name is required",i?parseFloat(i)<=0&&(P.price="Price must be greater than 0"):P.price="Price is required",l||(P.unit="Unit of measurement is required"),l==="other"&&!u.trim()&&(P.customUnit="Please specify the unit of measurement"),F(P),!Object.values(P).some(D=>D!=="")},q=async P=>{if(P.preventDefault(),!Q())return;b(!0),j("idle"),C("");const D={calculatorType:t,materialName:a.trim(),price:parseFloat(i),unitOfMeasurement:l==="other"?u.trim():l,feedback:h.trim()||void 0,timestamp:new Date().toISOString(),userAgent:navigator.userAgent};try{const _=await fetch(WU,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!_.ok)throw _.status===429?new Error("Too many requests. Please try again later."):_.status>=500?new Error("Server error. Please try again."):new Error("Failed to submit request.");j("success"),r(""),n(""),o(""),d("sqft"),m(""),x("")}catch(_){console.error("Error submitting material request:",_),j("error"),C(_ instanceof Error?_.message:"Failed to submit request. Please try again.")}finally{b(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",onClick:P=>P.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{id:"modal-title",className:"text-xl font-bold text-gray-900",children:"Request Material to be Added"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tell us what material you need"})]}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:q,className:"p-6 space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"calculatorType",className:"block text-sm font-medium text-gray-700 mb-2",children:"Which Calculator? *"}),e.jsxs("select",{id:"calculatorType",value:t,onChange:P=>r(P.target.value),className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${B.calculatorType?"border-red-500":"border-gray-300"}`,"aria-required":"true","aria-invalid":!!B.calculatorType,"aria-describedby":B.calculatorType?"calculator-error":void 0,children:[e.jsx("option",{value:"",children:"-- Select a calculator --"}),KU.map(P=>e.jsx("option",{value:P,children:P},P))]}),B.calculatorType&&e.jsx("p",{id:"calculator-error",className:"mt-1 text-sm text-red-600",children:B.calculatorType})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"materialName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Material Name *"}),e.jsx("input",{id:"materialName",type:"text",value:a,onChange:P=>n(P.target.value),placeholder:"e.g., Premium Grade Shingles",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${B.materialName?"border-red-500":"border-gray-300"}`,"aria-required":"true","aria-invalid":!!B.materialName,"aria-describedby":B.materialName?"name-error":void 0}),B.materialName&&e.jsx("p",{id:"name-error",className:"mt-1 text-sm text-red-600",children:B.materialName})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-2",children:"Price *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{id:"price",type:"number",value:i,onChange:P=>o(P.target.value),placeholder:"0.00",min:"0.01",step:"0.01",className:`w-full pl-7 pr-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${B.price?"border-red-500":"border-gray-300"}`,"aria-required":"true","aria-invalid":!!B.price,"aria-describedby":B.price?"price-error":void 0})]}),B.price&&e.jsx("p",{id:"price-error",className:"mt-1 text-sm text-red-600",children:B.price})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"unit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit *"}),e.jsx("select",{id:"unit",value:l,onChange:P=>d(P.target.value),className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${B.unit?"border-red-500":"border-gray-300"}`,"aria-required":"true",children:zU.map(P=>e.jsx("option",{value:P,children:P},P))})]})]}),l==="other"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[e.jsx("label",{htmlFor:"customUnit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Specify Unit of Measurement *"}),e.jsx("input",{id:"customUnit",type:"text",value:u,onChange:P=>m(P.target.value),placeholder:"e.g., gallons, pounds, bundles",className:`w-full px-4 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent ${B.customUnit?"border-red-500":"border-gray-300"}`,"aria-required":"true","aria-invalid":!!B.customUnit,"aria-describedby":B.customUnit?"custom-unit-error":void 0}),B.customUnit&&e.jsx("p",{id:"custom-unit-error",className:"mt-1 text-sm text-red-600",children:B.customUnit})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"feedback",className:"block text-sm font-medium text-gray-700 mb-2",children:"Feedback (optional)"}),e.jsx("textarea",{id:"feedback",value:h,onChange:P=>x(P.target.value),placeholder:"Any additional details about this material...",rows:3,maxLength:500,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500 text-right",children:[h.length,"/500 characters"]})]}),v==="error"&&S&&e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsx(Qa,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:S})]}),v==="success"&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 border border-green-200 rounded-md",children:[e.jsx(Kx,{className:"w-5 h-5 text-green-600"}),e.jsx("p",{className:"text-sm text-green-700",children:"Request submitted successfully!"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||v==="success",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-md hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Submitting..."]}):v==="success"?e.jsxs(e.Fragment,{children:[e.jsx(Kx,{className:"w-4 h-4"}),"Submitted"]}):e.jsxs(e.Fragment,{children:[e.jsx(Dc,{className:"w-4 h-4"}),"Submit Request"]})})]})]})]})})},VU=()=>{const[s,t]=p.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>t(!0),className:"fixed bottom-6 right-6 z-40 flex items-center gap-2 px-5 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-full shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-200 font-medium text-sm md:text-base","aria-label":"Request material to be added","aria-haspopup":"dialog","aria-expanded":s,children:[e.jsx(AA,{className:"w-5 h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Request Material"}),e.jsx(Gt,{className:"w-4 h-4"})]}),s&&e.jsx(GU,{onClose:()=>t(!1)})]})},YU=[{id:"deck",name:"trades.deck",category:"Exterior",icon:e.jsx(Sd,{}),description:"Custom deck building and installation",requiredFields:[{id:"size",label:"Deck Size",type:"number",required:!0,placeholder:"Enter square footage",helpText:"Total square footage of the deck area",unit:"sq ft"},{id:"material",label:"Decking Material",type:"select",required:!0,options:[{value:"pressure_treated",label:"Pressure Treated Wood"},{value:"cedar",label:"Cedar"},{value:"composite",label:"Composite"},{value:"pvc",label:"PVC"},{value:"tropical_hardwood",label:"Tropical Hardwood"}],helpText:"Main material used for the deck surface"},{id:"height",label:"Height from Ground",type:"select",required:!0,options:[{value:"ground_level",label:"Ground Level (0-2 ft)"},{value:"low",label:"Low Elevation (2-4 ft)"},{value:"medium",label:"Medium Elevation (4-8 ft)"},{value:"high",label:"High Elevation (8+ ft)"}]},{id:"railing",label:"Railing Type",type:"select",required:!0,options:[{value:"none",label:"No Railing"},{value:"wood",label:"Wood Railing"},{value:"metal",label:"Metal Railing"},{value:"composite",label:"Composite Railing"},{value:"glass",label:"Glass Railing"}]}],optionalFields:[{id:"stairs",label:"Stairs",type:"checkbox",checkboxLabel:"Include stairs in estimate"},{id:"removal",label:"Existing Deck Removal",type:"checkbox",checkboxLabel:"Include removal of existing deck"},{id:"quality",label:"Quality Level",type:"radio",options:[{value:"standard",label:"Standard"},{value:"premium",label:"Premium"},{value:"luxury",label:"Luxury"}]}]},{id:"siding",name:"trades.siding",category:"Exterior",icon:e.jsx(uy,{}),description:"Siding installation and replacement",requiredFields:[{id:"area",label:"Wall Area",type:"number",required:!0,placeholder:"Enter square footage",helpText:"Total square footage of walls to be sided",unit:"sq ft"},{id:"material",label:"Siding Material",type:"select",required:!0,options:[{value:"vinyl",label:"Vinyl Siding"},{value:"fiber_cement",label:"Fiber Cement"},{value:"wood",label:"Wood Siding"},{value:"metal",label:"Metal Siding"},{value:"stucco",label:"Stucco"}]}],optionalFields:[{id:"insulation",label:"Insulation",type:"checkbox",checkboxLabel:"Include insulation"},{id:"removal",label:"Existing Siding Removal",type:"checkbox",checkboxLabel:"Include removal of existing siding"}]},{id:"concrete",name:"trades.concrete",category:"Exterior",icon:e.jsx(PC,{}),description:"Concrete slabs, driveways, and patios",requiredFields:[{id:"area",label:"Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"},{id:"thickness",label:"Thickness",type:"select",required:!0,options:[{value:"4_inch",label:"4 inches"},{value:"5_inch",label:"5 inches"},{value:"6_inch",label:"6 inches"}]},{id:"type",label:"Application Type",type:"select",required:!0,options:[{value:"driveway",label:"Driveway"},{value:"patio",label:"Patio"},{value:"walkway",label:"Walkway"},{value:"foundation",label:"Foundation"}]}]},{id:"pavers",name:"trades.pavers",category:"Exterior",icon:e.jsx(Lo,{}),description:"Paver patios, walkways, and driveways",requiredFields:[{id:"area",label:"Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"}]},{id:"drywall",name:"trades.drywall",category:"Interior",icon:e.jsx(vC,{}),description:"Drywall installation and repair",requiredFields:[{id:"area",label:"Wall Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"}]},{id:"paint",name:"trades.paint",category:"Interior",icon:e.jsx(UC,{}),description:"Interior and exterior painting",requiredFields:[{id:"area",label:"Wall Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"},{id:"location",label:"Location",type:"select",required:!0,options:[{value:"interior",label:"Interior"},{value:"exterior",label:"Exterior"}]}]},{id:"framing",name:"trades.framing",category:"Construction",icon:e.jsx(cy,{}),description:"Structural framing for new construction or remodels",requiredFields:[{id:"area",label:"Floor Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"}]},{id:"retaining_walls",name:"trades.retainingWalls",category:"Exterior",icon:e.jsx(SC,{}),description:"Retaining wall construction",requiredFields:[{id:"length",label:"Wall Length",type:"number",required:!0,placeholder:"Enter length",unit:"ft"},{id:"height",label:"Wall Height",type:"number",required:!0,placeholder:"Enter height",unit:"ft"}]},{id:"excavation",name:"trades.excavation",category:"Site Work",icon:e.jsx(Sd,{}),description:"Site excavation and grading",requiredFields:[{id:"area",label:"Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"}]},{id:"flooring",name:"trades.flooring",category:"Interior",icon:e.jsx(EC,{}),description:"Flooring installation including hardwood, tile, carpet, and vinyl",requiredFields:[{id:"area",label:"Floor Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"},{id:"material",label:"Flooring Material",type:"select",required:!0,options:[{value:"hardwood",label:"Hardwood"},{value:"laminate",label:"Laminate"},{value:"tile",label:"Tile"},{value:"vinyl",label:"Vinyl/LVP"},{value:"carpet",label:"Carpet"}]}]},{id:"tile",name:"trades.tile",category:"Interior",icon:e.jsx(Lo,{}),description:"Tile installation for floors, walls, showers, and backsplashes",requiredFields:[{id:"area",label:"Tile Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"},{id:"location",label:"Location",type:"select",required:!0,options:[{value:"floor",label:"Floor"},{value:"wall",label:"Wall"},{value:"shower",label:"Shower"},{value:"backsplash",label:"Backsplash"}]}]},{id:"electrical",name:"trades.electrical",category:"Systems",icon:e.jsx(op,{}),description:"Electrical installation and repairs",requiredFields:[{id:"service_type",label:"Service Type",type:"select",required:!0,options:[{value:"panel_upgrade",label:"Panel Upgrade"},{value:"new_outlets",label:"New Outlets/Switches"},{value:"lighting",label:"Lighting Installation"},{value:"rewiring",label:"Rewiring"}]},{id:"quantity",label:"Quantity",type:"number",required:!0,placeholder:"Number of outlets/fixtures",unit:"units"}]},{id:"hvac",name:"trades.hvac",category:"Systems",icon:e.jsx(sA,{}),description:"Heating, ventilation, and air conditioning",requiredFields:[{id:"service_type",label:"Service Type",type:"select",required:!0,options:[{value:"new_installation",label:"New System Installation"},{value:"replacement",label:"System Replacement"},{value:"ductwork",label:"Ductwork"},{value:"maintenance",label:"Maintenance/Repair"}]},{id:"home_size",label:"Home Size",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"}]},{id:"plumbing",name:"trades.plumbing",category:"Systems",icon:e.jsx(FC,{}),description:"Plumbing installation and repairs",requiredFields:[{id:"service_type",label:"Service Type",type:"select",required:!0,options:[{value:"new_installation",label:"New Plumbing Installation"},{value:"repiping",label:"Whole House Repiping"},{value:"fixture",label:"Fixture Installation"},{value:"repair",label:"Repair"}]}]},{id:"doors_windows",name:"trades.doorsWindows",category:"Exterior",icon:e.jsx(kC,{}),description:"Door and window installation and replacement",requiredFields:[{id:"type",label:"Type",type:"select",required:!0,options:[{value:"entry_door",label:"Entry Door"},{value:"interior_door",label:"Interior Door"},{value:"window",label:"Window"},{value:"patio_door",label:"Patio/Sliding Door"}]},{id:"quantity",label:"Quantity",type:"number",required:!0,placeholder:"Number of doors/windows",unit:"units"}]},{id:"fence",name:"trades.fence",category:"Exterior",icon:e.jsx(Vx,{}),description:"Fence installation and replacement",requiredFields:[{id:"length",label:"Fence Length",type:"number",required:!0,placeholder:"Enter length",unit:"ft"},{id:"height",label:"Fence Height",type:"select",required:!0,options:[{value:"4ft",label:"4 feet"},{value:"6ft",label:"6 feet"},{value:"8ft",label:"8 feet"}]},{id:"material",label:"Fence Material",type:"select",required:!0,options:[{value:"wood",label:"Wood"},{value:"vinyl",label:"Vinyl"},{value:"chain_link",label:"Chain Link"},{value:"metal",label:"Metal/Aluminum"},{value:"composite",label:"Composite"}]}]},{id:"foundation",name:"trades.foundation",category:"Construction",icon:e.jsx(Rm,{}),description:"Foundation construction and repair",requiredFields:[{id:"type",label:"Foundation Type",type:"select",required:!0,options:[{value:"strip_footing",label:"Strip Footing"},{value:"spread_footings",label:"Spread Footings"},{value:"slab",label:"Slab on Grade"},{value:"basement",label:"Full Basement"},{value:"crawlspace",label:"Crawlspace"}]},{id:"area",label:"Foundation Area",type:"number",required:!0,placeholder:"Enter square footage",unit:"sq ft"}],optionalFields:[{id:"depth",label:"Foundation Depth",type:"number",placeholder:"Enter depth",unit:"inches"},{id:"waterproofing",label:"Waterproofing",type:"checkbox",checkboxLabel:"Include waterproofing"},{id:"insulation",label:"Insulation",type:"checkbox",checkboxLabel:"Include insulation"}]},{id:"gutter",name:"trades.gutters",category:"Exterior",icon:e.jsx(CC,{}),description:"Gutter installation and replacement",requiredFields:[{id:"length",label:"Gutter Length",type:"number",required:!0,placeholder:"Enter total length",unit:"ft"},{id:"material",label:"Gutter Material",type:"select",required:!0,options:[{value:"aluminum",label:"Aluminum"},{value:"vinyl",label:"Vinyl"},{value:"steel",label:"Steel"},{value:"copper",label:"Copper"},{value:"zinc",label:"Zinc"}]}],optionalFields:[{id:"downspouts",label:"Downspouts",type:"number",placeholder:"Number of downspouts",unit:"units"},{id:"guards",label:"Leaf Guards",type:"checkbox",checkboxLabel:"Include leaf guards"},{id:"removal",label:"Existing Gutter Removal",type:"checkbox",checkboxLabel:"Include removal of existing gutters"}]},{id:"junk_removal",name:"trades.junkRemoval",category:"Site Work",icon:e.jsx(nr,{}),description:"Removal and disposal of junk and debris",requiredFields:[{id:"volume",label:"Volume",type:"number",required:!0,placeholder:"Enter volume",unit:"cubic yards"},{id:"type",label:"Junk Type",type:"select",required:!0,options:[{value:"household",label:"Household Junk"},{value:"construction",label:"Construction Debris"},{value:"yard",label:"Yard Waste"},{value:"furniture",label:"Furniture"},{value:"appliances",label:"Appliances"},{value:"electronics",label:"Electronics"},{value:"mixed",label:"Mixed Materials"}]}],optionalFields:[{id:"heavy_items",label:"Heavy Items",type:"number",placeholder:"Number of items over 100 lbs",unit:"items"},{id:"stairs",label:"Stair Carry",type:"checkbox",checkboxLabel:"Items need to be carried up/down stairs"},{id:"sorting",label:"Sorting",type:"checkbox",checkboxLabel:"Include sorting and recycling"}]},{id:"roofing",name:"trades.roofing",category:"Exterior",icon:e.jsx(my,{}),description:"Roof installation, replacement, and repair with AI-powered estimation",requiredFields:[{id:"address",label:"Property Address",type:"text",required:!0,placeholder:"Enter full address for AI analysis",helpText:"AI will analyze satellite imagery to estimate roof details"},{id:"roof_type",label:"Roof Type",type:"select",required:!0,options:[{value:"gable",label:"Gable"},{value:"hip",label:"Hip"},{value:"flat",label:"Flat"},{value:"mansard",label:"Mansard"},{value:"gambrel",label:"Gambrel"},{value:"shed",label:"Shed"}],helpText:"Can be auto-detected by AI"},{id:"material",label:"Roofing Material",type:"select",required:!0,options:[{value:"asphalt",label:"Asphalt Shingles"},{value:"metal",label:"Metal Roofing"},{value:"tile",label:"Clay/Concrete Tile"},{value:"slate",label:"Slate"},{value:"tpo",label:"TPO (Flat Roof)"},{value:"epdm",label:"EPDM Rubber"},{value:"wood",label:"Wood Shakes"}]},{id:"pitch",label:"Roof Pitch",type:"select",required:!0,options:[{value:"1:12",label:"1:12 (Nearly Flat)"},{value:"2:12",label:"2:12"},{value:"3:12",label:"3:12"},{value:"4:12",label:"4:12 (Low Pitch)"},{value:"5:12",label:"5:12"},{value:"6:12",label:"6:12 (Standard)"},{value:"7:12",label:"7:12"},{value:"8:12",label:"8:12 (Steep)"},{value:"9:12",label:"9:12"},{value:"10:12",label:"10:12"},{value:"12:12",label:"12:12 (45)"}],helpText:"Can be estimated by AI"}],optionalFields:[{id:"layers",label:"Layers to Remove",type:"number",placeholder:"Number of existing roof layers",unit:"layers",helpText:"Additional charge for removal"},{id:"skylights",label:"Skylights",type:"number",placeholder:"Number of skylights",unit:"units"},{id:"chimneys",label:"Chimneys",type:"number",placeholder:"Number of chimneys",unit:"units"},{id:"valleys",label:"Valleys",type:"number",placeholder:"Number of valleys",unit:"units"},{id:"stories",label:"Stories",type:"select",options:[{value:"1",label:"1 Story"},{value:"2",label:"2 Stories"},{value:"3",label:"3+ Stories"}]},{id:"ventilation",label:"Ventilation Upgrade",type:"checkbox",checkboxLabel:"Include ridge vent and soffit vents"},{id:"ice_shield",label:"Ice & Water Shield",type:"checkbox",checkboxLabel:"Include ice & water shield (recommended)"},{id:"warranty",label:"Extended Warranty",type:"checkbox",checkboxLabel:"Include extended manufacturer warranty"}]},{id:"veneer",name:"Veneer",category:"Exterior",icon:e.jsx(Tg,{}),description:"Veneer installation for walls and facades",requiredFields:[{id:"length",label:"Length",type:"number",required:!0,placeholder:"Enter length in feet",unit:"ft"},{id:"height",label:"Height",type:"number",required:!0,placeholder:"Enter height in feet",unit:"ft"},{id:"cost_per_sqft",label:"Cost Per Square Foot",type:"number",required:!0,placeholder:"e.g., 12.50",unit:"$/sq ft"}]}],JU=()=>{const{t:s}=fr(),t=Zt(),[r]=J5(),[a,n]=p.useState(null),[i,o]=p.useState({}),[l,d]=p.useState(!1),[u,m]=p.useState(!1),[h,x]=p.useState([]),[f,b]=p.useState(!1),v=p.useRef(null),[j,S]=p.useState(!1),[C,B]=p.useState(null),[F,Q]=p.useState(!1),{activeTab:q,setActiveTab:P}=sa(),{selectedCalculators:D,loading:_,refreshCalculators:$}=fS(),k=YU.filter(M=>D.some(ie=>ie.id===M.id)),L=M=>{n(M),d(!1),o({}),x([]),b(["concrete","deck","doors_windows","drywall","electrical","excavation","fence","flooring","foundation","framing","gutter","hvac","junk_removal","paint","pavers","plumbing","retaining_walls","roofing","siding","tile","veneer"].includes(M.id))};p.useEffect(()=>{const M=async()=>{const ie=r.get("calculator"),K=r.get("estimateId");if(ie&&K){Q(!0);try{const H=k.find(ee=>ee.id===ie);if(!H){console.error("Calculator type not found:",ie),alert(`Calculator type "${ie}" not found or not enabled`),Q(!1);return}const I=await kd.getEstimate(K);if(I.success&&I.data){if(n(H),b(["concrete","deck","doors_windows","drywall","electrical","excavation","fence","flooring","foundation","framing","gutter","hvac","junk_removal","paint","pavers","plumbing","retaining_walls","roofing","siding","tile","veneer"].includes(H.id)),B(K),I.data.calculatorData&&(o(I.data.calculatorData),I.data.items&&I.data.items.length>0)){const ee=I.data.items.map(se=>({label:se.description,value:se.quantity,unit:se.unit,cost:se.totalPrice}));x(ee),d(!0)}}else alert("Failed to load estimate")}catch(H){console.error("Error loading estimate:",H),alert("Error loading estimate")}finally{Q(!1)}}};!_&&k.length>0&&M()},[r,_,k]),p.useEffect(()=>{a&&v.current&&setTimeout(()=>{v.current?.scrollIntoView({behavior:"smooth",block:"start"})},100)},[a]);const E=(M,ie)=>{o(K=>({...K,[M]:ie}))},O=()=>{a&&(m(!0),setTimeout(()=>{m(!1),d(!0)},1500))},le=M=>{x(M)},te=()=>a?a.requiredFields.every(M=>i[M.id]!==void 0&&i[M.id]!==""):!1,V=()=>{if(!a||!f)return null;switch(a.id){case"concrete":return e.jsx(wU,{onCalculate:le});case"deck":return e.jsx(jU,{onCalculate:le});case"doors_windows":return e.jsx(NU,{onCalculate:le});case"drywall":return e.jsx(CU,{onCalculate:le});case"electrical":return e.jsx(SU,{onCalculate:le});case"excavation":return e.jsx(BU,{onCalculate:le});case"fence":return e.jsx(kU,{onCalculate:le});case"flooring":return e.jsx(FU,{onCalculate:le});case"foundation":return e.jsx(EU,{onCalculate:le});case"framing":return e.jsx(_U,{onCalculate:le});case"gutter":return e.jsx(PU,{onCalculate:le});case"hvac":return e.jsx(IU,{onCalculate:le});case"junk_removal":return e.jsx(UU,{onCalculate:le});case"paint":return e.jsx(LU,{onCalculate:le});case"pavers":return e.jsx(TU,{onCalculate:le});case"plumbing":return e.jsx(DU,{onCalculate:le});case"retaining_walls":return e.jsx(MU,{onCalculate:le});case"siding":return e.jsx(RU,{onCalculate:le});case"tile":return e.jsx(QU,{onCalculate:le});case"roofing":return e.jsx(OU,{onCalculate:le});case"veneer":return e.jsx(HU,{onCalculate:le});default:return null}};return e.jsxs("div",{className:"space-y-6 px-4 sm:px-6 lg:px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s("calculator.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s("calculator.subtitle")})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:(l||h.length>0)&&e.jsxs("button",{className:"inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-teal-600 border border-transparent rounded-md shadow-sm hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 w-full sm:w-auto",children:[e.jsx(ly,{className:"w-4 h-4 mr-2"}),s("calculator.exportPDF")]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"p-4 sm:p-6 bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"flex items-center text-lg font-medium text-gray-900",children:[e.jsx(dn,{className:"w-5 h-5 mr-2 text-blue-600"}),s("calculator.selectTrade")]}),k.length>0&&e.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-md transition-colors",title:"Choose Calculators",children:[e.jsx(Bc,{className:"w-4 h-4 mr-1.5"}),"Choose Calculators"]})]}),C&&e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Editing Estimate"}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:'Make changes and click "Update Estimate" to save'})]}),e.jsx("div",{className:"mb-4 border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex gap-2 sm:gap-4","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>P("default"),className:`${q==="default"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"} py-3 px-1 border-b-2 font-semibold text-xs sm:text-sm transition-colors`,children:"Default"}),e.jsx("button",{onClick:()=>P("custom"),className:`${q==="custom"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"} py-3 px-1 border-b-2 font-semibold text-xs sm:text-sm transition-colors`,children:"Custom"})]})}),_||F?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm",children:F?"Loading estimate...":"Loading..."})]}):k.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(dn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Calculators Selected"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose which calculators you'd like to use"}),e.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Select Calculators"]})]}):e.jsx(uU,{trades:k,selectedTrade:a,onSelectTrade:L,activeTab:q}),a&&!f&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h3",{className:"text-md font-medium text-gray-900 mb-3",children:s("calculator.projectSpecifications")}),e.jsx(mU,{trade:a,specifications:i,onChange:E}),e.jsx("button",{onClick:O,disabled:!te()||u,className:`mt-4 w-full flex justify-center items-center px-4 py-2 text-sm font-medium rounded-md shadow-sm ${te()&&!u?"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500":"bg-gray-300 text-gray-500 cursor-not-allowed"} focus:outline-none focus:ring-2 focus:ring-offset-2`,children:u?e.jsxs(e.Fragment,{children:[e.jsx(YE,{className:"w-4 h-4 mr-2 animate-spin"}),s("calculator.calculating")]}):s("calculator.calculatePricing")})]})]})}),e.jsx("div",{className:"lg:col-span-2",ref:v,children:e.jsx("div",{className:"p-4 sm:p-6 bg-white rounded-lg shadow h-full overflow-x-auto",children:a?f?e.jsxs("div",{className:"space-y-6",children:[V(),h.length>0&&e.jsxs(e.Fragment,{children:[e.jsx($U,{results:h,title:a.name}),e.jsx(Ks,{calculatorType:a.id,currentData:i,resultsData:{results:h},onLoad:(M,ie)=>{o(M),ie?.results&&x(ie.results)}})]})]}):l?e.jsx(fU,{trade:a,specifications:i,calculationResults:h}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[e.jsx("div",{className:"bg-blue-100 p-6 rounded-full mb-4",children:e.jsx(dn,{className:"w-12 h-12 text-blue-600"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s(u?"calculator.calculatingPricing":"calculator.readyToCalculate")}),e.jsx("p",{className:"text-gray-600 max-w-md",children:s(u?"calculator.aiAnalyzing":"calculator.fillSpecifications")}),u&&e.jsx("div",{className:"mt-4 w-full max-w-xs h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 rounded-full animate-progress"})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[e.jsx(dn,{className:"w-16 h-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s("calculator.selectTradeToBegin")}),e.jsx("p",{className:"text-gray-600 max-w-md",children:s("calculator.selectTradeDescription")})]})})})]}),e.jsx(xU,{isOpen:j,onClose:()=>{S(!1),$()}}),e.jsx(VU,{}),e.jsxs("button",{onClick:()=>t("/ai-calculator"),className:"fixed bottom-24 right-6 z-50 group",title:"Ask Hank AI for help with estimates",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full blur-xl opacity-60 group-hover:opacity-80 animate-pulse"}),e.jsx("div",{className:"relative bg-gradient-to-r from-orange-500 to-orange-600 rounded-full p-4 shadow-2xl hover:shadow-3xl transform hover:scale-110 transition-all duration-300",children:e.jsx("img",{src:Bd,alt:"Hank AI",className:"w-12 h-12"})}),e.jsx("span",{className:"absolute -top-2 -right-2 px-2 py-1 text-xs font-bold bg-gradient-to-r from-pink-500 to-red-500 text-white rounded-full shadow-lg animate-bounce",children:"NEW"})]}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-gray-900 text-white text-sm rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap",children:["Ask Hank AI ",e.jsx("div",{className:"absolute top-full right-8 w-0 h-0 border-l-8 border-r-8 border-t-8 border-transparent border-t-gray-900"})]})]})]})},Qf=[{id:"roofing",name:"Roofing Calculator",icon:"",description:"Calculate roofing materials and costs",filename:"roofing.html"},{id:"concrete",name:"Concrete Calculator",icon:"",description:"Estimate concrete volume and materials",filename:"concrete.html"},{id:"deck",name:"Deck Calculator",icon:"",description:"Plan and price deck materials",filename:"deck.html"},{id:"doors-windows",name:"Doors & Windows",icon:"",description:"Calculate door and window costs",filename:"doors-windows.html"},{id:"drywall",name:"Drywall Calculator",icon:"",description:"Estimate drywall sheets needed",filename:"drywall.html"},{id:"electrical",name:"Electrical Calculator",icon:"",description:"Plan electrical materials",filename:"electrical.html"},{id:"excavation",name:"Excavation Calculator",icon:"",description:"Calculate excavation volumes",filename:"excavation.html"},{id:"fencing",name:"Fencing Calculator",icon:"",description:"Estimate fencing materials",filename:"fencing.html"},{id:"flooring",name:"Flooring Calculator",icon:"",description:"Calculate flooring materials",filename:"flooring.html"},{id:"foundation",name:"Foundation Calculator",icon:"",description:"Estimate foundation materials",filename:"foundation.html"},{id:"framing",name:"Framing Calculator",icon:"",description:"Calculate framing lumber",filename:"framing.html"},{id:"gutter",name:"Gutter Calculator",icon:"",description:"Estimate gutter materials",filename:"gutter.html"},{id:"hvac",name:"HVAC Calculator",icon:"",description:"Calculate HVAC requirements",filename:"hvac.html"},{id:"junk-removal",name:"Junk Removal",icon:"",description:"Estimate junk removal costs",filename:"junk-removal.html"},{id:"paint",name:"Paint Calculator",icon:"",description:"Calculate paint quantities",filename:"paint.html"},{id:"pavers",name:"Pavers Calculator",icon:"",description:"Estimate paver materials",filename:"pavers.html"},{id:"plumbing",name:"Plumbing Calculator",icon:"",description:"Calculate plumbing materials",filename:"plumbing.html"},{id:"retaining-walls",name:"Retaining Walls",icon:"",description:"Estimate retaining wall costs",filename:"retaining-walls.html"},{id:"siding",name:"Siding Calculator",icon:"",description:"Calculate siding materials",filename:"siding.html"},{id:"tile",name:"Tile Calculator",icon:"",description:"Estimate tile quantities",filename:"tile.html"}],XU=()=>{const[s,t]=p.useState(null),[r,a]=p.useState([]),[n,i]=p.useState(!0),[o,l]=p.useState(!1),[d,u]=p.useState(null),[m,h]=p.useState(null),{user:x}=ka(),f=window.location.origin;p.useEffect(()=>{b()},[]);const b=async()=>{try{const{data:B,error:F}=await _e.from("widget_keys").select("*").eq("contractor_id",x?.id).order("created_at",{ascending:!1});if(F)throw F;a(B||[])}catch(B){console.error("Error loading widget keys:",B),u(B.message)}finally{i(!1)}},v=async()=>{l(!0),u(null);try{const{data:{session:B}}=await _e.auth.getSession();if(!B)throw new Error("Not authenticated");const Q=await(await fetch("https://ujhgwcurllkkeouzwvgk.supabase.co/functions/v1/widget-key-generate",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${B.access_token}`},body:JSON.stringify({calculatorType:"all"})})).json();if(!Q.success)throw new Error(Q.error||"Failed to generate widget key");await b()}catch(B){console.error("Error generating widget key:",B),u(B.message)}finally{l(!1)}},j=(B,F,Q)=>{const q=`${f}/widget/${F.filename}?key=${B}`;return Q==="iframe"?`<iframe
  src="${q}"
  width="100%"
  height="900"
  frameborder="0"
  style="border-radius: 12px; border: 2px solid #e5e7eb;">
</iframe>`:Q==="responsive"?`<div style="position: relative; padding-bottom: 120%; height: 0; overflow: hidden; max-width: 100%;">
  <iframe
    src="${q}"
    style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; border-radius: 12px;"
    frameborder="0">
  </iframe>
</div>`:Q==="button"?`<a
  href="${q}"
  target="_blank"
  style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px 30px; border-radius: 8px; text-decoration: none; font-weight: 600; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
  Calculate Your ${F.name} 
</a>`:""},S=(B,F)=>{navigator.clipboard.writeText(B),t(F),setTimeout(()=>t(null),2e3)};if(n)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(hr,{className:"w-8 h-8 animate-spin text-purple-600"})});const C=r.find(B=>B.is_active&&B.calculator_type==="all");return e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Jx,{className:"w-8 h-8 text-purple-600"}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calculator Widgets Hub"})]}),e.jsx("p",{className:"text-gray-600",children:"Embed any of our 20 powerful calculators on your website. One widget key works for all calculators."})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(_w,{className:"w-6 h-6 text-purple-600 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Your Universal Widget Key"}),C?e.jsxs("div",{className:"bg-white rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("code",{className:"text-sm text-purple-600 font-mono",children:C.widget_key}),e.jsx("button",{onClick:()=>S(C.widget_key,"widget-key"),className:"text-sm text-purple-600 hover:text-purple-700 flex items-center gap-1",children:s==="widget-key"?e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"w-4 h-4"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ew,{className:"w-4 h-4"}),"Copy"]})})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(C.created_at).toLocaleDateString(),"  Works with ALL 20 calculators"]})]}):e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Generate one widget key that works with all 20 calculators below.",e.jsx("strong",{className:"text-purple-600",children:" The widgets will only work while your subscription is active."})]}),e.jsx("button",{onClick:v,disabled:o,className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_w,{className:"w-4 h-4"}),"Generate Universal Widget Key"]})})]}),d&&e.jsxs("div",{className:"mt-4 bg-red-50 border border-red-200 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(Qa,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-600",children:d})]})]})]})}),!C&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-8",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Qa,{className:"w-6 h-6 text-yellow-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900 mb-1",children:"Generate a Widget Key First"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"You need to generate a universal widget key above to access all 20 calculator widgets."})]})]})}),C&&e.jsxs(e.Fragment,{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:["Available Calculators (",Qf.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:Qf.map(B=>e.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow cursor-pointer",onClick:()=>h(B.id),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"text-4xl",children:B.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:B.name}),e.jsx("p",{className:"text-xs text-gray-500",children:B.description})]})]}),e.jsxs("a",{href:`${f}/widget/${B.filename}?key=${C.widget_key}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg font-medium transition-colors text-sm",onClick:F=>F.stopPropagation(),children:[e.jsx(oy,{className:"w-4 h-4"}),"Preview Widget"]}),e.jsxs("button",{className:"w-full mt-2 flex items-center justify-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-medium transition-colors text-sm",onClick:F=>{F.stopPropagation(),h(B.id)},children:[e.jsx(zx,{className:"w-4 h-4"}),"Get Embed Code"]})]})},B.id))}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:[Qf.find(B=>B.id===m)?.name," - Embed Codes"]}),e.jsx("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),e.jsx("div",{className:"p-6 space-y-6",children:["iframe","responsive","button"].map(B=>{const F=Qf.find(P=>P.id===m),Q=j(C.widget_key,F,B),q=`${m}-${B}`;return e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2 capitalize",children:B==="iframe"?"Basic Embed (iframe)":B==="responsive"?"Responsive Embed":"Button Link"}),e.jsxs("div",{className:"relative",children:[e.jsx("pre",{className:"bg-gray-900 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm",children:e.jsx("code",{children:Q})}),e.jsx("button",{onClick:()=>S(Q,q),className:"absolute top-3 right-3 bg-gray-800 hover:bg-gray-700 text-white px-3 py-1.5 rounded-md flex items-center gap-2 text-sm",children:s===q?e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"w-4 h-4"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ew,{className:"w-4 h-4"}),"Copy"]})})]})]},B)})})]})})]})]})},ZU=({onSave:s,projects:t})=>{const[r,a]=p.useState(null),[n,i]=p.useState(null),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[m,h]=p.useState("idle"),[x,f]=p.useState([]),[b,v]=p.useState({vendor:"",date:new Date().toISOString().split("T")[0],amount:0,category:"",projectId:"",notes:"",status:"pending",receiptNumber:"",taxAmount:0,subtotal:0,supplierAddress:"",supplierPhone:""}),j=p.useRef(null),S=p.useRef(null),C=["Materials","Labor","Subcontractors","Equipment Rental","Tools","Permits","Office Supplies","Travel","Other"],B=()=>{a("camera"),setTimeout(()=>{S.current&&S.current.click()},100)},F=()=>{a("upload"),setTimeout(()=>{j.current&&j.current.click()},100)},Q=async $=>{const k=URL.createObjectURL($);i(k),u(!0),h("processing"),q($)},q=async $=>{try{const{data:{user:k}}=await _e.auth.getUser(),L=k?.id||"00000000-0000-0000-0000-000000000000",E=$.name.replace(/\s+/g,"_").replace(/[^a-zA-Z0-9._-]/g,""),O=`${L}/${Date.now()}_${E}`;console.log(" Uploading to Supabase Storage..."),console.log("User ID:",L),console.log("File path:",O);const{data:le,error:te}=await _e.storage.from("receipt-images").upload(O,$);if(te)throw console.error(" Upload error:",te),console.error("Full error details:",JSON.stringify(te,null,2)),te.message?.includes("not found")?alert(' Storage bucket not set up. Please create the "receipt-images" bucket in Supabase Dashboard.'):te.message?.includes("policy")?alert(" Permission error. Please check storage bucket policies."):alert(`Upload failed: ${te.message}`),te;console.log(" Upload successful:",le);const{data:{publicUrl:V}}=_e.storage.from("receipt-images").getPublicUrl(O);console.log("Image uploaded to:",V),v(H=>({...H,imageUrl:V})),console.log(" Sending to n8n webhook for OCR processing...");const M="https://contractorai.app.n8n.cloud/webhook/d718a3b9-fd46-4ce2-b885-f2a18ad4d98a",ie={imageUrl:V};console.log(" Webhook URL:",M),console.log(" Request payload:",ie),console.log(" Image URL being sent:",V);let K={};try{const H=new AbortController,I=setTimeout(()=>{console.error(" Request timed out after 30 seconds"),H.abort()},3e4);console.log(" Making fetch request now...");const ee=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(ie),signal:H.signal});if(console.log(" Fetch completed"),clearTimeout(I),console.log(" Webhook response status:",ee.status),console.log(" Webhook response headers:",Object.fromEntries(ee.headers.entries())),!ee.ok){console.error(" n8n webhook error:",ee.status,ee.statusText);const de=await ee.text();throw console.error("Error response body:",de),new Error(`Webhook responded with ${ee.status}`)}const se=await ee.text();if(console.log(" Raw webhook response:",se),se.trim())K=JSON.parse(se),console.log(" OCR Result from n8n:",K);else throw console.warn(" Webhook returned empty response"),new Error("Empty response from webhook")}catch(H){console.error(" n8n webhook failed:",H),console.log(" Continuing without OCR - user can enter data manually"),h("error")}K.lineItems&&K.lineItems.length>0&&f(K.lineItems),v(H=>({...H,vendor:K.vendor||H.vendor,date:K.date||H.date,amount:K.amount||H.amount,notes:K.confidence?.overall?`Auto-extracted (${Math.round(K.confidence.overall*100)}% confidence)${K.receiptNumber?`
Receipt #: ${K.receiptNumber}`:""}`:H.notes,imageUrl:V,receiptNumber:K.receiptNumber||H.receiptNumber,taxAmount:K.taxAmount||H.taxAmount,subtotal:K.subtotal||H.subtotal,supplierAddress:K.supplierAddress||H.supplierAddress,supplierPhone:K.supplierPhone||H.supplierPhone})),h("complete")}catch(k){console.error("Error processing receipt:",k),h("error"),console.log("OCR failed - user can enter data manually")}},P=$=>{const k=$.target.files?.[0];k&&Q(k)},D=()=>{b.vendor&&b.date&&b.amount&&b.category&&(s({id:Date.now().toString(),vendor:b.vendor,date:b.date,amount:b.amount,category:b.category,projectId:b.projectId,notes:b.notes,imageUrl:b.imageUrl||void 0,status:"verified",metadata:{receiptNumber:b.receiptNumber,taxAmount:b.taxAmount,subtotal:b.subtotal,supplierAddress:b.supplierAddress,supplierPhone:b.supplierPhone,lineItems:x}}),i(null),a(null),u(!1),v({vendor:"",date:new Date().toISOString().split("T")[0],amount:0,category:"",projectId:"",notes:"",status:"pending"}),setTimeout(()=>{window.location.reload()},500))},_=()=>{n&&URL.revokeObjectURL(n),i(null),a(null),u(!1)};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receipt Capture"}),n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsxs("div",{className:"relative flex-shrink-0 w-32 h-40 bg-gray-100 rounded-md overflow-hidden",children:[e.jsx("img",{src:n,alt:"Receipt preview",className:"w-full h-full object-cover"}),o&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:e.jsx(Pw,{className:"w-8 h-8 text-white animate-spin"})})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"space-y-4",children:[m!=="idle"&&e.jsx("div",{className:`rounded-md p-3 ${m==="processing"?"bg-blue-50 border border-blue-200":m==="complete"?"bg-green-50 border border-green-200":"bg-yellow-50 border border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[m==="processing"&&e.jsxs(e.Fragment,{children:[e.jsx(Pw,{className:"w-4 h-4 text-blue-500 animate-spin mr-2"}),e.jsx("span",{className:"text-sm text-blue-700",children:" AI is extracting data... You can start entering info now!"})]}),m==="complete"&&e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"w-4 h-4 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm text-green-700",children:" Receipt data extracted! Fields auto-filled below."})]}),m==="error"&&e.jsx("span",{className:"text-sm text-yellow-700",children:" OCR couldn't process - please enter manually"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vendor"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("input",{type:"text",value:b.vendor,onChange:$=>v({...b,vendor:$.target.value}),disabled:!d,className:"block w-full pr-10 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md disabled:bg-gray-50 disabled:text-gray-500"}),!d&&e.jsx(Ca,{className:"absolute right-3 top-2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("input",{type:"date",value:b.date,onChange:$=>v({...b,date:$.target.value}),disabled:!d,className:"block w-full pr-10 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md disabled:bg-gray-50 disabled:text-gray-500"}),!d&&e.jsx(Ca,{className:"absolute right-3 top-2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("input",{type:"number",step:"0.01",value:b.amount,onChange:$=>v({...b,amount:parseFloat($.target.value)}),disabled:!d,className:"block w-full pr-10 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md disabled:bg-gray-50 disabled:text-gray-500"}),!d&&e.jsx(Ca,{className:"absolute right-3 top-2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsxs("select",{value:b.category,onChange:$=>v({...b,category:$.target.value}),disabled:!d,className:"block w-full pr-10 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md disabled:bg-gray-50 disabled:text-gray-500",children:[e.jsx("option",{value:"",children:"Select category"}),C.map($=>e.jsx("option",{value:$,children:$},$))]}),!d&&e.jsx(Ca,{className:"absolute right-3 top-2 h-4 w-4 text-gray-400"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 border-t pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Receipt #"}),e.jsx("input",{type:"text",value:b.receiptNumber||"",onChange:$=>v({...b,receiptNumber:$.target.value}),disabled:!d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-50",placeholder:"Auto-filled"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Amount"}),e.jsx("input",{type:"number",step:"0.01",value:b.taxAmount||0,onChange:$=>v({...b,taxAmount:parseFloat($.target.value)}),disabled:!d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-calculated"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Subtotal"}),e.jsx("input",{type:"number",step:"0.01",value:b.subtotal||0,onChange:$=>v({...b,subtotal:parseFloat($.target.value)}),disabled:!d,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm disabled:bg-gray-50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pre-tax amount"})]})]}),(b.supplierAddress||b.supplierPhone)&&e.jsxs("details",{className:"border-t pt-4",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-medium text-gray-700 hover:text-gray-900",children:" Supplier Details"}),e.jsxs("div",{className:"mt-3 space-y-3 pl-4",children:[b.supplierAddress&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Address"}),e.jsx("p",{className:"text-sm text-gray-700",children:b.supplierAddress})]}),b.supplierPhone&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Phone"}),e.jsx("p",{className:"text-sm text-gray-700",children:b.supplierPhone})]})]})]}),x.length>0&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:[" Line Items (",x.length,")"]}),e.jsx("div",{className:"bg-gray-50 rounded-md p-3 max-h-48 overflow-y-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"sticky top-0 bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-2 px-2 font-medium",children:"Item"}),e.jsx("th",{className:"text-right py-2 px-2 font-medium",children:"Qty"}),e.jsx("th",{className:"text-right py-2 px-2 font-medium",children:"Price"}),e.jsx("th",{className:"text-right py-2 px-2 font-medium",children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(($,k)=>e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-2",children:$.description}),e.jsx("td",{className:"text-right py-2 px-2",children:$.quantity}),e.jsxs("td",{className:"text-right py-2 px-2",children:["$",$.unitPrice.toFixed(2)]}),e.jsxs("td",{className:"text-right py-2 px-2 font-medium",children:["$",$.totalAmount.toFixed(2)]})]},k))})]})})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Individual items extracted from receipt"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsxs("select",{value:b.projectId||"",onChange:$=>v({...b,projectId:$.target.value}),disabled:!d,className:"block w-full pr-10 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md disabled:bg-gray-50 disabled:text-gray-500",children:[e.jsx("option",{value:"",children:"Select project (optional)"}),e.jsx("option",{value:"revenue-tracker",children:" Revenue Tracker (General Business)"}),t.filter($=>$.name!=="Revenue Tracker").map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]}),!d&&e.jsx(Ca,{className:"absolute right-3 top-2 h-4 w-4 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("textarea",{value:b.notes||"",onChange:$=>v({...b,notes:$.target.value}),disabled:!d,rows:2,className:"block w-full focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm border-gray-300 rounded-md disabled:bg-gray-50 disabled:text-gray-500"}),!d&&e.jsx(Ca,{className:"absolute right-3 top-2 h-4 w-4 text-gray-400"})]})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsxs("button",{type:"button",onClick:_,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(xt,{className:"mr-2 h-4 w-4"}),"Cancel"]}),d?e.jsxs("button",{type:"button",onClick:D,disabled:!b.vendor||!b.date||!b.amount||!b.category,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed",children:[e.jsx(zt,{className:"mr-2 h-4 w-4"}),"Save Receipt"]}):e.jsxs("button",{type:"button",onClick:()=>u(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Ca,{className:"mr-2 h-4 w-4"}),"Edit Details"]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("button",{onClick:B,className:"flex items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(iy,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Take Photo"}),e.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"Use your camera to capture a receipt"})]})}),e.jsx("button",{onClick:F,className:"flex items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vh,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:"Upload Image"}),e.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"Select a receipt image from your device"})]})})]}),e.jsx("input",{type:"file",ref:j,accept:"image/*",onChange:P,className:"hidden"}),e.jsx("input",{type:"file",ref:S,accept:"image/*",capture:"environment",onChange:P,className:"hidden"})]})]})},eL=["Materials","Labor","Subcontractors","Equipment Rental","Tools","Permits","Office Supplies","Travel","Other"],tL=({expense:s,projects:t,onSave:r,onClose:a})=>{const[n,i]=p.useState(s);p.useEffect(()=>{i(s)},[s]);const o=()=>{r(n),a()},l=(m,h,x)=>{const f=[...n.metadata?.lineItems||[]];f[m]={...f[m],[h]:h==="description"?x:parseFloat(x)},(h==="quantity"||h==="unitPrice")&&(f[m].totalAmount=f[m].quantity*f[m].unitPrice),i({...n,metadata:{...n.metadata,lineItems:f}})},d=()=>{const m=[...n.metadata?.lineItems||[],{description:"",quantity:1,unitPrice:0,totalAmount:0}];i({...n,metadata:{...n.metadata,lineItems:m}})},u=m=>{const h=(n.metadata?.lineItems||[]).filter((x,f)=>f!==m);i({...n,metadata:{...n.metadata,lineItems:h}})};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Expense"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:e.jsx(xt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor *"}),e.jsx("input",{type:"text",value:n.vendor,onChange:m=>i({...n,vendor:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),e.jsx("input",{type:"date",value:n.date,onChange:m=>i({...n,date:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount *"}),e.jsx("input",{type:"number",step:"0.01",value:n.amount,onChange:m=>i({...n,amount:parseFloat(m.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsx("select",{value:n.category,onChange:m=>i({...n,category:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:eL.map(m=>e.jsx("option",{value:m,children:m},m))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project"}),e.jsxs("select",{value:n.projectId||"",onChange:m=>i({...n,projectId:m.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"None"}),t.map(m=>e.jsx("option",{value:m.id,children:m.name},m.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Receipt Number"}),e.jsx("input",{type:"text",value:n.metadata?.receiptNumber||"",onChange:m=>i({...n,metadata:{...n.metadata,receiptNumber:m.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtotal"}),e.jsx("input",{type:"number",step:"0.01",value:n.metadata?.subtotal||"",onChange:m=>i({...n,metadata:{...n.metadata,subtotal:parseFloat(m.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tax Amount"}),e.jsx("input",{type:"number",step:"0.01",value:n.metadata?.taxAmount||"",onChange:m=>i({...n,metadata:{...n.metadata,taxAmount:parseFloat(m.target.value)||0}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Address"}),e.jsx("input",{type:"text",value:n.metadata?.supplierAddress||"",onChange:m=>i({...n,metadata:{...n.metadata,supplierAddress:m.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier Phone"}),e.jsx("input",{type:"text",value:n.metadata?.supplierPhone||"",onChange:m=>i({...n,metadata:{...n.metadata,supplierPhone:m.target.value}}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:n.notes||"",onChange:m=>i({...n,notes:m.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]}),n.metadata?.lineItems&&n.metadata.lineItems.length>0&&e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Line Items"}),e.jsx("button",{onClick:d,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"+ Add Item"})]}),e.jsx("div",{className:"space-y-3",children:n.metadata.lineItems.map((m,h)=>e.jsxs("div",{className:"grid grid-cols-12 gap-2 items-start",children:[e.jsx("div",{className:"col-span-5",children:e.jsx("input",{type:"text",value:m.description,onChange:x=>l(h,"description",x.target.value),placeholder:"Description",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",value:m.quantity,onChange:x=>l(h,"quantity",x.target.value),placeholder:"Qty",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"number",step:"0.01",value:m.unitPrice,onChange:x=>l(h,"unitPrice",x.target.value),placeholder:"Price",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500"})}),e.jsx("div",{className:"col-span-2",children:e.jsx("input",{type:"text",value:`$${m.totalAmount.toFixed(2)}`,disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm bg-gray-50 text-gray-600"})}),e.jsx("div",{className:"col-span-1 flex justify-end",children:e.jsx("button",{onClick:()=>u(h),className:"text-red-600 hover:text-red-800 p-2",children:e.jsx(xt,{className:"h-4 w-4"})})})]},h))})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end space-x-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsxs("button",{onClick:o,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Qn,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})})},rL=({expenses:s,projects:t,onEdit:r,onDelete:a,onExport:n})=>{const[i,o]=p.useState(""),[l,d]=p.useState(""),[u,m]=p.useState(""),[h,x]=p.useState({start:"",end:""}),[f,b]=p.useState("date"),[v,j]=p.useState("desc"),[S,C]=p.useState(null),[B,F]=p.useState(null),Q=[...new Set(s.map($=>$.category))],q=$=>{f===$?j(v==="asc"?"desc":"asc"):(b($),j("asc"))},P=s.filter($=>{const k=i.toLowerCase();return!(i&&!$.vendor.toLowerCase().includes(k)&&!$.notes?.toLowerCase().includes(k)||l&&$.category!==l||u&&$.projectId!==u||h.start&&new Date($.date)<new Date(h.start)||h.end&&new Date($.date)>new Date(h.end))}).sort(($,k)=>{if(f==="amount")return v==="asc"?$.amount-k.amount:k.amount-$.amount;if(f==="date")return v==="asc"?new Date($.date).getTime()-new Date(k.date).getTime():new Date(k.date).getTime()-new Date($.date).getTime();{const L=$[f]?.toString()||"",E=k[f]?.toString()||"";return v==="asc"?L.localeCompare(E):E.localeCompare(L)}}),D=$=>{if(!$)return"Unassigned";const k=t.find(E=>E.name==="Revenue Tracker");if(k&&$===k.id)return" Revenue Tracker";const L=t.find(E=>E.id===$);return L?L.name:"Unknown Project"},_=$=>f!==$?null:v==="asc"?e.jsx(Dg,{className:"w-4 h-4"}):e.jsx(Td,{className:"w-4 h-4"});return e.jsxs(e.Fragment,{children:[B&&e.jsx(tL,{expense:B,projects:t,onSave:r,onClose:()=>F(null)}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Mo,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:i,onChange:$=>o($.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search expenses..."})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>n("csv"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Rn,{className:"h-4 w-4 mr-2 text-gray-500"}),"Export"]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(yh,{className:"h-4 w-4 mr-2 text-gray-500"}),"Filter"]}),e.jsx("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-md shadow-lg z-10 hidden",children:e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("select",{value:l,onChange:$=>d($.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"All Categories"}),Q.map($=>e.jsx("option",{value:$,children:$},$))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project"}),e.jsxs("select",{value:u,onChange:$=>m($.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"All Projects"}),t.map($=>e.jsx("option",{value:$.id,children:$.name},$.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date Range"}),e.jsxs("div",{className:"mt-1 grid grid-cols-2 gap-2",children:[e.jsx("input",{type:"date",value:h.start,onChange:$=>x({...h,start:$.target.value}),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"}),e.jsx("input",{type:"date",value:h.end,onChange:$=>x({...h,end:$.target.value}),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"})]})]})]})})]})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>q("date"),children:e.jsxs("div",{className:"flex items-center",children:["Date ",_("date")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>q("vendor"),children:e.jsxs("div",{className:"flex items-center",children:["Vendor ",_("vendor")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>q("category"),children:e.jsxs("div",{className:"flex items-center",children:["Category ",_("category")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>q("amount"),children:e.jsxs("div",{className:"flex items-center",children:["Amount ",_("amount")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipt"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vl,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No expenses found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i||l||u||h.start||h.end?"Try adjusting your filters to find what you're looking for.":"Get started by adding your first expense using the form above."})]})})}):P.map($=>{const k=$.metadata?.lineItems&&$.metadata.lineItems.length>0,L=S===$.id;return e.jsxs(e.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[Nr(new Date($.date),"MMM d, yyyy"),$.isRecurring&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Recurring"}),$.metadata?.source==="n8n_webhook"&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800",children:"Auto"})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:$.vendor}),$.metadata?.receiptNumber&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Receipt #",$.metadata.receiptNumber]})]}),k&&e.jsx("button",{onClick:()=>C(L?null:$.id),className:"ml-2 text-gray-400 hover:text-gray-600",children:L?e.jsx(Dg,{className:"h-4 w-4"}):e.jsx(Td,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(Ay,{className:"mr-1 h-3 w-3"}),$.category]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsxs("div",{className:"font-medium",children:["$",$.amount.toFixed(2)]}),$.metadata?.taxAmount&&e.jsxs("div",{className:"text-xs text-gray-500",children:["Tax: $",$.metadata.taxAmount.toFixed(2)]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:D($.projectId)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:$.imageUrl?e.jsx("button",{className:"text-blue-600 hover:text-blue-800",children:e.jsx(ra,{className:"h-5 w-5"})}):k?e.jsx(AA,{className:"h-5 w-5 text-green-500"}):e.jsx("span",{className:"text-gray-400",children:"None"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>F($),className:"text-blue-600 hover:text-blue-900 mr-4",title:"Edit expense",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>a($.id),className:"text-red-600 hover:text-red-900",children:e.jsx(To,{className:"h-4 w-4"})})]})]},$.id),L&&k&&e.jsx("tr",{className:"bg-gray-50",children:e.jsx("td",{colSpan:7,className:"px-6 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(AA,{className:"h-4 w-4 mr-2"}),"Line Items (",$.metadata.lineItems.length,")"]}),e.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500",children:"Description"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Qty"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Unit Price"}),e.jsx("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500",children:"Total"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:$.metadata.lineItems.map((E,O)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 text-sm text-gray-900",children:E.description}),e.jsx("td",{className:"px-4 py-2 text-sm text-gray-600 text-right",children:E.quantity}),e.jsxs("td",{className:"px-4 py-2 text-sm text-gray-600 text-right",children:["$",E.unitPrice.toFixed(2)]}),e.jsxs("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 text-right",children:["$",E.totalAmount.toFixed(2)]})]},`${$.id}-line-${O}`))}),$.metadata.subtotal&&e.jsxs("tfoot",{className:"bg-gray-50",children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-4 py-2 text-sm text-gray-600 text-right",children:"Subtotal:"}),e.jsxs("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 text-right",children:["$",$.metadata.subtotal.toFixed(2)]})]}),$.metadata.taxAmount&&e.jsxs("tr",{children:[e.jsx("td",{colSpan:3,className:"px-4 py-2 text-sm text-gray-600 text-right",children:"Tax:"}),e.jsxs("td",{className:"px-4 py-2 text-sm font-medium text-gray-900 text-right",children:["$",$.metadata.taxAmount.toFixed(2)]})]}),e.jsxs("tr",{className:"font-bold",children:[e.jsx("td",{colSpan:3,className:"px-4 py-2 text-sm text-gray-900 text-right",children:"Total:"}),e.jsxs("td",{className:"px-4 py-2 text-sm font-bold text-gray-900 text-right",children:["$",$.amount.toFixed(2)]})]})]})]})})]}),($.metadata.supplierAddress||$.metadata.supplierPhone)&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-3 border-t border-gray-200",children:[$.metadata.supplierAddress&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(lp,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Address"}),e.jsx("div",{className:"text-sm text-gray-700",children:$.metadata.supplierAddress})]})]}),$.metadata.supplierPhone&&e.jsxs("div",{className:"flex items-start",children:[e.jsx(Md,{className:"h-4 w-4 text-gray-400 mr-2 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-gray-500",children:"Phone"}),e.jsx("div",{className:"text-sm text-gray-700",children:$.metadata.supplierPhone})]})]})]})]})})},`${$.id}-expanded`)]})})})]})})]})]})},sL=()=>{const[s,t]=p.useState([]),[r,a]=p.useState([]),[n,i]=p.useState(!1),[o,l]=p.useState(null),[d,u]=p.useState(!1),[m,h]=p.useState({employee_id:"",amount:0,date:new Date().toISOString().split("T")[0],payment_method:"direct_deposit",status:"completed",reference:"",notes:""});p.useEffect(()=>{x(),f()},[]);const x=async()=>{try{const{data:P,error:D}=await _e.from("employees").select("id, name, job_title, hourly_rate").eq("status","active").order("name");if(D){console.error("Error fetching employees:",D);return}t(P||[])}catch(P){console.error("Error fetching employees:",P)}},f=async()=>{try{u(!0);const{data:P,error:D}=await _e.from("employee_payments").select("*").order("date",{ascending:!1});if(D){console.error("Error fetching payments:",D),a([]),u(!1);return}a(P||[])}catch(P){console.error("Error fetching payments:",P),a([])}finally{u(!1)}},b=async P=>{P.preventDefault();try{const{data:{user:D}}=await _e.auth.getUser();if(!D){alert("You must be logged in to add payments");return}if(o){const{error:_}=await _e.from("employee_payments").update(m).eq("id",o.id);if(_)throw _;l(null)}else{const{error:_}=await _e.from("employee_payments").insert([{...m,user_id:D.id}]);if(_)throw _}i(!1),S(),f()}catch(D){console.error("Error saving payment:",D),alert("Error saving payment: "+D.message)}},v=P=>{l(P),h({employee_id:P.employee_id,amount:P.amount,date:P.date,payment_method:P.payment_method,status:P.status,reference:P.reference||"",notes:P.notes||""}),i(!0)},j=async P=>{if(confirm("Are you sure you want to delete this payment?"))try{const{error:D}=await _e.from("employee_payments").delete().eq("id",P);if(D)throw D;f()}catch(D){console.error("Error deleting payment:",D)}},S=()=>{h({employee_id:"",amount:0,date:new Date().toISOString().split("T")[0],payment_method:"direct_deposit",status:"completed",reference:"",notes:""})},C=()=>{i(!1),l(null),S()},B=P=>s.find(_=>_.id===P)?.name||"Unknown Employee",F=P=>{switch(P){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Q=P=>{switch(P){case"completed":return e.jsx(zt,{className:"w-4 h-4"});case"pending":return e.jsx(Fr,{className:"w-4 h-4"});case"failed":return e.jsx(xt,{className:"w-4 h-4"});default:return null}},q=P=>({cash:"Cash",check:"Check",bank_transfer:"Bank Transfer",direct_deposit:"Direct Deposit",other:"Other"})[P]||P;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Employee Payments"}),!n&&e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add Payment"]})]})}),n&&e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Employee *"}),e.jsxs("select",{value:m.employee_id,onChange:P=>h({...m,employee_id:P.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Select Employee"}),s.map(P=>e.jsxs("option",{value:P.id,children:[P.name," - ",P.job_title]},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount ($) *"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:m.amount||"",onChange:P=>h({...m,amount:parseFloat(P.target.value)||0}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date *"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:m.date,onChange:P=>h({...m,date:P.target.value}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method *"}),e.jsxs("select",{value:m.payment_method,onChange:P=>h({...m,payment_method:P.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"direct_deposit",children:"Direct Deposit"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reference Number"}),e.jsx("input",{type:"text",value:m.reference||"",onChange:P=>h({...m,reference:P.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"Check #, Transaction ID, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status *"}),e.jsxs("select",{value:m.status,onChange:P=>h({...m,status:P.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:m.notes||"",onChange:P=>h({...m,notes:P.target.value}),rows:2,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"Additional payment details..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:C,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o?"Update Payment":"Add Payment"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Employee"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-sm text-gray-500",children:"Loading payments..."})}):r.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ns,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No employee payments"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first employee payment."})]})})}):r.map(P=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Nr(new Date(P.date),"MMM d, yyyy")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:B(P.employee_id)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",P.amount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[q(P.payment_method),P.reference&&e.jsxs("span",{className:"block text-xs text-gray-500",children:["Ref: ",P.reference]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F(P.status)}`,children:[Q(P.status),e.jsx("span",{className:"ml-1",children:P.status.charAt(0).toUpperCase()+P.status.slice(1)})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>v(P),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(P.id),className:"text-red-600 hover:text-red-900",children:e.jsx(To,{className:"h-4 w-4"})})]})]},P.id))})]})})]})},aL=()=>{const[s,t]=p.useState([]),[r,a]=p.useState([]),[n,i]=p.useState(!1),[o,l]=p.useState(null),[d,u]=p.useState(!1),[m,h]=p.useState({contractor_name:"",amount:0,date:new Date().toISOString().split("T")[0],payment_method:"check",status:"completed",reference:"",notes:"",project_id:""});p.useEffect(()=>{x(),f()},[]);const x=async()=>{try{const{data:P,error:D}=await _e.from("projects").select("id, name").order("name");if(D){console.error("Error fetching projects:",D);return}a(P||[])}catch(P){console.error("Error fetching projects:",P)}},f=async()=>{try{u(!0);const{data:P,error:D}=await _e.from("contractor_payments").select("*").order("date",{ascending:!1});if(D){console.error("Error fetching contractor payments:",D),t([]),u(!1);return}t(P||[])}catch(P){console.error("Error fetching contractor payments:",P),t([])}finally{u(!1)}},b=async P=>{P.preventDefault();try{const{data:{user:D}}=await _e.auth.getUser();if(!D){alert("You must be logged in to add payments");return}if(o){const{error:_}=await _e.from("contractor_payments").update(m).eq("id",o.id);if(_)throw _;l(null)}else{const{error:_}=await _e.from("contractor_payments").insert([{...m,user_id:D.id}]);if(_)throw _}i(!1),S(),f()}catch(D){console.error("Error saving contractor payment:",D),alert("Error saving payment: "+D.message)}},v=P=>{l(P),h({contractor_name:P.contractor_name,amount:P.amount,date:P.date,payment_method:P.payment_method,status:P.status,reference:P.reference||"",notes:P.notes||""}),i(!0)},j=async P=>{if(confirm("Are you sure you want to delete this payment?"))try{const{error:D}=await _e.from("contractor_payments").delete().eq("id",P);if(D)throw D;f()}catch(D){console.error("Error deleting contractor payment:",D)}},S=()=>{h({contractor_name:"",amount:0,date:new Date().toISOString().split("T")[0],payment_method:"check",status:"completed",reference:"",notes:"",project_id:""})},C=P=>P?r.find(_=>_.id===P)?.name||"Unknown Project":"No Project",B=()=>{i(!1),l(null),S()},F=P=>{switch(P){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},Q=P=>{switch(P){case"completed":return e.jsx(zt,{className:"w-4 h-4"});case"pending":return e.jsx(Fr,{className:"w-4 h-4"});case"failed":return e.jsx(xt,{className:"w-4 h-4"});default:return null}},q=P=>({cash:"Cash",check:"Check",bank_transfer:"Bank Transfer",other:"Other"})[P]||P;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"1099 Contractor Payments"}),!n&&e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add Payment"]})]})}),n&&e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:b,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contractor Name *"}),e.jsx("input",{type:"text",value:m.contractor_name,onChange:P=>h({...m,contractor_name:P.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"Enter contractor name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project (Optional)"}),e.jsxs("select",{value:m.project_id||"",onChange:P=>h({...m,project_id:P.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"No Project"}),r.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount ($) *"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:m.amount||"",onChange:P=>h({...m,amount:parseFloat(P.target.value)||0}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date *"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:m.date,onChange:P=>h({...m,date:P.target.value}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method *"}),e.jsxs("select",{value:m.payment_method,onChange:P=>h({...m,payment_method:P.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reference Number"}),e.jsx("input",{type:"text",value:m.reference||"",onChange:P=>h({...m,reference:P.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"Check #, Transaction ID, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status *"}),e.jsxs("select",{value:m.status,onChange:P=>h({...m,status:P.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:m.notes||"",onChange:P=>h({...m,notes:P.target.value}),rows:2,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"Additional payment details..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:B,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o?"Update Payment":"Add Payment"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contractor Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12 text-center text-sm text-gray-500",children:"Loading payments..."})}):s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Sa,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contractor payments"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first 1099 contractor payment."})]})})}):s.map(P=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Nr(new Date(P.date),"MMM d, yyyy")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P.contractor_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:C(P.project_id)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",P.amount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[q(P.payment_method),P.reference&&e.jsxs("span",{className:"block text-xs text-gray-500",children:["Ref: ",P.reference]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${F(P.status)}`,children:[Q(P.status),e.jsx("span",{className:"ml-1",children:P.status.charAt(0).toUpperCase()+P.status.slice(1)})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>v(P),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(P.id),className:"text-red-600 hover:text-red-900",children:e.jsx(To,{className:"h-4 w-4"})})]})]},P.id))})]})})]})},nL=({payments:s,clients:t,projects:r,invoices:a,onAddPayment:n,onEditPayment:i,onDeletePayment:o})=>{const[l,d]=p.useState("received"),[u,m]=p.useState(!1),[h,x]=p.useState(null),[f,b]=p.useState({clientId:"",projectId:"",amount:0,date:new Date().toISOString().split("T")[0],method:"bank_transfer",status:"completed",reference:"",notes:""});console.log(" PAYMENT TRACKER DEBUG:"),console.log("  Total projects received:",r?.length||0),console.log("  All projects:",r),console.log("  Selected clientId:",f.clientId),console.log("  All clients:",t);const v=f.clientId?(r||[]).filter(L=>(console.log(`  Comparing project "${L?.name}": project.clientId="${L?.clientId}" vs formData.clientId="${f.clientId}"`),L?.clientId===f.clientId)):r||[];console.log("  Filtered projects count:",v.length),console.log("  Filtered projects:",v);const j=f.projectId?(a||[]).filter(L=>L?.projectId===f.projectId&&L?.status!=="paid"):[],S=L=>{b({...f,clientId:L,projectId:"",invoiceId:void 0})},C=L=>{try{b({...f,projectId:L,invoiceId:void 0})}catch(E){console.error("Error changing project:",E)}},B=L=>{const E=a.find(O=>O.id===L);E&&b({...f,invoiceId:L,amount:E.balance||E.totalAmount||0})},F=L=>{L.preventDefault(),h?(i({...f,id:h.id}),x(null)):n(f),m(!1),b({clientId:"",projectId:"",amount:0,date:new Date().toISOString().split("T")[0],method:"bank_transfer",status:"completed",reference:"",notes:""})},Q=L=>{x(L),b({clientId:L.clientId,projectId:L.projectId,amount:L.amount,date:L.date,method:L.method,status:L.status,reference:L.reference||"",notes:L.notes||"",invoiceId:L.invoiceId}),m(!0)},q=()=>{m(!1),x(null),b({clientId:"",projectId:"",amount:0,date:new Date().toISOString().split("T")[0],method:"bank_transfer",status:"completed",reference:"",notes:""})},P=L=>!L||!t?"Unknown Client":(t||[]).find(O=>O?.id===L)?.name||"Unknown Client",D=L=>!L||!r?"Unknown Project":(r||[]).find(O=>O?.id===L)?.name||"Unknown Project",_=L=>{switch(L){case"completed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},$=L=>{switch(L){case"completed":return e.jsx(zt,{className:"w-4 h-4"});case"pending":return e.jsx(Fr,{className:"w-4 h-4"});case"failed":return e.jsx(xt,{className:"w-4 h-4"});default:return null}},k=L=>{switch(L){case"cash":return"Cash";case"check":return"Check";case"credit_card":return"Credit Card";case"bank_transfer":return"Bank Transfer";case"other":return"Other";default:return L}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Payment Tracker"}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[e.jsx("button",{onClick:()=>d("received"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="received"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Received Payments"}),e.jsx("button",{onClick:()=>d("employee"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="employee"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Employee Payments"}),e.jsx("button",{onClick:()=>d("contractor"),className:`py-2 px-1 border-b-2 font-medium text-sm ${l==="contractor"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"1099 Contractors"})]})})]}),l==="received"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:"Received Payments"}),!u&&e.jsxs("button",{onClick:()=>m(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Record Payment"]})]})}),u&&e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:F,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Client (Optional)"}),e.jsxs("select",{value:f.clientId||"",onChange:L=>S(L.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"All Clients"}),(t||[]).map(L=>e.jsx("option",{value:L?.id||"",children:L?.name||"Unknown"},L?.id||Math.random()))]}),(t||[]).length===0&&e.jsx("p",{className:"mt-1 text-xs text-yellow-500",children:"No clients available."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project"}),e.jsxs("select",{value:f.projectId,onChange:L=>C(L.target.value),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Select Project"}),(f.clientId?v:r||[]).map(L=>{if(!L||!L.id)return null;const E=L.name||"Unknown Project",O=!f.clientId&&L.clientName?` (${L.clientName})`:"";return e.jsxs("option",{value:L.id,children:[E,O]},L.id)})]}),f.clientId&&v.length===0&&e.jsx("p",{className:"mt-1 text-xs text-yellow-500",children:"No projects found for this client."}),!f.clientId&&(r||[]).length===0&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:"No projects available. Please create a project first."})]}),f.projectId&&j.length>0&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Apply to Invoice (Optional)"}),e.jsx("div",{className:"mt-1 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:j.map(L=>!L||!L.id?null:e.jsxs("div",{onClick:()=>B(L.id),className:`cursor-pointer border rounded-md p-3 ${f.invoiceId===L.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.invoiceNumber||`Invoice #${L.id.slice(-4)}`}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",(L.balance||L.totalAmount||0).toFixed(2)]})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Due: ",L.dueDate?Nr(new Date(L.dueDate),"MMM d, yyyy"):"N/A"]}),e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${L.status==="overdue"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:L.status?L.status.charAt(0).toUpperCase()+L.status.slice(1):"Unknown"})})]},L.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:f.amount||"",onChange:L=>b({...f,amount:parseFloat(L.target.value)||0}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:f.date,onChange:L=>b({...f,date:L.target.value}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Payment Method"}),e.jsxs("select",{value:f.method,onChange:L=>b({...f,method:L.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:f.status,onChange:L=>b({...f,status:L.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"failed",children:"Failed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Reference Number"}),e.jsx("input",{type:"text",value:f.reference||"",onChange:L=>b({...f,reference:L.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"Check #, Transaction ID, etc."})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:f.notes||"",onChange:L=>b({...f,notes:L.target.value}),rows:2,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",placeholder:"Additional payment details..."})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:q,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:h?"Update Payment":"Record Payment"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Client"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Method"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(s||[]).length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Br,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No payments recorded"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by recording your first payment using the form above."})]})})}):(s||[]).map(L=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Nr(new Date(L.date),"MMM d, yyyy")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P(L.clientId)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D(L.projectId)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",L.amount.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[k(L.method),L.reference&&e.jsxs("span",{className:"block text-xs text-gray-500",children:["Ref: ",L.reference]})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${_(L.status)}`,children:[$(L.status),e.jsx("span",{className:"ml-1",children:L.status.charAt(0).toUpperCase()+L.status.slice(1)})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>Q(L),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>o(L.id),className:"text-red-600 hover:text-red-900",children:e.jsx(To,{className:"h-4 w-4"})})]})]},L.id))})]})})]}),l==="employee"&&e.jsx("div",{className:"p-6",children:e.jsx(sL,{})}),l==="contractor"&&e.jsx("div",{className:"p-6",children:e.jsx(aL,{})})]})},iL=({summary:s,dateRange:t,onChangeDateRange:r,onExport:a})=>{const[n,i]=p.useState("profit"),o=()=>{const u=new Date;let m;switch(t){case"week":m=OI(u);break;case"month":m=yc(u,1);break;case"quarter":m=yc(u,3);break;case"year":m=yc(u,12);break;default:m=yc(u,1)}return`${Nr(m,"MMM d, yyyy")} - ${Nr(u,"MMM d, yyyy")}`},l=()=>{if(!s.monthlyData||s.monthlyData.length===0)return e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm",children:"No data available"}),e.jsx("p",{className:"text-xs mt-1",children:"Add payments and expenses to see trends"})]})});const u=s.monthlyData.map(C=>C.revenue-C.expenses),m=Math.max(...u,0),h=Math.min(...u,0),x=m*1.3,f=h*1.3,b=C=>Math.ceil(Math.abs(C)/1e3)*1e3*Math.sign(C||1),v=b(x)||1e3,j=b(f),S=v-j;return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"absolute left-0 top-0 bottom-8 w-16 flex flex-col justify-between text-xs text-gray-500",children:[e.jsxs("div",{children:["$",v.toLocaleString()]}),e.jsxs("div",{children:["$",Math.round(v*.75).toLocaleString()]}),e.jsxs("div",{children:["$",Math.round(v*.5).toLocaleString()]}),e.jsxs("div",{children:["$",Math.round(v*.25).toLocaleString()]}),e.jsxs("div",{children:["$",j.toLocaleString()]})]}),e.jsxs("div",{className:"ml-16 relative",children:[e.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none",children:[0,1,2,3,4].map(C=>e.jsx("div",{className:"border-t border-gray-200"},C))}),e.jsx("div",{className:"h-64 flex items-end space-x-1 relative",children:s.monthlyData.map((C,B)=>{const F=C.revenue-C.expenses,Q=S>0?(F-j)/S*100:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[e.jsx("div",{className:"w-full flex items-end justify-center relative",style:{height:"256px"},children:F!==0&&e.jsx("div",{className:`w-full rounded-t-lg transition-all cursor-pointer hover:opacity-80 ${F>=0?"bg-gradient-to-t from-green-600 to-green-400":"bg-gradient-to-t from-red-600 to-red-400"} shadow-lg`,style:{height:`${Math.max(Q,5)}%`},children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white text-xs rounded py-1 px-2 whitespace-nowrap transition-opacity z-10",children:["$",F.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})})}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 font-medium",children:C.month}),e.jsxs("div",{className:"text-xs text-gray-600 font-semibold",children:["$",F.toFixed(0)]})]},B)})})]})]})},d=()=>{const u=["bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-red-500","bg-orange-500","bg-teal-500"];return e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"relative pt-1",children:e.jsx("div",{className:"flex h-4 overflow-hidden rounded-full",children:s.expensesByCategory.map((m,h)=>e.jsx("div",{className:`${u[h%u.length]}`,style:{width:`${m.percentage}%`},title:`${m.category}: $${m.amount.toFixed(2)} (${m.percentage.toFixed(1)}%)`},h))})}),e.jsx("div",{className:"mt-4 grid grid-cols-2 gap-2",children:s.expensesByCategory.map((m,h)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${u[h%u.length]} mr-2`}),e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium",children:m.category}),e.jsxs("span",{className:"text-gray-500 ml-1",children:["$",m.amount.toFixed(0)]})]})]},h))})]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Financial Overview"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:o()})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:t,onChange:u=>r(u.target.value),className:"appearance-none pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"week",children:"Last 7 days"}),e.jsx("option",{value:"month",children:"Last 30 days"}),e.jsx("option",{value:"quarter",children:"Last 90 days"}),e.jsx("option",{value:"year",children:"Last 12 months"})]}),e.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-500",children:e.jsx(yh,{className:"h-4 w-4"})})]}),e.jsxs("button",{onClick:()=>a("pdf"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-blue-500 rounded-md p-3",children:e.jsx(Br,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Revenue"}),e.jsx("dd",{className:"flex items-baseline",children:e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["$",s.totalRevenue.toLocaleString()]})})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-red-500 rounded-md p-3",children:e.jsx(Br,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Expenses"}),e.jsx("dd",{className:"flex items-baseline",children:e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["$",s.totalExpenses.toLocaleString()]})})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:e.jsx(Br,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Net Profit"}),e.jsx("dd",{className:"flex items-baseline",children:e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["$",s.profit.toLocaleString()]})})]})})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3",children:e.jsx(Br,{className:"h-6 w-6 text-white"})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Outstanding Invoices"}),e.jsx("dd",{className:"flex items-baseline",children:e.jsxs("div",{className:"text-2xl font-semibold text-gray-900",children:["$",s.outstandingInvoices.toLocaleString()]})})]})})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-2",children:[e.jsxs("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Profit Trend"})}),e.jsx("div",{className:"p-5",children:l()})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Expenses by Category"})}),e.jsx("div",{className:"p-5",children:d()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recent Transactions"})}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"flow-root",children:e.jsx("ul",{className:"-my-5 divide-y divide-gray-200",children:s.recentTransactions.map(u=>e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:`inline-flex items-center justify-center h-8 w-8 rounded-full ${u.type==="income"?"bg-green-100":"bg-red-100"}`,children:u.type==="income"?e.jsx(io,{className:"h-4 w-4 text-green-600"}):e.jsx(vA,{className:"h-4 w-4 text-red-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:u.description}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:Nr(new Date(u.date),"MMM d, yyyy")})]}),e.jsx("div",{children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${u.type==="income"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[u.type==="income"?"+":"-","$",u.amount.toFixed(2)]})})]})},u.id))})}),e.jsx("div",{className:"mt-6",children:e.jsx("a",{href:"#",className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"View all"})})]})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:[e.jsx("div",{className:"px-5 py-4 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Upcoming Payments"})}),e.jsxs("div",{className:"p-5",children:[e.jsx("div",{className:"flow-root",children:e.jsx("ul",{className:"-my-5 divide-y divide-gray-200",children:s.upcomingPayments.length===0?e.jsx("li",{className:"py-4 text-center text-sm text-gray-500",children:"No upcoming payments"}):s.upcomingPayments.map((u,m)=>e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:u.clientName}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:u.projectName})]}),e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["$",u.amount.toFixed(2)]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Due ",Nr(new Date(u.dueDate),"MMM d")]})]})]})},m))})}),e.jsx("div",{className:"mt-6",children:e.jsx("a",{href:"#",className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"View all"})})]})]})]})]})},oL=({expenses:s,projects:t,onAdd:r,onEdit:a,onDelete:n,onToggleActive:i})=>{const[o,l]=p.useState(!1),[d,u]=p.useState(null),[m,h]=p.useState({name:"",amount:0,category:"",frequency:"monthly",nextDueDate:new Date().toISOString().split("T")[0],startDate:new Date().toISOString().split("T")[0],vendor:"",projectId:void 0,isActive:!0}),x=["Materials","Labor","Subcontractors","Equipment Rental","Tools","Permits","Office Supplies","Travel","Other"],f=C=>{C.preventDefault(),d?(a({...m,id:d.id}),u(null)):r(m),l(!1),h({name:"",amount:0,category:"",frequency:"monthly",nextDueDate:new Date().toISOString().split("T")[0],startDate:new Date().toISOString().split("T")[0],vendor:"",projectId:void 0,isActive:!0})},b=C=>{u(C),h({name:C.name,amount:C.amount,category:C.category,frequency:C.frequency,nextDueDate:C.nextDueDate,startDate:C.startDate||new Date().toISOString().split("T")[0],vendor:C.vendor,projectId:C.projectId,isActive:C.isActive}),l(!0)},v=()=>{l(!1),u(null),h({name:"",amount:0,category:"",frequency:"monthly",nextDueDate:new Date().toISOString().split("T")[0],startDate:new Date().toISOString().split("T")[0],vendor:"",projectId:void 0,isActive:!0})},j=C=>{switch(C){case"weekly":return"Weekly";case"monthly":return"Monthly";case"quarterly":return"Quarterly";case"yearly":return"Yearly";default:return C}},S=C=>{if(!C)return" General Business";const B=t.find(Q=>Q.name==="Revenue Tracker");if(B&&C===B.id)return" Revenue Tracker";const F=t.find(Q=>Q.id===C);return F?F.name:" General Business"};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Recurring Expenses"}),!o&&e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add Recurring Expense"]})]})}),o&&e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expense Name"}),e.jsx("input",{type:"text",value:m.name,onChange:C=>h({...m,name:C.target.value}),required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., Office Rent, Software Subscription"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Vendor"}),e.jsx("input",{type:"text",value:m.vendor,onChange:C=>h({...m,vendor:C.target.value}),required:!0,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., Adobe, WeWork"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:m.amount||"",onChange:C=>h({...m,amount:parseFloat(C.target.value)||0}),required:!0,className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ay,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{value:m.category,onChange:C=>h({...m,category:C.target.value}),required:!0,className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Select category"}),x.map(C=>e.jsx("option",{value:C,children:C},C))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Frequency"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(An,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{value:m.frequency,onChange:C=>h({...m,frequency:C.target.value}),required:!0,className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Next Due Date"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:m.nextDueDate,onChange:C=>h({...m,nextDueDate:C.target.value}),required:!0,className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Start Date (Historical Tracking)",e.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"Optional"})]}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:m.startDate||"",onChange:C=>h({...m,startDate:C.target.value}),className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"When did this expense start?"})]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Set when this expense started to include it in past month trends"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project (Optional)"}),e.jsxs("select",{value:m.projectId||"",onChange:C=>h({...m,projectId:C.target.value||void 0}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"No specific project"}),e.jsx("option",{value:"revenue-tracker",children:" Revenue Tracker (General Business)"}),t.filter(C=>C.name!=="Revenue Tracker").map(C=>e.jsx("option",{value:C.id,children:C.name},C.id))]})]}),e.jsxs("div",{className:"flex items-center h-10 mt-6",children:[e.jsx("input",{type:"checkbox",id:"isActive",checked:m.isActive,onChange:C=>h({...m,isActive:C.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"isActive",className:"ml-2 block text-sm text-gray-900",children:"Active"})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:v,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:d?"Update Expense":"Add Expense"})]})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expense"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Frequency"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Due"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No recurring expenses set up yet"})}):s.map(C=>e.jsxs("tr",{className:`hover:bg-gray-50 ${C.isActive?"":"bg-gray-50"}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.name}),e.jsx("div",{className:"text-sm text-gray-500",children:C.vendor})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",C.amount.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:j(C.frequency)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:Nr(new Date(C.nextDueDate),"MMM d, yyyy")}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:C.category})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:S(C.projectId)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:C.isActive?"Active":"Inactive"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>b(C),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>n(C.id),className:"text-red-600 hover:text-red-900",children:e.jsx(To,{className:"h-4 w-4"})})]})]},C.id))})]})})})]})},lL=({projects:s,budgetItems:t,receipts:r,payments:a,onAddBudgetItem:n,onUpdateBudgetItem:i,onDeleteBudgetItem:o})=>{const[l,d]=p.useState(s[0]?.id||""),[u,m]=p.useState(!1),[h,x]=p.useState({projectId:l,category:"",name:"",budgetedAmount:0,actualAmount:0}),f=["Labor","Materials","Subcontractors","Equipment Rental","Tools","Permits","Office Supplies","Travel","Other"],b=p.useMemo(()=>r.filter(D=>D.projectId===l),[r,l]),v=p.useMemo(()=>a.filter(D=>D.projectId===l),[a,l]),j=p.useMemo(()=>b.reduce((D,_)=>D+_.amount,0),[b]),S=p.useMemo(()=>v.reduce((D,_)=>D+_.amount,0),[v]),C=s.find(D=>D.id===l),B=t.filter(D=>D.projectId===l),F=p.useMemo(()=>{const D=new Map;return b.forEach(_=>{const $=_.category||"Other",k=D.get($)||{total:0,count:0,receipts:[]};D.set($,{total:k.total+_.amount,count:k.count+1,receipts:[...k.receipts,_]})}),Array.from(D.entries()).map(([_,$])=>({category:_,totalActual:$.total,receiptCount:$.count,receipts:$.receipts}))},[b]),Q=B.reduce((D,_)=>(D[_.category]||(D[_.category]={category:_.category,totalBudgeted:0,totalActual:0,itemCount:0}),D[_.category].totalBudgeted+=_.budgetedAmount,D[_.category].totalActual+=_.actualAmount,D[_.category].itemCount+=1,D),{});Object.values(Q).map(D=>{const _=D.totalBudgeted-D.totalActual,$=D.totalBudgeted>0?_/D.totalBudgeted*100:0;return{category:D.category,totalBudgeted:D.totalBudgeted,totalActual:D.totalActual,totalVariance:_,totalVariancePercentage:$,itemCount:D.itemCount}});const q=D=>{D.preventDefault(),n(h),m(!1),x({projectId:l,category:"",name:"",budgetedAmount:0,actualAmount:0})},P=(D,_)=>{const $=Math.min(Math.round(D/_*100),100),k=D>_;return e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:e.jsx("div",{className:`h-2.5 rounded-full ${k?"bg-red-500":"bg-blue-500"}`,style:{width:`${$}%`}})})};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Project Budget Tracker"}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("select",{value:l,onChange:D=>{d(D.target.value),x(_=>({..._,projectId:D.target.value}))},className:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:s.map(D=>e.jsx("option",{value:D.id,children:D.name},D.id))})})]})}),u&&e.jsx("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:e.jsxs("form",{onSubmit:q,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Item Name"}),e.jsx("input",{type:"text",value:h.name,onChange:D=>x({...h,name:D.target.value}),placeholder:"e.g., Framing Labor, Concrete Materials",required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This will be added to the selected category total"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs("select",{value:h.category,onChange:D=>x({...h,category:D.target.value}),required:!0,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"",children:"Select Category"}),f.map(D=>e.jsx("option",{value:D,children:D},D))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Budgeted Amount ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:h.budgetedAmount,onChange:D=>x({...h,budgetedAmount:parseFloat(D.target.value)}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Actual Amount ($)"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:h.actualAmount,onChange:D=>x({...h,actualAmount:parseFloat(D.target.value)}),required:!0,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>m(!1),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Budget Item"})]})]})}),C&&e.jsxs("div",{className:"p-6 border-b border-gray-200 bg-blue-50",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Br,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Budget"})]}),e.jsxs("p",{className:"mt-1 text-2xl font-semibold text-gray-900",children:["$",C.totalBudget.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vl,{className:"h-5 w-5 text-red-400 mr-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Expenses"})]}),e.jsxs("p",{className:"mt-1 text-2xl font-semibold text-red-600",children:["$",j.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[b.length," receipts"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(BC,{className:"h-5 w-5 text-green-400 mr-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Payments Received"})]}),e.jsxs("p",{className:"mt-1 text-2xl font-semibold text-green-600",children:["$",S.toLocaleString()]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[v.length," payments"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(io,{className:"h-5 w-5 text-blue-400 mr-2"}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Net Position"})]}),e.jsxs("p",{className:`mt-1 text-2xl font-semibold ${S-j>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(S-j).toLocaleString()]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S-j>=0?"Profit":"Loss"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Budget Usage: ",C.totalBudget>0?(j/C.totalBudget*100).toFixed(1):0,"%"]}),P(j,C.totalBudget)]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"px-6 py-4 text-md font-semibold text-gray-700",children:"Expenses by Category"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spent"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Receipts"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"% of Budget"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No expenses recorded for this project yet"})}):F.map(D=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:D.category})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["$",D.totalActual.toFixed(2)]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[D.receiptCount," receipt",D.receiptCount!==1?"s":""]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[C&&C.totalBudget>0?(D.totalActual/C.totalBudget*100).toFixed(1):0,"%"]})]},D.category))})]})})]}),C&&C.totalActual>C.totalBudget&&e.jsx("div",{className:"p-4 bg-red-50 border-t border-red-200",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Qa,{className:"h-5 w-5 text-red-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Budget Alert"}),e.jsx("div",{className:"mt-2 text-sm text-red-700",children:e.jsxs("p",{children:["This project is currently $",Math.abs(C.variance).toLocaleString()," (",Math.abs(C.variancePercentage).toFixed(1),"%) over budget. Consider reviewing expenses or adjusting the budget."]})})]})]})})]})},cL=({onGenerateReport:s})=>{const{projects:t}=jA(),[r,a]=p.useState({type:"whole",dateRange:{start:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]},groupBy:"month",format:"pdf",includeCharts:!0}),[n,i]=p.useState(!1),o=()=>{i(!0),setTimeout(()=>{s(r),i(!1)},1500)},l={whole:{title:"Whole Company Report",icon:e.jsx(Lg,{className:"h-5 w-5"}),description:"All expenses from Finance tab",sections:["All Receipts & Expenses","Budget Items & Tracking","Recurring Expenses","Payments & Income","Expense Summary by Category","Project Profitability"]},project:{title:"Project-Based Report",icon:e.jsx(ra,{className:"h-5 w-5"}),description:"Expenses filtered by specific project",sections:["Project Expenses Only","Project Budget vs Actual","Project Profitability","Project Timeline","Project Payments","Project Cost Breakdown"]}};return l[r.type],e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generate Financial Reports"})}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(l).map(([d,u])=>e.jsxs("div",{onClick:()=>a({...r,type:d}),className:`cursor-pointer border rounded-lg p-4 transition-all ${r.type===d?"border-blue-500 bg-blue-50 shadow-md":"border-gray-300 hover:border-blue-300 hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 ${r.type===d?"bg-blue-100":"bg-gray-100"}`,children:u.icon}),e.jsx("h3",{className:"text-base font-medium text-gray-900",children:u.title})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:u.description}),e.jsxs("ul",{className:"space-y-1 text-xs text-gray-700",children:[u.sections.slice(0,3).map((m,h)=>e.jsxs("li",{className:"flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 text-green-500 mr-1.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),m]},h)),e.jsxs("li",{className:"text-gray-500 italic ml-4",children:["...and ",u.sections.length-3," more"]})]})]},d))})]}),r.type==="project"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Project"}),e.jsxs("select",{value:r.projectId||"",onChange:d=>a({...r,projectId:d.target.value}),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"-- Select a Project --"}),t.map(d=>e.jsx("option",{value:d.id,children:d.name},d.id))]}),t.length===0&&e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No projects available. Create a project first."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:r.dateRange.start,onChange:d=>a({...r,dateRange:{...r.dateRange,start:d.target.value}}),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:r.dateRange.end,onChange:d=>a({...r,dateRange:{...r.dateRange,end:d.target.value}}),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{const d=new Date,u=new Date(d.getFullYear(),d.getMonth(),1);a({...r,dateRange:{start:u.toISOString().split("T")[0],end:d.toISOString().split("T")[0]}})},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"This Month"}),e.jsx("button",{type:"button",onClick:()=>{const d=new Date,u=new Date(d);u.setMonth(d.getMonth()-3),a({...r,dateRange:{start:u.toISOString().split("T")[0],end:d.toISOString().split("T")[0]}})},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Last 3 Months"}),e.jsx("button",{type:"button",onClick:()=>{const d=new Date,u=new Date(d.getFullYear(),0,1);a({...r,dateRange:{start:u.toISOString().split("T")[0],end:d.toISOString().split("T")[0]}})},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Year to Date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group By"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(yh,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{value:r.groupBy,onChange:d=>a({...r,groupBy:d.target.value}),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"day",children:"Day"}),e.jsx("option",{value:"week",children:"Week"}),e.jsx("option",{value:"month",children:"Month"}),e.jsx("option",{value:"quarter",children:"Quarter"}),e.jsx("option",{value:"year",children:"Year"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format"}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"format-pdf",name:"format",type:"radio",checked:r.format==="pdf",onChange:()=>a({...r,format:"pdf"}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:"format-pdf",className:"ml-2 block text-sm text-gray-700",children:"PDF (Full Report)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"format-csv",name:"format",type:"radio",checked:r.format==="csv",onChange:()=>a({...r,format:"csv"}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsx("label",{htmlFor:"format-csv",className:"ml-2 block text-sm text-gray-700",children:"CSV (Spreadsheet Data)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"include-charts",name:"include-charts",type:"checkbox",checked:r.includeCharts,onChange:d=>a({...r,includeCharts:d.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"include-charts",className:"ml-2 block text-sm text-gray-700",children:"Include charts and visualizations"})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"button",onClick:o,disabled:n,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx(An,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Rn,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})})]})}),e.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Recently Generated Reports"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ra,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No reports generated yet. Generate your first report using the form above."})]})]})]})},dL=({projects:s,receipts:t,payments:r,recurringExpenses:a})=>{const[n,i]=p.useState("6months"),o=p.useMemo(()=>r.reduce((b,v)=>b+v.amount,0),[r]),l=p.useMemo(()=>a.filter(b=>b.isActive).reduce((b,v)=>{switch(v.frequency){case"weekly":return b+v.amount*4.33;case"monthly":return b+v.amount;case"quarterly":return b+v.amount/3;case"yearly":return b+v.amount/12;default:return b+v.amount}},0),[a]),d=p.useMemo(()=>t.reduce((b,v)=>b+v.amount,0),[t]),u=o-d,m=o>0?u/o*100:0,h=p.useMemo(()=>{const b=new Map;return s.forEach(v=>{b.set(v.id,{name:v.name,revenue:0,expenses:0})}),r.forEach(v=>{const j=b.get(v.projectId);j&&(j.revenue+=v.amount)}),t.forEach(v=>{if(v.projectId){const j=b.get(v.projectId);j&&(j.expenses+=v.amount)}}),Array.from(b.entries()).map(([v,j])=>({id:v,name:j.name,revenue:j.revenue,expenses:j.expenses,profit:j.revenue-j.expenses,margin:j.revenue>0?(j.revenue-j.expenses)/j.revenue*100:0})).filter(v=>v.revenue>0||v.expenses>0).sort((v,j)=>j.revenue-v.revenue)},[s,r,t]),x=p.useMemo(()=>n==="6months"?Df({start:yc(new Date,5),end:new Date}).map(v=>{const j=$m(v),S=Hm(v),C=r.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0),B=t.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0),Q=j>new Date,q=a.filter(P=>{if(!P.isActive)return!1;if(!P.startDate)return Q;const D=new Date(P.startDate);return j>=D}).reduce((P,D)=>{switch(D.frequency){case"weekly":return P+D.amount*4.33;case"monthly":return P+D.amount;case"quarterly":return P+D.amount/3;case"yearly":return P+D.amount/12;default:return P+D.amount}},0);return{period:Nr(v,"MMM yyyy"),revenue:C,expenses:B+q,profit:C-(B+q),isFuture:!1}}):n==="year"?Df({start:yc(new Date,11),end:new Date}).map(v=>{const j=$m(v),S=Hm(v),C=r.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0),B=t.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0),Q=j>new Date,q=a.filter(P=>{if(!P.isActive)return!1;if(!P.startDate)return Q;const D=new Date(P.startDate);return j>=D}).reduce((P,D)=>{switch(D.frequency){case"weekly":return P+D.amount*4.33;case"monthly":return P+D.amount;case"quarterly":return P+D.amount/3;case"yearly":return P+D.amount/12;default:return P+D.amount}},0);return{period:Nr(v,"MMM yyyy"),revenue:C,expenses:B+q,profit:C-(B+q),isFuture:!1}}):n==="2years"?Df({start:yc(new Date,23),end:new Date}).map(v=>{const j=$m(v),S=Hm(v),C=r.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0),B=t.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0),Q=j>new Date,q=a.filter(P=>{if(!P.isActive)return!1;if(!P.startDate)return Q;const D=new Date(P.startDate);return j>=D}).reduce((P,D)=>{switch(D.frequency){case"weekly":return P+D.amount*4.33;case"monthly":return P+D.amount;case"quarterly":return P+D.amount/3;case"yearly":return P+D.amount/12;default:return P+D.amount}},0);return{period:Nr(v,"MMM yyyy"),revenue:C,expenses:B+q,profit:C-(B+q),isFuture:!1}}):n==="forecast"?Df({start:new Date,end:dp(new Date,11)}).map(v=>{const j=$m(v),S=Hm(v),C=new Date,B=S<C,F=j<=C&&S>=C;if(B||F){const Q=r.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0),q=t.filter(P=>{const D=new Date(P.date);return D>=j&&D<=S}).reduce((P,D)=>P+D.amount,0);return{period:Nr(v,"MMM yyyy"),revenue:Q,expenses:q,profit:Q-q,isFuture:!1}}else return{period:Nr(v,"MMM yyyy"),revenue:0,expenses:0,profit:0,isFuture:!0}}):RP({start:sU(new Date),end:new Date}).map(v=>{const j=qm(v),S=HP(v),C=r.filter(F=>{const Q=new Date(F.date);return Q>=j&&Q<=S}).reduce((F,Q)=>F+Q.amount,0),B=t.filter(F=>{const Q=new Date(F.date);return Q>=j&&Q<=S}).reduce((F,Q)=>F+Q.amount,0);return{period:`Q${Math.floor(v.getMonth()/3)+1} ${Nr(v,"yyyy")}`,revenue:C,expenses:B,profit:C-B,isFuture:!1}}),[r,t,n]),f=p.useMemo(()=>{const b=new Map;return t.forEach(v=>{const j=v.category||"Other";b.set(j,(b.get(j)||0)+v.amount)}),Array.from(b.entries()).map(([v,j])=>({category:v,amount:j})).sort((v,j)=>j.amount-v.amount)},[t]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Revenue"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-green-600",children:["$",o.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(BC,{className:"h-6 w-6 text-green-600"})})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[r.length," payments received"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Expenses"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-red-600",children:["$",d.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(vl,{className:"h-6 w-6 text-red-600"})})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[t.length," actual paid expenses"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Net Profit"}),e.jsxs("p",{className:`mt-2 text-3xl font-bold ${u>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(u).toLocaleString()]})]}),e.jsx("div",{className:`p-3 rounded-full ${u>=0?"bg-green-100":"bg-red-100"}`,children:u>=0?e.jsx(io,{className:"h-6 w-6 text-green-600"}):e.jsx(vA,{className:"h-6 w-6 text-red-600"})})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[m>=0?"+":"",m.toFixed(1),"% margin"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Est. Monthly Recurring"}),e.jsxs("p",{className:"mt-2 text-3xl font-bold text-orange-600",children:["$",l.toLocaleString()]})]}),e.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:e.jsx(Fr,{className:"h-6 w-6 text-orange-600"})})]}),e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:[a.filter(b=>b.isActive).length," active (not auto-paid)"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xc,{className:"h-5 w-5 text-gray-500 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Trend"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>i("6months"),className:`px-3 py-1 rounded-md text-sm font-medium ${n==="6months"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"6 Months"}),e.jsx("button",{onClick:()=>i("year"),className:`px-3 py-1 rounded-md text-sm font-medium ${n==="year"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"12 Months"}),e.jsx("button",{onClick:()=>i("2years"),className:`px-3 py-1 rounded-md text-sm font-medium ${n==="2years"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"2 Years"}),e.jsx("button",{onClick:()=>i("quarterly"),className:`px-3 py-1 rounded-md text-sm font-medium ${n==="quarterly"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Quarterly"}),e.jsx("button",{onClick:()=>i("forecast"),className:`px-3 py-1 rounded-md text-sm font-medium ${n==="forecast"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"Next Year"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Expenses"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Profit"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((b,v)=>e.jsxs("tr",{className:`hover:bg-gray-50 ${b.isFuture?"bg-blue-50":""}`,children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[b.period,b.isFuture&&e.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Future"})]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${b.isFuture?"text-gray-400":"text-green-600"}`,children:["$",b.revenue.toLocaleString()]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${b.isFuture?"text-gray-400":"text-red-600"}`,children:["$",b.expenses.toLocaleString()]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right font-medium ${b.isFuture?"text-gray-400":b.profit>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(b.profit).toLocaleString()]})]},v))})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue by Project"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Project"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Revenue"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Expenses"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Profit"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Margin"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-sm text-gray-500",children:"No project revenue data yet"})}):h.map(b=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:b.name}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-green-600",children:["$",b.revenue.toLocaleString()]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right text-red-600",children:["$",b.expenses.toLocaleString()]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right font-medium ${b.profit>=0?"text-green-600":"text-red-600"}`,children:["$",Math.abs(b.profit).toLocaleString()]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-right ${b.margin>=0?"text-green-600":"text-red-600"}`,children:[b.margin.toFixed(1),"%"]})]},b.id))})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Expenses by Category"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:f.length===0?e.jsx("p",{className:"col-span-full text-center text-sm text-gray-500 py-8",children:"No expense data yet"}):f.map(b=>e.jsxs("div",{className:"border rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:b.category}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",b.amount.toLocaleString()]})]}),e.jsx("div",{className:"mt-2 w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${b.amount/d*100}%`}})}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[(b.amount/d*100).toFixed(1),"% of total expenses"]})]},b.category))})]})]})};function uL(){const{invoices:s,fetchInvoices:t,recordInvoicePayment:r,fetchInvoicePayments:a,deleteInvoice:n,isLoading:i}=jA(),[o,l]=p.useState(null),[d,u]=p.useState(""),[m,h]=p.useState(new Date().toISOString().split("T")[0]),[x,f]=p.useState("cash"),[b,v]=p.useState(""),[j,S]=p.useState(""),[C,B]=p.useState([]),[F,Q]=p.useState(null);p.useEffect(()=>{t()},[t]);const q=async $=>{const k=parseFloat(d);if(isNaN(k)||k<=0){alert("Please enter a valid payment amount");return}await r($,{amount:k,paymentDate:m,paymentMethod:x,referenceNumber:b||void 0,notes:j||void 0}),l(null),u(""),h(new Date().toISOString().split("T")[0]),f("cash"),v(""),S("")},P=async $=>{const k=await a($);B(k),Q($)},D=async $=>{window.confirm("Are you sure you want to delete this invoice? This action cannot be undone.")&&await n($)},_=$=>{const k={draft:{color:"bg-gray-100 text-gray-800",icon:ra},sent:{color:"bg-blue-100 text-blue-800",icon:no},outstanding:{color:"bg-yellow-100 text-yellow-800",icon:Qa},partial:{color:"bg-orange-100 text-orange-800",icon:Br},paid:{color:"bg-green-100 text-green-800",icon:un},overdue:{color:"bg-red-100 text-red-800",icon:Qa}},L=k[$]||k.draft,E=L.icon;return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.color}`,children:[e.jsx(E,{className:"w-3 h-3 mr-1"}),$.charAt(0).toUpperCase()+$.slice(1)]})};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Invoice Management"})}),i?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx(ra,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No invoices"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Convert an approved estimate to an invoice to get started."})]}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Invoice #"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Balance"}),e.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map($=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-4 text-sm font-medium text-gray-900",children:$.invoiceNumber||$.id.slice(0,8)}),e.jsx("td",{className:"px-3 py-4",children:_($.status)}),e.jsxs("td",{className:"px-3 py-4 text-sm text-gray-900",children:["$",$.totalAmount.toLocaleString()]}),e.jsxs("td",{className:"px-3 py-4 text-sm font-medium text-orange-600",children:["$",$.balance.toLocaleString()]}),e.jsx("td",{className:"px-2 py-3 text-sm",children:e.jsxs("div",{className:"flex flex-col gap-1.5 min-w-[140px]",children:[$.status!=="paid"&&e.jsx("button",{onClick:()=>l($.id),className:"w-full px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 font-medium",children:"Pay"}),$.paidAmount>0&&e.jsx("button",{onClick:()=>P($.id),className:"w-full px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700",children:"History"}),e.jsx("button",{onClick:()=>D($.id),className:"w-full px-2 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700",children:"Delete"})]})})]},$.id))})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Record Payment"}),(()=>{const $=s.find(k=>k.id===o);return $?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Invoice: ",$.invoiceNumber]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Total: $",$.totalAmount.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Paid: $",$.paidAmount.toLocaleString()]}),e.jsxs("p",{className:"text-sm font-medium text-orange-600",children:["Balance: $",$.balance.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Br,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"number",step:"0.01",value:d,onChange:k=>u(k.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",max:$.balance})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:m,onChange:k=>h(k.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),e.jsxs("select",{value:x,onChange:k=>f(k.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"check",children:"Check"}),e.jsx("option",{value:"credit_card",children:"Credit Card"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reference Number (Optional)"}),e.jsx("input",{type:"text",value:b,onChange:k=>v(k.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Check #, Transaction ID, etc."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),e.jsx("textarea",{value:j,onChange:k=>S(k.target.value),rows:2,className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Payment notes..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{l(null),u(""),h(new Date().toISOString().split("T")[0]),f("cash"),v(""),S("")},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:()=>q(o),className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:"Record Payment"})]})]}):null})()]})}),F&&e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Payment History"}),e.jsx("button",{onClick:()=>Q(null),className:"text-gray-400 hover:text-gray-600",children:""})]}),(()=>{const $=s.find(k=>k.id===F);return $?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-md",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700",children:["Invoice: ",$.invoiceNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Total: $",$.totalAmount.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-green-600",children:["Total Paid: $",$.paidAmount.toLocaleString()]}),e.jsxs("p",{className:"text-sm text-orange-600",children:["Balance: $",$.balance.toLocaleString()]})]}),C.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Method"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Reference"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Notes"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(k=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:new Date(k.paymentDate).toLocaleDateString()}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-green-600",children:["$",k.amount.toLocaleString()]}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 capitalize",children:k.paymentMethod?.replace("_"," ")||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:k.referenceNumber||"-"}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:k.notes||"-"})]},k.id))})]})}):e.jsx("p",{className:"text-center text-gray-500 py-4",children:"No payment history found"}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>Q(null),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Close"})})]}):null})()]})})]})}const AL=()=>{const{t:s}=fr(),[t,r]=p.useState("dashboard"),[a,n]=p.useState(!1),{receipts:i,payments:o,recurringExpenses:l,budgetItems:d,projects:u,clients:m,invoices:h,financialSummary:x,dateRange:f,isLoading:b,error:v,fetchReceipts:j,fetchPayments:S,fetchRecurringExpenses:C,fetchBudgetItems:B,fetchProjects:F,fetchClients:Q,fetchInvoices:q,addReceipt:P,updateReceipt:D,deleteReceipt:_,addPayment:$,updatePayment:k,deletePayment:L,addRecurringExpense:E,updateRecurringExpense:O,deleteRecurringExpense:le,toggleRecurringExpense:te,addBudgetItem:V,updateBudgetItem:M,deleteBudgetItem:ie,setDateRange:K,generateReport:H,predictCashFlow:I,detectAnomalies:ee,suggestCostSavings:se}=jA();p.useEffect(()=>{(async()=>{try{await Promise.all([j(),S(),C(),B(),F(),Q(),q()])}catch(Y){console.error("Error loading finance data:",Y)}})()},[]);const de=ne=>{console.log(`Exporting data in ${ne} format`)},re=ne=>{H(ne)},z=async()=>{await Promise.all([j(),S(),C(),B(),F(),Q(),q()])};return e.jsxs("div",{className:"space-y-4 px-4 sm:px-6 lg:px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s("finance.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s("finance.subtitle")})]}),e.jsxs("button",{onClick:z,disabled:b,className:"inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(An,{className:`h-4 w-4 sm:mr-2 ${b?"animate-spin":""}`}),e.jsx("span",{className:"hidden sm:inline",children:s(b?"finance.syncing":"finance.sync")})]})]}),v&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsxs("strong",{className:"font-bold",children:[s("common.error"),": "]}),e.jsx("span",{className:"block sm:inline",children:v})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"md:hidden border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:e.jsxs("button",{onClick:()=>n(!a),className:"flex items-center space-x-2 text-gray-700 font-medium",children:[e.jsx(IC,{className:"h-5 w-5"}),e.jsx("span",{className:"capitalize",children:t})]})}),a&&e.jsx("div",{className:"md:hidden border-b border-gray-200 bg-gray-50",children:e.jsxs("nav",{className:"px-4 py-2 space-y-1",children:[e.jsxs("button",{onClick:()=>{r("dashboard"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="dashboard"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Lg,{className:"w-4 h-4 mr-3"}),s("finance.dashboard")]}),e.jsxs("button",{onClick:()=>{r("revenue"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="revenue"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Br,{className:"w-4 h-4 mr-3"}),s("finance.revenue")]}),e.jsxs("button",{onClick:()=>{r("expenses"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="expenses"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(vl,{className:"w-4 h-4 mr-3"}),s("finance.expenses")]}),e.jsxs("button",{onClick:()=>{r("payments"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="payments"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Br,{className:"w-4 h-4 mr-3"}),s("finance.payments")]}),e.jsxs("button",{onClick:()=>{r("invoices"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="invoices"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ra,{className:"w-4 h-4 mr-3"}),s("finance.invoices")]}),e.jsxs("button",{onClick:()=>{r("recurring"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="recurring"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Fr,{className:"w-4 h-4 mr-3"}),s("finance.recurring")]}),e.jsxs("button",{onClick:()=>{r("budget"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="budget"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(Br,{className:"w-4 h-4 mr-3"}),s("finance.budget")]}),e.jsxs("button",{onClick:()=>{r("reports"),n(!1)},className:`w-full flex items-center px-3 py-2 rounded-md text-sm font-medium ${t==="reports"?"bg-blue-100 text-blue-700":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(ra,{className:"w-4 h-4 mr-3"}),s("finance.reports")]})]})}),e.jsx("div",{className:"hidden md:block border-b border-gray-200 overflow-x-auto",children:e.jsxs("nav",{className:"flex space-x-4 md:space-x-8 px-4 sm:px-6 min-w-max md:min-w-0","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>r("dashboard"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="dashboard"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Lg,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.dashboard")})]}),e.jsxs("button",{onClick:()=>r("revenue"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="revenue"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Br,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.revenue")})]}),e.jsxs("button",{onClick:()=>r("expenses"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="expenses"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(vl,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.expenses")})]}),e.jsxs("button",{onClick:()=>r("payments"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="payments"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Br,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.payments")})]}),e.jsxs("button",{onClick:()=>r("invoices"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="invoices"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ra,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.invoices")})]}),e.jsxs("button",{onClick:()=>r("recurring"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="recurring"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Fr,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.recurring")})]}),e.jsxs("button",{onClick:()=>r("budget"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="budget"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Br,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.budget")})]}),e.jsxs("button",{onClick:()=>r("reports"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center whitespace-nowrap ${t==="reports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(ra,{className:"w-4 h-4 md:mr-2"}),e.jsx("span",{className:"hidden md:inline",children:s("finance.reports")})]})]})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[t==="dashboard"&&e.jsx(iL,{summary:x,dateRange:f,onChangeDateRange:K,onExport:ne=>de(ne)}),t==="revenue"&&e.jsx(dL,{projects:u,receipts:i,payments:o,recurringExpenses:l}),t==="expenses"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ZU,{onSave:P,projects:u}),e.jsx(rL,{expenses:i,projects:u,onEdit:D,onDelete:_,onExport:de})]}),t==="payments"&&e.jsx(nL,{payments:o,clients:m,projects:u,invoices:h,onAddPayment:$,onEditPayment:k,onDeletePayment:L}),t==="invoices"&&e.jsx("div",{className:"p-6",children:e.jsx(uL,{})}),t==="recurring"&&e.jsx(oL,{expenses:l,projects:u,onAdd:E,onEdit:O,onDelete:le,onToggleActive:te}),t==="budget"&&e.jsx(lL,{projects:u,budgetItems:d,receipts:i,payments:o,onAddBudgetItem:V,onUpdateBudgetItem:M,onDeleteBudgetItem:ie}),t==="reports"&&e.jsx(cL,{onGenerateReport:re})]})]})]})};function Rr(s){"@babel/helpers - typeof";return Rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rr(s)}var lo=Uint8Array,ai=Uint16Array,by=Int32Array,yy=new lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),vy=new lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),B2=new lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pS=function(s,t){for(var r=new ai(31),a=0;a<31;++a)r[a]=t+=1<<s[a-1];for(var n=new by(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)n[i]=i-r[a]<<5|a;return{b:r,r:n}},xS=pS(yy,2),mL=xS.b,db=xS.r;mL[28]=258,db[258]=28;var hL=pS(vy,0),k2=hL.r,ub=new ai(32768);for(var as=0;as<32768;++as){var nc=(as&43690)>>1|(as&21845)<<1;nc=(nc&52428)>>2|(nc&13107)<<2,nc=(nc&61680)>>4|(nc&3855)<<4,ub[as]=((nc&65280)>>8|(nc&255)<<8)>>1}var rh=(function(s,t,r){for(var a=s.length,n=0,i=new ai(t);n<a;++n)s[n]&&++i[s[n]-1];var o=new ai(t);for(n=1;n<t;++n)o[n]=o[n-1]+i[n-1]<<1;var l;if(r){l=new ai(1<<t);var d=15-t;for(n=0;n<a;++n)if(s[n])for(var u=n<<4|s[n],m=t-s[n],h=o[s[n]-1]++<<m,x=h|(1<<m)-1;h<=x;++h)l[ub[h]>>d]=u}else for(l=new ai(a),n=0;n<a;++n)s[n]&&(l[n]=ub[o[s[n]-1]++]>>15-s[n]);return l}),Rd=new lo(288);for(var as=0;as<144;++as)Rd[as]=8;for(var as=144;as<256;++as)Rd[as]=9;for(var as=256;as<280;++as)Rd[as]=7;for(var as=280;as<288;++as)Rd[as]=8;var Hg=new lo(32);for(var as=0;as<32;++as)Hg[as]=5;var fL=rh(Rd,9,0),gL=rh(Hg,5,0),bS=function(s){return(s+7)/8|0},pL=function(s,t,r){return(r==null||r>s.length)&&(r=s.length),new lo(s.subarray(t,r))},ml=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8},dm=function(s,t,r){r<<=t&7;var a=t/8|0;s[a]|=r,s[a+1]|=r>>8,s[a+2]|=r>>16},L0=function(s,t){for(var r=[],a=0;a<s.length;++a)s[a]&&r.push({s:a,f:s[a]});var n=r.length,i=r.slice();if(!n)return{t:vS,l:0};if(n==1){var o=new lo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(Q,q){return Q.f-q.f}),r.push({s:-1,f:25001});var l=r[0],d=r[1],u=0,m=1,h=2;for(r[0]={s:-1,f:l.f+d.f,l,r:d};m!=n-1;)l=r[r[u].f<r[h].f?u++:h++],d=r[u!=m&&r[u].f<r[h].f?u++:h++],r[m++]={s:-1,f:l.f+d.f,l,r:d};for(var x=i[0].s,a=1;a<n;++a)i[a].s>x&&(x=i[a].s);var f=new ai(x+1),b=Ab(r[m-1],f,0);if(b>t){var a=0,v=0,j=b-t,S=1<<j;for(i.sort(function(q,P){return f[P.s]-f[q.s]||q.f-P.f});a<n;++a){var C=i[a].s;if(f[C]>t)v+=S-(1<<b-f[C]),f[C]=t;else break}for(v>>=j;v>0;){var B=i[a].s;f[B]<t?v-=1<<t-f[B]++-1:++a}for(;a>=0&&v;--a){var F=i[a].s;f[F]==t&&(--f[F],++v)}b=t}return{t:new lo(f),l:b}},Ab=function(s,t,r){return s.s==-1?Math.max(Ab(s.l,t,r+1),Ab(s.r,t,r+1)):t[s.s]=r},F2=function(s){for(var t=s.length;t&&!s[--t];);for(var r=new ai(++t),a=0,n=s[0],i=1,o=function(d){r[a++]=d},l=1;l<=t;++l)if(s[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=s[l]}return{c:r.subarray(0,a),n:t}},um=function(s,t){for(var r=0,a=0;a<t.length;++a)r+=s[a]*t[a];return r},yS=function(s,t,r){var a=r.length,n=bS(t+2);s[n]=a&255,s[n+1]=a>>8,s[n+2]=s[n]^255,s[n+3]=s[n+1]^255;for(var i=0;i<a;++i)s[n+i+4]=r[i];return(n+4+a)*8},E2=function(s,t,r,a,n,i,o,l,d,u,m){ml(t,m++,r),++n[256];for(var h=L0(n,15),x=h.t,f=h.l,b=L0(i,15),v=b.t,j=b.l,S=F2(x),C=S.c,B=S.n,F=F2(v),Q=F.c,q=F.n,P=new ai(19),D=0;D<C.length;++D)++P[C[D]&31];for(var D=0;D<Q.length;++D)++P[Q[D]&31];for(var _=L0(P,7),$=_.t,k=_.l,L=19;L>4&&!$[B2[L-1]];--L);var E=u+5<<3,O=um(n,Rd)+um(i,Hg)+o,le=um(n,x)+um(i,v)+o+14+3*L+um(P,$)+2*P[16]+3*P[17]+7*P[18];if(d>=0&&E<=O&&E<=le)return yS(t,m,s.subarray(d,d+u));var te,V,M,ie;if(ml(t,m,1+(le<O)),m+=2,le<O){te=rh(x,f,0),V=x,M=rh(v,j,0),ie=v;var K=rh($,k,0);ml(t,m,B-257),ml(t,m+5,q-1),ml(t,m+10,L-4),m+=14;for(var D=0;D<L;++D)ml(t,m+3*D,$[B2[D]]);m+=3*L;for(var H=[C,Q],I=0;I<2;++I)for(var ee=H[I],D=0;D<ee.length;++D){var se=ee[D]&31;ml(t,m,K[se]),m+=$[se],se>15&&(ml(t,m,ee[D]>>5&127),m+=ee[D]>>12)}}else te=fL,V=Rd,M=gL,ie=Hg;for(var D=0;D<l;++D){var de=a[D];if(de>255){var se=de>>18&31;dm(t,m,te[se+257]),m+=V[se+257],se>7&&(ml(t,m,de>>23&31),m+=yy[se]);var re=de&31;dm(t,m,M[re]),m+=ie[re],re>3&&(dm(t,m,de>>5&8191),m+=vy[re])}else dm(t,m,te[de]),m+=V[de]}return dm(t,m,te[256]),m+V[256]},xL=new by([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),vS=new lo(0),bL=function(s,t,r,a,n,i){var o=i.z||s.length,l=new lo(a+o+5*(1+Math.ceil(o/7e3))+n),d=l.subarray(a,l.length-n),u=i.l,m=(i.r||0)&7;if(t){m&&(d[0]=i.r>>3);for(var h=xL[t-1],x=h>>13,f=h&8191,b=(1<<r)-1,v=i.p||new ai(32768),j=i.h||new ai(b+1),S=Math.ceil(r/3),C=2*S,B=function(je){return(s[je]^s[je+1]<<S^s[je+2]<<C)&b},F=new by(25e3),Q=new ai(288),q=new ai(32),P=0,D=0,_=i.i||0,$=0,k=i.w||0,L=0;_+2<o;++_){var E=B(_),O=_&32767,le=j[E];if(v[O]=le,j[E]=O,k<=_){var te=o-_;if((P>7e3||$>24576)&&(te>423||!u)){m=E2(s,d,0,F,Q,q,D,$,L,_-L,m),$=P=D=0,L=_;for(var V=0;V<286;++V)Q[V]=0;for(var V=0;V<30;++V)q[V]=0}var M=2,ie=0,K=f,H=O-le&32767;if(te>2&&E==B(_-H))for(var I=Math.min(x,te)-1,ee=Math.min(32767,_),se=Math.min(258,te);H<=ee&&--K&&O!=le;){if(s[_+M]==s[_+M-H]){for(var de=0;de<se&&s[_+de]==s[_+de-H];++de);if(de>M){if(M=de,ie=H,de>I)break;for(var re=Math.min(H,de-2),z=0,V=0;V<re;++V){var ne=_-H+V&32767,Y=v[ne],X=ne-Y&32767;X>z&&(z=X,le=ne)}}}O=le,le=v[O],H+=O-le&32767}if(ie){F[$++]=268435456|db[M]<<18|k2[ie];var ye=db[M]&31,pe=k2[ie]&31;D+=yy[ye]+vy[pe],++Q[257+ye],++q[pe],k=_+M,++P}else F[$++]=s[_],++Q[s[_]]}}for(_=Math.max(_,k);_<o;++_)F[$++]=s[_],++Q[s[_]];m=E2(s,d,u,F,Q,q,D,$,L,_-L,m),u||(i.r=m&7|d[m/8|0]<<3,m-=7,i.h=j,i.p=v,i.i=_,i.w=k)}else{for(var _=i.w||0;_<o+u;_+=65535){var Ce=_+65535;Ce>=o&&(d[m/8|0]=u,Ce=o),m=yS(d,m+1,s.subarray(_,Ce))}i.i=o}return pL(l,0,a+bS(m)+n)},wS=function(){var s=1,t=0;return{p:function(r){for(var a=s,n=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)n+=a+=r[o];a=(a&65535)+15*(a>>16),n=(n&65535)+15*(n>>16)}s=a,t=n},d:function(){return s%=65521,t%=65521,(s&255)<<24|(s&65280)<<8|(t&255)<<8|t>>8}}},yL=function(s,t,r,a,n){if(!n&&(n={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new lo(i.length+s.length);o.set(i),o.set(s,i.length),s=o,n.w=i.length}return bL(s,t.level==null?6:t.level,t.mem==null?n.l?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):20:12+t.mem,r,a,n)},jS=function(s,t,r){for(;r;++t)s[t]=r,r>>>=8},vL=function(s,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(s[0]=120,s[1]=a<<6|(t.dictionary&&32),s[1]|=31-(s[0]<<8|s[1])%31,t.dictionary){var n=wS();n.p(t.dictionary),jS(s,2,n.d())}};function mb(s,t){t||(t={});var r=wS();r.p(s);var a=yL(s,t,t.dictionary?6:2,4);return vL(a,t),jS(a,a.length-4,r.d()),a}var wL=typeof TextDecoder<"u"&&new TextDecoder,jL=0;try{wL.decode(vS,{stream:!0}),jL=1}catch{}function NL(s){if(Array.isArray(s))return s}function CL(s,t){var r=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(r!=null){var a,n,i,o,l=[],d=!0,u=!1;try{if(i=(r=r.call(s)).next,t!==0)for(;!(d=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);d=!0);}catch(m){u=!0,n=m}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw n}}return l}}function _2(s,t){(t==null||t>s.length)&&(t=s.length);for(var r=0,a=Array(t);r<t;r++)a[r]=s[r];return a}function SL(s,t){if(s){if(typeof s=="string")return _2(s,t);var r={}.toString.call(s).slice(8,-1);return r==="Object"&&s.constructor&&(r=s.constructor.name),r==="Map"||r==="Set"?Array.from(s):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_2(s,t):void 0}}function BL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P2(s,t){return NL(s)||CL(s,t)||SL(s,t)||BL()}function I2(s,t="utf8"){return new TextDecoder(t).decode(s)}const kL=new TextEncoder;function FL(s){return kL.encode(s)}const EL=1024*8,_L=(()=>{const s=new Uint8Array(4),t=new Uint32Array(s.buffer);return!((t[0]=1)&s[0])})(),T0={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class wy{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=EL,r={}){let a=!1;typeof t=="number"?t=new ArrayBuffer(t):(a=!0,this.lastWrittenByte=t.byteLength);const n=r.offset?r.offset>>>0:0,i=t.byteLength-n;let o=n;(ArrayBuffer.isView(t)||t instanceof wy)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+n),t=t.buffer),a?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const a=(this.offset+t)*2,n=new Uint8Array(a);n.set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const a=T0[r].BYTES_PER_ELEMENT*t,n=this.byteOffset+this.offset,i=this.buffer.slice(n,n+a);if(this.littleEndian===_L&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(n,n+a));l.reverse();const d=new T0[r](l.buffer);return this.offset+=a,d.reverse(),d}const o=new T0[r](i);return this.offset+=a,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let a=0;a<t;a++)r+=this.readChar();return r}readUtf8(t=1){return I2(this.readBytes(t))}decodeText(t=1,r="utf8"){return I2(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(FL(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function NA(s){let t=s.length;for(;--t>=0;)s[t]=0}const PL=3,IL=258,NS=29,UL=256,LL=UL+1+NS,CS=30,TL=512,DL=new Array((LL+2)*2);NA(DL);const ML=new Array(CS*2);NA(ML);const RL=new Array(TL);NA(RL);const QL=new Array(IL-PL+1);NA(QL);const OL=new Array(NS);NA(OL);const HL=new Array(CS);NA(HL);const qL=(s,t,r,a)=>{let n=s&65535|0,i=s>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do n=n+t[a++]|0,i=i+n|0;while(--o);n%=65521,i%=65521}return n|i<<16|0};var hb=qL;const $L=()=>{let s,t=[];for(var r=0;r<256;r++){s=r;for(var a=0;a<8;a++)s=s&1?3988292384^s>>>1:s>>>1;t[r]=s}return t},WL=new Uint32Array($L()),KL=(s,t,r,a)=>{const n=WL,i=a+r;s^=-1;for(let o=a;o<i;o++)s=s>>>8^n[(s^t[o])&255];return s^-1};var Fo=KL,fb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},SS={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const zL=(s,t)=>Object.prototype.hasOwnProperty.call(s,t);var GL=function(s){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const a in r)zL(r,a)&&(s[a]=r[a])}}return s},VL=s=>{let t=0;for(let a=0,n=s.length;a<n;a++)t+=s[a].length;const r=new Uint8Array(t);for(let a=0,n=0,i=s.length;a<i;a++){let o=s[a];r.set(o,n),n+=o.length}return r},BS={assign:GL,flattenChunks:VL};let kS=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{kS=!1}const Nh=new Uint8Array(256);for(let s=0;s<256;s++)Nh[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;Nh[254]=Nh[254]=1;var YL=s=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(s);let t,r,a,n,i,o=s.length,l=0;for(n=0;n<o;n++)r=s.charCodeAt(n),(r&64512)===55296&&n+1<o&&(a=s.charCodeAt(n+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),n++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,n=0;i<l;n++)r=s.charCodeAt(n),(r&64512)===55296&&n+1<o&&(a=s.charCodeAt(n+1),(a&64512)===56320&&(r=65536+(r-55296<<10)+(a-56320),n++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const JL=(s,t)=>{if(t<65534&&s.subarray&&kS)return String.fromCharCode.apply(null,s.length===t?s:s.subarray(0,t));let r="";for(let a=0;a<t;a++)r+=String.fromCharCode(s[a]);return r};var XL=(s,t)=>{const r=t||s.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(s.subarray(0,t));let a,n;const i=new Array(r*2);for(n=0,a=0;a<r;){let o=s[a++];if(o<128){i[n++]=o;continue}let l=Nh[o];if(l>4){i[n++]=65533,a+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&a<r;)o=o<<6|s[a++]&63,l--;if(l>1){i[n++]=65533;continue}o<65536?i[n++]=o:(o-=65536,i[n++]=55296|o>>10&1023,i[n++]=56320|o&1023)}return JL(i,n)},ZL=(s,t)=>{t=t||s.length,t>s.length&&(t=s.length);let r=t-1;for(;r>=0&&(s[r]&192)===128;)r--;return r<0||r===0?t:r+Nh[s[r]]>t?r:t},gb={string2buf:YL,buf2string:XL,utf8border:ZL};function eT(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var tT=eT;const Of=16209,rT=16191;var sT=function(t,r){let a,n,i,o,l,d,u,m,h,x,f,b,v,j,S,C,B,F,Q,q,P,D,_,$;const k=t.state;a=t.next_in,_=t.input,n=a+(t.avail_in-5),i=t.next_out,$=t.output,o=i-(r-t.avail_out),l=i+(t.avail_out-257),d=k.dmax,u=k.wsize,m=k.whave,h=k.wnext,x=k.window,f=k.hold,b=k.bits,v=k.lencode,j=k.distcode,S=(1<<k.lenbits)-1,C=(1<<k.distbits)-1;e:do{b<15&&(f+=_[a++]<<b,b+=8,f+=_[a++]<<b,b+=8),B=v[f&S];t:for(;;){if(F=B>>>24,f>>>=F,b-=F,F=B>>>16&255,F===0)$[i++]=B&65535;else if(F&16){Q=B&65535,F&=15,F&&(b<F&&(f+=_[a++]<<b,b+=8),Q+=f&(1<<F)-1,f>>>=F,b-=F),b<15&&(f+=_[a++]<<b,b+=8,f+=_[a++]<<b,b+=8),B=j[f&C];r:for(;;){if(F=B>>>24,f>>>=F,b-=F,F=B>>>16&255,F&16){if(q=B&65535,F&=15,b<F&&(f+=_[a++]<<b,b+=8,b<F&&(f+=_[a++]<<b,b+=8)),q+=f&(1<<F)-1,q>d){t.msg="invalid distance too far back",k.mode=Of;break e}if(f>>>=F,b-=F,F=i-o,q>F){if(F=q-F,F>m&&k.sane){t.msg="invalid distance too far back",k.mode=Of;break e}if(P=0,D=x,h===0){if(P+=u-F,F<Q){Q-=F;do $[i++]=x[P++];while(--F);P=i-q,D=$}}else if(h<F){if(P+=u+h-F,F-=h,F<Q){Q-=F;do $[i++]=x[P++];while(--F);if(P=0,h<Q){F=h,Q-=F;do $[i++]=x[P++];while(--F);P=i-q,D=$}}}else if(P+=h-F,F<Q){Q-=F;do $[i++]=x[P++];while(--F);P=i-q,D=$}for(;Q>2;)$[i++]=D[P++],$[i++]=D[P++],$[i++]=D[P++],Q-=3;Q&&($[i++]=D[P++],Q>1&&($[i++]=D[P++]))}else{P=i-q;do $[i++]=$[P++],$[i++]=$[P++],$[i++]=$[P++],Q-=3;while(Q>2);Q&&($[i++]=$[P++],Q>1&&($[i++]=$[P++]))}}else if((F&64)===0){B=j[(B&65535)+(f&(1<<F)-1)];continue r}else{t.msg="invalid distance code",k.mode=Of;break e}break}}else if((F&64)===0){B=v[(B&65535)+(f&(1<<F)-1)];continue t}else if(F&32){k.mode=rT;break e}else{t.msg="invalid literal/length code",k.mode=Of;break e}break}}while(a<n&&i<l);Q=b>>3,a-=Q,b-=Q<<3,f&=(1<<b)-1,t.next_in=a,t.next_out=i,t.avail_in=a<n?5+(n-a):5-(a-n),t.avail_out=i<l?257+(l-i):257-(i-l),k.hold=f,k.bits=b};const Ou=15,U2=852,L2=592,T2=0,D0=1,D2=2,aT=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nT=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iT=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),oT=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),lT=(s,t,r,a,n,i,o,l)=>{const d=l.bits;let u=0,m=0,h=0,x=0,f=0,b=0,v=0,j=0,S=0,C=0,B,F,Q,q,P,D=null,_;const $=new Uint16Array(Ou+1),k=new Uint16Array(Ou+1);let L=null,E,O,le;for(u=0;u<=Ou;u++)$[u]=0;for(m=0;m<a;m++)$[t[r+m]]++;for(f=d,x=Ou;x>=1&&$[x]===0;x--);if(f>x&&(f=x),x===0)return n[i++]=1<<24|64<<16|0,n[i++]=1<<24|64<<16|0,l.bits=1,0;for(h=1;h<x&&$[h]===0;h++);for(f<h&&(f=h),j=1,u=1;u<=Ou;u++)if(j<<=1,j-=$[u],j<0)return-1;if(j>0&&(s===T2||x!==1))return-1;for(k[1]=0,u=1;u<Ou;u++)k[u+1]=k[u]+$[u];for(m=0;m<a;m++)t[r+m]!==0&&(o[k[t[r+m]]++]=m);if(s===T2?(D=L=o,_=20):s===D0?(D=aT,L=nT,_=257):(D=iT,L=oT,_=0),C=0,m=0,u=h,P=i,b=f,v=0,Q=-1,S=1<<f,q=S-1,s===D0&&S>U2||s===D2&&S>L2)return 1;for(;;){E=u-v,o[m]+1<_?(O=0,le=o[m]):o[m]>=_?(O=L[o[m]-_],le=D[o[m]-_]):(O=96,le=0),B=1<<u-v,F=1<<b,h=F;do F-=B,n[P+(C>>v)+F]=E<<24|O<<16|le|0;while(F!==0);for(B=1<<u-1;C&B;)B>>=1;if(B!==0?(C&=B-1,C+=B):C=0,m++,--$[u]===0){if(u===x)break;u=t[r+o[m]]}if(u>f&&(C&q)!==Q){for(v===0&&(v=f),P+=h,b=u-v,j=1<<b;b+v<x&&(j-=$[b+v],!(j<=0));)b++,j<<=1;if(S+=1<<b,s===D0&&S>U2||s===D2&&S>L2)return 1;Q=C&q,n[Q]=f<<24|b<<16|P-i|0}}return C!==0&&(n[P+C]=u-v<<24|64<<16|0),l.bits=f,0};var sh=lT;const cT=0,FS=1,ES=2,{Z_FINISH:M2,Z_BLOCK:dT,Z_TREES:Hf,Z_OK:Qd,Z_STREAM_END:uT,Z_NEED_DICT:AT,Z_STREAM_ERROR:Ei,Z_DATA_ERROR:_S,Z_MEM_ERROR:PS,Z_BUF_ERROR:mT,Z_DEFLATED:R2}=SS,up=16180,Q2=16181,O2=16182,H2=16183,q2=16184,$2=16185,W2=16186,K2=16187,z2=16188,G2=16189,qg=16190,hl=16191,M0=16192,V2=16193,R0=16194,Y2=16195,J2=16196,X2=16197,Z2=16198,qf=16199,$f=16200,e1=16201,t1=16202,r1=16203,s1=16204,a1=16205,Q0=16206,n1=16207,i1=16208,us=16209,IS=16210,US=16211,hT=852,fT=592,gT=15,pT=gT,o1=s=>(s>>>24&255)+(s>>>8&65280)+((s&65280)<<8)+((s&255)<<24);function xT(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qd=s=>{if(!s)return 1;const t=s.state;return!t||t.strm!==s||t.mode<up||t.mode>US?1:0},LS=s=>{if(qd(s))return Ei;const t=s.state;return s.total_in=s.total_out=t.total=0,s.msg="",t.wrap&&(s.adler=t.wrap&1),t.mode=up,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(hT),t.distcode=t.distdyn=new Int32Array(fT),t.sane=1,t.back=-1,Qd},TS=s=>{if(qd(s))return Ei;const t=s.state;return t.wsize=0,t.whave=0,t.wnext=0,LS(s)},DS=(s,t)=>{let r;if(qd(s))return Ei;const a=s.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ei:(a.window!==null&&a.wbits!==t&&(a.window=null),a.wrap=r,a.wbits=t,TS(s))},MS=(s,t)=>{if(!s)return Ei;const r=new xT;s.state=r,r.strm=s,r.window=null,r.mode=up;const a=DS(s,t);return a!==Qd&&(s.state=null),a},bT=s=>MS(s,pT);let l1=!0,O0,H0;const yT=s=>{if(l1){O0=new Int32Array(512),H0=new Int32Array(32);let t=0;for(;t<144;)s.lens[t++]=8;for(;t<256;)s.lens[t++]=9;for(;t<280;)s.lens[t++]=7;for(;t<288;)s.lens[t++]=8;for(sh(FS,s.lens,0,288,O0,0,s.work,{bits:9}),t=0;t<32;)s.lens[t++]=5;sh(ES,s.lens,0,32,H0,0,s.work,{bits:5}),l1=!1}s.lencode=O0,s.lenbits=9,s.distcode=H0,s.distbits=5},RS=(s,t,r,a)=>{let n;const i=s.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),a>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(n=i.wsize-i.wnext,n>a&&(n=a),i.window.set(t.subarray(r-a,r-a+n),i.wnext),a-=n,a?(i.window.set(t.subarray(r-a,r),0),i.wnext=a,i.whave=i.wsize):(i.wnext+=n,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=n))),0},vT=(s,t)=>{let r,a,n,i,o,l,d,u,m,h,x,f,b,v,j=0,S,C,B,F,Q,q,P,D;const _=new Uint8Array(4);let $,k;const L=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qd(s)||!s.output||!s.input&&s.avail_in!==0)return Ei;r=s.state,r.mode===hl&&(r.mode=M0),o=s.next_out,n=s.output,d=s.avail_out,i=s.next_in,a=s.input,l=s.avail_in,u=r.hold,m=r.bits,h=l,x=d,D=Qd;e:for(;;)switch(r.mode){case up:if(r.wrap===0){r.mode=M0;break}for(;m<16;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,_[0]=u&255,_[1]=u>>>8&255,r.check=Fo(r.check,_,2,0),u=0,m=0,r.mode=Q2;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){s.msg="incorrect header check",r.mode=us;break}if((u&15)!==R2){s.msg="unknown compression method",r.mode=us;break}if(u>>>=4,m-=4,P=(u&15)+8,r.wbits===0&&(r.wbits=P),P>15||P>r.wbits){s.msg="invalid window size",r.mode=us;break}r.dmax=1<<r.wbits,r.flags=0,s.adler=r.check=1,r.mode=u&512?G2:hl,u=0,m=0;break;case Q2:for(;m<16;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(r.flags=u,(r.flags&255)!==R2){s.msg="unknown compression method",r.mode=us;break}if(r.flags&57344){s.msg="unknown header flags set",r.mode=us;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(_[0]=u&255,_[1]=u>>>8&255,r.check=Fo(r.check,_,2,0)),u=0,m=0,r.mode=O2;case O2:for(;m<32;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(_[0]=u&255,_[1]=u>>>8&255,_[2]=u>>>16&255,_[3]=u>>>24&255,r.check=Fo(r.check,_,4,0)),u=0,m=0,r.mode=H2;case H2:for(;m<16;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(_[0]=u&255,_[1]=u>>>8&255,r.check=Fo(r.check,_,2,0)),u=0,m=0,r.mode=q2;case q2:if(r.flags&1024){for(;m<16;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(_[0]=u&255,_[1]=u>>>8&255,r.check=Fo(r.check,_,2,0)),u=0,m=0}else r.head&&(r.head.extra=null);r.mode=$2;case $2:if(r.flags&1024&&(f=r.length,f>l&&(f=l),f&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(a.subarray(i,i+f),P)),r.flags&512&&r.wrap&4&&(r.check=Fo(r.check,a,f,i)),l-=f,i+=f,r.length-=f),r.length))break e;r.length=0,r.mode=W2;case W2:if(r.flags&2048){if(l===0)break e;f=0;do P=a[i+f++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P));while(P&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Fo(r.check,a,f,i)),l-=f,i+=f,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=K2;case K2:if(r.flags&4096){if(l===0)break e;f=0;do P=a[i+f++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P));while(P&&f<l);if(r.flags&512&&r.wrap&4&&(r.check=Fo(r.check,a,f,i)),l-=f,i+=f,P)break e}else r.head&&(r.head.comment=null);r.mode=z2;case z2:if(r.flags&512){for(;m<16;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(r.wrap&4&&u!==(r.check&65535)){s.msg="header crc mismatch",r.mode=us;break}u=0,m=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),s.adler=r.check=0,r.mode=hl;break;case G2:for(;m<32;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}s.adler=r.check=o1(u),u=0,m=0,r.mode=qg;case qg:if(r.havedict===0)return s.next_out=o,s.avail_out=d,s.next_in=i,s.avail_in=l,r.hold=u,r.bits=m,AT;s.adler=r.check=1,r.mode=hl;case hl:if(t===dT||t===Hf)break e;case M0:if(r.last){u>>>=m&7,m-=m&7,r.mode=Q0;break}for(;m<3;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}switch(r.last=u&1,u>>>=1,m-=1,u&3){case 0:r.mode=V2;break;case 1:if(yT(r),r.mode=qf,t===Hf){u>>>=2,m-=2;break e}break;case 2:r.mode=J2;break;case 3:s.msg="invalid block type",r.mode=us}u>>>=2,m-=2;break;case V2:for(u>>>=m&7,m-=m&7;m<32;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if((u&65535)!==(u>>>16^65535)){s.msg="invalid stored block lengths",r.mode=us;break}if(r.length=u&65535,u=0,m=0,r.mode=R0,t===Hf)break e;case R0:r.mode=Y2;case Y2:if(f=r.length,f){if(f>l&&(f=l),f>d&&(f=d),f===0)break e;n.set(a.subarray(i,i+f),o),l-=f,i+=f,d-=f,o+=f,r.length-=f;break}r.mode=hl;break;case J2:for(;m<14;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(r.nlen=(u&31)+257,u>>>=5,m-=5,r.ndist=(u&31)+1,u>>>=5,m-=5,r.ncode=(u&15)+4,u>>>=4,m-=4,r.nlen>286||r.ndist>30){s.msg="too many length or distance symbols",r.mode=us;break}r.have=0,r.mode=X2;case X2:for(;r.have<r.ncode;){for(;m<3;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}r.lens[L[r.have++]]=u&7,u>>>=3,m-=3}for(;r.have<19;)r.lens[L[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,$={bits:r.lenbits},D=sh(cT,r.lens,0,19,r.lencode,0,r.work,$),r.lenbits=$.bits,D){s.msg="invalid code lengths set",r.mode=us;break}r.have=0,r.mode=Z2;case Z2:for(;r.have<r.nlen+r.ndist;){for(;j=r.lencode[u&(1<<r.lenbits)-1],S=j>>>24,C=j>>>16&255,B=j&65535,!(S<=m);){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(B<16)u>>>=S,m-=S,r.lens[r.have++]=B;else{if(B===16){for(k=S+2;m<k;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(u>>>=S,m-=S,r.have===0){s.msg="invalid bit length repeat",r.mode=us;break}P=r.lens[r.have-1],f=3+(u&3),u>>>=2,m-=2}else if(B===17){for(k=S+3;m<k;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}u>>>=S,m-=S,P=0,f=3+(u&7),u>>>=3,m-=3}else{for(k=S+7;m<k;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}u>>>=S,m-=S,P=0,f=11+(u&127),u>>>=7,m-=7}if(r.have+f>r.nlen+r.ndist){s.msg="invalid bit length repeat",r.mode=us;break}for(;f--;)r.lens[r.have++]=P}}if(r.mode===us)break;if(r.lens[256]===0){s.msg="invalid code -- missing end-of-block",r.mode=us;break}if(r.lenbits=9,$={bits:r.lenbits},D=sh(FS,r.lens,0,r.nlen,r.lencode,0,r.work,$),r.lenbits=$.bits,D){s.msg="invalid literal/lengths set",r.mode=us;break}if(r.distbits=6,r.distcode=r.distdyn,$={bits:r.distbits},D=sh(ES,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,$),r.distbits=$.bits,D){s.msg="invalid distances set",r.mode=us;break}if(r.mode=qf,t===Hf)break e;case qf:r.mode=$f;case $f:if(l>=6&&d>=258){s.next_out=o,s.avail_out=d,s.next_in=i,s.avail_in=l,r.hold=u,r.bits=m,sT(s,x),o=s.next_out,n=s.output,d=s.avail_out,i=s.next_in,a=s.input,l=s.avail_in,u=r.hold,m=r.bits,r.mode===hl&&(r.back=-1);break}for(r.back=0;j=r.lencode[u&(1<<r.lenbits)-1],S=j>>>24,C=j>>>16&255,B=j&65535,!(S<=m);){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(C&&(C&240)===0){for(F=S,Q=C,q=B;j=r.lencode[q+((u&(1<<F+Q)-1)>>F)],S=j>>>24,C=j>>>16&255,B=j&65535,!(F+S<=m);){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}u>>>=F,m-=F,r.back+=F}if(u>>>=S,m-=S,r.back+=S,r.length=B,C===0){r.mode=a1;break}if(C&32){r.back=-1,r.mode=hl;break}if(C&64){s.msg="invalid literal/length code",r.mode=us;break}r.extra=C&15,r.mode=e1;case e1:if(r.extra){for(k=r.extra;m<k;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,m-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=t1;case t1:for(;j=r.distcode[u&(1<<r.distbits)-1],S=j>>>24,C=j>>>16&255,B=j&65535,!(S<=m);){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if((C&240)===0){for(F=S,Q=C,q=B;j=r.distcode[q+((u&(1<<F+Q)-1)>>F)],S=j>>>24,C=j>>>16&255,B=j&65535,!(F+S<=m);){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}u>>>=F,m-=F,r.back+=F}if(u>>>=S,m-=S,r.back+=S,C&64){s.msg="invalid distance code",r.mode=us;break}r.offset=B,r.extra=C&15,r.mode=r1;case r1:if(r.extra){for(k=r.extra;m<k;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,m-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){s.msg="invalid distance too far back",r.mode=us;break}r.mode=s1;case s1:if(d===0)break e;if(f=x-d,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){s.msg="invalid distance too far back",r.mode=us;break}f>r.wnext?(f-=r.wnext,b=r.wsize-f):b=r.wnext-f,f>r.length&&(f=r.length),v=r.window}else v=n,b=o-r.offset,f=r.length;f>d&&(f=d),d-=f,r.length-=f;do n[o++]=v[b++];while(--f);r.length===0&&(r.mode=$f);break;case a1:if(d===0)break e;n[o++]=r.length,d--,r.mode=$f;break;case Q0:if(r.wrap){for(;m<32;){if(l===0)break e;l--,u|=a[i++]<<m,m+=8}if(x-=d,s.total_out+=x,r.total+=x,r.wrap&4&&x&&(s.adler=r.check=r.flags?Fo(r.check,n,x,o-x):hb(r.check,n,x,o-x)),x=d,r.wrap&4&&(r.flags?u:o1(u))!==r.check){s.msg="incorrect data check",r.mode=us;break}u=0,m=0}r.mode=n1;case n1:if(r.wrap&&r.flags){for(;m<32;){if(l===0)break e;l--,u+=a[i++]<<m,m+=8}if(r.wrap&4&&u!==(r.total&4294967295)){s.msg="incorrect length check",r.mode=us;break}u=0,m=0}r.mode=i1;case i1:D=uT;break e;case us:D=_S;break e;case IS:return PS;case US:default:return Ei}return s.next_out=o,s.avail_out=d,s.next_in=i,s.avail_in=l,r.hold=u,r.bits=m,(r.wsize||x!==s.avail_out&&r.mode<us&&(r.mode<Q0||t!==M2))&&RS(s,s.output,s.next_out,x-s.avail_out),h-=s.avail_in,x-=s.avail_out,s.total_in+=h,s.total_out+=x,r.total+=x,r.wrap&4&&x&&(s.adler=r.check=r.flags?Fo(r.check,n,x,s.next_out-x):hb(r.check,n,x,s.next_out-x)),s.data_type=r.bits+(r.last?64:0)+(r.mode===hl?128:0)+(r.mode===qf||r.mode===R0?256:0),(h===0&&x===0||t===M2)&&D===Qd&&(D=mT),D},wT=s=>{if(qd(s))return Ei;let t=s.state;return t.window&&(t.window=null),s.state=null,Qd},jT=(s,t)=>{if(qd(s))return Ei;const r=s.state;return(r.wrap&2)===0?Ei:(r.head=t,t.done=!1,Qd)},NT=(s,t)=>{const r=t.length;let a,n,i;return qd(s)||(a=s.state,a.wrap!==0&&a.mode!==qg)?Ei:a.mode===qg&&(n=1,n=hb(n,t,r,0),n!==a.check)?_S:(i=RS(s,t,r,r),i?(a.mode=IS,PS):(a.havedict=1,Qd))};var CT=TS,ST=DS,BT=LS,kT=bT,FT=MS,ET=vT,_T=wT,PT=jT,IT=NT,UT="pako inflate (from Nodeca project)",xl={inflateReset:CT,inflateReset2:ST,inflateResetKeep:BT,inflateInit:kT,inflateInit2:FT,inflate:ET,inflateEnd:_T,inflateGetHeader:PT,inflateSetDictionary:IT,inflateInfo:UT};function LT(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var TT=LT;const QS=Object.prototype.toString,{Z_NO_FLUSH:DT,Z_FINISH:MT,Z_OK:Ch,Z_STREAM_END:q0,Z_NEED_DICT:$0,Z_STREAM_ERROR:RT,Z_DATA_ERROR:c1,Z_MEM_ERROR:QT}=SS;function Lh(s){this.options=BS.assign({chunkSize:1024*64,windowBits:15,to:""},s||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(s&&s.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new tT,this.strm.avail_out=0;let r=xl.inflateInit2(this.strm,t.windowBits);if(r!==Ch)throw new Error(fb[r]);if(this.header=new TT,xl.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=gb.string2buf(t.dictionary):QS.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=xl.inflateSetDictionary(this.strm,t.dictionary),r!==Ch)))throw new Error(fb[r])}Lh.prototype.push=function(s,t){const r=this.strm,a=this.options.chunkSize,n=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?MT:DT,QS.call(s)==="[object ArrayBuffer]"?r.input=new Uint8Array(s):r.input=s,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(a),r.next_out=0,r.avail_out=a),i=xl.inflate(r,o),i===$0&&n&&(i=xl.inflateSetDictionary(r,n),i===Ch?i=xl.inflate(r,o):i===c1&&(i=$0));r.avail_in>0&&i===q0&&r.state.wrap>0&&s[r.next_in]!==0;)xl.inflateReset(r),i=xl.inflate(r,o);switch(i){case RT:case c1:case $0:case QT:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===q0))if(this.options.to==="string"){let d=gb.utf8border(r.output,r.next_out),u=r.next_out-d,m=gb.buf2string(r.output,d);r.next_out=u,r.avail_out=a-u,u&&r.output.set(r.output.subarray(d,d+u),0),this.onData(m)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Ch&&l===0)){if(i===q0)return i=xl.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Lh.prototype.onData=function(s){this.chunks.push(s)};Lh.prototype.onEnd=function(s){s===Ch&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=BS.flattenChunks(this.chunks)),this.chunks=[],this.err=s,this.msg=this.strm.msg};function OT(s,t){const r=new Lh(t);if(r.push(s),r.err)throw r.msg||fb[r.err];return r.result}var HT=Lh,qT=OT,$T={Inflate:HT,inflate:qT};const{Inflate:WT,inflate:KT}=$T;var d1=WT,zT=KT;const OS=[];for(let s=0;s<256;s++){let t=s;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;OS[s]=t}const u1=4294967295;function GT(s,t,r){let a=s;for(let n=0;n<r;n++)a=OS[(a^t[n])&255]^a>>>8;return a}function VT(s,t){return(GT(u1,s,t)^u1)>>>0}function A1(s,t,r){const a=s.readUint32(),n=VT(new Uint8Array(s.buffer,s.byteOffset+s.offset-t-4,t),t);if(n!==a)throw new Error(`CRC mismatch for chunk ${r}. Expected ${a}, found ${n}`)}function HS(s,t,r){for(let a=0;a<r;a++)t[a]=s[a]}function qS(s,t,r,a){let n=0;for(;n<a;n++)t[n]=s[n];for(;n<r;n++)t[n]=s[n]+t[n-a]&255}function $S(s,t,r,a){let n=0;if(r.length===0)for(;n<a;n++)t[n]=s[n];else for(;n<a;n++)t[n]=s[n]+r[n]&255}function WS(s,t,r,a,n){let i=0;if(r.length===0){for(;i<n;i++)t[i]=s[i];for(;i<a;i++)t[i]=s[i]+(t[i-n]>>1)&255}else{for(;i<n;i++)t[i]=s[i]+(r[i]>>1)&255;for(;i<a;i++)t[i]=s[i]+(t[i-n]+r[i]>>1)&255}}function KS(s,t,r,a,n){let i=0;if(r.length===0){for(;i<n;i++)t[i]=s[i];for(;i<a;i++)t[i]=s[i]+t[i-n]&255}else{for(;i<n;i++)t[i]=s[i]+r[i]&255;for(;i<a;i++)t[i]=s[i]+YT(t[i-n],r[i],r[i-n])&255}}function YT(s,t,r){const a=s+t-r,n=Math.abs(a-s),i=Math.abs(a-t),o=Math.abs(a-r);return n<=i&&n<=o?s:i<=o?t:r}function JT(s,t,r,a,n,i){switch(s){case 0:HS(t,r,n);break;case 1:qS(t,r,n,i);break;case 2:$S(t,r,a,n);break;case 3:WS(t,r,a,n,i);break;case 4:KS(t,r,a,n,i);break;default:throw new Error(`Unsupported filter: ${s}`)}}const XT=new Uint16Array([255]),ZT=new Uint8Array(XT.buffer),e8=ZT[0]===255;function t8(s){const{data:t,width:r,height:a,channels:n,depth:i}=s,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*n,d=new Uint8Array(a*r*l);let u=0;for(let m=0;m<7;m++){const h=o[m],x=Math.ceil((r-h.x)/h.xStep),f=Math.ceil((a-h.y)/h.yStep);if(x<=0||f<=0)continue;const b=x*l,v=new Uint8Array(b);for(let j=0;j<f;j++){const S=t[u++],C=t.subarray(u,u+b);u+=b;const B=new Uint8Array(b);JT(S,C,B,v,b,l),v.set(B);for(let F=0;F<x;F++){const Q=h.x+F*h.xStep,q=h.y+j*h.yStep;if(!(Q>=r||q>=a))for(let P=0;P<l;P++)d[(q*r+Q)*l+P]=B[F*l+P]}}}if(i===16){const m=new Uint16Array(d.buffer);if(e8)for(let h=0;h<m.length;h++)m[h]=r8(m[h]);return m}else return d}function r8(s){return(s&255)<<8|s>>8&255}const s8=new Uint16Array([255]),a8=new Uint8Array(s8.buffer),n8=a8[0]===255,i8=new Uint8Array(0);function m1(s){const{data:t,width:r,height:a,channels:n,depth:i}=s,o=Math.ceil(i/8)*n,l=Math.ceil(i/8*n*r),d=new Uint8Array(a*l);let u=i8,m=0,h,x;for(let f=0;f<a;f++){switch(h=t.subarray(m+1,m+1+l),x=d.subarray(f*l,(f+1)*l),t[m]){case 0:HS(h,x,l);break;case 1:qS(h,x,l,o);break;case 2:$S(h,x,u,l);break;case 3:WS(h,x,u,l,o);break;case 4:KS(h,x,u,l,o);break;default:throw new Error(`Unsupported filter: ${t[m]}`)}u=x,m+=l+1}if(i===16){const f=new Uint16Array(d.buffer);if(n8)for(let b=0;b<f.length;b++)f[b]=o8(f[b]);return f}else return d}function o8(s){return(s&255)<<8|s>>8&255}const jg=Uint8Array.of(137,80,78,71,13,10,26,10);function h1(s){if(!l8(s.readBytes(jg.length)))throw new Error("wrong PNG signature")}function l8(s){if(s.length<jg.length)return!1;for(let t=0;t<jg.length;t++)if(s[t]!==jg[t])return!1;return!0}const c8="tEXt",d8=0,zS=new TextDecoder("latin1");function u8(s){if(m8(s),s.length===0||s.length>79)throw new Error("keyword length must be between 1 and 79")}const A8=/^[\u0000-\u00FF]*$/;function m8(s){if(!A8.test(s))throw new Error("invalid latin1 text")}function h8(s,t,r){const a=GS(t);s[a]=f8(t,r-a.length-1)}function GS(s){for(s.mark();s.readByte()!==d8;);const t=s.offset;s.reset();const r=zS.decode(s.readBytes(t-s.offset-1));return s.skip(1),u8(r),r}function f8(s,t){return zS.decode(s.readBytes(t))}const ri={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},W0={UNKNOWN:-1,DEFLATE:0},f1={UNKNOWN:-1,ADAPTIVE:0},K0={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Wf={NONE:0,BACKGROUND:1,PREVIOUS:2},z0={SOURCE:0,OVER:1};class g8 extends wy{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:a=!1}=r;this._checkCrc=a,this._inflator=new d1,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=W0.UNKNOWN,this._filterMethod=f1.UNKNOWN,this._interlaceMethod=K0.UNKNOWN,this._colorType=ri.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(h1(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(h1(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const a=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case c8:h8(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?A1(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const a=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=a+t;break}if(this.offset-a!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?A1(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=p8(this.readUint8());const r=this.readUint8();this._colorType=r;let a;switch(r){case ri.GREYSCALE:a=1;break;case ri.TRUECOLOUR:a=3;break;case ri.INDEXED_COLOUR:a=1;break;case ri.GREYSCALE_ALPHA:a=2;break;case ri.TRUECOLOUR_ALPHA:a=4;break;case ri.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==W0.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const a=[];this._palette=a;for(let n=0;n<r;n++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,a=this.offset+this.byteOffset;if(a+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,a,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case ri.GREYSCALE:case ri.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case ri.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const a=this.readByte();this._palette[r].push(a)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case ri.UNKNOWN:case ri.GREYSCALE_ALPHA:case ri.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=GS(this),a=this.readUint8();if(a!==W0.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const n=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:zT(n)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),a=this.readByte();this._png.resolution={x:t,y:r,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(t);if(a){if(a.data=m1({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)r.data=a.data;else{const n=this._apng.frames.at(t-1);this.disposeFrame(a,n,r),this.addFrameDataToCanvas(r,a)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,a){switch(t.disposeOp){case Wf.NONE:break;case Wf.BACKGROUND:for(let n=0;n<this._png.height;n++)for(let i=0;i<this._png.width;i++){const o=(n*t.width+i)*this._png.channels;for(let l=0;l<this._png.channels;l++)a.data[o+l]=0}break;case Wf.PREVIOUS:a.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const a=1<<this._png.depth,n=(i,o)=>{const l=((i+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,d=(i*r.width+o)*this._png.channels;return{index:l,frameIndex:d}};switch(r.blendOp){case z0.SOURCE:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:d}=n(i,o);for(let u=0;u<this._png.channels;u++)t.data[l+u]=r.data[d+u]}break;case z0.OVER:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:d}=n(i,o);for(let u=0;u<this._png.channels;u++){const m=r.data[d+this._png.channels-1]/a,h=u%(this._png.channels-1)===0?1:r.data[d+u],x=Math.floor(m*h+(1-m)*t.data[l+u]);t.data[l+u]+=x}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==f1.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===K0.NO_INTERLACE)this._png.data=m1({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===K0.ADAM7)this._png.data=t8({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Wf.NONE,blendOp:z0.SOURCE,data:t}),this._inflator=new d1,this._writingDataChunks=!1}}function p8(s){if(s!==1&&s!==2&&s!==4&&s!==8&&s!==16)throw new Error(`invalid bit depth: ${s}`);return s}var g1;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.METRE=1]="METRE"})(g1||(g1={}));function x8(s,t){return new g8(s,t).decode()}var Jt=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function G0(){Jt.console&&typeof Jt.console.log=="function"&&Jt.console.log.apply(Jt.console,arguments)}var zr={log:G0,warn:function(s){Jt.console&&(typeof Jt.console.warn=="function"?Jt.console.warn.apply(Jt.console,arguments):G0.call(null,arguments))},error:function(s){Jt.console&&(typeof Jt.console.error=="function"?Jt.console.error.apply(Jt.console,arguments):G0(s))}};function V0(s,t,r){var a=new XMLHttpRequest;a.open("GET",s),a.responseType="blob",a.onload=function(){bd(a.response,t,r)},a.onerror=function(){zr.error("could not download file")},a.send()}function p1(s){var t=new XMLHttpRequest;t.open("HEAD",s,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Kf(s){try{s.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),s.dispatchEvent(t)}}var bd=Jt.saveAs||((typeof window>"u"?"undefined":Rr(window))!=="object"||window!==Jt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(s,t,r){var a=Jt.URL||Jt.webkitURL,n=document.createElement("a");t=t||s.name||"download",n.download=t,n.rel="noopener",typeof s=="string"?(n.href=s,n.origin!==location.origin?p1(n.href)?V0(s,t,r):Kf(n,n.target="_blank"):Kf(n)):(n.href=a.createObjectURL(s),setTimeout(function(){a.revokeObjectURL(n.href)},4e4),setTimeout(function(){Kf(n)},0))}:"msSaveOrOpenBlob"in navigator?function(s,t,r){if(t=t||s.name||"download",typeof s=="string")if(p1(s))V0(s,t,r);else{var a=document.createElement("a");a.href=s,a.target="_blank",setTimeout(function(){Kf(a)})}else navigator.msSaveOrOpenBlob((function(n,i){return i===void 0?i={autoBom:!1}:Rr(i)!=="object"&&(zr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(n.type)?new Blob(["\uFEFF",n],{type:n.type}):n})(s,r),t)}:function(s,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof s=="string")return V0(s,t,r);var n=s.type==="application/octet-stream",i=/constructor/i.test(Jt.HTMLElement)||Jt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&i)&&(typeof FileReader>"u"?"undefined":Rr(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var m=l.result;m=o?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=m:location=m,a=null},l.readAsDataURL(s)}else{var d=Jt.URL||Jt.webkitURL,u=d.createObjectURL(s);a?a.location=u:location.href=u,a=null,setTimeout(function(){d.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function VS(s){var t;s=s||"",this.ok=!1,s.charAt(0)=="#"&&(s=s.substr(1,6)),s={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[s=(s=s.replace(/ /g,"")).toLowerCase()]||s;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var n=r[a].re,i=r[a].process,o=n.exec(s);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),u.length==1&&(u="0"+u),"#"+l+d+u}}var Ng=Jt.atob.bind(Jt),x1=Jt.btoa.bind(Jt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Y0(s,t){var r=s[0],a=s[1],n=s[2],i=s[3];r=sn(r,a,n,i,t[0],7,-680876936),i=sn(i,r,a,n,t[1],12,-389564586),n=sn(n,i,r,a,t[2],17,606105819),a=sn(a,n,i,r,t[3],22,-1044525330),r=sn(r,a,n,i,t[4],7,-176418897),i=sn(i,r,a,n,t[5],12,1200080426),n=sn(n,i,r,a,t[6],17,-1473231341),a=sn(a,n,i,r,t[7],22,-45705983),r=sn(r,a,n,i,t[8],7,1770035416),i=sn(i,r,a,n,t[9],12,-1958414417),n=sn(n,i,r,a,t[10],17,-42063),a=sn(a,n,i,r,t[11],22,-1990404162),r=sn(r,a,n,i,t[12],7,1804603682),i=sn(i,r,a,n,t[13],12,-40341101),n=sn(n,i,r,a,t[14],17,-1502002290),r=an(r,a=sn(a,n,i,r,t[15],22,1236535329),n,i,t[1],5,-165796510),i=an(i,r,a,n,t[6],9,-1069501632),n=an(n,i,r,a,t[11],14,643717713),a=an(a,n,i,r,t[0],20,-373897302),r=an(r,a,n,i,t[5],5,-701558691),i=an(i,r,a,n,t[10],9,38016083),n=an(n,i,r,a,t[15],14,-660478335),a=an(a,n,i,r,t[4],20,-405537848),r=an(r,a,n,i,t[9],5,568446438),i=an(i,r,a,n,t[14],9,-1019803690),n=an(n,i,r,a,t[3],14,-187363961),a=an(a,n,i,r,t[8],20,1163531501),r=an(r,a,n,i,t[13],5,-1444681467),i=an(i,r,a,n,t[2],9,-51403784),n=an(n,i,r,a,t[7],14,1735328473),r=nn(r,a=an(a,n,i,r,t[12],20,-1926607734),n,i,t[5],4,-378558),i=nn(i,r,a,n,t[8],11,-2022574463),n=nn(n,i,r,a,t[11],16,1839030562),a=nn(a,n,i,r,t[14],23,-35309556),r=nn(r,a,n,i,t[1],4,-1530992060),i=nn(i,r,a,n,t[4],11,1272893353),n=nn(n,i,r,a,t[7],16,-155497632),a=nn(a,n,i,r,t[10],23,-1094730640),r=nn(r,a,n,i,t[13],4,681279174),i=nn(i,r,a,n,t[0],11,-358537222),n=nn(n,i,r,a,t[3],16,-722521979),a=nn(a,n,i,r,t[6],23,76029189),r=nn(r,a,n,i,t[9],4,-640364487),i=nn(i,r,a,n,t[12],11,-421815835),n=nn(n,i,r,a,t[15],16,530742520),r=on(r,a=nn(a,n,i,r,t[2],23,-995338651),n,i,t[0],6,-198630844),i=on(i,r,a,n,t[7],10,1126891415),n=on(n,i,r,a,t[14],15,-1416354905),a=on(a,n,i,r,t[5],21,-57434055),r=on(r,a,n,i,t[12],6,1700485571),i=on(i,r,a,n,t[3],10,-1894986606),n=on(n,i,r,a,t[10],15,-1051523),a=on(a,n,i,r,t[1],21,-2054922799),r=on(r,a,n,i,t[8],6,1873313359),i=on(i,r,a,n,t[15],10,-30611744),n=on(n,i,r,a,t[6],15,-1560198380),a=on(a,n,i,r,t[13],21,1309151649),r=on(r,a,n,i,t[4],6,-145523070),i=on(i,r,a,n,t[11],10,-1120210379),n=on(n,i,r,a,t[2],15,718787259),a=on(a,n,i,r,t[9],21,-343485551),s[0]=vc(r,s[0]),s[1]=vc(a,s[1]),s[2]=vc(n,s[2]),s[3]=vc(i,s[3])}function Ap(s,t,r,a,n,i){return t=vc(vc(t,s),vc(a,i)),vc(t<<n|t>>>32-n,r)}function sn(s,t,r,a,n,i,o){return Ap(t&r|~t&a,s,t,n,i,o)}function an(s,t,r,a,n,i,o){return Ap(t&a|r&~a,s,t,n,i,o)}function nn(s,t,r,a,n,i,o){return Ap(t^r^a,s,t,n,i,o)}function on(s,t,r,a,n,i,o){return Ap(r^(t|~a),s,t,n,i,o)}function YS(s){var t,r=s.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=s.length;t+=64)Y0(a,b8(s.substring(t-64,t)));s=s.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<s.length;t++)n[t>>2]|=s.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(Y0(a,n),t=0;t<16;t++)n[t]=0;return n[14]=8*r,Y0(a,n),a}function b8(s){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=s.charCodeAt(t)+(s.charCodeAt(t+1)<<8)+(s.charCodeAt(t+2)<<16)+(s.charCodeAt(t+3)<<24);return r}var b1="0123456789abcdef".split("");function y8(s){for(var t="",r=0;r<4;r++)t+=b1[s>>8*r+4&15]+b1[s>>8*r&15];return t}function v8(s){return String.fromCharCode(255&s,(65280&s)>>8,(16711680&s)>>16,(4278190080&s)>>24)}function pb(s){return YS(s).map(v8).join("")}var w8=(function(s){for(var t=0;t<s.length;t++)s[t]=y8(s[t]);return s.join("")})(YS("hello"))!="5d41402abc4b2a76b9719d911017c592";function vc(s,t){if(w8){var r=(65535&s)+(65535&t);return(s>>16)+(t>>16)+(r>>16)<<16|65535&r}return s+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function xb(s,t){var r,a,n,i;if(s!==r){for(var o=(n=s,i=1+(256/s.length|0),new Array(i+1).join(n)),l=[],d=0;d<256;d++)l[d]=d;var u=0;for(d=0;d<256;d++){var m=l[d];u=(u+m+o.charCodeAt(d))%256,l[d]=l[u],l[u]=m}r=s,a=l}else l=a;var h=t.length,x=0,f=0,b="";for(d=0;d<h;d++)f=(f+(m=l[x=(x+1)%256]))%256,l[x]=l[f],l[f]=m,o=l[(l[x]+l[f])%256],b+=String.fromCharCode(t.charCodeAt(d)^o);return b}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var y1={print:4,modify:8,copy:16,"annot-forms":32};function Zu(s,t,r,a){this.v=1,this.r=2;var n=192;s.forEach(function(l){if(y1.perm!==void 0)throw new Error("Invalid permission: "+l);n+=y1[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^n)),this.encryptionKey=pb(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=xb(this.encryptionKey,this.padding)}function eA(s){if(/[^\u0000-\u00ff]/.test(s))throw new Error("Invalid PDF Name Object: "+s+", Only accept ASCII characters.");for(var t="",r=s.length,a=0;a<r;a++){var n=s.charCodeAt(a);t+=n<33||n===35||n===37||n===40||n===41||n===47||n===60||n===62||n===91||n===93||n===123||n===125||n>126?"#"+("0"+n.toString(16)).slice(-2):s[a]}return t}function v1(s){if(Rr(s)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,n){if(n=n||!1,typeof r!="string"||typeof a!="function"||typeof n!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!n],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),n=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(s,a)}catch(l){Jt.console&&zr.error("jsPDF PubSub Error",l.message,l)}o[1]&&n.push(i)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Sh(s){if(!(this instanceof Sh))return new Sh(s);var t="opacity,stroke-opacity".split(",");for(var r in s)s.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=s[r]);this.id="",this.objectNumber=-1}function JS(s,t){this.gState=s,this.matrix=t,this.id="",this.objectNumber=-1}function fc(s,t,r,a,n){if(!(this instanceof fc))return new fc(s,t,r,a,n);this.type=s==="axial"?2:3,this.coords=t,this.colors=r,JS.call(this,a,n)}function jd(s,t,r,a,n){if(!(this instanceof jd))return new jd(s,t,r,a,n);this.boundingBox=s,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,JS.call(this,a,n)}function Lt(s){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],n=arguments[2],i=arguments[3],o=[],l=1,d=16,u="S",m=null;Rr(s=s||{})==="object"&&(r=s.orientation,a=s.unit||a,n=s.format||n,i=s.compress||s.compressPdf||i,(m=s.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),l=typeof s.userUnit=="number"?Math.abs(s.userUnit):1,s.precision!==void 0&&(t=s.precision),s.floatPrecision!==void 0&&(d=s.floatPrecision),u=s.defaultPathOperation||"S"),o=s.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var h=s.putOnlyUsedFonts||!1,x={},f={internal:{},__private__:{}};f.__private__.PubSub=v1;var b="1.3",v=f.__private__.getPdfVersion=function(){return b};f.__private__.setPdfVersion=function(R){b=R};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return j};var S=f.__private__.getPageFormat=function(R){return j[R]};n=n||"a4";var C="compat",B="advanced",F=C;function Q(){this.saveGraphicsState(),ce(new Dt(Qe,0,0,-Qe,0,ga()*Qe).toString()+" cm"),this.setFontSize(this.getFontSize()/Qe),u="n",F=B}function q(){this.restoreGraphicsState(),u="S",F=C}var P=f.__private__.combineFontStyleAndFontWeight=function(R,me){if(R=="bold"&&me=="normal"||R=="bold"&&me==400||R=="normal"&&me=="italic"||R=="bold"&&me=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return me&&(R=me==400||me==="normal"?R==="italic"?"italic":"normal":me!=700&&me!=="bold"||R!=="normal"?(me==700?"bold":me)+""+R:"bold"),R};f.advancedAPI=function(R){var me=F===C;return me&&Q.call(this),typeof R!="function"||(R(this),me&&q.call(this)),this},f.compatAPI=function(R){var me=F===B;return me&&q.call(this),typeof R!="function"||(R(this),me&&Q.call(this)),this},f.isAdvancedAPI=function(){return F===B};var D,_=function(R){if(F!==B)throw new Error(R+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},$=f.roundToPrecision=f.__private__.roundToPrecision=function(R,me){var Ee=t||me;if(isNaN(R)||isNaN(Ee))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return R.toFixed(Ee).replace(/0+$/,"")};D=f.hpf=f.__private__.hpf=typeof d=="number"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return $(R,d)}:d==="smart"?function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return $(R,R>-1&&R<1?16:5)}:function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.hpf");return $(R,16)};var k=f.f2=f.__private__.f2=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f2");return $(R,2)},L=f.__private__.f3=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.f3");return $(R,3)},E=f.scale=f.__private__.scale=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.scale");return F===C?R*Qe:F===B?R:void 0},O=function(R){return E((function(me){return F===C?ga()-me:F===B?me:void 0})(R))};f.__private__.setPrecision=f.setPrecision=function(R){typeof parseInt(R,10)=="number"&&(t=parseInt(R,10))};var le,te="00000000000000000000000000000000",V=f.__private__.getFileId=function(){return te},M=f.__private__.setFileId=function(R){return te=R!==void 0&&/^[a-fA-F0-9]{32}$/.test(R)?R.toUpperCase():te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(gs=new Zu(m.userPermissions,m.userPassword,m.ownerPassword,te)),te};f.setFileId=function(R){return M(R),this},f.getFileId=function(){return V()};var ie=f.__private__.convertDateToPDFDate=function(R){var me=R.getTimezoneOffset(),Ee=me<0?"+":"-",Ue=Math.floor(Math.abs(me/60)),$e=Math.abs(me%60),at=[Ee,se(Ue),"'",se($e),"'"].join("");return["D:",R.getFullYear(),se(R.getMonth()+1),se(R.getDate()),se(R.getHours()),se(R.getMinutes()),se(R.getSeconds()),at].join("")},K=f.__private__.convertPDFDateToDate=function(R){var me=parseInt(R.substr(2,4),10),Ee=parseInt(R.substr(6,2),10)-1,Ue=parseInt(R.substr(8,2),10),$e=parseInt(R.substr(10,2),10),at=parseInt(R.substr(12,2),10),dt=parseInt(R.substr(14,2),10);return new Date(me,Ee,Ue,$e,at,dt,0)},H=f.__private__.setCreationDate=function(R){var me;if(R===void 0&&(R=new Date),R instanceof Date)me=ie(R);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(R))throw new Error("Invalid argument passed to jsPDF.setCreationDate");me=R}return le=me},I=f.__private__.getCreationDate=function(R){var me=le;return R==="jsDate"&&(me=K(le)),me};f.setCreationDate=function(R){return H(R),this},f.getCreationDate=function(R){return I(R)};var ee,se=f.__private__.padd2=function(R){return("0"+parseInt(R)).slice(-2)},de=f.__private__.padd2Hex=function(R){return("00"+(R=R.toString())).substr(R.length)},re=0,z=[],ne=[],Y=0,X=[],ye=[],pe=!1,Ce=ne;f.__private__.setCustomOutputDestination=function(R){pe=!0,Ce=R};var je=function(R){pe||(Ce=R)};f.__private__.resetCustomOutputDestination=function(){pe=!1,Ce=ne};var ce=f.__private__.out=function(R){return R=R.toString(),Y+=R.length+1,Ce.push(R),Ce},Te=f.__private__.write=function(R){return ce(arguments.length===1?R.toString():Array.prototype.join.call(arguments," "))},We=f.__private__.getArrayBuffer=function(R){for(var me=R.length,Ee=new ArrayBuffer(me),Ue=new Uint8Array(Ee);me--;)Ue[me]=R.charCodeAt(me);return Ee},Le=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Le};var U=s.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(R){return U=F===B?R/Qe:R,this};var fe,Se=f.__private__.getFontSize=f.getFontSize=function(){return F===C?U:U*Qe},Re=s.R2L||!1;f.__private__.setR2L=f.setR2L=function(R){return Re=R,this},f.__private__.getR2L=f.getR2L=function(){return Re};var G,ue=f.__private__.setZoomMode=function(R){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(R))fe=R;else if(isNaN(R)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(R)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+R+'" is not recognized.');fe=R}else fe=parseInt(R,10)};f.__private__.getZoomMode=function(){return fe};var ge,oe=f.__private__.setPageMode=function(R){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(R)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+R+'" is not recognized.');G=R};f.__private__.getPageMode=function(){return G};var J=f.__private__.setLayoutMode=function(R){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(R)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+R+'" is not recognized.');ge=R};f.__private__.getLayoutMode=function(){return ge},f.__private__.setDisplayMode=f.setDisplayMode=function(R,me,Ee){return ue(R),J(me),oe(Ee),this};var Ae={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(R){if(Object.keys(Ae).indexOf(R)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ae[R]},f.__private__.getDocumentProperties=function(){return Ae},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(R){for(var me in Ae)Ae.hasOwnProperty(me)&&R[me]&&(Ae[me]=R[me]);return this},f.__private__.setDocumentProperty=function(R,me){if(Object.keys(Ae).indexOf(R)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ae[R]=me};var Fe,Qe,Ie,et,ot,lt={},vt={},ct=[],bt={},Ut={},jt={},qe={},ht=null,yt=0,ft=[],Qt=new v1(f),br=s.hotfixes||[],Wt={},pr={},Gr=[],Dt=function R(me,Ee,Ue,$e,at,dt){if(!(this instanceof R))return new R(me,Ee,Ue,$e,at,dt);isNaN(me)&&(me=1),isNaN(Ee)&&(Ee=0),isNaN(Ue)&&(Ue=0),isNaN($e)&&($e=1),isNaN(at)&&(at=0),isNaN(dt)&&(dt=0),this._matrix=[me,Ee,Ue,$e,at,dt]};Object.defineProperty(Dt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Dt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Dt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Dt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Dt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Dt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Dt.prototype,"a",{get:function(){return this._matrix[0]},set:function(R){this._matrix[0]=R}}),Object.defineProperty(Dt.prototype,"b",{get:function(){return this._matrix[1]},set:function(R){this._matrix[1]=R}}),Object.defineProperty(Dt.prototype,"c",{get:function(){return this._matrix[2]},set:function(R){this._matrix[2]=R}}),Object.defineProperty(Dt.prototype,"d",{get:function(){return this._matrix[3]},set:function(R){this._matrix[3]=R}}),Object.defineProperty(Dt.prototype,"e",{get:function(){return this._matrix[4]},set:function(R){this._matrix[4]=R}}),Object.defineProperty(Dt.prototype,"f",{get:function(){return this._matrix[5]},set:function(R){this._matrix[5]=R}}),Object.defineProperty(Dt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Dt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Dt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Dt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Dt.prototype.join=function(R){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(D).join(R)},Dt.prototype.multiply=function(R){var me=R.sx*this.sx+R.shy*this.shx,Ee=R.sx*this.shy+R.shy*this.sy,Ue=R.shx*this.sx+R.sy*this.shx,$e=R.shx*this.shy+R.sy*this.sy,at=R.tx*this.sx+R.ty*this.shx+this.tx,dt=R.tx*this.shy+R.ty*this.sy+this.ty;return new Dt(me,Ee,Ue,$e,at,dt)},Dt.prototype.decompose=function(){var R=this.sx,me=this.shy,Ee=this.shx,Ue=this.sy,$e=this.tx,at=this.ty,dt=Math.sqrt(R*R+me*me),kt=(R/=dt)*Ee+(me/=dt)*Ue;Ee-=R*kt,Ue-=me*kt;var Et=Math.sqrt(Ee*Ee+Ue*Ue);return kt/=Et,R*(Ue/=Et)<me*(Ee/=Et)&&(R=-R,me=-me,kt=-kt,dt=-dt),{scale:new Dt(dt,0,0,Et,0,0),translate:new Dt(1,0,0,1,$e,at),rotate:new Dt(R,me,-me,R,0,0),skew:new Dt(1,0,kt,1,0,0)}},Dt.prototype.toString=function(R){return this.join(" ")},Dt.prototype.inversed=function(){var R=this.sx,me=this.shy,Ee=this.shx,Ue=this.sy,$e=this.tx,at=this.ty,dt=1/(R*Ue-me*Ee),kt=Ue*dt,Et=-me*dt,Ht=-Ee*dt,er=R*dt;return new Dt(kt,Et,Ht,er,-kt*$e-Ht*at,-Et*$e-er*at)},Dt.prototype.applyToPoint=function(R){var me=R.x*this.sx+R.y*this.shx+this.tx,Ee=R.x*this.shy+R.y*this.sy+this.ty;return new ui(me,Ee)},Dt.prototype.applyToRectangle=function(R){var me=this.applyToPoint(R),Ee=this.applyToPoint(new ui(R.x+R.w,R.y+R.h));return new Yo(me.x,me.y,Ee.x-me.x,Ee.y-me.y)},Dt.prototype.clone=function(){var R=this.sx,me=this.shy,Ee=this.shx,Ue=this.sy,$e=this.tx,at=this.ty;return new Dt(R,me,Ee,Ue,$e,at)},f.Matrix=Dt;var ts=f.matrixMult=function(R,me){return me.multiply(R)},Ps=new Dt(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Ps;var Vr=function(R,me){if(!Ut[R]){var Ee=(me instanceof fc?"Sh":"P")+(Object.keys(bt).length+1).toString(10);me.id=Ee,Ut[R]=Ee,bt[Ee]=me,Qt.publish("addPattern",me)}};f.ShadingPattern=fc,f.TilingPattern=jd,f.addShadingPattern=function(R,me){return _("addShadingPattern()"),Vr(R,me),this},f.beginTilingPattern=function(R){_("beginTilingPattern()"),Sn(R.boundingBox[0],R.boundingBox[1],R.boundingBox[2]-R.boundingBox[0],R.boundingBox[3]-R.boundingBox[1],R.matrix)},f.endTilingPattern=function(R,me){_("endTilingPattern()"),me.stream=ye[ee].join(`
`),Vr(R,me),Qt.publish("endTilingPattern",me),Gr.pop().restore()};var ha,cr=f.__private__.newObject=function(){var R=Qr();return is(R,!0),R},Qr=f.__private__.newObjectDeferred=function(){return re++,z[re]=function(){return Y},re},is=function(R,me){return me=typeof me=="boolean"&&me,z[R]=Y,me&&ce(R+" 0 obj"),R},wn=f.__private__.newAdditionalObject=function(){var R={objId:Qr(),content:""};return X.push(R),R},ni=Qr(),Oa=Qr(),jn=f.__private__.decodeColorString=function(R){var me=R.split(" ");if(me.length!==2||me[1]!=="g"&&me[1]!=="G")me.length!==5||me[4]!=="k"&&me[4]!=="K"||(me=[(1-me[0])*(1-me[3]),(1-me[1])*(1-me[3]),(1-me[2])*(1-me[3]),"r"]);else{var Ee=parseFloat(me[0]);me=[Ee,Ee,Ee,"r"]}for(var Ue="#",$e=0;$e<3;$e++)Ue+=("0"+Math.floor(255*parseFloat(me[$e])).toString(16)).slice(-2);return Ue},zs=f.__private__.encodeColorString=function(R){var me;typeof R=="string"&&(R={ch1:R});var Ee=R.ch1,Ue=R.ch2,$e=R.ch3,at=R.ch4,dt=R.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ee=="string"&&Ee.charAt(0)!=="#"){var kt=new VS(Ee);if(kt.ok)Ee=kt.toHex();else if(!/^\d*\.?\d*$/.test(Ee))throw new Error('Invalid color "'+Ee+'" passed to jsPDF.encodeColorString.')}if(typeof Ee=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ee)&&(Ee="#"+Ee[1]+Ee[1]+Ee[2]+Ee[2]+Ee[3]+Ee[3]),typeof Ee=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ee)){var Et=parseInt(Ee.substr(1),16);Ee=Et>>16&255,Ue=Et>>8&255,$e=255&Et}if(Ue===void 0||at===void 0&&Ee===Ue&&Ue===$e)me=typeof Ee=="string"?Ee+" "+dt[0]:R.precision===2?k(Ee/255)+" "+dt[0]:L(Ee/255)+" "+dt[0];else if(at===void 0||Rr(at)==="object"){if(at&&!isNaN(at.a)&&at.a===0)return["1.","1.","1.",dt[1]].join(" ");me=typeof Ee=="string"?[Ee,Ue,$e,dt[1]].join(" "):R.precision===2?[k(Ee/255),k(Ue/255),k($e/255),dt[1]].join(" "):[L(Ee/255),L(Ue/255),L($e/255),dt[1]].join(" ")}else me=typeof Ee=="string"?[Ee,Ue,$e,at,dt[2]].join(" "):R.precision===2?[k(Ee),k(Ue),k($e),k(at),dt[2]].join(" "):[L(Ee),L(Ue),L($e),L(at),dt[2]].join(" ");return me},Ha=f.__private__.getFilters=function(){return o},or=f.__private__.putStream=function(R){var me=(R=R||{}).data||"",Ee=R.filters||Ha(),Ue=R.alreadyAppliedFilters||[],$e=R.addLength1||!1,at=me.length,dt=R.objectId,kt=function(Is){return Is};if(m!==null&&dt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(kt=gs.encryptor(dt,0));var Et={};Ee===!0&&(Ee=["FlateEncode"]);var Ht=R.additionalKeyValues||[],er=(Et=Lt.API.processDataByFilters!==void 0?Lt.API.processDataByFilters(me,Ee):{data:me,reverseChain:[]}).reverseChain+(Array.isArray(Ue)?Ue.join(" "):Ue.toString());if(Et.data.length!==0&&(Ht.push({key:"Length",value:Et.data.length}),$e===!0&&Ht.push({key:"Length1",value:at})),er.length!=0)if(er.split("/").length-1==1)Ht.push({key:"Filter",value:er});else{Ht.push({key:"Filter",value:"["+er+"]"});for(var yr=0;yr<Ht.length;yr+=1)if(Ht[yr].key==="DecodeParms"){for(var rs=[],Cs=0;Cs<Et.reverseChain.split("/").length-1;Cs+=1)rs.push("null");rs.push(Ht[yr].value),Ht[yr].value="["+rs.join(" ")+"]"}}ce("<<");for(var Cr=0;Cr<Ht.length;Cr++)ce("/"+Ht[Cr].key+" "+Ht[Cr].value);ce(">>"),Et.data.length!==0&&(ce("stream"),ce(kt(Et.data)),ce("endstream"))},Wr=f.__private__.putPage=function(R){var me=R.number,Ee=R.data,Ue=R.objId,$e=R.contentsObjId;is(Ue,!0),ce("<</Type /Page"),ce("/Parent "+R.rootDictionaryObjId+" 0 R"),ce("/Resources "+R.resourceDictionaryObjId+" 0 R"),ce("/MediaBox ["+parseFloat(D(R.mediaBox.bottomLeftX))+" "+parseFloat(D(R.mediaBox.bottomLeftY))+" "+D(R.mediaBox.topRightX)+" "+D(R.mediaBox.topRightY)+"]"),R.cropBox!==null&&ce("/CropBox ["+D(R.cropBox.bottomLeftX)+" "+D(R.cropBox.bottomLeftY)+" "+D(R.cropBox.topRightX)+" "+D(R.cropBox.topRightY)+"]"),R.bleedBox!==null&&ce("/BleedBox ["+D(R.bleedBox.bottomLeftX)+" "+D(R.bleedBox.bottomLeftY)+" "+D(R.bleedBox.topRightX)+" "+D(R.bleedBox.topRightY)+"]"),R.trimBox!==null&&ce("/TrimBox ["+D(R.trimBox.bottomLeftX)+" "+D(R.trimBox.bottomLeftY)+" "+D(R.trimBox.topRightX)+" "+D(R.trimBox.topRightY)+"]"),R.artBox!==null&&ce("/ArtBox ["+D(R.artBox.bottomLeftX)+" "+D(R.artBox.bottomLeftY)+" "+D(R.artBox.topRightX)+" "+D(R.artBox.topRightY)+"]"),typeof R.userUnit=="number"&&R.userUnit!==1&&ce("/UserUnit "+R.userUnit),Qt.publish("putPage",{objId:Ue,pageContext:ft[me],pageNumber:me,page:Ee}),ce("/Contents "+$e+" 0 R"),ce(">>"),ce("endobj");var at=Ee.join(`
`);return F===B&&(at+=`
Q`),is($e,!0),or({data:at,filters:Ha(),objectId:$e}),ce("endobj"),Ue},fs=f.__private__.putPages=function(){var R,me,Ee=[];for(R=1;R<=yt;R++)ft[R].objId=Qr(),ft[R].contentsObjId=Qr();for(R=1;R<=yt;R++)Ee.push(Wr({number:R,data:ye[R],objId:ft[R].objId,contentsObjId:ft[R].contentsObjId,mediaBox:ft[R].mediaBox,cropBox:ft[R].cropBox,bleedBox:ft[R].bleedBox,trimBox:ft[R].trimBox,artBox:ft[R].artBox,userUnit:ft[R].userUnit,rootDictionaryObjId:ni,resourceDictionaryObjId:Oa}));is(ni,!0),ce("<</Type /Pages");var Ue="/Kids [";for(me=0;me<yt;me++)Ue+=Ee[me]+" 0 R ";ce(Ue+"]"),ce("/Count "+yt),ce(">>"),ce("endobj"),Qt.publish("postPutPages")},mn=function(R){Qt.publish("putFont",{font:R,out:ce,newObject:cr,putStream:or}),R.isAlreadyPutted!==!0&&(R.objectNumber=cr(),ce("<<"),ce("/Type /Font"),ce("/BaseFont /"+eA(R.postScriptName)),ce("/Subtype /Type1"),typeof R.encoding=="string"&&ce("/Encoding /"+R.encoding),ce("/FirstChar 32"),ce("/LastChar 255"),ce(">>"),ce("endobj"))},_i=function(R){R.objectNumber=cr();var me=[];me.push({key:"Type",value:"/XObject"}),me.push({key:"Subtype",value:"/Form"}),me.push({key:"BBox",value:"["+[D(R.x),D(R.y),D(R.x+R.width),D(R.y+R.height)].join(" ")+"]"}),me.push({key:"Matrix",value:"["+R.matrix.toString()+"]"});var Ee=R.pages[1].join(`
`);or({data:Ee,additionalKeyValues:me,objectId:R.objectNumber}),ce("endobj")},Hn=function(R,me){me||(me=21);var Ee=cr(),Ue=(function(dt,kt){var Et,Ht=[],er=1/(kt-1);for(Et=0;Et<1;Et+=er)Ht.push(Et);if(Ht.push(1),dt[0].offset!=0){var yr={offset:0,color:dt[0].color};dt.unshift(yr)}if(dt[dt.length-1].offset!=1){var rs={offset:1,color:dt[dt.length-1].color};dt.push(rs)}for(var Cs="",Cr=0,Is=0;Is<Ht.length;Is++){for(Et=Ht[Is];Et>dt[Cr+1].offset;)Cr++;var Ss=dt[Cr].offset,na=(Et-Ss)/(dt[Cr+1].offset-Ss),Mi=dt[Cr].color,go=dt[Cr+1].color;Cs+=de(Math.round((1-na)*Mi[0]+na*go[0]).toString(16))+de(Math.round((1-na)*Mi[1]+na*go[1]).toString(16))+de(Math.round((1-na)*Mi[2]+na*go[2]).toString(16))}return Cs.trim()})(R.colors,me),$e=[];$e.push({key:"FunctionType",value:"0"}),$e.push({key:"Domain",value:"[0.0 1.0]"}),$e.push({key:"Size",value:"["+me+"]"}),$e.push({key:"BitsPerSample",value:"8"}),$e.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$e.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),or({data:Ue,additionalKeyValues:$e,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ee}),ce("endobj"),R.objectNumber=cr(),ce("<< /ShadingType "+R.type),ce("/ColorSpace /DeviceRGB");var at="/Coords ["+D(parseFloat(R.coords[0]))+" "+D(parseFloat(R.coords[1]))+" ";R.type===2?at+=D(parseFloat(R.coords[2]))+" "+D(parseFloat(R.coords[3])):at+=D(parseFloat(R.coords[2]))+" "+D(parseFloat(R.coords[3]))+" "+D(parseFloat(R.coords[4]))+" "+D(parseFloat(R.coords[5])),ce(at+="]"),R.matrix&&ce("/Matrix ["+R.matrix.toString()+"]"),ce("/Function "+Ee+" 0 R"),ce("/Extend [true true]"),ce(">>"),ce("endobj")},Ho=function(R,me){var Ee=Qr(),Ue=cr();me.push({resourcesOid:Ee,objectOid:Ue}),R.objectNumber=Ue;var $e=[];$e.push({key:"Type",value:"/Pattern"}),$e.push({key:"PatternType",value:"1"}),$e.push({key:"PaintType",value:"1"}),$e.push({key:"TilingType",value:"1"}),$e.push({key:"BBox",value:"["+R.boundingBox.map(D).join(" ")+"]"}),$e.push({key:"XStep",value:D(R.xStep)}),$e.push({key:"YStep",value:D(R.yStep)}),$e.push({key:"Resources",value:Ee+" 0 R"}),R.matrix&&$e.push({key:"Matrix",value:"["+R.matrix.toString()+"]"}),or({data:R.stream,additionalKeyValues:$e,objectId:R.objectNumber}),ce("endobj")},Sl=function(R){for(var me in R.objectNumber=cr(),ce("<<"),R)switch(me){case"opacity":ce("/ca "+k(R[me]));break;case"stroke-opacity":ce("/CA "+k(R[me]))}ce(">>"),ce("endobj")},Ir=function(R){is(R.resourcesOid,!0),ce("<<"),ce("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var me in ce("/Font <<"),lt)lt.hasOwnProperty(me)&&(h===!1||h===!0&&x.hasOwnProperty(me))&&ce("/"+me+" "+lt[me].objectNumber+" 0 R");ce(">>")})(),(function(){if(Object.keys(bt).length>0){for(var me in ce("/Shading <<"),bt)bt.hasOwnProperty(me)&&bt[me]instanceof fc&&bt[me].objectNumber>=0&&ce("/"+me+" "+bt[me].objectNumber+" 0 R");Qt.publish("putShadingPatternDict"),ce(">>")}})(),(function(me){if(Object.keys(bt).length>0){for(var Ee in ce("/Pattern <<"),bt)bt.hasOwnProperty(Ee)&&bt[Ee]instanceof f.TilingPattern&&bt[Ee].objectNumber>=0&&bt[Ee].objectNumber<me&&ce("/"+Ee+" "+bt[Ee].objectNumber+" 0 R");Qt.publish("putTilingPatternDict"),ce(">>")}})(R.objectOid),(function(){if(Object.keys(jt).length>0){var me;for(me in ce("/ExtGState <<"),jt)jt.hasOwnProperty(me)&&jt[me].objectNumber>=0&&ce("/"+me+" "+jt[me].objectNumber+" 0 R");Qt.publish("putGStateDict"),ce(">>")}})(),(function(){for(var me in ce("/XObject <<"),Wt)Wt.hasOwnProperty(me)&&Wt[me].objectNumber>=0&&ce("/"+me+" "+Wt[me].objectNumber+" 0 R");Qt.publish("putXobjectDict"),ce(">>")})(),ce(">>"),ce("endobj")},qo=function(R){vt[R.fontName]=vt[R.fontName]||{},vt[R.fontName][R.fontStyle]=R.id},Pi=function(R,me,Ee,Ue,$e){var at={id:"F"+(Object.keys(lt).length+1).toString(10),postScriptName:R,fontName:me,fontStyle:Ee,encoding:Ue,isStandardFont:$e||!1,metadata:{}};return Qt.publish("addFont",{font:at,instance:this}),lt[at.id]=at,qo(at),at.id},aa=f.__private__.pdfEscape=f.pdfEscape=function(R,me){return(function(Ee,Ue){var $e,at,dt,kt,Et,Ht,er,yr,rs;if(dt=(Ue=Ue||{}).sourceEncoding||"Unicode",Et=Ue.outputEncoding,(Ue.autoencode||Et)&&lt[Fe].metadata&&lt[Fe].metadata[dt]&&lt[Fe].metadata[dt].encoding&&(kt=lt[Fe].metadata[dt].encoding,!Et&&lt[Fe].encoding&&(Et=lt[Fe].encoding),!Et&&kt.codePages&&(Et=kt.codePages[0]),typeof Et=="string"&&(Et=kt[Et]),Et)){for(er=!1,Ht=[],$e=0,at=Ee.length;$e<at;$e++)(yr=Et[Ee.charCodeAt($e)])?Ht.push(String.fromCharCode(yr)):Ht.push(Ee[$e]),Ht[$e].charCodeAt(0)>>8&&(er=!0);Ee=Ht.join("")}for($e=Ee.length;er===void 0&&$e!==0;)Ee.charCodeAt($e-1)>>8&&(er=!0),$e--;if(!er)return Ee;for(Ht=Ue.noBOM?[]:[254,255],$e=0,at=Ee.length;$e<at;$e++){if((rs=(yr=Ee.charCodeAt($e))>>8)>>8)throw new Error("Character at position "+$e+" of string '"+Ee+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(rs),Ht.push(yr-(rs<<8))}return String.fromCharCode.apply(void 0,Ht)})(R,me).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ii=f.__private__.beginPage=function(R){ye[++yt]=[],ft[yt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(R[0]),topRightY:Number(R[1])}},qa(yt),je(ye[ee])},mo=function(R,me){var Ee,Ue,$e;switch(r=me||r,typeof R=="string"&&(Ee=S(R.toLowerCase()),Array.isArray(Ee)&&(Ue=Ee[0],$e=Ee[1])),Array.isArray(R)&&(Ue=R[0]*Qe,$e=R[1]*Qe),isNaN(Ue)&&(Ue=n[0],$e=n[1]),(Ue>14400||$e>14400)&&(zr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ue=Math.min(14400,Ue),$e=Math.min(14400,$e)),n=[Ue,$e],r.substr(0,1)){case"l":$e>Ue&&(n=[$e,Ue]);break;case"p":Ue>$e&&(n=[$e,Ue])}ii(n),Go(Cn),ce(Vo),$c!==0&&ce($c+" J"),Wc!==0&&ce(Wc+" j"),Qt.publish("addPage",{pageNumber:yt})},ho=function(R){R>0&&R<=yt&&(ye.splice(R,1),ft.splice(R,1),yt--,ee>yt&&(ee=yt),this.setPage(ee))},qa=function(R){R>0&&R<=yt&&(ee=R)},hn=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return ye.length-1},Wd=function(R,me,Ee){var Ue,$e=void 0;return Ee=Ee||{},R=R!==void 0?R:lt[Fe].fontName,me=me!==void 0?me:lt[Fe].fontStyle,Ue=R.toLowerCase(),vt[Ue]!==void 0&&vt[Ue][me]!==void 0?$e=vt[Ue][me]:vt[R]!==void 0&&vt[R][me]!==void 0?$e=vt[R][me]:Ee.disableWarning===!1&&zr.warn("Unable to look up font label for font '"+R+"', '"+me+"'. Refer to getFontList() for available fonts."),$e||Ee.noFallback||($e=vt.times[me])==null&&($e=vt.times.normal),$e},fa=f.__private__.putInfo=function(){var R=cr(),me=function(Ue){return Ue};for(var Ee in m!==null&&(me=gs.encryptor(R,0)),ce("<<"),ce("/Producer ("+aa(me("jsPDF "+Lt.version))+")"),Ae)Ae.hasOwnProperty(Ee)&&Ae[Ee]&&ce("/"+Ee.substr(0,1).toUpperCase()+Ee.substr(1)+" ("+aa(me(Ae[Ee]))+")");ce("/CreationDate ("+aa(me(le))+")"),ce(">>"),ce("endobj")},kA=f.__private__.putCatalog=function(R){var me=(R=R||{}).rootDictionaryObjId||ni;switch(cr(),ce("<<"),ce("/Type /Catalog"),ce("/Pages "+me+" 0 R"),fe||(fe="fullwidth"),fe){case"fullwidth":ce("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ce("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ce("/OpenAction [3 0 R /Fit]");break;case"original":ce("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ee=""+fe;Ee.substr(Ee.length-1)==="%"&&(fe=parseInt(fe)/100),typeof fe=="number"&&ce("/OpenAction [3 0 R /XYZ null null "+k(fe)+"]")}switch(ge||(ge="continuous"),ge){case"continuous":ce("/PageLayout /OneColumn");break;case"single":ce("/PageLayout /SinglePage");break;case"two":case"twoleft":ce("/PageLayout /TwoColumnLeft");break;case"tworight":ce("/PageLayout /TwoColumnRight")}G&&ce("/PageMode /"+G),Qt.publish("putCatalog"),ce(">>"),ce("endobj")},Ns=f.__private__.putTrailer=function(){ce("trailer"),ce("<<"),ce("/Size "+(re+1)),ce("/Root "+re+" 0 R"),ce("/Info "+(re-1)+" 0 R"),m!==null&&ce("/Encrypt "+gs.oid+" 0 R"),ce("/ID [ <"+te+"> <"+te+"> ]"),ce(">>")},Kd=f.__private__.putHeader=function(){ce("%PDF-"+b),ce("%")},$o=f.__private__.putXRef=function(){var R="0000000000";ce("xref"),ce("0 "+(re+1)),ce("0000000000 65535 f ");for(var me=1;me<=re;me++)typeof z[me]=="function"?ce((R+z[me]()).slice(-10)+" 00000 n "):z[me]!==void 0?ce((R+z[me]).slice(-10)+" 00000 n "):ce("0000000000 00000 n ")},Nn=f.__private__.buildDocument=function(){var R;re=0,Y=0,ne=[],z=[],X=[],ni=Qr(),Oa=Qr(),je(ne),Qt.publish("buildDocument"),Kd(),fs(),(function(){Qt.publish("putAdditionalObjects");for(var Ee=0;Ee<X.length;Ee++){var Ue=X[Ee];is(Ue.objId,!0),ce(Ue.content),ce("endobj")}Qt.publish("postPutAdditionalObjects")})(),R=[],(function(){for(var Ee in lt)lt.hasOwnProperty(Ee)&&(h===!1||h===!0&&x.hasOwnProperty(Ee))&&mn(lt[Ee])})(),(function(){var Ee;for(Ee in jt)jt.hasOwnProperty(Ee)&&Sl(jt[Ee])})(),(function(){for(var Ee in Wt)Wt.hasOwnProperty(Ee)&&_i(Wt[Ee])})(),(function(Ee){var Ue;for(Ue in bt)bt.hasOwnProperty(Ue)&&(bt[Ue]instanceof fc?Hn(bt[Ue]):bt[Ue]instanceof jd&&Ho(bt[Ue],Ee))})(R),Qt.publish("putResources"),R.forEach(Ir),Ir({resourcesOid:Oa,objectOid:Number.MAX_SAFE_INTEGER}),Qt.publish("postPutResources"),m!==null&&(gs.oid=cr(),ce("<<"),ce("/Filter /Standard"),ce("/V "+gs.v),ce("/R "+gs.r),ce("/U <"+gs.toHexString(gs.U)+">"),ce("/O <"+gs.toHexString(gs.O)+">"),ce("/P "+gs.P),ce(">>"),ce("endobj")),fa(),kA();var me=Y;return $o(),Ns(),ce("startxref"),ce(""+me),ce("%%EOF"),je(ye[ee]),ne.join(`
`)},qn=f.__private__.getBlob=function(R){return new Blob([We(R)],{type:"application/pdf"})},$a=f.output=f.__private__.output=(ha=function(R,me){switch(typeof(me=me||{})=="string"?me={filename:me}:me.filename=me.filename||"generated.pdf",R){case void 0:return Nn();case"save":f.save(me.filename);break;case"arraybuffer":return We(Nn());case"blob":return qn(Nn());case"bloburi":case"bloburl":if(Jt.URL!==void 0&&typeof Jt.URL.createObjectURL=="function")return Jt.URL&&Jt.URL.createObjectURL(qn(Nn()))||void 0;zr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ee="",Ue=Nn();try{Ee=x1(Ue)}catch{Ee=x1(unescape(encodeURIComponent(Ue)))}return"data:application/pdf;filename="+me.filename+";base64,"+Ee;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var $e="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",at=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';me.pdfObjectUrl&&($e=me.pdfObjectUrl,at="");var dt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+$e+'"'+at+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(me)+");<\/script></body></html>",kt=Jt.open();return kt!==null&&kt.document.write(dt),kt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Jt)==="[object Window]"){var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(me.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+me.filename+'" width="500px" height="400px" /></body></html>',Ht=Jt.open();if(Ht!==null){Ht.document.write(Et);var er=this;Ht.document.documentElement.querySelector("#pdfViewer").onload=function(){Ht.document.title=me.filename,Ht.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(er.output("bloburl"))}}return Ht}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Jt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",me)+'"></iframe></body></html>',rs=Jt.open();if(rs!==null&&(rs.document.write(yr),rs.document.title=me.filename),rs||typeof safari>"u")return rs;break;case"datauri":case"dataurl":return Jt.document.location.href=this.output("datauristring",me);default:return null}},ha.foo=function(){try{return ha.apply(this,arguments)}catch(Ee){var R=Ee.stack||"";~R.indexOf(" at ")&&(R=R.split(" at ")[1]);var me="Error in function "+R.split(`
`)[0].split("<")[0]+": "+Ee.message;if(!Jt.console)throw new Error(me);Jt.console.error(me,Ee),Jt.alert&&alert(me)}},ha.foo.bar=ha,ha.foo),Wo=function(R){return Array.isArray(br)===!0&&br.indexOf(R)>-1};switch(a){case"pt":Qe=1;break;case"mm":Qe=72/25.4;break;case"cm":Qe=72/2.54;break;case"in":Qe=72;break;case"px":Qe=Wo("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qe=12;break;case"ex":Qe=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Qe=a}var gs=null;H(),M();var Ko=f.__private__.getPageInfo=f.getPageInfo=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ft[R].objId,pageNumber:R,pageContext:ft[R]}},zd=f.__private__.getPageInfoByObjId=function(R){if(isNaN(R)||R%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var me in ft)if(ft[me].objId===R)break;return Ko(me)},Oc=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ft[ee].objId,pageNumber:ee,pageContext:ft[ee]}};f.addPage=function(){return mo.apply(this,arguments),this},f.setPage=function(){return qa.apply(this,arguments),je.call(this,ye[ee]),this},f.insertPage=function(R){return this.addPage(),this.movePage(ee,R),this},f.movePage=function(R,me){var Ee,Ue;if(R>me){Ee=ye[R],Ue=ft[R];for(var $e=R;$e>me;$e--)ye[$e]=ye[$e-1],ft[$e]=ft[$e-1];ye[me]=Ee,ft[me]=Ue,this.setPage(me)}else if(R<me){Ee=ye[R],Ue=ft[R];for(var at=R;at<me;at++)ye[at]=ye[at+1],ft[at]=ft[at+1];ye[me]=Ee,ft[me]=Ue,this.setPage(me)}return this},f.deletePage=function(){return ho.apply(this,arguments),this},f.__private__.text=f.text=function(R,me,Ee,Ue,$e){var at,dt,kt,Et,Ht,er,yr,rs,Cs,Cr=(Ue=Ue||{}).scope||this;if(typeof R=="number"&&typeof me=="number"&&(typeof Ee=="string"||Array.isArray(Ee))){var Is=Ee;Ee=me,me=R,R=Is}if(arguments[3]instanceof Dt==0?(kt=arguments[4],Et=arguments[5],Rr(yr=arguments[3])==="object"&&yr!==null||(typeof kt=="string"&&(Et=kt,kt=null),typeof yr=="string"&&(Et=yr,yr=null),typeof yr=="number"&&(kt=yr,yr=null),Ue={flags:yr,angle:kt,align:Et})):(_("The transform parameter of text() with a Matrix value"),Cs=$e),isNaN(me)||isNaN(Ee)||R==null)throw new Error("Invalid arguments passed to jsPDF.text");if(R.length===0)return Cr;var Ss,na="",Mi=typeof Ue.lineHeightFactor=="number"?Ue.lineHeightFactor:Wa,go=Cr.internal.scaleFactor;function Xd(Or){return Or=Or.split("	").join(Array(Ue.TabLen||9).join(" ")),aa(Or,yr)}function Zd(Or){for(var Hr,ps=Or.concat(),xs=[],Ls=ps.length;Ls--;)typeof(Hr=ps.shift())=="string"?xs.push(Hr):Array.isArray(Or)&&(Hr.length===1||Hr[1]===void 0&&Hr[2]===void 0)?xs.push(Hr[0]):xs.push([Hr[0],Hr[1],Hr[2]]);return xs}function Xo(Or,Hr){var ps;if(typeof Or=="string")ps=Hr(Or)[0];else if(Array.isArray(Or)){for(var xs,Ls,fi=Or.concat(),Gn=[],Ml=fi.length;Ml--;)typeof(xs=fi.shift())=="string"?Gn.push(Hr(xs)[0]):Array.isArray(xs)&&typeof xs[0]=="string"&&(Ls=Hr(xs[0],xs[1],xs[2]),Gn.push([Ls[0],Ls[1],Ls[2]]));ps=Gn}return ps}var zn=!1,Kc=!0;if(typeof R=="string")zn=!0;else if(Array.isArray(R)){var po=R.concat();dt=[];for(var xo,Gs=po.length;Gs--;)(typeof(xo=po.shift())!="string"||Array.isArray(xo)&&typeof xo[0]!="string")&&(Kc=!1);zn=Kc}if(zn===!1)throw new Error('Type of text must be string or Array. "'+R+'" is not recognized.');typeof R=="string"&&(R=R.match(/[\r?\n]/)?R.split(/\r\n|\r|\n/g):[R]);var Ri=U/Cr.internal.scaleFactor,Ai=Ri*(Mi-1);switch(Ue.baseline){case"bottom":Ee-=Ai;break;case"top":Ee+=Ri-Ai;break;case"hanging":Ee+=Ri-2*Ai;break;case"middle":Ee+=Ri/2-Ai}if((er=Ue.maxWidth||0)>0&&(typeof R=="string"?R=Cr.splitTextToSize(R,er):Object.prototype.toString.call(R)==="[object Array]"&&(R=R.reduce(function(Or,Hr){return Or.concat(Cr.splitTextToSize(Hr,er))},[]))),at={text:R,x:me,y:Ee,options:Ue,mutex:{pdfEscape:aa,activeFontKey:Fe,fonts:lt,activeFontSize:U}},Qt.publish("preProcessText",at),R=at.text,kt=(Ue=at.options).angle,Cs instanceof Dt==0&&kt&&typeof kt=="number"){kt*=Math.PI/180,Ue.rotationDirection===0&&(kt=-kt),F===B&&(kt=-kt);var Il=Math.cos(kt),zc=Math.sin(kt);Cs=new Dt(Il,zc,-zc,Il,0,0)}else kt&&kt instanceof Dt&&(Cs=kt);F!==B||Cs||(Cs=Ps),(Ht=Ue.charSpace||Kn)!==void 0&&(na+=D(E(Ht))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(rs=Ue.horizontalScale)!==void 0&&(na+=D(100*rs)+` Tz
`),Ue.lang;var Fa=-1,eu=Ue.renderingMode!==void 0?Ue.renderingMode:Ue.stroke,Ul=Cr.internal.getCurrentPageInfo().pageContext;switch(eu){case 0:case!1:case"fill":Fa=0;break;case 1:case!0:case"stroke":Fa=1;break;case 2:case"fillThenStroke":Fa=2;break;case 3:case"invisible":Fa=3;break;case 4:case"fillAndAddForClipping":Fa=4;break;case 5:case"strokeAndAddPathForClipping":Fa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fa=6;break;case 7:case"addToPathForClipping":Fa=7}var tu=Ul.usedRenderingMode!==void 0?Ul.usedRenderingMode:-1;Fa!==-1?na+=Fa+` Tr
`:tu!==-1&&(na+=`0 Tr
`),Fa!==-1&&(Ul.usedRenderingMode=Fa),Et=Ue.align||"left";var Us,Ka=U*Mi,Qi=Cr.internal.pageSize.getWidth(),Gc=lt[Fe];Ht=Ue.charSpace||Kn,er=Ue.maxWidth||0,yr=Object.assign({autoencode:!0,noBOM:!0},Ue.flags);var Oi=[],Zo=function(Or){return Cr.getStringUnitWidth(Or,{font:Gc,charSpace:Ht,fontSize:U,doKerning:!1})*U/go};if(Object.prototype.toString.call(R)==="[object Array]"){var Ea;dt=Zd(R),Et!=="left"&&(Us=dt.map(Zo));var _a,bo=0;if(Et==="right"){me-=Us[0],R=[],Gs=dt.length;for(var Pa=0;Pa<Gs;Pa++)Pa===0?(_a=fn(me),Ea=Li(Ee)):(_a=E(bo-Us[Pa]),Ea=-Ka),R.push([dt[Pa],_a,Ea]),bo=Us[Pa]}else if(Et==="center"){me-=Us[0]/2,R=[],Gs=dt.length;for(var yo=0;yo<Gs;yo++)yo===0?(_a=fn(me),Ea=Li(Ee)):(_a=E((bo-Us[yo])/2),Ea=-Ka),R.push([dt[yo],_a,Ea]),bo=Us[yo]}else if(Et==="left"){R=[],Gs=dt.length;for(var Vc=0;Vc<Gs;Vc++)R.push(dt[Vc])}else if(Et==="justify"&&Gc.encoding==="Identity-H"){R=[],Gs=dt.length,er=er!==0?er:Qi;for(var vo=0,os=0;os<Gs;os++)if(Ea=os===0?Li(Ee):-Ka,_a=os===0?fn(me):vo,os<Gs-1){var ru=E((er-Us[os])/(dt[os].split(" ").length-1)),za=dt[os].split(" ");R.push([za[0]+" ",_a,Ea]),vo=0;for(var Ga=1;Ga<za.length;Ga++){var Ll=(Zo(za[Ga-1]+" "+za[Ga])-Zo(za[Ga]))*go+ru;Ga==za.length-1?R.push([za[Ga],Ll,0]):R.push([za[Ga]+" ",Ll,0]),vo-=Ll}}else R.push([dt[os],_a,Ea]);R.push(["",vo,0])}else{if(Et!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(R=[],Gs=dt.length,er=er!==0?er:Qi,os=0;os<Gs;os++)Ea=os===0?Li(Ee):-Ka,_a=os===0?fn(me):0,os<Gs-1?Oi.push(D(E((er-Us[os])/(dt[os].split(" ").length-1)))):Oi.push(0),R.push([dt[os],_a,Ea])}}(typeof Ue.R2L=="boolean"?Ue.R2L:Re)===!0&&(R=Xo(R,function(Or,Hr,ps){return[Or.split("").reverse().join(""),Hr,ps]})),at={text:R,x:me,y:Ee,options:Ue,mutex:{pdfEscape:aa,activeFontKey:Fe,fonts:lt,activeFontSize:U}},Qt.publish("postProcessText",at),R=at.text,Ss=at.mutex.isHex||!1;var wo=lt[Fe].encoding;wo!=="WinAnsiEncoding"&&wo!=="StandardEncoding"||(R=Xo(R,function(Or,Hr,ps){return[Xd(Or),Hr,ps]})),dt=Zd(R),R=[];for(var Tl,el,Hi,qi=Array.isArray(dt[0])?1:0,mi="",Dl=function(Or,Hr,ps){var xs="";return ps instanceof Dt?(ps=typeof Ue.angle=="number"?ts(ps,new Dt(1,0,0,1,Or,Hr)):ts(new Dt(1,0,0,1,Or,Hr),ps),F===B&&(ps=ts(new Dt(1,0,0,-1,0,0),ps)),xs=ps.join(" ")+` Tm
`):xs=D(Or)+" "+D(Hr)+` Td
`,xs},Va=0;Va<dt.length;Va++){switch(mi="",qi){case 1:Hi=(Ss?"<":"(")+dt[Va][0]+(Ss?">":")"),Tl=parseFloat(dt[Va][1]),el=parseFloat(dt[Va][2]);break;case 0:Hi=(Ss?"<":"(")+dt[Va]+(Ss?">":")"),Tl=fn(me),el=Li(Ee)}Oi!==void 0&&Oi[Va]!==void 0&&(mi=Oi[Va]+` Tw
`),Va===0?R.push(mi+Dl(Tl,el,Cs)+Hi):qi===0?R.push(mi+Hi):qi===1&&R.push(mi+Dl(Tl,el,Cs)+Hi)}R=qi===0?R.join(` Tj
T* `):R.join(` Tj
`),R+=` Tj
`;var hi=`BT
/`;return hi+=Fe+" "+U+` Tf
`,hi+=D(U*Mi)+` TL
`,hi+=Wn+`
`,hi+=na,hi+=R,ce(hi+="ET"),x[Fe]=!0,Cr};var zo=f.__private__.clip=f.clip=function(R){return ce(R==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return zo("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ce("n"),this};var oi=f.__private__.isValidStyle=function(R){var me=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(R)!==-1&&(me=!0),me};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(R){return oi(R)&&(u=R),this};var Bl=f.__private__.getStyle=f.getStyle=function(R){var me=u;switch(R){case"D":case"S":me="S";break;case"F":me="f";break;case"FD":case"DF":me="B";break;case"f":case"f*":case"B":case"B*":me=R}return me},xr=f.close=function(){return ce("h"),this};f.stroke=function(){return ce("S"),this},f.fill=function(R){return Ii("f",R),this},f.fillEvenOdd=function(R){return Ii("f*",R),this},f.fillStroke=function(R){return Ii("B",R),this},f.fillStrokeEvenOdd=function(R){return Ii("B*",R),this};var Ii=function(R,me){Rr(me)==="object"?Gd(me,R):ce(R)},kl=function(R){R===null||F===B&&R===void 0||(R=Bl(R),ce(R))};function Hc(R,me,Ee,Ue,$e){var at=new jd(me||this.boundingBox,Ee||this.xStep,Ue||this.yStep,this.gState,$e||this.matrix);at.stream=this.stream;var dt=R+"$$"+this.cloneIndex+++"$$";return Vr(dt,at),at}var Gd=function(R,me){var Ee=Ut[R.key],Ue=bt[Ee];if(Ue instanceof fc)ce("q"),ce(Vd(me)),Ue.gState&&f.setGState(Ue.gState),ce(R.matrix.toString()+" cm"),ce("/"+Ee+" sh"),ce("Q");else if(Ue instanceof jd){var $e=new Dt(1,0,0,-1,0,ga());R.matrix&&($e=$e.multiply(R.matrix||Ps),Ee=Hc.call(Ue,R.key,R.boundingBox,R.xStep,R.yStep,$e).id),ce("q"),ce("/Pattern cs"),ce("/"+Ee+" scn"),Ue.gState&&f.setGState(Ue.gState),ce(me),ce("Q")}},Vd=function(R){switch(R){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Fl=f.moveTo=function(R,me){return ce(D(E(R))+" "+D(O(me))+" m"),this},Ui=f.lineTo=function(R,me){return ce(D(E(R))+" "+D(O(me))+" l"),this},$n=f.curveTo=function(R,me,Ee,Ue,$e,at){return ce([D(E(R)),D(O(me)),D(E(Ee)),D(O(Ue)),D(E($e)),D(O(at)),"c"].join(" ")),this};f.__private__.line=f.line=function(R,me,Ee,Ue,$e){if(isNaN(R)||isNaN(me)||isNaN(Ee)||isNaN(Ue)||!oi($e))throw new Error("Invalid arguments passed to jsPDF.line");return F===C?this.lines([[Ee-R,Ue-me]],R,me,[1,1],$e||"S"):this.lines([[Ee-R,Ue-me]],R,me,[1,1]).stroke()},f.__private__.lines=f.lines=function(R,me,Ee,Ue,$e,at){var dt,kt,Et,Ht,er,yr,rs,Cs,Cr,Is,Ss,na;if(typeof R=="number"&&(na=Ee,Ee=me,me=R,R=na),Ue=Ue||[1,1],at=at||!1,isNaN(me)||isNaN(Ee)||!Array.isArray(R)||!Array.isArray(Ue)||!oi($e)||typeof at!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fl(me,Ee),dt=Ue[0],kt=Ue[1],Ht=R.length,Is=me,Ss=Ee,Et=0;Et<Ht;Et++)(er=R[Et]).length===2?(Is=er[0]*dt+Is,Ss=er[1]*kt+Ss,Ui(Is,Ss)):(yr=er[0]*dt+Is,rs=er[1]*kt+Ss,Cs=er[2]*dt+Is,Cr=er[3]*kt+Ss,Is=er[4]*dt+Is,Ss=er[5]*kt+Ss,$n(yr,rs,Cs,Cr,Is,Ss));return at&&xr(),kl($e),this},f.path=function(R){for(var me=0;me<R.length;me++){var Ee=R[me],Ue=Ee.c;switch(Ee.op){case"m":Fl(Ue[0],Ue[1]);break;case"l":Ui(Ue[0],Ue[1]);break;case"c":$n.apply(this,Ue);break;case"h":xr()}}return this},f.__private__.rect=f.rect=function(R,me,Ee,Ue,$e){if(isNaN(R)||isNaN(me)||isNaN(Ee)||isNaN(Ue)||!oi($e))throw new Error("Invalid arguments passed to jsPDF.rect");return F===C&&(Ue=-Ue),ce([D(E(R)),D(O(me)),D(E(Ee)),D(E(Ue)),"re"].join(" ")),kl($e),this},f.__private__.triangle=f.triangle=function(R,me,Ee,Ue,$e,at,dt){if(isNaN(R)||isNaN(me)||isNaN(Ee)||isNaN(Ue)||isNaN($e)||isNaN(at)||!oi(dt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ee-R,Ue-me],[$e-Ee,at-Ue],[R-$e,me-at]],R,me,[1,1],dt,!0),this},f.__private__.roundedRect=f.roundedRect=function(R,me,Ee,Ue,$e,at,dt){if(isNaN(R)||isNaN(me)||isNaN(Ee)||isNaN(Ue)||isNaN($e)||isNaN(at)||!oi(dt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var kt=4/3*(Math.SQRT2-1);return $e=Math.min($e,.5*Ee),at=Math.min(at,.5*Ue),this.lines([[Ee-2*$e,0],[$e*kt,0,$e,at-at*kt,$e,at],[0,Ue-2*at],[0,at*kt,-$e*kt,at,-$e,at],[2*$e-Ee,0],[-$e*kt,0,-$e,-at*kt,-$e,-at],[0,2*at-Ue],[0,-at*kt,$e*kt,-at,$e,-at]],R+$e,me,[1,1],dt,!0),this},f.__private__.ellipse=f.ellipse=function(R,me,Ee,Ue,$e){if(isNaN(R)||isNaN(me)||isNaN(Ee)||isNaN(Ue)||!oi($e))throw new Error("Invalid arguments passed to jsPDF.ellipse");var at=4/3*(Math.SQRT2-1)*Ee,dt=4/3*(Math.SQRT2-1)*Ue;return Fl(R+Ee,me),$n(R+Ee,me-dt,R+at,me-Ue,R,me-Ue),$n(R-at,me-Ue,R-Ee,me-dt,R-Ee,me),$n(R-Ee,me+dt,R-at,me+Ue,R,me+Ue),$n(R+at,me+Ue,R+Ee,me+dt,R+Ee,me),kl($e),this},f.__private__.circle=f.circle=function(R,me,Ee,Ue){if(isNaN(R)||isNaN(me)||isNaN(Ee)||!oi(Ue))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(R,me,Ee,Ee,Ue)},f.setFont=function(R,me,Ee){return Ee&&(me=P(me,Ee)),Fe=Wd(R,me,{disableWarning:!1}),this};var li=f.__private__.getFont=f.getFont=function(){return lt[Wd.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var R,me,Ee={};for(R in vt)if(vt.hasOwnProperty(R))for(me in Ee[R]=[],vt[R])vt[R].hasOwnProperty(me)&&Ee[R].push(me);return Ee},f.addFont=function(R,me,Ee,Ue,$e){var at=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&at.indexOf(arguments[3])!==-1?$e=arguments[3]:arguments[3]&&at.indexOf(arguments[3])==-1&&(Ee=P(Ee,Ue)),Pi.call(this,R,me,Ee,$e=$e||"Identity-H")};var Wa,Cn=s.lineWidth||.200025,Kt=f.__private__.getLineWidth=f.getLineWidth=function(){return Cn},Go=f.__private__.setLineWidth=f.setLineWidth=function(R){return Cn=R,ce(D(E(R))+" w"),this};f.__private__.setLineDash=Lt.API.setLineDash=Lt.API.setLineDashPattern=function(R,me){if(R=R||[],me=me||0,isNaN(me)||!Array.isArray(R))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return R=R.map(function(Ee){return D(E(Ee))}).join(" "),me=D(E(me)),ce("["+R+"] "+me+" d"),this};var ci=f.__private__.getLineHeight=f.getLineHeight=function(){return U*Wa};f.__private__.getLineHeight=f.getLineHeight=function(){return U*Wa};var FA=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(R){return typeof(R=R||1.15)=="number"&&(Wa=R),this},Yd=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Wa};FA(s.lineHeight);var fn=f.__private__.getHorizontalCoordinate=function(R){return E(R)},Li=f.__private__.getVerticalCoordinate=function(R){return F===B?R:ft[ee].mediaBox.topRightY-ft[ee].mediaBox.bottomLeftY-E(R)},Jd=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(R){return D(fn(R))},El=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(R){return D(Li(R))},Vo=s.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return jn(Vo)},f.__private__.setStrokeColor=f.setDrawColor=function(R,me,Ee,Ue){return Vo=zs({ch1:R,ch2:me,ch3:Ee,ch4:Ue,pdfColorType:"draw",precision:2}),ce(Vo),this};var qc=s.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return jn(qc)},f.__private__.setFillColor=f.setFillColor=function(R,me,Ee,Ue){return qc=zs({ch1:R,ch2:me,ch3:Ee,ch4:Ue,pdfColorType:"fill",precision:2}),ce(qc),this};var Wn=s.textColor||"0 g",di=f.__private__.getTextColor=f.getTextColor=function(){return jn(Wn)};f.__private__.setTextColor=f.setTextColor=function(R,me,Ee,Ue){return Wn=zs({ch1:R,ch2:me,ch3:Ee,ch4:Ue,pdfColorType:"text",precision:3}),this};var Kn=s.charSpace,_l=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Kn||0)};f.__private__.setCharSpace=f.setCharSpace=function(R){if(isNaN(R))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Kn=R,this};var $c=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(R){var me=f.CapJoinStyles[R];if(me===void 0)throw new Error("Line cap style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $c=me,ce(me+" J"),this};var Wc=0;f.__private__.setLineJoin=f.setLineJoin=function(R){var me=f.CapJoinStyles[R];if(me===void 0)throw new Error("Line join style of '"+R+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wc=me,ce(me+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(R){if(R=R||0,isNaN(R))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ce(D(E(R))+" M"),this},f.GState=Sh,f.setGState=function(R){(R=typeof R=="string"?jt[qe[R]]:Ti(null,R)).equals(ht)||(ce("/"+R.id+" gs"),ht=R)};var Ti=function(R,me){if(!R||!qe[R]){var Ee=!1;for(var Ue in jt)if(jt.hasOwnProperty(Ue)&&jt[Ue].equals(me)){Ee=!0;break}if(Ee)me=jt[Ue];else{var $e="GS"+(Object.keys(jt).length+1).toString(10);jt[$e]=me,me.id=$e}return R&&(qe[R]=me.id),Qt.publish("addGState",me),me}};f.addGState=function(R,me){return Ti(R,me),this},f.saveGraphicsState=function(){return ce("q"),ct.push({key:Fe,size:U,color:Wn}),this},f.restoreGraphicsState=function(){ce("Q");var R=ct.pop();return Fe=R.key,U=R.size,Wn=R.color,ht=null,this},f.setCurrentTransformationMatrix=function(R){return ce(R.toString()+" cm"),this},f.comment=function(R){return ce("#"+R),this};var ui=function(R,me){var Ee=R||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ee},set:function(at){isNaN(at)||(Ee=parseFloat(at))}});var Ue=me||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ue},set:function(at){isNaN(at)||(Ue=parseFloat(at))}});var $e="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return $e},set:function(at){$e=at.toString()}}),this},Yo=function(R,me,Ee,Ue){ui.call(this,R,me),this.type="rect";var $e=Ee||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return $e},set:function(dt){isNaN(dt)||($e=parseFloat(dt))}});var at=Ue||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return at},set:function(dt){isNaN(dt)||(at=parseFloat(dt))}}),this},Jo=function(){this.page=yt,this.currentPage=ee,this.pages=ye.slice(0),this.pagesContext=ft.slice(0),this.x=Ie,this.y=et,this.matrix=ot,this.width=fo(ee),this.height=ga(ee),this.outputDestination=Ce,this.id="",this.objectNumber=-1};Jo.prototype.restore=function(){yt=this.page,ee=this.currentPage,ft=this.pagesContext,ye=this.pages,Ie=this.x,et=this.y,ot=this.matrix,Pl(ee,this.width),gn(ee,this.height),Ce=this.outputDestination};var Sn=function(R,me,Ee,Ue,$e){Gr.push(new Jo),yt=ee=0,ye=[],Ie=R,et=me,ot=$e,ii([Ee,Ue])};for(var Di in f.beginFormObject=function(R,me,Ee,Ue,$e){return Sn(R,me,Ee,Ue,$e),this},f.endFormObject=function(R){return(function(me){if(pr[me])Gr.pop().restore();else{var Ee=new Jo,Ue="Xo"+(Object.keys(Wt).length+1).toString(10);Ee.id=Ue,pr[me]=Ue,Wt[Ue]=Ee,Qt.publish("addFormObject",Ee),Gr.pop().restore()}})(R),this},f.doFormObject=function(R,me){var Ee=Wt[pr[R]];return ce("q"),ce(me.toString()+" cm"),ce("/"+Ee.id+" Do"),ce("Q"),this},f.getFormObject=function(R){var me=Wt[pr[R]];return{x:me.x,y:me.y,width:me.width,height:me.height,matrix:me.matrix}},f.save=function(R,me){return R=R||"generated.pdf",(me=me||{}).returnPromise=me.returnPromise||!1,me.returnPromise===!1?(bd(qn(Nn()),R),typeof bd.unload=="function"&&Jt.setTimeout&&setTimeout(bd.unload,911),this):new Promise(function(Ee,Ue){try{var $e=bd(qn(Nn()),R);typeof bd.unload=="function"&&Jt.setTimeout&&setTimeout(bd.unload,911),Ee($e)}catch(at){Ue(at.message)}})},Lt.API)Lt.API.hasOwnProperty(Di)&&(Di==="events"&&Lt.API.events.length?(function(R,me){var Ee,Ue,$e;for($e=me.length-1;$e!==-1;$e--)Ee=me[$e][0],Ue=me[$e][1],R.subscribe.apply(R,[Ee].concat(typeof Ue=="function"?[Ue]:Ue))})(Qt,Lt.API.events):f[Di]=Lt.API[Di]);var fo=f.getPageWidth=function(R){return(ft[R=R||ee].mediaBox.topRightX-ft[R].mediaBox.bottomLeftX)/Qe},Pl=f.setPageWidth=function(R,me){ft[R].mediaBox.topRightX=me*Qe+ft[R].mediaBox.bottomLeftX},ga=f.getPageHeight=function(R){return(ft[R=R||ee].mediaBox.topRightY-ft[R].mediaBox.bottomLeftY)/Qe},gn=f.setPageHeight=function(R,me){ft[R].mediaBox.topRightY=me*Qe+ft[R].mediaBox.bottomLeftY};return f.internal={pdfEscape:aa,getStyle:Bl,getFont:li,getFontSize:Se,getCharSpace:_l,getTextColor:di,getLineHeight:ci,getLineHeightFactor:Yd,getLineWidth:Kt,write:Te,getHorizontalCoordinate:fn,getVerticalCoordinate:Li,getCoordinateString:Jd,getVerticalCoordinateString:El,collections:{},newObject:cr,newAdditionalObject:wn,newObjectDeferred:Qr,newObjectDeferredBegin:is,getFilters:Ha,putStream:or,events:Qt,scaleFactor:Qe,pageSize:{getWidth:function(){return fo(ee)},setWidth:function(R){Pl(ee,R)},getHeight:function(){return ga(ee)},setHeight:function(R){gn(ee,R)}},encryptionOptions:m,encryption:gs,getEncryptor:function(R){return m!==null?gs.encryptor(R,0):function(me){return me}},output:$a,getNumberOfPages:hn,pages:ye,out:ce,f2:k,f3:L,getPageInfo:Ko,getPageInfoByObjId:zd,getCurrentPageInfo:Oc,getPDFVersion:v,Point:ui,Rectangle:Yo,Matrix:Dt,hasHotfix:Wo},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return fo(ee)},set:function(R){Pl(ee,R)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return ga(ee)},set:function(R){gn(ee,R)},enumerable:!0,configurable:!0}),(function(R){for(var me=0,Ee=Le.length;me<Ee;me++){var Ue=Pi.call(this,R[me][0],R[me][1],R[me][2],Le[me][3],!0);h===!1&&(x[Ue]=!0);var $e=R[me][0].split("-");qo({id:Ue,fontName:$e[0],fontStyle:$e[1]||""})}Qt.publish("addFonts",{fonts:lt,dictionary:vt})}).call(f,Le),Fe="F1",mo(n,r),Qt.publish("initialized"),f}Zu.prototype.lsbFirstWord=function(s){return String.fromCharCode(255&s,s>>8&255,s>>16&255,s>>24&255)},Zu.prototype.toHexString=function(s){return s.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zu.prototype.hexToBytes=function(s){for(var t=[],r=0;r<s.length;r+=2)t.push(String.fromCharCode(parseInt(s.substr(r,2),16)));return t.join("")},Zu.prototype.processOwnerPassword=function(s,t){return xb(pb(t).substr(0,5),s)},Zu.prototype.encryptor=function(s,t){var r=pb(this.encryptionKey+String.fromCharCode(255&s,s>>8&255,s>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return xb(r,a)}},Sh.prototype.equals=function(s){var t,r="id,objectNumber,equals";if(!s||Rr(s)!==Rr(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!s.hasOwnProperty(t)||this[t]!==s[t])return!1;a++}for(t in s)s.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},Lt.API={events:[]},Lt.version="3.0.2";var _s=Lt.API,jy=1,$d=function(s){return s.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Hu=function(s){return s.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},sr=function(s){return s.toFixed(2)},ic=function(s){return s.toFixed(5)};_s.__acroform__={};var On=function(s,t){s.prototype=Object.create(t.prototype),s.prototype.constructor=s},w1=function(s){return s*jy},Po=function(s){var t=new ZS,r=Pt.internal.getHeight(s)||0,a=Pt.internal.getWidth(s)||0;return t.BBox=[0,0,Number(sr(a)),Number(sr(r))],t},j8=_s.__acroform__.setBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return s|1<<t},N8=_s.__acroform__.clearBit=function(s,t){if(s=s||0,t=t||0,isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return s&~(1<<t)},C8=_s.__acroform__.getBit=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return s&1<<t?1:0},Os=_s.__acroform__.getBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return C8(s,t-1)},Hs=_s.__acroform__.setBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return j8(s,t-1)},qs=_s.__acroform__.clearBitForPdf=function(s,t){if(isNaN(s)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return N8(s,t-1)},S8=_s.__acroform__.calculateCoordinates=function(s,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,n=s[0],i=s[1],o=s[2],l=s[3],d={};return d.lowerLeft_X=r(n)||0,d.lowerLeft_Y=a(i+l)||0,d.upperRight_X=r(n+o)||0,d.upperRight_Y=a(i)||0,[Number(sr(d.lowerLeft_X)),Number(sr(d.lowerLeft_Y)),Number(sr(d.upperRight_X)),Number(sr(d.upperRight_Y))]},B8=function(s){if(s.appearanceStreamContent)return s.appearanceStreamContent;if(s.V||s.DV){var t=[],r=s._V||s.DV,a=bb(s,r),n=s.scope.internal.getFont(s.fontName,s.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(s.scope.__private__.encodeColorString(s.color)),t.push("/"+n+" "+sr(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Po(s);return i.scope=s.scope,i.stream=t.join(`
`),i}},bb=function(s,t){var r=s.fontSize===0?s.maxFontSize:s.fontSize,a={text:"",fontSize:""},n=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");n=s.multiline?n.map(function(k){return k.split(`
`)}):n.map(function(k){return[k]});var i=r,o=Pt.internal.getHeight(s)||0;o=o<0?-o:o;var l=Pt.internal.getWidth(s)||0;l=l<0?-l:l;var d=function(k,L,E){if(k+1<n.length){var O=L+" "+n[k+1][0];return zf(O,s,E).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,m,h=zf("3",s,i).height,x=s.multiline?o-i:(o-h)/2,f=x+=2,b=0,v=0,j=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+zf(t,s,i=12).width+", FieldWidth:"+l+`
`;break}for(var S="",C=0,B=0;B<n.length;B++)if(n.hasOwnProperty(B)){var F=!1;if(n[B].length!==1&&j!==n[B].length-1){if((h+2)*(C+2)+2>o)continue e;S+=n[B][j],F=!0,v=B,B--}else{S=(S+=n[B][j]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var Q=parseInt(B),q=d(Q,S,i),P=B>=n.length-1;if(q&&!P){S+=" ",j=0;continue}if(q||P){if(P)v=Q;else if(s.multiline&&(h+2)*(C+2)+2>o)continue e}else{if(!s.multiline||(h+2)*(C+2)+2>o)continue e;v=Q}}for(var D="",_=b;_<=v;_++){var $=n[_];if(s.multiline){if(_===v){D+=$[j]+" ",j=(j+1)%$.length;continue}if(_===b){D+=$[$.length-1]+" ";continue}}D+=$[0]+" "}switch(D=D.substr(D.length-1)==" "?D.substr(0,D.length-1):D,m=zf(D,s,i).width,s.textAlign){case"right":u=l-m-2;break;case"center":u=(l-m)/2;break;default:u=2}t+=sr(u)+" "+sr(f)+` Td
`,t+="("+$d(D)+`) Tj
`,t+=-sr(u)+` 0 Td
`,f=-(i+2),m=0,b=F?v:v+1,C++,S=""}break}return a.text=t,a.fontSize=i,a},zf=function(s,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(s,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:n}},k8={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},F8=function(s,t){var r={type:"reference",object:s};t.internal.getPageInfo(s.page).pageContext.annotations.find(function(a){return a.type===r.type&&a.object===r.object})===void 0&&t.internal.getPageInfo(s.page).pageContext.annotations.push(r)},E8=function(s,t){if(t.scope=s,s.internal!==void 0&&(s.internal.acroformPlugin===void 0||s.internal.acroformPlugin.isInitialized===!1)){if(co.FieldNum=0,s.internal.acroformPlugin=JSON.parse(JSON.stringify(k8)),s.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jy=s.internal.scaleFactor,s.internal.acroformPlugin.acroFormDictionaryRoot=new e4,s.internal.acroformPlugin.acroFormDictionaryRoot.scope=s,s.internal.acroformPlugin.acroFormDictionaryRoot._eventID=s.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(s)}),s.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in a)if(a.hasOwnProperty(n)){var i=a[n];i.objId=void 0,i.hasAnnotation&&F8(i,r)}})(s)}),s.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(s)}),s.internal.events.subscribe("postPutPages",function(r){(function(a,n){var i=!a;for(var o in a||(n.internal.newObjectDeferredBegin(n.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),n.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||n.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],d=[],u=l.Rect;if(l.Rect&&(l.Rect=S8(l.Rect,n)),n.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Pt.createDefaultAppearanceStream(l),Rr(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(d=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var m=B8(l);d.push({key:"AP",value:"<</N "+m+">>"}),n.internal.acroformPlugin.xForms.push(m)}if(l.appearanceStreamContent){var h="";for(var x in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(x)){var f=l.appearanceStreamContent[x];if(h+="/"+x+" ",h+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var b=f[o];typeof b=="function"&&(b=b.call(n,l)),h+="/"+o+" "+b+" ",n.internal.acroformPlugin.xForms.indexOf(b)>=0||n.internal.acroformPlugin.xForms.push(b)}}else typeof(b=f)=="function"&&(b=b.call(n,l)),h+="/"+o+" "+b,n.internal.acroformPlugin.xForms.indexOf(b)>=0||n.internal.acroformPlugin.xForms.push(b);h+=">>"}d.push({key:"AP",value:`<<
`+h+">>"})}n.internal.putStream({additionalKeyValues:d,objectId:l.objId}),n.internal.out("endobj")}i&&(function(v,j){for(var S in v)if(v.hasOwnProperty(S)){var C=S,B=v[S];j.internal.newObjectDeferredBegin(B.objId,!0),Rr(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete v[C]}})(n.internal.acroformPlugin.xForms,n)})(r,s)}),s.internal.acroformPlugin.isInitialized=!0}},XS=_s.__acroform__.arrayToPdfArray=function(s,t,r){var a=function(o){return o};if(Array.isArray(s)){for(var n="[",i=0;i<s.length;i++)switch(i!==0&&(n+=" "),Rr(s[i])){case"boolean":case"number":case"object":n+=s[i].toString();break;case"string":s[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),n+="("+$d(a(s[i].toString()))+")"):n+=s[i].toString()}return n+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},J0=function(s,t,r){var a=function(n){return n};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(s=s||"").toString(),"("+$d(a(s))+")"},Do=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(s){this._objId=s}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Do.prototype.toString=function(){return this.objId+" 0 R"},Do.prototype.putStream=function(){var s=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:s,objectId:this.objId}),this.scope.internal.out("endobj")},Do.prototype.getKeyValueListForStream=function(){var s=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],n=this[a];n&&(Array.isArray(n)?s.push({key:a,value:XS(n,this.objId,this.scope)}):n instanceof Do?(n.scope=this.scope,s.push({key:a,value:n.objId+" 0 R"})):typeof n!="function"&&s.push({key:a,value:n}))}return s};var ZS=function(){Do.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var s,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){s=r.trim()},get:function(){return s||null}})};On(ZS,Do);var e4=function(){Do.call(this);var s,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(s){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+$d(r(s))+")"}},set:function(r){s=r}})};On(e4,Do);var co=function s(){Do.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Os(t,3)},set:function(S){S?this.F=Hs(t,3):this.F=qs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(S){a=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(S){a[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(S){a[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(S){a[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(S){a[3]=S}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof $g)return;i="FieldObject"+s.FieldNum++}var S=function(C){return C};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+$d(S(i))+")"},set:function(S){i=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(S){i=S}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/jy:u},set:function(S){u=S}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(S){m=S}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof $g||this instanceof Fc))return J0(h,this.objId,this.scope)},set:function(S){S=S.toString(),h=S}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof da==0?J0(x,this.objId,this.scope):x},set:function(S){S=S.toString(),x=this instanceof da==0?S.substr(0,1)==="("?Hu(S.substr(1,S.length-2)):Hu(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof da==1?Hu(x.substr(1,x.length-1)):x},set:function(S){S=S.toString(),x=this instanceof da==1?"/"+S:S}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof da==0?J0(f,this.objId,this.scope):f},set:function(S){S=S.toString(),f=this instanceof da==0?S.substr(0,1)==="("?Hu(S.substr(1,S.length-2)):Hu(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof da==1?Hu(f.substr(1,f.length-1)):f},set:function(S){S=S.toString(),f=this instanceof da==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(S){S=!!S,v=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(S){b=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,1)},set:function(S){S?this.Ff=Hs(this.Ff,1):this.Ff=qs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,2)},set:function(S){S?this.Ff=Hs(this.Ff,2):this.Ff=qs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,3)},set:function(S){S?this.Ff=Hs(this.Ff,3):this.Ff=qs(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');j=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(j){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};On(co,Do);var Fd=function(){co.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var s=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return s},set:function(r){s=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XS(t,this.objId,this.scope)},set:function(r){var a,n;n=[],typeof(a=r)=="string"&&(n=(function(i,o,l){l||(l=1);for(var d,u=[];d=o.exec(i);)u.push(d[l]);return u})(a,/\((.*?)\)/g)),t=n}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,18)},set:function(r){r?this.Ff=Hs(this.Ff,18):this.Ff=qs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Hs(this.Ff,19):this.Ff=qs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,20)},set:function(r){r?(this.Ff=Hs(this.Ff,20),t.sort()):this.Ff=qs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,22)},set:function(r){r?this.Ff=Hs(this.Ff,22):this.Ff=qs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,23)},set:function(r){r?this.Ff=Hs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,27)},set:function(r){r?this.Ff=Hs(this.Ff,27):this.Ff=qs(this.Ff,27)}}),this.hasAppearanceStream=!1};On(Fd,co);var Ed=function(){Fd.call(this),this.fontName="helvetica",this.combo=!1};On(Ed,Fd);var _d=function(){Ed.call(this),this.combo=!0};On(_d,Ed);var ah=function(){_d.call(this),this.edit=!0};On(ah,_d);var da=function(){co.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,15)},set:function(r){r?this.Ff=Hs(this.Ff,15):this.Ff=qs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,16)},set:function(r){r?this.Ff=Hs(this.Ff,16):this.Ff=qs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,17)},set:function(r){r?this.Ff=Hs(this.Ff,17):this.Ff=qs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,26)},set:function(r){r?this.Ff=Hs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var s,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,n=[];for(a in n.push("<<"),t)n.push("/"+a+" ("+$d(r(t[a]))+")");return n.push(">>"),n.join(`
`)}},set:function(r){Rr(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return s},set:function(r){s=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return s.substr(1,s.length-1)},set:function(r){s="/"+r}})};On(da,co);var nh=function(){da.call(this),this.pushButton=!0};On(nh,da);var Pd=function(){da.call(this),this.radio=!0,this.pushButton=!1;var s=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t!==void 0?t:[]}})};On(Pd,da);var $g=function(){var s,t;co.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return s},set:function(n){s=n}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(n){t=n}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(l){return l};this.scope&&(n=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+$d(n(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(n){Rr(n)==="object"&&(a=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(n){typeof n=="string"&&(a.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(n){r=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(n){r="/"+n}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};On($g,co),Pd.prototype.setAppearance=function(s){if(!("createAppearanceStream"in s)||!("getCA"in s))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=s.createAppearanceStream(r.optionName),r.caption=s.getCA()}},Pd.prototype.createOption=function(s){var t=new $g;return t.Parent=this,t.optionName=s,this.Kids.push(t),_8.call(this.scope,t),t};var ih=function(){da.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pt.CheckBox.createAppearanceStream()};On(ih,da);var Fc=function(){co.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,13)},set:function(t){t?this.Ff=Hs(this.Ff,13):this.Ff=qs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,21)},set:function(t){t?this.Ff=Hs(this.Ff,21):this.Ff=qs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,23)},set:function(t){t?this.Ff=Hs(this.Ff,23):this.Ff=qs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,24)},set:function(t){t?this.Ff=Hs(this.Ff,24):this.Ff=qs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,25)},set:function(t){t?this.Ff=Hs(this.Ff,25):this.Ff=qs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,26)},set:function(t){t?this.Ff=Hs(this.Ff,26):this.Ff=qs(this.Ff,26)}});var s=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){Number.isInteger(t)&&(s=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};On(Fc,co);var oh=function(){Fc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Os(this.Ff,14)},set:function(s){s?this.Ff=Hs(this.Ff,14):this.Ff=qs(this.Ff,14)}}),this.password=!0};On(oh,Fc);var Pt={CheckBox:{createAppearanceStream:function(){return{N:{On:Pt.CheckBox.YesNormal},D:{On:Pt.CheckBox.YesPushDown,Off:Pt.CheckBox.OffPushDown}}},YesPushDown:function(s){var t=Po(s);t.scope=s.scope;var r=[],a=s.scope.internal.getFont(s.fontName,s.fontStyle).id,n=s.scope.__private__.encodeColorString(s.color),i=bb(s,s.caption);return r.push("0.749023 g"),r.push("0 0 "+sr(Pt.internal.getWidth(s))+" "+sr(Pt.internal.getHeight(s))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+sr(i.fontSize)+" Tf "+n),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(s){var t=Po(s);t.scope=s.scope;var r=s.scope.internal.getFont(s.fontName,s.fontStyle).id,a=s.scope.__private__.encodeColorString(s.color),n=[],i=Pt.internal.getHeight(s),o=Pt.internal.getWidth(s),l=bb(s,s.caption);return n.push("1 g"),n.push("0 0 "+sr(o)+" "+sr(i)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+sr(o-1)+" "+sr(i-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+r+" "+sr(l.fontSize)+" Tf "+a),n.push(l.text),n.push("ET"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(s){var t=Po(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sr(Pt.internal.getWidth(s))+" "+sr(Pt.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(s){var t={D:{Off:Pt.RadioButton.Circle.OffPushDown},N:{}};return t.N[s]=Pt.RadioButton.Circle.YesNormal,t.D[s]=Pt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(s){var t=Po(s);t.scope=s.scope;var r=[],a=Pt.internal.getWidth(s)<=Pt.internal.getHeight(s)?Pt.internal.getWidth(s)/4:Pt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=Pt.internal.Bezier_C,i=Number((a*n).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+ic(Pt.internal.getWidth(s)/2)+" "+ic(Pt.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Po(s);t.scope=s.scope;var r=[],a=Pt.internal.getWidth(s)<=Pt.internal.getHeight(s)?Pt.internal.getWidth(s)/4:Pt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*Pt.internal.Bezier_C).toFixed(5)),o=Number((a*Pt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ic(Pt.internal.getWidth(s)/2)+" "+ic(Pt.internal.getHeight(s)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+ic(Pt.internal.getWidth(s)/2)+" "+ic(Pt.internal.getHeight(s)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(s){var t=Po(s);t.scope=s.scope;var r=[],a=Pt.internal.getWidth(s)<=Pt.internal.getHeight(s)?Pt.internal.getWidth(s)/4:Pt.internal.getHeight(s)/4;a=Number((.9*a).toFixed(5));var n=Number((2*a).toFixed(5)),i=Number((n*Pt.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+ic(Pt.internal.getWidth(s)/2)+" "+ic(Pt.internal.getHeight(s)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(s){var t={D:{Off:Pt.RadioButton.Cross.OffPushDown},N:{}};return t.N[s]=Pt.RadioButton.Cross.YesNormal,t.D[s]=Pt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(s){var t=Po(s);t.scope=s.scope;var r=[],a=Pt.internal.calculateCross(s);return r.push("q"),r.push("1 1 "+sr(Pt.internal.getWidth(s)-2)+" "+sr(Pt.internal.getHeight(s)-2)+" re"),r.push("W"),r.push("n"),r.push(sr(a.x1.x)+" "+sr(a.x1.y)+" m"),r.push(sr(a.x2.x)+" "+sr(a.x2.y)+" l"),r.push(sr(a.x4.x)+" "+sr(a.x4.y)+" m"),r.push(sr(a.x3.x)+" "+sr(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(s){var t=Po(s);t.scope=s.scope;var r=Pt.internal.calculateCross(s),a=[];return a.push("0.749023 g"),a.push("0 0 "+sr(Pt.internal.getWidth(s))+" "+sr(Pt.internal.getHeight(s))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+sr(Pt.internal.getWidth(s)-2)+" "+sr(Pt.internal.getHeight(s)-2)+" re"),a.push("W"),a.push("n"),a.push(sr(r.x1.x)+" "+sr(r.x1.y)+" m"),a.push(sr(r.x2.x)+" "+sr(r.x2.y)+" l"),a.push(sr(r.x4.x)+" "+sr(r.x4.y)+" m"),a.push(sr(r.x3.x)+" "+sr(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(s){var t=Po(s);t.scope=s.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+sr(Pt.internal.getWidth(s))+" "+sr(Pt.internal.getHeight(s))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(s){var t=s.scope.internal.getFont(s.fontName,s.fontStyle).id,r=s.scope.__private__.encodeColorString(s.color);return"/"+t+" "+s.fontSize+" Tf "+r}};Pt.internal={Bezier_C:.551915024494,calculateCross:function(s){var t=Pt.internal.getWidth(s),r=Pt.internal.getHeight(s),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Pt.internal.getWidth=function(s){var t=0;return Rr(s)==="object"&&(t=w1(s.Rect[2])),t},Pt.internal.getHeight=function(s){var t=0;return Rr(s)==="object"&&(t=w1(s.Rect[3])),t};var _8=_s.addField=function(s){if(E8(this,s),!(s instanceof co))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=s).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),s.page=s.scope.internal.getCurrentPageInfo().pageNumber,this};_s.AcroFormChoiceField=Fd,_s.AcroFormListBox=Ed,_s.AcroFormComboBox=_d,_s.AcroFormEditBox=ah,_s.AcroFormButton=da,_s.AcroFormPushButton=nh,_s.AcroFormRadioButton=Pd,_s.AcroFormCheckBox=ih,_s.AcroFormTextField=Fc,_s.AcroFormPasswordField=oh,_s.AcroFormAppearance=Pt,_s.AcroForm={ChoiceField:Fd,ListBox:Ed,ComboBox:_d,EditBox:ah,Button:da,PushButton:nh,RadioButton:Pd,CheckBox:ih,TextField:Fc,PasswordField:oh,Appearance:Pt},Lt.AcroForm={ChoiceField:Fd,ListBox:Ed,ComboBox:_d,EditBox:ah,Button:da,PushButton:nh,RadioButton:Pd,CheckBox:ih,TextField:Fc,PasswordField:oh,Appearance:Pt};Lt.AcroForm;function t4(s){return s.reduce(function(t,r,a){return t[r]=a,t},{})}(function(s){var t="addImage_";s.__addimage__={};var r="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=s.__addimage__.getImageFileTypeByImageData=function(k,L){var E,O,le,te,V,M=r;if((L=L||r)==="RGBA"||k.data!==void 0&&k.data instanceof Uint8ClampedArray&&"height"in k&&"width"in k)return"RGBA";if(q(k))for(V in a)for(le=a[V],E=0;E<le.length;E+=1){for(te=!0,O=0;O<le[E].length;O+=1)if(le[E][O]!==void 0&&le[E][O]!==k[O]){te=!1;break}if(te===!0){M=V;break}}else for(V in a)for(le=a[V],E=0;E<le.length;E+=1){for(te=!0,O=0;O<le[E].length;O+=1)if(le[E][O]!==void 0&&le[E][O]!==k.charCodeAt(O)){te=!1;break}if(te===!0){M=V;break}}return M===r&&L!==r&&(M=L),M},i=function k(L){for(var E=this.internal.write,O=this.internal.putStream,le=(0,this.internal.getFilters)();le.indexOf("FlateEncode")!==-1;)le.splice(le.indexOf("FlateEncode"),1);L.objectId=this.internal.newObject();var te=[];if(te.push({key:"Type",value:"/XObject"}),te.push({key:"Subtype",value:"/Image"}),te.push({key:"Width",value:L.width}),te.push({key:"Height",value:L.height}),L.colorSpace===S.INDEXED?te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(L.palette.length/3-1)+" "+("sMask"in L&&L.sMask!==void 0?L.objectId+2:L.objectId+1)+" 0 R]"}):(te.push({key:"ColorSpace",value:"/"+L.colorSpace}),L.colorSpace===S.DEVICE_CMYK&&te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),te.push({key:"BitsPerComponent",value:L.bitsPerComponent}),"decodeParameters"in L&&L.decodeParameters!==void 0&&te.push({key:"DecodeParms",value:"<<"+L.decodeParameters+">>"}),"transparency"in L&&Array.isArray(L.transparency)){for(var V="",M=0,ie=L.transparency.length;M<ie;M++)V+=L.transparency[M]+" "+L.transparency[M]+" ";te.push({key:"Mask",value:"["+V+"]"})}L.sMask!==void 0&&te.push({key:"SMask",value:L.objectId+1+" 0 R"});var K=L.filter!==void 0?["/"+L.filter]:void 0;if(O({data:L.data,additionalKeyValues:te,alreadyAppliedFilters:K,objectId:L.objectId}),E("endobj"),"sMask"in L&&L.sMask!==void 0){var H=(L.predictor!=null?"/Predictor "+L.predictor:"")+" /Colors 1 /BitsPerComponent 8 /Columns "+L.width,I={width:L.width,height:L.height,colorSpace:"DeviceGray",bitsPerComponent:L.bitsPerComponent,decodeParameters:H,data:L.sMask};"filter"in L&&(I.filter=L.filter),k.call(this,I)}if(L.colorSpace===S.INDEXED){var ee=this.internal.newObject();O({data:D(new Uint8Array(L.palette)),objectId:ee}),E("endobj")}},o=function(){var k=this.internal.collections[t+"images"];for(var L in k)i.call(this,k[L])},l=function(){var k,L=this.internal.collections[t+"images"],E=this.internal.write;for(var O in L)E("/I"+(k=L[O]).index,k.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},u=function(){var k=this.internal.collections[t+"images"];return d.call(this),k},m=function(){return Object.keys(this.internal.collections[t+"images"]).length},h=function(k){return typeof s["process"+k.toUpperCase()]=="function"},x=function(k){return Rr(k)==="object"&&k.nodeType===1},f=function(k,L){if(k.nodeName==="IMG"&&k.hasAttribute("src")){var E=""+k.getAttribute("src");if(E.indexOf("data:image/")===0)return Ng(unescape(E).split("base64,").pop());var O=s.loadFile(E,!0);if(O!==void 0)return O}if(k.nodeName==="CANVAS"){if(k.width===0||k.height===0)throw new Error("Given canvas must have data. Canvas width: "+k.width+", height: "+k.height);var le;switch(L){case"PNG":le="image/png";break;case"WEBP":le="image/webp";break;default:le="image/jpeg"}return Ng(k.toDataURL(le,1).split("base64,").pop())}},b=function(k){var L=this.internal.collections[t+"images"];if(L){for(var E in L)if(k===L[E].alias)return L[E]}},v=function(k,L,E){return k||L||(k=-96,L=-96),k<0&&(k=-1*E.width*72/k/this.internal.scaleFactor),L<0&&(L=-1*E.height*72/L/this.internal.scaleFactor),k===0&&(k=L*E.width/E.height),L===0&&(L=k*E.height/E.width),[k,L]},j=function(k,L,E,O,le,te){var V=v.call(this,E,O,le),M=this.internal.getCoordinateString,ie=this.internal.getVerticalCoordinateString,K=u.call(this);if(E=V[0],O=V[1],K[le.index]=le,te){te*=Math.PI/180;var H=Math.cos(te),I=Math.sin(te),ee=function(de){return de.toFixed(4)},se=[ee(H),ee(I),ee(-1*I),ee(H),0,0,"cm"]}this.internal.write("q"),te?(this.internal.write([1,"0","0",1,M(k),ie(L+O),"cm"].join(" ")),this.internal.write(se.join(" ")),this.internal.write([M(E),"0","0",M(O),"0","0","cm"].join(" "))):this.internal.write([M(E),"0","0",M(O),M(k),ie(L+O),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+le.index+" Do"),this.internal.write("Q")},S=s.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};s.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=s.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=s.__addimage__.sHashCode=function(k){var L,E,O=0;if(typeof k=="string")for(E=k.length,L=0;L<E;L++)O=(O<<5)-O+k.charCodeAt(L),O|=0;else if(q(k))for(E=k.byteLength/2,L=0;L<E;L++)O=(O<<5)-O+k[L],O|=0;return O},F=s.__addimage__.validateStringAsBase64=function(k){(k=k||"").toString().trim();var L=!0;return k.length===0&&(L=!1),k.length%4!=0&&(L=!1),/^[A-Za-z0-9+/]+$/.test(k.substr(0,k.length-2))===!1&&(L=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(k.substr(-2))===!1&&(L=!1),L},Q=s.__addimage__.extractImageFromDataUrl=function(k){if(k==null||!(k=k.trim()).startsWith("data:"))return null;var L=k.indexOf(",");return L<0?null:k.substring(0,L).trim().endsWith("base64")?k.substring(L+1):null};s.__addimage__.isArrayBuffer=function(k){return k instanceof ArrayBuffer};var q=s.__addimage__.isArrayBufferView=function(k){return k instanceof Int8Array||k instanceof Uint8Array||k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array},P=s.__addimage__.binaryStringToUint8Array=function(k){for(var L=k.length,E=new Uint8Array(L),O=0;O<L;O++)E[O]=k.charCodeAt(O);return E},D=s.__addimage__.arrayBufferToBinaryString=function(k){for(var L="",E=q(k)?k:new Uint8Array(k),O=0;O<E.length;O+=8192)L+=String.fromCharCode.apply(null,E.subarray(O,O+8192));return L};s.addImage=function(){var k,L,E,O,le,te,V,M,ie;if(typeof arguments[1]=="number"?(L=r,E=arguments[1],O=arguments[2],le=arguments[3],te=arguments[4],V=arguments[5],M=arguments[6],ie=arguments[7]):(L=arguments[1],E=arguments[2],O=arguments[3],le=arguments[4],te=arguments[5],V=arguments[6],M=arguments[7],ie=arguments[8]),Rr(k=arguments[0])==="object"&&!x(k)&&"imageData"in k){var K=k;k=K.imageData,L=K.format||L||r,E=K.x||E||0,O=K.y||O||0,le=K.w||K.width||le,te=K.h||K.height||te,V=K.alias||V,M=K.compression||M,ie=K.rotation||K.angle||ie}var H=this.internal.getFilters();if(M===void 0&&H.indexOf("FlateEncode")!==-1&&(M="SLOW"),isNaN(E)||isNaN(O))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var I=_.call(this,k,L,V,M);return j.call(this,E,O,le,te,I,ie),this};var _=function(k,L,E,O){var le,te,V;if(typeof k=="string"&&n(k)===r){k=unescape(k);var M=$(k,!1);(M!==""||(M=s.loadFile(k,!0))!==void 0)&&(k=M)}if(x(k)&&(k=f(k,L)),L=n(k,L),!h(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(((V=E)==null||V.length===0)&&(E=(function(ie){return typeof ie=="string"||q(ie)?B(ie):q(ie.data)?B(ie.data):null})(k)),(le=b.call(this,E))||(k instanceof Uint8Array||L==="RGBA"||(te=k,k=P(k)),le=this["process"+L.toUpperCase()](k,m.call(this),E,(function(ie){return ie&&typeof ie=="string"&&(ie=ie.toUpperCase()),ie in s.image_compression?ie:C.NONE})(O),te)),!le)throw new Error("An unknown error occurred whilst processing the image.");return le},$=s.__addimage__.convertBase64ToBinaryString=function(k,L){L=typeof L!="boolean"||L;var E,O="";if(typeof k=="string"){var le;E=(le=Q(k))!==null&&le!==void 0?le:k;try{O=Ng(E)}catch(te){if(L)throw F(E)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return O};s.getImageProperties=function(k){var L,E,O="";if(x(k)&&(k=f(k)),typeof k=="string"&&n(k)===r&&((O=$(k,!1))===""&&(O=s.loadFile(k)||""),k=O),E=n(k),!h(E))throw new Error("addImage does not support files of type '"+E+"', please ensure that a plugin for '"+E+"' support is added.");if(k instanceof Uint8Array||(k=P(k)),!(L=this["process"+E.toUpperCase()](k)))throw new Error("An unknown error occurred whilst processing the image");return L.fileType=E,L}})(Lt.API),(function(s){var t=function(r){if(r!==void 0&&r!="")return!0};Lt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),s.events.push(["putPage",function(r){for(var a,n,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,m=!1,h=0;h<u.length&&!m;h++)switch((a=u[h]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var x=0;x<u.length;x++){a=u[x];var f=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(v.objId),C=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+f(S(a.contents))+")",i+=" /Popup "+j.objId+" 0 R",i+=" /P "+d.objId+" 0 R",i+=" /T ("+f(S(C))+") >>",v.content=i;var B=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+B,a.open&&(i+=" /Open true"),i+=" >>",j.content=i,this.internal.write(v.objId,"0 R",j.objId,"0 R");break;case"freetext":n="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var F=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+f(b(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+F+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var Q=this.annotations._nameMap[a.options.name];a.options.pageNumber=Q.page,a.options.top=Q.y}else a.options.top||(a.options.top=0);if(n="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+f(b(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var q=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+q+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),s.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},s.link=function(r,a,n,i,o){var l=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:d(r),y:u(a),w:d(r+n),h:u(a+i)},options:o,type:"link"})},s.textWithLink=function(r,a,n,i){var o,l,d=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var m=this.splitTextToSize(r,l).length;o=Math.ceil(u*m)}else l=d,o=u;return this.text(r,a,n,i),n+=.2*u,i.align==="center"&&(a-=d/2),i.align==="right"&&(a-=d),this.link(a,n-u,l,o,i),d},s.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(Lt.API),(function(s){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];s.__arabicParser__={};var i=s.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=s.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=s.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},d=s.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&n.indexOf(v.charCodeAt(0))>=0};s.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var u=s.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};s.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var m=s.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},h=s.__arabicParser__.resolveLigatures=function(v){var j=0,S=r,C="",B=0;for(j=0;j<v.length;j+=1)S[v.charCodeAt(j)]!==void 0?(B++,typeof(S=S[v.charCodeAt(j)])=="number"&&(C+=String.fromCharCode(S),S=r,B=0),j===v.length-1&&(S=r,C+=v.charAt(j-(B-1)),j-=B-1,B=0)):(S=r,C+=v.charAt(j-B),j-=B,B=0);return C};s.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var x=s.__arabicParser__.getCorrectForm=function(v,j,S){return o(v)?i(v)===!1?-1:!u(v)||!o(j)&&!o(S)||!o(S)&&l(j)||l(v)&&!o(j)||l(v)&&d(j)||l(v)&&l(j)?0:m(v)&&o(j)&&!l(j)&&o(S)&&u(S)?3:l(v)||!o(S)?1:2:-1},f=function(v){var j=0,S=0,C=0,B="",F="",Q="",q=(v=v||"").split("\\s+"),P=[];for(j=0;j<q.length;j+=1){for(P.push(""),S=0;S<q[j].length;S+=1)B=q[j][S],F=q[j][S-1],Q=q[j][S+1],o(B)?(C=x(B,F,Q),P[j]+=C!==-1?String.fromCharCode(t[B.charCodeAt(0)][C]):B):P[j]+=B;P[j]=h(P[j])}return P.join(" ")},b=s.__arabicParser__.processArabic=s.processArabic=function(){var v,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(j)){var C=0;for(S=[],C=0;C<j.length;C+=1)Array.isArray(j[C])?S.push([f(j[C][0]),j[C][1],j[C][2]]):S.push([f(j[C])]);v=S}else v=f(j);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};s.events.push(["preProcessText",b])})(Lt.API),Lt.API.autoPrint=function(s){var t;return(s=s||{}).variant=s.variant||"non-conform",s.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(s){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var n;if((r=r||"2d")!=="2d")return null;for(n in a)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=a[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},s.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Lt.API),(function(s){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),n.call(this))},n=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(v){h=v}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(v){x=v}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(v){b=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},s.setHeaderFunction=function(d){return a.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},s.getTextDimensions=function(d,u){a.call(this);var m=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),x=u.scaleFactor||this.internal.scaleFactor,f=0,b=0,v=0,j=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var S=u.maxWidth;S>0?typeof d=="string"?d=this.splitTextToSize(d,S):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(B,F){return B.concat(j.splitTextToSize(F,S))},[])):d=Array.isArray(d)?d:[d];for(var C=0;C<d.length;C++)f<(v=this.getStringUnitWidth(d[C],{font:h})*m)&&(f=v);return f!==0&&(b=d.length),{w:f/=x,h:Math.max((b*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/x,0)}},s.cellAddPage=function(){a.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=s.cell=function(){var d;d=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var u=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,x=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===d.lineNumber?(d.x=(u.x||0)+(u.width||0),d.y=u.y||0):u.y+u.height+d.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=h.top,f&&x&&(this.printHeaderRow(d.lineNumber,!0),d.y+=x[0].height)):d.y=u.y+u.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-m,d.y+m,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+m,{align:"center",baseline:"top",maxWidth:d.width-m-m}):this.text(d.text,d.x+m,d.y+m,{align:"left",baseline:"top",maxWidth:d.width-m-m})),this.internal.__cell__.lastCell=d,this};s.table=function(d,u,m,h,x){if(a.call(this),!m)throw new Error("No data for PDF table.");var f,b,v,j,S=[],C=[],B=[],F={},Q={},q=[],P=[],D=(x=x||{}).autoSize||!1,_=x.printHeaders!==!1,$=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,k=x.margins||Object.assign({width:this.getPageWidth()},t),L=typeof x.padding=="number"?x.padding:3,E=x.headerBackgroundColor||"#c8c8c8",O=x.headerTextColor||"#000";if(n.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=$,this.internal.__cell__.padding=L,this.internal.__cell__.headerBackgroundColor=E,this.internal.__cell__.headerTextColor=O,this.setFontSize($),h==null)C=S=Object.keys(m[0]),B=S.map(function(){return"left"});else if(Array.isArray(h)&&Rr(h[0])==="object")for(S=h.map(function(K){return K.name}),C=h.map(function(K){return K.prompt||K.name||""}),B=h.map(function(K){return K.align||"left"}),f=0;f<h.length;f+=1)Q[h[f].name]=.7499990551181103*h[f].width;else Array.isArray(h)&&typeof h[0]=="string"&&(C=S=h,B=S.map(function(){return"left"}));if(D||Array.isArray(h)&&typeof h[0]=="string")for(f=0;f<S.length;f+=1){for(F[j=S[f]]=m.map(function(K){return K[j]}),this.setFont(void 0,"bold"),q.push(this.getTextDimensions(C[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=F[j],this.setFont(void 0,"normal"),v=0;v<b.length;v+=1)q.push(this.getTextDimensions(b[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Q[j]=Math.max.apply(null,q)+L+L,q=[]}if(_){var le={};for(f=0;f<S.length;f+=1)le[S[f]]={},le[S[f]].text=C[f],le[S[f]].align=B[f];var te=l.call(this,le,Q);P=S.map(function(K){return new i(d,u,Q[K],te,le[K].text,void 0,le[K].align)}),this.setTableHeaderRow(P),this.printHeaderRow(1,!1)}var V=h.reduce(function(K,H){return K[H.name]=H.align,K},{});for(f=0;f<m.length;f+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:f,data:m[f]},this);var M=l.call(this,m[f],Q);for(v=0;v<S.length;v+=1){var ie=m[f][S[v]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:f,col:v,data:ie},this),o.call(this,new i(d,u,Q[S[v]],M,ie,f+2,V[S[v]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=u,this};var l=function(d,u){var m=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(d).map(function(f){var b=d[f];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,u[f]-m-m)},this).map(function(f){return this.getLineHeightFactor()*f.length*h/x+m+m},this).reduce(function(f,b){return Math.max(f,b)},0)};s.setTableHeaderRow=function(d){a.call(this),this.internal.__cell__.tableHeaderRow=d},s.printHeaderRow=function(d,u){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){m=this.internal.__cell__.tableHeaderRow[f].clone(),u&&(m.y=this.internal.__cell__.margins.top||0,x.push(m)),m.lineNumber=d;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,m),this.setTextColor(b)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),r=!1}})(Lt.API);var r4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},s4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],yb=t4(s4),a4=[100,200,300,400,500,600,700,800,900],P8=t4(a4);function X0(s){var t=s.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return r4[i=i||"normal"]?i:"normal"})(s.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(s.weight),n=(function(i){return typeof yb[i=i||"normal"]=="number"?i:"normal"})(s.stretch);return{family:t,style:r,weight:a,stretch:n,src:s.src||[],ref:s.ref||{name:t,style:[n,r,a].join(" ")}}}function j1(s,t,r,a){var n;for(n=r;n>=0&&n<t.length;n+=a)if(s[t[n]])return s[t[n]];for(n=r;n>=0&&n<t.length;n-=a)if(s[t[n]])return s[t[n]]}var I8={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},N1={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function C1(s){return[s.stretch,s.style,s.weight,s.family].join(" ")}function S1(s){return s.trimLeft()}function U8(s,t){for(var r=0;r<s.length;){if(s.charAt(r)===t)return[s.substring(0,r),s.substring(r+1)];r+=1}return null}function L8(s){var t=s.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],s.substring(t[0].length)]}var Gf,B1,k1,qu,Vf,F1,E1,_1,Z0=["times"];function P1(s,t,r,a){var n=4,i=U1;switch(a){case Lt.API.image_compression.FAST:n=1,i=I1;break;case Lt.API.image_compression.MEDIUM:n=6,i=L1;break;case Lt.API.image_compression.SLOW:n=9,i=T1}s=(function(l,d,u,m){for(var h,x=l.length/d,f=new Uint8Array(l.length+x),b=[T8,I1,U1,L1,T1],v=0;v<x;v+=1){var j=v*d,S=l.subarray(j,j+d);if(m)f.set(m(S,u,h),j+v);else{for(var C=b.length,B=[],F=0;F<C;F+=1)B[F]=b[F](S,u,h);var Q=M8(B.concat());f.set(B[Q],j+v)}h=S}return f})(s,t,r,i);var o=mb(s,{level:n});return Lt.API.__addimage__.arrayBufferToBinaryString(o)}function T8(s){var t=Array.apply([],s);return t.unshift(0),t}function I1(s,t){var r=s.length,a=[];a[0]=1;for(var n=0;n<r;n+=1){var i=s[n-t]||0;a[n+1]=s[n]-i+256&255}return a}function U1(s,t,r){var a=s.length,n=[];n[0]=2;for(var i=0;i<a;i+=1){var o=r&&r[i]||0;n[i+1]=s[i]-o+256&255}return n}function L1(s,t,r){var a=s.length,n=[];n[0]=3;for(var i=0;i<a;i+=1){var o=s[i-t]||0,l=r&&r[i]||0;n[i+1]=s[i]+256-(o+l>>>1)&255}return n}function T1(s,t,r){var a=s.length,n=[];n[0]=4;for(var i=0;i<a;i+=1){var o=D8(s[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);n[i+1]=s[i]-o+256&255}return n}function D8(s,t,r){if(s===t&&t===r)return s;var a=Math.abs(t-r),n=Math.abs(s-r),i=Math.abs(s+t-r-r);return a<=n&&a<=i?s:n<=i?t:r}function M8(s){var t=s.map(function(r){return r.reduce(function(a,n){return a+Math.abs(n)},0)});return t.indexOf(Math.min.apply(null,t))}function ex(s,t,r){var a=t*r,n=Math.floor(a/8),i=16-(a-8*n+r),o=(1<<r)-1;return n4(s,n)>>i&o}function D1(s,t,r,a){var n=r*a,i=Math.floor(n/8),o=16-(n-8*i+a),l=(1<<a)-1,d=(t&l)<<o;(function(u,m,h){if(m+1<u.byteLength)u.setUint16(m,h,!1);else{var x=h>>8&255;u.setUint8(m,x)}})(s,i,n4(s,i)&~(l<<o)&65535|d)}function n4(s,t){return t+1<s.byteLength?s.getUint16(t,!1):s.getUint8(t)<<8}function R8(s){var t=0;if(s[t++]!==71||s[t++]!==73||s[t++]!==70||s[t++]!==56||(s[t++]+1&253)!=56||s[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=s[t++]|s[t++]<<8,a=s[t++]|s[t++]<<8,n=s[t++],i=n>>7,o=1<<1+(7&n);s[t++],s[t++];var l=null,d=null;i&&(l=t,d=o,t+=3*o);var u=!0,m=[],h=0,x=null,f=0,b=null;for(this.width=r,this.height=a;u&&t<s.length;)switch(s[t++]){case 33:switch(s[t++]){case 255:if(s[t]!==11||s[t+1]==78&&s[t+2]==69&&s[t+3]==84&&s[t+4]==83&&s[t+5]==67&&s[t+6]==65&&s[t+7]==80&&s[t+8]==69&&s[t+9]==50&&s[t+10]==46&&s[t+11]==48&&s[t+12]==3&&s[t+13]==1&&s[t+16]==0)t+=14,b=s[t++]|s[t++]<<8,t++;else for(t+=12;;){if(!((k=s[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;case 249:if(s[t++]!==4||s[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=s[t++];h=s[t++]|s[t++]<<8,x=s[t++],1&v||(x=null),f=v>>2&7,t++;break;case 254:for(;;){if(!((k=s[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+s[t-1].toString(16))}break;case 44:var j=s[t++]|s[t++]<<8,S=s[t++]|s[t++]<<8,C=s[t++]|s[t++]<<8,B=s[t++]|s[t++]<<8,F=s[t++],Q=F>>6&1,q=1<<1+(7&F),P=l,D=d,_=!1;F>>7&&(_=!0,P=t,D=q,t+=3*q);var $=t;for(t++;;){var k;if(!((k=s[t++])>=0))throw Error("Invalid block size");if(k===0)break;t+=k}m.push({x:j,y:S,width:C,height:B,has_local_palette:_,palette_offset:P,palette_size:D,data_offset:$,data_length:t-$,transparent_index:x,interlaced:!!Q,delay:h,disposal:f});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+s[t-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return b},this.frameInfo=function(L){if(L<0||L>=m.length)throw new Error("Frame index out of range.");return m[L]},this.decodeAndBlitFrameBGRA=function(L,E){var O=this.frameInfo(L),le=O.width*O.height,te=new Uint8Array(le);M1(s,O.data_offset,te,le);var V=O.palette_offset,M=O.transparent_index;M===null&&(M=256);var ie=O.width,K=r-ie,H=ie,I=4*(O.y*r+O.x),ee=4*((O.y+O.height)*r+O.x),se=I,de=4*K;O.interlaced===!0&&(de+=4*r*7);for(var re=8,z=0,ne=te.length;z<ne;++z){var Y=te[z];if(H===0&&(H=ie,(se+=de)>=ee&&(de=4*K+4*r*(re-1),se=I+(ie+K)*(re<<1),re>>=1)),Y===M)se+=4;else{var X=s[V+3*Y],ye=s[V+3*Y+1],pe=s[V+3*Y+2];E[se++]=pe,E[se++]=ye,E[se++]=X,E[se++]=255}--H}},this.decodeAndBlitFrameRGBA=function(L,E){var O=this.frameInfo(L),le=O.width*O.height,te=new Uint8Array(le);M1(s,O.data_offset,te,le);var V=O.palette_offset,M=O.transparent_index;M===null&&(M=256);var ie=O.width,K=r-ie,H=ie,I=4*(O.y*r+O.x),ee=4*((O.y+O.height)*r+O.x),se=I,de=4*K;O.interlaced===!0&&(de+=4*r*7);for(var re=8,z=0,ne=te.length;z<ne;++z){var Y=te[z];if(H===0&&(H=ie,(se+=de)>=ee&&(de=4*K+4*r*(re-1),se=I+(ie+K)*(re<<1),re>>=1)),Y===M)se+=4;else{var X=s[V+3*Y],ye=s[V+3*Y+1],pe=s[V+3*Y+2];E[se++]=X,E[se++]=ye,E[se++]=pe,E[se++]=255}--H}}}function M1(s,t,r,a){for(var n=s[t++],i=1<<n,o=i+1,l=o+1,d=n+1,u=(1<<d)-1,m=0,h=0,x=0,f=s[t++],b=new Int32Array(4096),v=null;;){for(;m<16&&f!==0;)h|=s[t++]<<m,m+=8,f===1?f=s[t++]:--f;if(m<d)break;var j=h&u;if(h>>=d,m-=d,j!==i){if(j===o)break;for(var S=j<l?j:v,C=0,B=S;B>i;)B=b[B]>>8,++C;var F=B;if(x+C+(S!==j?1:0)>a)return void zr.log("Warning, gif stream longer than expected.");r[x++]=F;var Q=x+=C;for(S!==j&&(r[x++]=F),B=S;C--;)B=b[B],r[--Q]=255&B,B>>=8;v!==null&&l<4096&&(b[l++]=v<<8|F,l>=u+1&&d<12&&(++d,u=u<<1|1)),v=j}else l=o+1,u=(1<<(d=n+1))-1,v=null}return x!==a&&zr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function tx(s){var t,r,a,n,i,o=Math.floor,l=new Array(64),d=new Array(64),u=new Array(64),m=new Array(64),h=new Array(65535),x=new Array(65535),f=new Array(64),b=new Array(64),v=[],j=0,S=7,C=new Array(64),B=new Array(64),F=new Array(64),Q=new Array(256),q=new Array(2048),P=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],D=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],L=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],le=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(I,ee){for(var se=0,de=0,re=new Array,z=1;z<=16;z++){for(var ne=1;ne<=I[z];ne++)re[ee[de]]=[],re[ee[de]][0]=se,re[ee[de]][1]=z,de++,se++;se*=2}return re}function V(I){for(var ee=I[0],se=I[1]-1;se>=0;)ee&1<<se&&(j|=1<<S),se--,--S<0&&(j==255?(M(255),M(0)):M(j),S=7,j=0)}function M(I){v.push(I)}function ie(I){M(I>>8&255),M(255&I)}function K(I,ee,se,de,re){for(var z,ne=re[0],Y=re[240],X=(function(U,fe){var Se,Re,G,ue,ge,oe,J,Ae,Fe,Qe,Ie=0;for(Fe=0;Fe<8;++Fe){Se=U[Ie],Re=U[Ie+1],G=U[Ie+2],ue=U[Ie+3],ge=U[Ie+4],oe=U[Ie+5],J=U[Ie+6];var et=Se+(Ae=U[Ie+7]),ot=Se-Ae,lt=Re+J,vt=Re-J,ct=G+oe,bt=G-oe,Ut=ue+ge,jt=ue-ge,qe=et+Ut,ht=et-Ut,yt=lt+ct,ft=lt-ct;U[Ie]=qe+yt,U[Ie+4]=qe-yt;var Qt=.707106781*(ft+ht);U[Ie+2]=ht+Qt,U[Ie+6]=ht-Qt;var br=.382683433*((qe=jt+bt)-(ft=vt+ot)),Wt=.5411961*qe+br,pr=1.306562965*ft+br,Gr=.707106781*(yt=bt+vt),Dt=ot+Gr,ts=ot-Gr;U[Ie+5]=ts+Wt,U[Ie+3]=ts-Wt,U[Ie+1]=Dt+pr,U[Ie+7]=Dt-pr,Ie+=8}for(Ie=0,Fe=0;Fe<8;++Fe){Se=U[Ie],Re=U[Ie+8],G=U[Ie+16],ue=U[Ie+24],ge=U[Ie+32],oe=U[Ie+40],J=U[Ie+48];var Ps=Se+(Ae=U[Ie+56]),Vr=Se-Ae,ha=Re+J,cr=Re-J,Qr=G+oe,is=G-oe,wn=ue+ge,ni=ue-ge,Oa=Ps+wn,jn=Ps-wn,zs=ha+Qr,Ha=ha-Qr;U[Ie]=Oa+zs,U[Ie+32]=Oa-zs;var or=.707106781*(Ha+jn);U[Ie+16]=jn+or,U[Ie+48]=jn-or;var Wr=.382683433*((Oa=ni+is)-(Ha=cr+Vr)),fs=.5411961*Oa+Wr,mn=1.306562965*Ha+Wr,_i=.707106781*(zs=is+cr),Hn=Vr+_i,Ho=Vr-_i;U[Ie+40]=Ho+fs,U[Ie+24]=Ho-fs,U[Ie+8]=Hn+mn,U[Ie+56]=Hn-mn,Ie++}for(Fe=0;Fe<64;++Fe)Qe=U[Fe]*fe[Fe],f[Fe]=Qe>0?Qe+.5|0:Qe-.5|0;return f})(I,ee),ye=0;ye<64;++ye)b[P[ye]]=X[ye];var pe=b[0]-se;se=b[0],pe==0?V(de[0]):(V(de[x[z=32767+pe]]),V(h[z]));for(var Ce=63;Ce>0&&b[Ce]==0;)Ce--;if(Ce==0)return V(ne),se;for(var je,ce=1;ce<=Ce;){for(var Te=ce;b[ce]==0&&ce<=Ce;)++ce;var We=ce-Te;if(We>=16){je=We>>4;for(var Le=1;Le<=je;++Le)V(Y);We&=15}z=32767+b[ce],V(re[(We<<4)+x[z]]),V(h[z]),ce++}return Ce!=63&&V(ne),se}function H(I){I=Math.min(Math.max(I,1),100),i!=I&&((function(ee){for(var se=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],de=0;de<64;de++){var re=o((se[de]*ee+50)/100);re=Math.min(Math.max(re,1),255),l[P[de]]=re}for(var z=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ne=0;ne<64;ne++){var Y=o((z[ne]*ee+50)/100);Y=Math.min(Math.max(Y,1),255),d[P[ne]]=Y}for(var X=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ye=0,pe=0;pe<8;pe++)for(var Ce=0;Ce<8;Ce++)u[ye]=1/(l[P[ye]]*X[pe]*X[Ce]*8),m[ye]=1/(d[P[ye]]*X[pe]*X[Ce]*8),ye++})(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),i=I)}this.encode=function(I,ee){ee&&H(ee),v=new Array,j=0,S=7,ie(65496),ie(65504),ie(16),M(74),M(70),M(73),M(70),M(0),M(1),M(1),M(0),ie(1),ie(1),M(0),M(0),(function(){ie(65499),ie(132),M(0);for(var Re=0;Re<64;Re++)M(l[Re]);M(1);for(var G=0;G<64;G++)M(d[G])})(),(function(Re,G){ie(65472),ie(17),M(8),ie(G),ie(Re),M(3),M(1),M(17),M(0),M(2),M(17),M(1),M(3),M(17),M(1)})(I.width,I.height),(function(){ie(65476),ie(418),M(0);for(var Re=0;Re<16;Re++)M(D[Re+1]);for(var G=0;G<=11;G++)M(_[G]);M(16);for(var ue=0;ue<16;ue++)M($[ue+1]);for(var ge=0;ge<=161;ge++)M(k[ge]);M(1);for(var oe=0;oe<16;oe++)M(L[oe+1]);for(var J=0;J<=11;J++)M(E[J]);M(17);for(var Ae=0;Ae<16;Ae++)M(O[Ae+1]);for(var Fe=0;Fe<=161;Fe++)M(le[Fe])})(),ie(65498),ie(12),M(3),M(1),M(0),M(2),M(17),M(3),M(17),M(0),M(63),M(0);var se=0,de=0,re=0;j=0,S=7,this.encode.displayName="_encode_";for(var z,ne,Y,X,ye,pe,Ce,je,ce,Te=I.data,We=I.width,Le=I.height,U=4*We,fe=0;fe<Le;){for(z=0;z<U;){for(ye=U*fe+z,Ce=-1,je=0,ce=0;ce<64;ce++)pe=ye+(je=ce>>3)*U+(Ce=4*(7&ce)),fe+je>=Le&&(pe-=U*(fe+1+je-Le)),z+Ce>=U&&(pe-=z+Ce-U+4),ne=Te[pe++],Y=Te[pe++],X=Te[pe++],C[ce]=(q[ne]+q[Y+256|0]+q[X+512|0]>>16)-128,B[ce]=(q[ne+768|0]+q[Y+1024|0]+q[X+1280|0]>>16)-128,F[ce]=(q[ne+1280|0]+q[Y+1536|0]+q[X+1792|0]>>16)-128;se=K(C,u,se,t,a),de=K(B,m,de,r,n),re=K(F,m,re,r,n),z+=32}fe+=8}if(S>=0){var Se=[];Se[1]=S+1,Se[0]=(1<<S+1)-1,V(Se)}return ie(65497),new Uint8Array(v)},s=s||50,(function(){for(var I=String.fromCharCode,ee=0;ee<256;ee++)Q[ee]=I(ee)})(),t=te(D,_),r=te(L,E),a=te($,k),n=te(O,le),(function(){for(var I=1,ee=2,se=1;se<=15;se++){for(var de=I;de<ee;de++)x[32767+de]=se,h[32767+de]=[],h[32767+de][1]=se,h[32767+de][0]=de;for(var re=-(ee-1);re<=-I;re++)x[32767+re]=se,h[32767+re]=[],h[32767+re][1]=se,h[32767+re][0]=ee-1+re;I<<=1,ee<<=1}})(),(function(){for(var I=0;I<256;I++)q[I]=19595*I,q[I+256|0]=38470*I,q[I+512|0]=7471*I+32768,q[I+768|0]=-11059*I,q[I+1024|0]=-21709*I,q[I+1280|0]=32768*I+8421375,q[I+1536|0]=-27439*I,q[I+1792|0]=-5329*I})(),H(s)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Zi(s,t){if(this.pos=0,this.buffer=s,this.datav=new DataView(s.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function R1(s){function t(_){if(!_)throw Error("assert :P")}function r(_,$,k){for(var L=0;4>L;L++)if(_[$+L]!=k.charCodeAt(L))return!0;return!1}function a(_,$,k,L,E){for(var O=0;O<E;O++)_[$+O]=k[L+O]}function n(_,$,k,L){for(var E=0;E<L;E++)_[$+E]=k}function i(_){return new Int32Array(_)}function o(_,$){for(var k=[],L=0;L<_;L++)k.push(new $);return k}function l(_,$){var k=[];return(function L(E,O,le){for(var te=le[O],V=0;V<te&&(E.push(le.length>O+1?[]:new $),!(le.length<O+1));V++)L(E[V],O+1,le)})(k,0,_),k}var d=function(){var _=this;function $(y,N){for(var W=1<<N-1>>>0;y&W;)W>>>=1;return W?(y&W-1)+W:y}function k(y,N,W,ae,he){t(!(ae%W));do y[N+(ae-=W)]=he;while(0<ae)}function L(y,N,W,ae,he){if(t(2328>=he),512>=he)var be=i(512);else if((be=i(he))==null)return 0;return(function(ve,we,Ne,Be,De,ze){var ke,Oe,Ke=we,rt=1<<Ne,Ye=i(16),Ze=i(16);for(t(De!=0),t(Be!=null),t(ve!=null),t(0<Ne),Oe=0;Oe<De;++Oe){if(15<Be[Oe])return 0;++Ye[Be[Oe]]}if(Ye[0]==De)return 0;for(Ze[1]=0,ke=1;15>ke;++ke){if(Ye[ke]>1<<ke)return 0;Ze[ke+1]=Ze[ke]+Ye[ke]}for(Oe=0;Oe<De;++Oe)ke=Be[Oe],0<Be[Oe]&&(ze[Ze[ke]++]=Oe);if(Ze[15]==1)return(Be=new E).g=0,Be.value=ze[0],k(ve,Ke,1,rt,Be),rt;var tt,nt=-1,it=rt-1,Mt=0,St=1,tr=1,_t=1<<Ne;for(Oe=0,ke=1,De=2;ke<=Ne;++ke,De<<=1){if(St+=tr<<=1,0>(tr-=Ye[ke]))return 0;for(;0<Ye[ke];--Ye[ke])(Be=new E).g=ke,Be.value=ze[Oe++],k(ve,Ke+Mt,De,_t,Be),Mt=$(Mt,ke)}for(ke=Ne+1,De=2;15>=ke;++ke,De<<=1){if(St+=tr<<=1,0>(tr-=Ye[ke]))return 0;for(;0<Ye[ke];--Ye[ke]){if(Be=new E,(Mt&it)!=nt){for(Ke+=_t,tt=1<<(nt=ke)-Ne;15>nt&&!(0>=(tt-=Ye[nt]));)++nt,tt<<=1;rt+=_t=1<<(tt=nt-Ne),ve[we+(nt=Mt&it)].g=tt+Ne,ve[we+nt].value=Ke-we-nt}Be.g=ke-Ne,Be.value=ze[Oe++],k(ve,Ke+(Mt>>Ne),De,_t,Be),Mt=$(Mt,ke)}}return St!=2*Ze[15]-1?0:rt})(y,N,W,ae,he,be)}function E(){this.value=this.g=0}function O(){this.value=this.g=0}function le(){this.G=o(5,E),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Pa,O)}function te(y,N,W,ae){t(y!=null),t(N!=null),t(2147483648>ae),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=N,y.pa=W,y.Jd=N,y.Yc=W+ae,y.Zc=4<=ae?W+ae-4+1:W,ne(y)}function V(y,N){for(var W=0;0<N--;)W|=X(y,128)<<N;return W}function M(y,N){var W=V(y,N);return Y(y)?-W:W}function ie(y,N,W,ae){var he,be=0;for(t(y!=null),t(N!=null),t(4294967288>ae),y.Sb=ae,y.Ra=0,y.u=0,y.h=0,4<ae&&(ae=4),he=0;he<ae;++he)be+=N[W+he]<<8*he;y.Ra=be,y.bb=ae,y.oa=N,y.pa=W}function K(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<vo-8>>>0,++y.bb,y.u-=8;de(y)&&(y.h=1,y.u=0)}function H(y,N){if(t(0<=N),!y.h&&N<=Vc){var W=se(y)&yo[N];return y.u+=N,K(y),W}return y.h=1,y.u=0}function I(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function se(y){return y.Ra>>>(y.u&vo-1)>>>0}function de(y){return t(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>vo}function re(y,N){y.u=N,y.h=de(y)}function z(y){y.u>=os&&(t(y.u>=os),K(y))}function ne(y){t(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(t(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function Y(y){return V(y,1)}function X(y,N){var W=y.Ca;0>y.b&&ne(y);var ae=y.b,he=W*N>>>8,be=(y.I>>>ae>he)+0;for(be?(W-=he,y.I-=he+1<<ae>>>0):W=he+1,ae=W,he=0;256<=ae;)he+=8,ae>>=8;return ae=7^he+ru[ae],y.b-=ae,y.Ca=(W<<ae)-1,be}function ye(y,N,W){y[N+0]=W>>24&255,y[N+1]=W>>16&255,y[N+2]=W>>8&255,y[N+3]=255&W}function pe(y,N){return y[N+0]|y[N+1]<<8}function Ce(y,N){return pe(y,N)|y[N+2]<<16}function je(y,N){return pe(y,N)|pe(y,N+2)<<16}function ce(y,N){var W=1<<N;return t(y!=null),t(0<N),y.X=i(W),y.X==null?0:(y.Mb=32-N,y.Xa=N,1)}function Te(y,N){t(y!=null),t(N!=null),t(y.Xa==N.Xa),a(N.X,0,y.X,0,1<<N.Xa)}function We(){this.X=[],this.Xa=this.Mb=0}function Le(y,N,W,ae){t(W!=null),t(ae!=null);var he=W[0],be=ae[0];return he==0&&(he=(y*be+N/2)/N),be==0&&(be=(N*he+y/2)/y),0>=he||0>=be?0:(W[0]=he,ae[0]=be,1)}function U(y,N){return y+(1<<N)-1>>>N}function fe(y,N){return((4278255360&y)+(4278255360&N)>>>0&4278255360)+((16711935&y)+(16711935&N)>>>0&16711935)>>>0}function Se(y,N){_[N]=function(W,ae,he,be,ve,we,Ne){var Be;for(Be=0;Be<ve;++Be){var De=_[y](we[Ne+Be-1],he,be+Be);we[Ne+Be]=fe(W[ae+Be],De)}}}function Re(){this.ud=this.hd=this.jd=0}function G(y,N){return((4278124286&(y^N))>>>1)+(y&N)>>>0}function ue(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function ge(y,N){return ue(y+(y-N+.5>>1))}function oe(y,N,W){return Math.abs(N-W)-Math.abs(y-W)}function J(y,N,W,ae,he,be,ve){for(ae=be[ve-1],W=0;W<he;++W)be[ve+W]=ae=fe(y[N+W],ae)}function Ae(y,N,W,ae,he){var be;for(be=0;be<W;++be){var ve=y[N+be],we=ve>>8&255,Ne=16711935&(Ne=(Ne=16711935&ve)+((we<<16)+we));ae[he+be]=(4278255360&ve)+Ne>>>0}}function Fe(y,N){N.jd=255&y,N.hd=y>>8&255,N.ud=y>>16&255}function Qe(y,N,W,ae,he,be){var ve;for(ve=0;ve<ae;++ve){var we=N[W+ve],Ne=we>>>8,Be=we,De=255&(De=(De=we>>>16)+((y.jd<<24>>24)*(Ne<<24>>24)>>>5));Be=255&(Be=(Be+=(y.hd<<24>>24)*(Ne<<24>>24)>>>5)+((y.ud<<24>>24)*(De<<24>>24)>>>5)),he[be+ve]=(4278255360&we)+(De<<16)+Be}}function Ie(y,N,W,ae,he){_[N]=function(be,ve,we,Ne,Be,De,ze,ke,Oe){for(Ne=ze;Ne<ke;++Ne)for(ze=0;ze<Oe;++ze)Be[De++]=he(we[ae(be[ve++])])},_[y]=function(be,ve,we,Ne,Be,De,ze){var ke=8>>be.b,Oe=be.Ea,Ke=be.K[0],rt=be.w;if(8>ke)for(be=(1<<be.b)-1,rt=(1<<ke)-1;ve<we;++ve){var Ye,Ze=0;for(Ye=0;Ye<Oe;++Ye)Ye&be||(Ze=ae(Ne[Be++])),De[ze++]=he(Ke[Ze&rt]),Ze>>=ke}else _["VP8LMapColor"+W](Ne,Be,Ke,rt,De,ze,ve,we,Oe)}}function et(y,N,W,ae,he){for(W=N+W;N<W;){var be=y[N++];ae[he++]=be>>16&255,ae[he++]=be>>8&255,ae[he++]=255&be}}function ot(y,N,W,ae,he){for(W=N+W;N<W;){var be=y[N++];ae[he++]=be>>16&255,ae[he++]=be>>8&255,ae[he++]=255&be,ae[he++]=be>>24&255}}function lt(y,N,W,ae,he){for(W=N+W;N<W;){var be=(ve=y[N++])>>16&240|ve>>12&15,ve=240&ve|ve>>28&15;ae[he++]=be,ae[he++]=ve}}function vt(y,N,W,ae,he){for(W=N+W;N<W;){var be=(ve=y[N++])>>16&248|ve>>13&7,ve=ve>>5&224|ve>>3&31;ae[he++]=be,ae[he++]=ve}}function ct(y,N,W,ae,he){for(W=N+W;N<W;){var be=y[N++];ae[he++]=255&be,ae[he++]=be>>8&255,ae[he++]=be>>16&255}}function bt(y,N,W,ae,he,be){if(be==0)for(W=N+W;N<W;)ye(ae,((be=y[N++])[0]>>24|be[1]>>8&65280|be[2]<<8&16711680|be[3]<<24)>>>0),he+=32;else a(ae,he,y,N,W)}function Ut(y,N){_[N][0]=_[y+"0"],_[N][1]=_[y+"1"],_[N][2]=_[y+"2"],_[N][3]=_[y+"3"],_[N][4]=_[y+"4"],_[N][5]=_[y+"5"],_[N][6]=_[y+"6"],_[N][7]=_[y+"7"],_[N][8]=_[y+"8"],_[N][9]=_[y+"9"],_[N][10]=_[y+"10"],_[N][11]=_[y+"11"],_[N][12]=_[y+"12"],_[N][13]=_[y+"13"],_[N][14]=_[y+"0"],_[N][15]=_[y+"0"]}function jt(y){return y==Ol||y==al||y==ed||y==td}function qe(){this.eb=[],this.size=this.A=this.fb=0}function ht(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function yt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new qe,this.f.kb=new ht,this.sd=null}function ft(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function br(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function Wt(y,N){var W=y.T,ae=N.ba.f.RGBA,he=ae.eb,be=ae.fb+y.ka*ae.A,ve=Ja[N.ba.S],we=y.y,Ne=y.O,Be=y.f,De=y.N,ze=y.ea,ke=y.W,Oe=N.cc,Ke=N.dc,rt=N.Mc,Ye=N.Nc,Ze=y.ka,tt=y.ka+y.T,nt=y.U,it=nt+1>>1;for(Ze==0?ve(we,Ne,null,null,Be,De,ze,ke,Be,De,ze,ke,he,be,null,null,nt):(ve(N.ec,N.fc,we,Ne,Oe,Ke,rt,Ye,Be,De,ze,ke,he,be-ae.A,he,be,nt),++W);Ze+2<tt;Ze+=2)Oe=Be,Ke=De,rt=ze,Ye=ke,De+=y.Rc,ke+=y.Rc,be+=2*ae.A,ve(we,(Ne+=2*y.fa)-y.fa,we,Ne,Oe,Ke,rt,Ye,Be,De,ze,ke,he,be-ae.A,he,be,nt);return Ne+=y.fa,y.j+tt<y.o?(a(N.ec,N.fc,we,Ne,nt),a(N.cc,N.dc,Be,De,it),a(N.Mc,N.Nc,ze,ke,it),W--):1&tt||ve(we,Ne,null,null,Be,De,ze,ke,Be,De,ze,ke,he,be+ae.A,null,null,nt),W}function pr(y,N,W){var ae=y.F,he=[y.J];if(ae!=null){var be=y.U,ve=N.ba.S,we=ve==Zc||ve==ed;N=N.ba.f.RGBA;var Ne=[0],Be=y.ka;Ne[0]=y.T,y.Kb&&(Be==0?--Ne[0]:(--Be,he[0]-=y.width),y.j+y.ka+y.T==y.o&&(Ne[0]=y.o-y.j-Be));var De=N.eb;Be=N.fb+Be*N.A,y=Jc(ae,he[0],y.width,be,Ne,De,Be+(we?0:3),N.A),t(W==Ne),y&&jt(ve)&&sl(De,Be,we,be,Ne,N.A)}return 0}function Gr(y){var N=y.ma,W=N.ba.S,ae=11>W,he=W==jo||W==Xc||W==Zc||W==Ur||W==12||jt(W);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!Ea(N.Oa,y,he?11:12))return 0;if(he&&jt(W)&&Kc(),y.da)alert("todo:use_scaling");else{if(ae){if(N.Ib=br,y.Kb){if(W=y.U+1>>1,N.memory=i(y.U+2*W),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+y.U,N.Mc=N.cc,N.Nc=N.dc+W,N.Ib=Wt,Kc()}}else alert("todo:EmitYUV");he&&(N.Jb=pr,ae&&Xo())}if(ae&&!ia){for(y=0;256>y;++y)Xa[y]=89858*(y-128)+Vn>>$i,Za[y]=-22014*(y-128)+Vn,Wl[y]=-45773*(y-128),ll[y]=113618*(y-128)+Vn>>$i;for(y=kr;y<Er;++y)N=76283*(y-16)+Vn>>$i,du[y-kr]=Us(N,255),Wh[y-kr]=Us(N+8>>4,15);ia=1}return 1}function Dt(y){var N=y.ma,W=y.U,ae=y.T;return t(!(1&y.ka)),0>=W||0>=ae?0:(W=N.Ib(y,N),N.Jb!=null&&N.Jb(y,N,W),N.Dc+=W,1)}function ts(y){y.ma.memory=null}function Ps(y,N,W,ae){return H(y,8)!=47?0:(N[0]=H(y,14)+1,W[0]=H(y,14)+1,ae[0]=H(y,1),H(y,3)!=0?0:!y.h)}function Vr(y,N){if(4>y)return y+1;var W=y-2>>1;return(2+(1&y)<<W)+H(N,W)+1}function ha(y,N){return 120<N?N-120:1<=(W=((W=Sp[N-1])>>4)*y+(8-(15&W)))?W:1;var W}function cr(y,N,W){var ae=se(W),he=y[N+=255&ae].g-8;return 0<he&&(re(W,W.u+8),ae=se(W),N+=y[N].value,N+=ae&(1<<he)-1),re(W,W.u+y[N].g),y[N].value}function Qr(y,N,W){return W.g+=y.g,W.value+=y.value<<N>>>0,t(8>=W.g),y.g}function is(y,N,W){var ae=y.xc;return t((N=ae==0?0:y.vc[y.md*(W>>ae)+(N>>ae)])<y.Wb),y.Ya[N]}function wn(y,N,W,ae){var he=y.ab,be=y.c*N,ve=y.C;N=ve+N;var we=W,Ne=ae;for(ae=y.Ta,W=y.Ua;0<he--;){var Be=y.gc[he],De=ve,ze=N,ke=we,Oe=Ne,Ke=(Ne=ae,we=W,Be.Ea);switch(t(De<ze),t(ze<=Be.nc),Be.hc){case 2:Ll(ke,Oe,(ze-De)*Ke,Ne,we);break;case 0:var rt=De,Ye=ze,Ze=Ne,tt=we,nt=(_t=Be).Ea;rt==0&&(za(ke,Oe,null,null,1,Ze,tt),J(ke,Oe+1,0,0,nt-1,Ze,tt+1),Oe+=nt,tt+=nt,++rt);for(var it=1<<_t.b,Mt=it-1,St=U(nt,_t.b),tr=_t.K,_t=_t.w+(rt>>_t.b)*St;rt<Ye;){var dr=tr,ls=_t,rr=1;for(Ga(ke,Oe,Ze,tt-nt,1,Ze,tt);rr<nt;){var Bt=(rr&~Mt)+it;Bt>nt&&(Bt=nt),(0,qi[dr[ls++]>>8&15])(ke,Oe+ +rr,Ze,tt+rr-nt,Bt-rr,Ze,tt+rr),rr=Bt}Oe+=nt,tt+=nt,++rt&Mt||(_t+=St)}ze!=Be.nc&&a(Ne,we-Ke,Ne,we+(ze-De-1)*Ke,Ke);break;case 1:for(Ke=ke,Ye=Oe,nt=(ke=Be.Ea)-(tt=ke&~(Ze=(Oe=1<<Be.b)-1)),rt=U(ke,Be.b),it=Be.K,Be=Be.w+(De>>Be.b)*rt;De<ze;){for(Mt=it,St=Be,tr=new Re,_t=Ye+tt,dr=Ye+ke;Ye<_t;)Fe(Mt[St++],tr),mi(tr,Ke,Ye,Oe,Ne,we),Ye+=Oe,we+=Oe;Ye<dr&&(Fe(Mt[St++],tr),mi(tr,Ke,Ye,nt,Ne,we),Ye+=nt,we+=nt),++De&Ze||(Be+=rt)}break;case 3:if(ke==Ne&&Oe==we&&0<Be.b){for(Ye=Ne,ke=Ke=we+(ze-De)*Ke-(tt=(ze-De)*U(Be.Ea,Be.b)),Oe=Ne,Ze=we,rt=[],tt=(nt=tt)-1;0<=tt;--tt)rt[tt]=Oe[Ze+tt];for(tt=nt-1;0<=tt;--tt)Ye[ke+tt]=rt[tt];wo(Be,De,ze,Ne,Ke,Ne,we)}else wo(Be,De,ze,ke,Oe,Ne,we)}we=ae,Ne=W}Ne!=W&&a(ae,W,we,Ne,be)}function ni(y,N){var W=y.V,ae=y.Ba+y.c*y.C,he=N-y.C;if(t(N<=y.l.o),t(16>=he),0<he){var be=y.l,ve=y.Ta,we=y.Ua,Ne=be.width;if(wn(y,he,W,ae),he=we=[we],t((W=y.C)<(ae=N)),t(be.v<be.va),ae>be.o&&(ae=be.o),W<be.j){var Be=be.j-W;W=be.j,he[0]+=Be*Ne}if(W>=ae?W=0:(he[0]+=4*be.v,be.ka=W-be.j,be.U=be.va-be.v,be.T=ae-W,W=1),W){if(we=we[0],11>(W=y.ca).S){var De=W.f.RGBA,ze=(ae=W.S,he=be.U,be=be.T,Be=De.eb,De.A),ke=be;for(De=De.fb+y.Ma*De.A;0<ke--;){var Oe=ve,Ke=we,rt=he,Ye=Be,Ze=De;switch(ae){case iu:Dl(Oe,Ke,rt,Ye,Ze);break;case jo:Va(Oe,Ke,rt,Ye,Ze);break;case Ol:Va(Oe,Ke,rt,Ye,Ze),sl(Ye,Ze,0,rt,1,0);break;case Qh:Hr(Oe,Ke,rt,Ye,Ze);break;case Xc:bt(Oe,Ke,rt,Ye,Ze,1);break;case al:bt(Oe,Ke,rt,Ye,Ze,1),sl(Ye,Ze,0,rt,1,0);break;case Zc:bt(Oe,Ke,rt,Ye,Ze,0);break;case ed:bt(Oe,Ke,rt,Ye,Ze,0),sl(Ye,Ze,1,rt,1,0);break;case Ur:hi(Oe,Ke,rt,Ye,Ze);break;case td:hi(Oe,Ke,rt,Ye,Ze),IA(Ye,Ze,rt,1,0);break;case ou:Or(Oe,Ke,rt,Ye,Ze);break;default:t(0)}we+=Ne,De+=ze}y.Ma+=be}else alert("todo:EmitRescaledRowsYUVA");t(y.Ma<=W.height)}}y.C=N,t(y.C<=y.i)}function Oa(y){var N;if(0<y.ua)return 0;for(N=0;N<y.Wb;++N){var W=y.Ya[N].G,ae=y.Ya[N].H;if(0<W[1][ae[1]+0].g||0<W[2][ae[2]+0].g||0<W[3][ae[3]+0].g)return 0}return 1}function jn(y,N,W,ae,he,be){if(y.Z!=0){var ve=y.qd,we=y.rd;for(t(pa[y.Z]!=null);N<W;++N)pa[y.Z](ve,we,ae,he,ae,he,be),ve=ae,we=he,he+=be;y.qd=ve,y.rd=we}}function zs(y,N){var W=y.l.ma,ae=W.Z==0||W.Z==1?y.l.j:y.C;if(ae=y.C<ae?ae:y.C,t(N<=y.l.o),N>ae){var he=y.l.width,be=W.ca,ve=W.tb+he*ae,we=y.V,Ne=y.Ba+y.c*ae,Be=y.gc;t(y.ab==1),t(Be[0].hc==3),el(Be[0],ae,N,we,Ne,be,ve),jn(W,ae,N,be,ve,he)}y.C=y.Ma=N}function Ha(y,N,W,ae,he,be,ve){var we=y.$/ae,Ne=y.$%ae,Be=y.m,De=y.s,ze=W+y.$,ke=ze;he=W+ae*he;var Oe=W+ae*be,Ke=280+De.ua,rt=y.Pb?we:16777216,Ye=0<De.ua?De.Wa:null,Ze=De.wc,tt=ze<Oe?is(De,Ne,we):null;t(y.C<be),t(Oe<=he);var nt=!1;e:for(;;){for(;nt||ze<Oe;){var it=0;if(we>=rt){var Mt=ze-W;t((rt=y).Pb),rt.wd=rt.m,rt.xd=Mt,0<rt.s.ua&&Te(rt.s.Wa,rt.s.vb),rt=we+cu}if(Ne&Ze||(tt=is(De,Ne,we)),t(tt!=null),tt.Qb&&(N[ze]=tt.qb,nt=!0),!nt)if(z(Be),tt.jc){it=Be,Mt=N;var St=ze,tr=tt.pd[se(it)&Pa-1];t(tt.jc),256>tr.g?(re(it,it.u+tr.g),Mt[St]=tr.value,it=0):(re(it,it.u+tr.g-256),t(256<=tr.value),it=tr.value),it==0&&(nt=!0)}else it=cr(tt.G[0],tt.H[0],Be);if(Be.h)break;if(nt||256>it){if(!nt)if(tt.nd)N[ze]=(tt.qb|it<<8)>>>0;else{if(z(Be),nt=cr(tt.G[1],tt.H[1],Be),z(Be),Mt=cr(tt.G[2],tt.H[2],Be),St=cr(tt.G[3],tt.H[3],Be),Be.h)break;N[ze]=(St<<24|nt<<16|it<<8|Mt)>>>0}if(nt=!1,++ze,++Ne>=ae&&(Ne=0,++we,ve!=null&&we<=be&&!(we%16)&&ve(y,we),Ye!=null))for(;ke<ze;)it=N[ke++],Ye.X[(506832829*it&4294967295)>>>Ye.Mb]=it}else if(280>it){if(it=Vr(it-256,Be),Mt=cr(tt.G[4],tt.H[4],Be),z(Be),Mt=ha(ae,Mt=Vr(Mt,Be)),Be.h)break;if(ze-W<Mt||he-ze<it)break e;for(St=0;St<it;++St)N[ze+St]=N[ze+St-Mt];for(ze+=it,Ne+=it;Ne>=ae;)Ne-=ae,++we,ve!=null&&we<=be&&!(we%16)&&ve(y,we);if(t(ze<=he),Ne&Ze&&(tt=is(De,Ne,we)),Ye!=null)for(;ke<ze;)it=N[ke++],Ye.X[(506832829*it&4294967295)>>>Ye.Mb]=it}else{if(!(it<Ke))break e;for(nt=it-280,t(Ye!=null);ke<ze;)it=N[ke++],Ye.X[(506832829*it&4294967295)>>>Ye.Mb]=it;it=ze,t(!(nt>>>(Mt=Ye).Xa)),N[it]=Mt.X[nt],nt=!0}nt||t(Be.h==de(Be))}if(y.Pb&&Be.h&&ze<he)t(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&Te(y.s.vb,y.s.Wa);else{if(Be.h)break e;ve?.(y,we>be?be:we),y.a=0,y.$=ze-W}return 1}return y.a=3,0}function or(y){t(y!=null),y.vc=null,y.yc=null,y.Ya=null;var N=y.Wa;N!=null&&(N.X=null),y.vb=null,t(y!=null)}function Wr(){var y=new rs;return y==null?null:(y.a=0,y.xb=ql,Ut("Predictor","VP8LPredictors"),Ut("Predictor","VP8LPredictors_C"),Ut("PredictorAdd","VP8LPredictorsAdd"),Ut("PredictorAdd","VP8LPredictorsAdd_C"),Ll=Ae,mi=Qe,Dl=et,Va=ot,hi=lt,Or=vt,Hr=ct,_.VP8LMapColor32b=Tl,_.VP8LMapColor8b=Hi,y)}function fs(y,N,W,ae,he){var be=1,ve=[y],we=[N],Ne=ae.m,Be=ae.s,De=null,ze=0;e:for(;;){if(W)for(;be&&H(Ne,1);){var ke=ve,Oe=we,Ke=ae,rt=1,Ye=Ke.m,Ze=Ke.gc[Ke.ab],tt=H(Ye,2);if(Ke.Oc&1<<tt)be=0;else{switch(Ke.Oc|=1<<tt,Ze.hc=tt,Ze.Ea=ke[0],Ze.nc=Oe[0],Ze.K=[null],++Ke.ab,t(4>=Ke.ab),tt){case 0:case 1:Ze.b=H(Ye,3)+2,rt=fs(U(Ze.Ea,Ze.b),U(Ze.nc,Ze.b),0,Ke,Ze.K),Ze.K=Ze.K[0];break;case 3:var nt,it=H(Ye,8)+1,Mt=16<it?0:4<it?1:2<it?2:3;if(ke[0]=U(Ze.Ea,Mt),Ze.b=Mt,nt=rt=fs(it,1,0,Ke,Ze.K)){var St,tr=it,_t=Ze,dr=1<<(8>>_t.b),ls=i(dr);if(ls==null)nt=0;else{var rr=_t.K[0],Bt=_t.w;for(ls[0]=_t.K[0][0],St=1;St<1*tr;++St)ls[St]=fe(rr[Bt+St],ls[St-1]);for(;St<4*dr;++St)ls[St]=0;_t.K[0]=null,_t.K[0]=ls,nt=1}}rt=nt;break;case 2:break;default:t(0)}be=rt}}if(ve=ve[0],we=we[0],be&&H(Ne,1)&&!(be=1<=(ze=H(Ne,4))&&11>=ze)){ae.a=3;break e}var pt;if(pt=be)t:{var bs,Vt,lr,qr=ae,Vs=ve,Bs=we,ss=ze,Ts=W,Ys=qr.m,Yr=qr.s,mr=[null],vr=1,Jr=0,wr=Hh[ss];r:for(;;){if(Ts&&H(Ys,1)){var cs=H(Ys,3)+2,ds=U(Vs,cs),Lr=U(Bs,cs),xa=ds*Lr;if(!fs(ds,Lr,0,qr,mr))break r;for(mr=mr[0],Yr.xc=cs,bs=0;bs<xa;++bs){var _r=mr[bs]>>8&65535;mr[bs]=_r,_r>=vr&&(vr=_r+1)}}if(Ys.h)break r;for(Vt=0;5>Vt;++Vt){var Tr=nl[Vt];!Vt&&0<ss&&(Tr+=1<<ss),Jr<Tr&&(Jr=Tr)}var ks=o(vr*wr,E),oa=vr,en=o(oa,le);if(en==null)var ys=null;else t(65536>=oa),ys=en;var vs=i(Jr);if(ys==null||vs==null||ks==null){qr.a=1;break r}var ba=ks;for(bs=lr=0;bs<vr;++bs){var Dr=ys[bs],ya=Dr.G,Fn=Dr.H,Yn=0,Js=1,ws=0;for(Vt=0;5>Vt;++Vt){Tr=nl[Vt],ya[Vt]=ba,Fn[Vt]=lr,!Vt&&0<ss&&(Tr+=1<<ss);a:{var So,Ki=Tr,Kl=qr,xi=vs,zh=ba,WA=lr,Kr=0,Jn=Kl.m,KA=H(Jn,1);if(n(xi,0,0,Ki),KA){var zA=H(Jn,1)+1,uu=H(Jn,1),Au=H(Jn,uu==0?1:8);xi[Au]=1,zA==2&&(xi[Au=H(Jn,8)]=1);var bi=1}else{var Xr=i(19),Fs=H(Jn,4)+4;if(19<Fs){Kl.a=3;var js=0;break a}for(So=0;So<Fs;++So)Xr[Cp[So]]=H(Jn,3);var zl=void 0,zi=void 0,Gl=Kl,_p=Xr,Ds=Ki,mu=xi,id=0,yi=Gl.m,Xn=8,pn=o(128,E);s:for(;L(pn,0,7,_p,19);){if(H(yi,1)){var od=2+2*H(yi,3);if((zl=2+H(yi,od))>Ds)break s}else zl=Ds;for(zi=0;zi<Ds&&zl--;){z(yi);var hu=pn[0+(127&se(yi))];re(yi,yi.u+hu.g);var Bo=hu.value;if(16>Bo)mu[zi++]=Bo,Bo!=0&&(Xn=Bo);else{var Gh=Bo==16,GA=Bo-16,Vh=lu[GA],VA=H(yi,rd[GA])+Vh;if(zi+VA>Ds)break s;for(var Yh=Gh?Xn:0;0<VA--;)mu[zi++]=Yh}}id=1;break s}id||(Gl.a=3),bi=id}(bi=bi&&!Jn.h)&&(Kr=L(zh,WA,8,xi,Ki)),bi&&Kr!=0?js=Kr:(Kl.a=3,js=0)}if(js==0)break r;if(Js&&Oh[Vt]==1&&(Js=ba[lr].g==0),Yn+=ba[lr].g,lr+=js,3>=Vt){var Vl,fu=vs[0];for(Vl=1;Vl<Tr;++Vl)vs[Vl]>fu&&(fu=vs[Vl]);ws+=fu}}if(Dr.nd=Js,Dr.Qb=0,Js&&(Dr.qb=(ya[3][Fn[3]+0].value<<24|ya[1][Fn[1]+0].value<<16|ya[2][Fn[2]+0].value)>>>0,Yn==0&&256>ya[0][Fn[0]+0].value&&(Dr.Qb=1,Dr.qb+=ya[0][Fn[0]+0].value<<8)),Dr.jc=!Dr.Qb&&6>ws,Dr.jc){var ld,xn=Dr;for(ld=0;ld<Pa;++ld){var Gi=ld,Zn=xn.pd[Gi],dl=xn.G[0][xn.H[0]+Gi];256<=dl.value?(Zn.g=dl.g+256,Zn.value=dl.value):(Zn.g=0,Zn.value=0,Gi>>=Qr(dl,8,Zn),Gi>>=Qr(xn.G[1][xn.H[1]+Gi],16,Zn),Gi>>=Qr(xn.G[2][xn.H[2]+Gi],0,Zn),Qr(xn.G[3][xn.H[3]+Gi],24,Zn))}}}Yr.vc=mr,Yr.Wb=vr,Yr.Ya=ys,Yr.yc=ks,pt=1;break t}pt=0}if(!(be=pt)){ae.a=3;break e}if(0<ze){if(Be.ua=1<<ze,!ce(Be.Wa,ze)){ae.a=1,be=0;break e}}else Be.ua=0;var gu=ae,pu=ve,Jh=we,xu=gu.s,bu=xu.xc;if(gu.c=pu,gu.i=Jh,xu.md=U(pu,bu),xu.wc=bu==0?-1:(1<<bu)-1,W){ae.xb=pi;break e}if((De=i(ve*we))==null){ae.a=1,be=0;break e}be=(be=Ha(ae,De,0,ve,we,we,null))&&!Ne.h;break e}return be?(he!=null?he[0]=De:(t(De==null),t(W)),ae.$=0,W||or(Be)):or(Be),be}function mn(y,N){var W=y.c*y.i,ae=W+N+16*N;return t(y.c<=N),y.V=i(ae),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+W+N,1)}function _i(y,N){var W=y.C,ae=N-W,he=y.V,be=y.Ba+y.c*W;for(t(N<=y.l.o);0<ae;){var ve=16<ae?16:ae,we=y.l.ma,Ne=y.l.width,Be=Ne*ve,De=we.ca,ze=we.tb+Ne*W,ke=y.Ta,Oe=y.Ua;wn(y,ve,he,be),UA(ke,Oe,De,ze,Be),jn(we,W,W+ve,De,ze,Ne),ae-=ve,he+=ve*y.c,W+=ve}t(W==N),y.C=y.Ma=N}function Hn(){this.ub=this.yd=this.td=this.Rb=0}function Ho(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Sl(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Ir(){this.Yb=(function(){var y=[];return(function N(W,ae,he){for(var be=he[ae],ve=0;ve<be&&(W.push(he.length>ae+1?[]:0),!(he.length<ae+1));ve++)N(W[ve],ae+1,he)})(y,0,[3,11]),y})()}function qo(){this.jb=i(3),this.Wc=l([4,8],Ir),this.Xc=l([4,17],Ir)}function Pi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function aa(){this.ld=this.La=this.dd=this.tc=0}function ii(){this.Na=this.la=0}function mo(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ho(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qa(){this.uc=this.M=this.Nb=0,this.wa=Array(new aa),this.Y=0,this.ya=Array(new ho),this.aa=0,this.l=new fa}function hn(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Wd(){this.cb=this.a=0,this.sc="",this.m=new I,this.Od=new Hn,this.Kc=new Ho,this.ed=new Pi,this.Qa=new Sl,this.Ic=this.$c=this.Aa=0,this.D=new qa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,I),this.ia=0,this.pb=o(4,mo),this.Pa=new qo,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hn),this.Hd=0,this.rb=Array(new ii),this.sb=0,this.wa=Array(new aa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ho),this.L=this.aa=0,this.gd=l([4,2],aa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function kA(){var y=new Wd;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,il||(il=Nn)),y}function Ns(y,N,W){return y.a==0&&(y.a=N,y.sc=W,y.cb=0),0}function Kd(y,N,W){return 3<=W&&y[N+0]==157&&y[N+1]==1&&y[N+2]==42}function $o(y,N){if(y==null)return 0;if(y.a=0,y.sc="OK",N==null)return Ns(y,2,"null VP8Io passed to VP8GetHeaders()");var W=N.data,ae=N.w,he=N.ha;if(4>he)return Ns(y,7,"Truncated header.");var be=W[ae+0]|W[ae+1]<<8|W[ae+2]<<16,ve=y.Od;if(ve.Rb=!(1&be),ve.td=be>>1&7,ve.yd=be>>4&1,ve.ub=be>>5,3<ve.td)return Ns(y,3,"Incorrect keyframe parameters.");if(!ve.yd)return Ns(y,4,"Frame not displayable.");ae+=3,he-=3;var we=y.Kc;if(ve.Rb){if(7>he)return Ns(y,7,"cannot parse picture header");if(!Kd(W,ae,he))return Ns(y,3,"Bad code word");we.c=16383&(W[ae+4]<<8|W[ae+3]),we.Td=W[ae+4]>>6,we.i=16383&(W[ae+6]<<8|W[ae+5]),we.Ud=W[ae+6]>>6,ae+=7,he-=7,y.za=we.c+15>>4,y.Ub=we.i+15>>4,N.width=we.c,N.height=we.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,n((be=y.Pa).jb,0,255,be.jb.length),t((be=y.Qa)!=null),be.Cb=0,be.Bb=0,be.Fb=1,n(be.Zb,0,0,be.Zb.length),n(be.Lb,0,0,be.Lb)}if(ve.ub>he)return Ns(y,7,"bad partition length");te(be=y.m,W,ae,ve.ub),ae+=ve.ub,he-=ve.ub,ve.Rb&&(we.Ld=Y(be),we.Kd=Y(be)),we=y.Qa;var Ne,Be=y.Pa;if(t(be!=null),t(we!=null),we.Cb=Y(be),we.Cb){if(we.Bb=Y(be),Y(be)){for(we.Fb=Y(be),Ne=0;4>Ne;++Ne)we.Zb[Ne]=Y(be)?M(be,7):0;for(Ne=0;4>Ne;++Ne)we.Lb[Ne]=Y(be)?M(be,6):0}if(we.Bb)for(Ne=0;3>Ne;++Ne)Be.jb[Ne]=Y(be)?V(be,8):255}else we.Bb=0;if(be.Ka)return Ns(y,3,"cannot parse segment header");if((we=y.ed).zd=Y(be),we.Tb=V(be,6),we.wb=V(be,3),we.Pc=Y(be),we.Pc&&Y(be)){for(Be=0;4>Be;++Be)Y(be)&&(we.vd[Be]=M(be,6));for(Be=0;4>Be;++Be)Y(be)&&(we.od[Be]=M(be,6))}if(y.L=we.Tb==0?0:we.zd?1:2,be.Ka)return Ns(y,3,"cannot parse filter header");var De=he;if(he=Ne=ae,ae=Ne+De,we=De,y.Xb=(1<<V(y.m,2))-1,De<3*(Be=y.Xb))W=7;else{for(Ne+=3*Be,we-=3*Be,De=0;De<Be;++De){var ze=W[he+0]|W[he+1]<<8|W[he+2]<<16;ze>we&&(ze=we),te(y.Jc[+De],W,Ne,ze),Ne+=ze,we-=ze,he+=3}te(y.Jc[+Be],W,Ne,we),W=Ne<ae?0:5}if(W!=0)return Ns(y,W,"cannot parse partitions");for(W=V(Ne=y.m,7),he=Y(Ne)?M(Ne,4):0,ae=Y(Ne)?M(Ne,4):0,we=Y(Ne)?M(Ne,4):0,Be=Y(Ne)?M(Ne,4):0,Ne=Y(Ne)?M(Ne,4):0,De=y.Qa,ze=0;4>ze;++ze){if(De.Cb){var ke=De.Zb[ze];De.Fb||(ke+=W)}else{if(0<ze){y.pb[ze]=y.pb[0];continue}ke=W}var Oe=y.pb[ze];Oe.Sc[0]=Hl[Us(ke+he,127)],Oe.Sc[1]=sd[Us(ke+0,127)],Oe.Eb[0]=2*Hl[Us(ke+ae,127)],Oe.Eb[1]=101581*sd[Us(ke+we,127)]>>16,8>Oe.Eb[1]&&(Oe.Eb[1]=8),Oe.Qc[0]=Hl[Us(ke+Be,117)],Oe.Qc[1]=sd[Us(ke+Ne,127)],Oe.lc=ke+Ne}if(!ve.Rb)return Ns(y,4,"Not a key frame.");for(Y(be),ve=y.Pa,W=0;4>W;++W){for(he=0;8>he;++he)for(ae=0;3>ae;++ae)for(we=0;11>we;++we)Be=X(be,kp[W][he][ae][we])?V(be,8):$h[W][he][ae][we],ve.Wc[W][he].Yb[ae][we]=Be;for(he=0;17>he;++he)ve.Xc[W][he]=ve.Wc[W][HA[he]]}return y.kc=Y(be),y.kc&&(y.Bd=V(be,8)),y.cb=1}function Nn(y,N,W,ae,he,be,ve){var we=N[he].Yb[W];for(W=0;16>he;++he){if(!X(y,we[W+0]))return he;for(;!X(y,we[W+1]);)if(we=N[++he].Yb[0],W=0,he==16)return 16;var Ne=N[he+1].Yb;if(X(y,we[W+2])){var Be=y,De=0;if(X(Be,(ke=we)[(ze=W)+3]))if(X(Be,ke[ze+6])){for(we=0,ze=2*(De=X(Be,ke[ze+8]))+(ke=X(Be,ke[ze+9+De])),De=0,ke=QA[ze];ke[we];++we)De+=De+X(Be,ke[we]);De+=3+(8<<ze)}else X(Be,ke[ze+7])?(De=7+2*X(Be,165),De+=X(Be,145)):De=5+X(Be,159);else De=X(Be,ke[ze+4])?3+X(Be,ke[ze+5]):2;we=Ne[2]}else De=1,we=Ne[1];Ne=ve+OA[he],0>(Be=y).b&&ne(Be);var ze,ke=Be.b,Oe=(ze=Be.Ca>>1)-(Be.I>>ke)>>31;--Be.b,Be.Ca+=Oe,Be.Ca|=1,Be.I-=(ze+1&Oe)<<ke,be[Ne]=((De^Oe)-Oe)*ae[(0<he)+0]}return 16}function qn(y){var N=y.rb[y.sb-1];N.la=0,N.Na=0,n(y.zc,0,0,y.zc.length),y.ja=0}function $a(y,N,W,ae,he){he=y[N+W+32*ae]+(he>>3),y[N+W+32*ae]=-256&he?0>he?0:255:he}function Wo(y,N,W,ae,he,be){$a(y,N,0,W,ae+he),$a(y,N,1,W,ae+be),$a(y,N,2,W,ae-be),$a(y,N,3,W,ae-he)}function gs(y){return(20091*y>>16)+y}function Ko(y,N,W,ae){var he,be=0,ve=i(16);for(he=0;4>he;++he){var we=y[N+0]+y[N+8],Ne=y[N+0]-y[N+8],Be=(35468*y[N+4]>>16)-gs(y[N+12]),De=gs(y[N+4])+(35468*y[N+12]>>16);ve[be+0]=we+De,ve[be+1]=Ne+Be,ve[be+2]=Ne-Be,ve[be+3]=we-De,be+=4,N++}for(he=be=0;4>he;++he)we=(y=ve[be+0]+4)+ve[be+8],Ne=y-ve[be+8],Be=(35468*ve[be+4]>>16)-gs(ve[be+12]),$a(W,ae,0,0,we+(De=gs(ve[be+4])+(35468*ve[be+12]>>16))),$a(W,ae,1,0,Ne+Be),$a(W,ae,2,0,Ne-Be),$a(W,ae,3,0,we-De),be++,ae+=32}function zd(y,N,W,ae){var he=y[N+0]+4,be=35468*y[N+4]>>16,ve=gs(y[N+4]),we=35468*y[N+1]>>16;Wo(W,ae,0,he+ve,y=gs(y[N+1]),we),Wo(W,ae,1,he+be,y,we),Wo(W,ae,2,he-be,y,we),Wo(W,ae,3,he-ve,y,we)}function Oc(y,N,W,ae,he){Ko(y,N,W,ae),he&&Ko(y,N+16,W,ae+4)}function zo(y,N,W,ae){xs(y,N+0,W,ae,1),xs(y,N+32,W,ae+128,1)}function oi(y,N,W,ae){var he;for(y=y[N+0]+4,he=0;4>he;++he)for(N=0;4>N;++N)$a(W,ae,N,he,y)}function Bl(y,N,W,ae){y[N+0]&&Gn(y,N+0,W,ae),y[N+16]&&Gn(y,N+16,W,ae+4),y[N+32]&&Gn(y,N+32,W,ae+128),y[N+48]&&Gn(y,N+48,W,ae+128+4)}function xr(y,N,W,ae){var he,be=i(16);for(he=0;4>he;++he){var ve=y[N+0+he]+y[N+12+he],we=y[N+4+he]+y[N+8+he],Ne=y[N+4+he]-y[N+8+he],Be=y[N+0+he]-y[N+12+he];be[0+he]=ve+we,be[8+he]=ve-we,be[4+he]=Be+Ne,be[12+he]=Be-Ne}for(he=0;4>he;++he)ve=(y=be[0+4*he]+3)+be[3+4*he],we=be[1+4*he]+be[2+4*he],Ne=be[1+4*he]-be[2+4*he],Be=y-be[3+4*he],W[ae+0]=ve+we>>3,W[ae+16]=Be+Ne>>3,W[ae+32]=ve-we>>3,W[ae+48]=Be-Ne>>3,ae+=64}function Ii(y,N,W){var ae,he=N-32,be=Ia,ve=255-y[he-1];for(ae=0;ae<W;++ae){var we,Ne=be,Be=ve+y[N-1];for(we=0;we<W;++we)y[N+we]=Ne[Be+y[he+we]];N+=32}}function kl(y,N){Ii(y,N,4)}function Hc(y,N){Ii(y,N,8)}function Gd(y,N){Ii(y,N,16)}function Vd(y,N){var W;for(W=0;16>W;++W)a(y,N+32*W,y,N-32,16)}function Fl(y,N){var W;for(W=16;0<W;--W)n(y,N,y[N-1],16),N+=32}function Ui(y,N,W){var ae;for(ae=0;16>ae;++ae)n(N,W+32*ae,y,16)}function $n(y,N){var W,ae=16;for(W=0;16>W;++W)ae+=y[N-1+32*W]+y[N+W-32];Ui(ae>>5,y,N)}function li(y,N){var W,ae=8;for(W=0;16>W;++W)ae+=y[N-1+32*W];Ui(ae>>4,y,N)}function Wa(y,N){var W,ae=8;for(W=0;16>W;++W)ae+=y[N+W-32];Ui(ae>>4,y,N)}function Cn(y,N){Ui(128,y,N)}function Kt(y,N,W){return y+2*N+W+2>>2}function Go(y,N){var W,ae=N-32;for(ae=new Uint8Array([Kt(y[ae-1],y[ae+0],y[ae+1]),Kt(y[ae+0],y[ae+1],y[ae+2]),Kt(y[ae+1],y[ae+2],y[ae+3]),Kt(y[ae+2],y[ae+3],y[ae+4])]),W=0;4>W;++W)a(y,N+32*W,ae,0,ae.length)}function ci(y,N){var W=y[N-1],ae=y[N-1+32],he=y[N-1+64],be=y[N-1+96];ye(y,N+0,16843009*Kt(y[N-1-32],W,ae)),ye(y,N+32,16843009*Kt(W,ae,he)),ye(y,N+64,16843009*Kt(ae,he,be)),ye(y,N+96,16843009*Kt(he,be,be))}function FA(y,N){var W,ae=4;for(W=0;4>W;++W)ae+=y[N+W-32]+y[N-1+32*W];for(ae>>=3,W=0;4>W;++W)n(y,N+32*W,ae,4)}function Yd(y,N){var W=y[N-1+0],ae=y[N-1+32],he=y[N-1+64],be=y[N-1-32],ve=y[N+0-32],we=y[N+1-32],Ne=y[N+2-32],Be=y[N+3-32];y[N+0+96]=Kt(ae,he,y[N-1+96]),y[N+1+96]=y[N+0+64]=Kt(W,ae,he),y[N+2+96]=y[N+1+64]=y[N+0+32]=Kt(be,W,ae),y[N+3+96]=y[N+2+64]=y[N+1+32]=y[N+0+0]=Kt(ve,be,W),y[N+3+64]=y[N+2+32]=y[N+1+0]=Kt(we,ve,be),y[N+3+32]=y[N+2+0]=Kt(Ne,we,ve),y[N+3+0]=Kt(Be,Ne,we)}function fn(y,N){var W=y[N+1-32],ae=y[N+2-32],he=y[N+3-32],be=y[N+4-32],ve=y[N+5-32],we=y[N+6-32],Ne=y[N+7-32];y[N+0+0]=Kt(y[N+0-32],W,ae),y[N+1+0]=y[N+0+32]=Kt(W,ae,he),y[N+2+0]=y[N+1+32]=y[N+0+64]=Kt(ae,he,be),y[N+3+0]=y[N+2+32]=y[N+1+64]=y[N+0+96]=Kt(he,be,ve),y[N+3+32]=y[N+2+64]=y[N+1+96]=Kt(be,ve,we),y[N+3+64]=y[N+2+96]=Kt(ve,we,Ne),y[N+3+96]=Kt(we,Ne,Ne)}function Li(y,N){var W=y[N-1+0],ae=y[N-1+32],he=y[N-1+64],be=y[N-1-32],ve=y[N+0-32],we=y[N+1-32],Ne=y[N+2-32],Be=y[N+3-32];y[N+0+0]=y[N+1+64]=be+ve+1>>1,y[N+1+0]=y[N+2+64]=ve+we+1>>1,y[N+2+0]=y[N+3+64]=we+Ne+1>>1,y[N+3+0]=Ne+Be+1>>1,y[N+0+96]=Kt(he,ae,W),y[N+0+64]=Kt(ae,W,be),y[N+0+32]=y[N+1+96]=Kt(W,be,ve),y[N+1+32]=y[N+2+96]=Kt(be,ve,we),y[N+2+32]=y[N+3+96]=Kt(ve,we,Ne),y[N+3+32]=Kt(we,Ne,Be)}function Jd(y,N){var W=y[N+0-32],ae=y[N+1-32],he=y[N+2-32],be=y[N+3-32],ve=y[N+4-32],we=y[N+5-32],Ne=y[N+6-32],Be=y[N+7-32];y[N+0+0]=W+ae+1>>1,y[N+1+0]=y[N+0+64]=ae+he+1>>1,y[N+2+0]=y[N+1+64]=he+be+1>>1,y[N+3+0]=y[N+2+64]=be+ve+1>>1,y[N+0+32]=Kt(W,ae,he),y[N+1+32]=y[N+0+96]=Kt(ae,he,be),y[N+2+32]=y[N+1+96]=Kt(he,be,ve),y[N+3+32]=y[N+2+96]=Kt(be,ve,we),y[N+3+64]=Kt(ve,we,Ne),y[N+3+96]=Kt(we,Ne,Be)}function El(y,N){var W=y[N-1+0],ae=y[N-1+32],he=y[N-1+64],be=y[N-1+96];y[N+0+0]=W+ae+1>>1,y[N+2+0]=y[N+0+32]=ae+he+1>>1,y[N+2+32]=y[N+0+64]=he+be+1>>1,y[N+1+0]=Kt(W,ae,he),y[N+3+0]=y[N+1+32]=Kt(ae,he,be),y[N+3+32]=y[N+1+64]=Kt(he,be,be),y[N+3+64]=y[N+2+64]=y[N+0+96]=y[N+1+96]=y[N+2+96]=y[N+3+96]=be}function Vo(y,N){var W=y[N-1+0],ae=y[N-1+32],he=y[N-1+64],be=y[N-1+96],ve=y[N-1-32],we=y[N+0-32],Ne=y[N+1-32],Be=y[N+2-32];y[N+0+0]=y[N+2+32]=W+ve+1>>1,y[N+0+32]=y[N+2+64]=ae+W+1>>1,y[N+0+64]=y[N+2+96]=he+ae+1>>1,y[N+0+96]=be+he+1>>1,y[N+3+0]=Kt(we,Ne,Be),y[N+2+0]=Kt(ve,we,Ne),y[N+1+0]=y[N+3+32]=Kt(W,ve,we),y[N+1+32]=y[N+3+64]=Kt(ae,W,ve),y[N+1+64]=y[N+3+96]=Kt(he,ae,W),y[N+1+96]=Kt(be,he,ae)}function qc(y,N){var W;for(W=0;8>W;++W)a(y,N+32*W,y,N-32,8)}function Wn(y,N){var W;for(W=0;8>W;++W)n(y,N,y[N-1],8),N+=32}function di(y,N,W){var ae;for(ae=0;8>ae;++ae)n(N,W+32*ae,y,8)}function Kn(y,N){var W,ae=8;for(W=0;8>W;++W)ae+=y[N+W-32]+y[N-1+32*W];di(ae>>4,y,N)}function _l(y,N){var W,ae=4;for(W=0;8>W;++W)ae+=y[N+W-32];di(ae>>3,y,N)}function $c(y,N){var W,ae=4;for(W=0;8>W;++W)ae+=y[N-1+32*W];di(ae>>3,y,N)}function Wc(y,N){di(128,y,N)}function Ti(y,N,W){var ae=y[N-W],he=y[N+0],be=3*(he-ae)+gi[1020+y[N-2*W]-y[N+W]],ve=Ql[112+(be+4>>3)];y[N-W]=Ia[255+ae+Ql[112+(be+3>>3)]],y[N+0]=Ia[255+he-ve]}function ui(y,N,W,ae){var he=y[N+0],be=y[N+W];return Bn[255+y[N-2*W]-y[N-W]]>ae||Bn[255+be-he]>ae}function Yo(y,N,W,ae){return 4*Bn[255+y[N-W]-y[N+0]]+Bn[255+y[N-2*W]-y[N+W]]<=ae}function Jo(y,N,W,ae,he){var be=y[N-3*W],ve=y[N-2*W],we=y[N-W],Ne=y[N+0],Be=y[N+W],De=y[N+2*W],ze=y[N+3*W];return 4*Bn[255+we-Ne]+Bn[255+ve-Be]>ae?0:Bn[255+y[N-4*W]-be]<=he&&Bn[255+be-ve]<=he&&Bn[255+ve-we]<=he&&Bn[255+ze-De]<=he&&Bn[255+De-Be]<=he&&Bn[255+Be-Ne]<=he}function Sn(y,N,W,ae){var he=2*ae+1;for(ae=0;16>ae;++ae)Yo(y,N+ae,W,he)&&Ti(y,N+ae,W)}function Di(y,N,W,ae){var he=2*ae+1;for(ae=0;16>ae;++ae)Yo(y,N+ae*W,1,he)&&Ti(y,N+ae*W,1)}function fo(y,N,W,ae){var he;for(he=3;0<he;--he)Sn(y,N+=4*W,W,ae)}function Pl(y,N,W,ae){var he;for(he=3;0<he;--he)Di(y,N+=4,W,ae)}function ga(y,N,W,ae,he,be,ve,we){for(be=2*be+1;0<he--;){if(Jo(y,N,W,be,ve))if(ui(y,N,W,we))Ti(y,N,W);else{var Ne=y,Be=N,De=W,ze=Ne[Be-2*De],ke=Ne[Be-De],Oe=Ne[Be+0],Ke=Ne[Be+De],rt=Ne[Be+2*De],Ye=27*(tt=gi[1020+3*(Oe-ke)+gi[1020+ze-Ke]])+63>>7,Ze=18*tt+63>>7,tt=9*tt+63>>7;Ne[Be-3*De]=Ia[255+Ne[Be-3*De]+tt],Ne[Be-2*De]=Ia[255+ze+Ze],Ne[Be-De]=Ia[255+ke+Ye],Ne[Be+0]=Ia[255+Oe-Ye],Ne[Be+De]=Ia[255+Ke-Ze],Ne[Be+2*De]=Ia[255+rt-tt]}N+=ae}}function gn(y,N,W,ae,he,be,ve,we){for(be=2*be+1;0<he--;){if(Jo(y,N,W,be,ve))if(ui(y,N,W,we))Ti(y,N,W);else{var Ne=y,Be=N,De=W,ze=Ne[Be-De],ke=Ne[Be+0],Oe=Ne[Be+De],Ke=Ql[112+(4+(rt=3*(ke-ze))>>3)],rt=Ql[112+(rt+3>>3)],Ye=Ke+1>>1;Ne[Be-2*De]=Ia[255+Ne[Be-2*De]+Ye],Ne[Be-De]=Ia[255+ze+rt],Ne[Be+0]=Ia[255+ke-Ke],Ne[Be+De]=Ia[255+Oe-Ye]}N+=ae}}function R(y,N,W,ae,he,be){ga(y,N,W,1,16,ae,he,be)}function me(y,N,W,ae,he,be){ga(y,N,1,W,16,ae,he,be)}function Ee(y,N,W,ae,he,be){var ve;for(ve=3;0<ve;--ve)gn(y,N+=4*W,W,1,16,ae,he,be)}function Ue(y,N,W,ae,he,be){var ve;for(ve=3;0<ve;--ve)gn(y,N+=4,1,W,16,ae,he,be)}function $e(y,N,W,ae,he,be,ve,we){ga(y,N,he,1,8,be,ve,we),ga(W,ae,he,1,8,be,ve,we)}function at(y,N,W,ae,he,be,ve,we){ga(y,N,1,he,8,be,ve,we),ga(W,ae,1,he,8,be,ve,we)}function dt(y,N,W,ae,he,be,ve,we){gn(y,N+4*he,he,1,8,be,ve,we),gn(W,ae+4*he,he,1,8,be,ve,we)}function kt(y,N,W,ae,he,be,ve,we){gn(y,N+4,1,he,8,be,ve,we),gn(W,ae+4,1,he,8,be,ve,we)}function Et(){this.ba=new yt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ht(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function er(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function yr(){this.ua=0,this.Wa=new We,this.vb=new We,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new le,this.yc=new E}function rs(){this.xb=this.a=0,this.l=new fa,this.ca=new yt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ee,this.Pb=0,this.wd=new ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new yr,this.ab=0,this.gc=o(4,er),this.Oc=0}function Cs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new fa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Cr(y,N,W,ae,he,be,ve){for(y=y==null?0:y[N+0],N=0;N<ve;++N)he[be+N]=y+W[ae+N]&255,y=he[be+N]}function Is(y,N,W,ae,he,be,ve){var we;if(y==null)Cr(null,null,W,ae,he,be,ve);else for(we=0;we<ve;++we)he[be+we]=y[N+we]+W[ae+we]&255}function Ss(y,N,W,ae,he,be,ve){if(y==null)Cr(null,null,W,ae,he,be,ve);else{var we,Ne=y[N+0],Be=Ne,De=Ne;for(we=0;we<ve;++we)Be=De+(Ne=y[N+we])-Be,De=W[ae+we]+(-256&Be?0>Be?0:255:Be)&255,Be=Ne,he[be+we]=De}}function na(y,N,W,ae){var he=N.width,be=N.o;if(t(y!=null&&N!=null),0>W||0>=ae||W+ae>be)return null;if(!y.Cc){if(y.ga==null){var ve;if(y.ga=new Cs,(ve=y.ga==null)||(ve=N.width*N.o,t(y.Gb.length==0),y.Gb=i(ve),y.Uc=0,y.Gb==null?ve=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,ve=1),ve=!ve),!ve){ve=y.ga;var we=y.Fa,Ne=y.P,Be=y.qc,De=y.mb,ze=y.nb,ke=Ne+1,Oe=Be-1,Ke=ve.l;if(t(we!=null&&De!=null&&N!=null),pa[0]=null,pa[1]=Cr,pa[2]=Is,pa[3]=Ss,ve.ca=De,ve.tb=ze,ve.c=N.width,ve.i=N.height,t(0<ve.c&&0<ve.i),1>=Be)N=0;else if(ve.$a=3&we[Ne+0],ve.Z=we[Ne+0]>>2&3,ve.Lc=we[Ne+0]>>4&3,Ne=we[Ne+0]>>6&3,0>ve.$a||1<ve.$a||4<=ve.Z||1<ve.Lc||Ne)N=0;else if(Ke.put=Dt,Ke.ac=Gr,Ke.bc=ts,Ke.ma=ve,Ke.width=N.width,Ke.height=N.height,Ke.Da=N.Da,Ke.v=N.v,Ke.va=N.va,Ke.j=N.j,Ke.o=N.o,ve.$a)e:{t(ve.$a==1),N=Wr();t:for(;;){if(N==null){N=0;break e}if(t(ve!=null),ve.mc=N,N.c=ve.c,N.i=ve.i,N.l=ve.l,N.l.ma=ve,N.l.width=ve.c,N.l.height=ve.i,N.a=0,ie(N.m,we,ke,Oe),!fs(ve.c,ve.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&Oa(N.s)?(ve.ic=1,we=N.c*N.i,N.Ta=null,N.Ua=0,N.V=i(we),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ve.ic=0,N=mn(N,ve.c)),!N))break t;N=1;break e}ve.mc=null,N=0}else N=Oe>=ve.c*ve.i;ve=!N}if(ve)return null;y.ga.Lc!=1?y.Ga=0:ae=be-W}t(y.ga!=null),t(W+ae<=be);e:{if(N=(we=y.ga).c,be=we.l.o,we.$a==0){if(ke=y.rc,Oe=y.Vc,Ke=y.Fa,Ne=y.P+1+W*N,Be=y.mb,De=y.nb+W*N,t(Ne<=y.P+y.qc),we.Z!=0)for(t(pa[we.Z]!=null),ve=0;ve<ae;++ve)pa[we.Z](ke,Oe,Ke,Ne,Be,De,N),ke=Be,Oe=De,De+=N,Ne+=N;else for(ve=0;ve<ae;++ve)a(Be,De,Ke,Ne,N),ke=Be,Oe=De,De+=N,Ne+=N;y.rc=ke,y.Vc=Oe}else{if(t(we.mc!=null),N=W+ae,t((ve=we.mc)!=null),t(N<=ve.i),ve.C>=N)N=1;else if(we.ic||Xo(),we.ic){we=ve.V,ke=ve.Ba,Oe=ve.c;var rt=ve.i,Ye=(Ke=1,Ne=ve.$/Oe,Be=ve.$%Oe,De=ve.m,ze=ve.s,ve.$),Ze=Oe*rt,tt=Oe*N,nt=ze.wc,it=Ye<tt?is(ze,Be,Ne):null;t(Ye<=Ze),t(N<=rt),t(Oa(ze));t:for(;;){for(;!De.h&&Ye<tt;){if(Be&nt||(it=is(ze,Be,Ne)),t(it!=null),z(De),256>(rt=cr(it.G[0],it.H[0],De)))we[ke+Ye]=rt,++Ye,++Be>=Oe&&(Be=0,++Ne<=N&&!(Ne%16)&&zs(ve,Ne));else{if(!(280>rt)){Ke=0;break t}rt=Vr(rt-256,De);var Mt,St=cr(it.G[4],it.H[4],De);if(z(De),!(Ye>=(St=ha(Oe,St=Vr(St,De)))&&Ze-Ye>=rt)){Ke=0;break t}for(Mt=0;Mt<rt;++Mt)we[ke+Ye+Mt]=we[ke+Ye+Mt-St];for(Ye+=rt,Be+=rt;Be>=Oe;)Be-=Oe,++Ne<=N&&!(Ne%16)&&zs(ve,Ne);Ye<tt&&Be&nt&&(it=is(ze,Be,Ne))}t(De.h==de(De))}zs(ve,Ne>N?N:Ne);break t}!Ke||De.h&&Ye<Ze?(Ke=0,ve.a=De.h?5:3):ve.$=Ye,N=Ke}else N=Ha(ve,ve.V,ve.Ba,ve.c,ve.i,N,_i);if(!N){ae=0;break e}}W+ae>=be&&(y.Cc=1),ae=1}if(!ae)return null;if(y.Cc&&((ae=y.ga)!=null&&(ae.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+W*he}function Mi(y,N,W,ae,he,be){for(;0<he--;){var ve,we=y,Ne=N+(W?1:0),Be=y,De=N+(W?0:3);for(ve=0;ve<ae;++ve){var ze=Be[De+4*ve];ze!=255&&(ze*=32897,we[Ne+4*ve+0]=we[Ne+4*ve+0]*ze>>23,we[Ne+4*ve+1]=we[Ne+4*ve+1]*ze>>23,we[Ne+4*ve+2]=we[Ne+4*ve+2]*ze>>23)}N+=be}}function go(y,N,W,ae,he){for(;0<ae--;){var be;for(be=0;be<W;++be){var ve=y[N+2*be+0],we=15&(Be=y[N+2*be+1]),Ne=4369*we,Be=(240&Be|Be>>4)*Ne>>16;y[N+2*be+0]=(240&ve|ve>>4)*Ne>>16&240|(15&ve|ve<<4)*Ne>>16>>4&15,y[N+2*be+1]=240&Be|we}N+=he}}function Xd(y,N,W,ae,he,be,ve,we){var Ne,Be,De=255;for(Be=0;Be<he;++Be){for(Ne=0;Ne<ae;++Ne){var ze=y[N+Ne];be[ve+4*Ne]=ze,De&=ze}N+=W,ve+=we}return De!=255}function Zd(y,N,W,ae,he){var be;for(be=0;be<he;++be)W[ae+be]=y[N+be]>>8}function Xo(){sl=Mi,IA=go,Jc=Xd,UA=Zd}function zn(y,N,W){_[y]=function(ae,he,be,ve,we,Ne,Be,De,ze,ke,Oe,Ke,rt,Ye,Ze,tt,nt){var it,Mt=nt-1>>1,St=we[Ne+0]|Be[De+0]<<16,tr=ze[ke+0]|Oe[Ke+0]<<16;t(ae!=null);var _t=3*St+tr+131074>>2;for(N(ae[he+0],255&_t,_t>>16,rt,Ye),be!=null&&(_t=3*tr+St+131074>>2,N(be[ve+0],255&_t,_t>>16,Ze,tt)),it=1;it<=Mt;++it){var dr=we[Ne+it]|Be[De+it]<<16,ls=ze[ke+it]|Oe[Ke+it]<<16,rr=St+dr+tr+ls+524296,Bt=rr+2*(dr+tr)>>3;_t=Bt+St>>1,St=(rr=rr+2*(St+ls)>>3)+dr>>1,N(ae[he+2*it-1],255&_t,_t>>16,rt,Ye+(2*it-1)*W),N(ae[he+2*it-0],255&St,St>>16,rt,Ye+(2*it-0)*W),be!=null&&(_t=rr+tr>>1,St=Bt+ls>>1,N(be[ve+2*it-1],255&_t,_t>>16,Ze,tt+(2*it-1)*W),N(be[ve+2*it+0],255&St,St>>16,Ze,tt+(2*it+0)*W)),St=dr,tr=ls}1&nt||(_t=3*St+tr+131074>>2,N(ae[he+nt-1],255&_t,_t>>16,rt,Ye+(nt-1)*W),be!=null&&(_t=3*tr+St+131074>>2,N(be[ve+nt-1],255&_t,_t>>16,Ze,tt+(nt-1)*W)))}}function Kc(){Ja[iu]=Fp,Ja[jo]=No,Ja[Qh]=Ep,Ja[Xc]=$l,Ja[Zc]=ol,Ja[Ur]=ad,Ja[ou]=qA,Ja[Ol]=No,Ja[al]=$l,Ja[ed]=ol,Ja[td]=ad}function po(y){return y&-16384?0>y?0:255:y>>Co}function xo(y,N){return po((19077*y>>8)+(26149*N>>8)-14234)}function Gs(y,N,W){return po((19077*y>>8)-(6419*N>>8)-(13320*W>>8)+8708)}function Ri(y,N){return po((19077*y>>8)+(33050*N>>8)-17685)}function Ai(y,N,W,ae,he){ae[he+0]=xo(y,W),ae[he+1]=Gs(y,N,W),ae[he+2]=Ri(y,N)}function Il(y,N,W,ae,he){ae[he+0]=Ri(y,N),ae[he+1]=Gs(y,N,W),ae[he+2]=xo(y,W)}function zc(y,N,W,ae,he){var be=Gs(y,N,W);N=be<<3&224|Ri(y,N)>>3,ae[he+0]=248&xo(y,W)|be>>5,ae[he+1]=N}function Fa(y,N,W,ae,he){var be=240&Ri(y,N)|15;ae[he+0]=240&xo(y,W)|Gs(y,N,W)>>4,ae[he+1]=be}function eu(y,N,W,ae,he){ae[he+0]=255,Ai(y,N,W,ae,he+1)}function Ul(y,N,W,ae,he){Il(y,N,W,ae,he),ae[he+3]=255}function tu(y,N,W,ae,he){Ai(y,N,W,ae,he),ae[he+3]=255}function Us(y,N){return 0>y?0:y>N?N:y}function Ka(y,N,W){_[y]=function(ae,he,be,ve,we,Ne,Be,De,ze){for(var ke=De+(-2&ze)*W;De!=ke;)N(ae[he+0],be[ve+0],we[Ne+0],Be,De),N(ae[he+1],be[ve+0],we[Ne+0],Be,De+W),he+=2,++ve,++Ne,De+=2*W;1&ze&&N(ae[he+0],be[ve+0],we[Ne+0],Be,De)}}function Qi(y,N,W){return W==0?y==0?N==0?6:5:N==0?4:0:W}function Gc(y,N,W,ae,he){switch(y>>>30){case 3:xs(N,W,ae,he,0);break;case 2:Ls(N,W,ae,he);break;case 1:Gn(N,W,ae,he)}}function Oi(y,N){var W,ae,he=N.M,be=N.Nb,ve=y.oc,we=y.pc+40,Ne=y.oc,Be=y.pc+584,De=y.oc,ze=y.pc+600;for(W=0;16>W;++W)ve[we+32*W-1]=129;for(W=0;8>W;++W)Ne[Be+32*W-1]=129,De[ze+32*W-1]=129;for(0<he?ve[we-1-32]=Ne[Be-1-32]=De[ze-1-32]=129:(n(ve,we-32-1,127,21),n(Ne,Be-32-1,127,9),n(De,ze-32-1,127,9)),ae=0;ae<y.za;++ae){var ke=N.ya[N.aa+ae];if(0<ae){for(W=-1;16>W;++W)a(ve,we+32*W-4,ve,we+32*W+12,4);for(W=-1;8>W;++W)a(Ne,Be+32*W-4,Ne,Be+32*W+4,4),a(De,ze+32*W-4,De,ze+32*W+4,4)}var Oe=y.Gd,Ke=y.Hd+ae,rt=ke.ad,Ye=ke.Hc;if(0<he&&(a(ve,we-32,Oe[Ke].y,0,16),a(Ne,Be-32,Oe[Ke].f,0,8),a(De,ze-32,Oe[Ke].ea,0,8)),ke.Za){var Ze=ve,tt=we-32+16;for(0<he&&(ae>=y.za-1?n(Ze,tt,Oe[Ke].y[15],4):a(Ze,tt,Oe[Ke+1].y,0,4)),W=0;4>W;W++)Ze[tt+128+W]=Ze[tt+256+W]=Ze[tt+384+W]=Ze[tt+0+W];for(W=0;16>W;++W,Ye<<=2)Ze=ve,tt=we+$A[W],kn[ke.Ob[W]](Ze,tt),Gc(Ye,rt,16*+W,Ze,tt)}else if(Ze=Qi(ae,he,ke.Ob[0]),Ua[Ze](ve,we),Ye!=0)for(W=0;16>W;++W,Ye<<=2)Gc(Ye,rt,16*+W,ve,we+$A[W]);for(W=ke.Gc,Ze=Qi(ae,he,ke.Dd),Ya[Ze](Ne,Be),Ya[Ze](De,ze),Ye=rt,Ze=Ne,tt=Be,255&(ke=0|W)&&(170&ke?fi(Ye,256,Ze,tt):Ml(Ye,256,Ze,tt)),ke=De,Ye=ze,255&(W>>=8)&&(170&W?fi(rt,320,ke,Ye):Ml(rt,320,ke,Ye)),he<y.Ub-1&&(a(Oe[Ke].y,0,ve,we+480,16),a(Oe[Ke].f,0,Ne,Be+224,8),a(Oe[Ke].ea,0,De,ze+224,8)),W=8*be*y.B,Oe=y.sa,Ke=y.ta+16*ae+16*be*y.R,rt=y.qa,ke=y.ra+8*ae+W,Ye=y.Ha,Ze=y.Ia+8*ae+W,W=0;16>W;++W)a(Oe,Ke+W*y.R,ve,we+32*W,16);for(W=0;8>W;++W)a(rt,ke+W*y.B,Ne,Be+32*W,8),a(Ye,Ze+W*y.B,De,ze+32*W,8)}}function Zo(y,N,W,ae,he,be,ve,we,Ne){var Be=[0],De=[0],ze=0,ke=Ne!=null?Ne.kd:0,Oe=Ne??new Ht;if(y==null||12>W)return 7;Oe.data=y,Oe.w=N,Oe.ha=W,N=[N],W=[W],Oe.gb=[Oe.gb];e:{var Ke=N,rt=W,Ye=Oe.gb;if(t(y!=null),t(rt!=null),t(Ye!=null),Ye[0]=0,12<=rt[0]&&!r(y,Ke[0],"RIFF")){if(r(y,Ke[0]+8,"WEBP")){Ye=3;break e}var Ze=je(y,Ke[0]+4);if(12>Ze||4294967286<Ze){Ye=3;break e}if(ke&&Ze>rt[0]-8){Ye=7;break e}Ye[0]=Ze,Ke[0]+=12,rt[0]-=12}Ye=0}if(Ye!=0)return Ye;for(Ze=0<Oe.gb[0],W=W[0];;){e:{var tt=y;rt=N,Ye=W;var nt=Be,it=De,Mt=Ke=[0];if((_t=ze=[ze])[0]=0,8>Ye[0])Ye=7;else{if(!r(tt,rt[0],"VP8X")){if(je(tt,rt[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var St=je(tt,rt[0]+8),tr=1+Ce(tt,rt[0]+12);if(2147483648<=tr*(tt=1+Ce(tt,rt[0]+15))){Ye=3;break e}Mt!=null&&(Mt[0]=St),nt!=null&&(nt[0]=tr),it!=null&&(it[0]=tt),rt[0]+=18,Ye[0]-=18,_t[0]=1}Ye=0}}if(ze=ze[0],Ke=Ke[0],Ye!=0)return Ye;if(rt=!!(2&Ke),!Ze&&ze)return 3;if(be!=null&&(be[0]=!!(16&Ke)),ve!=null&&(ve[0]=rt),we!=null&&(we[0]=0),ve=Be[0],Ke=De[0],ze&&rt&&Ne==null){Ye=0;break}if(4>W){Ye=7;break}if(Ze&&ze||!Ze&&!ze&&!r(y,N[0],"ALPH")){W=[W],Oe.na=[Oe.na],Oe.P=[Oe.P],Oe.Sa=[Oe.Sa];e:{St=y,Ye=N,Ze=W;var _t=Oe.gb;nt=Oe.na,it=Oe.P,Mt=Oe.Sa,tr=22,t(St!=null),t(Ze!=null),tt=Ye[0];var dr=Ze[0];for(t(nt!=null),t(Mt!=null),nt[0]=null,it[0]=null,Mt[0]=0;;){if(Ye[0]=tt,Ze[0]=dr,8>dr){Ye=7;break e}var ls=je(St,tt+4);if(4294967286<ls){Ye=3;break e}var rr=8+ls+1&-2;if(tr+=rr,0<_t&&tr>_t){Ye=3;break e}if(!r(St,tt,"VP8 ")||!r(St,tt,"VP8L")){Ye=0;break e}if(dr[0]<rr){Ye=7;break e}r(St,tt,"ALPH")||(nt[0]=St,it[0]=tt+8,Mt[0]=ls),tt+=rr,dr-=rr}}if(W=W[0],Oe.na=Oe.na[0],Oe.P=Oe.P[0],Oe.Sa=Oe.Sa[0],Ye!=0)break}W=[W],Oe.Ja=[Oe.Ja],Oe.xa=[Oe.xa];e:if(_t=y,Ye=N,Ze=W,nt=Oe.gb[0],it=Oe.Ja,Mt=Oe.xa,St=Ye[0],tt=!r(_t,St,"VP8 "),tr=!r(_t,St,"VP8L"),t(_t!=null),t(Ze!=null),t(it!=null),t(Mt!=null),8>Ze[0])Ye=7;else{if(tt||tr){if(_t=je(_t,St+4),12<=nt&&_t>nt-12){Ye=3;break e}if(ke&&_t>Ze[0]-8){Ye=7;break e}it[0]=_t,Ye[0]+=8,Ze[0]-=8,Mt[0]=tr}else Mt[0]=5<=Ze[0]&&_t[St+0]==47&&!(_t[St+4]>>5),it[0]=Ze[0];Ye=0}if(W=W[0],Oe.Ja=Oe.Ja[0],Oe.xa=Oe.xa[0],N=N[0],Ye!=0)break;if(4294967286<Oe.Ja)return 3;if(we==null||rt||(we[0]=Oe.xa?2:1),ve=[ve],Ke=[Ke],Oe.xa){if(5>W){Ye=7;break}we=ve,ke=Ke,rt=be,y==null||5>W?y=0:5<=W&&y[N+0]==47&&!(y[N+4]>>5)?(Ze=[0],_t=[0],nt=[0],ie(it=new ee,y,N,W),Ps(it,Ze,_t,nt)?(we!=null&&(we[0]=Ze[0]),ke!=null&&(ke[0]=_t[0]),rt!=null&&(rt[0]=nt[0]),y=1):y=0):y=0}else{if(10>W){Ye=7;break}we=Ke,y==null||10>W||!Kd(y,N+3,W-3)?y=0:(ke=y[N+0]|y[N+1]<<8|y[N+2]<<16,rt=16383&(y[N+7]<<8|y[N+6]),y=16383&(y[N+9]<<8|y[N+8]),1&ke||3<(ke>>1&7)||!(ke>>4&1)||ke>>5>=Oe.Ja||!rt||!y?y=0:(ve&&(ve[0]=rt),we&&(we[0]=y),y=1))}if(!y||(ve=ve[0],Ke=Ke[0],ze&&(Be[0]!=ve||De[0]!=Ke)))return 3;Ne!=null&&(Ne[0]=Oe,Ne.offset=N-Ne.w,t(4294967286>N-Ne.w),t(Ne.offset==Ne.ha-W));break}return Ye==0||Ye==7&&ze&&Ne==null?(be!=null&&(be[0]|=Oe.na!=null&&0<Oe.na.length),ae!=null&&(ae[0]=ve),he!=null&&(he[0]=Ke),0):Ye}function Ea(y,N,W){var ae=N.width,he=N.height,be=0,ve=0,we=ae,Ne=he;if(N.Da=y!=null&&0<y.Da,N.Da&&(we=y.cd,Ne=y.bd,be=y.v,ve=y.j,11>W||(be&=-2,ve&=-2),0>be||0>ve||0>=we||0>=Ne||be+we>ae||ve+Ne>he))return 0;if(N.v=be,N.j=ve,N.va=be+we,N.o=ve+Ne,N.U=we,N.T=Ne,N.da=y!=null&&0<y.da,N.da){if(!Le(we,Ne,W=[y.ib],be=[y.hb]))return 0;N.ib=W[0],N.hb=be[0]}return N.ob=y!=null&&y.ob,N.Kb=y==null||!y.Sd,N.da&&(N.ob=N.ib<3*ae/4&&N.hb<3*he/4,N.Kb=0),1}function _a(y){if(y==null)return 2;if(11>y.S){var N=y.f.RGBA;N.fb+=(y.height-1)*N.A,N.A=-N.A}else N=y.f.kb,y=y.height,N.O+=(y-1)*N.fa,N.fa=-N.fa,N.N+=(y-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(y-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(y-1)*N.lb,N.lb=-N.lb);return 0}function bo(y,N,W,ae){if(ae==null||0>=y||0>=N)return 2;if(W!=null){if(W.Da){var he=W.cd,be=W.bd,ve=-2&W.v,we=-2&W.j;if(0>ve||0>we||0>=he||0>=be||ve+he>y||we+be>N)return 2;y=he,N=be}if(W.da){if(!Le(y,N,he=[W.ib],be=[W.hb]))return 2;y=he[0],N=be[0]}}ae.width=y,ae.height=N;e:{var Ne=ae.width,Be=ae.height;if(y=ae.S,0>=Ne||0>=Be||!(y>=iu&&13>y))y=2;else{if(0>=ae.Rd&&ae.sd==null){ve=be=he=N=0;var De=(we=Ne*nd[y])*Be;if(11>y||(be=(Be+1)/2*(N=(Ne+1)/2),y==12&&(ve=(he=Ne)*Be)),(Be=i(De+2*be+ve))==null){y=1;break e}ae.sd=Be,11>y?((Ne=ae.f.RGBA).eb=Be,Ne.fb=0,Ne.A=we,Ne.size=De):((Ne=ae.f.kb).y=Be,Ne.O=0,Ne.fa=we,Ne.Fd=De,Ne.f=Be,Ne.N=0+De,Ne.Ab=N,Ne.Cd=be,Ne.ea=Be,Ne.W=0+De+be,Ne.Db=N,Ne.Ed=be,y==12&&(Ne.F=Be,Ne.J=0+De+2*be),Ne.Tc=ve,Ne.lb=he)}if(N=1,he=ae.S,be=ae.width,ve=ae.height,he>=iu&&13>he)if(11>he)y=ae.f.RGBA,N&=(we=Math.abs(y.A))*(ve-1)+be<=y.size,N&=we>=be*nd[he],N&=y.eb!=null;else{y=ae.f.kb,we=(be+1)/2,De=(ve+1)/2,Ne=Math.abs(y.fa),Be=Math.abs(y.Ab);var ze=Math.abs(y.Db),ke=Math.abs(y.lb),Oe=ke*(ve-1)+be;N&=Ne*(ve-1)+be<=y.Fd,N&=Be*(De-1)+we<=y.Cd,N=(N&=ze*(De-1)+we<=y.Ed)&Ne>=be&Be>=we&ze>=we,N&=y.y!=null,N&=y.f!=null,N&=y.ea!=null,he==12&&(N&=ke>=be,N&=Oe<=y.Tc,N&=y.F!=null)}else N=0;y=N?0:2}}return y!=0||W!=null&&W.fd&&(y=_a(ae)),y}var Pa=64,yo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Vc=24,vo=32,os=8,ru=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Se("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(y){return y},_.Predictor2=function(y,N,W){return N[W+0]},_.Predictor3=function(y,N,W){return N[W+1]},_.Predictor4=function(y,N,W){return N[W-1]},_.Predictor5=function(y,N,W){return G(G(y,N[W+1]),N[W+0])},_.Predictor6=function(y,N,W){return G(y,N[W-1])},_.Predictor7=function(y,N,W){return G(y,N[W+0])},_.Predictor8=function(y,N,W){return G(N[W-1],N[W+0])},_.Predictor9=function(y,N,W){return G(N[W+0],N[W+1])},_.Predictor10=function(y,N,W){return G(G(y,N[W-1]),G(N[W+0],N[W+1]))},_.Predictor11=function(y,N,W){var ae=N[W+0];return 0>=oe(ae>>24&255,y>>24&255,(N=N[W-1])>>24&255)+oe(ae>>16&255,y>>16&255,N>>16&255)+oe(ae>>8&255,y>>8&255,N>>8&255)+oe(255&ae,255&y,255&N)?ae:y},_.Predictor12=function(y,N,W){var ae=N[W+0];return(ue((y>>24&255)+(ae>>24&255)-((N=N[W-1])>>24&255))<<24|ue((y>>16&255)+(ae>>16&255)-(N>>16&255))<<16|ue((y>>8&255)+(ae>>8&255)-(N>>8&255))<<8|ue((255&y)+(255&ae)-(255&N)))>>>0},_.Predictor13=function(y,N,W){var ae=N[W-1];return(ge((y=G(y,N[W+0]))>>24&255,ae>>24&255)<<24|ge(y>>16&255,ae>>16&255)<<16|ge(y>>8&255,ae>>8&255)<<8|ge(255&y,255&ae))>>>0};var za=_.PredictorAdd0;_.PredictorAdd1=J,Se("Predictor2","PredictorAdd2"),Se("Predictor3","PredictorAdd3"),Se("Predictor4","PredictorAdd4"),Se("Predictor5","PredictorAdd5"),Se("Predictor6","PredictorAdd6"),Se("Predictor7","PredictorAdd7"),Se("Predictor8","PredictorAdd8"),Se("Predictor9","PredictorAdd9"),Se("Predictor10","PredictorAdd10"),Se("Predictor11","PredictorAdd11"),Se("Predictor12","PredictorAdd12"),Se("Predictor13","PredictorAdd13");var Ga=_.PredictorAdd2;Ie("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),Ie("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var Ll,wo=_.ColorIndexInverseTransform,Tl=_.MapARGB,el=_.VP8LColorIndexInverseTransformAlpha,Hi=_.MapAlpha,qi=_.VP8LPredictorsAdd=[];qi.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var mi,Dl,Va,hi,Or,Hr,ps,xs,Ls,fi,Gn,Ml,EA,_A,su,Mh,Rh,tl,au,Rl,nu,PA,Yc,rl,sl,IA,Jc,UA,LA=i(511),TA=i(2041),DA=i(225),MA=i(767),RA=0,gi=TA,Ql=DA,Ia=MA,Bn=LA,iu=0,jo=1,Qh=2,Xc=3,Zc=4,Ur=5,ou=6,Ol=7,al=8,ed=9,td=10,rd=[2,3,7],lu=[3,3,11],nl=[280,256,256,256,40],Oh=[0,1,1,1,0],Cp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Sp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Hh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],cu=8,Hl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],sd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],il=null,QA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],OA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],qh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],$h=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Bp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],kp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],HA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ua=[],kn=[],Ya=[],pi=1,ql=2,pa=[],Ja=[];zn("UpsampleRgbLinePair",Ai,3),zn("UpsampleBgrLinePair",Il,3),zn("UpsampleRgbaLinePair",tu,4),zn("UpsampleBgraLinePair",Ul,4),zn("UpsampleArgbLinePair",eu,4),zn("UpsampleRgba4444LinePair",Fa,2),zn("UpsampleRgb565LinePair",zc,2);var Fp=_.UpsampleRgbLinePair,Ep=_.UpsampleBgrLinePair,No=_.UpsampleRgbaLinePair,$l=_.UpsampleBgraLinePair,ol=_.UpsampleArgbLinePair,ad=_.UpsampleRgba4444LinePair,qA=_.UpsampleRgb565LinePair,$i=16,Vn=1<<$i-1,kr=-227,Er=482,Co=6,ia=0,Xa=i(256),ll=i(256),Wl=i(256),Za=i(256),du=i(Er-kr),Wh=i(Er-kr);Ka("YuvToRgbRow",Ai,3),Ka("YuvToBgrRow",Il,3),Ka("YuvToRgbaRow",tu,4),Ka("YuvToBgraRow",Ul,4),Ka("YuvToArgbRow",eu,4),Ka("YuvToRgba4444Row",Fa,2),Ka("YuvToRgb565Row",zc,2);var $A=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],cl=[0,2,8],Kh=[8,7,6,4,4,2,2,2,1,1,1,1],Wi=1;this.WebPDecodeRGBA=function(y,N,W,ae,he){var be=jo,ve=new Et,we=new yt;ve.ba=we,we.S=be,we.width=[we.width],we.height=[we.height];var Ne=we.width,Be=we.height,De=new ft;if(De==null||y==null)var ze=2;else t(De!=null),ze=Zo(y,N,W,De.width,De.height,De.Pd,De.Qd,De.format,null);if(ze!=0?Ne=0:(Ne!=null&&(Ne[0]=De.width[0]),Be!=null&&(Be[0]=De.height[0]),Ne=1),Ne){we.width=we.width[0],we.height=we.height[0],ae!=null&&(ae[0]=we.width),he!=null&&(he[0]=we.height);e:{if(ae=new fa,(he=new Ht).data=y,he.w=N,he.ha=W,he.kd=1,N=[0],t(he!=null),((y=Zo(he.data,he.w,he.ha,null,null,null,N,null,he))==0||y==7)&&N[0]&&(y=4),(N=y)==0){if(t(ve!=null),ae.data=he.data,ae.w=he.w+he.offset,ae.ha=he.ha-he.offset,ae.put=Dt,ae.ac=Gr,ae.bc=ts,ae.ma=ve,he.xa){if((y=Wr())==null){ve=1;break e}if((function(ke,Oe){var Ke=[0],rt=[0],Ye=[0];t:for(;;){if(ke==null)return 0;if(Oe==null)return ke.a=2,0;if(ke.l=Oe,ke.a=0,ie(ke.m,Oe.data,Oe.w,Oe.ha),!Ps(ke.m,Ke,rt,Ye)){ke.a=3;break t}if(ke.xb=ql,Oe.width=Ke[0],Oe.height=rt[0],!fs(Ke[0],rt[0],1,ke,null))break t;return 1}return t(ke.a!=0),0})(y,ae)){if(ae=(N=bo(ae.width,ae.height,ve.Oa,ve.ba))==0){t:{ae=y;r:for(;;){if(ae==null){ae=0;break t}if(t(ae.s.yc!=null),t(ae.s.Ya!=null),t(0<ae.s.Wb),t((W=ae.l)!=null),t((he=W.ma)!=null),ae.xb!=0){if(ae.ca=he.ba,ae.tb=he.tb,t(ae.ca!=null),!Ea(he.Oa,W,Xc)){ae.a=2;break r}if(!mn(ae,W.width)||W.da)break r;if((W.da||jt(ae.ca.S))&&Xo(),11>ae.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ae.ca.f.kb.F!=null&&Xo()),ae.Pb&&0<ae.s.ua&&ae.s.vb.X==null&&!ce(ae.s.vb,ae.s.Wa.Xa)){ae.a=1;break r}ae.xb=0}if(!Ha(ae,ae.V,ae.Ba,ae.c,ae.i,W.o,ni))break r;he.Dc=ae.Ma,ae=1;break t}t(ae.a!=0),ae=0}ae=!ae}ae&&(N=y.a)}else N=y.a}else{if((y=new kA)==null){ve=1;break e}if(y.Fa=he.na,y.P=he.P,y.qc=he.Sa,$o(y,ae)){if((N=bo(ae.width,ae.height,ve.Oa,ve.ba))==0){if(y.Aa=0,W=ve.Oa,t((he=y)!=null),W!=null){if(0<(Ne=0>(Ne=W.Md)?0:100<Ne?255:255*Ne/100)){for(Be=De=0;4>Be;++Be)12>(ze=he.pb[Be]).lc&&(ze.ia=Ne*Kh[0>ze.lc?0:ze.lc]>>3),De|=ze.ia;De&&(alert("todo:VP8InitRandom"),he.ia=1)}he.Ga=W.Id,100<he.Ga?he.Ga=100:0>he.Ga&&(he.Ga=0)}(function(ke,Oe){if(ke==null)return 0;if(Oe==null)return Ns(ke,2,"NULL VP8Io parameter in VP8Decode().");if(!ke.cb&&!$o(ke,Oe))return 0;if(t(ke.cb),Oe.ac==null||Oe.ac(Oe)){Oe.ob&&(ke.L=0);var Ke=cl[ke.L];if(ke.L==2?(ke.yb=0,ke.zb=0):(ke.yb=Oe.v-Ke>>4,ke.zb=Oe.j-Ke>>4,0>ke.yb&&(ke.yb=0),0>ke.zb&&(ke.zb=0)),ke.Va=Oe.o+15+Ke>>4,ke.Hb=Oe.va+15+Ke>>4,ke.Hb>ke.za&&(ke.Hb=ke.za),ke.Va>ke.Ub&&(ke.Va=ke.Ub),0<ke.L){var rt=ke.ed;for(Ke=0;4>Ke;++Ke){var Ye;if(ke.Qa.Cb){var Ze=ke.Qa.Lb[Ke];ke.Qa.Fb||(Ze+=rt.Tb)}else Ze=rt.Tb;for(Ye=0;1>=Ye;++Ye){var tt=ke.gd[Ke][Ye],nt=Ze;if(rt.Pc&&(nt+=rt.vd[0],Ye&&(nt+=rt.od[0])),0<(nt=0>nt?0:63<nt?63:nt)){var it=nt;0<rt.wb&&(it=4<rt.wb?it>>2:it>>1)>9-rt.wb&&(it=9-rt.wb),1>it&&(it=1),tt.dd=it,tt.tc=2*nt+it,tt.ld=40<=nt?2:15<=nt?1:0}else tt.tc=0;tt.La=Ye}}}Ke=0}else Ns(ke,6,"Frame setup failed"),Ke=ke.a;if(Ke=Ke==0){if(Ke){ke.$c=0,0<ke.Aa||(ke.Ic=Wi);t:{Ke=ke.Ic,rt=4*(it=ke.za);var Mt=32*it,St=it+1,tr=0<ke.L?it*(0<ke.Aa?2:1):0,_t=(ke.Aa==2?2:1)*it;if((tt=rt+832+(Ye=3*(16*Ke+cl[ke.L])/2*Mt)+(Ze=ke.Fa!=null&&0<ke.Fa.length?ke.Kc.c*ke.Kc.i:0))!=tt)Ke=0;else{if(tt>ke.Vb){if(ke.Vb=0,ke.Ec=i(tt),ke.Fc=0,ke.Ec==null){Ke=Ns(ke,1,"no memory during frame initialization.");break t}ke.Vb=tt}tt=ke.Ec,nt=ke.Fc,ke.Ac=tt,ke.Bc=nt,nt+=rt,ke.Gd=o(Mt,hn),ke.Hd=0,ke.rb=o(St+1,ii),ke.sb=1,ke.wa=tr?o(tr,aa):null,ke.Y=0,ke.D.Nb=0,ke.D.wa=ke.wa,ke.D.Y=ke.Y,0<ke.Aa&&(ke.D.Y+=it),t(!0),ke.oc=tt,ke.pc=nt,nt+=832,ke.ya=o(_t,ho),ke.aa=0,ke.D.ya=ke.ya,ke.D.aa=ke.aa,ke.Aa==2&&(ke.D.aa+=it),ke.R=16*it,ke.B=8*it,it=(Mt=cl[ke.L])*ke.R,Mt=Mt/2*ke.B,ke.sa=tt,ke.ta=nt+it,ke.qa=ke.sa,ke.ra=ke.ta+16*Ke*ke.R+Mt,ke.Ha=ke.qa,ke.Ia=ke.ra+8*Ke*ke.B+Mt,ke.$c=0,nt+=Ye,ke.mb=Ze?tt:null,ke.nb=Ze?nt:null,t(nt+Ze<=ke.Fc+ke.Vb),qn(ke),n(ke.Ac,ke.Bc,0,rt),Ke=1}}if(Ke){if(Oe.ka=0,Oe.y=ke.sa,Oe.O=ke.ta,Oe.f=ke.qa,Oe.N=ke.ra,Oe.ea=ke.Ha,Oe.Vd=ke.Ia,Oe.fa=ke.R,Oe.Rc=ke.B,Oe.F=null,Oe.J=0,!RA){for(Ke=-255;255>=Ke;++Ke)LA[255+Ke]=0>Ke?-Ke:Ke;for(Ke=-1020;1020>=Ke;++Ke)TA[1020+Ke]=-128>Ke?-128:127<Ke?127:Ke;for(Ke=-112;112>=Ke;++Ke)DA[112+Ke]=-16>Ke?-16:15<Ke?15:Ke;for(Ke=-255;510>=Ke;++Ke)MA[255+Ke]=0>Ke?0:255<Ke?255:Ke;RA=1}ps=xr,xs=Oc,fi=zo,Gn=oi,Ml=Bl,Ls=zd,EA=R,_A=me,su=$e,Mh=at,Rh=Ee,tl=Ue,au=dt,Rl=kt,nu=Sn,PA=Di,Yc=fo,rl=Pl,kn[0]=FA,kn[1]=kl,kn[2]=Go,kn[3]=ci,kn[4]=Yd,kn[5]=Li,kn[6]=fn,kn[7]=Jd,kn[8]=Vo,kn[9]=El,Ua[0]=$n,Ua[1]=Gd,Ua[2]=Vd,Ua[3]=Fl,Ua[4]=li,Ua[5]=Wa,Ua[6]=Cn,Ya[0]=Kn,Ya[1]=Hc,Ya[2]=qc,Ya[3]=Wn,Ya[4]=$c,Ya[5]=_l,Ya[6]=Wc,Ke=1}else Ke=0}Ke&&(Ke=(function(dr,ls){for(dr.M=0;dr.M<dr.Va;++dr.M){var rr,Bt=dr.Jc[dr.M&dr.Xb],pt=dr.m,bs=dr;for(rr=0;rr<bs.za;++rr){var Vt=pt,lr=bs,qr=lr.Ac,Vs=lr.Bc+4*rr,Bs=lr.zc,ss=lr.ya[lr.aa+rr];if(lr.Qa.Bb?ss.$b=X(Vt,lr.Pa.jb[0])?2+X(Vt,lr.Pa.jb[2]):X(Vt,lr.Pa.jb[1]):ss.$b=0,lr.kc&&(ss.Ad=X(Vt,lr.Bd)),ss.Za=!X(Vt,145)+0,ss.Za){var Ts=ss.Ob,Ys=0;for(lr=0;4>lr;++lr){var Yr,mr=Bs[0+lr];for(Yr=0;4>Yr;++Yr){mr=Bp[qr[Vs+Yr]][mr];for(var vr=qh[X(Vt,mr[0])];0<vr;)vr=qh[2*vr+X(Vt,mr[vr])];mr=-vr,qr[Vs+Yr]=mr}a(Ts,Ys,qr,Vs,4),Ys+=4,Bs[0+lr]=mr}}else mr=X(Vt,156)?X(Vt,128)?1:3:X(Vt,163)?2:0,ss.Ob[0]=mr,n(qr,Vs,mr,4),n(Bs,0,mr,4);ss.Dd=X(Vt,142)?X(Vt,114)?X(Vt,183)?1:3:2:0}if(bs.m.Ka)return Ns(dr,7,"Premature end-of-partition0 encountered.");for(;dr.ja<dr.za;++dr.ja){if(bs=Bt,Vt=(pt=dr).rb[pt.sb-1],qr=pt.rb[pt.sb+pt.ja],rr=pt.ya[pt.aa+pt.ja],Vs=pt.kc?rr.Ad:0)Vt.la=qr.la=0,rr.Za||(Vt.Na=qr.Na=0),rr.Hc=0,rr.Gc=0,rr.ia=0;else{var Jr,wr;if(Vt=qr,qr=bs,Vs=pt.Pa.Xc,Bs=pt.ya[pt.aa+pt.ja],ss=pt.pb[Bs.$b],lr=Bs.ad,Ts=0,Ys=pt.rb[pt.sb-1],mr=Yr=0,n(lr,Ts,0,384),Bs.Za)var cs=0,ds=Vs[3];else{vr=i(16);var Lr=Vt.Na+Ys.Na;if(Lr=il(qr,Vs[1],Lr,ss.Eb,0,vr,0),Vt.Na=Ys.Na=(0<Lr)+0,1<Lr)ps(vr,0,lr,Ts);else{var xa=vr[0]+3>>3;for(vr=0;256>vr;vr+=16)lr[Ts+vr]=xa}cs=1,ds=Vs[0]}var _r=15&Vt.la,Tr=15&Ys.la;for(vr=0;4>vr;++vr){var ks=1&Tr;for(xa=wr=0;4>xa;++xa)_r=_r>>1|(ks=(Lr=il(qr,ds,Lr=ks+(1&_r),ss.Sc,cs,lr,Ts))>cs)<<7,wr=wr<<2|(3<Lr?3:1<Lr?2:lr[Ts+0]!=0),Ts+=16;_r>>=4,Tr=Tr>>1|ks<<7,Yr=(Yr<<8|wr)>>>0}for(ds=_r,cs=Tr>>4,Jr=0;4>Jr;Jr+=2){for(wr=0,_r=Vt.la>>4+Jr,Tr=Ys.la>>4+Jr,vr=0;2>vr;++vr){for(ks=1&Tr,xa=0;2>xa;++xa)Lr=ks+(1&_r),_r=_r>>1|(ks=0<(Lr=il(qr,Vs[2],Lr,ss.Qc,0,lr,Ts)))<<3,wr=wr<<2|(3<Lr?3:1<Lr?2:lr[Ts+0]!=0),Ts+=16;_r>>=2,Tr=Tr>>1|ks<<5}mr|=wr<<4*Jr,ds|=_r<<4<<Jr,cs|=(240&Tr)<<Jr}Vt.la=ds,Ys.la=cs,Bs.Hc=Yr,Bs.Gc=mr,Bs.ia=43690&mr?0:ss.ia,Vs=!(Yr|mr)}if(0<pt.L&&(pt.wa[pt.Y+pt.ja]=pt.gd[rr.$b][rr.Za],pt.wa[pt.Y+pt.ja].La|=!Vs),bs.Ka)return Ns(dr,7,"Premature end-of-file encountered.")}if(qn(dr),pt=ls,bs=1,rr=(Bt=dr).D,Vt=0<Bt.L&&Bt.M>=Bt.zb&&Bt.M<=Bt.Va,Bt.Aa==0)t:{if(rr.M=Bt.M,rr.uc=Vt,Oi(Bt,rr),bs=1,rr=(wr=Bt.D).Nb,Vt=(mr=cl[Bt.L])*Bt.R,qr=mr/2*Bt.B,vr=16*rr*Bt.R,xa=8*rr*Bt.B,Vs=Bt.sa,Bs=Bt.ta-Vt+vr,ss=Bt.qa,lr=Bt.ra-qr+xa,Ts=Bt.Ha,Ys=Bt.Ia-qr+xa,Tr=(_r=wr.M)==0,Yr=_r>=Bt.Va-1,Bt.Aa==2&&Oi(Bt,wr),wr.uc)for(ks=(Lr=Bt).D.M,t(Lr.D.uc),wr=Lr.yb;wr<Lr.Hb;++wr){cs=wr,ds=ks;var oa=(en=(ws=Lr).D).Nb;Jr=ws.R;var en=en.wa[en.Y+cs],ys=ws.sa,vs=ws.ta+16*oa*Jr+16*cs,ba=en.dd,Dr=en.tc;if(Dr!=0)if(t(3<=Dr),ws.L==1)0<cs&&PA(ys,vs,Jr,Dr+4),en.La&&rl(ys,vs,Jr,Dr),0<ds&&nu(ys,vs,Jr,Dr+4),en.La&&Yc(ys,vs,Jr,Dr);else{var ya=ws.B,Fn=ws.qa,Yn=ws.ra+8*oa*ya+8*cs,Js=ws.Ha,ws=ws.Ia+8*oa*ya+8*cs;oa=en.ld,0<cs&&(_A(ys,vs,Jr,Dr+4,ba,oa),Mh(Fn,Yn,Js,ws,ya,Dr+4,ba,oa)),en.La&&(tl(ys,vs,Jr,Dr,ba,oa),Rl(Fn,Yn,Js,ws,ya,Dr,ba,oa)),0<ds&&(EA(ys,vs,Jr,Dr+4,ba,oa),su(Fn,Yn,Js,ws,ya,Dr+4,ba,oa)),en.La&&(Rh(ys,vs,Jr,Dr,ba,oa),au(Fn,Yn,Js,ws,ya,Dr,ba,oa))}}if(Bt.ia&&alert("todo:DitherRow"),pt.put!=null){if(wr=16*_r,_r=16*(_r+1),Tr?(pt.y=Bt.sa,pt.O=Bt.ta+vr,pt.f=Bt.qa,pt.N=Bt.ra+xa,pt.ea=Bt.Ha,pt.W=Bt.Ia+xa):(wr-=mr,pt.y=Vs,pt.O=Bs,pt.f=ss,pt.N=lr,pt.ea=Ts,pt.W=Ys),Yr||(_r-=mr),_r>pt.o&&(_r=pt.o),pt.F=null,pt.J=null,Bt.Fa!=null&&0<Bt.Fa.length&&wr<_r&&(pt.J=na(Bt,pt,wr,_r-wr),pt.F=Bt.mb,pt.F==null&&pt.F.length==0)){bs=Ns(Bt,3,"Could not decode alpha data.");break t}wr<pt.j&&(mr=pt.j-wr,wr=pt.j,t(!(1&mr)),pt.O+=Bt.R*mr,pt.N+=Bt.B*(mr>>1),pt.W+=Bt.B*(mr>>1),pt.F!=null&&(pt.J+=pt.width*mr)),wr<_r&&(pt.O+=pt.v,pt.N+=pt.v>>1,pt.W+=pt.v>>1,pt.F!=null&&(pt.J+=pt.v),pt.ka=wr-pt.j,pt.U=pt.va-pt.v,pt.T=_r-wr,bs=pt.put(pt))}rr+1!=Bt.Ic||Yr||(a(Bt.sa,Bt.ta-Vt,Vs,Bs+16*Bt.R,Vt),a(Bt.qa,Bt.ra-qr,ss,lr+8*Bt.B,qr),a(Bt.Ha,Bt.Ia-qr,Ts,Ys+8*Bt.B,qr))}if(!bs)return Ns(dr,6,"Output aborted.")}return 1})(ke,Oe)),Oe.bc!=null&&Oe.bc(Oe),Ke&=1}return Ke?(ke.cb=0,Ke):0})(y,ae)||(N=y.a)}}else N=y.a}N==0&&ve.Oa!=null&&ve.Oa.fd&&(N=_a(ve.ba))}ve=N}be=ve!=0?null:11>be?we.f.RGBA.eb:we.f.kb.y}else be=null;return be};var nd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(_,$){for(var k="",L=0;L<4;L++)k+=String.fromCharCode(_[$++]);return k}function m(_,$){return _[$+0]|_[$+1]<<8}function h(_,$){return(_[$+0]|_[$+1]<<8|_[$+2]<<16)>>>0}function x(_,$){return(_[$+0]|_[$+1]<<8|_[$+2]<<16|_[$+3]<<24)>>>0}new d;var f=[0],b=[0],v=[],j=new d,S=s,C=(function(_,$){var k={},L=0,E=!1,O=0,le=0;if(k.frames=[],!(function(I,ee){for(var se=0;se<4;se++)if(I[ee+se]!="RIFF".charCodeAt(se))return!0;return!1})(_,$)){for(x(_,$+=4),$+=8;$<_.length;){var te=u(_,$),V=x(_,$+=4);$+=4;var M=V+(1&V);switch(te){case"VP8 ":case"VP8L":k.frames[L]===void 0&&(k.frames[L]={}),(H=k.frames[L]).src_off=E?le:$-8,H.src_size=O+V+8,L++,E&&(E=!1,O=0,le=0);break;case"VP8X":(H=k.header={}).feature_flags=_[$];var ie=$+4;H.canvas_width=1+h(_,ie),ie+=3,H.canvas_height=1+h(_,ie),ie+=3;break;case"ALPH":E=!0,O=M+8,le=$-8;break;case"ANIM":(H=k.header).bgcolor=x(_,$),ie=$+4,H.loop_count=m(_,ie),ie+=2;break;case"ANMF":var K,H;(H=k.frames[L]={}).offset_x=2*h(_,$),$+=3,H.offset_y=2*h(_,$),$+=3,H.width=1+h(_,$),$+=3,H.height=1+h(_,$),$+=3,H.duration=h(_,$),$+=3,K=_[$++],H.dispose=1&K,H.blend=K>>1&1}te!="ANMF"&&($+=M)}return k}})(S,0);C.response=S,C.rgbaoutput=!0,C.dataurl=!1;var B=C.header?C.header:null,F=C.frames?C.frames:null;if(B){B.loop_counter=B.loop_count,f=[B.canvas_height],b=[B.canvas_width];for(var Q=0;Q<F.length&&F[Q].blend!=0;Q++);}var q=F[0],P=j.WebPDecodeRGBA(S,q.src_off,q.src_size,b,f);q.rgba=P,q.imgwidth=b[0],q.imgheight=f[0];for(var D=0;D<b[0]*f[0]*4;D++)v[D]=P[D];return this.width=b,this.height=f,this.data=v,this}(function(s){var t,r,a,n,i,o,l,d,u,m=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new d,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};s.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,d=this.internal.Matrix,u=new m}]);var h=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ee=I;Object.defineProperty(this,"pdf",{get:function(){return ee}});var se=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return se},set:function(je){se=!!je}});var de=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return de},set:function(je){de=!!je}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(je){isNaN(je)||(re=je)}});var z=0;Object.defineProperty(this,"posY",{get:function(){return z},set:function(je){isNaN(je)||(z=je)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(je){var ce;typeof je=="number"?ce=[je,je,je,je]:((ce=new Array(4))[0]=je[0],ce[1]=je.length>=2?je[1]:ce[0],ce[2]=je.length>=3?je[2]:ce[0],ce[3]=je.length>=4?je[3]:ce[1]),u.margin=ce}});var ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ne},set:function(je){ne=je}});var Y=0;Object.defineProperty(this,"lastBreak",{get:function(){return Y},set:function(je){Y=je}});var X=[];Object.defineProperty(this,"pageBreaks",{get:function(){return X},set:function(je){X=je}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(je){je instanceof m&&(u=je)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(je){u.path=je}});var ye=[];Object.defineProperty(this,"ctxStack",{get:function(){return ye},set:function(je){ye=je}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(je){var ce;ce=x(je),this.ctx.fillStyle=ce.style,this.ctx.isFillTransparent=ce.a===0,this.ctx.fillOpacity=ce.a,this.pdf.setFillColor(ce.r,ce.g,ce.b,{a:ce.a}),this.pdf.setTextColor(ce.r,ce.g,ce.b,{a:ce.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(je){var ce=x(je);this.ctx.strokeStyle=ce.style,this.ctx.isStrokeTransparent=ce.a===0,this.ctx.strokeOpacity=ce.a,ce.a===0?this.pdf.setDrawColor(255,255,255):(ce.a,this.pdf.setDrawColor(ce.r,ce.g,ce.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(je){["butt","round","square"].indexOf(je)!==-1&&(this.ctx.lineCap=je,this.pdf.setLineCap(je))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(je){isNaN(je)||(this.ctx.lineWidth=je,this.pdf.setLineWidth(je))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(je){["bevel","round","miter"].indexOf(je)!==-1&&(this.ctx.lineJoin=je,this.pdf.setLineJoin(je))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(je){isNaN(je)||(this.ctx.miterLimit=je,this.pdf.setMiterLimit(je))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(je){this.ctx.textBaseline=je}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(je){["right","end","center","left","start"].indexOf(je)!==-1&&(this.ctx.textAlign=je)}});var pe=null,Ce=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ce},set:function(je){pe=null,Ce=je}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(je){var ce;if(this.ctx.font=je,(ce=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(je))!==null){var Te=ce[1];ce[2];var We=ce[3],Le=ce[4];ce[5];var U=ce[6],fe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Le)[2];Le=Math.floor(fe==="px"?parseFloat(Le)*this.pdf.internal.scaleFactor:fe==="em"?parseFloat(Le)*this.pdf.getFontSize():parseFloat(Le)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Le);var Se=(function(Qe){var Ie,et,ot=[],lt=Qe.trim();if(lt==="")return Z0;if(lt in N1)return[N1[lt]];for(;lt!=="";){switch(et=null,Ie=(lt=S1(lt)).charAt(0)){case'"':case"'":et=U8(lt.substring(1),Ie);break;default:et=L8(lt)}if(et===null||(ot.push(et[0]),(lt=S1(et[1]))!==""&&lt.charAt(0)!==","))return Z0;lt=lt.replace(/^,/,"")}return ot})(U);if(this.fontFaces){var Re=(function(Qe,Ie){if(pe===null){var et=(function(ot){var lt=[];return Object.keys(ot).forEach(function(vt){ot[vt].forEach(function(ct){var bt=null;switch(ct){case"bold":bt={family:vt,weight:"bold"};break;case"italic":bt={family:vt,style:"italic"};break;case"bolditalic":bt={family:vt,weight:"bold",style:"italic"};break;case"":case"normal":bt={family:vt}}bt!==null&&(bt.ref={name:vt,style:ct},lt.push(bt))})}),lt})(Qe.getFontList());pe=(function(ot){for(var lt={},vt=0;vt<ot.length;++vt){var ct=X0(ot[vt]),bt=ct.family,Ut=ct.stretch,jt=ct.style,qe=ct.weight;lt[bt]=lt[bt]||{},lt[bt][Ut]=lt[bt][Ut]||{},lt[bt][Ut][jt]=lt[bt][Ut][jt]||{},lt[bt][Ut][jt][qe]=ct}return lt})(et.concat(Ie))}return pe})(this.pdf,this.fontFaces),G=Se.map(function(Qe){return{family:Qe,stretch:"normal",weight:We,style:Te}}),ue=(function(Qe,Ie,et){for(var ot=(et=et||{}).defaultFontFamily||"times",lt=Object.assign({},I8,et.genericFontFamilies||{}),vt=null,ct=null,bt=0;bt<Ie.length;++bt)if(lt[(vt=X0(Ie[bt])).family]&&(vt.family=lt[vt.family]),Qe.hasOwnProperty(vt.family)){ct=Qe[vt.family];break}if(!(ct=ct||Qe[ot]))throw new Error("Could not find a font-family for the rule '"+C1(vt)+"' and default family '"+ot+"'.");if(ct=(function(Ut,jt){if(jt[Ut])return jt[Ut];var qe=yb[Ut],ht=qe<=yb.normal?-1:1,yt=j1(jt,s4,qe,ht);if(!yt)throw new Error("Could not find a matching font-stretch value for "+Ut);return yt})(vt.stretch,ct),ct=(function(Ut,jt){if(jt[Ut])return jt[Ut];for(var qe=r4[Ut],ht=0;ht<qe.length;++ht)if(jt[qe[ht]])return jt[qe[ht]];throw new Error("Could not find a matching font-style for "+Ut)})(vt.style,ct),!(ct=(function(Ut,jt){if(jt[Ut])return jt[Ut];if(Ut===400&&jt[500])return jt[500];if(Ut===500&&jt[400])return jt[400];var qe=P8[Ut],ht=j1(jt,a4,qe,Ut<400?-1:1);if(!ht)throw new Error("Could not find a matching font-weight for value "+Ut);return ht})(vt.weight,ct)))throw new Error("Failed to resolve a font for the rule '"+C1(vt)+"'.");return ct})(Re,G);this.pdf.setFont(ue.ref.name,ue.ref.style)}else{var ge="";(We==="bold"||parseInt(We,10)>=700||Te==="bold")&&(ge="bold"),Te==="italic"&&(ge+="italic"),ge.length===0&&(ge="normal");for(var oe="",J={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ae=0;Ae<Se.length;Ae++){if(this.pdf.internal.getFont(Se[Ae],ge,{noFallback:!0,disableWarning:!0})!==void 0){oe=Se[Ae];break}if(ge==="bolditalic"&&this.pdf.internal.getFont(Se[Ae],"bold",{noFallback:!0,disableWarning:!0})!==void 0)oe=Se[Ae],ge="bold";else if(this.pdf.internal.getFont(Se[Ae],"normal",{noFallback:!0,disableWarning:!0})!==void 0){oe=Se[Ae],ge="normal";break}}if(oe===""){for(var Fe=0;Fe<Se.length;Fe++)if(J[Se[Fe]]){oe=J[Se[Fe]];break}}oe=oe===""?"Times":oe,this.pdf.setFont(oe,ge)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(je){this.ctx.globalCompositeOperation=je}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(je){this.ctx.globalAlpha=je}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(je){this.ctx.lineDashOffset=je,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(je){this.ctx.lineDash=je,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(je){this.ctx.ignoreClearRect=!!je}})};h.prototype.setLineDash=function(I){this.lineDash=I},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){F.call(this,"fill",!1)},h.prototype.stroke=function(){F.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(I,ee){if(isNaN(I)||isNaN(ee))throw zr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var se=this.ctx.transform.applyToPoint(new o(I,ee));this.path.push({type:"mt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(I,ee)},h.prototype.closePath=function(){var I=new o(0,0),ee=0;for(ee=this.path.length-1;ee!==-1;ee--)if(this.path[ee].type==="begin"&&Rr(this.path[ee+1])==="object"&&typeof this.path[ee+1].x=="number"){I=new o(this.path[ee+1].x,this.path[ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},h.prototype.lineTo=function(I,ee){if(isNaN(I)||isNaN(ee))throw zr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var se=this.ctx.transform.applyToPoint(new o(I,ee));this.path.push({type:"lt",x:se.x,y:se.y}),this.ctx.lastPoint=new o(se.x,se.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),F.call(this,null,!0)},h.prototype.quadraticCurveTo=function(I,ee,se,de){if(isNaN(se)||isNaN(de)||isNaN(I)||isNaN(ee))throw zr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(se,de)),z=this.ctx.transform.applyToPoint(new o(I,ee));this.path.push({type:"qct",x1:z.x,y1:z.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},h.prototype.bezierCurveTo=function(I,ee,se,de,re,z){if(isNaN(re)||isNaN(z)||isNaN(I)||isNaN(ee)||isNaN(se)||isNaN(de))throw zr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ne=this.ctx.transform.applyToPoint(new o(re,z)),Y=this.ctx.transform.applyToPoint(new o(I,ee)),X=this.ctx.transform.applyToPoint(new o(se,de));this.path.push({type:"bct",x1:Y.x,y1:Y.y,x2:X.x,y2:X.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},h.prototype.arc=function(I,ee,se,de,re,z){if(isNaN(I)||isNaN(ee)||isNaN(se)||isNaN(de)||isNaN(re))throw zr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(z=!!z,!this.ctx.transform.isIdentity){var ne=this.ctx.transform.applyToPoint(new o(I,ee));I=ne.x,ee=ne.y;var Y=this.ctx.transform.applyToPoint(new o(0,se)),X=this.ctx.transform.applyToPoint(new o(0,0));se=Math.sqrt(Math.pow(Y.x-X.x,2)+Math.pow(Y.y-X.y,2))}Math.abs(re-de)>=2*Math.PI&&(de=0,re=2*Math.PI),this.path.push({type:"arc",x:I,y:ee,radius:se,startAngle:de,endAngle:re,counterclockwise:z})},h.prototype.arcTo=function(I,ee,se,de,re){throw new Error("arcTo not implemented.")},h.prototype.rect=function(I,ee,se,de){if(isNaN(I)||isNaN(ee)||isNaN(se)||isNaN(de))throw zr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,ee),this.lineTo(I+se,ee),this.lineTo(I+se,ee+de),this.lineTo(I,ee+de),this.lineTo(I,ee),this.lineTo(I+se,ee),this.lineTo(I,ee)},h.prototype.fillRect=function(I,ee,se,de){if(isNaN(I)||isNaN(ee)||isNaN(se)||isNaN(de))throw zr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,ee,se,de),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},h.prototype.strokeRect=function(I,ee,se,de){if(isNaN(I)||isNaN(ee)||isNaN(se)||isNaN(de))throw zr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(I,ee,se,de),this.stroke())},h.prototype.clearRect=function(I,ee,se,de){if(isNaN(I)||isNaN(ee)||isNaN(se)||isNaN(de))throw zr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,ee,se,de))},h.prototype.save=function(I){I=typeof I!="boolean"||I;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("q");if(this.pdf.setPage(ee),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var de=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=de}},h.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var ee=this.pdf.internal.getCurrentPageInfo().pageNumber,se=0;se<this.pdf.internal.getNumberOfPages();se++)this.pdf.setPage(se+1),this.pdf.internal.out("Q");this.pdf.setPage(ee),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(I){var ee,se,de,re;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))ee=0,se=0,de=0,re=0;else{var z=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(z!==null)ee=parseInt(z[1]),se=parseInt(z[2]),de=parseInt(z[3]),re=1;else if((z=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)ee=parseInt(z[1]),se=parseInt(z[2]),de=parseInt(z[3]),re=parseFloat(z[4]);else{if(re=1,typeof I=="string"&&I.charAt(0)!=="#"){var ne=new VS(I);I=ne.ok?ne.toHex():"#000000"}I.length===4?(ee=I.substring(1,2),ee+=ee,se=I.substring(2,3),se+=se,de=I.substring(3,4),de+=de):(ee=I.substring(1,3),se=I.substring(3,5),de=I.substring(5,7)),ee=parseInt(ee,16),se=parseInt(se,16),de=parseInt(de,16)}}return{r:ee,g:se,b:de,a:re,style:I}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(I,ee,se,de){if(isNaN(ee)||isNaN(se)||typeof I!="string")throw zr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(de=isNaN(de)?void 0:de,!f.call(this)){var re=M(this.ctx.transform.rotation),z=this.ctx.transform.scaleX;L.call(this,{text:I,x:ee,y:se,scale:z,angle:re,align:this.textAlign,maxWidth:de})}},h.prototype.strokeText=function(I,ee,se,de){if(isNaN(ee)||isNaN(se)||typeof I!="string")throw zr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){de=isNaN(de)?void 0:de;var re=M(this.ctx.transform.rotation),z=this.ctx.transform.scaleX;L.call(this,{text:I,x:ee,y:se,scale:z,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:de})}},h.prototype.measureText=function(I){if(typeof I!="string")throw zr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ee=this.pdf,se=this.pdf.internal.scaleFactor,de=ee.internal.getFontSize(),re=ee.getStringUnitWidth(I)*de/ee.internal.scaleFactor;return new function(z){var ne=(z=z||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ne}}),this}({width:re*=Math.round(96*se/72*1e4)/1e4})},h.prototype.scale=function(I,ee){if(isNaN(I)||isNaN(ee))throw zr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var se=new d(I,0,0,ee,0,0);this.ctx.transform=this.ctx.transform.multiply(se)},h.prototype.rotate=function(I){if(isNaN(I))throw zr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ee=new d(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(ee)},h.prototype.translate=function(I,ee){if(isNaN(I)||isNaN(ee))throw zr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var se=new d(1,0,0,1,I,ee);this.ctx.transform=this.ctx.transform.multiply(se)},h.prototype.transform=function(I,ee,se,de,re,z){if(isNaN(I)||isNaN(ee)||isNaN(se)||isNaN(de)||isNaN(re)||isNaN(z))throw zr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ne=new d(I,ee,se,de,re,z);this.ctx.transform=this.ctx.transform.multiply(ne)},h.prototype.setTransform=function(I,ee,se,de,re,z){I=isNaN(I)?1:I,ee=isNaN(ee)?0:ee,se=isNaN(se)?0:se,de=isNaN(de)?1:de,re=isNaN(re)?0:re,z=isNaN(z)?0:z,this.ctx.transform=new d(I,ee,se,de,re,z)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(I,ee,se,de,re,z,ne,Y,X){var ye=this.pdf.getImageProperties(I),pe=1,Ce=1,je=1,ce=1;de!==void 0&&Y!==void 0&&(je=Y/de,ce=X/re,pe=ye.width/de*Y/de,Ce=ye.height/re*X/re),z===void 0&&(z=ee,ne=se,ee=0,se=0),de!==void 0&&Y===void 0&&(Y=de,X=re),de===void 0&&Y===void 0&&(Y=ye.width,X=ye.height);for(var Te,We=this.ctx.transform.decompose(),Le=M(We.rotate.shx),U=new d,fe=(U=(U=(U=U.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new l(z-ee*je,ne-se*ce,de*pe,re*Ce)),Se=j.call(this,fe),Re=[],G=0;G<Se.length;G+=1)Re.indexOf(Se[G])===-1&&Re.push(Se[G]);if(B(Re),this.autoPaging)for(var ue=Re[0],ge=Re[Re.length-1],oe=ue;oe<ge+1;oe++){this.pdf.setPage(oe);var J=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ae=oe===1?this.posY+this.margin[0]:this.margin[0],Fe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ie=oe===1?0:Fe+(oe-2)*Qe;if(this.ctx.clip_path.length!==0){var et=this.path;Te=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(Te,this.posX+this.margin[3],-Ie+Ae+this.ctx.prevPageLastElemOffset),Q.call(this,"fill",!0),this.path=et}var ot=JSON.parse(JSON.stringify(fe));ot=C([ot],this.posX+this.margin[3],-Ie+Ae+this.ctx.prevPageLastElemOffset)[0];var lt=(oe>ue||oe<ge)&&v.call(this);lt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],J,Qe,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",ot.x,ot.y,ot.w,ot.h,null,null,Le),lt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",fe.x,fe.y,fe.w,fe.h,null,null,Le)};var j=function(I,ee,se){var de=[];ee=ee||this.pdf.internal.pageSize.width,se=se||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":de.push(Math.floor((I.y+re)/se)+1);break;case"arc":de.push(Math.floor((I.y+re-I.radius)/se)+1),de.push(Math.floor((I.y+re+I.radius)/se)+1);break;case"qct":var z=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);de.push(Math.floor((z.y+re)/se)+1),de.push(Math.floor((z.y+z.h+re)/se)+1);break;case"bct":var ne=K(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);de.push(Math.floor((ne.y+re)/se)+1),de.push(Math.floor((ne.y+ne.h+re)/se)+1);break;case"rect":de.push(Math.floor((I.y+re)/se)+1),de.push(Math.floor((I.y+I.h+re)/se)+1)}for(var Y=0;Y<de.length;Y+=1)for(;this.pdf.internal.getNumberOfPages()<de[Y];)S.call(this);return de},S=function(){var I=this.fillStyle,ee=this.strokeStyle,se=this.font,de=this.lineCap,re=this.lineWidth,z=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=ee,this.font=se,this.lineCap=de,this.lineWidth=re,this.lineJoin=z},C=function(I,ee,se){for(var de=0;de<I.length;de++)switch(I[de].type){case"bct":I[de].x2+=ee,I[de].y2+=se;case"qct":I[de].x1+=ee,I[de].y1+=se;default:I[de].x+=ee,I[de].y+=se}return I},B=function(I){return I.sort(function(ee,se){return ee-se})},F=function(I,ee){for(var se,de,re=this.fillStyle,z=this.strokeStyle,ne=this.lineCap,Y=this.lineWidth,X=Math.abs(Y*this.ctx.transform.scaleX),ye=this.lineJoin,pe=JSON.parse(JSON.stringify(this.path)),Ce=JSON.parse(JSON.stringify(this.path)),je=[],ce=0;ce<Ce.length;ce++)if(Ce[ce].x!==void 0)for(var Te=j.call(this,Ce[ce]),We=0;We<Te.length;We+=1)je.indexOf(Te[We])===-1&&je.push(Te[We]);for(var Le=0;Le<je.length;Le++)for(;this.pdf.internal.getNumberOfPages()<je[Le];)S.call(this);if(B(je),this.autoPaging)for(var U=je[0],fe=je[je.length-1],Se=U;Se<fe+1;Se++){this.pdf.setPage(Se),this.fillStyle=re,this.strokeStyle=z,this.lineCap=ne,this.lineWidth=X,this.lineJoin=ye;var Re=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],G=Se===1?this.posY+this.margin[0]:this.margin[0],ue=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],oe=Se===1?0:ue+(Se-2)*ge;if(this.ctx.clip_path.length!==0){var J=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(se,this.posX+this.margin[3],-oe+G+this.ctx.prevPageLastElemOffset),Q.call(this,I,!0),this.path=J}if(de=JSON.parse(JSON.stringify(pe)),this.path=C(de,this.posX+this.margin[3],-oe+G+this.ctx.prevPageLastElemOffset),ee===!1||Se===0){var Ae=(Se>U||Se<fe)&&v.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Re,ge,null).clip().discardPath()),Q.call(this,I,ee),Ae&&this.pdf.restoreGraphicsState()}this.lineWidth=Y}else this.lineWidth=X,Q.call(this,I,ee),this.lineWidth=Y;this.path=pe},Q=function(I,ee){if((I!=="stroke"||ee||!b.call(this))&&(I==="stroke"||ee||!f.call(this))){for(var se,de,re=[],z=this.path,ne=0;ne<z.length;ne++){var Y=z[ne];switch(Y.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:Y,deltas:[],abs:[]});break;case"lt":var X=re.length;if(z[ne-1]&&!isNaN(z[ne-1].x)&&(se=[Y.x-z[ne-1].x,Y.y-z[ne-1].y],X>0)){for(;X>=0;X--)if(re[X-1].close!==!0&&re[X-1].begin!==!0){re[X-1].deltas.push(se),re[X-1].abs.push(Y);break}}break;case"bct":se=[Y.x1-z[ne-1].x,Y.y1-z[ne-1].y,Y.x2-z[ne-1].x,Y.y2-z[ne-1].y,Y.x-z[ne-1].x,Y.y-z[ne-1].y],re[re.length-1].deltas.push(se);break;case"qct":var ye=z[ne-1].x+2/3*(Y.x1-z[ne-1].x),pe=z[ne-1].y+2/3*(Y.y1-z[ne-1].y),Ce=Y.x+2/3*(Y.x1-Y.x),je=Y.y+2/3*(Y.y1-Y.y),ce=Y.x,Te=Y.y;se=[ye-z[ne-1].x,pe-z[ne-1].y,Ce-z[ne-1].x,je-z[ne-1].y,ce-z[ne-1].x,Te-z[ne-1].y],re[re.length-1].deltas.push(se);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(Y)}}de=ee?null:I==="stroke"?"stroke":"fill";for(var We=!1,Le=0;Le<re.length;Le++)if(re[Le].arc)for(var U=re[Le].abs,fe=0;fe<U.length;fe++){var Se=U[fe];Se.type==="arc"?D.call(this,Se.x,Se.y,Se.radius,Se.startAngle,Se.endAngle,Se.counterclockwise,void 0,ee,!We):E.call(this,Se.x,Se.y),We=!0}else if(re[Le].close===!0)this.pdf.internal.out("h"),We=!1;else if(re[Le].begin!==!0){var Re=re[Le].start.x,G=re[Le].start.y;O.call(this,re[Le].deltas,Re,G),We=!0}de&&_.call(this,de),ee&&$.call(this)}},q=function(I){var ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,se=ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-se;case"top":return I+ee-se;case"hanging":return I+ee-2*se;case"middle":return I+ee/2-se;default:return I}},P=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(ee,se){this.colorStops.push([ee,se])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var D=function(I,ee,se,de,re,z,ne,Y,X){for(var ye=te.call(this,se,de,re,z),pe=0;pe<ye.length;pe++){var Ce=ye[pe];pe===0&&(X?k.call(this,Ce.x1+I,Ce.y1+ee):E.call(this,Ce.x1+I,Ce.y1+ee)),le.call(this,I,ee,Ce.x2,Ce.y2,Ce.x3,Ce.y3,Ce.x4,Ce.y4)}Y?$.call(this):_.call(this,ne)},_=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},$=function(){this.pdf.clip(),this.pdf.discardPath()},k=function(I,ee){this.pdf.internal.out(r(I)+" "+a(ee)+" m")},L=function(I){var ee;switch(I.align){case"right":case"end":ee="right";break;case"center":ee="center";break;default:ee="left"}var se=this.pdf.getTextDimensions(I.text),de=q.call(this,I.y),re=P.call(this,de)-se.h,z=this.ctx.transform.applyToPoint(new o(I.x,de)),ne=this.ctx.transform.decompose(),Y=new d;Y=(Y=(Y=Y.multiply(ne.translate)).multiply(ne.skew)).multiply(ne.scale);for(var X,ye,pe,Ce=this.ctx.transform.applyToRectangle(new l(I.x,de,se.w,se.h)),je=Y.applyToRectangle(new l(I.x,re,se.w,se.h)),ce=j.call(this,je),Te=[],We=0;We<ce.length;We+=1)Te.indexOf(ce[We])===-1&&Te.push(ce[We]);if(B(Te),this.autoPaging)for(var Le=Te[0],U=Te[Te.length-1],fe=Le;fe<U+1;fe++){this.pdf.setPage(fe);var Se=fe===1?this.posY+this.margin[0]:this.margin[0],Re=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],G=this.pdf.internal.pageSize.height-this.margin[2],ue=G-this.margin[0],ge=this.pdf.internal.pageSize.width-this.margin[1],oe=ge-this.margin[3],J=fe===1?0:Re+(fe-2)*ue;if(this.ctx.clip_path.length!==0){var Ae=this.path;X=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(X,this.posX+this.margin[3],-1*J+Se),Q.call(this,"fill",!0),this.path=Ae}var Fe=C([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-J+Se+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*I.scale),pe=this.lineWidth,this.lineWidth=pe*I.scale);var Qe=this.autoPaging!=="text";if(Qe||Fe.y+Fe.h<=G){if(Qe||Fe.y>=Se&&Fe.x<=ge){var Ie=Qe?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||ge-Fe.x)[0],et=C([JSON.parse(JSON.stringify(Ce))],this.posX+this.margin[3],-J+Se+this.ctx.prevPageLastElemOffset)[0],ot=Qe&&(fe>Le||fe<U)&&v.call(this);ot&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],oe,ue,null).clip().discardPath()),this.pdf.text(Ie,et.x,et.y,{angle:I.angle,align:ee,renderingMode:I.renderingMode}),ot&&this.pdf.restoreGraphicsState()}}else Fe.y<G&&(this.ctx.prevPageLastElemOffset+=G-Fe.y);I.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=pe)}else I.scale>=.01&&(ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ye*I.scale),pe=this.lineWidth,this.lineWidth=pe*I.scale),this.pdf.text(I.text,z.x+this.posX,z.y+this.posY,{angle:I.angle,align:ee,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(ye),this.lineWidth=pe)},E=function(I,ee,se,de){se=se||0,de=de||0,this.pdf.internal.out(r(I+se)+" "+a(ee+de)+" l")},O=function(I,ee,se){return this.pdf.lines(I,ee,se,null,null)},le=function(I,ee,se,de,re,z,ne,Y){this.pdf.internal.out([t(n(se+I)),t(i(de+ee)),t(n(re+I)),t(i(z+ee)),t(n(ne+I)),t(i(Y+ee)),"c"].join(" "))},te=function(I,ee,se,de){for(var re=2*Math.PI,z=Math.PI/2;ee>se;)ee-=re;var ne=Math.abs(se-ee);ne<re&&de&&(ne=re-ne);for(var Y=[],X=de?-1:1,ye=ee;ne>1e-5;){var pe=ye+X*Math.min(ne,z);Y.push(V.call(this,I,ye,pe)),ne-=Math.abs(pe-ye),ye=pe}return Y},V=function(I,ee,se){var de=(se-ee)/2,re=I*Math.cos(de),z=I*Math.sin(de),ne=re,Y=-z,X=ne*ne+Y*Y,ye=X+ne*re+Y*z,pe=4/3*(Math.sqrt(2*X*ye)-ye)/(ne*z-Y*re),Ce=ne-pe*Y,je=Y+pe*ne,ce=Ce,Te=-je,We=de+ee,Le=Math.cos(We),U=Math.sin(We);return{x1:I*Math.cos(ee),y1:I*Math.sin(ee),x2:Ce*Le-je*U,y2:Ce*U+je*Le,x3:ce*Le-Te*U,y3:ce*U+Te*Le,x4:I*Math.cos(se),y4:I*Math.sin(se)}},M=function(I){return 180*I/Math.PI},ie=function(I,ee,se,de,re,z){var ne=I+.5*(se-I),Y=ee+.5*(de-ee),X=re+.5*(se-re),ye=z+.5*(de-z),pe=Math.min(I,re,ne,X),Ce=Math.max(I,re,ne,X),je=Math.min(ee,z,Y,ye),ce=Math.max(ee,z,Y,ye);return new l(pe,je,Ce-pe,ce-je)},K=function(I,ee,se,de,re,z,ne,Y){var X,ye,pe,Ce,je,ce,Te,We,Le,U,fe,Se,Re,G,ue=se-I,ge=de-ee,oe=re-se,J=z-de,Ae=ne-re,Fe=Y-z;for(ye=0;ye<41;ye++)Le=(Te=(pe=I+(X=ye/40)*ue)+X*((je=se+X*oe)-pe))+X*(je+X*(re+X*Ae-je)-Te),U=(We=(Ce=ee+X*ge)+X*((ce=de+X*J)-Ce))+X*(ce+X*(z+X*Fe-ce)-We),ye==0?(fe=Le,Se=U,Re=Le,G=U):(fe=Math.min(fe,Le),Se=Math.min(Se,U),Re=Math.max(Re,Le),G=Math.max(G,U));return new l(Math.round(fe),Math.round(Se),Math.round(Re-fe),Math.round(G-Se))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,ee,se=(I=this.ctx.lineDash,ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:ee}));this.prevLineDash!==se&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=se)}}})(Lt.API),(function(s){var t=function(o){var l,d,u,m,h,x,f,b,v,j;for(d=[],u=0,m=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;m>u;u+=4)(h=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(x=(h=((h=((h=((h=(h-(j=h%85))/85)-(v=h%85))/85)-(b=h%85))/85)-(f=h%85))/85)%85,d.push(x+33,f+33,b+33,v+33,j+33)):d.push(122);return(function(S,C){for(var B=C;B>0;B--)S.pop()})(d,l.length),String.fromCharCode.apply(String,d)+"~>"},r=function(o){var l,d,u,m,h,x=String,f="length",b=255,v="charCodeAt",j="slice",S="replace";for(o[j](-2),o=o[j](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),u=[],m=0,h=(o+=l="uuuuu"[j](o[f]%5||5))[f];h>m;m+=5)d=52200625*(o[v](m)-33)+614125*(o[v](m+1)-33)+7225*(o[v](m+2)-33)+85*(o[v](m+3)-33)+(o[v](m+4)-33),u.push(b&d>>24,b&d>>16,b&d>>8,b&d);return(function(C,B){for(var F=B;F>0;F--)C.pop()})(u,l[f]),x.fromCharCode.apply(x,u)},a=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},n=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var d="",u=0;u<o.length;u+=2)d+=String.fromCharCode("0x"+(o[u]+o[u+1]));return d},i=function(o){for(var l=new Uint8Array(o.length),d=o.length;d--;)l[d]=o.charCodeAt(d);return(l=mb(l)).reduce(function(u,m){return u+String.fromCharCode(m)},"")};s.processDataByFilters=function(o,l){var d=0,u=o||"",m=[];for(typeof(l=l||[])=="string"&&(l=[l]),d=0;d<l.length;d+=1)switch(l[d]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=t(u),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=n(u),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=a(u),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[d]+'" is not implemented')}return{data:u,reverseChain:m.reverse().join(" ")}}})(Lt.API),(function(s){s.loadFile=function(t,r,a){return(function(n,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(d,u,m){var h=new XMLHttpRequest,x=0,f=function(b){var v=b.length,j=[],S=String.fromCharCode;for(x=0;x<v;x+=1)j.push(S(255&b.charCodeAt(x)));return j.join("")};if(h.open("GET",d,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?m(f(this.responseText)):m(void 0)}),h.send(null),u&&h.status===200)return f(h.responseText)})(n,i,o)}catch{}return l})(t,r,a)},s.loadImageFile=s.loadFile})(Lt.API),(function(s){function t(){return(Jt.html2canvas?Promise.resolve(Jt.html2canvas):Fi(()=>Promise.resolve().then(()=>SQ),void 0)).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(Jt.DOMPurify?Promise.resolve(Jt.DOMPurify):Fi(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var a=function(l){var d=Rr(l);return d==="undefined"?"undefined":d==="string"||l instanceof String?"string":d==="number"||l instanceof Number?"number":d==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":d==="object"?"object":"unknown"},n=function(l,d){var u=document.createElement(l);for(var m in d.className&&(u.className=d.className),d.innerHTML&&d.dompurify&&(u.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)u.style[m]=d.style[m];return u},i=function l(d,u){for(var m=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),h=d.firstChild;h;h=h.nextSibling)u!==!0&&h.nodeType===1&&h.nodeName==="SCRIPT"||m.appendChild(l(h,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(m.width=d.width,m.height=d.height,m.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(m.value=d.value),m.addEventListener("load",function(){m.scrollTop=d.scrollTop,m.scrollLeft=d.scrollLeft},!0)),m},o=function l(d){var u=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),m=l.convert(Promise.resolve(),u);return(m=m.setProgress(1,l,1,[l])).set(d)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,d){return l.__proto__=d||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,d){return this.then(function(){switch(d=d||(function(u){switch(a(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),d){case"string":return this.then(r).then(function(u){return this.set({src:n("div",{innerHTML:l,dompurify:u})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=n("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=n("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(n("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,d(this.prop.container,u)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var u=this.opt.jsPDF,m=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,x=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete x.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=m,m)for(var f=0;f<m.length;++f){var b=m[f],v=b.src.find(function(j){return j.format==="truetype"});v&&u.addFont(v.url,b.ref.name,b.ref.style)}return x.windowHeight=x.windowHeight||0,x.windowHeight=x.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):x.windowHeight,u.context2d.save(!0),d(this.prop.container,x)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,d,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(l,d):this.outputPdf(l,d)},o.prototype.outputPdf=function(l,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,d)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(a(l)!=="object")return this;var d=Object.keys(l||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=l[u]};switch(u){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[u]=l[u]}}},this);return this.then(function(){return this.thenList(d)})},o.prototype.get=function(l,d){return this.then(function(){var u=l in o.template.prop?this.prop[l]:this.opt[l];return d?d(u):u})},o.prototype.setMargin=function(l){return this.then(function(){switch(a(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function d(u,m){return Math.floor(u*m/72*96)}return this.then(function(){(l=l||Lt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:d(l.inner.width,l.k),height:d(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,d,u,m){return l!=null&&(this.progress.val=l),d!=null&&(this.progress.state=d),u!=null&&(this.progress.n=u),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,d,u,m){return this.setProgress(l?this.progress.val+l:null,d||null,u?this.progress.n+u:null,m?this.progress.stack.concat(m):null)},o.prototype.then=function(l,d){var u=this;return this.thenCore(l,d,function(m,h){return u.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(x){return u.updateProgress(null,m),x}).then(m,h).then(function(x){return u.updateProgress(1),x})})},o.prototype.thenCore=function(l,d,u){u=u||Promise.prototype.then;var m=this;l&&(l=l.bind(m)),d&&(d=d.bind(m));var h=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:o.convert(Object.assign({},m),Promise.prototype),x=u.call(h,l,d);return o.convert(x,m.__proto__)},o.prototype.thenExternal=function(l,d){return Promise.prototype.then.call(this,l,d)},o.prototype.thenList=function(l){var d=this;return l.forEach(function(u){d=d.thenCore(u)}),d},o.prototype.catch=function(l){l&&(l=l.bind(this));var d=Promise.prototype.catch.call(this,l);return o.convert(d,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Lt.getPageSize=function(l,d,u){if(Rr(l)==="object"){var m=l;l=m.orientation,d=m.unit||d,u=m.format||u}d=d||"mm",u=u||"a4",l=(""+(l||"P")).toLowerCase();var h,x=(""+u).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+d}var b,v=0,j=0;if(f.hasOwnProperty(x))v=f[x][1]/h,j=f[x][0]/h;else try{v=u[1],j=u[0]}catch{throw new Error("Invalid format: "+u)}if(l==="p"||l==="portrait")l="p",j>v&&(b=j,j=v,v=b);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",v>j&&(b=j,j=v,v=b)}return{width:j,height:v,unit:d,k:h,orientation:l}},s.html=function(l,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(X0):null;var u=new o(d);return d.worker?u:u.from(l).doCallback()}})(Lt.API),Lt.API.addJS=function(s){return k1=s,this.internal.events.subscribe("postPutResources",function(){Gf=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Gf+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),B1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+k1+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Gf!==void 0&&B1!==void 0&&this.internal.out("/Names <</JavaScript "+Gf+" 0 R>>")}),this},(function(s){var t;s.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var n=r.outline.render().split(/\r\n/),i=0;i<n.length;i++){var o=n[i],l=a.exec(o);if(l!=null){var d=l[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,m=[];for(i=0;i<u;i++){var h=r.internal.newObject();m.push(h);var x=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var f=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<m.length;i++)r.internal.write("(page_"+(i+1)+")"+m[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+f+" 0 R"),r.internal.write(">>","endobj")}}]),s.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),s.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,n,i){var o={title:n,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var n=0;n<a.children.length;n++)this.genIds_r(a.children[n])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var d=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var u=0;u<a.children.length;u++)this.renderItems(a.children[u])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,n){for(var i=0;i<n.children.length;i++)a.count++,this.count_r(a,n.children[i]);return a.count}}])})(Lt.API),(function(s){var t=[192,193,194,195,196,197,198,199];s.processJPEG=function(r,a,n,i,o,l){var d,u=this.decode.DCT_DECODE,m=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=(function(h){for(var x,f=256*h.charCodeAt(4)+h.charCodeAt(5),b=h.length,v={width:0,height:0,numcomponents:1},j=4;j<b;j+=2){if(j+=f,t.indexOf(h.charCodeAt(j+1))!==-1){x=256*h.charCodeAt(j+5)+h.charCodeAt(j+6),v={width:256*h.charCodeAt(j+7)+h.charCodeAt(j+8),height:x,numcomponents:h.charCodeAt(j+9)};break}f=256*h.charCodeAt(j+2)+h.charCodeAt(j+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}m={data:r,width:d.width,height:d.height,colorSpace:l,bitsPerComponent:8,filter:u,index:a,alias:n}}return m}})(Lt.API),Lt.API.processPNG=function(s,t,r,a){if(this.__addimage__.isArrayBuffer(s)&&(s=new Uint8Array(s)),this.__addimage__.isArrayBufferView(s)){var n,i=x8(s,{checkCrc:!0}),o=i.width,l=i.height,d=i.channels,u=i.palette,m=i.depth;n=u&&d===1?(function(P){for(var D=P.width,_=P.height,$=P.data,k=P.palette,L=P.depth,E=!1,O=[],le=[],te=void 0,V=!1,M=0,ie=0;ie<k.length;ie++){var K=P2(k[ie],4),H=K[0],I=K[1],ee=K[2],se=K[3];O.push(H,I,ee),se!=null&&(se===0?(M++,le.length<1&&le.push(ie)):se<255&&(V=!0))}if(V||M>1){E=!0,le=void 0;var de=D*_;te=new Uint8Array(de);for(var re=new DataView($.buffer),z=0;z<de;z++){var ne=ex(re,z,L),Y=P2(k[ne],4)[3];te[z]=Y}}return{colorSpace:"Indexed",colorsPerPixel:1,colorBytes:$,alphaBytes:te,needSMask:E,palette:O,mask:le}})(i):d===2||d===4?(function(P){for(var D=P.data,_=P.width,$=P.height,k=P.channels,L=P.depth,E=k===2?"DeviceGray":"DeviceRGB",O=k-1,le=_*$,te=O,V=le*te,M=1*le,ie=Math.ceil(V*L/8),K=Math.ceil(M*L/8),H=new Uint8Array(ie),I=new Uint8Array(K),ee=new DataView(D.buffer),se=new DataView(H.buffer),de=new DataView(I.buffer),re=!1,z=0;z<le;z++){for(var ne=z*k,Y=0;Y<te;Y++)D1(se,ex(ee,ne+Y,L),z*te+Y,L);var X=ex(ee,ne+te,L);X<(1<<L)-1&&(re=!0),D1(de,X,1*z,L)}return{colorSpace:E,colorsPerPixel:O,colorBytes:H,alphaBytes:I,needSMask:re}})(i):(function(P){var D=P.data,_=P.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:_,colorsPerPixel:_==="DeviceGray"?1:3,colorBytes:D instanceof Uint8Array?D:new Uint8Array(D.buffer),needSMask:!1}})(i);var h,x,f,b=n,v=b.colorSpace,j=b.colorsPerPixel,S=b.colorBytes,C=b.alphaBytes,B=b.needSMask,F=b.palette,Q=b.mask,q=null;return a!==Lt.API.image_compression.NONE&&typeof mb=="function"?(q=(function(P){var D;switch(P){case Lt.API.image_compression.FAST:D=11;break;case Lt.API.image_compression.MEDIUM:D=13;break;case Lt.API.image_compression.SLOW:D=14;break;default:D=12}return D})(a),h=this.decode.FLATE_DECODE,x="/Predictor ".concat(q," "),s=P1(S,o*j,j,a),B&&(f=P1(C,o,1,a))):(h=void 0,x="",s=S,B&&(f=C)),x+="/Colors ".concat(j," /BitsPerComponent ").concat(m," /Columns ").concat(o),(this.__addimage__.isArrayBuffer(s)||this.__addimage__.isArrayBufferView(s))&&(s=this.__addimage__.arrayBufferToBinaryString(s)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:r,data:s,index:t,filter:h,decodeParameters:x,transparency:Q,palette:F,sMask:f,predictor:q,width:o,height:l,bitsPerComponent:m,colorSpace:v}}},(function(s){s.processGIF89A=function(t,r,a,n){var i=new R8(t),o=i.width,l=i.height,d=[];i.decodeAndBlitFrameRGBA(0,d);var u={data:d,width:o,height:l},m=new tx(100).encode(u,100);return s.processJPEG.call(this,m,r,a,n)},s.processGIF87A=s.processGIF89A})(Lt.API),Zi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var s=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(s);for(var t=0;t<s;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Zi.prototype.parseBGR=function(){this.pos=this.offset;try{var s="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[s]()}catch(r){zr.log("bit decode error:"+r)}},Zi.prototype.bit1=function(){var s,t=Math.ceil(this.width/8),r=t%4;for(s=this.height-1;s>=0;s--){for(var a=this.bottom_up?s:this.height-1-s,n=0;n<t;n++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*n*4,l=0;l<8&&8*n+l<this.width;l++){var d=this.palette[i>>7-l&1];this.data[o+4*l]=d.blue,this.data[o+4*l+1]=d.green,this.data[o+4*l+2]=d.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Zi.prototype.bit4=function(){for(var s=Math.ceil(this.width/2),t=s%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<s;n++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*n*4,l=i>>4,d=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*n+1>=this.width)break;u=this.palette[d],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Zi.prototype.bit8=function(){for(var s=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var n=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(n<this.palette.length){var o=this.palette[n];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}s!==0&&(this.pos+=4-s)}},Zi.prototype.bit15=function(){for(var s=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,d=(i>>10&t)/t*255|0,u=i>>15?255:0,m=a*this.width*4+4*n;this.data[m]=d,this.data[m+1]=l,this.data[m+2]=o,this.data[m+3]=u}this.pos+=s}},Zi.prototype.bit16=function(){for(var s=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var n=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,d=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,m=n*this.width*4+4*i;this.data[m]=u,this.data[m+1]=d,this.data[m+2]=l,this.data[m+3]=255}this.pos+=s}},Zi.prototype.bit24=function(){for(var s=this.height-1;s>=0;s--){for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=n,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},Zi.prototype.bit32=function(){for(var s=this.height-1;s>=0;s--)for(var t=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=n,this.data[l+2]=a,this.data[l+3]=o}},Zi.prototype.getData=function(){return this.data},(function(s){s.processBMP=function(t,r,a,n){var i=new Zi(t,!1),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},u=new tx(100).encode(d,100);return s.processJPEG.call(this,u,r,a,n)}})(Lt.API),R1.prototype.getData=function(){return this.data},(function(s){s.processWEBP=function(t,r,a,n){var i=new R1(t),o=i.width,l=i.height,d={data:i.getData(),width:o,height:l},u=new tx(100).encode(d,100);return s.processJPEG.call(this,u,r,a,n)}})(Lt.API),Lt.API.processRGBA=function(s,t,r){for(var a=s.data,n=a.length,i=new Uint8Array(n/4*3),o=new Uint8Array(n/4),l=0,d=0,u=0;u<n;u+=4){var m=a[u],h=a[u+1],x=a[u+2],f=a[u+3];i[l++]=m,i[l++]=h,i[l++]=x,o[d++]=f}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:s.width,height:s.height}},Lt.API.setLanguage=function(s){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[s]!==void 0&&(this.internal.languageSettings.languageCode=s,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},qu=Lt.API,Vf=qu.getCharWidthsArray=function(s,t){var r,a,n=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:n.metadata.Unicode.widths,d=l.fof?l.fof:1,u=t.kerning?t.kerning:n.metadata.Unicode.kerning,m=u.fof?u.fof:1,h=t.doKerning!==!1,x=0,f=s.length,b=0,v=l[0]||d,j=[];for(r=0;r<f;r++)a=s.charCodeAt(r),typeof n.metadata.widthOfString=="function"?j.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(x=h&&Rr(u[a])==="object"&&!isNaN(parseInt(u[a][b],10))?u[a][b]/m:0,j.push((l[a]||v)/d+x)),b=a;return j},F1=qu.getStringUnitWidth=function(s,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return qu.processArabic&&(s=qu.processArabic(s)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(s,r,n)/r:Vf.apply(this,arguments).reduce(function(i,o){return i+o},0)},E1=function(s,t,r,a){for(var n=[],i=0,o=s.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;n.push(s.slice(0,i));var d=i;for(l=0;i!==o;)l+t[i]>a&&(n.push(s.slice(d,i)),l=0,d=i),l+=t[i],i++;return d!==i&&n.push(s.slice(d,i)),n},_1=function(s,t,r){r||(r={});var a,n,i,o,l,d,u,m=[],h=[m],x=r.textIndent||0,f=0,b=0,v=s.split(" "),j=Vf.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var S=Array(d).join(" "),C=[];v.map(function(F){(F=F.split(/\s*\n/)).length>1?C=C.concat(F.map(function(Q,q){return(q&&Q.length?`
`:"")+Q})):C.push(F[0])}),v=C,d=F1.apply(this,[S,r])}for(i=0,o=v.length;i<o;i++){var B=0;if(a=v[i],d&&a[0]==`
`&&(a=a.substr(1),B=1),x+f+(b=(n=Vf.apply(this,[a,r])).reduce(function(F,Q){return F+Q},0))>t||B){if(b>t){for(l=E1.apply(this,[a,n,t-(x+f),t]),m.push(l.shift()),m=[l.pop()];l.length;)h.push([l.shift()]);b=n.slice(a.length-(m[0]?m[0].length:0)).reduce(function(F,Q){return F+Q},0)}else m=[a];h.push(m),x=b+d,f=j}else m.push(a),x+=f+b,f=j}return u=d?function(F,Q){return(Q?S:"")+F.join(" ")}:function(F){return F.join(" ")},h.map(u)},qu.splitTextToSize=function(s,t,r){var a,n=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var h=this.internal.getFont(m.fontName,m.fontStyle),x="Unicode";return h.metadata[x]?{widths:h.metadata[x].widths||{0:1},kerning:h.metadata[x].kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(s)?s:String(s).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/n;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/n:0,i.lineIndent=r.lineIndent;var l,d,u=[];for(l=0,d=a.length;l<d;l++)u=u.concat(_1.apply(this,[a[l],o,i]));return u},(function(s){s.__fontmetrics__=s.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",a={},n={},i=0;i<16;i++)a[r[i]]=t[i],n[t[i]]=r[i];var o=function(x){return"0x"+parseInt(x,10).toString(16)},l=s.__fontmetrics__.compress=function(x){var f,b,v,j,S=["{"];for(var C in x){if(f=x[C],isNaN(parseInt(C,10))?b="'"+C+"'":(C=parseInt(C,10),b=(b=o(C).slice(2)).slice(0,-1)+n[b.slice(-1)]),typeof f=="number")f<0?(v=o(f).slice(3),j="-"):(v=o(f).slice(2),j=""),v=j+v.slice(0,-1)+n[v.slice(-1)];else{if(Rr(f)!=="object")throw new Error("Don't know what to do with value type "+Rr(f)+".");v=l(f)}S.push(b+v)}return S.push("}"),S.join("")},d=s.__fontmetrics__.uncompress=function(x){if(typeof x!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,b,v,j,S={},C=1,B=S,F=[],Q="",q="",P=x.length-1,D=1;D<P;D+=1)(j=x[D])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(j):j=="{"?(F.push([B,v]),B={},v=void 0):j=="}"?((b=F.pop())[0][b[1]]=B,v=void 0,B=b[0]):j=="-"?C=-1:v===void 0?a.hasOwnProperty(j)?(Q+=a[j],v=parseInt(Q,16)*C,C=1,Q=""):Q+=j:a.hasOwnProperty(j)?(q+=a[j],B[v]=parseInt(q,16)*C,C=1,v=void 0,q=""):q+=j;return S},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},h={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};s.events.push(["addFont",function(x){var f=x.font,b=h.Unicode[f.postScriptName];b&&(f.metadata.Unicode={},f.metadata.Unicode.widths=b.widths,f.metadata.Unicode.kerning=b.kerning);var v=m.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])})(Lt.API),(function(s){var t=function(r){for(var a=r.length,n=new Uint8Array(a),i=0;i<a;i++)n[i]=r.charCodeAt(i);return n};s.API.events.push(["addFont",function(r){var a=void 0,n=r.font,i=r.instance;if(!n.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if(typeof(a=i.existsFileInVFS(n.postScriptName)===!1?i.loadFile(n.postScriptName):i.getFileFromVFS(n.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Ng(l)),o.metadata=s.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(n,a)}}])})(Lt),Lt.API.addSvgAsImage=function(s,t,r,a,n,i,o,l){if(isNaN(t)||isNaN(r))throw zr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(n))throw zr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=a,d.height=n;var u=d.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,d.width,d.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return(Jt.canvg?Promise.resolve(Jt.canvg):Fi(()=>import("./index.es-Be2MJ7j_.js"),[])).catch(function(x){return Promise.reject(new Error("Could not load canvg: "+x))}).then(function(x){return x.default?x.default:x}).then(function(x){return x.fromString(u,s,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(m)}).then(function(){h.addImage(d.toDataURL("image/jpeg",1),t,r,a,n,o,l)})},Lt.API.putTotalPages=function(s){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(s,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(s,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var n=0;n<this.internal.pages[a].length;n++)this.internal.pages[a][n]=this.internal.pages[a][n].replace(t,r);return this},Lt.API.viewerPreferences=function(s,t){var r;s=s||{},t=t||!1;var a,n,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),d=[],u=0,m=0,h=0;function x(b,v){var j,S=!1;for(j=0;j<b.length;j+=1)b[j]===v&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,s==="reset"||t===!0){var f=l.length;for(h=0;h<f;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Rr(s)==="object"){for(n in s)if(i=s[n],x(l,n)&&i!==void 0){if(r[n].type==="boolean"&&typeof i=="boolean")r[n].value=i;else if(r[n].type==="name"&&x(r[n].valueSet,i))r[n].value=i;else if(r[n].type==="integer"&&Number.isInteger(i))r[n].value=i;else if(r[n].type==="array"){for(u=0;u<i.length;u+=1)if(a=!0,i[u].length===1&&typeof i[u][0]=="number")d.push(String(i[u]-1));else if(i[u].length>1){for(m=0;m<i[u].length;m+=1)typeof i[u][m]!="number"&&(a=!1);a===!0&&d.push([i[u][0]-1,i[u][1]-1].join(" "))}r[n].value="["+d.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var b,v=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?v.push("/"+b+" /"+r[b].value):v.push("/"+b+" "+r[b].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(s){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',n=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+n.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(n+i+o+l+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};s.addMetadata=function(a,n){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:n||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Lt.API),(function(s){var t=s.API,r=t.pdfEscape16=function(i,o){for(var l,d=o.metadata.Unicode.widths,u=["","0","00","000","0000"],m=[""],h=0,x=i.length;h<x;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),d.indexOf(l)==-1&&(d.push(l),d.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return m.join("");l=l.toString(16),m.push(u[4-l.length],l)}return m.join("")},a=function(i){var o,l,d,u,m,h,x;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],h=0,x=(l=Object.keys(i).sort(function(f,b){return f-b})).length;h<x;h++)o=l[h],d.length>=100&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+u+">"));return d.length&&(m+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,u=o.newObject,m=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,x=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",b=0;b<x.length;b++)f+=String.fromCharCode(x[b]);var v=u();m({data:f,addLength1:!0,objectId:v}),d("endobj");var j=u();m({data:a(l.metadata.toUnicode),addLength1:!0,objectId:j}),d("endobj");var S=u();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+eA(l.fontName)),d("/FontFile2 "+v+" 0 R"),d("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),d("/Flags "+l.metadata.flags),d("/StemV "+l.metadata.stemV),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d(">>"),d("endobj");var C=u();d("<<"),d("/Type /Font"),d("/BaseFont /"+eA(l.fontName)),d("/FontDescriptor "+S+" 0 R"),d("/W "+s.API.PDFObject.convert(h)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+l.encoding+")"),d(">>"),d(">>"),d("endobj"),l.objectNumber=u(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+j+" 0 R"),d("/BaseFont /"+eA(l.fontName)),d("/Encoding /"+l.encoding),d("/DescendantFonts ["+C+" 0 R]"),d(">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,d=o.out,u=o.newObject,m=o.putStream;if(l.metadata instanceof s.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,x="",f=0;f<h.length;f++)x+=String.fromCharCode(h[f]);var b=u();m({data:x,addLength1:!0,objectId:b}),d("endobj");var v=u();m({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),d("endobj");var j=u();d("<<"),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d("/StemV "+l.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+b+" 0 R"),d("/Flags 96"),d("/FontBBox "+s.API.PDFObject.convert(l.metadata.bbox)),d("/FontName /"+eA(l.fontName)),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d(">>"),d("endobj"),l.objectNumber=u();for(var S=0;S<l.metadata.hmtx.widths.length;S++)l.metadata.hmtx.widths[S]=parseInt(l.metadata.hmtx.widths[S]*(1e3/l.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+eA(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+s.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),d("endobj"),l.isAlreadyPutted=!0}})(i)}]);var n=function(i){var o,l=i.text||"",d=i.x,u=i.y,m=i.options||{},h=i.mutex||{},x=h.pdfEscape,f=h.activeFontKey,b=h.fonts,v=f,j="",S=0,C="",B=b[v].encoding;if(b[v].encoding!=="Identity-H")return{text:l,x:d,y:u,options:m,mutex:h};for(C=l,v=f,Array.isArray(l)&&(C=l[0]),S=0;S<C.length;S+=1)b[v].metadata.hasOwnProperty("cmap")&&(o=b[v].metadata.cmap.unicode.codeMap[C[S].charCodeAt(0)]),o||C[S].charCodeAt(0)<256&&b[v].metadata.hasOwnProperty("Unicode")?j+=C[S]:j+="";var F="";return parseInt(v.slice(1))<14||B==="WinAnsiEncoding"?F=x(j,v).split("").map(function(Q){return Q.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(F=r(j,b[v])),h.isHex=!0,{text:F,x:d,y:u,options:m,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],d={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([n(Object.assign({},d,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(n(Object.assign({},d,{text:o[u]})).text);i.text=l}else i.text=n(Object.assign({},d,{text:o})).text}])})(Lt),(function(s){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};s.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},s.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},s.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Lt.API),(function(s){s.__bidiEngine__=s.prototype.__bidiEngine__=function(a){var n,i,o,l,d,u,m,h=t,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,B=0;this.__bidiEngine__={};var F=function(k){var L=k.charCodeAt(),E=L>>8,O=v[E];return O!==void 0?h[256*O+(255&L)]:E===252||E===253?"AL":S.test(E)?"L":E===8?"R":"N"},Q=function(k){for(var L,E=0;E<k.length;E++){if((L=F(k.charAt(E)))==="L")return!1;if(L==="R")return!0}return!1},q=function(k,L,E,O){var le,te,V,M,ie=L[O];switch(ie){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"N":case"AN":break;case"EN":C&&(ie="AN");break;case"AL":C=!0,ie="R";break;case"WS":case"BN":ie="N";break;case"CS":O<1||O+1>=L.length||(le=E[O-1])!=="EN"&&le!=="AN"||(te=L[O+1])!=="EN"&&te!=="AN"?ie="N":C&&(te="AN"),ie=te===le?te:"N";break;case"ES":ie=(le=O>0?E[O-1]:"B")==="EN"&&O+1<L.length&&L[O+1]==="EN"?"EN":"N";break;case"ET":if(O>0&&E[O-1]==="EN"){ie="EN";break}if(C){ie="N";break}for(V=O+1,M=L.length;V<M&&L[V]==="ET";)V++;ie=V<M&&L[V]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(M=L.length,V=O+1;V<M&&L[V]==="NSM";)V++;if(V<M){var K=k[O],H=K>=1425&&K<=2303||K===64286;if(le=L[V],H&&(le==="R"||le==="AL")){ie="R";break}}}ie=O<1||(le=L[O-1])==="B"?"N":E[O-1];break;case"B":C=!1,n=!0,ie=B;break;case"S":i=!0,ie="N"}return ie},P=function(k,L,E){var O=k.split("");return E&&D(O,E,{hiLevel:B}),O.reverse(),L&&L.reverse(),O.join("")},D=function(k,L,E){var O,le,te,V,M,ie=-1,K=k.length,H=0,I=[],ee=B?f:x,se=[];for(C=!1,n=!1,i=!1,le=0;le<K;le++)se[le]=F(k[le]);for(te=0;te<K;te++){if(M=H,I[te]=q(k,se,I,te),O=240&(H=ee[M][b[I[te]]]),H&=15,L[te]=V=ee[H][5],O>0)if(O===16){for(le=ie;le<te;le++)L[le]=1;ie=-1}else ie=-1;if(ee[H][6])ie===-1&&(ie=te);else if(ie>-1){for(le=ie;le<te;le++)L[le]=V;ie=-1}se[te]==="B"&&(L[te]=0),E.hiLevel|=V}i&&(function(de,re,z){for(var ne=0;ne<z;ne++)if(de[ne]==="S"){re[ne]=B;for(var Y=ne-1;Y>=0&&de[Y]==="WS";Y--)re[Y]=B}})(se,L,K)},_=function(k,L,E,O,le){if(!(le.hiLevel<k)){if(k===1&&B===1&&!n)return L.reverse(),void(E&&E.reverse());for(var te,V,M,ie,K=L.length,H=0;H<K;){if(O[H]>=k){for(M=H+1;M<K&&O[M]>=k;)M++;for(ie=H,V=M-1;ie<V;ie++,V--)te=L[ie],L[ie]=L[V],L[V]=te,E&&(te=E[ie],E[ie]=E[V],E[V]=te);H=M}H++}}},$=function(k,L,E){var O=k.split(""),le={hiLevel:B};return E||(E=[]),D(O,E,le),(function(te,V,M){if(M.hiLevel!==0&&m)for(var ie,K=0;K<te.length;K++)V[K]===1&&(ie=j.indexOf(te[K]))>=0&&(te[K]=j[ie+1])})(O,E,le),_(2,O,L,E,le),_(1,O,L,E,le),O.join("")};return this.__bidiEngine__.doBidiReorder=function(k,L,E){if((function(le,te){if(te)for(var V=0;V<le.length;V++)te[V]=V;l===void 0&&(l=Q(le)),u===void 0&&(u=Q(le))})(k,L),o||!d||u)if(o&&d&&l^u)B=l?1:0,k=P(k,L,E);else if(!o&&d&&u)B=l?1:0,k=$(k,L,E),k=P(k,L);else if(!o||l||d||u){if(o&&!d&&l^u)k=P(k,L),l?(B=0,k=$(k,L,E)):(B=1,k=$(k,L,E),k=P(k,L));else if(o&&l&&!d&&u)B=1,k=$(k,L,E),k=P(k,L);else if(!o&&!d&&l^u){var O=m;l?(B=1,k=$(k,L,E),B=0,m=!1,k=$(k,L,E),m=O):(B=0,k=$(k,L,E),k=P(k,L),B=1,m=!1,k=$(k,L,E),m=O,k=P(k,L))}}else B=0,k=$(k,L,E);else B=l?1:0,k=$(k,L,E);return k},this.__bidiEngine__.setOptions=function(k){k&&(o=k.isInputVisual,d=k.isOutputVisual,l=k.isInputRtl,u=k.isOutputRtl,m=k.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new s.__bidiEngine__({isInputVisual:!0});s.API.events.push(["postProcessText",function(a){var n=a.text;a.x,a.y;var i=a.options||{};a.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(n)==="[object Array]"){var l=0;for(o=[],l=0;l<n.length;l+=1)Object.prototype.toString.call(n[l])==="[object Array]"?o.push([r.doBidiReorder(n[l][0]),n[l][1],n[l][2]]):o.push([r.doBidiReorder(n[l])]);a.text=o}else a.text=r.doBidiReorder(n);r.setOptions({isInputVisual:!0})}])})(Lt),Lt.API.TTFFont=(function(){function s(t){var r;if(this.rawData=t,r=this.contents=new Pc(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new eD(this),this.registerTTF()}return s.open=function(t){return new s(t)},s.prototype.parse=function(){return this.directory=new Q8(this.contents),this.head=new H8(this),this.name=new z8(this),this.cmap=new i4(this),this.toUnicode={},this.hhea=new q8(this),this.maxp=new G8(this),this.hmtx=new V8(this),this.post=new W8(this),this.os2=new $8(this),this.loca=new Z8(this),this.glyf=new Y8(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},s.prototype.registerTTF=function(){var t,r,a,n,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,d,u;for(u=[],o=0,l=(d=this.bbox).length;o<l;o++)t=d[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(a=255&(n=this.post.italic_angle),32768&(r=n>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},s.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},s.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},s.prototype.widthOfString=function(t,r,a){var n,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)n=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(n))+a*(1e3/r)||0;return o*(r/1e3)},s.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},s})();var uo,Pc=(function(){function s(t){this.data=t??[],this.pos=0,this.length=this.data.length}return s.prototype.readByte=function(){return this.data[this.pos++]},s.prototype.writeByte=function(t){return this.data[this.pos++]=t},s.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},s.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},s.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},s.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},s.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},s.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},s.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},s.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},s.prototype.writeString=function(t){var r,a,n;for(n=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)n.push(this.writeByte(t.charCodeAt(r)));return n},s.prototype.readShort=function(){return this.readInt16()},s.prototype.writeShort=function(t){return this.writeInt16(t)},s.prototype.readLongLong=function(){var t,r,a,n,i,o,l,d;return t=this.readByte(),r=this.readByte(),a=this.readByte(),n=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^n)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*n+16777216*i+65536*o+256*l+d},s.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},s.prototype.readInt=function(){return this.readInt32()},s.prototype.writeInt=function(t){return this.writeInt32(t)},s.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},s.prototype.write=function(t){var r,a,n,i;for(i=[],a=0,n=t.length;a<n;a++)r=t[a],i.push(this.writeByte(r));return i},s})(),Q8=(function(){var s;function t(r){var a,n,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,n,i,o,l,d,u,m,h,x,f,b,v;for(v in f=Object.keys(r).length,d=Math.log(2),h=16*Math.floor(Math.log(f)/d),o=Math.floor(h/d),m=16*f-h,(n=new Pc).writeInt(this.scalarType),n.writeShort(f),n.writeShort(h),n.writeShort(o),n.writeShort(m),i=16*f,u=n.pos+i,l=null,b=[],r)for(x=r[v],n.writeString(v),n.writeInt(s(x)),n.writeInt(u),n.writeInt(x.length),b=b.concat(x),v==="head"&&(l=u),u+=x.length;u%4;)b.push(0),u++;return n.write(b),a=2981146554-s(n.data),n.pos=l+8,n.writeUInt32(a),n.data},s=function(r){var a,n,i,o;for(r=o4.call(r);r.length%4;)r.push(0);for(i=new Pc(r),n=0,a=0,o=r.length;a<o;a=a+=4)n+=i.readUInt32();return 4294967295&n},t})(),O8={}.hasOwnProperty,Ro=function(s,t){for(var r in t)O8.call(t,r)&&(s[r]=t[r]);function a(){this.constructor=s}return a.prototype=t.prototype,s.prototype=new a,s.__super__=t.prototype,s};uo=(function(){function s(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return s.prototype.parse=function(){},s.prototype.encode=function(){},s.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},s})();var H8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="head",s.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},s.prototype.encode=function(t){var r;return(r=new Pc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},s})(),Q1=(function(){function s(t,r){var a,n,i,o,l,d,u,m,h,x,f,b,v,j,S,C,B;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(f=t.readUInt16(),x=f/2,t.pos+=6,i=(function(){var F,Q;for(Q=[],d=F=0;0<=x?F<x:F>x;d=0<=x?++F:--F)Q.push(t.readUInt16());return Q})(),t.pos+=2,v=(function(){var F,Q;for(Q=[],d=F=0;0<=x?F<x:F>x;d=0<=x?++F:--F)Q.push(t.readUInt16());return Q})(),u=(function(){var F,Q;for(Q=[],d=F=0;0<=x?F<x:F>x;d=0<=x?++F:--F)Q.push(t.readUInt16());return Q})(),m=(function(){var F,Q;for(Q=[],d=F=0;0<=x?F<x:F>x;d=0<=x?++F:--F)Q.push(t.readUInt16());return Q})(),n=(this.length-t.pos+this.offset)/2,l=(function(){var F,Q;for(Q=[],d=F=0;0<=n?F<n:F>n;d=0<=n?++F:--F)Q.push(t.readUInt16());return Q})(),d=S=0,B=i.length;S<B;d=++S)for(j=i[d],a=C=b=v[d];b<=j?C<=j:C>=j;a=b<=j?++C:--C)m[d]===0?o=a+u[d]:(o=l[m[d]/2+(a-b)-(x-d)]||0)!==0&&(o+=u[d]),this.codeMap[a]=65535&o}t.pos=h}return s.encode=function(t,r){var a,n,i,o,l,d,u,m,h,x,f,b,v,j,S,C,B,F,Q,q,P,D,_,$,k,L,E,O,le,te,V,M,ie,K,H,I,ee,se,de,re,z,ne,Y,X,ye,pe;switch(O=new Pc,o=Object.keys(t).sort(function(Ce,je){return Ce-je}),r){case"macroman":for(v=0,j=(function(){var Ce=[];for(b=0;b<256;++b)Ce.push(0);return Ce})(),C={0:0},i={},le=0,ie=o.length;le<ie;le++)C[Y=t[n=o[le]]]==null&&(C[Y]=++v),i[n]={old:t[n],new:C[t[n]]},j[n]=C[t[n]];return O.writeUInt16(1),O.writeUInt16(0),O.writeUInt32(12),O.writeUInt16(0),O.writeUInt16(262),O.writeUInt16(0),O.write(j),{charMap:i,subtable:O.data,maxGlyphID:v+1};case"unicode":for(L=[],h=[],B=0,C={},a={},S=u=null,te=0,K=o.length;te<K;te++)C[Q=t[n=o[te]]]==null&&(C[Q]=++B),a[n]={old:Q,new:C[Q]},l=C[Q]-n,S!=null&&l===u||(S&&h.push(S),L.push(n),u=l),S=n;for(S&&h.push(S),h.push(65535),L.push(65535),$=2*(_=L.length),D=2*Math.pow(Math.log(_)/Math.LN2,2),x=Math.log(D/2)/Math.LN2,P=2*_-D,d=[],q=[],f=[],b=V=0,H=L.length;V<H;b=++V){if(k=L[b],m=h[b],k===65535){d.push(0),q.push(0);break}if(k-(E=a[k].new)>=32768)for(d.push(0),q.push(2*(f.length+_-b)),n=M=k;k<=m?M<=m:M>=m;n=k<=m?++M:--M)f.push(a[n].new);else d.push(E-k),q.push(0)}for(O.writeUInt16(3),O.writeUInt16(1),O.writeUInt32(12),O.writeUInt16(4),O.writeUInt16(16+8*_+2*f.length),O.writeUInt16(0),O.writeUInt16($),O.writeUInt16(D),O.writeUInt16(x),O.writeUInt16(P),z=0,I=h.length;z<I;z++)n=h[z],O.writeUInt16(n);for(O.writeUInt16(0),ne=0,ee=L.length;ne<ee;ne++)n=L[ne],O.writeUInt16(n);for(X=0,se=d.length;X<se;X++)l=d[X],O.writeUInt16(l);for(ye=0,de=q.length;ye<de;ye++)F=q[ye],O.writeUInt16(F);for(pe=0,re=f.length;pe<re;pe++)v=f[pe],O.writeUInt16(v);return{charMap:a,subtable:O.data,maxGlyphID:B+1}}},s})(),i4=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="cmap",s.prototype.parse=function(t){var r,a,n;for(t.pos=this.offset,this.version=t.readUInt16(),n=t.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)r=new Q1(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},s.encode=function(t,r){var a,n;return r==null&&(r="macroman"),a=Q1.encode(t,r),(n=new Pc).writeUInt16(0),n.writeUInt16(1),a.table=n.data.concat(a.subtable),a},s})(),q8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="hhea",s.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},s})(),$8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="OS/2",s.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,a;for(a=[],r=0;r<10;++r)a.push(t.readByte());return a})(),this.charRange=(function(){var r,a;for(a=[],r=0;r<4;++r)a.push(t.readInt());return a})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,a;for(a=[],r=0;r<2;r=++r)a.push(t.readInt());return a})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},s})(),W8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="post",s.prototype.parse=function(t){var r,a,n;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(a=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=a?i<a:i>a;i=0<=a?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],n=[];t.pos<this.offset+this.length;)r=t.readByte(),n.push(this.names.push(t.readString(r)));return n;case 151552:return a=t.readUInt16(),this.offsets=t.read(a);case 262144:return this.map=(function(){var o,l,d;for(d=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)d.push(t.readUInt32());return d}).call(this)}},s})(),K8=function(s,t){this.raw=s,this.length=s.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},z8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="name",s.prototype.parse=function(t){var r,a,n,i,o,l,d,u,m,h,x;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(d={},i=m=0,h=a.length;m<h;i=++m)n=a[i],t.pos=n.offset,u=t.readString(n.length),o=new K8(u,n),d[x=n.nameID]==null&&(d[x]=[]),d[n.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},s})(),G8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="maxp",s.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},s})(),V8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="hmtx",s.prototype.parse=function(t){var r,a,n,i,o,l,d;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(n=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,m;for(m=[],r=u=0;0<=n?u<n:u>n;r=0<=n?++u:--u)m.push(t.readInt16());return m})(),this.widths=(function(){var u,m,h,x;for(x=[],u=0,m=(h=this.metrics).length;u<m;u++)i=h[u],x.push(i.advance);return x}).call(this),a=this.widths[this.widths.length-1],d=[],r=o=0;0<=n?o<n:o>n;r=0<=n?++o:--o)d.push(this.widths.push(a));return d},s.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},s})(),o4=[].slice,Y8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="glyf",s.prototype.parse=function(){return this.cache={}},s.prototype.glyphFor=function(t){var r,a,n,i,o,l,d,u,m,h;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,a=i.indexOf(t),(n=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+a,o=(l=new Pc(r.read(n))).readShort(),u=l.readShort(),h=l.readShort(),d=l.readShort(),m=l.readShort(),this.cache[t]=o===-1?new X8(l,u,h,d,m):new J8(l,o,u,h,d,m),this.cache[t]))},s.prototype.encode=function(t,r,a){var n,i,o,l,d;for(o=[],i=[],l=0,d=r.length;l<d;l++)n=t[r[l]],i.push(o.length),n&&(o=o.concat(n.encode(a)));return i.push(o.length),{table:o,offsets:i}},s})(),J8=(function(){function s(t,r,a,n,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=n,this.xMax=i,this.yMax=o,this.compound=!1}return s.prototype.encode=function(){return this.raw.data},s})(),X8=(function(){function s(t,r,a,n,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=n,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return s.prototype.encode=function(){var t,r,a;for(r=new Pc(o4.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},s})(),Z8=(function(){function s(){return s.__super__.constructor.apply(this,arguments)}return Ro(s,uo),s.prototype.tag="loca",s.prototype.parse=function(t){var r,a;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var n,i;for(i=[],a=0,n=this.length;a<n;a+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var n,i;for(i=[],a=0,n=this.length;a<n;a+=4)i.push(t.readUInt32());return i}).call(this)},s.prototype.indexOf=function(t){return this.offsets[t]},s.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},s.prototype.encode=function(t,r){for(var a=new Uint32Array(this.offsets.length),n=0,i=0,o=0;o<a.length;++o)if(a[o]=n,i<r.length&&r[i]==o){++i,a[o]=n;var l=this.offsets[o],d=this.offsets[o+1]-l;d>0&&(n+=d)}for(var u=new Array(4*a.length),m=0;m<a.length;++m)u[4*m+3]=255&a[m],u[4*m+2]=(65280&a[m])>>8,u[4*m+1]=(16711680&a[m])>>16,u[4*m]=(4278190080&a[m])>>24;return u},s})(),eD=(function(){function s(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return s.prototype.generateCmap=function(){var t,r,a,n,i;for(r in n=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=n[a];return t},s.prototype.glyphsFor=function(t){var r,a,n,i,o,l,d;for(n={},o=0,l=t.length;o<l;o++)n[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],n)(a=n[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in d=this.glyphsFor(r))a=d[i],n[i]=a;return n},s.prototype.encode=function(t,r){var a,n,i,o,l,d,u,m,h,x,f,b,v,j,S;for(n in a=i4.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),f={0:0},S=a.charMap)f[(d=S[n]).old]=d.new;for(b in x=a.maxGlyphID,o)b in f||(f[b]=x++);return m=(function(C){var B,F;for(B in F={},C)F[C[B]]=B;return F})(f),h=Object.keys(m).sort(function(C,B){return C-B}),v=(function(){var C,B,F;for(F=[],C=0,B=h.length;C<B;C++)l=h[C],F.push(m[l]);return F})(),i=this.font.glyf.encode(o,v,f),u=this.font.loca.encode(i.offsets,v),j={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},s})();Lt.API.PDFObject=(function(){var s;function t(){}return s=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,n,i,o;if(Array.isArray(r))return"["+(function(){var l,d,u;for(u=[],l=0,d=r.length;l<d;l++)a=r[l],u.push(t.convert(a));return u})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+s(r.getUTCFullYear(),4)+s(r.getUTCMonth(),2)+s(r.getUTCDate(),2)+s(r.getUTCHours(),2)+s(r.getUTCMinutes(),2)+s(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(n in i=["<<"],r)o=r[n],i.push("/"+n+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();const tD=Object.freeze(Object.defineProperty({__proto__:null,AcroFormAppearance:Pt,AcroFormButton:da,AcroFormCheckBox:ih,AcroFormChoiceField:Fd,AcroFormComboBox:_d,AcroFormEditBox:ah,AcroFormListBox:Ed,AcroFormPasswordField:oh,AcroFormPushButton:nh,AcroFormRadioButton:Pd,AcroFormTextField:Fc,GState:Sh,ShadingPattern:fc,TilingPattern:jd,default:Lt,jsPDF:Lt},Symbol.toStringTag,{value:"Module"}));/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vb=function(s,t){return vb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},vb(s,t)};function Ao(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");vb(s,t);function r(){this.constructor=s}s.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var wb=function(){return wb=Object.assign||function(t){for(var r,a=1,n=arguments.length;a<n;a++){r=arguments[a];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},wb.apply(this,arguments)};function vn(s,t,r,a){function n(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(m){try{u(a.next(m))}catch(h){o(h)}}function d(m){try{u(a.throw(m))}catch(h){o(h)}}function u(m){m.done?i(m.value):n(m.value).then(l,d)}u((a=a.apply(s,[])).next())})}function ln(s,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},a,n,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(m){return d([u,m])}}function d(u){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,n&&(i=u[0]&2?n.return:u[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,u[1])).done)return i;switch(n=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,n=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(s,r)}catch(m){u=[6,m],n=0}finally{a=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Yf(s,t,r){if(arguments.length===2)for(var a=0,n=t.length,i;a<n;a++)(i||!(a in t))&&(i||(i=Array.prototype.slice.call(t,0,a)),i[a]=t[a]);return s.concat(i||t)}var Nl=(function(){function s(t,r,a,n){this.left=t,this.top=r,this.width=a,this.height=n}return s.prototype.add=function(t,r,a,n){return new s(this.left+t,this.top+r,this.width+a,this.height+n)},s.fromClientRect=function(t,r){return new s(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},s.fromDOMRectList=function(t,r){var a=Array.from(r).find(function(n){return n.width!==0});return a?new s(a.left+t.windowBounds.left,a.top+t.windowBounds.top,a.width,a.height):s.EMPTY},s.EMPTY=new s(0,0,0,0),s})(),mp=function(s,t){return Nl.fromClientRect(s,t.getBoundingClientRect())},rD=function(s){var t=s.body,r=s.documentElement;if(!t||!r)throw new Error("Unable to get document size");var a=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),n=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Nl(0,0,a,n)},hp=function(s){for(var t=[],r=0,a=s.length;r<a;){var n=s.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var i=s.charCodeAt(r++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},Qs=function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var r=s.length;if(!r)return"";for(var a=[],n=-1,i="";++n<r;){var o=s[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return i},O1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sD=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jf=0;Jf<O1.length;Jf++)sD[O1.charCodeAt(Jf)]=Jf;var H1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xf=0;Xf<H1.length;Xf++)Wm[H1.charCodeAt(Xf)]=Xf;var aD=function(s){var t=s.length*.75,r=s.length,a,n=0,i,o,l,d;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),m=Array.isArray(u)?u:new Uint8Array(u);for(a=0;a<r;a+=4)i=Wm[s.charCodeAt(a)],o=Wm[s.charCodeAt(a+1)],l=Wm[s.charCodeAt(a+2)],d=Wm[s.charCodeAt(a+3)],m[n++]=i<<2|o>>4,m[n++]=(o&15)<<4|l>>2,m[n++]=(l&3)<<6|d&63;return u},nD=function(s){for(var t=s.length,r=[],a=0;a<t;a+=2)r.push(s[a+1]<<8|s[a]);return r},iD=function(s){for(var t=s.length,r=[],a=0;a<t;a+=4)r.push(s[a+3]<<24|s[a+2]<<16|s[a+1]<<8|s[a]);return r},Id=5,Ny=11,rx=2,oD=Ny-Id,l4=65536>>Id,lD=1<<Id,sx=lD-1,cD=1024>>Id,dD=l4+cD,uD=dD,AD=32,mD=uD+AD,hD=65536>>Ny,fD=1<<oD,gD=fD-1,q1=function(s,t,r){return s.slice?s.slice(t,r):new Uint16Array(Array.prototype.slice.call(s,t,r))},pD=function(s,t,r){return s.slice?s.slice(t,r):new Uint32Array(Array.prototype.slice.call(s,t,r))},xD=function(s,t){var r=aD(s),a=Array.isArray(r)?iD(r):new Uint32Array(r),n=Array.isArray(r)?nD(r):new Uint16Array(r),i=24,o=q1(n,i/2,a[4]/2),l=a[5]===2?q1(n,(i+a[4])/2):pD(a,Math.ceil((i+a[4])/4));return new bD(a[0],a[1],a[2],a[3],o,l)},bD=(function(){function s(t,r,a,n,i,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=i,this.data=o}return s.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Id],r=(r<<rx)+(t&sx),this.data[r];if(t<=65535)return r=this.index[l4+(t-55296>>Id)],r=(r<<rx)+(t&sx),this.data[r];if(t<this.highStart)return r=mD-hD+(t>>Ny),r=this.index[r],r+=t>>Id&gD,r=this.index[r],r=(r<<rx)+(t&sx),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s})(),$1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yD=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zf=0;Zf<$1.length;Zf++)yD[$1.charCodeAt(Zf)]=Zf;var vD="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",W1=50,wD=1,c4=2,d4=3,jD=4,ND=5,K1=7,u4=8,z1=9,wc=10,jb=11,G1=12,Nb=13,CD=14,Km=15,Cb=16,eg=17,Am=18,SD=19,V1=20,Sb=21,mm=22,ax=23,$u=24,si=25,zm=26,Gm=27,Wu=28,BD=29,vd=30,kD=31,tg=32,rg=33,Bb=34,kb=35,Fb=36,Bh=37,Eb=38,Cg=39,Sg=40,nx=41,A4=42,FD=43,ED=[9001,65288],m4="!",gr="",sg="",_b=xD(vD),fl=[vd,Fb],Pb=[wD,c4,d4,ND],h4=[wc,u4],Y1=[Gm,zm],_D=Pb.concat(h4),J1=[Eb,Cg,Sg,Bb,kb],PD=[Km,Nb],ID=function(s,t){t===void 0&&(t="strict");var r=[],a=[],n=[];return s.forEach(function(i,o){var l=_b.get(i);if(l>W1?(n.push(!0),l-=W1):n.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return a.push(o),r.push(Cb);if(l===jD||l===jb){if(o===0)return a.push(o),r.push(vd);var d=r[o-1];return _D.indexOf(d)===-1?(a.push(a[o-1]),r.push(d)):(a.push(o),r.push(vd))}if(a.push(o),l===kD)return r.push(t==="strict"?Sb:Bh);if(l===A4||l===BD)return r.push(vd);if(l===FD)return i>=131072&&i<=196605||i>=196608&&i<=262141?r.push(Bh):r.push(vd);r.push(l)}),[a,r,n]},ix=function(s,t,r,a){var n=a[r];if(Array.isArray(s)?s.indexOf(n)!==-1:s===n)for(var i=r;i<=a.length;){i++;var o=a[i];if(o===t)return!0;if(o!==wc)break}if(n===wc)for(var i=r;i>0;){i--;var l=a[i];if(Array.isArray(s)?s.indexOf(l)!==-1:s===l)for(var d=r;d<=a.length;){d++;var o=a[d];if(o===t)return!0;if(o!==wc)break}if(l!==wc)break}return!1},X1=function(s,t){for(var r=s;r>=0;){var a=t[r];if(a===wc)r--;else return a}return 0},UD=function(s,t,r,a,n){if(r[a]===0)return gr;var i=a-1;if(Array.isArray(n)&&n[i]===!0)return gr;var o=i-1,l=i+1,d=t[i],u=o>=0?t[o]:0,m=t[l];if(d===c4&&m===d4)return gr;if(Pb.indexOf(d)!==-1)return m4;if(Pb.indexOf(m)!==-1||h4.indexOf(m)!==-1)return gr;if(X1(i,t)===u4)return sg;if(_b.get(s[i])===jb||(d===tg||d===rg)&&_b.get(s[l])===jb||d===K1||m===K1||d===z1||[wc,Nb,Km].indexOf(d)===-1&&m===z1||[eg,Am,SD,$u,Wu].indexOf(m)!==-1||X1(i,t)===mm||ix(ax,mm,i,t)||ix([eg,Am],Sb,i,t)||ix(G1,G1,i,t))return gr;if(d===wc)return sg;if(d===ax||m===ax)return gr;if(m===Cb||d===Cb)return sg;if([Nb,Km,Sb].indexOf(m)!==-1||d===CD||u===Fb&&PD.indexOf(d)!==-1||d===Wu&&m===Fb||m===V1||fl.indexOf(m)!==-1&&d===si||fl.indexOf(d)!==-1&&m===si||d===Gm&&[Bh,tg,rg].indexOf(m)!==-1||[Bh,tg,rg].indexOf(d)!==-1&&m===zm||fl.indexOf(d)!==-1&&Y1.indexOf(m)!==-1||Y1.indexOf(d)!==-1&&fl.indexOf(m)!==-1||[Gm,zm].indexOf(d)!==-1&&(m===si||[mm,Km].indexOf(m)!==-1&&t[l+1]===si)||[mm,Km].indexOf(d)!==-1&&m===si||d===si&&[si,Wu,$u].indexOf(m)!==-1)return gr;if([si,Wu,$u,eg,Am].indexOf(m)!==-1)for(var h=i;h>=0;){var x=t[h];if(x===si)return gr;if([Wu,$u].indexOf(x)!==-1)h--;else break}if([Gm,zm].indexOf(m)!==-1)for(var h=[eg,Am].indexOf(d)!==-1?o:i;h>=0;){var x=t[h];if(x===si)return gr;if([Wu,$u].indexOf(x)!==-1)h--;else break}if(Eb===d&&[Eb,Cg,Bb,kb].indexOf(m)!==-1||[Cg,Bb].indexOf(d)!==-1&&[Cg,Sg].indexOf(m)!==-1||[Sg,kb].indexOf(d)!==-1&&m===Sg||J1.indexOf(d)!==-1&&[V1,zm].indexOf(m)!==-1||J1.indexOf(m)!==-1&&d===Gm||fl.indexOf(d)!==-1&&fl.indexOf(m)!==-1||d===$u&&fl.indexOf(m)!==-1||fl.concat(si).indexOf(d)!==-1&&m===mm&&ED.indexOf(s[l])===-1||fl.concat(si).indexOf(m)!==-1&&d===Am)return gr;if(d===nx&&m===nx){for(var f=r[i],b=1;f>0&&(f--,t[f]===nx);)b++;if(b%2!==0)return gr}return d===tg&&m===rg?gr:sg},LD=function(s,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=ID(s,t.lineBreak),a=r[0],n=r[1],i=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(n=n.map(function(l){return[si,vd,A4].indexOf(l)!==-1?Bh:l}));var o=t.wordBreak==="keep-all"?i.map(function(l,d){return l&&s[d]>=19968&&s[d]<=40959}):void 0;return[a,n,o]},TD=(function(){function s(t,r,a,n){this.codePoints=t,this.required=r===m4,this.start=a,this.end=n}return s.prototype.slice=function(){return Qs.apply(void 0,this.codePoints.slice(this.start,this.end))},s})(),DD=function(s,t){var r=hp(s),a=LD(r,t),n=a[0],i=a[1],o=a[2],l=r.length,d=0,u=0;return{next:function(){if(u>=l)return{done:!0,value:null};for(var m=gr;u<l&&(m=UD(r,i,n,++u,o))===gr;);if(m!==gr||u===l){var h=new TD(r,m,d,u);return d=u,{value:h,done:!1}}return{done:!0,value:null}}}},MD=1,RD=2,Th=4,Z1=8,Wg=10,ej=47,lh=92,QD=9,OD=32,ag=34,hm=61,HD=35,qD=36,$D=37,ng=39,ig=40,fm=41,WD=95,Dn=45,KD=33,zD=60,GD=62,VD=64,YD=91,JD=93,XD=61,ZD=123,og=63,e7=125,tj=124,t7=126,r7=128,rj=65533,ox=42,Nd=43,s7=44,a7=58,n7=59,kh=46,i7=0,o7=8,l7=11,c7=14,d7=31,u7=127,Eo=-1,f4=48,g4=97,p4=101,A7=102,m7=117,h7=122,x4=65,b4=69,y4=70,f7=85,g7=90,cn=function(s){return s>=f4&&s<=57},p7=function(s){return s>=55296&&s<=57343},Ku=function(s){return cn(s)||s>=x4&&s<=y4||s>=g4&&s<=A7},x7=function(s){return s>=g4&&s<=h7},b7=function(s){return s>=x4&&s<=g7},y7=function(s){return x7(s)||b7(s)},v7=function(s){return s>=r7},lg=function(s){return s===Wg||s===QD||s===OD},Kg=function(s){return y7(s)||v7(s)||s===WD},sj=function(s){return Kg(s)||cn(s)||s===Dn},w7=function(s){return s>=i7&&s<=o7||s===l7||s>=c7&&s<=d7||s===u7},Ac=function(s,t){return s!==lh?!1:t!==Wg},cg=function(s,t,r){return s===Dn?Kg(t)||Ac(t,r):Kg(s)?!0:!!(s===lh&&Ac(s,t))},lx=function(s,t,r){return s===Nd||s===Dn?cn(t)?!0:t===kh&&cn(r):cn(s===kh?t:s)},j7=function(s){var t=0,r=1;(s[t]===Nd||s[t]===Dn)&&(s[t]===Dn&&(r=-1),t++);for(var a=[];cn(s[t]);)a.push(s[t++]);var n=a.length?parseInt(Qs.apply(void 0,a),10):0;s[t]===kh&&t++;for(var i=[];cn(s[t]);)i.push(s[t++]);var o=i.length,l=o?parseInt(Qs.apply(void 0,i),10):0;(s[t]===b4||s[t]===p4)&&t++;var d=1;(s[t]===Nd||s[t]===Dn)&&(s[t]===Dn&&(d=-1),t++);for(var u=[];cn(s[t]);)u.push(s[t++]);var m=u.length?parseInt(Qs.apply(void 0,u),10):0;return r*(n+l*Math.pow(10,-o))*Math.pow(10,d*m)},N7={type:2},C7={type:3},S7={type:4},B7={type:13},k7={type:8},F7={type:21},E7={type:9},_7={type:10},P7={type:11},I7={type:12},U7={type:14},dg={type:23},L7={type:1},T7={type:25},D7={type:24},M7={type:26},R7={type:27},Q7={type:28},O7={type:29},H7={type:31},Ib={type:32},v4=(function(){function s(){this._value=[]}return s.prototype.write=function(t){this._value=this._value.concat(hp(t))},s.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==Ib;)t.push(r),r=this.consumeToken();return t},s.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case ag:return this.consumeStringToken(ag);case HD:var r=this.peekCodePoint(0),a=this.peekCodePoint(1),n=this.peekCodePoint(2);if(sj(r)||Ac(a,n)){var i=cg(r,a,n)?RD:MD,o=this.consumeName();return{type:5,value:o,flags:i}}break;case qD:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),B7;break;case ng:return this.consumeStringToken(ng);case ig:return N7;case fm:return C7;case ox:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),U7;break;case Nd:if(lx(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case s7:return S7;case Dn:var l=t,d=this.peekCodePoint(0),u=this.peekCodePoint(1);if(lx(l,d,u))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(cg(l,d,u))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(d===Dn&&u===GD)return this.consumeCodePoint(),this.consumeCodePoint(),D7;break;case kh:if(lx(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case ej:if(this.peekCodePoint(0)===ox)for(this.consumeCodePoint();;){var m=this.consumeCodePoint();if(m===ox&&(m=this.consumeCodePoint(),m===ej))return this.consumeToken();if(m===Eo)return this.consumeToken()}break;case a7:return M7;case n7:return R7;case zD:if(this.peekCodePoint(0)===KD&&this.peekCodePoint(1)===Dn&&this.peekCodePoint(2)===Dn)return this.consumeCodePoint(),this.consumeCodePoint(),T7;break;case VD:var h=this.peekCodePoint(0),x=this.peekCodePoint(1),f=this.peekCodePoint(2);if(cg(h,x,f)){var o=this.consumeName();return{type:7,value:o}}break;case YD:return Q7;case lh:if(Ac(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case JD:return O7;case XD:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),k7;break;case ZD:return P7;case e7:return I7;case m7:case f7:var b=this.peekCodePoint(0),v=this.peekCodePoint(1);return b===Nd&&(Ku(v)||v===og)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case tj:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),E7;if(this.peekCodePoint(0)===tj)return this.consumeCodePoint(),F7;break;case t7:if(this.peekCodePoint(0)===hm)return this.consumeCodePoint(),_7;break;case Eo:return Ib}return lg(t)?(this.consumeWhiteSpace(),H7):cn(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):Kg(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Qs(t)}},s.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},s.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},s.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},s.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();Ku(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var a=!1;r===og&&t.length<6;)t.push(r),r=this.consumeCodePoint(),a=!0;if(a){var n=parseInt(Qs.apply(void 0,t.map(function(d){return d===og?f4:d})),16),i=parseInt(Qs.apply(void 0,t.map(function(d){return d===og?y4:d})),16);return{type:30,start:n,end:i}}var o=parseInt(Qs.apply(void 0,t),16);if(this.peekCodePoint(0)===Dn&&Ku(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var l=[];Ku(r)&&l.length<6;)l.push(r),r=this.consumeCodePoint();var i=parseInt(Qs.apply(void 0,l),16);return{type:30,start:o,end:i}}else return{type:30,start:o,end:o}},s.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===ig?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===ig?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},s.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Eo)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===ng||r===ag){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Eo||this.peekCodePoint(0)===fm)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),dg)}for(;;){var n=this.consumeCodePoint();if(n===Eo||n===fm)return{type:22,value:Qs.apply(void 0,t)};if(lg(n))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Eo||this.peekCodePoint(0)===fm?(this.consumeCodePoint(),{type:22,value:Qs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),dg);if(n===ag||n===ng||n===ig||w7(n))return this.consumeBadUrlRemnants(),dg;if(n===lh)if(Ac(n,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),dg;else t.push(n)}},s.prototype.consumeWhiteSpace=function(){for(;lg(this.peekCodePoint(0));)this.consumeCodePoint()},s.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===fm||t===Eo)return;Ac(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},s.prototype.consumeStringSlice=function(t){for(var r=5e4,a="";t>0;){var n=Math.min(r,t);a+=Qs.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),a},s.prototype.consumeStringToken=function(t){var r="",a=0;do{var n=this._value[a];if(n===Eo||n===void 0||n===t)return r+=this.consumeStringSlice(a),{type:0,value:r};if(n===Wg)return this._value.splice(0,a),L7;if(n===lh){var i=this._value[a+1];i!==Eo&&i!==void 0&&(i===Wg?(r+=this.consumeStringSlice(a),a=-1,this._value.shift()):Ac(n,i)&&(r+=this.consumeStringSlice(a),r+=Qs(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},s.prototype.consumeNumber=function(){var t=[],r=Th,a=this.peekCodePoint(0);for((a===Nd||a===Dn)&&t.push(this.consumeCodePoint());cn(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var n=this.peekCodePoint(1);if(a===kh&&cn(n))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Z1;cn(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),n=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((a===b4||a===p4)&&((n===Nd||n===Dn)&&cn(i)||cn(n)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=Z1;cn(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[j7(t),r]},s.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],a=t[1],n=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(cg(n,i,o)){var l=this.consumeName();return{type:15,number:r,flags:a,unit:l}}return n===$D?(this.consumeCodePoint(),{type:16,number:r,flags:a}):{type:17,number:r,flags:a}},s.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(Ku(t)){for(var r=Qs(t);Ku(this.peekCodePoint(0))&&r.length<6;)r+=Qs(this.consumeCodePoint());lg(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(r,16);return a===0||p7(a)||a>1114111?rj:a}return t===Eo?rj:t},s.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(sj(r))t+=Qs(r);else if(Ac(r,this.peekCodePoint(0)))t+=Qs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},s})(),w4=(function(){function s(t){this._tokens=t}return s.create=function(t){var r=new v4;return r.write(t),new s(r.read())},s.parseValue=function(t){return s.create(t).parseComponentValue()},s.parseValues=function(t){return s.create(t).parseComponentValues()},s.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},s.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},s.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},s.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},a=this.consumeToken();;){if(a.type===32||$7(a,t))return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue()),a=this.consumeToken()}},s.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return r;this.reconsumeToken(a),r.values.push(this.consumeComponentValue())}},s.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?Ib:t},s.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},s})(),Dh=function(s){return s.type===15},CA=function(s){return s.type===17},$r=function(s){return s.type===20},q7=function(s){return s.type===0},Ub=function(s,t){return $r(s)&&s.value===t},j4=function(s){return s.type!==31},gA=function(s){return s.type!==31&&s.type!==4},Qo=function(s){var t=[],r=[];return s.forEach(function(a){if(a.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}a.type!==31&&r.push(a)}),r.length&&t.push(r),t},$7=function(s,t){return t===11&&s.type===12||t===28&&s.type===29?!0:t===2&&s.type===3},Ic=function(s){return s.type===17||s.type===15},ea=function(s){return s.type===16||Ic(s)},N4=function(s){return s.length>1?[s[0],s[1]]:[s[0]]},Ra={type:17,number:0,flags:Th},Cy={type:16,number:50,flags:Th},jc={type:16,number:100,flags:Th},Vm=function(s,t,r){var a=s[0],n=s[1];return[es(a,t),es(typeof n<"u"?n:a,r)]},es=function(s,t){if(s.type===16)return s.number/100*t;if(Dh(s))switch(s.unit){case"rem":case"em":return 16*s.number;case"px":default:return s.number}return s.number},C4="deg",S4="grad",B4="rad",k4="turn",fp={name:"angle",parse:function(s,t){if(t.type===15)switch(t.unit){case C4:return Math.PI*t.number/180;case S4:return Math.PI/200*t.number;case B4:return t.number;case k4:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},F4=function(s){return s.type===15&&(s.unit===C4||s.unit===S4||s.unit===B4||s.unit===k4)},E4=function(s){var t=s.filter($r).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Ra,Ra];case"to top":case"bottom":return Bi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Ra,jc];case"to right":case"left":return Bi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[jc,jc];case"to bottom":case"top":return Bi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[jc,Ra];case"to left":case"right":return Bi(270)}return 0},Bi=function(s){return Math.PI*s/180},Ec={name:"color",parse:function(s,t){if(t.type===18){var r=W7[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(s,t.values)}if(t.type===5){if(t.value.length===3){var a=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3);return Nc(parseInt(a+a,16),parseInt(n+n,16),parseInt(i+i,16),1)}if(t.value.length===4){var a=t.value.substring(0,1),n=t.value.substring(1,2),i=t.value.substring(2,3),o=t.value.substring(3,4);return Nc(parseInt(a+a,16),parseInt(n+n,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(t.value.length===6){var a=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6);return Nc(parseInt(a,16),parseInt(n,16),parseInt(i,16),1)}if(t.value.length===8){var a=t.value.substring(0,2),n=t.value.substring(2,4),i=t.value.substring(4,6),o=t.value.substring(6,8);return Nc(parseInt(a,16),parseInt(n,16),parseInt(i,16),parseInt(o,16)/255)}}if(t.type===20){var l=wl[t.value.toUpperCase()];if(typeof l<"u")return l}return wl.TRANSPARENT}},_c=function(s){return(255&s)===0},Na=function(s){var t=255&s,r=255&s>>8,a=255&s>>16,n=255&s>>24;return t<255?"rgba("+n+","+a+","+r+","+t/255+")":"rgb("+n+","+a+","+r+")"},Nc=function(s,t,r,a){return(s<<24|t<<16|r<<8|Math.round(a*255)<<0)>>>0},aj=function(s,t){if(s.type===17)return s.number;if(s.type===16){var r=t===3?1:255;return t===3?s.number/100*r:Math.round(s.number/100*r)}return 0},nj=function(s,t){var r=t.filter(gA);if(r.length===3){var a=r.map(aj),n=a[0],i=a[1],o=a[2];return Nc(n,i,o,1)}if(r.length===4){var l=r.map(aj),n=l[0],i=l[1],o=l[2],d=l[3];return Nc(n,i,o,d)}return 0};function cx(s,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-s)*r*6+s:r<1/2?t:r<2/3?(t-s)*6*(2/3-r)+s:s}var ij=function(s,t){var r=t.filter(gA),a=r[0],n=r[1],i=r[2],o=r[3],l=(a.type===17?Bi(a.number):fp.parse(s,a))/(Math.PI*2),d=ea(n)?n.number/100:0,u=ea(i)?i.number/100:0,m=typeof o<"u"&&ea(o)?es(o,1):1;if(d===0)return Nc(u*255,u*255,u*255,1);var h=u<=.5?u*(d+1):u+d-u*d,x=u*2-h,f=cx(x,h,l+1/3),b=cx(x,h,l),v=cx(x,h,l-1/3);return Nc(f*255,b*255,v*255,m)},W7={hsl:ij,hsla:ij,rgb:nj,rgba:nj},ch=function(s,t){return Ec.parse(s,w4.create(t).parseComponentValue())},wl={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},K7={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(s,t){return t.map(function(r){if($r(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},z7={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},gp=function(s,t){var r=Ec.parse(s,t[0]),a=t[1];return a&&ea(a)?{color:r,stop:a}:{color:r,stop:null}},oj=function(s,t){var r=s[0],a=s[s.length-1];r.stop===null&&(r.stop=Ra),a.stop===null&&(a.stop=jc);for(var n=[],i=0,o=0;o<s.length;o++){var l=s[o].stop;if(l!==null){var d=es(l,t);d>i?n.push(d):n.push(i),i=d}else n.push(null)}for(var u=null,o=0;o<n.length;o++){var m=n[o];if(m===null)u===null&&(u=o);else if(u!==null){for(var h=o-u,x=n[u-1],f=(m-x)/(h+1),b=1;b<=h;b++)n[u+b-1]=f*b;u=null}}return s.map(function(v,j){var S=v.color;return{color:S,stop:Math.max(Math.min(1,n[j]/t),0)}})},G7=function(s,t,r){var a=t/2,n=r/2,i=es(s[0],t)-a,o=n-es(s[1],r);return(Math.atan2(o,i)+Math.PI*2)%(Math.PI*2)},V7=function(s,t,r){var a=typeof s=="number"?s:G7(s,t,r),n=Math.abs(t*Math.sin(a))+Math.abs(r*Math.cos(a)),i=t/2,o=r/2,l=n/2,d=Math.sin(a-Math.PI/2)*l,u=Math.cos(a-Math.PI/2)*l;return[n,i-u,i+u,o-d,o+d]},to=function(s,t){return Math.sqrt(s*s+t*t)},lj=function(s,t,r,a,n){var i=[[0,0],[0,t],[s,0],[s,t]];return i.reduce(function(o,l){var d=l[0],u=l[1],m=to(r-d,a-u);return(n?m<o.optimumDistance:m>o.optimumDistance)?{optimumCorner:l,optimumDistance:m}:o},{optimumDistance:n?1/0:-1/0,optimumCorner:null}).optimumCorner},Y7=function(s,t,r,a,n){var i=0,o=0;switch(s.size){case 0:s.shape===0?i=o=Math.min(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):s.shape===1&&(i=Math.min(Math.abs(t),Math.abs(t-a)),o=Math.min(Math.abs(r),Math.abs(r-n)));break;case 2:if(s.shape===0)i=o=Math.min(to(t,r),to(t,r-n),to(t-a,r),to(t-a,r-n));else if(s.shape===1){var l=Math.min(Math.abs(r),Math.abs(r-n))/Math.min(Math.abs(t),Math.abs(t-a)),d=lj(a,n,t,r,!0),u=d[0],m=d[1];i=to(u-t,(m-r)/l),o=l*i}break;case 1:s.shape===0?i=o=Math.max(Math.abs(t),Math.abs(t-a),Math.abs(r),Math.abs(r-n)):s.shape===1&&(i=Math.max(Math.abs(t),Math.abs(t-a)),o=Math.max(Math.abs(r),Math.abs(r-n)));break;case 3:if(s.shape===0)i=o=Math.max(to(t,r),to(t,r-n),to(t-a,r),to(t-a,r-n));else if(s.shape===1){var l=Math.max(Math.abs(r),Math.abs(r-n))/Math.max(Math.abs(t),Math.abs(t-a)),h=lj(a,n,t,r,!1),u=h[0],m=h[1];i=to(u-t,(m-r)/l),o=l*i}break}return Array.isArray(s.size)&&(i=es(s.size[0],a),o=s.size.length===2?es(s.size[1],n):i),[i,o]},J7=function(s,t){var r=Bi(180),a=[];return Qo(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&o.value==="to"){r=E4(n);return}else if(F4(o)){r=fp.parse(s,o);return}}var l=gp(s,n);a.push(l)}),{angle:r,stops:a,type:1}},ug=function(s,t){var r=Bi(180),a=[];return Qo(t).forEach(function(n,i){if(i===0){var o=n[0];if(o.type===20&&["top","left","right","bottom"].indexOf(o.value)!==-1){r=E4(n);return}else if(F4(o)){r=(fp.parse(s,o)+Bi(270))%Bi(360);return}}var l=gp(s,n);a.push(l)}),{angle:r,stops:a,type:1}},X7=function(s,t){var r=Bi(180),a=[],n=1,i=0,o=3,l=[];return Qo(t).forEach(function(d,u){var m=d[0];if(u===0){if($r(m)&&m.value==="linear"){n=1;return}else if($r(m)&&m.value==="radial"){n=2;return}}if(m.type===18){if(m.name==="from"){var h=Ec.parse(s,m.values[0]);a.push({stop:Ra,color:h})}else if(m.name==="to"){var h=Ec.parse(s,m.values[0]);a.push({stop:jc,color:h})}else if(m.name==="color-stop"){var x=m.values.filter(gA);if(x.length===2){var h=Ec.parse(s,x[1]),f=x[0];CA(f)&&a.push({stop:{type:16,number:f.number*100,flags:f.flags},color:h})}}}}),n===1?{angle:(r+Bi(180))%Bi(360),stops:a,type:n}:{size:o,shape:i,stops:a,position:l,type:n}},_4="closest-side",P4="farthest-side",I4="closest-corner",U4="farthest-corner",L4="circle",T4="ellipse",D4="cover",M4="contain",Z7=function(s,t){var r=0,a=3,n=[],i=[];return Qo(t).forEach(function(o,l){var d=!0;if(l===0){var u=!1;d=o.reduce(function(h,x){if(u)if($r(x))switch(x.value){case"center":return i.push(Cy),h;case"top":case"left":return i.push(Ra),h;case"right":case"bottom":return i.push(jc),h}else(ea(x)||Ic(x))&&i.push(x);else if($r(x))switch(x.value){case L4:return r=0,!1;case T4:return r=1,!1;case"at":return u=!0,!1;case _4:return a=0,!1;case D4:case P4:return a=1,!1;case M4:case I4:return a=2,!1;case U4:return a=3,!1}else if(Ic(x)||ea(x))return Array.isArray(a)||(a=[]),a.push(x),!1;return h},d)}if(d){var m=gp(s,o);n.push(m)}}),{size:a,shape:r,stops:n,position:i,type:2}},Ag=function(s,t){var r=0,a=3,n=[],i=[];return Qo(t).forEach(function(o,l){var d=!0;if(l===0?d=o.reduce(function(m,h){if($r(h))switch(h.value){case"center":return i.push(Cy),!1;case"top":case"left":return i.push(Ra),!1;case"right":case"bottom":return i.push(jc),!1}else if(ea(h)||Ic(h))return i.push(h),!1;return m},d):l===1&&(d=o.reduce(function(m,h){if($r(h))switch(h.value){case L4:return r=0,!1;case T4:return r=1,!1;case M4:case _4:return a=0,!1;case P4:return a=1,!1;case I4:return a=2,!1;case D4:case U4:return a=3,!1}else if(Ic(h)||ea(h))return Array.isArray(a)||(a=[]),a.push(h),!1;return m},d)),d){var u=gp(s,o);n.push(u)}}),{size:a,shape:r,stops:n,position:i,type:2}},e9=function(s){return s.type===1},t9=function(s){return s.type===2},Sy={name:"image",parse:function(s,t){if(t.type===22){var r={url:t.value,type:0};return s.cache.addImage(t.value),r}if(t.type===18){var a=R4[t.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return a(s,t.values)}throw new Error("Unsupported image type "+t.type)}};function r9(s){return!(s.type===20&&s.value==="none")&&(s.type!==18||!!R4[s.name])}var R4={"linear-gradient":J7,"-moz-linear-gradient":ug,"-ms-linear-gradient":ug,"-o-linear-gradient":ug,"-webkit-linear-gradient":ug,"radial-gradient":Z7,"-moz-radial-gradient":Ag,"-ms-radial-gradient":Ag,"-o-radial-gradient":Ag,"-webkit-radial-gradient":Ag,"-webkit-gradient":X7},s9={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(s,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(a){return gA(a)&&r9(a)}).map(function(a){return Sy.parse(s,a)})}},a9={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(s,t){return t.map(function(r){if($r(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},n9={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(s,t){return Qo(t).map(function(r){return r.filter(ea)}).map(N4)}},i9={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(s,t){return Qo(t).map(function(r){return r.filter($r).map(function(a){return a.value}).join(" ")}).map(o9)}},o9=function(s){switch(s){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},oA;(function(s){s.AUTO="auto",s.CONTAIN="contain",s.COVER="cover"})(oA||(oA={}));var l9={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(s,t){return Qo(t).map(function(r){return r.filter(c9)})}},c9=function(s){return $r(s)||ea(s)},pp=function(s){return{name:"border-"+s+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},d9=pp("top"),u9=pp("right"),A9=pp("bottom"),m9=pp("left"),xp=function(s){return{name:"border-radius-"+s,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return N4(r.filter(ea))}}},h9=xp("top-left"),f9=xp("top-right"),g9=xp("bottom-right"),p9=xp("bottom-left"),bp=function(s){return{name:"border-"+s+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},x9=bp("top"),b9=bp("right"),y9=bp("bottom"),v9=bp("left"),yp=function(s){return{name:"border-"+s+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return Dh(r)?r.number:0}}},w9=yp("top"),j9=yp("right"),N9=yp("bottom"),C9=yp("left"),S9={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},B9={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(s,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},k9={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(s,t){return t.filter($r).reduce(function(r,a){return r|F9(a.value)},0)}},F9=function(s){switch(s){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},E9={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},_9={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(s,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},zg;(function(s){s.NORMAL="normal",s.STRICT="strict"})(zg||(zg={}));var P9={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"strict":return zg.STRICT;case"normal":default:return zg.NORMAL}}},I9={name:"line-height",initialValue:"normal",prefix:!1,type:4},cj=function(s,t){return $r(s)&&s.value==="normal"?1.2*t:s.type===17?t*s.number:ea(s)?es(s,t):t},U9={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(s,t){return t.type===20&&t.value==="none"?null:Sy.parse(s,t)}},L9={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(s,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},Lb={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},vp=function(s){return{name:"margin-"+s,initialValue:"0",prefix:!1,type:4}},T9=vp("top"),D9=vp("right"),M9=vp("bottom"),R9=vp("left"),Q9={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(s,t){return t.filter($r).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},O9={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},wp=function(s){return{name:"padding-"+s,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},H9=wp("top"),q9=wp("right"),$9=wp("bottom"),W9=wp("left"),K9={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(s,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},z9={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(s,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},G9={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,t){return t.length===1&&Ub(t[0],"none")?[]:Qo(t).map(function(r){for(var a={color:wl.TRANSPARENT,offsetX:Ra,offsetY:Ra,blur:Ra},n=0,i=0;i<r.length;i++){var o=r[i];Ic(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:a.blur=o,n++):a.color=Ec.parse(s,o)}return a})}},V9={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},Y9={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(s,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=Z9[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},J9=function(s){var t=s.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},X9=function(s){var t=s.filter(function(d){return d.type===17}).map(function(d){return d.number}),r=t[0],a=t[1];t[2],t[3];var n=t[4],i=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var o=t[12],l=t[13];return t[14],t[15],t.length===16?[r,a,n,i,o,l]:null},Z9={matrix:J9,matrix3d:X9},dj={type:16,number:50,flags:Th},eM=[dj,dj],tM={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(s,t){var r=t.filter(ea);return r.length!==2?eM:[r[0],r[1]]}},rM={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(s,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},dh;(function(s){s.NORMAL="normal",s.BREAK_ALL="break-all",s.KEEP_ALL="keep-all"})(dh||(dh={}));var sM={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"break-all":return dh.BREAK_ALL;case"keep-all":return dh.KEEP_ALL;case"normal":default:return dh.NORMAL}}},aM={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(s,t){if(t.type===20)return{auto:!0,order:0};if(CA(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Q4={name:"time",parse:function(s,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},nM={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(s,t){return CA(t)?t.number:1}},iM={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},oM={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(s,t){return t.filter($r).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},lM={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(s,t){var r=[],a=[];return t.forEach(function(n){switch(n.type){case 20:case 0:r.push(n.value);break;case 17:r.push(n.number.toString());break;case 4:a.push(r.join(" ")),r.length=0;break}}),r.length&&a.push(r.join(" ")),a.map(function(n){return n.indexOf(" ")===-1?n:"'"+n+"'"})}},cM={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},dM={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(s,t){if(CA(t))return t.number;if($r(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},uM={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(s,t){return t.filter($r).map(function(r){return r.value})}},AM={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(s,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ua=function(s,t){return(s&t)!==0},mM={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(s,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},hM={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(s,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var a=[],n=t.filter(j4),i=0;i<n.length;i++){var o=n[i],l=n[i+1];if(o.type===20){var d=l&&CA(l)?l.number:1;a.push({counter:o.value,increment:d})}}return a}},fM={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(s,t){if(t.length===0)return[];for(var r=[],a=t.filter(j4),n=0;n<a.length;n++){var i=a[n],o=a[n+1];if($r(i)&&i.value!=="none"){var l=o&&CA(o)?o.number:0;r.push({counter:i.value,reset:l})}}return r}},gM={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(s,t){return t.filter(Dh).map(function(r){return Q4.parse(s,r)})}},pM={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(s,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var a=[],n=t.filter(q7);if(n.length%2!==0)return null;for(var i=0;i<n.length;i+=2){var o=n[i].value,l=n[i+1].value;a.push({open:o,close:l})}return a}},uj=function(s,t,r){if(!s)return"";var a=s[Math.min(t,s.length-1)];return a?r?a.open:a.close:""},xM={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(s,t){return t.length===1&&Ub(t[0],"none")?[]:Qo(t).map(function(r){for(var a={color:255,offsetX:Ra,offsetY:Ra,blur:Ra,spread:Ra,inset:!1},n=0,i=0;i<r.length;i++){var o=r[i];Ub(o,"inset")?a.inset=!0:Ic(o)?(n===0?a.offsetX=o:n===1?a.offsetY=o:n===2?a.blur=o:a.spread=o,n++):a.color=Ec.parse(s,o)}return a})}},bM={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(s,t){var r=[0,1,2],a=[];return t.filter($r).forEach(function(n){switch(n.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),r.forEach(function(n){a.indexOf(n)===-1&&a.push(n)}),a}},yM={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},vM={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(s,t){return Dh(t)?t.number:0}},wM=(function(){function s(t,r){var a,n;this.animationDuration=Ct(t,gM,r.animationDuration),this.backgroundClip=Ct(t,K7,r.backgroundClip),this.backgroundColor=Ct(t,z7,r.backgroundColor),this.backgroundImage=Ct(t,s9,r.backgroundImage),this.backgroundOrigin=Ct(t,a9,r.backgroundOrigin),this.backgroundPosition=Ct(t,n9,r.backgroundPosition),this.backgroundRepeat=Ct(t,i9,r.backgroundRepeat),this.backgroundSize=Ct(t,l9,r.backgroundSize),this.borderTopColor=Ct(t,d9,r.borderTopColor),this.borderRightColor=Ct(t,u9,r.borderRightColor),this.borderBottomColor=Ct(t,A9,r.borderBottomColor),this.borderLeftColor=Ct(t,m9,r.borderLeftColor),this.borderTopLeftRadius=Ct(t,h9,r.borderTopLeftRadius),this.borderTopRightRadius=Ct(t,f9,r.borderTopRightRadius),this.borderBottomRightRadius=Ct(t,g9,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ct(t,p9,r.borderBottomLeftRadius),this.borderTopStyle=Ct(t,x9,r.borderTopStyle),this.borderRightStyle=Ct(t,b9,r.borderRightStyle),this.borderBottomStyle=Ct(t,y9,r.borderBottomStyle),this.borderLeftStyle=Ct(t,v9,r.borderLeftStyle),this.borderTopWidth=Ct(t,w9,r.borderTopWidth),this.borderRightWidth=Ct(t,j9,r.borderRightWidth),this.borderBottomWidth=Ct(t,N9,r.borderBottomWidth),this.borderLeftWidth=Ct(t,C9,r.borderLeftWidth),this.boxShadow=Ct(t,xM,r.boxShadow),this.color=Ct(t,S9,r.color),this.direction=Ct(t,B9,r.direction),this.display=Ct(t,k9,r.display),this.float=Ct(t,E9,r.cssFloat),this.fontFamily=Ct(t,lM,r.fontFamily),this.fontSize=Ct(t,cM,r.fontSize),this.fontStyle=Ct(t,AM,r.fontStyle),this.fontVariant=Ct(t,uM,r.fontVariant),this.fontWeight=Ct(t,dM,r.fontWeight),this.letterSpacing=Ct(t,_9,r.letterSpacing),this.lineBreak=Ct(t,P9,r.lineBreak),this.lineHeight=Ct(t,I9,r.lineHeight),this.listStyleImage=Ct(t,U9,r.listStyleImage),this.listStylePosition=Ct(t,L9,r.listStylePosition),this.listStyleType=Ct(t,Lb,r.listStyleType),this.marginTop=Ct(t,T9,r.marginTop),this.marginRight=Ct(t,D9,r.marginRight),this.marginBottom=Ct(t,M9,r.marginBottom),this.marginLeft=Ct(t,R9,r.marginLeft),this.opacity=Ct(t,nM,r.opacity);var i=Ct(t,Q9,r.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=Ct(t,O9,r.overflowWrap),this.paddingTop=Ct(t,H9,r.paddingTop),this.paddingRight=Ct(t,q9,r.paddingRight),this.paddingBottom=Ct(t,$9,r.paddingBottom),this.paddingLeft=Ct(t,W9,r.paddingLeft),this.paintOrder=Ct(t,bM,r.paintOrder),this.position=Ct(t,z9,r.position),this.textAlign=Ct(t,K9,r.textAlign),this.textDecorationColor=Ct(t,iM,(a=r.textDecorationColor)!==null&&a!==void 0?a:r.color),this.textDecorationLine=Ct(t,oM,(n=r.textDecorationLine)!==null&&n!==void 0?n:r.textDecoration),this.textShadow=Ct(t,G9,r.textShadow),this.textTransform=Ct(t,V9,r.textTransform),this.transform=Ct(t,Y9,r.transform),this.transformOrigin=Ct(t,tM,r.transformOrigin),this.visibility=Ct(t,rM,r.visibility),this.webkitTextStrokeColor=Ct(t,yM,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ct(t,vM,r.webkitTextStrokeWidth),this.wordBreak=Ct(t,sM,r.wordBreak),this.zIndex=Ct(t,aM,r.zIndex)}return s.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},s.prototype.isTransparent=function(){return _c(this.backgroundColor)},s.prototype.isTransformed=function(){return this.transform!==null},s.prototype.isPositioned=function(){return this.position!==0},s.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},s.prototype.isFloating=function(){return this.float!==0},s.prototype.isInlineLevel=function(){return ua(this.display,4)||ua(this.display,33554432)||ua(this.display,268435456)||ua(this.display,536870912)||ua(this.display,67108864)||ua(this.display,134217728)},s})(),jM=(function(){function s(t,r){this.content=Ct(t,mM,r.content),this.quotes=Ct(t,pM,r.quotes)}return s})(),Aj=(function(){function s(t,r){this.counterIncrement=Ct(t,hM,r.counterIncrement),this.counterReset=Ct(t,fM,r.counterReset)}return s})(),Ct=function(s,t,r){var a=new v4,n=r!==null&&typeof r<"u"?r.toString():t.initialValue;a.write(n);var i=new w4(a.read());switch(t.type){case 2:var o=i.parseComponentValue();return t.parse(s,$r(o)?o.value:t.initialValue);case 0:return t.parse(s,i.parseComponentValue());case 1:return t.parse(s,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(t.format){case"angle":return fp.parse(s,i.parseComponentValue());case"color":return Ec.parse(s,i.parseComponentValue());case"image":return Sy.parse(s,i.parseComponentValue());case"length":var l=i.parseComponentValue();return Ic(l)?l:Ra;case"length-percentage":var d=i.parseComponentValue();return ea(d)?d:Ra;case"time":return Q4.parse(s,i.parseComponentValue())}break}},NM="data-html2canvas-debug",CM=function(s){var t=s.getAttribute(NM);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},Tb=function(s,t){var r=CM(s);return r===1||t===r},Oo=(function(){function s(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,Tb(r,3))debugger;this.styles=new wM(t,window.getComputedStyle(r,null)),Rb(r)&&(this.styles.animationDuration.some(function(a){return a>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=mp(this.context,r),Tb(r,4)&&(this.flags|=16)}return s})(),SM="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",mj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ym=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mg=0;mg<mj.length;mg++)Ym[mj.charCodeAt(mg)]=mg;var BM=function(s){var t=s.length*.75,r=s.length,a,n=0,i,o,l,d;s[s.length-1]==="="&&(t--,s[s.length-2]==="="&&t--);var u=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),m=Array.isArray(u)?u:new Uint8Array(u);for(a=0;a<r;a+=4)i=Ym[s.charCodeAt(a)],o=Ym[s.charCodeAt(a+1)],l=Ym[s.charCodeAt(a+2)],d=Ym[s.charCodeAt(a+3)],m[n++]=i<<2|o>>4,m[n++]=(o&15)<<4|l>>2,m[n++]=(l&3)<<6|d&63;return u},kM=function(s){for(var t=s.length,r=[],a=0;a<t;a+=2)r.push(s[a+1]<<8|s[a]);return r},FM=function(s){for(var t=s.length,r=[],a=0;a<t;a+=4)r.push(s[a+3]<<24|s[a+2]<<16|s[a+1]<<8|s[a]);return r},Ud=5,By=11,dx=2,EM=By-Ud,O4=65536>>Ud,_M=1<<Ud,ux=_M-1,PM=1024>>Ud,IM=O4+PM,UM=IM,LM=32,TM=UM+LM,DM=65536>>By,MM=1<<EM,RM=MM-1,hj=function(s,t,r){return s.slice?s.slice(t,r):new Uint16Array(Array.prototype.slice.call(s,t,r))},QM=function(s,t,r){return s.slice?s.slice(t,r):new Uint32Array(Array.prototype.slice.call(s,t,r))},OM=function(s,t){var r=BM(s),a=Array.isArray(r)?FM(r):new Uint32Array(r),n=Array.isArray(r)?kM(r):new Uint16Array(r),i=24,o=hj(n,i/2,a[4]/2),l=a[5]===2?hj(n,(i+a[4])/2):QM(a,Math.ceil((i+a[4])/4));return new HM(a[0],a[1],a[2],a[3],o,l)},HM=(function(){function s(t,r,a,n,i,o){this.initialValue=t,this.errorValue=r,this.highStart=a,this.highValueIndex=n,this.index=i,this.data=o}return s.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Ud],r=(r<<dx)+(t&ux),this.data[r];if(t<=65535)return r=this.index[O4+(t-55296>>Ud)],r=(r<<dx)+(t&ux),this.data[r];if(t<this.highStart)return r=TM-DM+(t>>By),r=this.index[r],r+=t>>Ud&RM,r=this.index[r],r=(r<<dx)+(t&ux),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s})(),fj="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qM=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var hg=0;hg<fj.length;hg++)qM[fj.charCodeAt(hg)]=hg;var $M=1,Ax=2,mx=3,gj=4,pj=5,WM=7,xj=8,hx=9,fx=10,bj=11,yj=12,vj=13,wj=14,gx=15,KM=function(s){for(var t=[],r=0,a=s.length;r<a;){var n=s.charCodeAt(r++);if(n>=55296&&n<=56319&&r<a){var i=s.charCodeAt(r++);(i&64512)===56320?t.push(((n&1023)<<10)+(i&1023)+65536):(t.push(n),r--)}else t.push(n)}return t},zM=function(){for(var s=[],t=0;t<arguments.length;t++)s[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,s);var r=s.length;if(!r)return"";for(var a=[],n=-1,i="";++n<r;){var o=s[n];o<=65535?a.push(o):(o-=65536,a.push((o>>10)+55296,o%1024+56320)),(n+1===r||a.length>16384)&&(i+=String.fromCharCode.apply(String,a),a.length=0)}return i},GM=OM(SM),Ni="",px="",VM=function(s){return GM.get(s)},YM=function(s,t,r){var a=r-2,n=t[a],i=t[r-1],o=t[r];if(i===Ax&&o===mx)return Ni;if(i===Ax||i===mx||i===gj||o===Ax||o===mx||o===gj)return px;if(i===xj&&[xj,hx,bj,yj].indexOf(o)!==-1||(i===bj||i===hx)&&(o===hx||o===fx)||(i===yj||i===fx)&&o===fx||o===vj||o===pj||o===WM||i===$M)return Ni;if(i===vj&&o===wj){for(;n===pj;)n=t[--a];if(n===wj)return Ni}if(i===gx&&o===gx){for(var l=0;n===gx;)l++,n=t[--a];if(l%2===0)return Ni}return px},JM=function(s){var t=KM(s),r=t.length,a=0,n=0,i=t.map(VM);return{next:function(){if(a>=r)return{done:!0,value:null};for(var o=Ni;a<r&&(o=YM(t,i,++a))===Ni;);if(o!==Ni||a===r){var l=zM.apply(null,t.slice(n,a));return n=a,{value:l,done:!1}}return{done:!0,value:null}}}},XM=function(s){for(var t=JM(s),r=[],a;!(a=t.next()).done;)a.value&&r.push(a.value.slice());return r},ZM=function(s){var t=123;if(s.createRange){var r=s.createRange();if(r.getBoundingClientRect){var a=s.createElement("boundtest");a.style.height=t+"px",a.style.display="block",s.body.appendChild(a),r.selectNode(a);var n=r.getBoundingClientRect(),i=Math.round(n.height);if(s.body.removeChild(a),i===t)return!0}}return!1},eR=function(s){var t=s.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",s.body.appendChild(t);var r=s.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=t.firstChild,n=hp(a.data).map(function(d){return Qs(d)}),i=0,o={},l=n.every(function(d,u){r.setStart(a,i),r.setEnd(a,i+d.length);var m=r.getBoundingClientRect();i+=d.length;var h=m.x>o.x||m.y>o.y;return o=m,u===0?!0:h});return s.body.removeChild(t),l},tR=function(){return typeof new Image().crossOrigin<"u"},rR=function(){return typeof new XMLHttpRequest().responseType=="string"},sR=function(s){var t=new Image,r=s.createElement("canvas"),a=r.getContext("2d");if(!a)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},jj=function(s){return s[0]===0&&s[1]===255&&s[2]===0&&s[3]===255},aR=function(s){var t=s.createElement("canvas"),r=100;t.width=r,t.height=r;var a=t.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,r,r);var n=new Image,i=t.toDataURL();n.src=i;var o=Db(r,r,0,0,n);return a.fillStyle="red",a.fillRect(0,0,r,r),Nj(o).then(function(l){a.drawImage(l,0,0);var d=a.getImageData(0,0,r,r).data;a.fillStyle="red",a.fillRect(0,0,r,r);var u=s.createElement("div");return u.style.backgroundImage="url("+i+")",u.style.height=r+"px",jj(d)?Nj(Db(r,r,0,0,u)):Promise.reject(!1)}).then(function(l){return a.drawImage(l,0,0),jj(a.getImageData(0,0,r,r).data)}).catch(function(){return!1})},Db=function(s,t,r,a,n){var i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),l=document.createElementNS(i,"foreignObject");return o.setAttributeNS(null,"width",s.toString()),o.setAttributeNS(null,"height",t.toString()),l.setAttributeNS(null,"width","100%"),l.setAttributeNS(null,"height","100%"),l.setAttributeNS(null,"x",r.toString()),l.setAttributeNS(null,"y",a.toString()),l.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(l),l.appendChild(n),o},Nj=function(s){return new Promise(function(t,r){var a=new Image;a.onload=function(){return t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},Da={get SUPPORT_RANGE_BOUNDS(){var s=ZM(document);return Object.defineProperty(Da,"SUPPORT_RANGE_BOUNDS",{value:s}),s},get SUPPORT_WORD_BREAKING(){var s=Da.SUPPORT_RANGE_BOUNDS&&eR(document);return Object.defineProperty(Da,"SUPPORT_WORD_BREAKING",{value:s}),s},get SUPPORT_SVG_DRAWING(){var s=sR(document);return Object.defineProperty(Da,"SUPPORT_SVG_DRAWING",{value:s}),s},get SUPPORT_FOREIGNOBJECT_DRAWING(){var s=typeof Array.from=="function"&&typeof window.fetch=="function"?aR(document):Promise.resolve(!1);return Object.defineProperty(Da,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:s}),s},get SUPPORT_CORS_IMAGES(){var s=tR();return Object.defineProperty(Da,"SUPPORT_CORS_IMAGES",{value:s}),s},get SUPPORT_RESPONSE_TYPE(){var s=rR();return Object.defineProperty(Da,"SUPPORT_RESPONSE_TYPE",{value:s}),s},get SUPPORT_CORS_XHR(){var s="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Da,"SUPPORT_CORS_XHR",{value:s}),s},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var s=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Da,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:s}),s}},uh=(function(){function s(t,r){this.text=t,this.bounds=r}return s})(),nR=function(s,t,r,a){var n=lR(t,r),i=[],o=0;return n.forEach(function(l){if(r.textDecorationLine.length||l.trim().length>0)if(Da.SUPPORT_RANGE_BOUNDS){var d=Cj(a,o,l.length).getClientRects();if(d.length>1){var u=ky(l),m=0;u.forEach(function(x){i.push(new uh(x,Nl.fromDOMRectList(s,Cj(a,m+o,x.length).getClientRects()))),m+=x.length})}else i.push(new uh(l,Nl.fromDOMRectList(s,d)))}else{var h=a.splitText(l.length);i.push(new uh(l,iR(s,a))),a=h}else Da.SUPPORT_RANGE_BOUNDS||(a=a.splitText(l.length));o+=l.length}),i},iR=function(s,t){var r=t.ownerDocument;if(r){var a=r.createElement("html2canvaswrapper");a.appendChild(t.cloneNode(!0));var n=t.parentNode;if(n){n.replaceChild(a,t);var i=mp(s,a);return a.firstChild&&n.replaceChild(a.firstChild,a),i}}return Nl.EMPTY},Cj=function(s,t,r){var a=s.ownerDocument;if(!a)throw new Error("Node has no owner document");var n=a.createRange();return n.setStart(s,t),n.setEnd(s,t+r),n},ky=function(s){if(Da.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(s)).map(function(r){return r.segment})}return XM(s)},oR=function(s,t){if(Da.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(s)).map(function(a){return a.segment})}return dR(s,t)},lR=function(s,t){return t.letterSpacing!==0?ky(s):oR(s,t)},cR=[32,160,4961,65792,65793,4153,4241],dR=function(s,t){for(var r=DD(s,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),a=[],n,i=function(){if(n.value){var o=n.value.slice(),l=hp(o),d="";l.forEach(function(u){cR.indexOf(u)===-1?d+=Qs(u):(d.length&&a.push(d),a.push(Qs(u)),d="")}),d.length&&a.push(d)}};!(n=r.next()).done;)i();return a},uR=(function(){function s(t,r,a){this.text=AR(r.data,a.textTransform),this.textBounds=nR(t,this.text,a,r)}return s})(),AR=function(s,t){switch(t){case 1:return s.toLowerCase();case 3:return s.replace(mR,hR);case 2:return s.toUpperCase();default:return s}},mR=/(^|\s|:|-|\(|\))([a-z])/g,hR=function(s,t,r){return s.length>0?t+r.toUpperCase():s},H4=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;return n.src=a.currentSrc||a.src,n.intrinsicWidth=a.naturalWidth,n.intrinsicHeight=a.naturalHeight,n.context.cache.addImage(n.src),n}return t})(Oo),q4=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;return n.canvas=a,n.intrinsicWidth=a.width,n.intrinsicHeight=a.height,n}return t})(Oo),$4=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this,i=new XMLSerializer,o=mp(r,a);return a.setAttribute("width",o.width+"px"),a.setAttribute("height",o.height+"px"),n.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(a)),n.intrinsicWidth=a.width.baseVal.value,n.intrinsicHeight=a.height.baseVal.value,n.context.cache.addImage(n.svg),n}return t})(Oo),W4=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;return n.value=a.value,n}return t})(Oo),Mb=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;return n.start=a.start,n.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,n}return t})(Oo),fR=[{type:15,flags:0,unit:"px",number:3}],gR=[{type:16,flags:0,number:50}],pR=function(s){return s.width>s.height?new Nl(s.left+(s.width-s.height)/2,s.top,s.height,s.height):s.width<s.height?new Nl(s.left,s.top+(s.height-s.width)/2,s.width,s.width):s},xR=function(s){var t=s.type===bR?new Array(s.value.length+1).join(""):s.value;return t.length===0?s.placeholder||"":t},Gg="checkbox",Vg="radio",bR="password",Sj=707406591,Fy=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;switch(n.type=a.type.toLowerCase(),n.checked=a.checked,n.value=xR(a),(n.type===Gg||n.type===Vg)&&(n.styles.backgroundColor=3739148031,n.styles.borderTopColor=n.styles.borderRightColor=n.styles.borderBottomColor=n.styles.borderLeftColor=2779096575,n.styles.borderTopWidth=n.styles.borderRightWidth=n.styles.borderBottomWidth=n.styles.borderLeftWidth=1,n.styles.borderTopStyle=n.styles.borderRightStyle=n.styles.borderBottomStyle=n.styles.borderLeftStyle=1,n.styles.backgroundClip=[0],n.styles.backgroundOrigin=[0],n.bounds=pR(n.bounds)),n.type){case Gg:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=fR;break;case Vg:n.styles.borderTopRightRadius=n.styles.borderTopLeftRadius=n.styles.borderBottomRightRadius=n.styles.borderBottomLeftRadius=gR;break}return n}return t})(Oo),K4=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this,i=a.options[a.selectedIndex||0];return n.value=i&&i.text||"",n}return t})(Oo),z4=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;return n.value=a.value,n}return t})(Oo),G4=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;n.src=a.src,n.width=parseInt(a.width,10)||0,n.height=parseInt(a.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){n.tree=Y4(r,a.contentWindow.document.documentElement);var i=a.contentWindow.document.documentElement?ch(r,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):wl.TRANSPARENT,o=a.contentWindow.document.body?ch(r,getComputedStyle(a.contentWindow.document.body).backgroundColor):wl.TRANSPARENT;n.backgroundColor=_c(i)?_c(o)?n.styles.backgroundColor:o:i}}catch{}return n}return t})(Oo),yR=["OL","UL","MENU"],Bg=function(s,t,r,a){for(var n=t.firstChild,i=void 0;n;n=i)if(i=n.nextSibling,J4(n)&&n.data.trim().length>0)r.textNodes.push(new uR(s,n,r.styles));else if(nA(n))if(tB(n)&&n.assignedNodes)n.assignedNodes().forEach(function(l){return Bg(s,l,r,a)});else{var o=V4(s,n);o.styles.isVisible()&&(vR(n,o,a)?o.flags|=4:wR(o.styles)&&(o.flags|=2),yR.indexOf(n.tagName)!==-1&&(o.flags|=8),r.elements.push(o),n.slot,n.shadowRoot?Bg(s,n.shadowRoot,o,a):!Yg(n)&&!X4(n)&&!Jg(n)&&Bg(s,n,o,a))}},V4=function(s,t){return Qb(t)?new H4(s,t):Z4(t)?new q4(s,t):X4(t)?new $4(s,t):jR(t)?new W4(s,t):NR(t)?new Mb(s,t):CR(t)?new Fy(s,t):Jg(t)?new K4(s,t):Yg(t)?new z4(s,t):eB(t)?new G4(s,t):new Oo(s,t)},Y4=function(s,t){var r=V4(s,t);return r.flags|=4,Bg(s,t,r,r),r},vR=function(s,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||Ey(s)&&r.styles.isTransparent()},wR=function(s){return s.isPositioned()||s.isFloating()},J4=function(s){return s.nodeType===Node.TEXT_NODE},nA=function(s){return s.nodeType===Node.ELEMENT_NODE},Rb=function(s){return nA(s)&&typeof s.style<"u"&&!kg(s)},kg=function(s){return typeof s.className=="object"},jR=function(s){return s.tagName==="LI"},NR=function(s){return s.tagName==="OL"},CR=function(s){return s.tagName==="INPUT"},SR=function(s){return s.tagName==="HTML"},X4=function(s){return s.tagName==="svg"},Ey=function(s){return s.tagName==="BODY"},Z4=function(s){return s.tagName==="CANVAS"},Bj=function(s){return s.tagName==="VIDEO"},Qb=function(s){return s.tagName==="IMG"},eB=function(s){return s.tagName==="IFRAME"},kj=function(s){return s.tagName==="STYLE"},BR=function(s){return s.tagName==="SCRIPT"},Yg=function(s){return s.tagName==="TEXTAREA"},Jg=function(s){return s.tagName==="SELECT"},tB=function(s){return s.tagName==="SLOT"},Fj=function(s){return s.tagName.indexOf("-")>0},kR=(function(){function s(){this.counters={}}return s.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},s.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},s.prototype.pop=function(t){var r=this;t.forEach(function(a){return r.counters[a].pop()})},s.prototype.parse=function(t){var r=this,a=t.counterIncrement,n=t.counterReset,i=!0;a!==null&&a.forEach(function(l){var d=r.counters[l.counter];d&&l.increment!==0&&(i=!1,d.length||d.push(1),d[Math.max(0,d.length-1)]+=l.increment)});var o=[];return i&&n.forEach(function(l){var d=r.counters[l.counter];o.push(l.counter),d||(d=r.counters[l.counter]=[]),d.push(l.reset)}),o},s})(),Ej={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},_j={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},FR={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},ER={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},zu=function(s,t,r,a,n,i){return s<t||s>r?Fh(s,n,i.length>0):a.integers.reduce(function(o,l,d){for(;s>=l;)s-=l,o+=a.values[d];return o},"")+i},rB=function(s,t,r,a){var n="";do r||s--,n=a(s)+n,s/=t;while(s*t>=t);return n},Rs=function(s,t,r,a,n){var i=r-t+1;return(s<0?"-":"")+(rB(Math.abs(s),i,a,function(o){return Qs(Math.floor(o%i)+t)})+n)},gd=function(s,t,r){r===void 0&&(r=". ");var a=t.length;return rB(Math.abs(s),a,!1,function(n){return t[Math.floor(n%a)]})+r},tA=1,dc=2,uc=4,Jm=8,gl=function(s,t,r,a,n,i){if(s<-9999||s>9999)return Fh(s,4,n.length>0);var o=Math.abs(s),l=n;if(o===0)return t[0]+l;for(var d=0;o>0&&d<=4;d++){var u=o%10;u===0&&ua(i,tA)&&l!==""?l=t[u]+l:u>1||u===1&&d===0||u===1&&d===1&&ua(i,dc)||u===1&&d===1&&ua(i,uc)&&s>100||u===1&&d>1&&ua(i,Jm)?l=t[u]+(d>0?r[d-1]:"")+l:u===1&&d>0&&(l=r[d-1]+l),o=Math.floor(o/10)}return(s<0?a:"")+l},Pj="",Ij="",Uj="",xx="",Fh=function(s,t,r){var a=r?". ":"",n=r?"":"",i=r?", ":"",o=r?" ":"";switch(t){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var l=Rs(s,48,57,!0,a);return l.length<4?"0"+l:l;case 4:return gd(s,"",n);case 6:return zu(s,1,3999,Ej,3,a).toLowerCase();case 7:return zu(s,1,3999,Ej,3,a);case 8:return Rs(s,945,969,!1,a);case 9:return Rs(s,97,122,!1,a);case 10:return Rs(s,65,90,!1,a);case 11:return Rs(s,1632,1641,!0,a);case 12:case 49:return zu(s,1,9999,_j,3,a);case 35:return zu(s,1,9999,_j,3,a).toLowerCase();case 13:return Rs(s,2534,2543,!0,a);case 14:case 30:return Rs(s,6112,6121,!0,a);case 15:return gd(s,"",n);case 16:return gd(s,"",n);case 17:case 48:return gl(s,"",Pj,"",n,dc|uc|Jm);case 47:return gl(s,"",Ij,"",n,tA|dc|uc|Jm);case 42:return gl(s,"",Pj,"",n,dc|uc|Jm);case 41:return gl(s,"",Ij,"",n,tA|dc|uc|Jm);case 26:return gl(s,"","",Uj,n,0);case 25:return gl(s,"","",Uj,n,tA|dc|uc);case 31:return gl(s,"","",xx,i,tA|dc|uc);case 33:return gl(s,"","",xx,i,0);case 32:return gl(s,"","",xx,i,tA|dc|uc);case 18:return Rs(s,2406,2415,!0,a);case 20:return zu(s,1,19999,ER,3,a);case 21:return Rs(s,2790,2799,!0,a);case 22:return Rs(s,2662,2671,!0,a);case 22:return zu(s,1,10999,FR,3,a);case 23:return gd(s,"");case 24:return gd(s,"");case 27:return Rs(s,3302,3311,!0,a);case 28:return gd(s,"",n);case 29:return gd(s,"",n);case 34:return Rs(s,3792,3801,!0,a);case 37:return Rs(s,6160,6169,!0,a);case 38:return Rs(s,4160,4169,!0,a);case 39:return Rs(s,2918,2927,!0,a);case 40:return Rs(s,1776,1785,!0,a);case 43:return Rs(s,3046,3055,!0,a);case 44:return Rs(s,3174,3183,!0,a);case 45:return Rs(s,3664,3673,!0,a);case 46:return Rs(s,3872,3881,!0,a);case 3:default:return Rs(s,48,57,!0,a)}},sB="data-html2canvas-ignore",Lj=(function(){function s(t,r,a){if(this.context=t,this.options=a,this.scrolledElements=[],this.referenceElement=r,this.counters=new kR,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return s.prototype.toIFrame=function(t,r){var a=this,n=_R(t,r);if(!n.contentWindow)return Promise.reject("Unable to find iframe window");var i=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,l=n.contentWindow,d=l.document,u=UR(n).then(function(){return vn(a,void 0,void 0,function(){var m,h;return ln(this,function(x){switch(x.label){case 0:return this.scrolledElements.forEach(MR),l&&(l.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(l.scrollY!==r.top||l.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(l.scrollX-r.left,l.scrollY-r.top,0,0))),m=this.options.onclone,h=this.clonedReferenceElement,typeof h>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:d.fonts&&d.fonts.ready?[4,d.fonts.ready]:[3,2];case 1:x.sent(),x.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,IR(d)]:[3,4];case 3:x.sent(),x.label=4;case 4:return typeof m=="function"?[2,Promise.resolve().then(function(){return m(d,h)}).then(function(){return n})]:[2,n]}})})});return d.open(),d.write(TR(document.doctype)+"<html></html>"),DR(this.referenceElement.ownerDocument,i,o),d.replaceChild(d.adoptNode(this.documentElement),d.documentElement),d.close(),u},s.prototype.createElementClone=function(t){if(Tb(t,2))debugger;if(Z4(t))return this.createCanvasClone(t);if(Bj(t))return this.createVideoClone(t);if(kj(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return Qb(r)&&(Qb(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),Fj(r)?this.createCustomElementClone(r):r},s.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return bx(t.style,r),r},s.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var a=[].slice.call(r.cssRules,0).reduce(function(i,o){return o&&typeof o.cssText=="string"?i+o.cssText:i},""),n=t.cloneNode(!1);return n.textContent=a,n}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return t.cloneNode(!1)},s.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var a=t.ownerDocument.createElement("img");try{return a.src=t.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var i=t.getContext("2d"),o=n.getContext("2d");if(o)if(!this.options.allowTaint&&i)o.putImageData(i.getImageData(0,0,t.width,t.height),0,0);else{var l=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(l){var d=l.getContextAttributes();d?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}o.drawImage(t,0,0)}return n}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return n},s.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var a=r.getContext("2d");try{return a&&(a.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||a.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var n=t.ownerDocument.createElement("canvas");return n.width=t.offsetWidth,n.height=t.offsetHeight,n},s.prototype.appendChildNode=function(t,r,a){(!nA(r)||!BR(r)&&!r.hasAttribute(sB)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!nA(r)||!kj(r))&&t.appendChild(this.cloneNode(r,a))},s.prototype.cloneChildNodes=function(t,r,a){for(var n=this,i=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;i;i=i.nextSibling)if(nA(i)&&tB(i)&&typeof i.assignedNodes=="function"){var o=i.assignedNodes();o.length&&o.forEach(function(l){return n.appendChildNode(r,l,a)})}else this.appendChildNode(r,i,a)},s.prototype.cloneNode=function(t,r){if(J4(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var a=t.ownerDocument.defaultView;if(a&&nA(t)&&(Rb(t)||kg(t))){var n=this.createElementClone(t);n.style.transitionProperty="none";var i=a.getComputedStyle(t),o=a.getComputedStyle(t,":before"),l=a.getComputedStyle(t,":after");this.referenceElement===t&&Rb(n)&&(this.clonedReferenceElement=n),Ey(n)&&OR(n);var d=this.counters.parse(new Aj(this.context,i)),u=this.resolvePseudoContent(t,n,o,Ah.BEFORE);Fj(t)&&(r=!0),Bj(t)||this.cloneChildNodes(t,n,r),u&&n.insertBefore(u,n.firstChild);var m=this.resolvePseudoContent(t,n,l,Ah.AFTER);return m&&n.appendChild(m),this.counters.pop(d),(i&&(this.options.copyStyles||kg(t))&&!eB(t)||r)&&bx(i,n),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(Yg(t)||Jg(t))&&(Yg(n)||Jg(n))&&(n.value=t.value),n}return t.cloneNode(!1)},s.prototype.resolvePseudoContent=function(t,r,a,n){var i=this;if(a){var o=a.content,l=r.ownerDocument;if(!(!l||!o||o==="none"||o==="-moz-alt-content"||a.display==="none")){this.counters.parse(new Aj(this.context,a));var d=new jM(this.context,a),u=l.createElement("html2canvaspseudoelement");bx(a,u),d.content.forEach(function(h){if(h.type===0)u.appendChild(l.createTextNode(h.value));else if(h.type===22){var x=l.createElement("img");x.src=h.value,x.style.opacity="1",u.appendChild(x)}else if(h.type===18){if(h.name==="attr"){var f=h.values.filter($r);f.length&&u.appendChild(l.createTextNode(t.getAttribute(f[0].value)||""))}else if(h.name==="counter"){var b=h.values.filter(gA),v=b[0],j=b[1];if(v&&$r(v)){var S=i.counters.getCounterValue(v.value),C=j&&$r(j)?Lb.parse(i.context,j.value):3;u.appendChild(l.createTextNode(Fh(S,C,!1)))}}else if(h.name==="counters"){var B=h.values.filter(gA),v=B[0],F=B[1],j=B[2];if(v&&$r(v)){var Q=i.counters.getCounterValues(v.value),q=j&&$r(j)?Lb.parse(i.context,j.value):3,P=F&&F.type===0?F.value:"",D=Q.map(function(k){return Fh(k,q,!1)}).join(P);u.appendChild(l.createTextNode(D))}}}else if(h.type===20)switch(h.value){case"open-quote":u.appendChild(l.createTextNode(uj(d.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(l.createTextNode(uj(d.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(l.createTextNode(h.value))}}),u.className=Ob+" "+Hb;var m=n===Ah.BEFORE?" "+Ob:" "+Hb;return kg(r)?r.className.baseValue+=m:r.className+=m,u}}},s.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},s})(),Ah;(function(s){s[s.BEFORE=0]="BEFORE",s[s.AFTER=1]="AFTER"})(Ah||(Ah={}));var _R=function(s,t){var r=s.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(sB,"true"),s.body.appendChild(r),r},PR=function(s){return new Promise(function(t){if(s.complete){t();return}if(!s.src){t();return}s.onload=t,s.onerror=t})},IR=function(s){return Promise.all([].slice.call(s.images,0).map(PR))},UR=function(s){return new Promise(function(t,r){var a=s.contentWindow;if(!a)return r("No window assigned for iframe");var n=a.document;a.onload=s.onload=function(){a.onload=s.onload=null;var i=setInterval(function(){n.body.childNodes.length>0&&n.readyState==="complete"&&(clearInterval(i),t(s))},50)}})},LR=["all","d","content"],bx=function(s,t){for(var r=s.length-1;r>=0;r--){var a=s.item(r);LR.indexOf(a)===-1&&t.style.setProperty(a,s.getPropertyValue(a))}return t},TR=function(s){var t="";return s&&(t+="<!DOCTYPE ",s.name&&(t+=s.name),s.internalSubset&&(t+=s.internalSubset),s.publicId&&(t+='"'+s.publicId+'"'),s.systemId&&(t+='"'+s.systemId+'"'),t+=">"),t},DR=function(s,t,r){s&&s.defaultView&&(t!==s.defaultView.pageXOffset||r!==s.defaultView.pageYOffset)&&s.defaultView.scrollTo(t,r)},MR=function(s){var t=s[0],r=s[1],a=s[2];t.scrollLeft=r,t.scrollTop=a},RR=":before",QR=":after",Ob="___html2canvas___pseudoelement_before",Hb="___html2canvas___pseudoelement_after",Tj=`{
    content: "" !important;
    display: none !important;
}`,OR=function(s){HR(s,"."+Ob+RR+Tj+`
         .`+Hb+QR+Tj)},HR=function(s,t){var r=s.ownerDocument;if(r){var a=r.createElement("style");a.textContent=t,s.appendChild(a)}},aB=(function(){function s(){}return s.getOrigin=function(t){var r=s._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},s.isSameOrigin=function(t){return s.getOrigin(t)===s._origin},s.setContext=function(t){s._link=t.document.createElement("a"),s._origin=s.getOrigin(t.location.href)},s._origin="about:blank",s})(),qR=(function(){function s(t,r){this.context=t,this._options=r,this._cache={}}return s.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(vx(t)||zR(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},s.prototype.match=function(t){return this._cache[t]},s.prototype.loadImage=function(t){return vn(this,void 0,void 0,function(){var r,a,n,i,o=this;return ln(this,function(l){switch(l.label){case 0:return r=aB.isSameOrigin(t),a=!yx(t)&&this._options.useCORS===!0&&Da.SUPPORT_CORS_IMAGES&&!r,n=!yx(t)&&!r&&!vx(t)&&typeof this._options.proxy=="string"&&Da.SUPPORT_CORS_XHR&&!a,!r&&this._options.allowTaint===!1&&!yx(t)&&!vx(t)&&!n&&!a?[2]:(i=t,n?[4,this.proxy(i)]:[3,2]);case 1:i=l.sent(),l.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(d,u){var m=new Image;m.onload=function(){return d(m)},m.onerror=u,(GR(i)||a)&&(m.crossOrigin="anonymous"),m.src=i,m.complete===!0&&setTimeout(function(){return d(m)},500),o._options.imageTimeout>0&&setTimeout(function(){return u("Timed out ("+o._options.imageTimeout+"ms) loading image")},o._options.imageTimeout)})];case 3:return[2,l.sent()]}})})},s.prototype.has=function(t){return typeof this._cache[t]<"u"},s.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},s.prototype.proxy=function(t){var r=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var n=t.substring(0,256);return new Promise(function(i,o){var l=Da.SUPPORT_RESPONSE_TYPE?"blob":"text",d=new XMLHttpRequest;d.onload=function(){if(d.status===200)if(l==="text")i(d.response);else{var h=new FileReader;h.addEventListener("load",function(){return i(h.result)},!1),h.addEventListener("error",function(x){return o(x)},!1),h.readAsDataURL(d.response)}else o("Failed to proxy resource "+n+" with status code "+d.status)},d.onerror=o;var u=a.indexOf("?")>-1?"&":"?";if(d.open("GET",""+a+u+"url="+encodeURIComponent(t)+"&responseType="+l),l!=="text"&&d instanceof XMLHttpRequest&&(d.responseType=l),r._options.imageTimeout){var m=r._options.imageTimeout;d.timeout=m,d.ontimeout=function(){return o("Timed out ("+m+"ms) proxying "+n)}}d.send()})},s})(),$R=/^data:image\/svg\+xml/i,WR=/^data:image\/.*;base64,/i,KR=/^data:image\/.*/i,zR=function(s){return Da.SUPPORT_SVG_DRAWING||!VR(s)},yx=function(s){return KR.test(s)},GR=function(s){return WR.test(s)},vx=function(s){return s.substr(0,4)==="blob"},VR=function(s){return s.substr(-3).toLowerCase()==="svg"||$R.test(s)},wt=(function(){function s(t,r){this.type=0,this.x=t,this.y=r}return s.prototype.add=function(t,r){return new s(this.x+t,this.y+r)},s})(),Gu=function(s,t,r){return new wt(s.x+(t.x-s.x)*r,s.y+(t.y-s.y)*r)},fg=(function(){function s(t,r,a,n){this.type=1,this.start=t,this.startControl=r,this.endControl=a,this.end=n}return s.prototype.subdivide=function(t,r){var a=Gu(this.start,this.startControl,t),n=Gu(this.startControl,this.endControl,t),i=Gu(this.endControl,this.end,t),o=Gu(a,n,t),l=Gu(n,i,t),d=Gu(o,l,t);return r?new s(this.start,a,o,d):new s(d,l,i,this.end)},s.prototype.add=function(t,r){return new s(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},s.prototype.reverse=function(){return new s(this.end,this.endControl,this.startControl,this.start)},s})(),Si=function(s){return s.type===1},YR=(function(){function s(t){var r=t.styles,a=t.bounds,n=Vm(r.borderTopLeftRadius,a.width,a.height),i=n[0],o=n[1],l=Vm(r.borderTopRightRadius,a.width,a.height),d=l[0],u=l[1],m=Vm(r.borderBottomRightRadius,a.width,a.height),h=m[0],x=m[1],f=Vm(r.borderBottomLeftRadius,a.width,a.height),b=f[0],v=f[1],j=[];j.push((i+d)/a.width),j.push((b+h)/a.width),j.push((o+v)/a.height),j.push((u+x)/a.height);var S=Math.max.apply(Math,j);S>1&&(i/=S,o/=S,d/=S,u/=S,h/=S,x/=S,b/=S,v/=S);var C=a.width-d,B=a.height-x,F=a.width-h,Q=a.height-v,q=r.borderTopWidth,P=r.borderRightWidth,D=r.borderBottomWidth,_=r.borderLeftWidth,$=es(r.paddingTop,t.bounds.width),k=es(r.paddingRight,t.bounds.width),L=es(r.paddingBottom,t.bounds.width),E=es(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||o>0?As(a.left+_/3,a.top+q/3,i-_/3,o-q/3,Pr.TOP_LEFT):new wt(a.left+_/3,a.top+q/3),this.topRightBorderDoubleOuterBox=i>0||o>0?As(a.left+C,a.top+q/3,d-P/3,u-q/3,Pr.TOP_RIGHT):new wt(a.left+a.width-P/3,a.top+q/3),this.bottomRightBorderDoubleOuterBox=h>0||x>0?As(a.left+F,a.top+B,h-P/3,x-D/3,Pr.BOTTOM_RIGHT):new wt(a.left+a.width-P/3,a.top+a.height-D/3),this.bottomLeftBorderDoubleOuterBox=b>0||v>0?As(a.left+_/3,a.top+Q,b-_/3,v-D/3,Pr.BOTTOM_LEFT):new wt(a.left+_/3,a.top+a.height-D/3),this.topLeftBorderDoubleInnerBox=i>0||o>0?As(a.left+_*2/3,a.top+q*2/3,i-_*2/3,o-q*2/3,Pr.TOP_LEFT):new wt(a.left+_*2/3,a.top+q*2/3),this.topRightBorderDoubleInnerBox=i>0||o>0?As(a.left+C,a.top+q*2/3,d-P*2/3,u-q*2/3,Pr.TOP_RIGHT):new wt(a.left+a.width-P*2/3,a.top+q*2/3),this.bottomRightBorderDoubleInnerBox=h>0||x>0?As(a.left+F,a.top+B,h-P*2/3,x-D*2/3,Pr.BOTTOM_RIGHT):new wt(a.left+a.width-P*2/3,a.top+a.height-D*2/3),this.bottomLeftBorderDoubleInnerBox=b>0||v>0?As(a.left+_*2/3,a.top+Q,b-_*2/3,v-D*2/3,Pr.BOTTOM_LEFT):new wt(a.left+_*2/3,a.top+a.height-D*2/3),this.topLeftBorderStroke=i>0||o>0?As(a.left+_/2,a.top+q/2,i-_/2,o-q/2,Pr.TOP_LEFT):new wt(a.left+_/2,a.top+q/2),this.topRightBorderStroke=i>0||o>0?As(a.left+C,a.top+q/2,d-P/2,u-q/2,Pr.TOP_RIGHT):new wt(a.left+a.width-P/2,a.top+q/2),this.bottomRightBorderStroke=h>0||x>0?As(a.left+F,a.top+B,h-P/2,x-D/2,Pr.BOTTOM_RIGHT):new wt(a.left+a.width-P/2,a.top+a.height-D/2),this.bottomLeftBorderStroke=b>0||v>0?As(a.left+_/2,a.top+Q,b-_/2,v-D/2,Pr.BOTTOM_LEFT):new wt(a.left+_/2,a.top+a.height-D/2),this.topLeftBorderBox=i>0||o>0?As(a.left,a.top,i,o,Pr.TOP_LEFT):new wt(a.left,a.top),this.topRightBorderBox=d>0||u>0?As(a.left+C,a.top,d,u,Pr.TOP_RIGHT):new wt(a.left+a.width,a.top),this.bottomRightBorderBox=h>0||x>0?As(a.left+F,a.top+B,h,x,Pr.BOTTOM_RIGHT):new wt(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=b>0||v>0?As(a.left,a.top+Q,b,v,Pr.BOTTOM_LEFT):new wt(a.left,a.top+a.height),this.topLeftPaddingBox=i>0||o>0?As(a.left+_,a.top+q,Math.max(0,i-_),Math.max(0,o-q),Pr.TOP_LEFT):new wt(a.left+_,a.top+q),this.topRightPaddingBox=d>0||u>0?As(a.left+Math.min(C,a.width-P),a.top+q,C>a.width+P?0:Math.max(0,d-P),Math.max(0,u-q),Pr.TOP_RIGHT):new wt(a.left+a.width-P,a.top+q),this.bottomRightPaddingBox=h>0||x>0?As(a.left+Math.min(F,a.width-_),a.top+Math.min(B,a.height-D),Math.max(0,h-P),Math.max(0,x-D),Pr.BOTTOM_RIGHT):new wt(a.left+a.width-P,a.top+a.height-D),this.bottomLeftPaddingBox=b>0||v>0?As(a.left+_,a.top+Math.min(Q,a.height-D),Math.max(0,b-_),Math.max(0,v-D),Pr.BOTTOM_LEFT):new wt(a.left+_,a.top+a.height-D),this.topLeftContentBox=i>0||o>0?As(a.left+_+E,a.top+q+$,Math.max(0,i-(_+E)),Math.max(0,o-(q+$)),Pr.TOP_LEFT):new wt(a.left+_+E,a.top+q+$),this.topRightContentBox=d>0||u>0?As(a.left+Math.min(C,a.width+_+E),a.top+q+$,C>a.width+_+E?0:d-_+E,u-(q+$),Pr.TOP_RIGHT):new wt(a.left+a.width-(P+k),a.top+q+$),this.bottomRightContentBox=h>0||x>0?As(a.left+Math.min(F,a.width-(_+E)),a.top+Math.min(B,a.height+q+$),Math.max(0,h-(P+k)),x-(D+L),Pr.BOTTOM_RIGHT):new wt(a.left+a.width-(P+k),a.top+a.height-(D+L)),this.bottomLeftContentBox=b>0||v>0?As(a.left+_+E,a.top+Q,Math.max(0,b-(_+E)),v-(D+L),Pr.BOTTOM_LEFT):new wt(a.left+_+E,a.top+a.height-(D+L))}return s})(),Pr;(function(s){s[s.TOP_LEFT=0]="TOP_LEFT",s[s.TOP_RIGHT=1]="TOP_RIGHT",s[s.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",s[s.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Pr||(Pr={}));var As=function(s,t,r,a,n){var i=4*((Math.sqrt(2)-1)/3),o=r*i,l=a*i,d=s+r,u=t+a;switch(n){case Pr.TOP_LEFT:return new fg(new wt(s,u),new wt(s,u-l),new wt(d-o,t),new wt(d,t));case Pr.TOP_RIGHT:return new fg(new wt(s,t),new wt(s+o,t),new wt(d,u-l),new wt(d,u));case Pr.BOTTOM_RIGHT:return new fg(new wt(d,t),new wt(d,t+l),new wt(s+o,u),new wt(s,u));case Pr.BOTTOM_LEFT:default:return new fg(new wt(d,u),new wt(d-o,u),new wt(s,t+l),new wt(s,t))}},Xg=function(s){return[s.topLeftBorderBox,s.topRightBorderBox,s.bottomRightBorderBox,s.bottomLeftBorderBox]},JR=function(s){return[s.topLeftContentBox,s.topRightContentBox,s.bottomRightContentBox,s.bottomLeftContentBox]},Zg=function(s){return[s.topLeftPaddingBox,s.topRightPaddingBox,s.bottomRightPaddingBox,s.bottomLeftPaddingBox]},XR=(function(){function s(t,r,a){this.offsetX=t,this.offsetY=r,this.matrix=a,this.type=0,this.target=6}return s})(),gg=(function(){function s(t,r){this.path=t,this.target=r,this.type=1}return s})(),ZR=(function(){function s(t){this.opacity=t,this.type=2,this.target=6}return s})(),eQ=function(s){return s.type===0},nB=function(s){return s.type===1},tQ=function(s){return s.type===2},Dj=function(s,t){return s.length===t.length?s.some(function(r,a){return r===t[a]}):!1},rQ=function(s,t,r,a,n){return s.map(function(i,o){switch(o){case 0:return i.add(t,r);case 1:return i.add(t+a,r);case 2:return i.add(t+a,r+n);case 3:return i.add(t,r+n)}return i})},iB=(function(){function s(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return s})(),oB=(function(){function s(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new YR(this.container),this.container.styles.opacity<1&&this.effects.push(new ZR(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,n=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new XR(a,n,i))}if(this.container.styles.overflowX!==0){var o=Xg(this.curves),l=Zg(this.curves);Dj(o,l)?this.effects.push(new gg(o,6)):(this.effects.push(new gg(o,2)),this.effects.push(new gg(l,4)))}}return s.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,n=this.effects.slice(0);a;){var i=a.effects.filter(function(d){return!nB(d)});if(r||a.container.styles.position!==0||!a.parent){if(n.unshift.apply(n,i),r=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var o=Xg(a.curves),l=Zg(a.curves);Dj(o,l)||n.unshift(new gg(l,6))}}else n.unshift.apply(n,i);a=a.parent}return n.filter(function(d){return ua(d.target,t)})},s})(),qb=function(s,t,r,a){s.container.elements.forEach(function(n){var i=ua(n.flags,4),o=ua(n.flags,2),l=new oB(n,s);ua(n.styles.display,2048)&&a.push(l);var d=ua(n.flags,8)?[]:a;if(i||o){var u=i||n.styles.isPositioned()?r:t,m=new iB(l);if(n.styles.isPositioned()||n.styles.opacity<1||n.styles.isTransformed()){var h=n.styles.zIndex.order;if(h<0){var x=0;u.negativeZIndex.some(function(b,v){return h>b.element.container.styles.zIndex.order?(x=v,!1):x>0}),u.negativeZIndex.splice(x,0,m)}else if(h>0){var f=0;u.positiveZIndex.some(function(b,v){return h>=b.element.container.styles.zIndex.order?(f=v+1,!1):f>0}),u.positiveZIndex.splice(f,0,m)}else u.zeroOrAutoZIndexOrTransformedOrOpacity.push(m)}else n.styles.isFloating()?u.nonPositionedFloats.push(m):u.nonPositionedInlineLevel.push(m);qb(l,m,i?m:r,d)}else n.styles.isInlineLevel()?t.inlineLevel.push(l):t.nonInlineLevel.push(l),qb(l,t,r,d);ua(n.flags,8)&&lB(n,d)})},lB=function(s,t){for(var r=s instanceof Mb?s.start:1,a=s instanceof Mb?s.reversed:!1,n=0;n<t.length;n++){var i=t[n];i.container instanceof W4&&typeof i.container.value=="number"&&i.container.value!==0&&(r=i.container.value),i.listValue=Fh(r,i.container.styles.listStyleType,!0),r+=a?-1:1}},sQ=function(s){var t=new oB(s,null),r=new iB(t),a=[];return qb(t,r,r,a),lB(t.container,a),r},Mj=function(s,t){switch(t){case 0:return ki(s.topLeftBorderBox,s.topLeftPaddingBox,s.topRightBorderBox,s.topRightPaddingBox);case 1:return ki(s.topRightBorderBox,s.topRightPaddingBox,s.bottomRightBorderBox,s.bottomRightPaddingBox);case 2:return ki(s.bottomRightBorderBox,s.bottomRightPaddingBox,s.bottomLeftBorderBox,s.bottomLeftPaddingBox);case 3:default:return ki(s.bottomLeftBorderBox,s.bottomLeftPaddingBox,s.topLeftBorderBox,s.topLeftPaddingBox)}},aQ=function(s,t){switch(t){case 0:return ki(s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox,s.topRightBorderBox,s.topRightBorderDoubleOuterBox);case 1:return ki(s.topRightBorderBox,s.topRightBorderDoubleOuterBox,s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox);case 2:return ki(s.bottomRightBorderBox,s.bottomRightBorderDoubleOuterBox,s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox);case 3:default:return ki(s.bottomLeftBorderBox,s.bottomLeftBorderDoubleOuterBox,s.topLeftBorderBox,s.topLeftBorderDoubleOuterBox)}},nQ=function(s,t){switch(t){case 0:return ki(s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox,s.topRightBorderDoubleInnerBox,s.topRightPaddingBox);case 1:return ki(s.topRightBorderDoubleInnerBox,s.topRightPaddingBox,s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox);case 2:return ki(s.bottomRightBorderDoubleInnerBox,s.bottomRightPaddingBox,s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox);case 3:default:return ki(s.bottomLeftBorderDoubleInnerBox,s.bottomLeftPaddingBox,s.topLeftBorderDoubleInnerBox,s.topLeftPaddingBox)}},iQ=function(s,t){switch(t){case 0:return pg(s.topLeftBorderStroke,s.topRightBorderStroke);case 1:return pg(s.topRightBorderStroke,s.bottomRightBorderStroke);case 2:return pg(s.bottomRightBorderStroke,s.bottomLeftBorderStroke);case 3:default:return pg(s.bottomLeftBorderStroke,s.topLeftBorderStroke)}},pg=function(s,t){var r=[];return Si(s)?r.push(s.subdivide(.5,!1)):r.push(s),Si(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},ki=function(s,t,r,a){var n=[];return Si(s)?n.push(s.subdivide(.5,!1)):n.push(s),Si(r)?n.push(r.subdivide(.5,!0)):n.push(r),Si(a)?n.push(a.subdivide(.5,!0).reverse()):n.push(a),Si(t)?n.push(t.subdivide(.5,!1).reverse()):n.push(t),n},cB=function(s){var t=s.bounds,r=s.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},ep=function(s){var t=s.styles,r=s.bounds,a=es(t.paddingLeft,r.width),n=es(t.paddingRight,r.width),i=es(t.paddingTop,r.width),o=es(t.paddingBottom,r.width);return r.add(a+t.borderLeftWidth,i+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+a+n),-(t.borderTopWidth+t.borderBottomWidth+i+o))},oQ=function(s,t){return s===0?t.bounds:s===2?ep(t):cB(t)},lQ=function(s,t){return s===0?t.bounds:s===2?ep(t):cB(t)},wx=function(s,t,r){var a=oQ(rA(s.styles.backgroundOrigin,t),s),n=lQ(rA(s.styles.backgroundClip,t),s),i=cQ(rA(s.styles.backgroundSize,t),r,a),o=i[0],l=i[1],d=Vm(rA(s.styles.backgroundPosition,t),a.width-o,a.height-l),u=dQ(rA(s.styles.backgroundRepeat,t),d,i,a,n),m=Math.round(a.left+d[0]),h=Math.round(a.top+d[1]);return[u,m,h,o,l]},Vu=function(s){return $r(s)&&s.value===oA.AUTO},xg=function(s){return typeof s=="number"},cQ=function(s,t,r){var a=t[0],n=t[1],i=t[2],o=s[0],l=s[1];if(!o)return[0,0];if(ea(o)&&l&&ea(l))return[es(o,r.width),es(l,r.height)];var d=xg(i);if($r(o)&&(o.value===oA.CONTAIN||o.value===oA.COVER)){if(xg(i)){var u=r.width/r.height;return u<i!=(o.value===oA.COVER)?[r.width,r.width/i]:[r.height*i,r.height]}return[r.width,r.height]}var m=xg(a),h=xg(n),x=m||h;if(Vu(o)&&(!l||Vu(l))){if(m&&h)return[a,n];if(!d&&!x)return[r.width,r.height];if(x&&d){var f=m?a:n*i,b=h?n:a/i;return[f,b]}var v=m?a:r.width,j=h?n:r.height;return[v,j]}if(d){var S=0,C=0;return ea(o)?S=es(o,r.width):ea(l)&&(C=es(l,r.height)),Vu(o)?S=C*i:(!l||Vu(l))&&(C=S/i),[S,C]}var B=null,F=null;if(ea(o)?B=es(o,r.width):l&&ea(l)&&(F=es(l,r.height)),B!==null&&(!l||Vu(l))&&(F=m&&h?B/a*n:r.height),F!==null&&Vu(o)&&(B=m&&h?F/n*a:r.width),B!==null&&F!==null)return[B,F];throw new Error("Unable to calculate background-size for element")},rA=function(s,t){var r=s[t];return typeof r>"u"?s[0]:r},dQ=function(s,t,r,a,n){var i=t[0],o=t[1],l=r[0],d=r[1];switch(s){case 2:return[new wt(Math.round(a.left),Math.round(a.top+o)),new wt(Math.round(a.left+a.width),Math.round(a.top+o)),new wt(Math.round(a.left+a.width),Math.round(d+a.top+o)),new wt(Math.round(a.left),Math.round(d+a.top+o))];case 3:return[new wt(Math.round(a.left+i),Math.round(a.top)),new wt(Math.round(a.left+i+l),Math.round(a.top)),new wt(Math.round(a.left+i+l),Math.round(a.height+a.top)),new wt(Math.round(a.left+i),Math.round(a.height+a.top))];case 1:return[new wt(Math.round(a.left+i),Math.round(a.top+o)),new wt(Math.round(a.left+i+l),Math.round(a.top+o)),new wt(Math.round(a.left+i+l),Math.round(a.top+o+d)),new wt(Math.round(a.left+i),Math.round(a.top+o+d))];default:return[new wt(Math.round(n.left),Math.round(n.top)),new wt(Math.round(n.left+n.width),Math.round(n.top)),new wt(Math.round(n.left+n.width),Math.round(n.height+n.top)),new wt(Math.round(n.left),Math.round(n.height+n.top))]}},uQ="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Rj="Hidden Text",AQ=(function(){function s(t){this._data={},this._document=t}return s.prototype.parseMetrics=function(t,r){var a=this._document.createElement("div"),n=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=r,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",o.appendChild(a),n.src=uQ,n.width=1,n.height=1,n.style.margin="0",n.style.padding="0",n.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Rj)),a.appendChild(i),a.appendChild(n);var l=n.offsetTop-i.offsetTop+2;a.removeChild(i),a.appendChild(this._document.createTextNode(Rj)),a.style.lineHeight="normal",n.style.verticalAlign="super";var d=n.offsetTop-a.offsetTop+2;return o.removeChild(a),{baseline:l,middle:d}},s.prototype.getMetrics=function(t,r){var a=t+" "+r;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(t,r)),this._data[a]},s})(),dB=(function(){function s(t,r){this.context=t,this.options=r}return s})(),mQ=1e4,hQ=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;return n._activeEffects=[],n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),a.canvas||(n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px"),n.fontMetrics=new AQ(document),n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.ctx.textBaseline="bottom",n._activeEffects=[],n.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),n}return t.prototype.applyEffects=function(r){for(var a=this;this._activeEffects.length;)this.popEffect();r.forEach(function(n){return a.applyEffect(n)})},t.prototype.applyEffect=function(r){this.ctx.save(),tQ(r)&&(this.ctx.globalAlpha=r.opacity),eQ(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),nB(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return vn(this,void 0,void 0,function(){var a;return ln(this,function(n){switch(n.label){case 0:return a=r.element.container.styles,a.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return vn(this,void 0,void 0,function(){return ln(this,function(a){switch(a.label){case 0:if(ua(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(r)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,a,n){var i=this;if(a===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+n);else{var o=ky(r.text);o.reduce(function(l,d){return i.ctx.fillText(d,l,r.bounds.top+n),l+i.ctx.measureText(d).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var a=r.fontVariant.filter(function(o){return o==="normal"||o==="small-caps"}).join(""),n=bQ(r.fontFamily).join(", "),i=Dh(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,a,r.fontWeight,i,n].join(" "),n,i]},t.prototype.renderTextNode=function(r,a){return vn(this,void 0,void 0,function(){var n,i,o,l,d,u,m,h,x=this;return ln(this,function(f){return n=this.createFontStyle(a),i=n[0],o=n[1],l=n[2],this.ctx.font=i,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",d=this.fontMetrics.getMetrics(o,l),u=d.baseline,m=d.middle,h=a.paintOrder,r.textBounds.forEach(function(b){h.forEach(function(v){switch(v){case 0:x.ctx.fillStyle=Na(a.color),x.renderTextWithLetterSpacing(b,a.letterSpacing,u);var j=a.textShadow;j.length&&b.text.trim().length&&(j.slice(0).reverse().forEach(function(S){x.ctx.shadowColor=Na(S.color),x.ctx.shadowOffsetX=S.offsetX.number*x.options.scale,x.ctx.shadowOffsetY=S.offsetY.number*x.options.scale,x.ctx.shadowBlur=S.blur.number,x.renderTextWithLetterSpacing(b,a.letterSpacing,u)}),x.ctx.shadowColor="",x.ctx.shadowOffsetX=0,x.ctx.shadowOffsetY=0,x.ctx.shadowBlur=0),a.textDecorationLine.length&&(x.ctx.fillStyle=Na(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(S){switch(S){case 1:x.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top+u),b.bounds.width,1);break;case 2:x.ctx.fillRect(b.bounds.left,Math.round(b.bounds.top),b.bounds.width,1);break;case 3:x.ctx.fillRect(b.bounds.left,Math.ceil(b.bounds.top+m),b.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&b.text.trim().length&&(x.ctx.strokeStyle=Na(a.webkitTextStrokeColor),x.ctx.lineWidth=a.webkitTextStrokeWidth,x.ctx.lineJoin=window.chrome?"miter":"round",x.ctx.strokeText(b.text,b.bounds.left,b.bounds.top+u)),x.ctx.strokeStyle="",x.ctx.lineWidth=0,x.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,a,n){if(n&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var i=ep(r),o=Zg(a);this.path(o),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,r.intrinsicWidth,r.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return vn(this,void 0,void 0,function(){var a,n,i,o,l,d,C,C,u,m,h,x,F,f,b,Q,v,j,S,C,B,F,Q;return ln(this,function(q){switch(q.label){case 0:this.applyEffects(r.getEffects(4)),a=r.container,n=r.curves,i=a.styles,o=0,l=a.textNodes,q.label=1;case 1:return o<l.length?(d=l[o],[4,this.renderTextNode(d,i)]):[3,4];case 2:q.sent(),q.label=3;case 3:return o++,[3,1];case 4:if(!(a instanceof H4))return[3,8];q.label=5;case 5:return q.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return C=q.sent(),this.renderReplacedElement(a,n,C),[3,8];case 7:return q.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof q4&&this.renderReplacedElement(a,n,a.canvas),!(a instanceof $4))return[3,12];q.label=9;case 9:return q.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return C=q.sent(),this.renderReplacedElement(a,n,C),[3,12];case 11:return q.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof G4&&a.tree?(u=new t(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,u.render(a.tree)]):[3,14];case 13:m=q.sent(),a.width&&a.height&&this.ctx.drawImage(m,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),q.label=14;case 14:if(a instanceof Fy&&(h=Math.min(a.bounds.width,a.bounds.height),a.type===Gg?a.checked&&(this.ctx.save(),this.path([new wt(a.bounds.left+h*.39363,a.bounds.top+h*.79),new wt(a.bounds.left+h*.16,a.bounds.top+h*.5549),new wt(a.bounds.left+h*.27347,a.bounds.top+h*.44071),new wt(a.bounds.left+h*.39694,a.bounds.top+h*.5649),new wt(a.bounds.left+h*.72983,a.bounds.top+h*.23),new wt(a.bounds.left+h*.84,a.bounds.top+h*.34085),new wt(a.bounds.left+h*.39363,a.bounds.top+h*.79)]),this.ctx.fillStyle=Na(Sj),this.ctx.fill(),this.ctx.restore()):a.type===Vg&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+h/2,a.bounds.top+h/2,h/4,0,Math.PI*2,!0),this.ctx.fillStyle=Na(Sj),this.ctx.fill(),this.ctx.restore())),fQ(a)&&a.value.length){switch(x=this.createFontStyle(i),F=x[0],f=x[1],b=this.fontMetrics.getMetrics(F,f).baseline,this.ctx.font=F,this.ctx.fillStyle=Na(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=pQ(a.styles.textAlign),Q=ep(a),v=0,a.styles.textAlign){case 1:v+=Q.width/2;break;case 2:v+=Q.width;break}j=Q.add(v,0,0,-Q.height/2+1),this.ctx.save(),this.path([new wt(Q.left,Q.top),new wt(Q.left+Q.width,Q.top),new wt(Q.left+Q.width,Q.top+Q.height),new wt(Q.left,Q.top+Q.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new uh(a.value,j),i.letterSpacing,b),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ua(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(S=a.styles.listStyleImage,S.type!==0)return[3,18];C=void 0,B=S.url,q.label=15;case 15:return q.trys.push([15,17,,18]),[4,this.context.cache.match(B)];case 16:return C=q.sent(),this.ctx.drawImage(C,a.bounds.left-(C.width+10),a.bounds.top),[3,18];case 17:return q.sent(),this.context.logger.error("Error loading list-style-image "+B),[3,18];case 18:return[3,20];case 19:r.listValue&&a.styles.listStyleType!==-1&&(F=this.createFontStyle(i)[0],this.ctx.font=F,this.ctx.fillStyle=Na(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Q=new Nl(a.bounds.left,a.bounds.top+es(a.styles.paddingTop,a.bounds.width),a.bounds.width,cj(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new uh(r.listValue,Q),i.letterSpacing,cj(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),q.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return vn(this,void 0,void 0,function(){var a,n,S,i,o,S,l,d,S,u,m,S,h,x,S,f,b,S,v,j,S;return ln(this,function(C){switch(C.label){case 0:if(ua(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:C.sent(),a=0,n=r.negativeZIndex,C.label=2;case 2:return a<n.length?(S=n[a],[4,this.renderStack(S)]):[3,5];case 3:C.sent(),C.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:C.sent(),i=0,o=r.nonInlineLevel,C.label=7;case 7:return i<o.length?(S=o[i],[4,this.renderNode(S)]):[3,10];case 8:C.sent(),C.label=9;case 9:return i++,[3,7];case 10:l=0,d=r.nonPositionedFloats,C.label=11;case 11:return l<d.length?(S=d[l],[4,this.renderStack(S)]):[3,14];case 12:C.sent(),C.label=13;case 13:return l++,[3,11];case 14:u=0,m=r.nonPositionedInlineLevel,C.label=15;case 15:return u<m.length?(S=m[u],[4,this.renderStack(S)]):[3,18];case 16:C.sent(),C.label=17;case 17:return u++,[3,15];case 18:h=0,x=r.inlineLevel,C.label=19;case 19:return h<x.length?(S=x[h],[4,this.renderNode(S)]):[3,22];case 20:C.sent(),C.label=21;case 21:return h++,[3,19];case 22:f=0,b=r.zeroOrAutoZIndexOrTransformedOrOpacity,C.label=23;case 23:return f<b.length?(S=b[f],[4,this.renderStack(S)]):[3,26];case 24:C.sent(),C.label=25;case 25:return f++,[3,23];case 26:v=0,j=r.positiveZIndex,C.label=27;case 27:return v<j.length?(S=j[v],[4,this.renderStack(S)]):[3,30];case 28:C.sent(),C.label=29;case 29:return v++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var a=this;r.forEach(function(n,i){var o=Si(n)?n.start:n;i===0?a.ctx.moveTo(o.x,o.y):a.ctx.lineTo(o.x,o.y),Si(n)&&a.ctx.bezierCurveTo(n.startControl.x,n.startControl.y,n.endControl.x,n.endControl.y,n.end.x,n.end.y)})},t.prototype.renderRepeat=function(r,a,n,i){this.path(r),this.ctx.fillStyle=a,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},t.prototype.resizeImage=function(r,a,n){var i;if(r.width===a&&r.height===n)return r;var o=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,l=o.createElement("canvas");l.width=Math.max(1,a),l.height=Math.max(1,n);var d=l.getContext("2d");return d.drawImage(r,0,0,r.width,r.height,0,0,a,n),l},t.prototype.renderBackgroundImage=function(r){return vn(this,void 0,void 0,function(){var a,n,i,o,l,d;return ln(this,function(u){switch(u.label){case 0:a=r.styles.backgroundImage.length-1,n=function(m){var h,x,f,$,te,V,E,O,D,b,$,te,V,E,O,v,j,S,C,B,F,Q,q,P,D,_,$,k,L,E,O,le,te,V,M,ie,K,H,I,ee,se,de;return ln(this,function(re){switch(re.label){case 0:if(m.type!==0)return[3,5];h=void 0,x=m.url,re.label=1;case 1:return re.trys.push([1,3,,4]),[4,i.context.cache.match(x)];case 2:return h=re.sent(),[3,4];case 3:return re.sent(),i.context.logger.error("Error loading background-image "+x),[3,4];case 4:return h&&(f=wx(r,a,[h.width,h.height,h.width/h.height]),$=f[0],te=f[1],V=f[2],E=f[3],O=f[4],D=i.ctx.createPattern(i.resizeImage(h,E,O),"repeat"),i.renderRepeat($,D,te,V)),[3,6];case 5:e9(m)?(b=wx(r,a,[null,null,null]),$=b[0],te=b[1],V=b[2],E=b[3],O=b[4],v=V7(m.angle,E,O),j=v[0],S=v[1],C=v[2],B=v[3],F=v[4],Q=document.createElement("canvas"),Q.width=E,Q.height=O,q=Q.getContext("2d"),P=q.createLinearGradient(S,B,C,F),oj(m.stops,j).forEach(function(z){return P.addColorStop(z.stop,Na(z.color))}),q.fillStyle=P,q.fillRect(0,0,E,O),E>0&&O>0&&(D=i.ctx.createPattern(Q,"repeat"),i.renderRepeat($,D,te,V))):t9(m)&&(_=wx(r,a,[null,null,null]),$=_[0],k=_[1],L=_[2],E=_[3],O=_[4],le=m.position.length===0?[Cy]:m.position,te=es(le[0],E),V=es(le[le.length-1],O),M=Y7(m,te,V,E,O),ie=M[0],K=M[1],ie>0&&K>0&&(H=i.ctx.createRadialGradient(k+te,L+V,0,k+te,L+V,ie),oj(m.stops,ie*2).forEach(function(z){return H.addColorStop(z.stop,Na(z.color))}),i.path($),i.ctx.fillStyle=H,ie!==K?(I=r.bounds.left+.5*r.bounds.width,ee=r.bounds.top+.5*r.bounds.height,se=K/ie,de=1/se,i.ctx.save(),i.ctx.translate(I,ee),i.ctx.transform(1,0,0,se,0,0),i.ctx.translate(-I,-ee),i.ctx.fillRect(k,de*(L-ee)+ee,E,O*de),i.ctx.restore()):i.ctx.fill())),re.label=6;case 6:return a--,[2]}})},i=this,o=0,l=r.styles.backgroundImage.slice(0).reverse(),u.label=1;case 1:return o<l.length?(d=l[o],[5,n(d)]):[3,4];case 2:u.sent(),u.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,a,n){return vn(this,void 0,void 0,function(){return ln(this,function(i){return this.path(Mj(n,a)),this.ctx.fillStyle=Na(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,a,n,i){return vn(this,void 0,void 0,function(){var o,l;return ln(this,function(d){switch(d.label){case 0:return a<3?[4,this.renderSolidBorder(r,n,i)]:[3,2];case 1:return d.sent(),[2];case 2:return o=aQ(i,n),this.path(o),this.ctx.fillStyle=Na(r),this.ctx.fill(),l=nQ(i,n),this.path(l),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return vn(this,void 0,void 0,function(){var a,n,i,o,l,d,u,m,h=this;return ln(this,function(x){switch(x.label){case 0:return this.applyEffects(r.getEffects(2)),a=r.container.styles,n=!_c(a.backgroundColor)||a.backgroundImage.length,i=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],o=gQ(rA(a.backgroundClip,0),r.curves),n||a.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),_c(a.backgroundColor)||(this.ctx.fillStyle=Na(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:x.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(f){h.ctx.save();var b=Xg(r.curves),v=f.inset?0:mQ,j=rQ(b,-v+(f.inset?1:-1)*f.spread.number,(f.inset?1:-1)*f.spread.number,f.spread.number*(f.inset?-2:2),f.spread.number*(f.inset?-2:2));f.inset?(h.path(b),h.ctx.clip(),h.mask(j)):(h.mask(b),h.ctx.clip(),h.path(j)),h.ctx.shadowOffsetX=f.offsetX.number+v,h.ctx.shadowOffsetY=f.offsetY.number,h.ctx.shadowColor=Na(f.color),h.ctx.shadowBlur=f.blur.number,h.ctx.fillStyle=f.inset?Na(f.color):"rgba(0,0,0,1)",h.ctx.fill(),h.ctx.restore()}),x.label=2;case 2:l=0,d=0,u=i,x.label=3;case 3:return d<u.length?(m=u[d],m.style!==0&&!_c(m.color)&&m.width>0?m.style!==2?[3,5]:[4,this.renderDashedDottedBorder(m.color,m.width,l,r.curves,2)]:[3,11]):[3,13];case 4:return x.sent(),[3,11];case 5:return m.style!==3?[3,7]:[4,this.renderDashedDottedBorder(m.color,m.width,l,r.curves,3)];case 6:return x.sent(),[3,11];case 7:return m.style!==4?[3,9]:[4,this.renderDoubleBorder(m.color,m.width,l,r.curves)];case 8:return x.sent(),[3,11];case 9:return[4,this.renderSolidBorder(m.color,l,r.curves)];case 10:x.sent(),x.label=11;case 11:l++,x.label=12;case 12:return d++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,a,n,i,o){return vn(this,void 0,void 0,function(){var l,d,u,m,h,x,f,b,v,j,S,C,B,F,Q,q,Q,q;return ln(this,function(P){return this.ctx.save(),l=iQ(i,n),d=Mj(i,n),o===2&&(this.path(d),this.ctx.clip()),Si(d[0])?(u=d[0].start.x,m=d[0].start.y):(u=d[0].x,m=d[0].y),Si(d[1])?(h=d[1].end.x,x=d[1].end.y):(h=d[1].x,x=d[1].y),n===0||n===2?f=Math.abs(u-h):f=Math.abs(m-x),this.ctx.beginPath(),o===3?this.formatPath(l):this.formatPath(d.slice(0,2)),b=a<3?a*3:a*2,v=a<3?a*2:a,o===3&&(b=a,v=a),j=!0,f<=b*2?j=!1:f<=b*2+v?(S=f/(2*b+v),b*=S,v*=S):(C=Math.floor((f+v)/(b+v)),B=(f-C*b)/(C-1),F=(f-(C+1)*b)/C,v=F<=0||Math.abs(v-B)<Math.abs(v-F)?B:F),j&&(o===3?this.ctx.setLineDash([0,b+v]):this.ctx.setLineDash([b,v])),o===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=Na(r),this.ctx.stroke(),this.ctx.setLineDash([]),o===2&&(Si(d[0])&&(Q=d[3],q=d[0],this.ctx.beginPath(),this.formatPath([new wt(Q.end.x,Q.end.y),new wt(q.start.x,q.start.y)]),this.ctx.stroke()),Si(d[1])&&(Q=d[1],q=d[2],this.ctx.beginPath(),this.formatPath([new wt(Q.end.x,Q.end.y),new wt(q.start.x,q.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return vn(this,void 0,void 0,function(){var a;return ln(this,function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Na(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=sQ(r),[4,this.renderStack(a)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}})})},t})(dB),fQ=function(s){return s instanceof z4||s instanceof K4?!0:s instanceof Fy&&s.type!==Vg&&s.type!==Gg},gQ=function(s,t){switch(s){case 0:return Xg(t);case 2:return JR(t);case 1:default:return Zg(t)}},pQ=function(s){switch(s){case 1:return"center";case 2:return"right";case 0:default:return"left"}},xQ=["-apple-system","system-ui"],bQ=function(s){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?s.filter(function(t){return xQ.indexOf(t)===-1}):s},yQ=(function(s){Ao(t,s);function t(r,a){var n=s.call(this,r,a)||this;return n.canvas=a.canvas?a.canvas:document.createElement("canvas"),n.ctx=n.canvas.getContext("2d"),n.options=a,n.canvas.width=Math.floor(a.width*a.scale),n.canvas.height=Math.floor(a.height*a.scale),n.canvas.style.width=a.width+"px",n.canvas.style.height=a.height+"px",n.ctx.scale(n.options.scale,n.options.scale),n.ctx.translate(-a.x,-a.y),n.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),n}return t.prototype.render=function(r){return vn(this,void 0,void 0,function(){var a,n;return ln(this,function(i){switch(i.label){case 0:return a=Db(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,vQ(a)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Na(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t})(dB),vQ=function(s){return new Promise(function(t,r){var a=new Image;a.onload=function(){t(a)},a.onerror=r,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(s))})},wQ=(function(){function s(t){var r=t.id,a=t.enabled;this.id=r,this.enabled=a,this.start=Date.now()}return s.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Yf([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},s.prototype.getTime=function(){return Date.now()-this.start},s.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Yf([this.id,this.getTime()+"ms"],t))},s.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Yf([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},s.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Yf([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},s.instances={},s})(),jQ=(function(){function s(t,r){var a;this.windowBounds=r,this.instanceName="#"+s.instanceCount++,this.logger=new wQ({id:this.instanceName,enabled:t.logging}),this.cache=(a=t.cache)!==null&&a!==void 0?a:new qR(this,t)}return s.instanceCount=1,s})(),_y=function(s,t){return t===void 0&&(t={}),NQ(s,t)};typeof window<"u"&&aB.setContext(window);var NQ=function(s,t){return vn(void 0,void 0,void 0,function(){var r,a,n,i,o,l,d,u,m,h,x,f,b,v,j,S,C,B,F,Q,P,q,P,D,_,$,k,L,E,O,le,te,V,M,ie,K,H,I,ee,se;return ln(this,function(de){switch(de.label){case 0:if(!s||typeof s!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=s.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(a=r.defaultView,!a)throw new Error("Document is not attached to a Window");return n={allowTaint:(D=t.allowTaint)!==null&&D!==void 0?D:!1,imageTimeout:(_=t.imageTimeout)!==null&&_!==void 0?_:15e3,proxy:t.proxy,useCORS:($=t.useCORS)!==null&&$!==void 0?$:!1},i=wb({logging:(k=t.logging)!==null&&k!==void 0?k:!0,cache:t.cache},n),o={windowWidth:(L=t.windowWidth)!==null&&L!==void 0?L:a.innerWidth,windowHeight:(E=t.windowHeight)!==null&&E!==void 0?E:a.innerHeight,scrollX:(O=t.scrollX)!==null&&O!==void 0?O:a.pageXOffset,scrollY:(le=t.scrollY)!==null&&le!==void 0?le:a.pageYOffset},l=new Nl(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),d=new jQ(i,l),u=(te=t.foreignObjectRendering)!==null&&te!==void 0?te:!1,m={allowTaint:(V=t.allowTaint)!==null&&V!==void 0?V:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:u,copyStyles:u},d.logger.debug("Starting document clone with size "+l.width+"x"+l.height+" scrolled to "+-l.left+","+-l.top),h=new Lj(d,s,m),x=h.clonedReferenceElement,x?[4,h.toIFrame(r,l)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return f=de.sent(),b=Ey(x)||SR(x)?rD(x.ownerDocument):mp(d,x),v=b.width,j=b.height,S=b.left,C=b.top,B=CQ(d,x,t.backgroundColor),F={canvas:t.canvas,backgroundColor:B,scale:(ie=(M=t.scale)!==null&&M!==void 0?M:a.devicePixelRatio)!==null&&ie!==void 0?ie:1,x:((K=t.x)!==null&&K!==void 0?K:0)+S,y:((H=t.y)!==null&&H!==void 0?H:0)+C,width:(I=t.width)!==null&&I!==void 0?I:Math.ceil(v),height:(ee=t.height)!==null&&ee!==void 0?ee:Math.ceil(j)},u?(d.logger.debug("Document cloned, using foreign object rendering"),P=new yQ(d,F),[4,P.render(x)]):[3,3];case 2:return Q=de.sent(),[3,5];case 3:return d.logger.debug("Document cloned, element located at "+S+","+C+" with size "+v+"x"+j+" using computed rendering"),d.logger.debug("Starting DOM parsing"),q=Y4(d,x),B===q.styles.backgroundColor&&(q.styles.backgroundColor=wl.TRANSPARENT),d.logger.debug("Starting renderer for element at "+F.x+","+F.y+" with size "+F.width+"x"+F.height),P=new hQ(d,F),[4,P.render(q)];case 4:Q=de.sent(),de.label=5;case 5:return(!((se=t.removeContainer)!==null&&se!==void 0)||se)&&(Lj.destroy(f)||d.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),d.logger.debug("Finished rendering"),[2,Q]}})})},CQ=function(s,t,r){var a=t.ownerDocument,n=a.documentElement?ch(s,getComputedStyle(a.documentElement).backgroundColor):wl.TRANSPARENT,i=a.body?ch(s,getComputedStyle(a.body).backgroundColor):wl.TRANSPARENT,o=typeof r=="string"?ch(s,r):r===null?wl.TRANSPARENT:4294967295;return t===a.documentElement?_c(n)?_c(i)?o:i:n:o};const SQ=Object.freeze(Object.defineProperty({__proto__:null,default:_y},Symbol.toStringTag,{value:"Module"})),oc=async()=>{try{const{data:{user:s}}=await _e.auth.getUser();if(s?.id)return s.id}catch{console.log("Auth not available, using development mode")}return"00000000-0000-0000-0000-000000000000"},Eh=Mc((s,t)=>({projects:[],progressUpdates:[],loading:!1,error:null,hasLoadedOnce:!1,fetchProjects:async(r=!1)=>{console.log(" fetchProjects called, force:",r),s({loading:!0,error:null});try{console.log(" Fetching projects from Supabase...");const{data:a,error:n}=await _e.from("projects").select("*").order("created_at",{ascending:!1});if(console.log(" Projects response:",{count:a?.length||0,projects:a,error:n}),n)throw n;const{data:i,error:o}=await _e.from("tasks").select("*").order("created_at",{ascending:!1});console.log(" Fetched tasks from database:",i?.length||0,i),o&&console.error(" Error fetching tasks:",o);const{data:l,error:d}=await _e.from("comments").select("*").order("created_at",{ascending:!1});console.log(" Fetched comments from database:",l?.length||0,l),d&&console.error(" Error fetching comments:",d);const{data:u,error:m}=await _e.from("project_team_members").select("*");m&&console.error("Error fetching team members:",m);const h=(a||[]).map(x=>{const f=(i||[]).filter(F=>F.project_id===x.id).map(F=>{console.log(`   Task for project ${x.id}:`,F.title);const Q=F.assignee?F.assignee.includes(",")?F.assignee.split(","):F.assignee:"";return{id:F.id,title:F.title,status:F.status,assignee:Q,dueDate:F.due_date||"",priority:F.priority,projectId:F.project_id}}),b=(l||[]).filter(F=>F.project_id===x.id).map(F=>({id:F.id,author:F.author,content:F.content,timestamp:F.created_at,attachments:F.attachments||[],projectId:F.project_id})),v=(u||[]).filter(F=>F.project_id===x.id).map(F=>F.member_name),j=f.filter(F=>F.status==="completed").length,S=f.length,C=S>0?Math.round(j/S*100):0,B=x.client_name||"Direct Client";return{id:x.id,name:x.name,client:B,clientId:x.client_id||null,status:x.status||"active",priority:x.priority||"medium",startDate:x.start_date||new Date().toISOString(),endDate:x.end_date||new Date().toISOString(),budget:parseFloat(x.budget)||0,spent:parseFloat(x.spent)||0,progress:C,team:v,description:x.description||"",tasks:f,comments:b,userId:x.user_id||null}});s({projects:h,loading:!1,hasLoadedOnce:!0})}catch(a){console.error("Error fetching projects:",a),s({error:a.message||"Failed to fetch projects",loading:!1})}},addProject:async r=>{s({loading:!0,error:null});try{const a=await oc();console.log("Adding project with user_id:",a);const n={name:r.name,client_name:r.client||null,status:r.status||"active",priority:r.priority||"medium",start_date:r.startDate||null,end_date:r.endDate||null,budget:r.budget||0,spent:0,progress:0,description:r.description||null,user_id:a};r.clientId&&(n.client_id=r.clientId);const{data:i,error:o}=await _e.from("projects").insert(n).select().single();if(o)throw console.error("Supabase error creating project:",o),console.error("Project data being sent:",{name:r.name,client_name:r.client||null,status:r.status,start_date:r.startDate,end_date:r.endDate,budget:r.budget,description:r.description}),o;const l={id:i.id,name:i.name,client:i.client_name||r.client||"Direct Client",clientId:i.client_id||null,status:i.status,priority:r.priority||"medium",startDate:i.start_date,endDate:i.end_date,budget:parseFloat(i.budget),spent:0,progress:0,team:[],description:i.description||"",tasks:[],comments:[],userId:null};(i.start_date||i.end_date)&&(await ro.syncProjectDates(i.id,{name:i.name,start_date:i.start_date,end_date:i.end_date}),console.log("Project dates synced to calendar")),s(d=>({projects:[l,...d.projects],loading:!1}))}catch(a){console.error("Error adding project:",a);const n=a.message||"Failed to add project";throw s({error:n,loading:!1}),alert(`Error creating project: ${n}`),a}},updateProject:async(r,a)=>{s({loading:!0,error:null});try{const n=await oc(),i={};a.name!==void 0&&(i.name=a.name),a.client!==void 0&&(i.client_name=a.client),a.clientId!==void 0&&(i.client_id=a.clientId),a.status!==void 0&&(i.status=a.status),a.priority!==void 0&&(i.priority=a.priority),a.startDate!==void 0&&(i.start_date=a.startDate),a.endDate!==void 0&&(i.end_date=a.endDate),a.budget!==void 0&&(i.budget=a.budget),a.spent!==void 0&&(i.spent=a.spent),a.progress!==void 0&&(i.progress=a.progress),a.description!==void 0&&(i.description=a.description),i.updated_at=new Date().toISOString(),console.log("Updating project with:",i);const{error:o}=await _e.from("projects").update(i).eq("id",r);if(o)throw o;if(a.startDate||a.endDate){const l=t().projects.find(d=>d.id===r);l&&(await ro.syncProjectDates(r,{name:l.name,start_date:a.startDate||l.startDate,end_date:a.endDate||l.endDate}),console.log("Updated project dates synced to calendar"))}s(l=>({projects:l.projects.map(d=>d.id===r?{...d,...a}:d),loading:!1}))}catch(n){console.error("Error updating project:",n),s({error:n.message||"Failed to update project",loading:!1})}},deleteProject:async r=>{s({loading:!0,error:null});try{const a=await oc(),{error:n}=await _e.from("projects").delete().eq("id",r);if(n)throw n;s(i=>({projects:i.projects.filter(o=>o.id!==r),loading:!1}))}catch(a){console.error("Error deleting project:",a),s({error:a.message||"Failed to delete project",loading:!1})}},addTask:async(r,a)=>{console.log(" addTask called with:",{projectId:r,task:a});try{const n=await oc(),i=Array.isArray(a.assignee)?a.assignee.length>0?a.assignee.join(","):null:a.assignee||null,o={project_id:r,title:a.title,status:a.status,assignee:i,due_date:a.dueDate||null,priority:a.priority};n&&n!=="00000000-0000-0000-0000-000000000000"&&(o.user_id=n),console.log(" Sending to Supabase:",o);const{data:l,error:d}=await _e.from("tasks").insert(o).select().single();if(d)throw console.error(" Supabase error:",d),console.error("Full error:",JSON.stringify(d,null,2)),d;console.log(" Task saved to database:",l),alert("Task saved successfully!");const u=l.assignee?l.assignee.includes(",")?l.assignee.split(","):l.assignee:"",m={id:l.id,title:l.title,status:l.status,assignee:u,dueDate:l.due_date||"",priority:l.priority,projectId:l.project_id};s(h=>({projects:h.projects.map(x=>x.id===r?{...x,tasks:[...x.tasks||[],m]}:x)})),console.log(" Task added to local state")}catch(n){console.error(" Error adding task:",n),alert(`Failed to save task: ${n instanceof Error?n.message:"Unknown error"}`)}},updateTask:async(r,a,n)=>{try{const i=await oc(),o={};n.title!==void 0&&(o.title=n.title),n.status!==void 0&&(o.status=n.status),n.assignee!==void 0&&(o.assignee=n.assignee||null),n.dueDate!==void 0&&(o.due_date=n.dueDate||null),n.priority!==void 0&&(o.priority=n.priority),o.updated_at=new Date().toISOString();const{error:l}=await _e.from("tasks").update(o).eq("id",a);if(l)throw l;s(d=>({projects:d.projects.map(u=>u.id===r?{...u,tasks:(u.tasks||[]).map(m=>m.id===a?{...m,...n}:m)}:u)}))}catch(i){console.error("Error updating task:",i),alert(`Error updating task: ${i instanceof Error?i.message:"Unknown error"}`)}},deleteTask:async(r,a)=>{try{const{error:n}=await _e.from("tasks").delete().eq("id",a);if(n)throw n;s(i=>({projects:i.projects.map(o=>o.id===r?{...o,tasks:(o.tasks||[]).filter(l=>l.id!==a)}:o)}))}catch(n){console.error("Error deleting task:",n),alert(`Error deleting task: ${n instanceof Error?n.message:"Unknown error"}`)}},addComment:async(r,a,n)=>{console.log(" addComment called with:",{projectId:r,comment:a,filesCount:n?.length||0});try{let i=[];if(n&&n.length>0){console.log(" Uploading",n.length,"comment attachments to Supabase Storage...");for(const h of n){const x=`comments/${r}/${Date.now()}_${h.name}`;console.log(" Uploading file:",x);const{data:f,error:b}=await _e.storage.from("progress-photos").upload(x,h);if(b){console.error(" Error uploading attachment:",b),b.message?.includes("not found")&&alert('Storage bucket "progress-photos" not found. Please create it in Supabase Dashboard.');continue}const{data:{publicUrl:v}}=_e.storage.from("progress-photos").getPublicUrl(x);i.push(v),console.log(" Uploaded successfully, URL:",v)}console.log(" All uploaded attachment URLs:",i)}const o=await oc();console.log(" Current user ID for comment:",o);const l={project_id:r,author:a.author,content:a.content,attachments:i.length>0?i:a.attachments||[]};o&&o!=="00000000-0000-0000-0000-000000000000"&&(l.user_id=o),console.log(" Sending comment to Supabase:",l);const{data:d,error:u}=await _e.from("comments").insert(l).select().single();if(u)throw console.error(" Supabase error:",u),console.error("Full error:",JSON.stringify(u,null,2)),u;console.log(" Comment saved to database:",d);const m={id:d.id,author:d.author,content:d.content,timestamp:d.created_at,attachments:d.attachments||[],projectId:d.project_id};s(h=>({projects:h.projects.map(x=>x.id===r?{...x,comments:[...x.comments||[],m]}:x)})),console.log(" Comment added to local state"),alert("Comment saved successfully!")}catch(i){console.error(" Error adding comment:",i);const o=i.message||"Failed to save comment";throw alert(`Error saving comment: ${o}`),i}},deleteComment:async(r,a)=>{try{const{error:n}=await _e.from("comments").delete().eq("id",a);if(n)throw n;s(i=>({projects:i.projects.map(o=>o.id===r?{...o,comments:(o.comments||[]).filter(l=>l.id!==a)}:o)}))}catch(n){console.error("Error deleting comment:",n),alert(`Error deleting comment: ${n instanceof Error?n.message:"Unknown error"}`)}},addTeamMember:async(r,a,n,i)=>{console.log(" addTeamMember called with:",{projectId:r,memberName:a,email:n,role:i});try{const o=await oc(),l={project_id:r,member_name:a,member_email:n||null,member_role:i||null};o&&o!=="00000000-0000-0000-0000-000000000000"&&(l.user_id=o);const{data:d,error:u}=await _e.from("project_team_members").insert(l).select().single();if(u)throw console.error(" Supabase error adding team member:",u),u.code==="23505"?alert("This team member is already on the project"):alert("Failed to add team member. Check console for details."),u;console.log(" Team member added to database:",d),s(m=>({projects:m.projects.map(h=>h.id===r?{...h,team:[...h.team,a]}:h)})),console.log(" Team member added to local state")}catch(o){console.error(" Error adding team member:",o)}},removeTeamMember:async(r,a)=>{console.log(" removeTeamMember called with:",{projectId:r,memberName:a});try{const{error:n}=await _e.from("project_team_members").delete().eq("project_id",r).eq("member_name",a);if(n)throw console.error(" Supabase error removing team member:",n),n;console.log(" Team member removed from database"),s(i=>({projects:i.projects.map(o=>o.id===r?{...o,team:o.team.filter(l=>l!==a)}:o)})),console.log(" Team member removed from local state")}catch(n){console.error(" Error removing team member:",n),alert("Failed to remove team member. Check console for details.")}},fetchProgressUpdates:async r=>{console.log(" fetchProgressUpdates called for project:",r),s({loading:!0,error:null});try{const{data:a,error:n}=await _e.from("progress_updates").select("*").eq("project_id",r).order("date",{ascending:!1});if(n)throw console.error(" Supabase error fetching progress updates:",n),n.code==="42P01"&&alert("Progress updates table does not exist. Please run the database migration script."),n;console.log(" Fetched progress updates from database:",a);const i=(a||[]).map(o=>({id:o.id,projectId:o.project_id,taskId:o.task_id,description:o.description,photos:o.photos||[],postedBy:o.posted_by,date:o.date}));console.log(" Processed progress updates:",i),s({progressUpdates:i,loading:!1})}catch(a){console.error(" Error fetching progress updates:",a),s({error:a.message||"Failed to fetch progress updates",loading:!1})}},addProgressUpdate:async(r,a)=>{console.log(" addProgressUpdate called with:",{update:r,filesCount:a?.length||0}),s({loading:!0,error:null});try{const n=await oc();let i=[];if(a&&a.length>0){console.log(" Uploading",a.length,"images to Supabase Storage...");for(const m of a){const h=`${r.projectId}/${Date.now()}_${m.name}`;console.log(" Uploading file:",h);const{data:x,error:f}=await _e.storage.from("progress-photos").upload(h,m);if(f){console.error(" Error uploading image:",f),f.message?.includes("not found")&&alert('Storage bucket "progress-photos" not found. Please create it in Supabase Dashboard.');continue}const{data:{publicUrl:b}}=_e.storage.from("progress-photos").getPublicUrl(h);i.push(b),console.log(" Uploaded successfully, URL:",b)}console.log(" All uploaded photo URLs:",i)}else i=r.photos;const o={project_id:r.projectId,task_id:r.taskId||null,description:r.description,photos:i,posted_by:r.postedBy,date:r.date,user_id:n};console.log(" Inserting into database:",o);const{data:l,error:d}=await _e.from("progress_updates").insert(o).select().single();if(d)throw console.error(" Database insert error:",d),d.code==="42P01"&&alert("Progress updates table does not exist. Please run the database migration script."),d;console.log(" Successfully saved to database:",l);const u={id:l.id,projectId:l.project_id,taskId:l.task_id,description:l.description,photos:l.photos||[],postedBy:l.posted_by,date:l.date};s(m=>({progressUpdates:[u,...m.progressUpdates],loading:!1})),console.log(" Progress update added successfully!")}catch(n){console.error(" Error adding progress update:",n),alert(`Failed to save progress update: ${n.message}`),s({error:n.message||"Failed to add progress update",loading:!1})}},deleteProgressUpdate:async r=>{console.log(" deleteProgressUpdate called for:",r),s({loading:!0,error:null});try{const{error:a}=await _e.from("progress_updates").delete().eq("id",r);if(a)throw console.error(" Database delete error:",a),a;console.log(" Successfully deleted from database"),s(n=>({progressUpdates:n.progressUpdates.filter(i=>i.id!==r),loading:!1})),console.log(" Progress update deleted successfully!"),alert("Progress update deleted successfully!")}catch(a){console.error(" Error deleting progress update:",a),alert(`Failed to delete progress update: ${a.message}`),s({error:a.message||"Failed to delete progress update",loading:!1})}}})),BQ=({estimate:s,onUpdateEstimate:t,onAddItem:r,onUpdateItem:a,onRemoveItem:n,onLogoUpload:i,clients:o,projects:l})=>{const{profile:d}=Qc(),u=Zt(),{addClient:m}=jl(),{addProject:h}=Eh();if(!s)return e.jsx("div",{className:"p-6 text-center text-gray-500",children:"No estimate data available"});const x={...s,items:s.items||[],branding:s.branding||{logo:"",primaryColor:"#3b82f6",secondaryColor:"#1e40af",fontFamily:"Inter, sans-serif"},customFields:s.customFields||{},createdAt:s.createdAt||new Date().toISOString(),expiresAt:s.expiresAt||new Date(Date.now()+720*60*60*1e3).toISOString(),taxRate:s.taxRate||0,taxAmount:s.taxAmount||0,subtotal:s.subtotal||0,total:s.total||0},[f,b]=p.useState({id:"",description:"",quantity:1,unit:"each",unitPrice:0,totalPrice:0,type:"material"}),[v,j]=p.useState("details"),[S,C]=p.useState(!1),[B,F]=p.useState(!1),[Q,q]=p.useState({name:"",email:"",phone:"",company:""}),[P,D]=p.useState({name:"",description:""}),_=(K,H)=>{t({...x,[K]:H})},$=()=>{const K={...f,id:`item-${Date.now()}`,totalPrice:f.quantity*f.unitPrice};r(K),b({id:"",description:"",quantity:1,unit:"each",unitPrice:0,totalPrice:0,type:"material"})},k=K=>{const H={id:`item-${Date.now()}`,description:"",quantity:1,unit:K==="labor"?"hour":"each",unitPrice:0,totalPrice:0,type:K};r(H)},L=(K,H,I)=>{const ee={...x.items[K],[H]:I};(H==="quantity"||H==="unitPrice")&&(ee.totalPrice=ee.quantity*ee.unitPrice),a(K,ee)},E=(K,H)=>{const I={...f,[K]:H};(K==="quantity"||K==="unitPrice")&&(I.totalPrice=I.quantity*I.unitPrice),b(I)},O=(K,H)=>{t({...x,branding:{...x.branding,[K]:H}})},le=K=>{K==="__CREATE_NEW__"?C(!0):(_("clientName",K),C(!1))},te=K=>{K==="__CREATE_NEW__"?F(!0):(_("projectId",K),F(!1))},V=async()=>{if(!Q.name.trim()){alert("Client name is required");return}if(!Q.email.trim()){alert("Email is required");return}if(!Q.phone.trim()){alert("Phone number is required");return}try{console.log(" Creating client with data:",Q),await m({name:Q.name,email:Q.email,phone:Q.phone,company:Q.company,status:"active"}),console.log(" Client created successfully!"),_("clientName",Q.name),q({name:"",email:"",phone:"",company:""}),C(!1)}catch(K){console.error("Error creating client:",K)}},M=async()=>{if(!P.name.trim()){alert("Project name is required");return}if(!x.clientName){alert("Please select a client first before creating a project");return}try{await h({name:P.name,client:x.clientName,description:P.description,status:"active",priority:"medium",startDate:new Date().toISOString(),endDate:new Date(Date.now()+720*60*60*1e3).toISOString(),budget:0}),alert("Project created successfully! Please select it from the dropdown."),D({name:"",description:""}),F(!1)}catch(K){console.error("Error creating project:",K)}},ie=async()=>{if(!x.projectId){alert("Please select a project first to auto-populate labor costs.");return}try{const{data:K,error:H}=await _e.from("project_team_members").select("member_name, member_email, role, hourly_rate").eq("project_id",x.projectId);if(H){console.error("Error fetching team members:",H),alert("Failed to fetch team members. Please try again.");return}if(!K||K.length===0){alert("No team members found for this project. Add team members to the project first.");return}K.forEach(I=>{const ee={id:`labor-${Date.now()}-${Math.random()}`,description:`${I.member_name}${I.role?` (${I.role})`:""}`,quantity:0,unit:"hour",unitPrice:I.hourly_rate||0,totalPrice:0,type:"labor",notes:I.member_email?`Contact: ${I.member_email}`:void 0};r(ee)}),alert(`Added ${K.length} team member(s) to labor section. Enter hours for each.`)}catch(K){console.error("Error auto-populating labor:",K),alert("An error occurred. Please try again.")}};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Estimate"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j("details"),className:`px-3 py-1.5 text-sm font-medium rounded-md ${v==="details"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Details"}),e.jsx("button",{onClick:()=>j("items"),className:`px-3 py-1.5 text-sm font-medium rounded-md ${v==="items"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Line Items"}),e.jsx("button",{onClick:()=>j("branding"),className:`px-3 py-1.5 text-sm font-medium rounded-md ${v==="branding"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Branding"}),e.jsx("button",{onClick:()=>j("terms"),className:`px-3 py-1.5 text-sm font-medium rounded-md ${v==="terms"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Terms & Notes"})]})]})}),e.jsxs("div",{className:"p-6",children:[v==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Estimate Title"}),e.jsx("input",{type:"text",value:x.title,onChange:K=>_("title",K.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Client"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ns,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{value:S?"__CREATE_NEW__":x.clientName||"",onChange:K=>le(K.target.value),className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Select Client"}),e.jsx("option",{value:"__CREATE_NEW__",className:"font-semibold text-blue-600",children:"+ Create New Client"}),o.map(K=>e.jsx("option",{value:K.name,children:K.name},K.id))]})]}),S&&e.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Quick Create Client"}),e.jsx("button",{onClick:()=>{C(!1),q({name:"",email:"",phone:"",company:""})},className:"text-blue-600 hover:text-blue-800",children:e.jsx(xt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Client Name *",value:Q.name,onChange:K=>q({...Q,name:K.target.value}),className:"block w-full px-3 py-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),e.jsx("input",{type:"email",placeholder:"Email *",value:Q.email,onChange:K=>q({...Q,email:K.target.value}),className:"block w-full px-3 py-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("input",{type:"tel",placeholder:"Phone *",value:Q.phone,onChange:K=>q({...Q,phone:K.target.value}),className:"block w-full px-3 py-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",required:!0}),e.jsx("input",{type:"text",placeholder:"Company",value:Q.company,onChange:K=>q({...Q,company:K.target.value}),className:"block w-full px-3 py-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),e.jsx("button",{onClick:V,disabled:!Q.name.trim()||!Q.email.trim()||!Q.phone.trim(),className:"w-full px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Create Client"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ny,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{value:B?"__CREATE_NEW__":x.projectId||"",onChange:K=>te(K.target.value),className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:!x.clientName,children:[e.jsx("option",{value:"",children:"Select Project"}),e.jsx("option",{value:"__CREATE_NEW__",className:"font-semibold text-blue-600",children:"+ Create New Project"}),l.map(K=>e.jsx("option",{value:K.id,children:K.name},K.id))]})]}),!x.clientName&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Select a client first"}),B&&e.jsxs("div",{className:"mt-3 p-4 bg-blue-50 border border-blue-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900",children:"Quick Create Project"}),e.jsx("button",{onClick:()=>{F(!1),D({name:"",description:""})},className:"text-blue-600 hover:text-blue-800",children:e.jsx(xt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"text",placeholder:"Project Name *",value:P.name,onChange:K=>D({...P,name:K.target.value}),className:"block w-full px-3 py-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),e.jsx("textarea",{placeholder:"Description (optional)",value:P.description,onChange:K=>D({...P,description:K.target.value}),rows:2,className:"block w-full px-3 py-2 text-sm border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("p",{className:"text-xs text-blue-700",children:["Client: ",e.jsx("strong",{children:x.clientName})]}),e.jsx("button",{onClick:M,disabled:!P.name.trim(),className:"w-full px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed",children:"Create Project"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created Date"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:x.createdAt?x.createdAt.split("T")[0]:new Date().toISOString().split("T")[0],onChange:K=>_("createdAt",K.target.value),className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Expiration Date"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Fr,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"date",value:x.expiresAt?x.expiresAt.split("T")[0]:new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0],onChange:K=>_("expiresAt",K.target.value),className:"block w-full pl-10 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Rate (%)"}),e.jsx("div",{className:"mt-1 relative rounded-md shadow-sm",children:e.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:x.taxRate,onChange:K=>_("taxRate",parseFloat(K.target.value)),className:"block w-full px-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})})]})]}),v==="items"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:"Actions"})})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[x.items.map((K,H)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",value:K.description,onChange:I=>L(H,"description",I.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:K.type,onChange:I=>L(H,"type",I.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"material",children:"Material"}),e.jsx("option",{value:"labor",children:"Labor"}),e.jsx("option",{value:"equipment",children:"Equipment"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"number",min:"0",step:"0.01",value:K.quantity,onChange:I=>L(H,"quantity",parseFloat(I.target.value)),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",value:K.unit,onChange:I=>L(H,"unit",I.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:K.unitPrice,onChange:I=>L(H,"unitPrice",parseFloat(I.target.value)),className:"block w-full pl-7 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",(K.quantity*K.unitPrice).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:()=>n(H),className:"text-red-600 hover:text-red-900",children:e.jsx(nr,{className:"h-5 w-5"})})})]},K.id)),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",value:f.description,onChange:K=>E("description",K.target.value),placeholder:"Enter description",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:f.type,onChange:K=>E("type",K.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"material",children:"Material"}),e.jsx("option",{value:"labor",children:"Labor"}),e.jsx("option",{value:"equipment",children:"Equipment"}),e.jsx("option",{value:"other",children:"Other"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"number",min:"0",step:"0.01",value:f.quantity,onChange:K=>E("quantity",parseFloat(K.target.value)),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("input",{type:"text",value:f.unit,onChange:K=>E("unit",K.target.value),placeholder:"each",className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:f.unitPrice,onChange:K=>E("unitPrice",parseFloat(K.target.value)),className:"block w-full pl-7 pr-3 py-2 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",(f.quantity*f.unitPrice).toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx("button",{onClick:$,disabled:!f.description||f.quantity<=0||f.unitPrice<=0,className:"text-blue-600 hover:text-blue-900 disabled:text-gray-400 disabled:cursor-not-allowed",children:e.jsx(Gt,{className:"h-5 w-5"})})})]})]})]})}),e.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Quick Add Line Items"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:()=>k("material"),className:"inline-flex flex-col items-center justify-center px-4 py-3 border-2 border-blue-300 shadow-sm text-sm font-medium rounded-lg text-blue-700 bg-blue-50 hover:bg-blue-100 hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all",children:[e.jsx(AA,{className:"h-6 w-6 mb-1"}),e.jsx("span",{children:"Material"})]}),e.jsxs("button",{onClick:()=>k("labor"),className:"inline-flex flex-col items-center justify-center px-4 py-3 border-2 border-green-300 shadow-sm text-sm font-medium rounded-lg text-green-700 bg-green-50 hover:bg-green-100 hover:border-green-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all",children:[e.jsx(qE,{className:"h-6 w-6 mb-1"}),e.jsx("span",{children:"Labor"})]}),e.jsxs("button",{onClick:()=>k("equipment"),className:"inline-flex flex-col items-center justify-center px-4 py-3 border-2 border-orange-300 shadow-sm text-sm font-medium rounded-lg text-orange-700 bg-orange-50 hover:bg-orange-100 hover:border-orange-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition-all",children:[e.jsx(r6,{className:"h-6 w-6 mb-1"}),e.jsx("span",{children:"Equipment"})]}),e.jsxs("button",{onClick:()=>k("other"),className:"inline-flex flex-col items-center justify-center px-4 py-3 border-2 border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-gray-50 hover:bg-gray-100 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition-all",children:[e.jsx(zE,{className:"h-6 w-6 mb-1"}),e.jsx("span",{children:"Other"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsxs("button",{onClick:ie,disabled:!x.projectId,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",title:x.projectId?"Add team members as labor items":"Select a project first",children:[e.jsx(Sa,{className:"h-5 w-5 mr-2"}),"Add employees for labor cost"]})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("table",{className:"min-w-full",children:e.jsxs("tfoot",{children:[e.jsxs("tr",{children:[e.jsx("td",{colSpan:5,className:"px-6 py-2 text-right text-sm font-medium text-gray-900",children:"Subtotal"}),e.jsxs("td",{className:"px-6 py-2 whitespace-nowrap text-sm text-gray-900",children:["$",x.subtotal.toFixed(2)]}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsxs("td",{colSpan:5,className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:["Tax (",x.taxRate,"%)"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",x.taxAmount.toFixed(2)]}),e.jsx("td",{})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:5,className:"px-6 py-4 text-right text-sm font-medium text-gray-900",children:"Total"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:["$",x.total.toFixed(2)]}),e.jsx("td",{})]})]})})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>{const K={id:`item-${Date.now()}`,description:"New Section",quantity:0,unit:"",unitPrice:0,totalPrice:0,type:"section"};r(K)},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add Section Header"]})})]}),v==="branding"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Logo"}),e.jsx("div",{className:"mt-1",children:d?.logo_url?e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"border-2 border-gray-200 rounded-lg p-4 bg-gray-50 inline-block",children:e.jsx("img",{src:d.logo_url,alt:"Company Logo",className:"h-24 w-auto object-contain"})}),e.jsxs("p",{className:"text-xs text-gray-500",children:["This logo will appear on all your estimates."," ",e.jsx("button",{onClick:()=>u("/settings"),className:"text-blue-600 hover:text-blue-800 underline",children:"Change in Settings"})]})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[e.jsx($E,{className:"h-12 w-12 mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"No company logo uploaded"}),e.jsx("button",{onClick:()=>u("/settings"),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:"Upload logo in Settings"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Font Family"}),e.jsxs("select",{value:x.branding.fontFamily,onChange:K=>O("fontFamily",K.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"Inter, sans-serif",children:"Inter"}),e.jsx("option",{value:"Roboto, sans-serif",children:"Roboto"}),e.jsx("option",{value:"Poppins, sans-serif",children:"Poppins"}),e.jsx("option",{value:"Arial, sans-serif",children:"Arial"}),e.jsx("option",{value:"Georgia, serif",children:"Georgia"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Primary Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-md border-2 border-gray-300 flex-shrink-0",style:{backgroundColor:x.branding.primaryColor}}),e.jsxs("select",{value:x.branding.primaryColor,onChange:K=>O("primaryColor",K.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"#3b82f6",children:"Blue"}),e.jsx("option",{value:"#ef4444",children:"Red"}),e.jsx("option",{value:"#10b981",children:"Green"}),e.jsx("option",{value:"#f59e0b",children:"Orange"}),e.jsx("option",{value:"#8b5cf6",children:"Purple"}),e.jsx("option",{value:"#ec4899",children:"Pink"}),e.jsx("option",{value:"#14b8a6",children:"Teal"}),e.jsx("option",{value:"#f97316",children:"Burnt Orange"}),e.jsx("option",{value:"#6366f1",children:"Indigo"}),e.jsx("option",{value:"#84cc16",children:"Lime"}),e.jsx("option",{value:"#06b6d4",children:"Cyan"}),e.jsx("option",{value:"#64748b",children:"Slate"}),e.jsx("option",{value:"#1f2937",children:"Dark Gray"}),e.jsx("option",{value:"#000000",children:"Black"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Secondary Color"}),e.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-md border-2 border-gray-300 flex-shrink-0",style:{backgroundColor:x.branding.secondaryColor}}),e.jsxs("select",{value:x.branding.secondaryColor,onChange:K=>O("secondaryColor",K.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"#1e40af",children:"Dark Blue"}),e.jsx("option",{value:"#b91c1c",children:"Dark Red"}),e.jsx("option",{value:"#047857",children:"Dark Green"}),e.jsx("option",{value:"#d97706",children:"Dark Orange"}),e.jsx("option",{value:"#6d28d9",children:"Dark Purple"}),e.jsx("option",{value:"#be185d",children:"Dark Pink"}),e.jsx("option",{value:"#0f766e",children:"Dark Teal"}),e.jsx("option",{value:"#c2410c",children:"Dark Burnt Orange"}),e.jsx("option",{value:"#4338ca",children:"Dark Indigo"}),e.jsx("option",{value:"#65a30d",children:"Dark Lime"}),e.jsx("option",{value:"#0e7490",children:"Dark Cyan"}),e.jsx("option",{value:"#475569",children:"Dark Slate"}),e.jsx("option",{value:"#111827",children:"Almost Black"}),e.jsx("option",{value:"#000000",children:"Black"})]})]})]})]}),e.jsx("div",{className:"p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Dd,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Branding Tips"}),e.jsx("div",{className:"mt-2 text-sm text-blue-700",children:e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Use your company's logo for brand recognition"}),e.jsx("li",{children:"Choose colors that match your brand identity"}),e.jsx("li",{children:"Select fonts that are easy to read and professional"}),e.jsx("li",{children:"Maintain consistent branding across all estimates"})]})})]})]})})]}),v==="terms"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Terms & Conditions"}),e.jsx("textarea",{rows:4,value:x.terms,onChange:K=>_("terms",K.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter terms and conditions..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{rows:4,value:x.notes,onChange:K=>_("notes",K.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter additional notes..."})]}),d?.default_terms&&e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Dd,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Company Default Terms"}),e.jsx("p",{className:"mt-1 text-xs text-blue-600",children:"Your default terms from Settings are automatically applied to new estimates. You can edit them above or change the defaults in Settings."}),e.jsx("button",{onClick:()=>u("/settings"),className:"mt-2 text-xs text-blue-600 hover:text-blue-800 underline",children:"Edit default terms in Settings"})]})]})})]})]})]})},kQ=({estimate:s,clients:t,projects:r,hideStatus:a=!1})=>{const{t:n}=fr(),{profile:i}=Qc(),o=t.find(u=>u.name===s.clientName||u.id===s.clientId),l=r.find(u=>u.name===s.projectName||u.id===s.projectId),d=u=>{try{return Nr(new Date(u),"MMMM d, yyyy")}catch{return u}};return e.jsxs("div",{className:"p-4 sm:p-8 max-w-4xl mx-auto",style:{fontFamily:s.branding?.fontFamily||"Inter"},children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 sm:gap-0 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"flex-1",children:[i?.logo_url&&e.jsx("img",{src:i.logo_url,alt:"Company Logo",className:"h-12 sm:h-16 w-auto object-contain mb-3 sm:mb-4"}),e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",style:{color:s.branding?.primaryColor||"#3B82F6"},children:s.title}),e.jsxs("p",{className:"text-gray-500 mt-1 text-sm",children:["Estimate #",s.id.slice(-6)]})]}),e.jsxs("div",{className:"text-left sm:text-right w-full sm:w-auto",children:[!a&&e.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mb-2",children:s.status.toUpperCase()}),e.jsxs("div",{className:`flex items-center text-gray-600 text-xs sm:text-sm font-semibold ${a?"":"mt-2"}`,children:[e.jsx(Fr,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsxs("span",{children:["Created: ",d(s.createdAt)]})]}),e.jsxs("div",{className:"flex items-center text-gray-600 text-xs sm:text-sm font-semibold mt-1",children:[e.jsx(Fr,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1"}),e.jsxs("span",{children:["Valid until: ",d(s.expiresAt)]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-8 mb-6 sm:mb-8",children:[e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-3 sm:p-4",children:[e.jsx("h2",{className:"text-xs sm:text-sm font-bold text-gray-700 mb-2",children:n("clients.client")}),o?e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:o.name}),o.email&&e.jsx("p",{className:"text-gray-700 text-sm mt-1 font-medium",children:o.email}),o.phone&&e.jsx("p",{className:"text-gray-700 text-sm font-medium",children:o.phone}),o.address&&e.jsx("p",{className:"text-gray-700 text-sm font-medium",children:o.address})]}):s.clientName?e.jsx("div",{children:e.jsx("p",{className:"font-bold text-gray-900",children:s.clientName})}):e.jsx("p",{className:"text-gray-500 italic",children:"No client selected"})]}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-3 sm:p-4",children:[e.jsx("h2",{className:"text-xs sm:text-sm font-bold text-gray-700 mb-2",children:"PROJECT"}),l?e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:l.name}),l.address&&e.jsx("p",{className:"text-gray-700 text-sm mt-1 font-medium",children:l.address})]}):s.projectName?e.jsx("div",{children:e.jsx("p",{className:"font-bold text-gray-900",children:s.projectName})}):e.jsx("p",{className:"text-gray-500 italic",children:"No project selected"})]})]}),(s.customFields?.field1Name||s.customFields?.field2Name)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[s.customFields?.field1Name&&e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4",children:[e.jsx("h2",{className:"text-sm font-bold text-gray-700 mb-2",children:s.customFields.field1Name.toUpperCase()}),e.jsx("p",{className:"font-bold text-gray-900",children:s.customFields.field1Value||"N/A"})]}),s.customFields?.field2Name&&e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-4",children:[e.jsx("h2",{className:"text-sm font-bold text-gray-700 mb-2",children:s.customFields.field2Name.toUpperCase()}),e.jsx("p",{className:"font-bold text-gray-900",children:s.customFields.field2Value||"N/A"})]})]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("div",{className:"hidden sm:block overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y-2 divide-gray-300 border-2 border-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:(s.branding?.primaryColor||"#3B82F6")+"20"},children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",style:{color:s.branding?.primaryColor||"#3B82F6"},children:"Description"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",style:{color:s.branding?.primaryColor||"#3B82F6"},children:"Quantity"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-bold uppercase tracking-wider",style:{color:s.branding?.primaryColor||"#3B82F6"},children:"Unit"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-bold uppercase tracking-wider",style:{color:s.branding?.primaryColor||"#3B82F6"},children:"Unit Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-bold uppercase tracking-wider",style:{color:s.branding?.primaryColor||"#3B82F6"},children:"Total"})]})}),e.jsx("tbody",{className:"bg-white divide-y-2 divide-gray-200",children:s.items.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No items added to this estimate"})}):s.items.map(u=>e.jsxs("tr",{className:u.type==="section"?"bg-gray-50":"",children:[e.jsx("td",{className:"px-6 py-4",children:u.type==="section"?e.jsx("h3",{className:"font-bold text-base",style:{color:s.branding?.secondaryColor||"#6B7280"},children:u.description}):e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:u.description})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-semibold",children:u.type!=="section"?u.quantity:""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700 font-semibold",children:u.type!=="section"?u.unit:""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-semibold",children:u.type!=="section"&&u.unitPrice!=null?`$${u.unitPrice.toFixed(2)}`:u.type!=="section"?"$0.00":""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right font-bold",children:u.type!=="section"?`$${(u.totalPrice!=null?u.totalPrice:(u.unitPrice??0)*(u.quantity??0)).toFixed(2)}`:""})]},u.id))}),e.jsxs("tfoot",{children:[e.jsxs("tr",{className:"border-t-2 border-gray-300",children:[e.jsx("td",{colSpan:4,className:"px-6 py-4 text-right text-sm font-bold text-gray-900",children:"Subtotal"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:["$",(s.subtotal??0).toFixed(2)]})]}),e.jsxs("tr",{className:"border-t border-gray-200",children:[e.jsxs("td",{colSpan:4,className:"px-6 py-4 text-right text-sm font-bold text-gray-900",children:["Tax (",s.taxRate??0,"%)"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:["$",(s.taxAmount??0).toFixed(2)]})]}),e.jsxs("tr",{className:"border-t-2 border-gray-300 bg-gray-50",children:[e.jsx("td",{colSpan:4,className:"px-6 py-4 text-right text-base font-extrabold text-gray-900",children:"TOTAL"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-xl font-extrabold text-right",style:{color:s.branding?.primaryColor||"#3B82F6"},children:["$",(s.total??0).toFixed(2)]})]})]})]})}),e.jsxs("div",{className:"sm:hidden space-y-3",children:[e.jsx("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-lg p-3 mb-4",children:e.jsx("h3",{className:"text-xs font-bold uppercase text-blue-700 mb-1",children:"Line Items"})}),s.items.length===0?e.jsx("div",{className:"text-center text-sm text-gray-500 py-8",children:"No items added to this estimate"}):s.items.map(u=>e.jsx("div",{className:`border-2 rounded-lg p-3 ${u.type==="section"?"border-gray-400 bg-gray-50":"border-gray-300 bg-white"}`,children:u.type==="section"?e.jsx("h3",{className:"font-bold text-sm",style:{color:s.branding?.secondaryColor||"#6B7280"},children:u.description}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-sm text-gray-900 mb-2",children:u.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Qty:"}),e.jsxs("span",{className:"ml-1 font-semibold text-gray-700",children:[u.quantity," ",u.unit]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-gray-500",children:"Unit Price:"}),e.jsxs("span",{className:"ml-1 font-semibold text-gray-900",children:["$",u.unitPrice!=null?u.unitPrice.toFixed(2):"0.00"]})]})]}),e.jsxs("div",{className:"mt-2 pt-2 border-t border-gray-200 text-right",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Item Total: "}),e.jsxs("span",{className:"font-bold text-base",style:{color:s.branding?.primaryColor||"#3B82F6"},children:["$",(u.totalPrice!=null?u.totalPrice:(u.unitPrice??0)*(u.quantity??0)).toFixed(2)]})]})]})},u.id)),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden mt-4",children:[e.jsxs("div",{className:"bg-gray-50 px-3 py-2 flex justify-between items-center border-b border-gray-300",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-700",children:"Subtotal"}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",(s.subtotal??0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-white px-3 py-2 flex justify-between items-center border-b border-gray-300",children:[e.jsxs("span",{className:"text-xs font-semibold text-gray-700",children:["Tax (",s.taxRate??0,"%)"]}),e.jsxs("span",{className:"text-sm font-bold text-gray-900",children:["$",(s.taxAmount??0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-blue-50 px-3 py-3 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-extrabold text-gray-900",children:"TOTAL"}),e.jsxs("span",{className:"text-xl font-extrabold",style:{color:s.branding?.primaryColor||"#3B82F6"},children:["$",(s.total??0).toFixed(2)]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-8 mb-6 sm:mb-8",children:[s.notes&&e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-3 sm:p-4",children:[e.jsx("h2",{className:"text-xs sm:text-sm font-bold mb-2 text-gray-700",children:"NOTES"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-800 font-medium",children:s.notes})]}),s.terms&&e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-3 sm:p-4",children:[e.jsx("h2",{className:"text-xs sm:text-sm font-bold mb-2 text-gray-700",children:"TERMS & CONDITIONS"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-800 font-medium",children:s.terms})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-6 sm:pt-8 mt-6 sm:mt-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs sm:text-sm font-medium text-gray-500 mb-2",children:"CUSTOMER ACCEPTANCE"}),e.jsx("div",{className:"border-b border-gray-300 pb-6 sm:pb-8 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Signature"})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xs sm:text-sm font-medium text-gray-500 mb-2",children:"DATE"}),e.jsx("div",{className:"border-b border-gray-300 pb-6 sm:pb-8 mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"MM/DD/YYYY"})]})]})})]})},FQ=({projectType:s,onGenerateItems:t,onClose:r})=>{const[a,n]=p.useState(!1),[i,o]=p.useState([]),[l,d]=p.useState([]),[u,m]=p.useState({type:s||"",size:"",quality:"standard",location:"",additionalInfo:""}),[h,x]=p.useState([]);p.useEffect(()=>{s&&(s.toLowerCase().includes("deck")?x(["Include pressure-treated lumber for the framing","Add composite decking for the surface","Include railing system","Add stairs (if applicable)","Include concrete for footings"]):s.toLowerCase().includes("kitchen")?x(["Include cabinets (specify grade)","Add countertops (specify material)","Include appliances","Add backsplash","Include plumbing fixtures"]):s.toLowerCase().includes("bathroom")?x(["Include vanity and sink","Add shower/tub","Include toilet","Add tile flooring","Include plumbing fixtures"]):x(["Include materials breakdown","Add labor costs","Include equipment rental","Add permit fees","Include cleanup and disposal"]))},[s]);const f=()=>{n(!0),setTimeout(()=>{const C=[];u.type.toLowerCase().includes("deck")?C.push({id:`ai-item-${Date.now()}-1`,description:"Pressure-treated lumber for framing (2x8, 2x10)",quantity:120,unit:"board feet",unitPrice:3.75,totalPrice:450,type:"material"},{id:`ai-item-${Date.now()}-2`,description:"Composite decking boards",quantity:240,unit:"sq ft",unitPrice:8.5,totalPrice:2040,type:"material"},{id:`ai-item-${Date.now()}-3`,description:"Railing system (posts, rails, balusters)",quantity:40,unit:"linear ft",unitPrice:45,totalPrice:1800,type:"material"},{id:`ai-item-${Date.now()}-4`,description:"Concrete for footings",quantity:1.5,unit:"cubic yards",unitPrice:150,totalPrice:225,type:"material"},{id:`ai-item-${Date.now()}-5`,description:"Hardware (joist hangers, screws, bolts)",quantity:1,unit:"lot",unitPrice:350,totalPrice:350,type:"material"},{id:`ai-item-${Date.now()}-6`,description:"Labor - Demolition and site prep",quantity:8,unit:"hours",unitPrice:65,totalPrice:520,type:"labor"},{id:`ai-item-${Date.now()}-7`,description:"Labor - Framing and construction",quantity:24,unit:"hours",unitPrice:75,totalPrice:1800,type:"labor"},{id:`ai-item-${Date.now()}-8`,description:"Labor - Finishing and cleanup",quantity:8,unit:"hours",unitPrice:65,totalPrice:520,type:"labor"},{id:`ai-item-${Date.now()}-9`,description:"Equipment rental",quantity:2,unit:"days",unitPrice:125,totalPrice:250,type:"equipment"},{id:`ai-item-${Date.now()}-10`,description:"Permit fees",quantity:1,unit:"each",unitPrice:250,totalPrice:250,type:"other"}):u.type.toLowerCase().includes("kitchen")?C.push({id:`ai-item-${Date.now()}-1`,description:"Kitchen cabinets (mid-grade)",quantity:15,unit:"linear ft",unitPrice:350,totalPrice:5250,type:"material"},{id:`ai-item-${Date.now()}-2`,description:"Quartz countertops",quantity:30,unit:"sq ft",unitPrice:75,totalPrice:2250,type:"material"},{id:`ai-item-${Date.now()}-3`,description:"Backsplash tile (ceramic)",quantity:30,unit:"sq ft",unitPrice:15,totalPrice:450,type:"material"},{id:`ai-item-${Date.now()}-4`,description:"Sink and faucet",quantity:1,unit:"set",unitPrice:450,totalPrice:450,type:"material"},{id:`ai-item-${Date.now()}-5`,description:"Appliance package (range, dishwasher, microwave)",quantity:1,unit:"set",unitPrice:3500,totalPrice:3500,type:"material"},{id:`ai-item-${Date.now()}-6`,description:"Labor - Cabinet installation",quantity:16,unit:"hours",unitPrice:85,totalPrice:1360,type:"labor"},{id:`ai-item-${Date.now()}-7`,description:"Labor - Countertop installation",quantity:8,unit:"hours",unitPrice:85,totalPrice:680,type:"labor"},{id:`ai-item-${Date.now()}-8`,description:"Labor - Backsplash installation",quantity:6,unit:"hours",unitPrice:75,totalPrice:450,type:"labor"},{id:`ai-item-${Date.now()}-9`,description:"Labor - Plumbing",quantity:6,unit:"hours",unitPrice:95,totalPrice:570,type:"labor"},{id:`ai-item-${Date.now()}-10`,description:"Labor - Electrical",quantity:8,unit:"hours",unitPrice:95,totalPrice:760,type:"labor"},{id:`ai-item-${Date.now()}-11`,description:"Permit fees",quantity:1,unit:"each",unitPrice:350,totalPrice:350,type:"other"},{id:`ai-item-${Date.now()}-12`,description:"Dumpster rental",quantity:1,unit:"week",unitPrice:450,totalPrice:450,type:"equipment"}):u.type.toLowerCase().includes("bathroom")?C.push({id:`ai-item-${Date.now()}-1`,description:"Vanity with sink",quantity:1,unit:"each",unitPrice:850,totalPrice:850,type:"material"},{id:`ai-item-${Date.now()}-2`,description:"Toilet",quantity:1,unit:"each",unitPrice:350,totalPrice:350,type:"material"},{id:`ai-item-${Date.now()}-3`,description:"Shower/tub unit",quantity:1,unit:"each",unitPrice:1200,totalPrice:1200,type:"material"},{id:`ai-item-${Date.now()}-4`,description:"Shower/tub faucet and trim",quantity:1,unit:"set",unitPrice:450,totalPrice:450,type:"material"},{id:`ai-item-${Date.now()}-5`,description:"Floor tile (porcelain)",quantity:40,unit:"sq ft",unitPrice:12,totalPrice:480,type:"material"},{id:`ai-item-${Date.now()}-6`,description:"Wall tile (ceramic)",quantity:100,unit:"sq ft",unitPrice:10,totalPrice:1e3,type:"material"},{id:`ai-item-${Date.now()}-7`,description:"Labor - Demolition",quantity:8,unit:"hours",unitPrice:65,totalPrice:520,type:"labor"},{id:`ai-item-${Date.now()}-8`,description:"Labor - Plumbing",quantity:12,unit:"hours",unitPrice:95,totalPrice:1140,type:"labor"},{id:`ai-item-${Date.now()}-9`,description:"Labor - Tile installation",quantity:16,unit:"hours",unitPrice:75,totalPrice:1200,type:"labor"},{id:`ai-item-${Date.now()}-10`,description:"Labor - Fixture installation",quantity:8,unit:"hours",unitPrice:85,totalPrice:680,type:"labor"},{id:`ai-item-${Date.now()}-11`,description:"Permit fees",quantity:1,unit:"each",unitPrice:250,totalPrice:250,type:"other"}):C.push({id:`ai-item-${Date.now()}-1`,description:"Materials",quantity:1,unit:"lot",unitPrice:2500,totalPrice:2500,type:"material"},{id:`ai-item-${Date.now()}-2`,description:"Labor",quantity:40,unit:"hours",unitPrice:75,totalPrice:3e3,type:"labor"},{id:`ai-item-${Date.now()}-3`,description:"Equipment rental",quantity:1,unit:"week",unitPrice:500,totalPrice:500,type:"equipment"},{id:`ai-item-${Date.now()}-4`,description:"Permit fees",quantity:1,unit:"each",unitPrice:250,totalPrice:250,type:"other"}),o(C),d(C.map(B=>B.id)),n(!1)},2e3)},b=C=>{d(B=>B.includes(C)?B.filter(F=>F!==C):[...B,C])},v=()=>{const C=i.filter(B=>l.includes(B.id));t(C)},j=()=>{d(i.map(C=>C.id))},S=()=>{d([])};return e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jx,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"AI Estimate Assistant"})]}),e.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-500",children:e.jsx(xt,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project Type"}),e.jsx("input",{type:"text",value:u.type,onChange:C=>m({...u,type:C.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., Deck Installation, Kitchen Remodel"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project Size"}),e.jsx("input",{type:"text",value:u.size,onChange:C=>m({...u,size:C.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., 200 sq ft, 10x12 ft"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quality Level"}),e.jsxs("select",{value:u.quality,onChange:C=>m({...u,quality:C.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"economy",children:"Economy"}),e.jsx("option",{value:"standard",children:"Standard"}),e.jsx("option",{value:"premium",children:"Premium"}),e.jsx("option",{value:"luxury",children:"Luxury"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project Location"}),e.jsx("input",{type:"text",value:u.location,onChange:C=>m({...u,location:C.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., New York, NY"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Details"}),e.jsx("textarea",{rows:3,value:u.additionalInfo,onChange:C=>m({...u,additionalInfo:C.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Any specific requirements or details about the project..."})]}),e.jsx("button",{onClick:f,disabled:a||!u.type,className:"w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed",children:a?e.jsxs(e.Fragment,{children:[e.jsx(An,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jx,{className:"h-4 w-4 mr-2"}),"Generate Line Items"]})})]}),h.length>0&&!i.length&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Suggestions"}),e.jsx("div",{className:"bg-blue-50 border border-blue-100 rounded-md p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(op,{className:"h-5 w-5 text-blue-500 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"Consider including these items in your estimate:"}),e.jsx("ul",{className:"text-sm text-blue-700 space-y-1 list-disc pl-5",children:h.map((C,B)=>e.jsx("li",{children:C},B))})]})]})})]}),i.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"AI Generated Items"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:j,className:"text-xs text-blue-600 hover:text-blue-800",children:"Select All"}),e.jsx("button",{onClick:S,className:"text-xs text-blue-600 hover:text-blue-800",children:"Deselect All"})]})]}),e.jsx("div",{className:"border rounded-md divide-y divide-gray-200 max-h-96 overflow-y-auto",children:i.map(C=>e.jsxs("div",{className:`p-3 flex items-start hover:bg-gray-50 ${l.includes(C.id)?"bg-blue-50":""}`,children:[e.jsx("input",{type:"checkbox",checked:l.includes(C.id),onChange:()=>b(C.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:C.description}),e.jsxs("div",{className:"mt-1 flex items-center text-xs text-gray-500",children:[e.jsxs("span",{className:"mr-2",children:[C.quantity," ",C.unit]}),e.jsx("span",{className:"mr-2",children:""}),e.jsxs("span",{children:["$",C.unitPrice.toFixed(2)," per ",C.unit]})]})]}),e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["$",C.totalPrice.toFixed(2)]})]},C.id))}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[l.length," of ",i.length," items selected"]}),e.jsxs("button",{onClick:v,disabled:l.length===0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add to Estimate"]})]}),e.jsx("div",{className:"mt-4 bg-yellow-50 border border-yellow-100 rounded-md p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Qa,{className:"h-5 w-5 text-yellow-500 mt-0.5 mr-2"}),e.jsxs("div",{className:"text-sm text-yellow-700",children:[e.jsx("p",{className:"font-medium text-yellow-800 mb-1",children:"AI-Generated Content"}),e.jsx("p",{children:"These items are generated based on your project details and industry averages. Review and adjust quantities, prices, and descriptions as needed for your specific project."})]})]})})]})]})]})},jx="estimate-pdfs";async function EQ(s,t){try{console.log("Uploading PDF to Supabase Storage:",{bucket:jx,fileName:t,size:s.size});const{data:r,error:a}=await _e.storage.from(jx).upload(t,s,{contentType:"application/pdf",cacheControl:"3600",upsert:!0});if(a)throw console.error("Supabase storage upload error:",a),a;console.log("Upload successful:",r);const{data:n}=_e.storage.from(jx).getPublicUrl(t);if(!n.publicUrl)throw new Error("Failed to generate public URL for uploaded PDF");return console.log("Public URL generated:",n.publicUrl),n.publicUrl}catch(r){throw console.error("Error uploading PDF to Supabase Storage:",r),r}}const _Q="https://ujhgwcurllkkeouzwvgk.supabase.co/functions/v1/send-estimate-email",PQ=({isOpen:s,onClose:t,estimate:r,companyInfo:a,activeTab:n,setActiveTab:i})=>{const{profile:o}=Qc(),[l,d]=p.useState([]),[u,m]=p.useState(null),[h,x]=p.useState(""),[f,b]=p.useState(""),[v,j]=p.useState(""),[S,C]=p.useState(""),[B,F]=p.useState(!1),[Q,q]=p.useState(""),[P,D]=p.useState(""),[_,$]=p.useState(""),[k,L]=p.useState(!1),[E,O]=p.useState(""),[le,te]=p.useState("");p.useEffect(()=>{s&&(M(),V(),q(o?.contractor_notification_email||""))},[s,o]),p.useEffect(()=>{if(s){const H=B?h||"Customer":u?.name||"Customer",I=a.name&&a.name!=="Your Company"?a.name:a.email.split("@")[0]||"Your Company";D(`Estimate #${r?.estimateNumber||"NEW"} from ${I}`),$(`Dear ${H},

Please find attached your estimate for the proposed work.

Estimate Details:
- Estimate #: ${r?.estimateNumber||"NEW"}
- Total Amount: $${r?.total?.toFixed(2)||"0.00"}

This estimate is valid for 30 days. Please review and click Accept or Decline in the email to let us know your decision.

If you have any questions, please don't hesitate to contact us.

Best regards,
${I}
${a.phone}
${a.email}`)}},[r,a,u,B,h,s]);const V=()=>{O(""),te(""),L(!1)},M=async()=>{try{const{data:H,error:I}=await _e.from("clients").select("id, name, email, phone, address").order("name");if(I)throw I;d(H||[])}catch(H){console.error("Error fetching clients:",H)}},ie=async()=>{const I=await(async(ee=10)=>{for(let se=0;se<ee;se++){const de=document.getElementById("estimate-preview");if(de)return de;await new Promise(re=>setTimeout(re,100))}return null})();if(I){const ee=await _y(I,{scale:1.5,logging:!1,useCORS:!0,backgroundColor:"#ffffff",windowWidth:I.scrollWidth,windowHeight:I.scrollHeight}),se=ee.toDataURL("image/png"),de=new Lt({orientation:"portrait",unit:"mm",format:"a4"}),re=de.internal.pageSize.getWidth(),z=de.internal.pageSize.getHeight(),ne=ee.width,Y=ee.height,X=Math.min(re/(ne*.264583),z/(Y*.264583)),ye=ne*.264583*X,pe=Y*.264583*X,Ce=(re-ye)/2;return de.addImage(se,"PNG",Ce,0,ye,pe),de.output("blob")}else{const ee=new Lt;return ee.setFontSize(20),ee.text(`Estimate #${r.estimateNumber}`,20,20),ee.setFontSize(12),ee.text(`Total: $${r.total?.toFixed(2)||"0.00"}`,20,40),ee.text("Unable to generate formatted PDF. Please try again.",20,60),ee.output("blob")}},K=async()=>{const{data:{user:H}}=await _e.auth.getUser();if(!H?.id){alert("User not authenticated");return}let I,ee,se;if(B){if(!h||!f){alert("Please enter client name and email");return}const{data:z,error:ne}=await _e.from("clients").insert({user_id:H.id,name:h,email:f,phone:v||null,address:S||null}).select().single();if(ne){alert(`Failed to create client: ${ne.message}`);return}I=z.email,ee=z.name,se=z.id,await M()}else{if(!u){alert("Please select a client or add a new one");return}I=u.email,ee=u.name||"Customer",se=u.id}if(!I){alert("Client email is required");return}L(!0),O(""),te("");const de=n;let re=!1;try{let z=r.id||r.estimateNumber;console.log(" Checking if estimate exists in database...",{estimateId:z});const{data:ne,error:Y}=await _e.from("estimates").select("id").eq("id",z).single();if(Y&&Y.code==="PGRST116"){console.log(" Estimate not found in database, saving it first...");const Te={id:z,user_id:H.id,estimate_number:r.estimateNumber||z,client_name:ee,client_email:I,project_id:r.projectId||null,date:new Date().toISOString().split("T")[0],valid_until:r.validUntil||null,status:r.status||"draft",subtotal:r.subtotal||0,tax_rate:r.taxRate||0,tax_amount:r.taxAmount||0,total:r.total||0,notes:r.notes||"",items:r.items||[],calculator_type:r.calculatorType||null,calculator_data:r.calculatorData||null},{error:We}=await _e.from("estimates").insert(Te);if(We)throw console.error(" Failed to save estimate to database:",We),new Error(`Failed to save estimate: ${We.message}`);console.log(" Estimate saved to database successfully")}else{if(Y)throw console.error(" Error checking estimate:",Y),new Error(`Database error: ${Y.message}`);console.log(" Estimate already exists in database")}n!=="preview"&&i&&(console.log(" Switching to Preview tab for PDF generation..."),i("preview"),re=!0,await new Promise(Te=>setTimeout(Te,300))),console.log(" Generating PDF from preview...");const X=await ie(),ye=`estimate-${r.id||r.estimateNumber}-${Date.now()}.pdf`,pe=await EQ(X,ye);te(pe);const{data:{session:Ce}}=await _e.auth.getSession();if(!Ce)throw new Error("No active session");const je={customerName:ee,customerEmail:I,subject:P,body:_,pdfUrl:pe,estimateId:r.id||r.estimateNumber,clientId:se,contractorEmail:Q||null,totalAmount:r?.total?.toFixed(2)||"0.00"},ce=await fetch(_Q,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${Ce.access_token}`},body:JSON.stringify(je)});if(!ce.ok){const Te=await ce.json();throw new Error(`Email sending failed: ${Te.error||ce.statusText}`)}O(`Email sent successfully to ${I}!`),re&&de&&i&&(console.log(` Switching back to ${de} tab...`),setTimeout(()=>i(de),500)),setTimeout(()=>{t()},3e3)}catch(z){console.error("Error sending estimate:",z),alert(`Error sending estimate: ${z instanceof Error?z.message:"Unknown error"}`),re&&de&&i&&i(de)}finally{L(!1)}};return s?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),e.jsxs("div",{className:"inline-block w-full max-w-2xl my-8 overflow-hidden text-left align-middle transition-all transform bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ba,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Send Estimate to Customer"})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",disabled:k,children:e.jsx(xt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"px-6 py-4 space-y-4",children:[E&&e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(un,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:E}),le&&e.jsxs("p",{className:"mt-1 text-xs text-green-700",children:["PDF URL: ",e.jsx("a",{href:le,target:"_blank",rel:"noopener noreferrer",className:"underline",children:le})]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(dA,{className:"inline w-4 h-4 mr-1 text-orange-600"}),"Your Email (for notifications)"]}),e.jsx("input",{type:"email",value:Q,onChange:H=>q(H.target.value),placeholder:"your-email@company.com",disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"You'll receive notifications when the customer responds to this estimate"})]}),B?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Add New Client"}),e.jsx("button",{onClick:()=>{F(!1),x(""),b(""),j(""),C("")},disabled:k,className:"text-sm text-gray-600 hover:text-gray-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Client Name *"}),e.jsx("input",{type:"text",value:h,onChange:H=>x(H.target.value),placeholder:"John Smith",disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:f,onChange:H=>b(H.target.value),placeholder:"john@example.com",disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Phone (optional)"}),e.jsx("input",{type:"tel",value:v,onChange:H=>j(H.target.value),placeholder:"(555) 123-4567",disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Address (optional)"}),e.jsx("input",{type:"text",value:S,onChange:H=>C(H.target.value),placeholder:"123 Main St, City, State",disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Client"}),e.jsx("button",{onClick:()=>F(!0),disabled:k,className:"text-sm text-blue-600 hover:text-blue-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"+ Add New Client"})]}),e.jsxs("select",{value:u?.id||"",onChange:H=>{const I=l.find(ee=>ee.id===H.target.value);m(I||null)},disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("option",{value:"",children:"Choose a client..."}),l.map(H=>e.jsxs("option",{value:H.id,children:[H.name," (",H.email,")"]},H.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Subject"}),e.jsx("input",{type:"text",value:P,onChange:H=>D(H.target.value),disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Message"}),e.jsx("textarea",{value:_,onChange:H=>$(H.target.value),rows:8,disabled:k,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ra,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:'What happens when you click "Send":'}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-700 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"PDF estimate will be uploaded to secure storage"}),e.jsx("li",{children:"Email will be sent to customer with Accept/Decline buttons"}),e.jsx("li",{children:"Customer can respond directly from the email"}),e.jsx("li",{children:"You'll be notified of their decision"})]})]})]})})]}),e.jsxs("div",{className:"flex items-center justify-end px-6 py-4 space-x-3 bg-gray-50 border-t border-gray-200",children:[e.jsx("button",{onClick:t,disabled:k,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:k||!B&&!u||B&&(!f||!h),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:k?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"inline w-4 h-4 mr-2 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ba,{className:"inline w-4 h-4 mr-2"}),"Send to Customer"]})})]})]})]})}):null},SA="estimate_email_responses";async function IQ(s){try{if(!s.estimate_id)throw new Error("estimate_id is required");if(!s.customer_name)throw new Error("customer_name is required");if(!s.customer_email)throw new Error("customer_email is required");const{data:{user:t}}=await _e.auth.getUser();if(!t?.id)throw new Error("User not authenticated");const r={estimate_id:s.estimate_id,customer_name:s.customer_name,customer_email:s.customer_email,email_subject:s.email_subject||"",email_body:s.email_body||"",pdf_url:s.pdf_url||"",client_id:s.client_id||null,sent_at:new Date().toISOString(),user_id:t.id,accepted:null,declined:null};console.log("Creating estimate response:",r);const{data:a,error:n}=await _e.from(SA).insert(r).select().single();if(n)throw console.error("Database insert error:",n),n;return console.log("Estimate response created successfully:",a),{success:!0,data:a}}catch(t){return console.error("Error creating estimate response:",t),{success:!1,error:t instanceof Error?t:new Error("Unknown error")}}}async function UQ(s,t){try{if(!s)throw new Error("responseId is required");if(!t.response_status||!["accepted","declined"].includes(t.response_status))throw new Error('response_status must be "accepted" or "declined"');const r={responded_at:t.responded_at||new Date().toISOString(),updated_at:new Date().toISOString()};t.response_status==="accepted"?(r.accepted=!0,r.declined=null):(r.declined=!0,r.accepted=null),console.log("Updating estimate response:",{responseId:s,updateData:r});const{data:a,error:n}=await _e.from(SA).update(r).eq("id",s).select().single();if(n)throw console.error("Database update error:",n),n;return console.log("Estimate response updated successfully:",a),{success:!0,data:a}}catch(r){return console.error("Error updating estimate response:",r),{success:!1,error:r instanceof Error?r:new Error("Unknown error")}}}async function LQ(s){try{if(!s)throw new Error("estimateId is required");console.log("Fetching estimate response for estimate:",s);const{data:t,error:r}=await _e.from(SA).select("*").eq("estimate_id",s).single();if(r){if(r.code==="PGRST116")return{success:!1,error:new Error("Estimate response not found")};throw console.error("Database query error:",r),r}return console.log("Estimate response found:",t),{success:!0,data:t}}catch(t){return console.error("Error fetching estimate response:",t),{success:!1,error:t instanceof Error?t:new Error("Unknown error")}}}async function TQ(){try{const{data:{user:s}}=await _e.auth.getUser();if(!s?.id)return console.warn("User not authenticated, returning empty array"),[];console.log("Fetching all estimate responses for user:",s.id);const{data:t,error:r}=await _e.from(SA).select("*").eq("user_id",s.id).order("created_at",{ascending:!1});return r?(console.error("Database query error:",r),[]):(console.log(`Found ${t?.length||0} estimate responses`),t||[])}catch(s){return console.error("Error fetching user estimate responses:",s),[]}}async function DQ(s){try{if(!s)throw new Error("responseId is required");console.log("Fetching estimate response by ID:",s);const{data:t,error:r}=await _e.from(SA).select("*").eq("id",s).single();if(r){if(r.code==="PGRST116")return{success:!1,error:new Error("Estimate response not found")};throw console.error("Database query error:",r),r}return console.log("Estimate response found:",t),{success:!0,data:t}}catch(t){return console.error("Error fetching estimate response by ID:",t),{success:!1,error:t instanceof Error?t:new Error("Unknown error")}}}async function MQ(s){try{if(!s)throw new Error("responseId is required");const{data:{user:t}}=await _e.auth.getUser();if(!t?.id)throw new Error("User not authenticated");console.log("Deleting estimate response:",s);const{error:r}=await _e.from(SA).delete().eq("id",s).eq("user_id",t.id);if(r)throw console.error("Database delete error:",r),r;return console.log("Estimate response deleted successfully"),{success:!0}}catch(t){return console.error("Error deleting estimate response:",t),{success:!1,error:t instanceof Error?t:new Error("Unknown error")}}}const RQ={createEstimateResponse:IQ,updateEstimateResponse:UQ,getEstimateResponseByEstimateId:LQ,getAllResponsesForUser:TQ,getEstimateResponseById:DQ,deleteEstimateResponse:MQ},QQ=()=>{const{t:s}=fr(),t=Tc(),r=Zt(),{profile:a}=Qc(),{getPendingCalculatorImport:n,clearPendingCalculatorImport:i}=hS(),[o,l]=p.useState("editor"),[d,u]=p.useState(null),[m,h]=p.useState(!1),[x,f]=p.useState(!1),[b,v]=p.useState(!1),[j,S]=p.useState(!1),[C,B]=p.useState(!1),[F,Q]=p.useState([]),[q,P]=p.useState(!1),[D,_]=p.useState(!1),[$,k]=p.useState(new Map),[L,E]=p.useState(""),O=p.useRef(!1),le=p.useRef(""),{projects:te,fetchProjects:V}=Eh(),{clients:M,fetchClients:ie}=jl(),{createFromCalculator:K,fetchEstimates:H,updateEstimate:I}=aS(),{convertEstimateToInvoice:ee}=jA(),se=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(J){const Ae=Math.random()*16|0;return(J==="x"?Ae:Ae&3|8).toString(16)});p.useEffect(()=>{(async()=>{if(console.log("EstimateGenerator - Location state:",t.state),t.state?.fromCalculator&&t.state?.calculatorData){if(console.log("Processing calculator data:",t.state.calculatorData),O.current){console.log(" BLOCKED: Already saved calculator estimate in this session");return}console.log(" SAVING: First save, proceeding..."),O.current=!0,localStorage.removeItem("currentEstimate"),localStorage.removeItem("estimateData");const Ae=await K(t.state.calculatorData);if(Ae){console.log("Estimate saved to database:",Ae);const Fe={id:Ae.id,title:Ae.title,clientName:Ae.client_name||"",projectName:Ae.project_name||"",status:Ae.status||"draft",createdAt:Ae.created_at||new Date().toISOString(),expiresAt:Ae.expires_at||new Date(Date.now()+720*60*60*1e3).toISOString(),items:t.state.calculatorData.items||[],subtotal:Ae.subtotal,taxRate:Ae.tax_rate,taxAmount:Ae.tax_amount,total:Ae.total,notes:Ae.notes||"",terms:Ae.terms||"Valid for 30 days from the date of issue."};console.log("Setting current estimate:",Fe),u(Fe),l("editor"),console.log("Active tab set to editor")}else{const Fe={id:t.state.calculatorData.id&&t.state.calculatorData.id.match(/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i)?t.state.calculatorData.id:se(),title:t.state.calculatorData.title||"New Estimate",clientName:t.state.calculatorData.clientName||"",projectName:t.state.calculatorData.projectName||"",status:t.state.calculatorData.status||"draft",createdAt:t.state.calculatorData.createdAt||new Date().toISOString(),expiresAt:t.state.calculatorData.expiresAt||new Date(Date.now()+2592e6).toISOString(),items:t.state.calculatorData.items||[],subtotal:t.state.calculatorData.subtotal||0,taxRate:t.state.calculatorData.taxRate||0,taxAmount:t.state.calculatorData.taxAmount||0,total:t.state.calculatorData.total||0,notes:t.state.calculatorData.notes||"",terms:t.state.calculatorData.terms||"Valid for 30 days from the date of issue.",branding:{logo:"",primaryColor:"#3B82F6",fontFamily:"Inter"}};u(Fe),l("editor")}}})()},[t.state?.fromCalculator,t.state?.calculatorData]),p.useEffect(()=>{(()=>{const Ae=n();if(Ae&&!d){console.log("Found pending calculator import:",Ae);const Fe=Ae.results.filter(ct=>ct.cost&&ct.cost>0).map((ct,bt)=>({id:`calc-item-${Date.now()}-${bt}`,description:ct.label,quantity:ct.value,unit:ct.unit,unitPrice:ct.cost?ct.cost/ct.value:0,totalPrice:ct.cost||0,type:"material"})),Qe=Fe.reduce((ct,bt)=>ct+bt.totalPrice,0),Ie=0,et=0,ot=Qe,lt=Ae.trade.replace(/^trades\./,"").split(/(?=[A-Z])/).join(" ").replace(/^\w/,ct=>ct.toUpperCase()),vt={id:se(),title:`${lt} Estimate`,clientName:"",projectName:"",status:"draft",createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+720*60*60*1e3).toISOString(),items:Fe,subtotal:Qe,taxRate:Ie,taxAmount:et,total:ot,notes:`Generated from ${Ae.trade} calculator`,terms:a?.default_terms||"Valid for 30 days from the date of issue.",branding:{logo:a?.logo_url||"",primaryColor:"#3B82F6",fontFamily:"Inter"}};u(vt),l("editor"),i(),alert(`Successfully imported ${Fe.length} items from ${Ae.trade} calculator!`)}})()},[]),p.useEffect(()=>{console.log("EstimateGenerator mounted, fetching data..."),V(),ie(),re(),H()},[]);const de=async()=>{try{const J=await RQ.getAllResponsesForUser(),Ae=new Map;J.forEach(Fe=>{Ae.set(Fe.estimate_id,Fe)}),k(Ae)}catch(J){console.error("Error fetching estimate responses:",J)}},re=async()=>{P(!0);try{const J=await kd.getEstimates();if(J.success&&J.data){console.log("Fetched estimates:",J.data);const Ae=J.data.map(Fe=>({id:Fe.id,client:Fe.clientName||"No Client",project:Fe.projectName||Fe.title,amount:`$${Fe.total?.toFixed(2)||"0.00"}`,status:Fe.status||"draft",date:new Date(Fe.createdAt).toLocaleDateString(),calculatorType:Fe.calculatorType,calculatorData:Fe.calculatorData}));Q(Ae)}await de()}catch(J){console.error("Error fetching estimates:",J)}finally{P(!1)}};p.useEffect(()=>{b&&re()},[b]),p.useEffect(()=>{d&&!le.current&&(le.current=JSON.stringify(d),_(!1))},[d]);const z=()=>{D&&!window.confirm(s("estimates.unsavedChanges"))||(u(null),le.current="",_(!1))};p.useEffect(()=>{console.log("Projects loaded:",te),console.log("Number of projects:",te.length),console.log("Clients loaded:",M),console.log("Number of clients:",M.length)},[te,M]);const ne=p.useMemo(()=>M.map(J=>({id:J.id,name:J.name})),[M]),Y=p.useRef(null),X=()=>{const J={id:se(),title:"New Estimate",clientName:"",projectName:"",status:"draft",createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+2592e6).toISOString(),items:[],subtotal:0,taxRate:0,taxAmount:0,total:0,notes:"",terms:a?.default_terms||"Valid for 30 days from the date of issue.",branding:{logo:"",primaryColor:"#3B82F6",fontFamily:"Inter"}};u(J),l("editor")},ye=async J=>{console.log("Loading estimate for editing:",J);try{const Ae=await kd.getEstimate(J);Ae.success&&Ae.data?(u(Ae.data),l("editor")):(console.error("Failed to load estimate:",Ae.error),alert("Failed to load estimate for editing"))}catch(Ae){console.error("Error loading estimate:",Ae),alert("Error loading estimate")}},pe=async J=>{const Ae=J.items.reduce((ot,lt)=>ot+lt.quantity*lt.unitPrice,0),Fe=Ae*(J.taxRate/100),Qe=Ae+Fe,Ie={...J,subtotal:Ae,taxAmount:Fe,total:Qe},et=JSON.stringify(Ie);if(et!==le.current&&_(!0),u(Ie),Ie.id)try{console.log(" Auto-saving estimate...",{id:Ie.id,total:Ie.total}),await I(Ie.id,{title:Ie.title,client_name:Ie.clientName,project_name:Ie.projectName,project_id:Ie.projectId,status:Ie.status,items:Ie.items,subtotal:Ie.subtotal,tax_rate:Ie.taxRate,tax_amount:Ie.taxAmount,total:Ie.total,notes:Ie.notes,terms:Ie.terms,expires_at:Ie.expiresAt}),console.log(" Auto-save completed"),le.current=et,_(!1)}catch(ot){console.error(" Error auto-saving estimate:",ot),console.error("Auto-save error details:",{message:ot?.message,code:ot?.code}),_(!0)}else console.warn(" Cannot auto-save: estimate has no ID")},Ce=J=>{if(!d)return;const Ae={...d,items:[...d.items,J]};pe(Ae)},je=J=>{if(!d)return;const Ae=[...d.items];Ae.splice(J,1);const Fe={...d,items:Ae};pe(Fe)},ce=(J,Ae)=>{if(!d)return;const Fe=[...d.items];Fe[J]=Ae;const Qe={...d,items:Fe};pe(Qe)},Te=async()=>{if(!d){console.error(" No estimate to save");return}console.log(" Starting estimate save...",{id:d.id,title:d.title,total:d.total}),f(!0);try{const J={title:d.title,client_name:d.clientName,project_name:d.projectName,project_id:d.projectId,status:d.status,items:d.items,subtotal:d.subtotal,tax_rate:d.taxRate,tax_amount:d.taxAmount,total:d.total,notes:d.notes,terms:d.terms,expires_at:d.expiresAt};console.log(" Estimate data prepared:",J),await I(d.id,J),console.log(" Database operation completed");const Ae=await kd.getEstimate(d.id);if(Ae.success&&Ae.data)console.log(" Estimate verified in database:",Ae.data),u(Ae.data),le.current=JSON.stringify(Ae.data),_(!1),v(!0),console.log(" Estimate saved successfully to Supabase!"),await re(),setTimeout(()=>{v(!1)},3e3);else throw new Error("Failed to verify estimate save: "+(Ae.error?.message||"Unknown error"));f(!1)}catch(J){f(!1),console.error(" Error saving estimate:",J),console.error("Error details:",{message:J?.message,code:J?.code,details:J?.details}),alert(`Error saving estimate: ${J?.message||"Unknown error"}`)}},We=async()=>{if(!d)return;f(!0);let J=document.getElementById("estimate-preview");!J&&o!=="preview"?(l("preview"),setTimeout(async()=>{const Ae=document.getElementById("estimate-preview");Ae&&(await Le(Ae),f(!1))},500)):J?(await Le(J),f(!1)):(alert("Please switch to Preview mode first"),f(!1))},Le=async J=>{try{const Ae=await _y(J,{scale:2,useCORS:!0,logging:!1,backgroundColor:"#ffffff"}),Fe=Ae.toDataURL("image/png"),Qe=new Lt({orientation:"portrait",unit:"mm",format:"a4"}),Ie=210,et=Ae.height*Ie/Ae.width,ot=297;let lt=et,vt=0;for(Qe.addImage(Fe,"PNG",0,vt,Ie,et),lt-=ot;lt>0;)vt=lt-et,Qe.addPage(),Qe.addImage(Fe,"PNG",0,vt,Ie,et),lt-=ot;const ct=`estimate-${d?.title?.replace(/\s+/g,"-")||"document"}-${new Date().toISOString().split("T")[0]}.pdf`;Qe.save(ct),console.log("PDF exported successfully:",ct)}catch(Ae){console.error("Error generating PDF:",Ae),alert("Error generating PDF. Please try again.")}},U=()=>{if(!d)return;f(!0);const J=[["Estimate Details"],["ID",d.id],["Title",d.title],["Date",new Date(d.createdAt).toLocaleDateString()],["Expires",new Date(d.expiresAt).toLocaleDateString()],[],["Items","Quantity","Unit","Unit Price","Total"],...d.items.map(Ie=>[Ie.description,Ie.quantity.toString(),Ie.unit,`$${Ie.unitPrice.toFixed(2)}`,`$${Ie.totalPrice.toFixed(2)}`]),[],["","","","Subtotal",`$${d.subtotal.toFixed(2)}`],["","","",`Tax (${d.taxRate}%)`,`$${d.taxAmount.toFixed(2)}`],["","","","TOTAL",`$${d.total.toFixed(2)}`]].map(Ie=>Ie.join(",")).join(`
`),Ae=new Blob([J],{type:"text/csv"}),Fe=window.URL.createObjectURL(Ae),Qe=document.createElement("a");Qe.href=Fe,Qe.download=`estimate-${d.id}.csv`,document.body.appendChild(Qe),Qe.click(),document.body.removeChild(Qe),window.URL.revokeObjectURL(Fe),f(!1),console.log("Estimate exported as CSV file")},fe=()=>{Y.current&&Y.current.click()},Se=J=>{const Ae=J.target.files?.[0];if(Ae&&d){const Fe=new FileReader;Fe.onload=Qe=>{if(Qe.target?.result&&d){const Ie=Qe.target.result;u({...d,branding:{...d.branding,logo:Ie}}),console.log("Logo uploaded and set in estimate branding")}},Fe.readAsDataURL(Ae)}},Re=J=>{if(!d)return;const Ae={...d,items:[...d.items,...J]};pe(Ae),h(!1)},G=async()=>{if(!d||!d.id){alert("Please save the estimate before converting to invoice");return}if(d.convertedToInvoice){alert("This estimate has already been converted to an invoice. Each estimate can only be converted once.");return}if(d.status!=="approved"&&!confirm("This estimate has not been approved yet. Convert to invoice anyway?"))return;const J=await ee(d.id);J?(u({...d,convertedToInvoice:!0,invoiceId:J.id}),alert(`Invoice ${J.invoiceNumber} created successfully!`)):alert("Failed to convert estimate to invoice")},ue=J=>{switch(J){case"Approved":return"bg-green-100 text-green-800";case"Sent":return"bg-blue-100 text-blue-800";case"Draft":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},ge=J=>{const Ae=$.get(J);return Ae?Ae.accepted===!0?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 ml-2",children:[e.jsx(un,{className:"w-3 h-3 mr-1"}),"Customer Approved"]}):Ae.declined===!0?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 ml-2",children:[e.jsx(Od,{className:"w-3 h-3 mr-1"}),"Customer Declined"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 ml-2",children:[e.jsx(no,{className:"w-3 h-3 mr-1"}),"Pending Response"]}):null},oe=p.useMemo(()=>{if(!L.trim())return F;const J=L.toLowerCase().trim();return F.filter(Ae=>!!(Ae.id.toLowerCase().includes(J)||Ae.client.toLowerCase().includes(J)||Ae.project.toLowerCase().includes(J)||Ae.amount.toLowerCase().includes(J)))},[F,L]);return e.jsxs("div",{className:"space-y-4 sm:space-y-6 max-w-full overflow-x-hidden px-2 sm:px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[d&&e.jsx("button",{onClick:z,className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-md transition-colors",title:"Back to Estimates List",children:e.jsx(hs,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s("estimates.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s("estimates.subtitle")})]})]})}),d?e.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:()=>l("preview"),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 text-xs sm:text-sm font-semibold rounded-lg text-blue-700 bg-blue-50 hover:bg-blue-100 border border-blue-200 shadow-sm transition-all duration-200",children:[e.jsx(ao,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:s("estimates.preview")})]}),e.jsxs("button",{onClick:()=>B(!0),className:"flex-1 sm:flex-none inline-flex items-center justify-center px-3 py-2 text-xs sm:text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 shadow-lg transition-all duration-200",children:[e.jsx(Ba,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:s("estimates.send")})]}),e.jsxs("div",{className:"relative flex-1 sm:flex-none",children:[e.jsxs("button",{onClick:()=>S(!j),className:"w-full sm:w-auto inline-flex items-center justify-center px-3 py-2 text-xs sm:text-sm font-medium rounded-lg text-gray-700 bg-white border-2 border-gray-200 hover:border-blue-500 hover:text-blue-600 transition-all duration-200",children:[e.jsx(Rn,{className:"w-4 h-4 sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Download"})]}),j&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-2xl border border-gray-100 z-50 overflow-hidden",children:e.jsxs("div",{className:"py-2",children:[e.jsxs("button",{onClick:Te,disabled:x,className:"w-full flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",children:[x?e.jsx(An,{className:"w-5 h-5 mr-3 animate-spin text-blue-500"}):e.jsx(ly,{className:"w-5 h-5 mr-3 text-blue-500"}),e.jsx("span",{className:"font-medium",children:s("estimates.saveEstimate")})]}),e.jsx("div",{className:"border-t border-gray-100 my-1"}),e.jsxs("button",{onClick:()=>{We(),S(!1)},className:"w-full flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",children:[e.jsx(Rn,{className:"w-5 h-5 mr-3 text-green-500"}),e.jsx("span",{className:"font-medium",children:s("estimates.exportAsPDF")})]}),e.jsxs("button",{onClick:()=>{U(),S(!1)},className:"w-full flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-colors duration-150",children:[e.jsx(ra,{className:"w-5 h-5 mr-3 text-green-500"}),e.jsx("span",{className:"font-medium",children:s("estimates.exportAsExcel")})]})]})})]}),d.status==="approved"&&e.jsxs("button",{onClick:G,disabled:d.convertedToInvoice,className:`inline-flex items-center px-3 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white ${d.convertedToInvoice?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}`,title:d.convertedToInvoice?s("estimates.alreadyInvoiced"):s("estimates.convertToInvoice"),children:[e.jsx(vl,{className:"w-4 h-4 mr-2"}),d.convertedToInvoice?s("estimates.alreadyInvoiced"):s("estimates.convertToInvoice")]}),o==="preview"&&e.jsxs("button",{onClick:()=>l("editor"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),s("common.edit")]}),o==="editor"&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>l("preview"),className:"inline-flex items-center px-4 py-2.5 text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800 shadow-md hover:shadow-lg transform hover:scale-105 transition-all duration-200 whitespace-nowrap",children:[e.jsx(ao,{className:"w-4 h-4 mr-2"}),s("estimates.preview")]}),e.jsxs("button",{onClick:()=>{confirm(s("estimates.clearDataConfirm"))&&(localStorage.clear(),sessionStorage.clear(),window.location.href="/estimates")},className:"inline-flex items-center px-3 py-2 text-sm font-medium rounded-lg text-red-600 bg-white border-2 border-red-200 hover:border-red-400 hover:bg-red-50 transition-all duration-200 whitespace-nowrap",title:s("estimates.clearDataTitle"),children:[e.jsx(xt,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:s("estimates.clearData")})]})]})]}):e.jsxs("button",{onClick:X,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),s("estimates.newEstimate")]})]}),b&&e.jsxs("div",{className:"fixed top-4 right-4 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded z-50 flex items-center shadow-md",children:[e.jsx(zt,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:s("estimates.savedSuccessfully")})]}),o==="editor"&&e.jsxs(e.Fragment,{children:[!d&&e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:s("estimates.yourEstimates")})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Mo,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:L,onChange:J=>E(J.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search by Estimate ID, Client, Project, or Amount..."}),L&&e.jsx("button",{onClick:()=>E(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(xt,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),e.jsx("div",{className:"p-4",children:q?e.jsxs("div",{className:"py-8 text-center text-gray-500",children:[e.jsx(An,{className:"w-6 h-6 animate-spin mx-auto mb-2"}),"Loading estimates..."]}):oe.length===0?e.jsx("div",{className:"py-8 text-center text-gray-500",children:L?e.jsxs(e.Fragment,{children:['No estimates found matching "',L,'"',e.jsx("button",{onClick:()=>E(""),className:"block mx-auto mt-2 text-blue-600 hover:text-blue-800",children:"Clear search"})]}):s("estimates.noEstimatesYet")}):e.jsx("div",{className:"space-y-3",children:oe.map(J=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border border-gray-200 rounded-lg hover:border-blue-300 hover:shadow-md transition-all duration-200",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate",children:J.project||J.client||"Untitled Estimate"}),ge(J.id)]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500",children:[e.jsx("span",{children:J.amount}),e.jsx("span",{children:""}),e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full font-medium ${ue(J.status)}`,children:J.status}),J.calculatorType&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{className:"inline-flex items-center",children:[e.jsx(dn,{className:"w-3 h-3 mr-1"}),J.calculatorType]})]})]})]}),e.jsxs("button",{onClick:()=>ye(J.id),className:"ml-4 flex-shrink-0 inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-lg transition-colors",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),"Edit"]})]},J.id))})})]}),d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg shadow-md p-4 sm:p-6 mb-6 border-2 border-blue-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 w-full sm:w-auto",children:[e.jsx("div",{className:"bg-blue-600 rounded-full p-2 sm:p-3 flex-shrink-0",children:e.jsx(dn,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Need to Calculate Job Costs?"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mt-1",children:"Use our 20+ professional calculators to get accurate pricing and import directly to this estimate"})]})]}),e.jsxs("button",{onClick:()=>{d.id?Te().then(()=>{r("/pricing",{state:{fromEstimate:!0,estimateId:d.id}})}):r("/pricing",{state:{fromEstimate:!0}})},className:"w-full sm:w-auto inline-flex items-center justify-center px-4 sm:px-6 py-2.5 sm:py-3 text-xs sm:text-sm font-semibold rounded-lg text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 whitespace-nowrap",children:[e.jsx(dn,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Go to Calculators"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:`${m?"lg:col-span-2":"lg:col-span-3"}`,children:[e.jsx(BQ,{estimate:d,onUpdateEstimate:pe,onAddItem:Ce,onUpdateItem:ce,onRemoveItem:je,onLogoUpload:fe,clients:ne,projects:te.map(J=>({id:J.id,name:J.name}))}),e.jsx("input",{type:"file",ref:Y,onChange:Se,accept:"image/*",className:"hidden"})]}),m&&e.jsx("div",{className:"lg:col-span-1",children:e.jsx(FQ,{projectType:d.projectId&&te.find(J=>J.id===d.projectId)?.name||"",onGenerateItems:Re,onClose:()=>h(!1)})})]})]}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg shadow-lg p-8 mb-6 border-2 border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"bg-blue-600 rounded-full p-4 w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(dn,{className:"w-8 h-8 text-white"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Start with Job Cost Calculations"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto",children:"Use our professional calculators to quickly estimate material and labor costs for roofing, concrete, HVAC, plumbing, and 17+ other trades. Your calculations will automatically create a new estimate."}),e.jsxs("button",{onClick:()=>r("/pricing",{state:{fromEstimate:!0}}),className:"inline-flex items-center px-8 py-4 text-lg font-semibold rounded-lg text-white bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:[e.jsx(dn,{className:"w-6 h-6 mr-3"}),"Calculate Job Cost"]})]})})})]}),o==="preview"&&d&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Estimate Preview"})})}),e.jsx("div",{id:"estimate-preview",children:e.jsx(kQ,{estimate:d,clients:ne,projects:te,hideStatus:!0})})]}),e.jsx(PQ,{isOpen:C,onClose:()=>B(!1),estimate:d,companyInfo:{name:a?.company_name||a?.company||a?.full_name||"Your Company",email:a?.email||"",phone:a?.phone||"",address:a?.address||""},activeTab:o,setActiveTab:l})]})},OQ=({tasks:s,team:t,onAddTask:r,onUpdateTask:a,onDeleteTask:n,onAddComment:i})=>{const[o,l]=p.useState(null),[d,u]=p.useState("all"),[m,h]=p.useState("all"),[x,f]=p.useState("dueDate"),[b,v]=p.useState("asc"),[j,S]=p.useState(""),[C,B]=p.useState(null),F=E=>{console.log("Toggling task expand for:",E,"Current expanded:",o),l(o===E?null:E)},Q=E=>{const O=document.getElementById("edit-title"),le=document.getElementById("edit-status"),te=document.getElementById("edit-priority"),V=document.getElementById("edit-due-date"),M=document.getElementById("edit-description"),ie=document.querySelectorAll('input[name="assignee-checkbox"]:checked'),K=Array.from(ie).map(H=>H.value).filter(H=>H);a&&O&&(a(E,{title:O.value,status:le.value,priority:te.value,assignee:K.length>0?K.join(","):"",dueDate:V.value,description:M.value}),B(null))},q=E=>{confirm("Are you sure you want to delete this task?")&&n&&n(E)},P=E=>{if(a){a(E,{status:"completed"});const O=document.getElementById(`complete-btn-${E}`);O&&(O.style.backgroundColor="#10b981",O.style.color="white",O.textContent=" Completed!",setTimeout(()=>{O.style.backgroundColor="",O.style.color="",O.textContent="Mark Complete"},2e3))}},D=E=>{switch(E){case"completed":return e.jsx(un,{className:"w-5 h-5 text-green-500"});case"in-progress":return e.jsx(no,{className:"w-5 h-5 text-blue-500"});case"todo":return e.jsx(Qa,{className:"w-5 h-5 text-gray-400"});default:return null}},_=E=>{switch(E){case"completed":return"Completed";case"in-progress":return"In Progress";case"todo":return"To Do";default:return E}},$=E=>{switch(E){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},k=E=>{switch(E){case"high":return 3;case"medium":return 2;case"low":return 1;default:return 0}},L=s.filter(E=>!(d!=="all"&&E.status!==d||m!=="all"&&E.assignee!==m||j&&!E.title.toLowerCase().includes(j.toLowerCase()))).sort((E,O)=>{if(x==="dueDate"){const le=new Date(E.dueDate).getTime(),te=new Date(O.dueDate).getTime();return b==="asc"?le-te:te-le}else{const le=k(E.priority),te=k(O.priority);return b==="asc"?le-te:te-le}});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Mo,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:j,onChange:E=>S(E.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search tasks..."})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d,onChange:E=>u(E.target.value),className:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]}),e.jsxs("select",{value:m,onChange:E=>h(E.target.value),className:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"all",children:"All Assignees"}),t.map(E=>e.jsx("option",{value:E.id,children:E.name},E.id))]}),e.jsxs("button",{onClick:r,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add Task"]})]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:L.length===0?e.jsx("li",{className:"px-6 py-4 text-center text-gray-500",children:"No tasks match your filters"}):L.map(E=>e.jsxs("li",{children:[e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between cursor-pointer hover:bg-gray-50",onClick:()=>F(E.id),children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:D(E.status)}),e.jsxs("div",{className:"ml-4 flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:E.title}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(Fr,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),e.jsxs("span",{children:["Due: ",new Date(E.dueDate).toLocaleDateString()]})]}),e.jsx("span",{className:"mx-2 text-gray-500",children:""}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(ns,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),e.jsx("span",{children:(()=>{const O=V=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(V);if(Array.isArray(E.assignee)){const V=E.assignee.map(M=>t.find(ie=>ie.id===M)?.name||(O(M)?null:M)).filter(Boolean);return V.length>0?V.join(", "):"Unassigned"}const le=t.find(V=>V.id===E.assignee),te=t.find(V=>V.name===E.assignee);return le?le.name:te?te.name:E.assignee&&!O(E.assignee)?E.assignee:"Unassigned"})()})]})]})]})]}),e.jsxs("div",{className:"ml-4 flex items-center",children:[e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$(E.priority)}`,children:E.priority}),e.jsx("button",{onClick:O=>{O.stopPropagation(),F(E.id)},className:"ml-4 text-gray-400 hover:text-gray-500",children:o===E.id?e.jsx(Dg,{className:"h-5 w-5"}):e.jsx(Td,{className:"h-5 w-5"})})]})]}),o===E.id&&e.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:C===E.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx("input",{type:"text",id:"edit-title",defaultValue:E.title,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-status",className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{id:"edit-status",defaultValue:E.status,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"todo",children:"To Do"}),e.jsx("option",{value:"in-progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-priority",className:"block text-sm font-medium text-gray-700",children:"Priority"}),e.jsxs("select",{id:"edit-priority",defaultValue:E.priority,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assignees"}),e.jsx("div",{className:"mt-1 max-h-32 overflow-y-auto border border-gray-300 rounded-md p-2 bg-white",children:t.map(O=>{const le=Array.isArray(E.assignee)?E.assignee:E.assignee?E.assignee.split(","):[],te=le.includes(O.id)||le.includes(O.name);return e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("input",{type:"checkbox",name:"assignee-checkbox",value:O.id,defaultChecked:te,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 text-sm text-gray-700",children:O.name})]},O.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-due-date",className:"block text-sm font-medium text-gray-700",children:"Due Date"}),e.jsx("input",{type:"date",id:"edit-due-date",defaultValue:E.dueDate,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{id:"edit-description",rows:3,defaultValue:E.description,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>B(null),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{onClick:()=>Q(E.id),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save Changes"})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:_(E.status)}),e.jsxs("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["Task #",E.id.split("-")[1]||E.id]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(E.id),className:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>q(E.id),className:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:e.jsx(nr,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assignees"}),e.jsx("div",{className:"mt-1 space-y-2",children:(()=>{const O=Array.isArray(E.assignee)?E.assignee:E.assignee?E.assignee.includes(",")?E.assignee.split(","):[E.assignee]:[];return O.length===0?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(ns,{className:"h-4 w-4 text-gray-500"})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Unassigned"})})]}):O.map(le=>{const te=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(le),V=t.find(M=>M.id===le);return!V&&te?null:e.jsxs("div",{className:"flex items-center",children:[V?.avatar?e.jsx("img",{src:V.avatar,alt:V.name,className:"h-8 w-8 rounded-full"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(ns,{className:"h-4 w-4 text-gray-500"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:V?.name||le}),e.jsx("p",{className:"text-xs text-gray-500",children:V?.role||""})]})]},le)})})()})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),e.jsxs("div",{className:"mt-1 flex items-center",children:[e.jsx(Fr,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-900",children:new Date(E.dueDate).toLocaleDateString()})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:E.description||"No description provided."})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{id:`complete-btn-${E.id}`,onClick:O=>{O.stopPropagation(),P(E.id)},className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(un,{className:"h-4 w-4 mr-1"}),"Mark Complete"]}),e.jsxs("button",{className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(KE,{className:"h-4 w-4 mr-1"}),"Comment"]})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["Created on ",new Date(E.dueDate).toLocaleDateString()]})})]})]})})]},E.id))})})]})},bg=async()=>{try{const{data:{user:s}}=await _e.auth.getUser();if(s?.id)return s.id}catch{console.log("Auth not available, using development mode")}return"00000000-0000-0000-0000-000000000000"},uB=Mc((s,t)=>({employees:[],isLoading:!1,error:null,searchTerm:"",statusFilter:"all",fetchEmployees:async()=>{s({isLoading:!0,error:null});try{const r=await bg(),{data:a,error:n}=await _e.from("employees").select("*").order("created_at",{ascending:!1});if(n)throw n;s({employees:a?.map(i=>({id:i.id,name:i.name,email:i.email||"",phone:i.phone||"",jobTitle:i.job_title||"",hourlyRate:i.hourly_rate||0,notes:i.notes||"",status:i.status||"active",createdAt:i.created_at,updatedAt:i.updated_at,userId:i.user_id}))||[],isLoading:!1})}catch(r){console.error("Error fetching employees:",r),s({error:r instanceof Error?r.message:"Failed to fetch employees",isLoading:!1})}},addEmployee:async r=>{s({isLoading:!0,error:null});try{const a=await bg(),{data:n,error:i}=await _e.from("employees").insert({name:r.name,email:r.email||null,phone:r.phone||null,job_title:r.jobTitle,hourly_rate:r.hourlyRate||0,notes:r.notes||null,status:r.status||"active",user_id:a}).select().single();if(i)throw i;const o={id:n.id,name:n.name,email:n.email||"",phone:n.phone||"",jobTitle:n.job_title||"",hourlyRate:n.hourly_rate||0,notes:n.notes||"",status:n.status||"active",createdAt:n.created_at,updatedAt:n.updated_at,userId:n.user_id};s(l=>({employees:[o,...l.employees],isLoading:!1}))}catch(a){console.error("Error adding employee:",a),s({error:a instanceof Error?a.message:"Failed to add employee",isLoading:!1})}},updateEmployee:async(r,a)=>{s({isLoading:!0,error:null});try{const n=await bg(),i={};a.name!==void 0&&(i.name=a.name),a.email!==void 0&&(i.email=a.email),a.phone!==void 0&&(i.phone=a.phone),a.jobTitle!==void 0&&(i.job_title=a.jobTitle),a.hourlyRate!==void 0&&(i.hourly_rate=a.hourlyRate),a.notes!==void 0&&(i.notes=a.notes),a.status!==void 0&&(i.status=a.status),i.updated_at=new Date().toISOString();const{data:o,error:l}=await _e.from("employees").update(i).eq("id",r).select().single();if(l)throw l;const d={id:o.id,name:o.name,email:o.email||"",phone:o.phone||"",jobTitle:o.job_title||"",hourlyRate:o.hourly_rate||0,notes:o.notes||"",status:o.status||"active",createdAt:o.created_at,updatedAt:o.updated_at,userId:o.user_id};s(u=>({employees:u.employees.map(m=>m.id===r?d:m),isLoading:!1}))}catch(n){console.error("Error updating employee:",n),s({error:n instanceof Error?n.message:"Failed to update employee",isLoading:!1})}},deleteEmployee:async r=>{s({isLoading:!0,error:null});try{const a=await bg(),{error:n}=await _e.from("employees").delete().eq("id",r);if(n)throw n;s(i=>({employees:i.employees.filter(o=>o.id!==r),isLoading:!1}))}catch(a){console.error("Error deleting employee:",a),s({error:a instanceof Error?a.message:"Failed to delete employee",isLoading:!1})}},setSearchTerm:r=>s({searchTerm:r}),setStatusFilter:r=>s({statusFilter:r})})),HQ=({team:s,projectId:t,addTeamMember:r,removeTeamMember:a})=>{const{employees:n,fetchEmployees:i}=uB(),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[m,h]=p.useState(null),[x,f]=p.useState(null),[b,v]=p.useState(""),[j,S]=p.useState("");p.useEffect(()=>{i()},[]);const C=q=>{f(x===q?null:q)},B=()=>{l(!0)},F=q=>{h(q),u(!0)},Q=[{id:"view_project",name:"View Project",description:"Can view project details"},{id:"edit_project",name:"Edit Project",description:"Can edit project details"},{id:"add_tasks",name:"Add Tasks",description:"Can add new tasks"},{id:"edit_tasks",name:"Edit Tasks",description:"Can edit existing tasks"},{id:"delete_tasks",name:"Delete Tasks",description:"Can delete tasks"},{id:"upload_progress",name:"Upload Progress",description:"Can upload progress updates"},{id:"view_finances",name:"View Finances",description:"Can view financial information"},{id:"edit_finances",name:"Edit Finances",description:"Can edit financial information"},{id:"manage_team",name:"Manage Team",description:"Can add/remove team members"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Project Team"}),e.jsxs("button",{onClick:B,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add Team Member"]})]}),e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:s.map(q=>e.jsx("li",{children:e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-12 w-12 rounded-full overflow-hidden bg-gray-100",children:q.avatar?e.jsx("img",{src:q.avatar,alt:q.name,className:"h-full w-full object-cover"}):e.jsx("div",{className:"h-full w-full flex items-center justify-center",children:e.jsx(ns,{className:"h-6 w-6 text-gray-400"})})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:q.name}),e.jsx("div",{className:"text-sm text-gray-500",children:q.role})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>F(q),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(XE,{className:"h-4 w-4 mr-1"}),"Permissions"]}),e.jsx("button",{onClick:()=>C(q.id),className:"text-gray-400 hover:text-gray-500",children:x===q.id?e.jsx(Dg,{className:"h-5 w-5"}):e.jsx(Td,{className:"h-5 w-5"})})]})]}),x===q.id&&e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Information"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ba,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:q.email||"No email provided"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Md,{className:"h-4 w-4 text-gray-400 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:q.phone||"No phone provided"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Permissions"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:q.permissions?q.permissions.map((P,D)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:P},D)):e.jsx("span",{className:"text-sm text-gray-500",children:"Default permissions"})})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxs("button",{className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Ca,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:async()=>{await a(t,q.name)},className:"inline-flex items-center px-2.5 py-1.5 border border-transparent shadow-sm text-xs font-medium rounded text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(nr,{className:"h-4 w-4 mr-1"}),"Remove"]})]})]})]})},q.id))})}),o&&e.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Add Team Member"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee-select",className:"block text-sm font-medium text-gray-700",children:"Select Employee"}),e.jsxs("select",{id:"employee-select",value:b,onChange:q=>{v(q.target.value);const P=n.find(D=>D.id===q.target.value);P&&S(P.jobTitle)},className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm px-3 py-2 border",children:[e.jsx("option",{value:"",children:"Select an employee..."}),n.filter(q=>q.status==="active").map(q=>e.jsxs("option",{value:q.id,children:[q.name," - ",q.jobTitle]},q.id))]}),n.length===0&&e.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["No employees found. ",e.jsx("a",{href:"/employees",className:"text-blue-600 hover:underline",children:"Add employees"})," first."]})]}),b&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Employee Details"}),(()=>{const q=n.find(P=>P.id===b);return q?e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ba,{className:"h-4 w-4 mr-2"}),q.email]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Md,{className:"h-4 w-4 mr-2"}),q.phone]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),q.jobTitle," - $",q.hourlyRate,"/hr"]})]}):null})()]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Permissions"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[Q.slice(0,3).map(q=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:`permission-${q.id}`,name:`permission-${q.id}`,type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:`permission-${q.id}`,className:"ml-2 block text-sm text-gray-900",children:q.name})]},q.id)),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800",children:"Show all permissions..."})]})]})]})]})})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",onClick:async()=>{if(b){const q=n.find(P=>P.id===b);q&&(await r(t,q.name,q.email,q.jobTitle),v(""),S(""),l(!1))}},disabled:!b,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Member"}),e.jsx("button",{type:"button",onClick:()=>l(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),d&&m&&e.jsx("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75"})}),e.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:""}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[e.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Edit Permissions for ",m.name]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Select which actions this team member can perform on this project."}),e.jsx("div",{className:"space-y-3",children:Q.map(q=>e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex items-center h-5",children:e.jsx("input",{id:`permission-${q.id}`,name:`permission-${q.id}`,type:"checkbox",defaultChecked:m.permissions?.includes(q.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})}),e.jsxs("div",{className:"ml-3 text-sm",children:[e.jsx("label",{htmlFor:`permission-${q.id}`,className:"font-medium text-gray-700",children:q.name}),e.jsx("p",{className:"text-gray-500",children:q.description})]})]},q.id))})]})]})})}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"Save Permissions"}),e.jsx("button",{type:"button",onClick:()=>u(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})]})},qQ=({progressUpdates:s,tasks:t,team:r,onUploadProgress:a,onDeleteProgress:n})=>{const[i,o]=p.useState("grid"),[l,d]=p.useState("all"),[u,m]=p.useState("all"),[h,x]=p.useState(""),[f,b]=p.useState(null),v=p.useRef(null),j=s.filter(F=>!(l!=="all"&&F.taskId!==l||u!=="all"&&F.postedBy!==u||h&&!F.description.toLowerCase().includes(h.toLowerCase()))).sort((F,Q)=>new Date(Q.date).getTime()-new Date(F.date).getTime()),S=F=>{b(F),document.body.style.overflow="hidden"},C=()=>{b(null),document.body.style.overflow="auto"},B=F=>{v.current&&F.target===v.current&&C()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Mo,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:h,onChange:F=>x(F.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Search progress updates..."})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:l,onChange:F=>d(F.target.value),className:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"all",children:"All Tasks"}),t.map(F=>e.jsx("option",{value:F.id,children:F.title},F.id))]}),e.jsxs("select",{value:u,onChange:F=>m(F.target.value),className:"block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"all",children:"All Team Members"}),r.map(F=>e.jsx("option",{value:F.id,children:F.name},F.id))]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[e.jsx("button",{onClick:()=>o("grid"),className:`p-2 ${i==="grid"?"bg-gray-100 text-gray-900":"text-gray-500 hover:text-gray-900"}`,children:e.jsx(Mn,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>o("list"),className:`p-2 ${i==="list"?"bg-gray-100 text-gray-900":"text-gray-500 hover:text-gray-900"}`,children:e.jsx(_C,{className:"h-5 w-5"})})]}),e.jsxs("button",{onClick:a,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(vh,{className:"h-4 w-4 mr-2"}),"Upload Progress"]})]})]}),j.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[e.jsx(iy,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No progress updates"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by uploading your first progress update."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:a,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(vh,{className:"h-4 w-4 mr-2"}),"Upload Progress"]})})]}):i==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(F=>e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[F.photos&&F.photos.length>0&&e.jsxs("div",{className:"h-48 overflow-hidden cursor-pointer",onClick:()=>S(F),children:[e.jsx("img",{src:F.photos[0],alt:"Progress",className:"w-full h-full object-cover transition-transform hover:scale-105"}),F.photos.length>1&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded",children:["+",F.photos.length-1," more"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fr,{className:"h-4 w-4 text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(F.date).toLocaleDateString()})]}),e.jsx("span",{className:"text-xs text-gray-500",children:t.find(Q=>Q.id===F.taskId)?.title})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:F.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[r.find(Q=>Q.id===F.postedBy)?.avatar?e.jsx("img",{src:r.find(Q=>Q.id===F.postedBy)?.avatar,alt:"Posted by",className:"h-6 w-6 rounded-full"}):e.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-200 flex items-center justify-center",children:e.jsx(ns,{className:"h-3 w-3 text-gray-500"})}),e.jsx("p",{className:"ml-2 text-xs text-gray-500",children:r.find(Q=>Q.id===F.postedBy)?.name||"Unknown"})]}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{className:"text-gray-400 hover:text-gray-500",children:e.jsx(ao,{className:"h-4 w-4"})}),e.jsx("button",{className:"text-gray-400 hover:text-gray-500",children:e.jsx(Rn,{className:"h-4 w-4"})}),n&&e.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this progress update?")&&n(F.id)},className:"text-red-400 hover:text-red-500",children:e.jsx(nr,{className:"h-4 w-4"})})]})]})]})]},F.id))}):e.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:e.jsx("ul",{className:"divide-y divide-gray-200",children:j.map(F=>e.jsx("li",{children:e.jsxs("div",{className:"px-4 py-4 sm:px-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("p",{className:"text-sm font-medium text-blue-600 truncate",children:F.description})}),e.jsx("div",{className:"ml-2 flex-shrink-0 flex",children:e.jsx("p",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:t.find(Q=>Q.id===F.taskId)?.title})})]}),e.jsxs("div",{className:"mt-2 sm:flex sm:justify-between",children:[e.jsxs("div",{className:"sm:flex",children:[e.jsxs("p",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(ns,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),r.find(Q=>Q.id===F.postedBy)?.name||"Unknown"]}),e.jsxs("p",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0 sm:ml-6",children:[e.jsx(Fr,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),new Date(F.date).toLocaleDateString()]})]}),e.jsx("div",{className:"mt-2 flex items-center text-sm text-gray-500 sm:mt-0",children:e.jsxs("div",{className:"flex space-x-2",children:[F.photos&&F.photos.length>0&&e.jsxs("button",{onClick:()=>S(F),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ao,{className:"h-4 w-4 mr-1"}),"View Photos (",F.photos.length,")"]}),e.jsxs("button",{className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Rn,{className:"h-4 w-4 mr-1"}),"Download"]}),n&&e.jsxs("button",{onClick:()=>{confirm("Are you sure you want to delete this progress update?")&&n(F.id)},className:"inline-flex items-center px-2.5 py-1.5 border border-red-300 shadow-sm text-xs font-medium rounded text-red-700 bg-white hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(nr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]})]})},F.id))})}),f&&e.jsx("div",{ref:v,className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",onClick:B,children:e.jsxs("div",{className:"relative bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden",onClick:F=>F.stopPropagation(),children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Progress Update"}),e.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-500",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-4 max-h-[calc(90vh-8rem)] overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:f.description}),e.jsxs("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[e.jsx(Fr,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),e.jsx("span",{children:new Date(f.date).toLocaleDateString()}),e.jsx("span",{className:"mx-2",children:""}),e.jsx(Ay,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),e.jsx("span",{children:t.find(F=>F.id===f.taskId)?.title}),e.jsx("span",{className:"mx-2",children:""}),e.jsx(ns,{className:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400"}),e.jsx("span",{children:r.find(F=>F.id===f.postedBy)?.name})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.photos.map((F,Q)=>e.jsxs("div",{className:"relative rounded-lg overflow-hidden",children:[e.jsx("img",{src:F,alt:`Progress ${Q+1}`,className:"w-full h-auto object-cover"}),e.jsxs("div",{className:"absolute bottom-2 right-2 flex space-x-1",children:[e.jsx("button",{className:"p-1 bg-black bg-opacity-50 rounded-full text-white hover:bg-opacity-75",children:e.jsx(Rn,{className:"h-4 w-4"})}),n&&e.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this photo?")},className:"p-1 bg-red-600 bg-opacity-50 rounded-full text-white hover:bg-opacity-75",children:e.jsx(nr,{className:"h-4 w-4"})})]})]},Q))})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 flex justify-end",children:e.jsx("button",{onClick:C,className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Close"})})]})})]})},$Q=({comments:s,team:t,projectId:r,onAddComment:a,onDeleteComment:n})=>{const[i,o]=p.useState(""),[l,d]=p.useState([]),[u,m]=p.useState([]),[h,x]=p.useState(!1),[f,b]=p.useState(""),[v,j]=p.useState({top:0,left:0}),[S,C]=p.useState(null),[B,F]=p.useState(""),Q=p.useRef(null),q=p.useRef(null),P=p.useRef(null);p.useEffect(()=>{const M=ie=>{P.current&&!P.current.contains(ie.target)&&x(!1)};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[]);const D=M=>{const ie=M.target.value;o(ie);const K=ie.charAt(ie.length-1),H=ie.charAt(ie.length-2);if(K==="@"&&(H===" "||H===""||H===`
`)){if(Q.current){const{selectionStart:I}=Q.current,se=ie.substring(0,I).split(`
`),de=se.length-1,re=se[de];j({top:(de+1)*20,left:re.length*8})}x(!0),b("")}else if(h){const I=ie.split(/\s+/),ee=I[I.length-1];ee.startsWith("@")?b(ee.substring(1)):x(!1)}},_=(M,ie)=>{const K=i.split(/\s+/);K[K.length-1]=`@${ie} `,o(K.join(" ")),x(!1),Q.current&&Q.current.focus()},$=async()=>{if(console.log(" Send button clicked!"),console.log("Comment text:",i),console.log("Files selected:",l.length),!i.trim()){console.log(" No comment text, returning");return}if(!a){console.error(" No onAddComment handler provided");return}console.log(" Submitting comment with",l.length,"files");try{await a(i.trim(),l.length>0?l:void 0),console.log(" Comment submitted successfully, resetting form"),o(""),d([]),m([]),q.current&&(q.current.value="")}catch(M){console.error(" Error submitting comment:",M)}},k=()=>{q.current&&q.current.click()},L=M=>{const ie=M.target.files;if(console.log(" File input changed, files:",ie),ie&&ie.length>0){const K=Array.from(ie);console.log(" Converting to array:",K),d(K);const H=K.map(I=>URL.createObjectURL(I));m(H),console.log(" Files selected:",K.length,"files"),console.log("File names:",K.map(I=>I.name)),console.log("File sizes:",K.map(I=>I.size))}},E=M=>{C(M.id),F(M.text)},O=M=>{console.log("Saving edited comment:",M,B),C(null)},le=async M=>{if(!n){console.error("No onDeleteComment handler provided");return}if(confirm("Are you sure you want to delete this comment?"))try{await n(M),console.log("Comment deleted successfully")}catch(ie){console.error("Error deleting comment:",ie)}},te=t.filter(M=>!f||M.name.toLowerCase().includes(f.toLowerCase())),V=(M,ie)=>{let K=M;return t.forEach(H=>{if(ie.includes(H.id)){const I=new RegExp(`@${H.name}\\b`,"g");K=K.replace(I,`<span class="text-blue-600 font-medium">@${H.name}</span>`)}}),K};return e.jsx("div",{className:"space-y-6",children:e.jsx("div",{className:"bg-white shadow sm:rounded-lg",children:e.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Project Discussion"}),e.jsx("div",{className:"mt-6 flow-root",children:e.jsx("ul",{className:"-mb-8",children:s.map((M,ie)=>e.jsx("li",{children:e.jsxs("div",{className:"relative pb-8",children:[ie!==s.length-1?e.jsx("span",{className:"absolute top-5 left-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,e.jsxs("div",{className:"relative flex items-start space-x-3",children:[e.jsx("div",{className:"relative",children:t.find(K=>K.id===M.author)?.avatar?e.jsx("img",{className:"h-10 w-10 rounded-full bg-gray-400 flex items-center justify-center ring-8 ring-white",src:t.find(K=>K.id===M.author)?.avatar,alt:""}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center ring-8 ring-white",children:e.jsx(ns,{className:"h-5 w-5 text-gray-500"})})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm",children:e.jsx("a",{href:"#",className:"font-medium text-gray-900",children:t.find(K=>K.id===M.author)?.name})}),e.jsxs("p",{className:"mt-0.5 text-sm text-gray-500",children:[e.jsx(no,{className:"inline-block h-3 w-3 mr-1"}),new Date(M.date).toLocaleString()]})]}),e.jsx("div",{className:"mt-2 text-sm text-gray-700",children:S===M.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx("textarea",{value:B,onChange:K=>F(K.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",rows:3}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{onClick:()=>C(null),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{onClick:()=>O(M.id),className:"inline-flex items-center px-2.5 py-1.5 border border-transparent shadow-sm text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{dangerouslySetInnerHTML:{__html:V(M.text,M.mentions)}}),M.attachments&&M.attachments.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:M.attachments.map((K,H)=>K.match(/\.(jpg|jpeg|png|gif|webp)$/i)?e.jsx("img",{src:K,alt:`Attachment ${H+1}`,className:"h-20 w-20 object-cover rounded cursor-pointer hover:opacity-75",onClick:()=>window.open(K,"_blank")},H):e.jsxs("a",{href:K,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-gray-100 rounded px-2 py-1 text-xs hover:bg-gray-200",children:[e.jsx(wg,{className:"h-3 w-3 mr-1"}),"Attachment ",H+1]},H))})]})}),!S&&e.jsxs("div",{className:"mt-2 flex space-x-2",children:[e.jsxs("button",{onClick:()=>E(M),className:"text-xs text-gray-500 hover:text-gray-700",children:[e.jsx(Ca,{className:"inline-block h-3 w-3 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>le(M.id),className:"text-xs text-gray-500 hover:text-gray-700",children:[e.jsx(nr,{className:"inline-block h-3 w-3 mr-1"}),"Delete"]})]})]})]})]})},M.id))})}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:Q,value:i,onChange:D,rows:3,className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Add a comment..."}),h&&e.jsx("div",{ref:P,className:"absolute z-10 mt-1 w-60 bg-white shadow-lg max-h-56 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",style:{top:v.top,left:v.left},children:te.length===0?e.jsx("div",{className:"py-2 px-4 text-sm text-gray-500",children:"No team members found"}):te.map(M=>e.jsx("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 hover:bg-gray-100",onClick:()=>_(M.id,M.name),children:e.jsxs("div",{className:"flex items-center",children:[M.avatar?e.jsx("img",{src:M.avatar,alt:"",className:"h-6 w-6 rounded-full mr-2"}):e.jsx("div",{className:"h-6 w-6 rounded-full bg-gray-200 flex items-center justify-center mr-2",children:e.jsx(ns,{className:"h-3 w-3 text-gray-500"})}),e.jsx("span",{className:"font-normal block truncate",children:M.name})]})},M.id))})]}),l.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-gray-50 rounded-md",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Attached files:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((M,ie)=>e.jsxs("div",{className:"flex items-center bg-white border border-gray-200 rounded px-2 py-1 text-xs",children:[e.jsx(wg,{className:"h-3 w-3 mr-1 text-gray-400"}),e.jsx("span",{className:"text-gray-700",children:M.name}),e.jsx("button",{onClick:()=>{const K=l.filter((I,ee)=>ee!==ie),H=u.filter((I,ee)=>ee!==ie);d(K),m(H)},className:"ml-2 text-red-500 hover:text-red-700",children:""})]},ie))})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{type:"button",onClick:k,className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(wg,{className:"h-4 w-4 mr-1"}),"Attach"]}),e.jsxs("button",{type:"button",onClick:()=>o(M=>M+" @"),className:"inline-flex items-center px-2.5 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ME,{className:"h-4 w-4 mr-1"}),"Mention"]}),e.jsx("input",{type:"file",ref:q,className:"hidden",multiple:!0,onChange:L})]}),e.jsxs("button",{type:"button",onClick:$,disabled:!i.trim(),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed",children:[e.jsx(Dc,{className:"h-4 w-4 mr-2"}),"Send"]})]})})]})]})})})},AB=({isOpen:s,onClose:t,onAdd:r})=>{const[a,n]=p.useState({name:"",email:"",phone:"",company:"",address:"",city:"",state:"",zip:"",notes:"",status:"active"}),[i,o]=p.useState({}),l=()=>{const m={};return a.name.trim()||(m.name="Name is required"),a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(m.email="Invalid email address"):m.email="Email is required",a.phone.trim()||(m.phone="Phone is required"),o(m),Object.keys(m).length===0},d=m=>{m.preventDefault(),l()&&(r(a),u())},u=()=>{n({name:"",email:"",phone:"",company:"",address:"",city:"",state:"",zip:"",notes:"",status:"active"}),o({}),t()};return s?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-lg bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add New Client"}),e.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-500",children:e.jsx(xt,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(ns,{className:"inline h-4 w-4 mr-1"}),"Full Name *"]}),e.jsx("input",{type:"text",value:a.name,onChange:m=>n({...a,name:m.target.value}),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${i.name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),i.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:i.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(ip,{className:"inline h-4 w-4 mr-1"}),"Company"]}),e.jsx("input",{type:"text",value:a.company,onChange:m=>n({...a,company:m.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(Ba,{className:"inline h-4 w-4 mr-1"}),"Email *"]}),e.jsx("input",{type:"email",value:a.email,onChange:m=>n({...a,email:m.target.value}),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${i.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),i.email&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:i.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(Md,{className:"inline h-4 w-4 mr-1"}),"Phone *"]}),e.jsx("input",{type:"tel",value:a.phone,onChange:m=>n({...a,phone:m.target.value}),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${i.phone?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),i.phone&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:i.phone})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(lp,{className:"inline h-4 w-4 mr-1"}),"Street Address"]}),e.jsx("input",{type:"text",value:a.address,onChange:m=>n({...a,address:m.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{type:"text",value:a.city,onChange:m=>n({...a,city:m.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",value:a.state,onChange:m=>n({...a,state:m.target.value}),maxLength:2,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ZIP Code"}),e.jsx("input",{type:"text",value:a.zip,onChange:m=>n({...a,zip:m.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:a.status,onChange:m=>n({...a,status:m.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"prospect",children:"Prospect"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:a.notes,onChange:m=>n({...a,notes:m.target.value}),rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Additional notes about the client..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Client"})]})]})]})}):null},WQ=({project:s,clients:t,onSave:r,onClose:a,onAddClient:n})=>{const[i,o]=p.useState(s),[l,d]=p.useState(!1);p.useEffect(()=>{o(s)},[s]);const u=async m=>{if(m.preventDefault(),!i.name||!i.budget){alert("Please enter project name and budget");return}d(!0);try{await r(i),a()}catch(h){console.error("Error saving project:",h),alert("Failed to save project")}finally{d(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Edit Project"}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-500 p-1 rounded-full hover:bg-gray-100",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name *"}),e.jsx("input",{type:"text",value:i.name,onChange:m=>o({...i,name:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter project name",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:i.clientId||"",onChange:m=>{const h=m.target.value,x=t.find(f=>f.id===h);o({...i,clientId:h,client:x?.name||""})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select a client (optional)"}),t.map(m=>e.jsxs("option",{value:m.id,children:[m.name," ",m.company?`- ${m.company}`:""]},m.id))]}),e.jsxs("button",{type:"button",onClick:n,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2 whitespace-nowrap",children:[e.jsx(hA,{className:"w-4 h-4"}),"Add New"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),e.jsx("input",{type:"date",value:i.startDate,onChange:m=>o({...i,startDate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),e.jsx("input",{type:"date",value:i.endDate,onChange:m=>o({...i,endDate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:i.status,onChange:m=>o({...i,status:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"on_hold",children:"On Hold"}),e.jsx("option",{value:"cancelled",children:"Cancelled"}),e.jsx("option",{value:"completed",children:"Completed"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:i.priority,onChange:m=>o({...i,priority:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),e.jsx("input",{type:"number",value:i.budget||"",onChange:m=>o({...i,budget:parseFloat(m.target.value)||0}),className:"w-full pl-7 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter budget amount",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:i.description||"",onChange:m=>o({...i,description:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter project description"})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4 flex justify-end gap-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:l,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:bg-blue-300 disabled:cursor-not-allowed",children:[e.jsx(Qn,{className:"w-4 h-4 mr-2"}),l?"Saving...":"Save Changes"]})]})]})]})})},KQ=()=>{const{t:s}=fr(),{projects:t,progressUpdates:r,fetchProjects:a,addProject:n,updateProject:i,deleteProject:o,addComment:l,addTask:d,updateTask:u,deleteTask:m,deleteComment:h,addTeamMember:x,removeTeamMember:f,fetchProgressUpdates:b,addProgressUpdate:v,deleteProgressUpdate:j}=Eh(),{clients:S,fetchClients:C}=jl(),[B,F]=p.useState(null),[Q,q]=p.useState(""),[P,D]=p.useState("all"),[_,$]=p.useState(!1),[k,L]=p.useState(!1),[E,O]=p.useState(!1),[le,te]=p.useState(!1),[V,M]=p.useState(null),[ie,K]=p.useState(""),[H,I]=p.useState(""),[ee,se]=p.useState([]),[de,re]=p.useState([]),z=p.useRef(null),[ne,Y]=p.useState(""),[X,ye]=p.useState({title:"",assignee:[],dueDate:"",priority:"medium",status:"todo"}),[pe,Ce]=p.useState("overview"),[je,ce]=p.useState([]),[Te,We]=p.useState([]),[Le,U]=p.useState({name:"",client:"",clientId:"",status:"active",priority:"medium",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],budget:0,description:""});p.useEffect(()=>{a(),C()},[]),p.useEffect(()=>{(async()=>{if(pe==="estimates"&&B)try{const J=await kd.getEstimates();if(J.success&&J.data){const Ae=J.data.filter(Fe=>Fe.projectId===B.id);ce(Ae)}}catch(J){console.error("Error fetching project estimates:",J),ce([])}})()},[pe,B]);const fe=oe=>{switch(oe){case"active":return"bg-green-100 text-green-800";case"on_hold":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-yellow-100 text-yellow-800";case"review":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},Se=oe=>{switch(oe){case"high":return"text-red-600";case"medium":return"text-yellow-600";case"low":return"text-green-600";default:return"text-gray-600"}},Re=t.filter(oe=>{const J=oe.name.toLowerCase().includes(Q.toLowerCase())||oe.client.toLowerCase().includes(Q.toLowerCase()),Ae=P==="all"||oe.status===P;return J&&Ae}),G=async()=>{if(!B||!ne.trim())return;console.log("Adding comment:",{projectId:B.id,comment:ne});try{await l(B.id,{author:"Current User",content:ne},void 0),console.log("Comment added successfully")}catch(J){console.error("Error adding comment:",J)}const oe=t.find(J=>J.id===B.id);oe&&F(oe),Y("")},ue=async()=>{if(!Le.name||!Le.budget){alert("Please enter project name and budget");return}try{console.log(" Creating project with data:",{name:Le.name,client:Le.client||"Direct Client",clientId:Le.clientId||void 0,status:Le.status,priority:Le.priority,startDate:Le.startDate,endDate:Le.endDate,budget:Le.budget,description:Le.description}),await n({name:Le.name,client:Le.client||"Direct Client",clientId:Le.clientId||void 0,status:Le.status,priority:Le.priority,startDate:Le.startDate,endDate:Le.endDate,budget:Le.budget,description:Le.description}),U({name:"",client:"",clientId:"",status:"active",priority:"medium",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],budget:0,description:""}),$(!1),await a()}catch(oe){console.error("Error creating project:",oe),alert("Failed to create project. Please try again.")}};p.useEffect(()=>{(async()=>{if(B?.id)try{console.log(" Fetching team members for project:",B.id);const{data:J,error:Ae}=await _e.from("project_team_members").select("*").eq("project_id",B.id);Ae?(console.error(" Error fetching team members:",Ae),We([])):(console.log(" Fetched team members:",J),We(J||[]))}catch(J){console.error(" Error fetching team members:",J),We([])}else We([])})()},[B?.id,pe]);const ge=Te.map(oe=>({id:oe.id,name:oe.member_name,role:oe.member_role||"",email:oe.member_email||"",phone:oe.member_phone||"",permissions:oe.permissions||[]}));return console.log(" Team members for display:",ge),p.useEffect(()=>{B?.id&&b(B.id)},[B?.id]),p.useEffect(()=>{if(B&&t.length>0){const oe=t.find(J=>J.id===B.id);oe&&JSON.stringify(oe)!==JSON.stringify(B)&&F(oe)}},[t]),e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s("projects.title")}),e.jsx("p",{className:"text-gray-600",children:s("projects.subtitle")})]}),e.jsxs("button",{onClick:()=>$(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(Gt,{className:"w-4 h-4"}),s("projects.newProject")]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Mo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:s("projects.searchPlaceholder"),value:Q,onChange:oe=>q(oe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("select",{value:P,onChange:oe=>D(oe.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:s("projects.allStatus")}),e.jsx("option",{value:"active",children:s("projects.active")}),e.jsx("option",{value:"on_hold",children:s("projects.onHold")}),e.jsx("option",{value:"cancelled",children:s("projects.cancelled")}),e.jsx("option",{value:"completed",children:s("projects.completed")})]})]})]}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:`flex-1 p-6 ${B?"mr-96":""}`,children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Re.map(oe=>e.jsxs("div",{onClick:()=>F(oe),className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:oe.name}),e.jsx("p",{className:"text-sm text-gray-600",children:oe.client})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(OE,{className:`w-4 h-4 ${Se(oe.priority)}`}),e.jsx("button",{onClick:J=>{J.stopPropagation(),M(oe)},className:"text-gray-400 hover:text-blue-600",title:"Edit project",children:e.jsx(Ca,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${fe(oe.status)}`,children:oe.status.replace("-"," ")})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[e.jsx("span",{children:s("projects.progress")}),e.jsxs("span",{children:[oe.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${oe.progress}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(oe.endDate).toLocaleDateString()})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(Br,{className:"w-4 h-4"}),e.jsxs("span",{children:["$",oe.spent.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[e.jsx(Sa,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{className:"flex -space-x-2",children:[(oe.team||[]).slice(0,3).map((J,Ae)=>e.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center text-xs text-white border-2 border-white",children:J.split(" ").map(Fe=>Fe[0]).join("")},Ae)),(oe.team||[]).length>3&&e.jsxs("div",{className:"w-6 h-6 bg-gray-400 rounded-full flex items-center justify-center text-xs text-white border-2 border-white",children:["+",(oe.team||[]).length-3]})]})]})]},oe.id))})}),B&&e.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:()=>F(null)}),e.jsxs("div",{className:"absolute inset-4 md:inset-8 lg:inset-12 bg-white rounded-lg shadow-2xl flex flex-col max-w-6xl mx-auto",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-white rounded-t-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:B.name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:B.client})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:async()=>{if(window.confirm(`Are you sure you want to delete "${B.name}"? This action cannot be undone.`))try{await o(B.id),F(null)}catch(oe){console.error("Error deleting project:",oe),alert("Failed to delete project. Please try again.")}},className:"text-red-400 hover:text-red-600 p-2 rounded-lg hover:bg-red-50 transition-colors","aria-label":"Delete project",children:e.jsx(nr,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>F(null),className:"text-gray-400 hover:text-gray-600 p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close details",children:e.jsx(xt,{className:"w-6 h-6"})})]})]})}),e.jsx("div",{className:"border-b border-gray-200 bg-gray-50",children:e.jsxs("nav",{className:"flex px-6 space-x-4 overflow-x-auto",children:[e.jsx("button",{type:"button",onClick:()=>Ce("overview"),className:`px-3 py-2.5 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${pe==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:s("projects.overview")}),e.jsx("button",{type:"button",onClick:()=>Ce("tasks"),className:`px-3 py-2.5 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${pe==="tasks"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:s("projects.tasks")}),e.jsx("button",{type:"button",onClick:()=>Ce("team"),className:`px-3 py-2.5 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${pe==="team"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:s("projects.team")}),e.jsx("button",{onClick:()=>{console.log("Progress tab clicked!"),Ce("progress")},className:`px-3 py-2.5 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${pe==="progress"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,type:"button",children:s("projects.progress")}),e.jsx("button",{type:"button",onClick:()=>Ce("comments"),className:`px-3 py-2.5 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${pe==="comments"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:s("projects.comments")}),e.jsx("button",{type:"button",onClick:()=>Ce("estimates"),className:`px-3 py-2.5 text-sm font-medium whitespace-nowrap border-b-2 transition-colors ${pe==="estimates"?"border-blue-500 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:s("projects.estimates")})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 max-h-[calc(100vh-250px)]",children:[pe==="overview"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-6",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${fe(B.status)}`,children:B.status.replace("-"," ")})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:s("projects.progress")}),e.jsxs("span",{children:[B.progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:`${B.progress}%`}})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:s("projects.budget")}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s("projects.spent")}),e.jsxs("span",{className:"font-medium",children:["$",B.spent.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:s("projects.budget")}),e.jsxs("span",{className:"font-medium",children:["$",B.budget.toLocaleString()]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:s("projects.team")}),e.jsx("div",{className:"space-y-2",children:(B.team||[]).map((oe,J)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-sm text-white",children:oe.split(" ").map(Ae=>Ae[0]).join("")}),e.jsx("span",{className:"text-sm text-gray-900",children:oe})]},J))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s("projects.tasks")}),e.jsx("button",{onClick:()=>L(!0),className:"text-blue-600 hover:text-blue-700 text-sm",children:s("projects.addTask")})]}),e.jsx("div",{className:"space-y-2",children:(B.tasks||[]).map(oe=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${oe.status==="completed"?"bg-green-500":oe.status==="in-progress"?"bg-yellow-500":"bg-gray-300"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:oe.title}),e.jsx("p",{className:"text-xs text-gray-600",children:(()=>{const J=oe.assignee;if(Array.isArray(J)){const Ae=J.filter(Fe=>!Fe.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i));return Ae.length>0?Ae.join(", "):"Unassigned"}return typeof J=="string"&&J.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i)?"Unassigned":J||"Unassigned"})()})]})]},oe.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:s("projects.comments")}),e.jsx("div",{className:"space-y-4 mb-4",children:(B.comments||[]).map(oe=>e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center text-sm",children:oe.author.split(" ").map(J=>J[0]).join("")}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("p",{className:"text-sm text-gray-900",children:oe.content}),oe.attachments&&oe.attachments.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:oe.attachments.map((J,Ae)=>J.match(/\.(jpg|jpeg|png|gif|webp)$/i)?e.jsx("img",{src:J,alt:`Attachment ${Ae+1}`,className:"h-16 w-16 object-cover rounded cursor-pointer hover:opacity-75",onClick:()=>window.open(J,"_blank")},Ae):e.jsxs("a",{href:J,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-white border rounded px-2 py-1 text-xs hover:bg-gray-100",children:[e.jsx(wg,{className:"h-3 w-3 mr-1"}),"File ",Ae+1]},Ae))})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[oe.author,"  ",new Date(oe.timestamp).toLocaleDateString()]})]})]},oe.id))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:s("projects.addCommentPlaceholder"),value:ne,onChange:oe=>Y(oe.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",onKeyPress:oe=>oe.key==="Enter"&&G()}),e.jsx("button",{onClick:G,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg",children:e.jsx(Dc,{className:"w-4 h-4"})})]})]})]}),pe==="tasks"&&e.jsx("div",{children:e.jsx(OQ,{tasks:B.tasks||[],team:ge,onAddTask:()=>L(!0),onUpdateTask:async(oe,J)=>{console.log("Updating task:",oe,J);try{await u(B.id,oe,J),await a();const Ae=t.find(Fe=>Fe.id===B.id);Ae&&F(Ae)}catch(Ae){console.error("Error updating task:",Ae)}},onDeleteTask:async oe=>{console.log("Deleting task:",oe);try{await m(B.id,oe),await a();const J=t.find(Ae=>Ae.id===B.id);J&&F(J)}catch(J){console.error("Error deleting task:",J)}},onAddComment:async(oe,J)=>{console.log("Adding comment for task:",oe,J);try{await l(B.id,{author:"Current User",content:`Task ${oe}: ${J}`}),await a();const Ae=t.find(Fe=>Fe.id===B.id);Ae&&F(Ae)}catch(Ae){console.error("Error adding comment:",Ae)}}})}),pe==="team"&&e.jsx(HQ,{team:ge,projectId:B.id,addTeamMember:x,removeTeamMember:f}),pe==="progress"&&e.jsx(qQ,{progressUpdates:r,tasks:B.tasks||[],team:ge,onUploadProgress:()=>O(!0),onDeleteProgress:j}),pe==="comments"&&e.jsx($Q,{comments:(B.comments||[]).map(oe=>({id:oe.id,text:oe.content,date:oe.timestamp,author:oe.author,mentions:[],attachments:oe.attachments||[]})),team:ge,projectId:B.id,onAddComment:async(oe,J)=>{console.log("Adding comment with attachments:",oe,J);try{await l(B.id,{author:"Current User",content:oe},J)}catch(Ae){console.error("Error adding comment:",Ae)}},onDeleteComment:async oe=>{console.log("Deleting comment:",oe);try{await h(B.id,oe)}catch(J){console.error("Error deleting comment:",J)}}}),pe==="estimates"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Project Estimates"}),e.jsxs("button",{onClick:()=>window.location.href=`/estimates?project_id=${B.id}`,className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"New Estimate"]})]}),je.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(ra,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No estimates for this project yet"}),e.jsx("button",{onClick:()=>window.location.href=`/estimates?project_id=${B.id}`,className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Create First Estimate"})]}):e.jsx("div",{className:"space-y-3",children:je.map(oe=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-base font-medium text-gray-900",children:oe.title}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[oe.clientName||"No client","  ",new Date(oe.createdAt).toLocaleDateString()]}),e.jsxs("div",{className:"mt-2 flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Items: ",oe.items?.length||0]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${oe.status==="draft"?"bg-gray-100 text-gray-800":oe.status==="sent"?"bg-blue-100 text-blue-800":oe.status==="approved"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:oe.status})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",oe.total?.toFixed(2)||"0.00"]}),e.jsx("button",{onClick:()=>window.location.href=`/estimates?id=${oe.id}`,className:"mt-2 text-sm text-blue-600 hover:text-blue-800",children:"View "})]})]})},oe.id))})]})]})]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Create New Project"}),e.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-500 p-1 rounded-full hover:bg-gray-100",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Name"}),e.jsx("input",{type:"text",value:Le.name,onChange:oe=>U({...Le,name:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter project name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:Le.clientId,onChange:oe=>{const J=oe.target.value,Ae=S.find(Fe=>Fe.id===J);U({...Le,clientId:J,client:Ae?.name||""})},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:s("projects.selectClient")}),S.map(oe=>e.jsxs("option",{value:oe.id,children:[oe.name," ",oe.company?`- ${oe.company}`:""]},oe.id))]}),e.jsxs("button",{type:"button",onClick:()=>te(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center gap-2 whitespace-nowrap",children:[e.jsx(hA,{className:"w-4 h-4"}),"Add New"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:Le.startDate,onChange:oe=>U({...Le,startDate:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:Le.endDate,onChange:oe=>U({...Le,endDate:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:Le.status,onChange:oe=>U({...Le,status:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"active",children:s("projects.active")}),e.jsx("option",{value:"on_hold",children:s("projects.onHold")}),e.jsx("option",{value:"cancelled",children:s("projects.cancelled")}),e.jsx("option",{value:"completed",children:s("projects.completed")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:Le.priority,onChange:oe=>U({...Le,priority:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:s("common.low")}),e.jsx("option",{value:"medium",children:s("common.medium")}),e.jsx("option",{value:"high",children:s("common.high")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Budget"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500 sm:text-sm",children:"$"})}),e.jsx("input",{type:"number",value:Le.budget||"",onChange:oe=>U({...Le,budget:parseFloat(oe.target.value)||0}),className:"w-full pl-7 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter budget amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:Le.description,onChange:oe=>U({...Le,description:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter project description"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>$(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ue,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Create Project"})]})]})}),e.jsx(AB,{isOpen:le,onAdd:async oe=>{try{const{addClient:J}=jl.getState();await J(oe),await C(),te(!1)}catch(J){console.error("Error adding client:",J),alert("Failed to add client")}},onClose:()=>te(!1)}),V&&e.jsx(WQ,{project:V,clients:S,onSave:async oe=>{await i(oe.id,oe),await a(),M(null)},onClose:()=>M(null),onAddClient:()=>te(!0)}),k&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Add New Task"}),e.jsx("button",{onClick:()=>L(!1),className:"text-gray-400 hover:text-gray-500 p-1 rounded-full hover:bg-gray-100",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Task Title"}),e.jsx("input",{type:"text",value:X.title,onChange:oe=>ye({...X,title:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter task title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Enter task description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assignees (select multiple)"}),e.jsx("div",{className:"border border-gray-300 rounded-md p-3 max-h-40 overflow-y-auto",children:ge.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"No team members available. Add team members first."}):e.jsx("div",{className:"space-y-2",children:ge.map(oe=>e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-1 rounded",children:[e.jsx("input",{type:"checkbox",checked:X.assignee.includes(oe.name),onChange:J=>{J.target.checked?ye({...X,assignee:[...X.assignee,oe.name]}):ye({...X,assignee:X.assignee.filter(Ae=>Ae!==oe.name)})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:oe.name}),oe.role&&e.jsxs("span",{className:"text-xs text-gray-500",children:["(",oe.role,")"]})]},oe.id))})}),X.assignee.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:X.assignee.map(oe=>e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[oe,e.jsx("button",{type:"button",onClick:()=>ye({...X,assignee:X.assignee.filter(J=>J!==oe)}),className:"ml-1.5 inline-flex items-center justify-center flex-shrink-0 h-4 w-4 rounded-full text-blue-400 hover:bg-blue-200 hover:text-blue-500 focus:outline-none",children:e.jsx(xt,{className:"h-3 w-3"})})]},oe))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Date"}),e.jsx("input",{type:"date",value:X.dueDate,onChange:oe=>ye({...X,dueDate:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:X.status,onChange:oe=>ye({...X,status:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"todo",children:s("tasks.todo")}),e.jsx("option",{value:"in-progress",children:s("tasks.inProgress")}),e.jsx("option",{value:"completed",children:s("tasks.completed")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),e.jsxs("select",{value:X.priority,onChange:oe=>ye({...X,priority:oe.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"low",children:s("common.low")}),e.jsx("option",{value:"medium",children:s("common.medium")}),e.jsx("option",{value:"high",children:s("common.high")})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>L(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(B&&X.title){console.log("Adding task:",{projectId:B.id,task:X});try{await d(B.id,X),console.log("Task added successfully"),L(!1),ye({title:"",assignee:[],dueDate:"",priority:"medium",status:"todo"});const oe=t.find(J=>J.id===B.id);oe&&F(oe)}catch(oe){console.error("Error adding task:",oe)}}else console.error("Cannot add task - missing project or title")},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Add Task"})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-lg w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Upload Progress Update"}),e.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-500 p-1 rounded-full hover:bg-gray-100",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:ie,onChange:oe=>K(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:"Describe the progress update"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Related Task"}),e.jsxs("select",{value:H,onChange:oe=>I(oe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:s("projects.selectTask")}),B?.tasks.map(oe=>e.jsx("option",{value:oe.id,children:oe.title},oe.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photos"}),e.jsx("input",{ref:z,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:oe=>{const J=Array.from(oe.target.files||[]);se(J);const Ae=J.map(Fe=>URL.createObjectURL(Fe));re(Ae)}}),e.jsx("div",{onClick:()=>z.current?.click(),className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-gray-400",children:de.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-2",children:de.map((oe,J)=>e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:oe,alt:`Preview ${J+1}`,className:"w-full h-24 object-cover rounded"}),e.jsx("button",{onClick:Ae=>{Ae.stopPropagation();const Fe=ee.filter((Ie,et)=>et!==J),Qe=de.filter((Ie,et)=>et!==J);se(Fe),re(Qe)},className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:e.jsx(xt,{className:"w-3 h-3"})})]},J))}):e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(iy,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Click to select photos or drag and drop"}),e.jsx("button",{type:"button",className:"mt-2 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50",children:"Select Photos"})]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{O(!1),K(""),I(""),se([]),re([])},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(!B)return;const oe={projectId:B.id,date:new Date().toISOString(),description:ie,photos:[],taskId:H,postedBy:"Current User"};console.log("Creating progress update:",oe),console.log("Uploading images:",ee),await v(oe,ee),alert(`Progress update saved with ${ee.length} photo(s)!`),de.forEach(J=>URL.revokeObjectURL(J)),O(!1),K(""),I(""),se([]),re([])},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Upload Progress"})]})]})})]})},mB=({address:s,className:t="",showIcon:r=!0,openInNewTab:a=!0})=>{if(!s||s.trim()==="")return e.jsx("span",{className:"text-gray-400 text-sm",children:"No location specified"});const n=o=>{const l=encodeURIComponent(o);return/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)?`maps://maps.apple.com/?q=${l}`:`https://www.google.com/maps/search/?api=1&query=${l}`},i=o=>{o.preventDefault();const l=n(s);a?window.open(l,"_blank","noopener,noreferrer"):window.location.href=l};return e.jsxs("a",{href:n(s),onClick:i,className:`inline-flex items-center gap-1.5 text-blue-600 hover:text-blue-700 hover:underline transition-colors ${t}`,target:a?"_blank":"_self",rel:a?"noopener noreferrer":void 0,title:`Open ${s} in maps`,children:[r&&e.jsx(lp,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s}),r&&e.jsx(oy,{className:"w-3 h-3 flex-shrink-0 opacity-50"})]})},zQ=({isOpen:s,onClose:t,event:r})=>{const{user:a}=ka(),[n,i]=p.useState(""),[o,l]=p.useState(""),[d,u]=p.useState(Array(10).fill(null).map(()=>({email:"",name:""}))),[m,h]=p.useState(!1),[x,f]=p.useState([]),[b,v]=p.useState(""),[j,S]=p.useState(!1),[C,B]=p.useState({name:"",email:"",phone:"",role:""}),[F,Q]=p.useState(!1),[q,P]=p.useState({title:"",description:"",location:"",startDate:"",endDate:"",eventType:"",status:""});p.useEffect(()=>{s&&a&&(async()=>{try{const{data:L,error:E}=await _e.from("employees").select("*").eq("user_id",a.id);if(E)throw E;L&&f(L)}catch(L){console.error("Error fetching employees:",L)}})()},[s,a]),p.useEffect(()=>{if(r&&s&&(P({title:r.title||"",description:r.description||"",location:r.location||"",startDate:r.start_date||"",endDate:r.end_date||"",eventType:r.event_type||"",status:r.status||""}),r.start_date)){const k=new Date(r.start_date),L=new Date(k.getTime()-3600*1e3);i(L.toISOString().slice(0,16))}},[r,s]);const D=()=>{if(!b)return;const k=x.find(le=>le.id===b);if(!k)return;const L=d.findIndex(le=>!le.email);if(L===-1){alert("All email slots are full. Remove an email to add more.");return}if(d.some(le=>le.email===k.email)){alert("This employee is already added to the recipient list.");return}const O=[...d];O[L]={email:k.email,name:k.name},u(O),v("")},_=async()=>{if(!a)return;if(!C.name.trim()||!C.email.trim()){alert("Please enter both name and email for the new employee.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C.email)){alert("Please enter a valid email address.");return}Q(!0);try{const{data:L,error:E}=await _e.from("employees").insert([{user_id:a.id,name:C.name.trim(),email:C.email.trim(),phone:C.phone.trim()||null,role:C.role.trim()||null}]).select().single();if(E)throw E;f([...x,L]);const O=d.findIndex(le=>!le.email);if(O!==-1){const le=[...d];le[O]={email:L.email,name:L.name},u(le)}B({name:"",email:"",phone:"",role:""}),S(!1),alert(" Employee created and added to recipients!")}catch(L){console.error("Error creating employee:",L),alert(`Failed to create employee: ${L instanceof Error?L.message:"Unknown error"}`)}finally{Q(!1)}},$=async(k=!1)=>{if(r){h(!0);try{const L=d.filter(te=>te.email.trim()!==""),E={event:{id:r.id,title:q.title||r.title,description:q.description||r.description,start_date:q.startDate||r.start_date,end_date:q.endDate||r.end_date,location:q.location||r.location,event_type:q.eventType||r.event_type,status:q.status||r.status,project_id:r.project_id,client_id:r.client_id},notification:{trigger_time:k?new Date().toISOString():n,message:o,recipients:L.map(te=>({email:te.email,name:te.name||te.email.split("@")[0]})),is_test:k},timestamp:new Date().toISOString()};console.log(" Sending webhook payload:",E);const O=await fetch("https://contractorai.app.n8n.cloud/webhook/110a2ba9-93f2-4574-b2f6-3dc1d2f69637",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(E)}),le=await O.text();if(console.log(" Webhook response:",O.status,le),O.ok)alert(k?" Test notification sent successfully! Check console for details.":"Notification scheduled successfully!"),k||t();else throw new Error(`Failed to send notification: ${O.status} ${le}`)}catch(L){console.error(" Error sending notification:",L),alert(`Failed to send notification: ${L instanceof Error?L.message:"Unknown error"}`)}finally{h(!1)}}};return!s||!r?null:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[e.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(Ba,{className:"w-5 h-5 mr-2 text-blue-600"}),"Send Notification for: ",r.title]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:e.jsx(xt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-blue-900 mb-3 flex items-center",children:[e.jsx(Fr,{className:"w-4 h-4 mr-2"}),"Calendar Event Details (editable)"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Event Title"}),e.jsx("input",{type:"text",value:q.title,onChange:k=>P({...q,title:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event title..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Start Date & Time"}),e.jsx("input",{type:"datetime-local",value:q.startDate.slice(0,16),onChange:k=>P({...q,startDate:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"End Date & Time"}),e.jsx("input",{type:"datetime-local",value:q.endDate.slice(0,16),onChange:k=>P({...q,endDate:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:q.location,onChange:k=>P({...q,location:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event location..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Event Type"}),e.jsxs("select",{value:q.eventType,onChange:k=>P({...q,eventType:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"task",children:"Task"}),e.jsx("option",{value:"milestone",children:"Milestone"}),e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"delivery",children:"Delivery"}),e.jsx("option",{value:"inspection",children:"Inspection"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:q.status,onChange:k=>P({...q,status:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"delayed",children:"Delayed"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:q.description,onChange:k=>P({...q,description:k.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Event description..."})]})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"These details will be sent in the notification. Edit them if needed."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(no,{className:"w-4 h-4 mr-2"}),"Notification Trigger Time"]}),e.jsx("input",{type:"datetime-local",value:n,onChange:k=>i(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"When to send the notification (separate from event time)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message for employees:"}),e.jsx("textarea",{value:o,onChange:k=>l(k.target.value),rows:4,placeholder:"Enter your message here...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center",children:[e.jsx(hA,{className:"w-4 h-4 mr-2"}),"Add Employees as Recipients"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:b,onChange:k=>v(k.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select an employee to add..."}),x.map(k=>e.jsxs("option",{value:k.id,children:[k.name," (",k.email,")"]},k.id))]}),e.jsx("button",{type:"button",onClick:D,disabled:!b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"Add"})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[x.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"No employees found. Create a new employee below."}):e.jsx("p",{className:"text-xs text-gray-500",children:"Don't see who you're looking for?"}),e.jsxs("button",{type:"button",onClick:()=>S(!j),className:"text-sm font-medium text-blue-600 hover:text-blue-700 flex items-center gap-1",children:[e.jsx(hA,{className:"w-4 h-4"}),j?"Cancel":"Create New Employee"]})]})]}),j&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("h5",{className:"text-sm font-semibold text-green-900 mb-3",children:"Create New Employee"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:C.name,onChange:k=>B({...C,name:k.target.value}),placeholder:"John Doe",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:C.email,onChange:k=>B({...C,email:k.target.value}),placeholder:"john@example.com",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Phone (optional)"}),e.jsx("input",{type:"tel",value:C.phone,onChange:k=>B({...C,phone:k.target.value}),placeholder:"(555) 123-4567",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Role (optional)"}),e.jsx("input",{type:"text",value:C.role,onChange:k=>B({...C,role:k.target.value}),placeholder:"Project Manager",className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsx("button",{type:"button",onClick:_,disabled:F||!C.name.trim()||!C.email.trim(),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:F?"Creating...":"Create & Add to Recipients"}),e.jsx("button",{type:"button",onClick:()=>{S(!1),B({name:"",email:"",phone:"",role:""})},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm font-medium",children:"Cancel"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-600",children:"This employee will be saved to your account and automatically added to the recipient list."})]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto border border-gray-200 rounded-md p-3 bg-gray-50",children:d.filter(k=>k.email).length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No employees added yet. Select employees from the dropdown above."}):d.filter(k=>k.email).map((k,L)=>e.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ns,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.name}),e.jsx("p",{className:"text-xs text-gray-500",children:k.email})]})]}),e.jsx("button",{type:"button",onClick:()=>{const E=[...d],O=d.findIndex(le=>le.email===k.email);E[O]={email:"",name:""},u(E)},className:"px-2 py-1 text-red-600 hover:text-red-700 hover:bg-red-50 rounded",title:"Remove",children:e.jsx(xt,{className:"w-4 h-4"})})]},L))}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:[d.filter(k=>k.email).length," employee(s) added"]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse gap-2",children:[e.jsxs("button",{onClick:()=>$(!1),disabled:m||!n||d.every(k=>!k.email),className:"w-full inline-flex justify-center items-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Dc,{className:"w-4 h-4 mr-2"}),m?"Sending...":"Schedule Notification"]}),e.jsx("button",{onClick:t,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})})},GQ=({isOpen:s,onClose:t,event:r})=>{const[a,n]=p.useState([]),[i,o]=p.useState(!1),[l,d]=p.useState(new Set);p.useEffect(()=>{s&&r&&u()},[s,r]);const u=async()=>{if(r){o(!0);try{const{data:x,error:f}=await _e.from("scheduled_notifications").select("*").eq("event_title",r.title).eq("status","pending").order("trigger_time",{ascending:!0});if(f)throw f;n(x||[])}catch(x){console.error("Error fetching notifications:",x),alert("Failed to fetch notifications")}finally{o(!1)}}},m=async(x,f)=>{if(confirm(`Are you sure you want to cancel the notification for ${f}?`)){d(v=>new Set(v).add(x));try{const{error:v}=await _e.from("scheduled_notifications").delete().eq("id",x);if(v)throw v;n(j=>j.filter(S=>S.id!==x)),alert(` Notification cancelled for ${f}`)}catch(v){console.error("Error cancelling notification:",v),alert(`Failed to cancel notification for ${f}`)}finally{d(v=>{const j=new Set(v);return j.delete(x),j})}}},h=async()=>{if(confirm(`Are you sure you want to cancel ALL ${a.length} pending notifications for this event?`)){o(!0);try{const{error:f}=await _e.from("scheduled_notifications").delete().eq("event_title",r.title).eq("status","pending");if(f)throw f;n([]),alert(` All ${a.length} notifications cancelled`)}catch(f){console.error("Error cancelling all notifications:",f),alert("Failed to cancel notifications")}finally{o(!1)}}};return!s||!r?null:e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),e.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:[e.jsxs("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[e.jsx(no,{className:"w-5 h-5 mr-2 text-blue-600"}),"Manage Scheduled Notifications"]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500",children:e.jsx(xt,{className:"w-6 h-6"})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:r.title}),e.jsxs("p",{className:"text-xs text-blue-700 mt-1",children:["Event Date: ",Nr(Ln(r.start_date),"MMM d, yyyy h:mm a")]})]}),i?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading notifications..."})]}):a.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qa,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"No pending notifications for this event"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click the Bell icon to schedule notifications"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[a.length," pending notification",a.length!==1?"s":""]}),e.jsxs("button",{onClick:h,className:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center",children:[e.jsx(nr,{className:"w-4 h-4 mr-1"}),"Cancel All"]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:a.map(x=>e.jsx("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 transition-colors bg-white",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ba,{className:"w-4 h-4 text-gray-400 mr-2"}),e.jsx("span",{className:"font-medium text-gray-900",children:x.recipient_name})]}),e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:x.recipient_email}),e.jsxs("div",{className:"mt-2 flex items-center text-xs text-gray-500",children:[e.jsx(no,{className:"w-3 h-3 mr-1"}),"Will send: ",Nr(Ln(x.trigger_time),"MMM d, yyyy h:mm a")]}),x.message&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 bg-gray-50 p-2 rounded",children:['Message: "',x.message,'"']})]}),e.jsx("button",{onClick:()=>m(x.id,x.recipient_email),disabled:l.has(x.id),className:"ml-4 p-2 text-red-600 hover:text-red-700 hover:bg-red-50 rounded-md transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Cancel this notification",children:l.has(x.id)?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-red-600"}):e.jsx(nr,{className:"w-4 h-4"})})]})},x.id))})]})]}),e.jsx("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e.jsx("button",{onClick:t,className:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:w-auto sm:text-sm",children:"Close"})})]})]})})},VQ=({isOpen:s,onClose:t,selectedDate:r,event:a})=>{const[n,i]=p.useState(!1),[o,l]=p.useState(!1),[d,u]=p.useState(!1),m=B=>{if(!B)return"";const F=new Date(B);F.setHours(9,0,0,0);const Q=F.getFullYear(),q=String(F.getMonth()+1).padStart(2,"0"),P=String(F.getDate()).padStart(2,"0"),D=String(F.getHours()).padStart(2,"0"),_=String(F.getMinutes()).padStart(2,"0");return`${Q}-${q}-${P}T${D}:${_}`},h=B=>{if(!B)return"";const F=new Date(B);F.setHours(10,0,0,0);const Q=F.getFullYear(),q=String(F.getMonth()+1).padStart(2,"0"),P=String(F.getDate()).padStart(2,"0"),D=String(F.getHours()).padStart(2,"0"),_=String(F.getMinutes()).padStart(2,"0");return`${Q}-${q}-${P}T${D}:${_}`},[x,f]=p.useState({title:"",description:"",start:m(r),end:h(r),type:"task",status:"pending",weatherSensitive:!1,location:""}),{addEvent:b,updateEvent:v,deleteEvent:j}=jh();p.useEffect(()=>{if(a)try{const B=a.start_date||"",F=a.end_date||a.start_date||"";f({title:a.title||"",description:a.description||"",start:B.slice(0,16),end:F.slice(0,16),type:a.event_type||"task",status:a.status||"pending",weatherSensitive:a.weather_sensitive||!1,location:a.location||""}),i(!1)}catch(B){console.error("Error initializing event data:",B),console.error("Event data:",a)}else f({title:"",description:"",start:m(r),end:h(r),type:"task",status:"pending",weatherSensitive:!1,location:""}),i(!0)},[a,r]);const S=async B=>{if(B.preventDefault(),a)await v(a.id,{title:x.title,description:x.description,start_date:x.start,end_date:x.end,event_type:x.type,status:x.status,weather_sensitive:x.weatherSensitive,location:x.location});else{const F={title:x.title,description:x.description,start_date:x.start,end_date:x.end,event_type:x.type,status:x.status,weather_sensitive:x.weatherSensitive,location:x.location};await b(F)}t(),i(!1)},C=async()=>{a&&window.confirm("Are you sure you want to delete this event?")&&(await j(a.id),t())};return s?e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a?n?"Edit Event":"Event Details":"Add New Event"}),e.jsxs("div",{className:"flex items-center gap-2",children:[a&&!n&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>l(!0),className:"text-green-600 hover:text-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 rounded-full p-1",title:"Send Notification",children:e.jsx(dA,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>u(!0),className:"text-orange-600 hover:text-orange-700 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded-full p-1",title:"Manage Scheduled Notifications",children:e.jsx(vC,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>i(!0),className:"text-blue-600 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1",title:"Edit Event",children:e.jsx(GE,{className:"w-5 h-5"})}),e.jsx("button",{onClick:C,className:"text-red-600 hover:text-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 rounded-full p-1",title:"Delete Event",children:e.jsx(nr,{className:"w-5 h-5"})})]}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1",children:e.jsx(xt,{className:"w-5 h-5"})})]})]}),e.jsxs("form",{onSubmit:S,className:"p-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Event Title"}),n?e.jsx("input",{type:"text",value:x.title,onChange:B=>f({...x,title:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}):e.jsx("p",{className:"mt-1 text-gray-900 font-medium",children:x.title})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date & Time"}),n?e.jsx("input",{type:"datetime-local",value:x.start,onChange:B=>f({...x,start:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}):e.jsx("p",{className:"mt-1 text-gray-900",children:x.start?Nr(new Date(x.start),"PPp"):"No date"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Date & Time"}),n?e.jsx("input",{type:"datetime-local",value:x.end,onChange:B=>f({...x,end:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0}):e.jsx("p",{className:"mt-1 text-gray-900",children:x.end?Nr(new Date(x.end),"PPp"):"No date"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Event Type"}),n?e.jsxs("select",{value:x.type,onChange:B=>f({...x,type:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"task",children:"Task"}),e.jsx("option",{value:"milestone",children:"Milestone"}),e.jsx("option",{value:"meeting",children:"Meeting"}),e.jsx("option",{value:"delivery",children:"Delivery"}),e.jsx("option",{value:"inspection",children:"Inspection"})]}):e.jsx("p",{className:"mt-1 text-gray-900 capitalize",children:x.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),n?e.jsxs("select",{value:x.status,onChange:B=>f({...x,status:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"delayed",children:"Delayed"})]}):e.jsx("p",{className:"mt-1 text-gray-900 capitalize",children:x.status.replace("_"," ")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Location"}),n?e.jsx("input",{type:"text",value:x.location,onChange:B=>f({...x,location:B.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"e.g., 123 Main St, City, State or Client's Office"}):e.jsx("div",{className:"mt-1",children:x.location?e.jsx(mB,{address:x.location,className:"text-sm"}):e.jsx("p",{className:"text-gray-400 text-sm",children:"No location specified"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),n?e.jsx("textarea",{value:x.description,onChange:B=>f({...x,description:B.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"}):e.jsx("p",{className:"mt-1 text-gray-900 whitespace-pre-wrap",children:x.description||"No description provided"})]}),e.jsx("div",{className:"flex items-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"checkbox",id:"weatherSensitive",checked:x.weatherSensitive,onChange:B=>f({...x,weatherSensitive:B.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"weatherSensitive",className:"ml-2 block text-sm text-gray-700",children:"Weather Sensitive Task"})]}):e.jsx("p",{className:"text-sm text-gray-700",children:x.weatherSensitive?" Weather Sensitive Task":"Not weather sensitive"})})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:n?"Cancel":"Close"}),n&&e.jsx("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:a?"Save Changes":"Add Event"})]})]})]})]}),e.jsx(zQ,{isOpen:o,onClose:()=>l(!1),event:a}),e.jsx(GQ,{isOpen:d,onClose:()=>u(!1),event:a})]}):null},Py=async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support notifications"),!1),hB=async()=>{if(!("serviceWorker"in navigator))return console.log("Service workers are not supported"),null;try{const s=await fetch("/sw.js",{method:"HEAD"}).catch(()=>null);if(!s||!s.ok)return console.warn("Service worker file not found, notifications will work without it"),null;const t=await navigator.serviceWorker.register("/sw.js");return console.log("Service Worker registered:",t),t}catch(s){return console.warn("Service Worker registration failed (non-critical):",s),null}},YQ=async(s,t)=>{if(!await Py()){console.log("Notification permission denied");return}"serviceWorker"in navigator&&navigator.serviceWorker.controller?await(await navigator.serviceWorker.ready).showNotification(s,{body:t.body,icon:"/logo.png",badge:"/logo.png",vibrate:[200,100,200],tag:t.tag||"calendar-notification",requireInteraction:!0,data:t.data||{url:"/calendar"}}):new Notification(s,{body:t.body,icon:"/logo.png",tag:t.tag||"calendar-notification"})},Qj=(s,t,r=15)=>{const a=new Date,n=new Date(t.getTime()-r*60*1e3),i=n.getTime()-a.getTime();if(i>0){let o="";if(r>=1440){const l=Math.floor(r/1440);o=`${s} starts in ${l} day${l>1?"s":""}`}else if(r>=60){const l=Math.floor(r/60);o=`${s} starts in ${l} hour${l>1?"s":""}`}else o=`${s} starts in ${r} minute${r>1?"s":""}`;return setTimeout(()=>{YQ(" Job Reminder",{body:o,tag:`event-${t.getTime()}-${r}`,data:{url:"/calendar"}})},i),console.log(`Notification scheduled for ${s} at ${n}`),!0}return!1},JQ=async s=>{const t=new Date,r=2880*60*1e3;s.forEach(a=>{const n=new Date(a.start_date||a.start),i=n.getTime()-t.getTime();i>0&&i<r&&(i>1440*60*1e3&&Qj(a.title,n,1440),i>3600*1e3&&Qj(a.title,n,60))})},XQ=()=>{const[s,t]=p.useState(!1),[r,a]=p.useState(!1);p.useEffect(()=>{(()=>{!localStorage.getItem("notification-banner-dismissed")&&"Notification"in window&&Notification.permission==="default"&&t(!0)})()},[]);const n=async()=>{try{if(await Py()){try{await hB()}catch(l){console.warn("Service worker registration failed, but notifications will still work:",l)}t(!1),localStorage.setItem("notification-banner-dismissed","true"),alert(" Notifications enabled! You'll receive reminders 1 day and 1 hour before your jobs.")}else alert(" Notification permission denied. Please enable notifications in your browser settings.")}catch(o){console.error("Error enabling notifications:",o),alert(" Failed to enable notifications. Please try again or check your browser settings.")}},i=()=>{t(!1),a(!0),localStorage.setItem("notification-banner-dismissed","true")};return!s||r?null:e.jsx("div",{className:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:max-w-md z-50 animate-fade-in",children:e.jsx("div",{className:"bg-blue-600 text-white rounded-lg shadow-2xl p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(dA,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:"Stay on Schedule"}),e.jsx("p",{className:"text-sm text-blue-100 mb-3",children:"Get notified 1 day and 1 hour before your jobs start. Never miss an appointment!"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 bg-white text-blue-600 rounded-md font-medium hover:bg-blue-50 transition-colors text-sm",children:"Enable Notifications"}),e.jsx("button",{onClick:i,className:"px-4 py-2 bg-blue-700 text-white rounded-md hover:bg-blue-800 transition-colors text-sm",children:"Not Now"})]})]}),e.jsx("button",{onClick:i,className:"flex-shrink-0 text-blue-200 hover:text-white transition-colors",children:e.jsx(xt,{className:"w-5 h-5"})})]})})})},ZQ=()=>{const{t:s}=fr(),[t,r]=p.useState(new Date),[a,n]=p.useState("month"),[i,o]=p.useState(null),[l,d]=p.useState(!1),[u,m]=p.useState(null),[h,x]=p.useState(new Date),{profile:f}=Qc(),{events:b,loading:v,error:j,fetchEvents:S,getEventsByDate:C}=jh();p.useEffect(()=>{console.log("Calendar: Fetching events on mount"),S().then(()=>{console.log("Calendar: Events fetched, count:",b.length),console.log("Calendar: Events:",b)})},[S]),p.useEffect(()=>{b.length>0&&f?.calendar_reminders&&JQ(b)},[b,f]),p.useEffect(()=>{const O=setInterval(()=>{x(new Date)},6e4);return()=>clearInterval(O)},[]),p.useEffect(()=>{if(a!=="week")return;const O=document.querySelector(".week-scroll-container");if(!O)return;const le=new Date,te=kc(t),V=[];for(let H=0;H<7;H++){const I=bc(te,H),ee=C(I);V.push(...ee.filter(se=>se.start_date))}const M=V.filter(H=>Ln(H.start_date)>=le).sort((H,I)=>{const ee=Ln(H.start_date),se=Ln(I.start_date);return ee.getTime()-se.getTime()});let ie=le.getHours();if(M.length>0){const H=M[0];ie=Ln(H.start_date).getHours()}const K=Math.max(0,(ie-2)*60);setTimeout(()=>{O.scrollTop=K},100)},[a,b,t]);const B=O=>{switch(O){case"task":return"bg-blue-100 text-blue-800 border-blue-200";case"milestone":return"bg-purple-100 text-purple-800 border-purple-200";case"meeting":return"bg-green-100 text-green-800 border-green-200";case"delivery":return"bg-amber-100 text-amber-800 border-amber-200";case"inspection":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},F=O=>{switch(O){case"pending":return e.jsx(no,{className:"w-4 h-4 text-amber-500"});case"in_progress":return e.jsx(LC,{className:"w-4 h-4 text-blue-500"});case"completed":return e.jsx(zt,{className:"w-4 h-4 text-green-500"});case"delayed":return e.jsx(Qa,{className:"w-4 h-4 text-red-500"});default:return null}},Q=()=>{console.log("Add Event button clicked"),d(!0)},q=O=>{console.log("View changed to:",O),n(O)},P=O=>{console.log("Date navigation:",O),r(le=>O==="prev"?yc(le,1):dp(le,1))},D=O=>{console.log("Date clicked:",O),o(O)},_=(O,le)=>{le.stopPropagation(),console.log(" Event clicked:",O),console.log(" Event start_date:",O.start_date),console.log(" Event end_date:",O.end_date),console.log(" Event type:",typeof O.start_date),m(O),d(!0)},$=()=>{d(!1),m(null)},k=()=>{const O=[],le=$m(t),te=Hm(t),V=kc(le),M=OP(te);let ie=V;for(;ie<=M;){const K=[];for(let H=0;H<7;H++){const I=bc(ie,H),ee=C(I),se=i&&cb(I,i),de=I>=le&&I<=te;K.push(e.jsxs("div",{className:`min-h-[80px] sm:min-h-[100px] md:min-h-[120px] p-1 sm:p-2 border border-gray-200 cursor-pointer ${y2(I)?"bg-blue-50":""} ${se?"ring-2 ring-blue-500":""} ${de?"":"bg-gray-50"} hover:bg-gray-50 transition-colors`,onClick:()=>D(I),children:[e.jsx("div",{className:`font-medium text-xs sm:text-sm ${y2(I)?"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center":de?"text-gray-900":"text-gray-400"}`,children:Nr(I,"d")}),e.jsxs("div",{className:"mt-1 space-y-1 overflow-hidden",children:[ee.slice(0,2).map(re=>e.jsx("div",{onClick:z=>_(re,z),className:`px-1 sm:px-2 py-0.5 sm:py-1 text-xs rounded-md border ${B(re.event_type)} ${re.auto_generated?"border-blue-500":""} hover:opacity-75 hover:shadow-md cursor-pointer truncate transition-all`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"hidden sm:inline",children:F(re.status)}),e.jsx("span",{className:"ml-0 sm:ml-1 font-medium truncate",children:re.title})]})},re.id)),ee.length>2&&e.jsxs("div",{className:"text-xs text-gray-500 px-1 sm:px-2",children:["+",ee.length-2," more"]})]})]},I.toString()))}O.push(e.jsx("div",{className:"grid grid-cols-7",children:K},ie.toString())),ie=bc(ie,7)}return e.jsx("div",{className:"space-y-1",children:O})},L=()=>{const O=[],le=kc(t),te=h,V=te.getHours(),M=te.getMinutes();for(let ie=0;ie<7;ie++){const K=bc(le,ie),H=C(K),I=cb(K,te);O.push(e.jsxs("div",{className:"flex-1 min-w-[120px] relative",children:[e.jsxs("div",{className:`sticky top-0 z-20 bg-gradient-to-b ${I?"from-blue-50 to-white":"from-gray-50 to-white"} border-b-2 ${I?"border-blue-400":"border-gray-200"} p-3 text-center shadow-md`,children:[e.jsx("div",{className:`text-xs font-semibold uppercase tracking-wide ${I?"text-blue-600":"text-gray-500"}`,children:Nr(K,"EEE")}),e.jsx("div",{className:`mt-1 ${I?"bg-blue-600 text-white rounded-full w-8 h-8 flex items-center justify-center mx-auto font-bold":"text-2xl font-bold text-gray-900"}`,children:Nr(K,"d")}),I&&e.jsx("div",{className:"text-xs text-blue-600 font-medium mt-1",children:"Today"})]}),e.jsx("div",{className:"divide-y divide-gray-100 relative",children:Array.from({length:24}).map((ee,se)=>{const de=I&&se===V,re=se>=8&&se<18;return e.jsxs("div",{className:`group relative min-h-[60px] hover:bg-blue-50/30 cursor-pointer transition-colors ${de?"bg-blue-50/50":re?"bg-white":"bg-gray-50/50"}`,children:[ie===0&&e.jsx("div",{className:"absolute -left-16 top-0 w-14 text-xs font-medium text-gray-500 text-right pr-2 pt-1",children:Nr(new Date().setHours(se,0),"h a")}),e.jsxs("div",{className:"flex-1 relative p-1",children:[e.jsx("div",{className:"absolute inset-x-0 top-0 border-t border-gray-200"}),e.jsx("div",{className:"absolute inset-x-0 top-1/2 border-t border-dashed border-gray-100"}),H.filter(z=>z.start_date?Ln(z.start_date).getHours()===se:!1).map(z=>{if(!z.start_date||!z.end_date)return null;const ne=Ln(z.start_date),X=(Ln(z.end_date).getTime()-ne.getTime())/6e4,ye=Math.max(40,X/60*60);return e.jsx("div",{onClick:pe=>_(z,pe),className:`absolute left-1 right-1 p-2 rounded-lg border-l-4 shadow-sm ${B(z.event_type)} hover:shadow-lg hover:scale-[1.02] cursor-pointer transition-all duration-200`,style:{top:`${ne.getMinutes()/60*100}%`,height:`${ye}px`,zIndex:5},children:e.jsxs("div",{className:"flex items-start gap-1",children:[e.jsx("div",{className:"flex-shrink-0",children:F(z.status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-semibold text-sm truncate",children:z.title}),e.jsx("div",{className:"text-xs opacity-75 mt-0.5",children:Nr(ne,"h:mm a")}),z.location&&e.jsxs("div",{className:"text-xs opacity-75 truncate mt-0.5",children:[" ",z.location]})]})]})},z.id)}),de&&e.jsxs("div",{className:"absolute left-0 right-0 z-20",style:{top:`${M/60*100}%`},children:[e.jsx("div",{className:"absolute -left-1.5 -top-1.5 w-3 h-3 bg-red-500 rounded-full animate-pulse shadow-lg"}),e.jsx("div",{className:"absolute left-0 right-0 border-t-2 border-red-500 shadow-sm"}),e.jsx("div",{className:"absolute left-2 -top-4 text-xs font-bold text-red-600 bg-white px-2 py-0.5 rounded-full shadow-sm",children:Nr(te,"h:mm a")})]})]})]},se)})})]},ie))}return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-0 w-16 h-full pointer-events-none z-10"}),e.jsx("div",{className:"week-scroll-container flex border-l border-gray-200 ml-16 h-[calc(100vh-300px)] overflow-y-auto overflow-x-hidden shadow-inner bg-gray-50/30 scroll-smooth",children:O})]})},E=()=>{const O=C(t);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-xl font-semibold text-gray-900",children:Nr(t,"EEEE, MMMM d, yyyy")}),e.jsx("div",{className:"space-y-2",children:Array.from({length:24}).map((le,te)=>e.jsxs("div",{className:"group relative min-h-[64px] border-l-2 border-gray-200 pl-4 hover:bg-gray-50 cursor-pointer",children:[e.jsx("div",{className:"absolute -left-2 top-0 w-4 h-4 rounded-full bg-gray-200 group-hover:bg-gray-300",children:e.jsx("div",{className:"absolute -left-16 top-0 text-sm text-gray-500",children:Nr(new Date().setHours(te,0),"h:mm a")})}),O.filter(V=>Ln(V.start_date).getHours()===te).map(V=>e.jsxs("div",{onClick:M=>_(V,M),className:`p-3 rounded-lg border ${B(V.event_type)} ${V.auto_generated?"border-blue-500":""} hover:opacity-75 hover:shadow-md cursor-pointer transition-all`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium",children:V.title}),F(V.status)]}),e.jsxs("div",{className:"mt-1 text-sm",children:[V.description&&e.jsx("div",{className:"text-sm text-gray-600",children:V.description}),e.jsxs("div",{className:"text-sm opacity-75 mt-1",children:[Nr(Ln(V.start_date),"h:mm a")," -",Nr(Ln(V.end_date),"h:mm a")]}),V.location&&e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:[" ",V.location]})]})]},V.id))]},te))})]})};return e.jsxs("div",{className:"space-y-4 sm:space-y-6 px-4 sm:px-6 lg:px-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s("calendar.title")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:s("calendar.subtitle")})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2",children:e.jsxs("button",{onClick:Q,className:"inline-flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 active:bg-blue-800 w-full sm:w-auto",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),s("calendar.addEvent")]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between sm:justify-start space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:()=>P("prev"),className:"p-2 hover:bg-gray-100 active:bg-gray-200 rounded-full",children:e.jsx(jC,{className:"w-5 h-5 text-gray-600"})}),e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:Nr(t,"MMMM yyyy")}),e.jsx("button",{onClick:()=>P("next"),className:"p-2 hover:bg-gray-100 active:bg-gray-200 rounded-full",children:e.jsx(NC,{className:"w-5 h-5 text-gray-600"})})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex border border-gray-300 rounded-md overflow-hidden",children:[e.jsxs("button",{onClick:()=>q("month"),className:`px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium ${a==="month"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50 active:bg-gray-100"}`,children:[e.jsx(Mn,{className:"w-4 h-4 sm:hidden"}),e.jsx("span",{className:"hidden sm:inline",children:s("calendar.month")})]}),e.jsxs("button",{onClick:()=>q("week"),className:`px-3 sm:px-4 py-2 text-xs sm:text-sm font-medium ${a==="week"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50 active:bg-gray-100"}`,children:[e.jsx(_C,{className:"w-4 h-4 sm:hidden"}),e.jsx("span",{className:"hidden sm:inline",children:s("calendar.week")})]})]})})]}),a==="month"&&e.jsx("div",{className:"grid grid-cols-7 gap-px mt-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map((O,le)=>e.jsxs("div",{className:"text-center text-xs sm:text-sm font-medium text-gray-500",children:[e.jsx("span",{className:"hidden sm:inline",children:O}),e.jsx("span",{className:"sm:hidden",children:O.substring(0,1)})]},O))})]}),e.jsxs("div",{className:"p-2 sm:p-4 md:p-6",children:[a==="month"&&k(),a==="week"&&L(),a==="day"&&E()]})]}),e.jsx(VQ,{isOpen:l,onClose:$,selectedDate:i||t,event:u}),e.jsx(XQ,{})]})},eO=async s=>(await new Promise(t=>setTimeout(t,2e3)),{id:`${s}-${Date.now()}`,platform:s,name:`${s.charAt(0).toUpperCase()+s.slice(1)} Ads Account`,accountId:`${s}_${Math.random().toString(36).substr(2,9)}`,status:"connected",lastSync:new Date().toISOString(),currency:"USD",timeZone:"America/New_York"}),eo=async(s,t)=>(await new Promise(r=>setTimeout(r,1e3)),{success:!0,data:t}),BA=Mc((s,t)=>({accounts:[],selectedAccount:null,campaigns:[],metrics:[],insights:[],recommendations:[],competitors:[],abTests:[],loading:!1,error:null,dateRange:{start:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]},connectAccount:async r=>{s({loading:!0,error:null});try{const a=await eO(r);s(n=>({accounts:[...n.accounts,a],loading:!1}))}catch{s({error:"Failed to connect account",loading:!1})}},disconnectAccount:async r=>{s({loading:!0});try{await eo(`/accounts/${r}/disconnect`),s(a=>({accounts:a.accounts.map(n=>n.id===r?{...n,status:"disconnected"}:n),loading:!1}))}catch{s({error:"Failed to disconnect account",loading:!1})}},refreshAccountData:async r=>{s({loading:!0});try{await eo(`/accounts/${r}/refresh`),s(a=>({accounts:a.accounts.map(n=>n.id===r?{...n,lastSync:new Date().toISOString()}:n),loading:!1}))}catch{s({error:"Failed to refresh account data",loading:!1})}},setSelectedAccount:r=>{s({selectedAccount:r})},setDateRange:r=>{s({dateRange:r})},fetchCampaigns:async r=>{s({loading:!0});try{await eo(`/accounts/${r}/campaigns`),s({loading:!1})}catch{s({error:"Failed to fetch campaigns",loading:!1})}},updateCampaignStatus:async(r,a)=>{s({loading:!0});try{await eo(`/campaigns/${r}/status`,{status:a}),s(n=>({campaigns:n.campaigns.map(i=>i.id===r?{...i,status:a}:i),loading:!1}))}catch{s({error:"Failed to update campaign status",loading:!1})}},updateCampaignBudget:async(r,a)=>{s({loading:!0});try{await eo(`/campaigns/${r}/budget`,{budget:a}),s(n=>({campaigns:n.campaigns.map(i=>i.id===r?{...i,budget:a}:i),loading:!1}))}catch{s({error:"Failed to update campaign budget",loading:!1})}},fetchMetrics:async(r,a)=>{s({loading:!0});try{const n=r.flatMap(i=>Array.from({length:30},(o,l)=>({campaignId:i,date:new Date(Date.now()-l*24*60*60*1e3).toISOString().split("T")[0],impressions:Math.floor(Math.random()*1e4)+1e3,clicks:Math.floor(Math.random()*500)+50,spend:Math.floor(Math.random()*200)+20,conversions:Math.floor(Math.random()*20)+1,ctr:Math.random()*5+1,cpm:Math.random()*20+5,cpc:Math.random()*10+1,cpa:Math.random()*100+20,roas:Math.random()*5+1})));s({metrics:n,loading:!1})}catch{s({error:"Failed to fetch metrics",loading:!1})}},generateInsights:async r=>{s({loading:!0});try{await eo("/ai/insights",{campaignIds:r}),s({loading:!1})}catch{s({error:"Failed to generate insights",loading:!1})}},generateRecommendations:async r=>{s({loading:!0});try{await eo(`/ai/recommendations/${r}`),s({loading:!1})}catch{s({error:"Failed to generate recommendations",loading:!1})}},applyRecommendation:async r=>{s({loading:!0});try{await eo(`/recommendations/${r}/apply`),s(a=>({recommendations:a.recommendations.map(n=>n.id===r?{...n,status:"applied"}:n),loading:!1}))}catch{s({error:"Failed to apply recommendation",loading:!1})}},dismissRecommendation:async r=>{s(a=>({recommendations:a.recommendations.map(n=>n.id===r?{...n,status:"dismissed"}:n)}))},addCompetitor:async r=>{s({loading:!0});try{const a={id:`comp-${Date.now()}`,name:r.replace(/^www\./,"").split(".")[0],domain:r,estimatedSpend:Math.floor(Math.random()*5e4)+5e3,topKeywords:["deck installation","home renovation","contractor services"],adCopy:["Professional Deck Installation","Transform Your Outdoor Space"],landingPages:[`https://${r}/services`,`https://${r}/contact`],lastUpdated:new Date().toISOString()};s(n=>({competitors:[...n.competitors,a],loading:!1}))}catch{s({error:"Failed to add competitor",loading:!1})}},removeCompetitor:async r=>{s(a=>({competitors:a.competitors.filter(n=>n.id!==r)}))},refreshCompetitorData:async r=>{s({loading:!0});try{await eo(`/competitors/${r}/refresh`),s(a=>({competitors:a.competitors.map(n=>n.id===r?{...n,lastUpdated:new Date().toISOString()}:n),loading:!1}))}catch{s({error:"Failed to refresh competitor data",loading:!1})}},createABTest:async r=>{s({loading:!0});try{const a={...r,id:`test-${Date.now()}`};s(n=>({abTests:[...n.abTests,a],loading:!1}))}catch{s({error:"Failed to create A/B test",loading:!1})}},updateABTest:async(r,a)=>{s({loading:!0});try{await eo(`/ab-tests/${r}`,a),s(n=>({abTests:n.abTests.map(i=>i.id===r?{...i,...a}:i),loading:!1}))}catch{s({error:"Failed to update A/B test",loading:!1})}},exportReport:async(r,a)=>{s({loading:!0});try{await eo("/export",{format:r,data:a});const n=new Blob(["Mock report data"],{type:r==="pdf"?"application/pdf":"application/vnd.ms-excel"}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`ad-report.${r}`,o.click(),URL.revokeObjectURL(i),s({loading:!1})}catch{s({error:"Failed to export report",loading:!1})}}})),tO=()=>{const[s,t]=p.useState(!1),[r,a]=p.useState(""),{accounts:n,loading:i,error:o,connectAccount:l,disconnectAccount:d,refreshAccountData:u,setSelectedAccount:m}=BA(),h=[{id:"google",name:"Google Ads",icon:"",color:"bg-blue-500"},{id:"facebook",name:"Facebook Ads",icon:"",color:"bg-blue-600"},{id:"instagram",name:"Instagram Ads",icon:"",color:"bg-pink-500"},{id:"linkedin",name:"LinkedIn Ads",icon:"",color:"bg-blue-700"}],x=async()=>{r&&(await l(r),t(!1),a(""))},f=async S=>{confirm("Are you sure you want to disconnect this account?")&&await d(S)},b=async S=>{await u(S)},v=S=>{switch(S){case"connected":return e.jsx(un,{className:"w-5 h-5 text-green-500"});case"error":return e.jsx(Qa,{className:"w-5 h-5 text-red-500"});case"pending":return e.jsx(An,{className:"w-5 h-5 text-yellow-500 animate-spin"});default:return e.jsx(Qa,{className:"w-5 h-5 text-gray-400"})}},j=S=>{switch(S){case"connected":return"bg-green-100 text-green-800";case"error":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Connected Ad Accounts"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your advertising platform connections"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Connect Account"]})]})}),o&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-400",children:e.jsxs("div",{className:"flex",children:[e.jsx(Qa,{className:"w-5 h-5 text-red-400"}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Gt,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No accounts connected"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Connect your advertising accounts to start analyzing performance"}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Connect Your First Account"]})]}):e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:n.map(S=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-white ${h.find(C=>C.id===S.platform)?.color||"bg-gray-500"}`,children:h.find(C=>C.id===S.platform)?.icon||""}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:S.name}),e.jsx("p",{className:"text-xs text-gray-500",children:S.accountId})]})]}),v(S.status)]}),e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j(S.status)}`,children:S.status.charAt(0).toUpperCase()+S.status.slice(1)})}),e.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Last sync: ",new Date(S.lastSync).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>m(S),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>b(S.id),disabled:i,className:"p-1 text-gray-400 hover:text-gray-600",title:"Refresh data",children:e.jsx(An,{className:`w-4 h-4 ${i?"animate-spin":""}`})}),e.jsx("button",{onClick:()=>f(S.id),className:"p-1 text-gray-400 hover:text-red-600",title:"Disconnect account",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})]},S.id))})}),s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>t(!1)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Connect Ad Account"}),e.jsxs("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Choose a platform to connect your advertising account"}),e.jsx("div",{className:"space-y-3",children:h.map(S=>e.jsxs("button",{onClick:()=>a(S.id),className:`w-full flex items-center p-4 border rounded-lg transition-colors ${r===S.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center text-white ${S.color}`,children:S.icon}),e.jsxs("div",{className:"ml-3 text-left",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:S.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Connect your ",S.name," account"]})]})]},S.id))})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:x,disabled:!r||i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Connecting...":"Connect Account"})]})]})]})})]})},rO=()=>{const[s,t]=p.useState("spend"),[r,a]=p.useState("line"),{campaigns:n,metrics:i,dateRange:o,setDateRange:l,fetchMetrics:d,exportReport:u,loading:m}=BA(),h=p.useMemo(()=>{if(!i.length)return null;const j=i.reduce((q,P)=>({spend:q.spend+P.spend,impressions:q.impressions+P.impressions,clicks:q.clicks+P.clicks,conversions:q.conversions+P.conversions}),{spend:0,impressions:0,clicks:0,conversions:0}),S=i.reduce((q,P)=>q+P.ctr,0)/i.length,C=j.spend/j.clicks,B=j.spend/j.impressions*1e3,F=j.spend/j.conversions,Q=i.reduce((q,P)=>q+P.roas,0)/i.length;return{...j,ctr:S,cpc:C,cpm:B,cpa:F,roas:Q}},[i]),x=p.useMemo(()=>{const j=i.reduce((S,C)=>(S[C.date]||(S[C.date]={date:C.date,spend:0,clicks:0,impressions:0,conversions:0}),S[C.date].spend+=C.spend,S[C.date].clicks+=C.clicks,S[C.date].impressions+=C.impressions,S[C.date].conversions+=C.conversions,S),{});return Object.values(j).sort((S,C)=>new Date(S.date).getTime()-new Date(C.date).getTime())},[i]),f=(j,S)=>{l({start:j,end:S});const C=n.map(B=>B.id);d(C,{start:j,end:S})},b=j=>{u(j,{metrics:h,campaigns:n,dateRange:o})},v=[{title:"Total Spend",value:h?`$${h.spend.toLocaleString()}`:"$0",change:"+12.5%",positive:!0,icon:e.jsx(Br,{className:"w-6 h-6 text-green-600"})},{title:"Impressions",value:h?h.impressions.toLocaleString():"0",change:"+8.2%",positive:!0,icon:e.jsx(ao,{className:"w-6 h-6 text-blue-600"})},{title:"Clicks",value:h?h.clicks.toLocaleString():"0",change:"+15.3%",positive:!0,icon:e.jsx(Yx,{className:"w-6 h-6 text-purple-600"})},{title:"Conversions",value:h?h.conversions.toLocaleString():"0",change:"+22.1%",positive:!0,icon:e.jsx(mA,{className:"w-6 h-6 text-orange-600"})},{title:"CTR",value:h?`${h.ctr.toFixed(2)}%`:"0%",change:"-2.1%",positive:!1,icon:e.jsx(Yx,{className:"w-6 h-6 text-red-600"})},{title:"CPC",value:h?`$${h.cpc.toFixed(2)}`:"$0",change:"-5.4%",positive:!0,icon:e.jsx(Br,{className:"w-6 h-6 text-green-600"})},{title:"CPM",value:h?`$${h.cpm.toFixed(2)}`:"$0",change:"+3.2%",positive:!1,icon:e.jsx(ao,{className:"w-6 h-6 text-blue-600"})},{title:"ROAS",value:h?`${h.roas.toFixed(2)}x`:"0x",change:"+18.7%",positive:!0,icon:e.jsx(io,{className:"w-6 h-6 text-green-600"})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date Range"}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("input",{type:"date",value:o.start,onChange:j=>f(j.target.value,o.end),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),e.jsx("span",{className:"text-gray-500",children:"to"}),e.jsx("input",{type:"date",value:o.end,onChange:j=>f(o.start,j.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>b("excel"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),"Excel"]}),e.jsxs("button",{onClick:()=>b("pdf"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),"PDF"]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:v.map((j,S)=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:j.title}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:j.value})]}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-gray-100 rounded-lg",children:j.icon})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[j.positive?e.jsx(io,{className:"w-4 h-4 mr-1 text-green-600"}):e.jsx(vA,{className:"w-4 h-4 mr-1 text-red-600"}),e.jsx("span",{className:`text-sm font-medium ${j.positive?"text-green-600":"text-red-600"}`,children:j.change}),e.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"vs last period"})]})]},S))}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Performance Trends"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:s,onChange:j=>t(j.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"spend",children:"Spend"}),e.jsx("option",{value:"clicks",children:"Clicks"}),e.jsx("option",{value:"impressions",children:"Impressions"}),e.jsx("option",{value:"conversions",children:"Conversions"})]}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[e.jsx("button",{onClick:()=>a("line"),className:`px-3 py-2 text-sm font-medium ${r==="line"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Line"}),e.jsx("button",{onClick:()=>a("bar"),className:`px-3 py-2 text-sm font-medium ${r==="bar"?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:"Bar"})]})]})]})}),e.jsx("div",{className:"p-6",children:m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):x.length>0?e.jsx("div",{className:"h-64 flex items-end space-x-2",children:x.map((j,S)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-blue-500 rounded-t-sm transition-all duration-300 hover:bg-blue-600",style:{height:`${j[s]/Math.max(...x.map(C=>C[s]))*200}px`,minHeight:"4px"},title:`${j.date}: ${j[s]}`}),e.jsx("div",{className:"text-xs text-gray-500 mt-2 transform -rotate-45 origin-top-left",children:new Date(j.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]},S))}):e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ao,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No data available for the selected date range"})]})})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Campaign Performance"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Spend"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Impressions"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Clicks"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CTR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"CPC"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Conversions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(j=>{const S=i.filter(Q=>Q.campaignId===j.id),C=S.reduce((Q,q)=>({spend:Q.spend+q.spend,impressions:Q.impressions+q.impressions,clicks:Q.clicks+q.clicks,conversions:Q.conversions+q.conversions}),{spend:0,impressions:0,clicks:0,conversions:0}),B=S.reduce((Q,q)=>Q+q.ctr,0)/S.length||0,F=C.spend/C.clicks||0;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.name}),e.jsx("div",{className:"text-sm text-gray-500",children:j.platform})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${j.status==="active"?"bg-green-100 text-green-800":j.status==="paused"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:j.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",j.budget,"/",j.budgetType]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",C.spend.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.impressions.toLocaleString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.clicks.toLocaleString()}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[B.toFixed(2),"%"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",F.toFixed(2)]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:C.conversions})]},j.id)})})]})})]})]})},sO=()=>{const[s,t]=p.useState("insights"),[r,a]=p.useState(null),{insights:n,recommendations:i,campaigns:o,loading:l,generateInsights:d,generateRecommendations:u,applyRecommendation:m,dismissRecommendation:h}=BA(),x=async()=>{const F=o.map(Q=>Q.id);await d(F)},f=async F=>{await u(F)},b=async F=>{await m(F)},v=async F=>{await h(F)},j=F=>{switch(F){case"optimization":return e.jsx(io,{className:"w-5 h-5 text-green-500"});case"warning":return e.jsx(ay,{className:"w-5 h-5 text-yellow-500"});case"opportunity":return e.jsx(op,{className:"w-5 h-5 text-blue-500"});case"trend":return e.jsx(mA,{className:"w-5 h-5 text-purple-500"});default:return e.jsx(Mm,{className:"w-5 h-5 text-gray-500"})}},S=F=>{switch(F){case"optimization":return"bg-green-50 border-green-200";case"warning":return"bg-yellow-50 border-yellow-200";case"opportunity":return"bg-blue-50 border-blue-200";case"trend":return"bg-purple-50 border-purple-200";default:return"bg-gray-50 border-gray-200"}},C=F=>{switch(F){case"high":return"bg-red-100 text-red-800";case"medium":return"bg-yellow-100 text-yellow-800";case"low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},B=F=>{switch(F){case"budget":return"";case"targeting":return"";case"creative":return"";case"bidding":return"";case"schedule":return"";default:return""}};return e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Mm,{className:"w-6 h-6 text-blue-600 mr-3"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"AI Insights & Recommendations"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered analysis of your ad performance"})]})]}),e.jsxs("button",{onClick:x,disabled:l,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(An,{className:`w-4 h-4 mr-2 ${l?"animate-spin":""}`}),l?"Analyzing...":"Refresh Analysis"]})]}),e.jsx("div",{className:"mt-4",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>t("insights"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="insights"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Insights (",n.length,")"]}),e.jsxs("button",{onClick:()=>t("recommendations"),className:`py-2 px-1 border-b-2 font-medium text-sm ${s==="recommendations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Recommendations (",i.filter(F=>F.status==="pending").length,")"]})]})})]}),e.jsx("div",{className:"p-6",children:s==="insights"?e.jsx("div",{className:"space-y-4",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Mm,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No insights available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Generate AI insights to get performance analysis"}),e.jsxs("button",{onClick:x,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Mm,{className:"w-4 h-4 mr-2"}),"Generate Insights"]})]}):n.map(F=>e.jsxs("div",{className:`border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md ${S(F.type)}`,onClick:()=>a(F),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[j(F.type),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:F.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.description}),F.actionable&&e.jsx("p",{className:"text-sm text-blue-600 mt-2 font-medium",children:F.recommendation})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${C(F.impact)}`,children:[F.impact," impact"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[F.confidence,"% confidence"]})]})]}),F.estimatedImprovement&&e.jsxs("div",{className:"mt-3 p-2 bg-white rounded border",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Estimated improvement:"}),e.jsx("div",{className:"text-sm font-medium text-green-600",children:F.estimatedImprovement})]})]},F.id))}):e.jsx("div",{className:"space-y-4",children:i.filter(F=>F.status==="pending").length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mA,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No recommendations available"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"AI will generate recommendations based on your campaign performance"}),o.length>0&&e.jsx("div",{className:"space-y-2",children:o.map(F=>e.jsxs("button",{onClick:()=>f(F.id),className:"block w-full px-4 py-2 text-sm font-medium text-blue-600 bg-blue-50 rounded-md hover:bg-blue-100",children:["Generate recommendations for ",F.name]},F.id))})]}):i.filter(F=>F.status==="pending").map(F=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-2xl",children:B(F.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:F.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:F.description}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Current"}),e.jsx("div",{className:"text-sm font-medium",children:F.currentValue})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Suggested"}),e.jsx("div",{className:"text-sm font-medium text-blue-600",children:F.suggestedValue})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Expected Impact"}),e.jsx("div",{className:"text-sm font-medium text-green-600",children:F.expectedImpact})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[F.confidence,"% confidence"]}),e.jsxs("button",{onClick:()=>b(F.id),className:"inline-flex items-center px-3 py-1 text-xs font-medium text-white bg-green-600 rounded hover:bg-green-700",children:[e.jsx(zt,{className:"w-3 h-3 mr-1"}),"Apply"]}),e.jsxs("button",{onClick:()=>v(F.id),className:"inline-flex items-center px-3 py-1 text-xs font-medium text-gray-700 bg-gray-100 rounded hover:bg-gray-200",children:[e.jsx(xt,{className:"w-3 h-3 mr-1"}),"Dismiss"]})]})]})},F.id))})}),r&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>a(null)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("div",{className:"flex items-center",children:[j(r.type),e.jsx("h3",{className:"ml-3 text-lg font-medium text-gray-900",children:r.title})]}),e.jsx("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-gray-500",children:e.jsx(xt,{className:"w-6 h-6"})})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r.description})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"AI Recommendation"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:r.recommendation})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Impact Level"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1 ${C(r.impact)}`,children:r.impact})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Confidence"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[r.confidence,"%"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Type"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 capitalize",children:r.type})]})]}),r.estimatedImprovement&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Estimated Improvement"}),e.jsx("p",{className:"text-sm text-green-600 mt-1 font-medium",children:r.estimatedImprovement})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Related Campaigns"}),e.jsx("div",{className:"mt-1 space-y-1",children:r.relatedCampaigns.map(F=>{const Q=o.find(q=>q.id===F);return Q?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:Q.name},F):null})})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t",children:[e.jsx("button",{onClick:()=>a(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),r.actionable&&e.jsx("button",{className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Take Action"})]})]})]})})]})},aO=()=>{const[s,t]=p.useState(!1),[r,a]=p.useState(""),{competitors:n,loading:i,addCompetitor:o,removeCompetitor:l,refreshCompetitorData:d}=BA(),u=async()=>{r.trim()&&(await o(r.trim()),a(""),t(!1))},m=async x=>{confirm("Are you sure you want to remove this competitor?")&&await l(x)},h=async x=>{await d(x)};return e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Competitor Analysis"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Monitor your competitors' advertising strategies and performance"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Add Competitor"]})]})}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Mo,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No competitors added"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Add competitors to analyze their advertising strategies"}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Add Your First Competitor"]})]}):e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:n.map(x=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:x.name}),e.jsxs("a",{href:`https://${x.domain}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-700 flex items-center",children:[x.domain,e.jsx(oy,{className:"w-3 h-3 ml-1"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>h(x.id),disabled:i,className:"p-2 text-gray-400 hover:text-gray-600",title:"Refresh data",children:e.jsx(An,{className:`w-4 h-4 ${i?"animate-spin":""}`})}),e.jsx("button",{onClick:()=>m(x.id),className:"p-2 text-gray-400 hover:text-red-600",title:"Remove competitor",children:e.jsx(nr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(io,{className:"w-5 h-5 text-green-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Estimated Monthly Spend"})]}),e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["$",x.estimatedSpend.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Top Keywords"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:x.topKeywords.map((f,b)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:f},b))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Recent Ad Copy"}),e.jsx("div",{className:"space-y-2",children:x.adCopy.map((f,b)=>e.jsxs("div",{className:"p-2 bg-gray-50 rounded text-sm text-gray-700",children:['"',f,'"']},b))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Landing Pages"}),e.jsx("div",{className:"space-y-1",children:x.landingPages.map((f,b)=>e.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"block text-sm text-blue-600 hover:text-blue-700 truncate",children:f},b))})]}),e.jsxs("div",{className:"text-xs text-gray-500 pt-2 border-t",children:["Last updated: ",new Date(x.lastUpdated).toLocaleDateString()]})]})]},x.id))})}),s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>t(!1)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Add Competitor"}),e.jsxs("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"domain",className:"block text-sm font-medium text-gray-700",children:"Competitor Domain"}),e.jsx("input",{type:"text",id:"domain",value:r,onChange:x=>a(x.target.value),placeholder:"example.com",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Enter the domain name of your competitor (without http:// or www.)"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx(ao,{className:"w-5 h-5 text-blue-400"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-800",children:"What we'll analyze"}),e.jsxs("ul",{className:"mt-2 text-sm text-blue-700 list-disc list-inside",children:[e.jsx("li",{children:"Estimated ad spend"}),e.jsx("li",{children:"Top performing keywords"}),e.jsx("li",{children:"Ad copy and messaging"}),e.jsx("li",{children:"Landing page strategies"})]})]})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:!r.trim()||i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Adding...":"Add Competitor"})]})]})]})})]})},nO=()=>{const[s,t]=p.useState(!1),[r,a]=p.useState({name:"",campaignId:"",status:"running",startDate:new Date().toISOString().split("T")[0],metric:"conversions",variants:[]}),{abTests:n,campaigns:i,loading:o,createABTest:l,updateABTest:d}=BA(),u=async()=>{!r.name||!r.campaignId||!r.variants||r.variants.length<2||(await l(r),t(!1),a({name:"",campaignId:"",status:"running",startDate:new Date().toISOString().split("T")[0],metric:"conversions",variants:[]}))},m=async(v,j)=>{await d(v,{status:j==="running"?"paused":"running"})},h=()=>{const v={id:`variant-${Date.now()}`,name:`Variant ${(r.variants?.length||0)+1}`,creative:{headline:"",description:"",callToAction:"Learn More"},metrics:{campaignId:r.campaignId||"",date:new Date().toISOString().split("T")[0],impressions:0,clicks:0,spend:0,conversions:0,ctr:0,cpm:0,cpc:0,cpa:0,roas:0},trafficSplit:50};a(j=>({...j,variants:[...j.variants||[],v]}))},x=(v,j,S)=>{a(C=>({...C,variants:C.variants?.map((B,F)=>F===v?{...B,creative:j.startsWith("creative.")?{...B.creative,[j.split(".")[1]]:S}:{...B,[j]:S}}:B)}))},f=v=>{switch(v){case"running":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"paused":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},b=v=>{switch(v){case"running":return e.jsx(Uw,{className:"w-4 h-4 text-green-600"});case"completed":return e.jsx(Tw,{className:"w-4 h-4 text-blue-600"});case"paused":return e.jsx(Iw,{className:"w-4 h-4 text-yellow-600"});default:return e.jsx(no,{className:"w-4 h-4 text-gray-600"})}};return e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"A/B Testing"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Test different ad variations to optimize performance"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Create Test"]})]})}),e.jsx("div",{className:"p-6",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(xc,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No A/B tests running"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first A/B test to optimize ad performance"}),e.jsxs("button",{onClick:()=>t(!0),className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Create Your First Test"]})]}):e.jsx("div",{className:"space-y-6",children:n.map(v=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:v.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Campaign: ",i.find(j=>j.id===v.campaignId)?.name]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${f(v.status)}`,children:[b(v.status),e.jsx("span",{className:"ml-1",children:v.status})]}),e.jsx("button",{onClick:()=>m(v.id,v.status),className:"inline-flex items-center px-3 py-1 text-xs font-medium text-gray-700 bg-gray-100 rounded hover:bg-gray-200",children:v.status==="running"?e.jsxs(e.Fragment,{children:[e.jsx(Iw,{className:"w-3 h-3 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(Uw,{className:"w-3 h-3 mr-1"}),"Resume"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-6 sm:grid-cols-3",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Duration"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[Math.ceil((new Date().getTime()-new Date(v.startDate).getTime())/(1e3*60*60*24))," days"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Confidence"}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[v.confidence,"%"]})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Winner"}),e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:v.winner?v.variants.find(j=>j.id===v.winner)?.name:"TBD"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:v.variants.map(j=>e.jsxs("div",{className:`border rounded-lg p-4 ${v.winner===j.id?"border-green-500 bg-green-50":"border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:j.name}),v.winner===j.id&&e.jsx(Tw,{className:"w-5 h-5 text-green-500"})]}),e.jsx("div",{className:"space-y-2 mb-4",children:e.jsxs("div",{className:"p-3 bg-white border rounded",children:[e.jsx("div",{className:"font-medium text-sm",children:j.creative.headline}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:j.creative.description}),e.jsx("div",{className:"text-xs text-blue-600 mt-2",children:j.creative.callToAction})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Impressions"}),e.jsx("div",{className:"font-medium",children:j.metrics.impressions.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Clicks"}),e.jsx("div",{className:"font-medium",children:j.metrics.clicks.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"CTR"}),e.jsxs("div",{className:"font-medium",children:[j.metrics.ctr.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Conversions"}),e.jsx("div",{className:"font-medium",children:j.metrics.conversions})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Traffic Split"}),e.jsxs("span",{className:"font-medium",children:[j.trafficSplit,"%"]})]})})]},j.id))})]},v.id))})}),s&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>t(!1)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-screen overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Create A/B Test"}),e.jsxs("button",{onClick:()=>t(!1),className:"text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]}),e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Test Name"}),e.jsx("input",{type:"text",value:r.name,onChange:v=>a(j=>({...j,name:v.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., Headline Test #1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Campaign"}),e.jsxs("select",{value:r.campaignId,onChange:v=>a(j=>({...j,campaignId:v.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"Select Campaign"}),i.map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Date"}),e.jsx("input",{type:"date",value:r.startDate,onChange:v=>a(j=>({...j,startDate:v.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Primary Metric"}),e.jsxs("select",{value:r.metric,onChange:v=>a(j=>({...j,metric:v.target.value})),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"conversions",children:"Conversions"}),e.jsx("option",{value:"clicks",children:"Clicks"}),e.jsx("option",{value:"ctr",children:"Click-through Rate"}),e.jsx("option",{value:"cpc",children:"Cost per Click"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900",children:"Test Variants"}),e.jsxs("button",{onClick:h,className:"inline-flex items-center px-3 py-1 text-sm font-medium text-blue-600 bg-blue-50 rounded hover:bg-blue-100",children:[e.jsx(Gt,{className:"w-4 h-4 mr-1"}),"Add Variant"]})]}),e.jsx("div",{className:"space-y-4",children:r.variants?.map((v,j)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Variant Name"}),e.jsx("input",{type:"text",value:v.name,onChange:S=>x(j,"name",S.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Traffic Split (%)"}),e.jsx("input",{type:"number",value:v.trafficSplit,onChange:S=>x(j,"trafficSplit",parseInt(S.target.value)),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",min:"1",max:"100"})]})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Headline"}),e.jsx("input",{type:"text",value:v.creative.headline,onChange:S=>x(j,"creative.headline",S.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter ad headline"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx("textarea",{value:v.creative.description,onChange:S=>x(j,"creative.description",S.target.value),rows:2,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter ad description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Call to Action"}),e.jsx("input",{type:"text",value:v.creative.callToAction,onChange:S=>x(j,"creative.callToAction",S.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"e.g., Learn More, Get Quote"})]})]})]},v.id))}),(!r.variants||r.variants.length===0)&&e.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[e.jsx(Sa,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Add at least 2 variants to create an A/B test"})]})]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t",children:[e.jsx("button",{onClick:()=>t(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:!r.name||!r.campaignId||!r.variants||r.variants.length<2||o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Creating...":"Create Test"})]})]})]})})]})},iO=()=>{const s=Zt(),[t,r]=p.useState("overview"),[a,n]=p.useState(!1),{accounts:i,campaigns:o,metrics:l,selectedAccount:d,dateRange:u,fetchCampaigns:m,fetchMetrics:h,setSelectedAccount:x}=BA();p.useEffect(()=>{d&&m(d.id)},[d,m]),p.useEffect(()=>{if(o.length>0){const C=o.map(B=>B.id);h(C,u)}},[o,u,h]);const f=[{id:"overview",name:"Overview",icon:xc},{id:"insights",name:"AI Insights",icon:Mm},{id:"competitors",name:"Competitors",icon:Sa},{id:"testing",name:"A/B Testing",icon:mA},{id:"accounts",name:"Accounts",icon:Bc}],b=i.filter(C=>C.status==="connected"),v=l.reduce((C,B)=>C+B.spend,0),j=l.reduce((C,B)=>C+B.conversions,0),S=l.length>0?l.reduce((C,B)=>C+B.roas,0)/l.length:0;return e.jsxs("div",{className:"relative space-y-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-900/50 backdrop-blur-sm z-10 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"text-center px-6 py-12 bg-white rounded-lg shadow-2xl max-w-md mx-4",children:[e.jsx("div",{className:"w-20 h-20 mx-auto mb-6 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(xc,{className:"w-10 h-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:"Coming Soon"}),e.jsx("p",{className:"text-gray-600 text-lg mb-6",children:"AI-powered ad analytics and optimization features are currently in development."}),e.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm text-gray-500",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("span",{children:"We're working on something amazing"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ad Analyzer"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"AI-powered advertising performance analysis and optimization"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[d&&e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm font-medium text-blue-900 truncate",children:d.name})]}),e.jsxs("button",{className:"inline-flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Rn,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Export Report"}),e.jsx("span",{className:"sm:hidden",children:"Export"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Bc,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Connected Accounts"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:b.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(io,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Spend"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["$",v.toLocaleString()]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(mA,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversions"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:j})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(xc,{className:"w-6 h-6 text-orange-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg ROAS"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:[S.toFixed(2),"x"]})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"border-b border-gray-200",children:[e.jsx("nav",{className:"hidden md:flex space-x-8 px-6",children:f.map(C=>e.jsxs("button",{onClick:()=>C.id==="accounts"?s("/ad-accounts"):r(C.id),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center ${t===C.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(C.icon,{className:"w-4 h-4 mr-2"}),C.name]},C.id))}),e.jsxs("div",{className:"md:hidden px-4 py-3",children:[e.jsxs("button",{onClick:()=>n(!a),className:"w-full flex items-center justify-between px-4 py-2 text-sm font-medium text-gray-700 bg-gray-50 rounded-md hover:bg-gray-100",children:[e.jsxs("span",{className:"flex items-center",children:[f.find(C=>C.id===t)?.icon&&e.jsx("span",{className:"mr-2",children:(()=>{const C=f.find(B=>B.id===t).icon;return e.jsx(C,{className:"w-4 h-4"})})()}),f.find(C=>C.id===t)?.name]}),e.jsx(Td,{className:`w-4 h-4 transition-transform ${a?"rotate-180":""}`})]}),a&&e.jsx("div",{className:"mt-2 bg-white rounded-md shadow-lg border border-gray-200",children:f.map(C=>e.jsxs("button",{onClick:()=>{C.id==="accounts"?s("/ad-accounts"):r(C.id),n(!1)},className:`w-full flex items-center px-4 py-3 text-sm font-medium ${t===C.id?"bg-blue-50 text-blue-600":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(C.icon,{className:"w-4 h-4 mr-3"}),C.name]},C.id))})]})]}),e.jsxs("div",{className:"p-6",children:[t==="overview"&&e.jsx(rO,{}),t==="insights"&&e.jsx(sO,{}),t==="competitors"&&e.jsx(aO,{}),t==="testing"&&e.jsx(nO,{}),t==="accounts"&&e.jsx(tO,{})]})]}),b.length===0&&t==="overview"&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(xc,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Connect Your Ad Accounts"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"Connect your Google Ads, Facebook Ads, or other advertising accounts to start analyzing performance with AI-powered insights."}),e.jsxs("button",{onClick:()=>s("/ad-accounts"),className:"inline-flex items-center px-6 py-3 text-base font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[e.jsx(Bc,{className:"w-5 h-5 mr-2"}),"Connect Accounts"]})]})]})},oO="244912967505-80c3fhnvgiedfti5mutmlisqk17nugl4.apps.googleusercontent.com",lO="http://localhost:5173/gmail-oauth-callback",cO=()=>{const{session:s}=ka(),[t,r]=p.useState(!1),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(!1),[u,m]=p.useState(null);p.useEffect(()=>{h()},[]);const h=async()=>{try{o(!0);const{data:b,error:v}=await _e.from("profiles").select("gmail_email, gmail_access_token").eq("id",s?.user.id).single();if(v)throw v;b?.gmail_access_token&&(r(!0),n(b.gmail_email))}catch(b){console.error("Error checking Gmail connection:",b)}finally{o(!1)}},x=()=>{d(!0),m(null);const b="https://www.googleapis.com/auth/gmail.send https://www.googleapis.com/auth/userinfo.email",v=`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:oO,redirect_uri:lO,response_type:"code",scope:b,access_type:"offline",prompt:"consent"})}`,j=600,S=700,C=window.screenX+(window.outerWidth-j)/2,B=window.screenY+(window.outerHeight-S)/2,F=window.open(v,"Google OAuth",`width=${j},height=${S},left=${C},top=${B}`),Q=async P=>{P.origin===window.location.origin&&(P.data.type==="GMAIL_OAUTH_SUCCESS"?(r(!0),n(P.data.email),d(!1),F?.close(),window.removeEventListener("message",Q)):P.data.type==="GMAIL_OAUTH_ERROR"&&(m(P.data.error||"Failed to connect Gmail"),d(!1),F?.close(),window.removeEventListener("message",Q)))};window.addEventListener("message",Q);const q=setInterval(()=>{F?.closed&&(clearInterval(q),d(!1),window.removeEventListener("message",Q))},500)},f=async()=>{try{const{error:b}=await _e.from("profiles").update({gmail_access_token:null,gmail_refresh_token:null,gmail_token_expiry:null,gmail_email:null}).eq("id",s?.user.id);if(b)throw b;r(!1),n(null)}catch(b){console.error("Error disconnecting Gmail:",b),m("Failed to disconnect Gmail")}};return i?e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})}):e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(Ba,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Gmail Integration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Send emails from Cindy using your Gmail account"})]})]})}),u&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[e.jsx(Qa,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-700",children:u})]}),t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(un,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"font-medium text-green-900",children:"Connected"})]}),e.jsxs("p",{className:"text-sm text-green-700",children:["Emails will be sent from: ",e.jsx("span",{className:"font-medium",children:a})]})]}),e.jsx("button",{onClick:f,className:"px-4 py-2 text-red-600 border border-red-300 rounded-lg hover:bg-red-50 transition-colors",children:"Disconnect Gmail"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Od,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Not Connected"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Connect your Gmail account to send emails directly from Cindy"})]}),e.jsx("button",{onClick:x,disabled:l,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Connecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ba,{className:"w-5 h-5"}),"Connect Gmail Account"]})}),e.jsx("div",{className:"text-xs text-gray-500",children:"By connecting, you allow ContractorAI to send emails on your behalf using Gmail API. You can disconnect at any time."})]})]})},dO=()=>{const{t:s,i18n:t}=fr(),{user:r}=ka(),{profile:a,loading:n,refreshProfile:i}=Qc(),[o,l]=p.useState(!1),[d,u]=p.useState(!1),[m,h]=p.useState(null),[x,f]=p.useState(!1),[b,v]=p.useState(!1),[j,S]=p.useState(""),[C,B]=p.useState({calendarReminders:!0,securityAlerts:!0}),[F,Q]=p.useState({name:"",phone:"",company:"",address:"",defaultTerms:"",contractorNotificationEmail:""});p.useEffect(()=>{a&&(Q({name:a.full_name||"",phone:a.phone||"",company:a.company||"",address:a.address||"",defaultTerms:a.default_terms||"",contractorNotificationEmail:a.contractor_notification_email||""}),h(a.logo_url||null),B({calendarReminders:a.calendar_reminders??!0,securityAlerts:a.security_alerts??!0}))},[a]);const q=async E=>{if(E==="calendarReminders"&&!C.calendarReminders)if(await Py())await hB(),alert("Calendar notifications enabled! You will receive reminders 15 minutes and 1 hour before events.");else{alert("Please enable notifications in your browser settings to receive calendar reminders.");return}B(O=>({...O,[E]:!O[E]}))},P=(E,O)=>{Q(le=>({...le,[E]:O}))},D=async E=>{const O=E.target.files?.[0];if(O){if(!O.type.startsWith("image/")){alert("Please upload an image file");return}if(O.size>2*1024*1024){alert("Image must be less than 2MB");return}try{u(!0);const{data:{user:le}}=await _e.auth.getUser();if(!le){alert("Please log in to upload logo");return}const te=O.name.split(".").pop(),V=`${le.id}/logo.${te}`,{data:M,error:ie}=await _e.storage.from("company-logos").upload(V,O,{upsert:!0});if(ie)throw ie;const{data:{publicUrl:K}}=_e.storage.from("company-logos").getPublicUrl(V);h(K);const{error:H}=await _e.from("profiles").upsert({id:le.id,email:le.email,logo_url:K,updated_at:new Date().toISOString()});if(H)throw H;await i(),alert("Logo uploaded successfully!")}catch(le){console.error("Error uploading logo:",le),alert(le?.message||"Failed to upload logo")}finally{u(!1)}}},_=async()=>{try{const{data:{user:E}}=await _e.auth.getUser();if(!E)return;h(null);const{error:O}=await _e.from("profiles").upsert({id:E.id,email:E.email,logo_url:null,updated_at:new Date().toISOString()});if(O)throw O;await i(),alert("Logo removed successfully!")}catch(E){console.error("Error removing logo:",E),alert(E?.message||"Failed to remove logo")}},$=async()=>{try{l(!0);const{data:{user:E}}=await _e.auth.getUser();if(!E){alert("Please log in to save settings"),l(!1);return}const{error:O}=await _e.from("profiles").upsert({id:E.id,email:E.email,full_name:F.name,phone:F.phone,company:F.company,address:F.address,default_terms:F.defaultTerms,contractor_notification_email:F.contractorNotificationEmail,calendar_reminders:C.calendarReminders,security_alerts:C.securityAlerts,updated_at:new Date().toISOString()});if(O)throw O;await i(),alert("Settings saved successfully!"),l(!1)}catch(E){console.error("Error saving settings:",E),alert(E?.message||"Failed to save settings"),l(!1)}},k=async()=>{try{const{data:{user:E}}=await _e.auth.getUser();if(!E?.email){alert("Unable to get user email");return}const{error:O}=await _e.auth.resetPasswordForEmail(E.email,{redirectTo:`${window.location.origin}/reset-password`});if(O)throw O;alert("Password reset email sent! Check your inbox.")}catch(E){console.error("Error sending password reset:",E),alert(E?.message||"Failed to send password reset email")}},L=async()=>{if(j!=="DELETE"){alert("Please type DELETE to confirm account deletion");return}try{f(!0);const{data:{user:E}}=await _e.auth.getUser();if(!E){alert("Please log in to delete your account"),f(!1);return}const{error:O}=await _e.functions.invoke("delete-account",{body:{userId:E.id}});if(O)throw O;await _e.auth.signOut(),window.location.href="/"}catch(E){console.error("Error deleting account:",E),alert(E?.message||"Failed to delete account. Please contact support at admin@elevatedsystems.info"),f(!1)}};return n?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(hr,{className:"w-8 h-8 text-orange-600 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("button",{onClick:$,disabled:o,className:"inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-orange-600 rounded-md hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"flex items-center text-lg font-medium text-gray-900 mb-4",children:[e.jsx(ns,{className:"w-5 h-5 mr-2 text-gray-500"}),"Profile Information"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsx("input",{type:"text",value:F.name,onChange:E=>P("name",E.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone"}),e.jsx("input",{type:"tel",value:F.phone,onChange:E=>P("phone",E.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),e.jsx("input",{type:"text",value:F.company,onChange:E=>P("company",E.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Address"}),e.jsx("textarea",{value:F.address,onChange:E=>P("address",E.target.value),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm px-3 py-2 border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Contractor Notification Email"}),e.jsx("input",{type:"email",value:F.contractorNotificationEmail,onChange:E=>P("contractorNotificationEmail",E.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm px-3 py-2 border",placeholder:"notifications@yourcompany.com"}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Email address to receive notifications when customers respond to estimates. This will be pre-filled when sending estimates."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Default Terms & Conditions"}),e.jsx("textarea",{value:F.defaultTerms,onChange:E=>P("defaultTerms",E.target.value),rows:6,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm px-3 py-2 border",placeholder:"Enter your standard terms and conditions that will be pre-filled on all new estimates..."}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"These terms will automatically populate on new estimates. You can always edit them on individual estimates."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Logo"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[m?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:m,alt:"Company Logo",className:"w-24 h-24 object-contain border-2 border-gray-300 rounded-lg p-2"}),e.jsx("button",{onClick:_,className:"absolute -top-2 -right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",title:"Remove logo",children:e.jsx(xt,{className:"w-4 h-4"})})]}):e.jsx("div",{className:"w-24 h-24 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center",children:e.jsx(vh,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500",children:[e.jsx(vh,{className:"w-4 h-4 mr-2"}),d?"Uploading...":m?"Update Logo":"Upload Logo",e.jsx("input",{type:"file",accept:"image/*",onChange:D,disabled:d,className:"hidden"})]}),e.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"PNG, JPG up to 2MB. Logo will appear on estimates and in header."})]})]})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"flex items-center text-lg font-medium text-gray-900 mb-4",children:[e.jsx(dA,{className:"w-5 h-5 mr-2 text-gray-500"}),"Notification Preferences"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-900 flex items-center",children:[e.jsx(Fr,{className:"w-4 h-4 mr-2 text-gray-500"}),"Calendar Reminders"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Get notified about calendar events and deadlines"})]}),e.jsx("button",{onClick:()=>q("calendarReminders"),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${C.calendarReminders?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${C.calendarReminders?"translate-x-5":"translate-x-0"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Security Alerts"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Important security notifications"})]}),e.jsx("button",{onClick:()=>q("securityAlerts"),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 ${C.securityAlerts?"bg-orange-600":"bg-gray-200"}`,children:e.jsx("span",{className:`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${C.securityAlerts?"translate-x-5":"translate-x-0"}`})})]})]})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"flex items-center text-lg font-medium text-gray-900 mb-4",children:[e.jsx(uA,{className:"w-5 h-5 mr-2 text-gray-500"}),s("settings.security")]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("button",{onClick:k,className:"w-full flex items-center justify-between px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(uA,{className:"w-5 h-5 text-gray-500 mr-3"}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s("settings.changePassword")}),e.jsx("p",{className:"text-sm text-gray-500",children:s("settings.changePasswordDesc")})]})]}),e.jsx("span",{className:"text-gray-400",children:""})]})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"flex items-center text-lg font-medium text-gray-900 mb-4",children:[e.jsx(HE,{className:"w-5 h-5 mr-2 text-gray-500"}),s("settings.language")]}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("settings.selectLanguage")}),e.jsxs("select",{value:t.language,onChange:async E=>{const O=E.target.value;if(t.changeLanguage(O),r){const{error:le}=await _e.from("profiles").update({language:O}).eq("id",r.id);le?console.error("Error saving language preference:",le):await i()}},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm px-3 py-2 border",children:[e.jsx("option",{value:"en",children:s("settings.english")}),e.jsx("option",{value:"es",children:s("settings.spanish")})]})]})})]})}),e.jsx("div",{className:"bg-white shadow rounded-lg border-2 border-red-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"flex items-center text-lg font-medium text-red-600 mb-4",children:[e.jsx(nr,{className:"w-5 h-5 mr-2"}),"Delete Account"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Permanently delete your account and all associated data. This action cannot be undone."}),b?e.jsxs("div",{className:"space-y-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx(ay,{className:"w-5 h-5 text-red-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-red-800",children:"Warning: This action is permanent"}),e.jsx("p",{className:"text-sm text-red-600 mt-1",children:"All your data including projects, estimates, clients, and settings will be permanently deleted."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type DELETE to confirm"}),e.jsx("input",{type:"text",value:j,onChange:E=>S(E.target.value),placeholder:"DELETE",className:"block w-full rounded-md border-red-300 shadow-sm focus:border-red-500 focus:ring-red-500 sm:text-sm px-3 py-2 border"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{v(!1),S("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:L,disabled:x||j!=="DELETE",className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center",children:x?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 mr-2 animate-spin"}),"Deleting..."]}):"Delete Account"})]})]}):e.jsxs("button",{onClick:()=>v(!0),className:"w-full flex items-center justify-center px-4 py-2 border border-red-300 rounded-md text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(nr,{className:"w-5 h-5 mr-2"}),"Delete My Account"]})]})]})})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Email Integration"}),e.jsx(cO,{})]}),e.jsx("div",{className:"mt-6",children:e.jsx("div",{className:"bg-gray-100 shadow rounded-lg opacity-60",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("h2",{className:"flex items-center text-xl font-bold text-gray-500 mb-4",children:[e.jsx(zx,{className:"w-6 h-6 mr-2 text-gray-400"}),"Calculator Widgets ",e.jsx("span",{className:"ml-2 text-sm font-normal text-gray-400",children:"(Under Construction)"})]}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Embed our pricing calculators on your website. Choose from various calculator types to help your customers get instant pricing estimates."}),e.jsxs("button",{disabled:!0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-gray-400 bg-gray-300 cursor-not-allowed",children:[e.jsx(zx,{className:"w-4 h-4 mr-2"}),"Manage Calculator Widgets"]})]})})})]})},uO=({clients:s,onEdit:t,onDelete:r,isLoading:a})=>{const{t:n}=fr(),i=o=>{switch(o){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-gray-100 text-gray-800";case"prospect":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return a&&s.length===0?e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Loading clients..."})]}):s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Sa,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No clients found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first client."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("clients.client")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("clients.contact")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("common.company")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("clients.location")}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n("common.status")}),e.jsx("th",{scope:"col",className:"relative px-6 py-3",children:e.jsx("span",{className:"sr-only",children:n("estimates.actions")})})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.map(o=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:o.name}),o.notes&&e.jsx("div",{className:"text-xs text-gray-500 truncate max-w-xs",children:o.notes})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ba,{className:"h-3 w-3 mr-1 text-gray-400"}),e.jsx("a",{href:`mailto:${o.email}`,className:"hover:text-blue-600",children:o.email})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Md,{className:"h-3 w-3 mr-1 text-gray-400"}),e.jsx("a",{href:`tel:${o.phone}`,className:"hover:text-blue-600",children:o.phone})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:o.company?e.jsxs("div",{className:"flex items-center text-sm text-gray-900",children:[e.jsx(ip,{className:"h-3 w-3 mr-1 text-gray-400"}),o.company]}):e.jsx("span",{className:"text-sm text-gray-400",children:""})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(()=>{const l=[o.address,o.city,o.state,o.zip].filter(Boolean).join(", ");return l?e.jsx(mB,{address:l,className:"text-sm"}):e.jsx("span",{className:"text-sm text-gray-400",children:""})})()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i(o.status)}`,children:o.status.charAt(0).toUpperCase()+o.status.slice(1)})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>t(o),className:"text-blue-600 hover:text-blue-900 mr-4",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>r(o.id),className:"text-red-600 hover:text-red-900",children:e.jsx(To,{className:"h-4 w-4"})})]})]},o.id))})]})})},AO=({isOpen:s,client:t,onClose:r,onUpdate:a})=>{const[n,i]=p.useState({name:"",email:"",phone:"",company:"",address:"",city:"",state:"",zip:"",notes:"",status:"active"}),[o,l]=p.useState({});p.useEffect(()=>{t&&i({name:t.name,email:t.email,phone:t.phone,company:t.company||"",address:t.address||"",city:t.city||"",state:t.state||"",zip:t.zip||"",notes:t.notes||"",status:t.status})},[t]);const d=()=>{const h={};return n.name.trim()||(h.name="Name is required"),n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(h.email="Invalid email address"):h.email="Email is required",n.phone.trim()||(h.phone="Phone is required"),l(h),Object.keys(h).length===0},u=h=>{h.preventDefault(),d()&&(a(t.id,n),m())},m=()=>{l({}),r()};return s?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-full max-w-2xl shadow-lg rounded-lg bg-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Edit Client"}),e.jsx("button",{onClick:m,className:"text-gray-400 hover:text-gray-500",children:e.jsx(xt,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(ns,{className:"inline h-4 w-4 mr-1"}),"Full Name *"]}),e.jsx("input",{type:"text",value:n.name,onChange:h=>i({...n,name:h.target.value}),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${o.name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),o.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:o.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(ip,{className:"inline h-4 w-4 mr-1"}),"Company"]}),e.jsx("input",{type:"text",value:n.company,onChange:h=>i({...n,company:h.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(Ba,{className:"inline h-4 w-4 mr-1"}),"Email *"]}),e.jsx("input",{type:"email",value:n.email,onChange:h=>i({...n,email:h.target.value}),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${o.email?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),o.email&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:o.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(Md,{className:"inline h-4 w-4 mr-1"}),"Phone *"]}),e.jsx("input",{type:"tel",value:n.phone,onChange:h=>i({...n,phone:h.target.value}),className:`mt-1 block w-full rounded-md shadow-sm sm:text-sm ${o.phone?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-blue-500 focus:border-blue-500"}`}),o.phone&&e.jsx("p",{className:"mt-1 text-xs text-red-600",children:o.phone})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[e.jsx(lp,{className:"inline h-4 w-4 mr-1"}),"Street Address"]}),e.jsx("input",{type:"text",value:n.address,onChange:h=>i({...n,address:h.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),e.jsx("input",{type:"text",value:n.city,onChange:h=>i({...n,city:h.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"State"}),e.jsx("input",{type:"text",value:n.state,onChange:h=>i({...n,state:h.target.value}),maxLength:2,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"ZIP Code"}),e.jsx("input",{type:"text",value:n.zip,onChange:h=>i({...n,zip:h.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:n.status,onChange:h=>i({...n,status:h.target.value}),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"inactive",children:"Inactive"}),e.jsx("option",{value:"prospect",children:"Prospect"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Notes"}),e.jsx("textarea",{value:n.notes,onChange:h=>i({...n,notes:h.target.value}),rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Additional notes about the client..."})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx("button",{type:"button",onClick:m,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Update Client"})]})]})]})}):null},mO=()=>{const{t:s}=fr(),[t,r]=p.useState(!1),[a,n]=p.useState(null),[i,o]=p.useState(""),{clients:l,isLoading:d,error:u,searchTerm:m,statusFilter:h,fetchClients:x,addClient:f,updateClient:b,deleteClient:v,setSearchTerm:j,setStatusFilter:S}=jl();p.useEffect(()=>{x()},[]),p.useEffect(()=>{const _=setTimeout(()=>{j(i)},300);return()=>clearTimeout(_)},[i,j]);const C=async _=>{await f(_),r(!1)},B=_=>{n(_)},F=async(_,$)=>{await b(_,$),n(null)},Q=async _=>{window.confirm(s("clients.deleteConfirm"))&&await v(_)},q=()=>{const _=[["Name","Email","Phone","Company","Status","City","State"],...P.map(E=>[E.name,E.email,E.phone,E.company||"",E.status,E.city||"",E.state||""])].map(E=>E.join(",")).join(`
`),$=new Blob([_],{type:"text/csv"}),k=window.URL.createObjectURL($),L=document.createElement("a");L.href=k,L.download=`clients-${new Date().toISOString().split("T")[0]}.csv`,L.click()},P=l.filter(_=>{const $=!m||_.name.toLowerCase().includes(m.toLowerCase())||_.email.toLowerCase().includes(m.toLowerCase())||_.company?.toLowerCase().includes(m.toLowerCase())||_.phone.includes(m),k=h==="all"||_.status===h;return $&&k}),D={total:l.length,active:l.filter(_=>_.status==="active").length,inactive:l.filter(_=>_.status==="inactive").length,prospects:l.filter(_=>_.status==="prospect").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s("clients.title")}),e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-gray-600",children:s("clients.subtitle")})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:q,className:"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Rn,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s("common.export")})]}),e.jsxs("button",{onClick:x,disabled:d,className:"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(An,{className:`h-3 w-3 ${d?"animate-spin":""} ${d?"":"mr-1"}`}),e.jsx("span",{className:d?"hidden":"hidden sm:inline",children:s("common.refresh")})]}),e.jsxs("button",{onClick:()=>r(!0),className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(hA,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s("clients.addClient")}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),u&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsxs("strong",{className:"font-bold",children:[s("common.error"),": "]}),e.jsx("span",{className:"block sm:inline",children:u})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Sa,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("clients.totalClients")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.total})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("clients.active")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.active})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-400"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("clients.inactive")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.inactive})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-yellow-500"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("clients.prospects")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:D.prospects})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Mo,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:i,onChange:_=>o(_.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:s("clients.searchPlaceholder")})]})}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("select",{value:h,onChange:_=>S(_.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"all",children:s("clients.allStatus")}),e.jsx("option",{value:"active",children:s("clients.active")}),e.jsx("option",{value:"inactive",children:s("clients.inactive")}),e.jsx("option",{value:"prospect",children:s("clients.prospects")})]})})]})}),e.jsx(uO,{clients:P,onEdit:B,onDelete:Q,isLoading:d})]}),t&&e.jsx(AB,{isOpen:t,onClose:()=>r(!1),onAdd:C}),a&&e.jsx(AO,{isOpen:!!a,client:a,onClose:()=>n(null),onUpdate:F})]})},hO=()=>{const{t:s}=fr(),[t,r]=p.useState(!1),[a,n]=p.useState(null),[i,o]=p.useState(""),[l,d]=p.useState({name:"",email:"",phone:"",jobTitle:"",hourlyRate:0,notes:"",status:"active"}),{employees:u,isLoading:m,error:h,searchTerm:x,statusFilter:f,fetchEmployees:b,addEmployee:v,updateEmployee:j,deleteEmployee:S,setSearchTerm:C,setStatusFilter:B}=uB();p.useEffect(()=>{b()},[]),p.useEffect(()=>{const k=setTimeout(()=>{C(i)},300);return()=>clearTimeout(k)},[i,C]);const F=async()=>{if(!l.name||!l.email||!l.phone||!l.jobTitle){alert("Please fill in all required fields");return}await v(l),r(!1),d({name:"",email:"",phone:"",jobTitle:"",hourlyRate:0,notes:"",status:"active"})},Q=async()=>{if(!a||!l.name||!l.email||!l.phone||!l.jobTitle){alert("Please fill in all required fields");return}await j(a.id,l),n(null),d({name:"",email:"",phone:"",jobTitle:"",hourlyRate:0,notes:"",status:"active"})},q=k=>{n(k),d(k)},P=async(k,L)=>{window.confirm(`Are you sure you want to delete ${L}?`)&&await S(k)},D=()=>{const k=[["Name","Email","Phone","Job Title","Hourly Rate","Status"],..._.map(le=>[le.name,le.email,le.phone,le.jobTitle,le.hourlyRate.toString(),le.status])].map(le=>le.join(",")).join(`
`),L=new Blob([k],{type:"text/csv"}),E=window.URL.createObjectURL(L),O=document.createElement("a");O.href=E,O.download=`employees-${new Date().toISOString().split("T")[0]}.csv`,O.click()},_=u.filter(k=>{const L=!x||k.name.toLowerCase().includes(x.toLowerCase())||k.email.toLowerCase().includes(x.toLowerCase())||k.jobTitle.toLowerCase().includes(x.toLowerCase())||k.phone.includes(x),E=f==="all"||k.status===f;return L&&E}),$={total:u.length,active:u.filter(k=>k.status==="active").length,inactive:u.filter(k=>k.status==="inactive").length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:s("employees.title")}),e.jsx("p",{className:"mt-1 text-xs sm:text-sm text-gray-600",children:s("employees.subtitle")})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:D,className:"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Rn,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s("common.export")})]}),e.jsxs("button",{onClick:b,disabled:m,className:"inline-flex items-center px-2 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(An,{className:`h-3 w-3 ${m?"animate-spin":""} ${m?"":"mr-1"}`}),e.jsx("span",{className:m?"hidden":"hidden sm:inline",children:s("common.refresh")})]}),e.jsxs("button",{onClick:()=>{n(null),d({name:"",email:"",phone:"",jobTitle:"",hourlyRate:0,notes:"",status:"active"}),r(!0)},className:"inline-flex items-center px-2 py-1 border border-transparent text-xs font-medium rounded text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(hA,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:s("employees.addEmployee")}),e.jsx("span",{className:"sm:hidden",children:"Add"})]})]})]}),h&&e.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative",role:"alert",children:[e.jsxs("strong",{className:"font-bold",children:[s("common.error"),": "]}),e.jsx("span",{className:"block sm:inline",children:h})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-blue-100 rounded-md p-3",children:e.jsx(Sa,{className:"h-6 w-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("employees.totalEmployees")}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:$.total})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-green-100 rounded-md p-3",children:e.jsx(Sa,{className:"h-6 w-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("employees.active")}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:$.active})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-gray-100 rounded-md p-3",children:e.jsx(Sa,{className:"h-6 w-6 text-gray-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:s("employees.inactive")}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:$.inactive})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Mo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:s("employees.searchPlaceholder"),value:i,onChange:k=>o(k.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f,onChange:k=>B(k.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:s("employees.allStatus")}),e.jsx("option",{value:"active",children:s("employees.active")}),e.jsx("option",{value:"inactive",children:s("employees.inactive")})]})})]}),m?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(An,{className:"h-8 w-8 text-blue-600 animate-spin"})}):_.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Sa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:s("employees.noEmployeesFound")}),e.jsx("button",{onClick:()=>r(!0),className:"mt-4 inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:s("employees.addFirstEmployee")})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(k=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-5 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:k.name}),e.jsxs("p",{className:"text-sm text-gray-600 flex items-center mt-1",children:[e.jsx(ny,{className:"w-4 h-4 mr-1"}),k.jobTitle]}),e.jsx("span",{className:`inline-block mt-2 px-2 py-0.5 text-xs rounded-full ${k.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.status})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>q(k),className:"text-blue-600 hover:text-blue-800",children:e.jsx(Ca,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>P(k.id,k.name),className:"text-red-600 hover:text-red-800",children:e.jsx(nr,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Ba,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("a",{href:`mailto:${k.email}`,className:"text-blue-600 hover:underline truncate",children:k.email})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Md,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsx("a",{href:`tel:${k.phone}`,className:"text-blue-600 hover:underline",children:k.phone})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(Br,{className:"w-4 h-4 mr-2 flex-shrink-0"}),e.jsxs("span",{className:"font-medium",children:["$",k.hourlyRate,"/hr"]})]}),k.notes&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-start text-gray-600",children:[e.jsx(ZE,{className:"w-4 h-4 mr-2 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs line-clamp-2",children:k.notes})]})})]})]},k.id))}),(t||a)&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:s(a?"employees.editEmployee":"employees.addNewEmployee")}),e.jsx("button",{onClick:()=>{r(!1),n(null),d({name:"",email:"",phone:"",jobTitle:"",hourlyRate:0,notes:"",status:"active"})},className:"text-gray-400 hover:text-gray-500 p-1 rounded-full hover:bg-gray-100",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),e.jsx("input",{type:"text",value:l.name||"",onChange:k=>d({...l,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:s("employees.namePlaceholder")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),e.jsx("input",{type:"email",value:l.email||"",onChange:k=>d({...l,email:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:s("employees.emailPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),e.jsx("input",{type:"tel",value:l.phone||"",onChange:k=>d({...l,phone:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:s("employees.phonePlaceholder")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Title *"}),e.jsx("input",{type:"text",value:l.jobTitle||"",onChange:k=>d({...l,jobTitle:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:s("employees.rolePlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hourly Rate ($) *"}),e.jsx("input",{type:"number",value:l.hourlyRate||0,onChange:k=>d({...l,hourlyRate:parseFloat(k.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:s("employees.salaryPlaceholder"),min:"0",step:"0.01"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsxs("select",{value:l.status||"active",onChange:k=>d({...l,status:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"active",children:s("employees.active")}),e.jsx("option",{value:"inactive",children:s("employees.inactive")})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),e.jsx("textarea",{value:l.notes||"",onChange:k=>d({...l,notes:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3,placeholder:s("employees.notesPlaceholder")})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 p-6 border-t border-gray-200",children:[e.jsx("button",{onClick:()=>{r(!1),n(null),d({name:"",email:"",phone:"",jobTitle:"",hourlyRate:0,notes:"",status:"active"})},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:a?Q:F,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:a?"Update Employee":"Add Employee"})]})]})})]})};async function fO(){const{data:s,error:t}=await _e.from("ad_accounts").select("*").order("created_at",{ascending:!1});if(t)throw t;return s||[]}async function gO(s){const{data:t,error:r}=await _e.from("ad_accounts").select("*").eq("id",s).single();if(r)throw r;return t}async function pO(s,t){const{data:r,error:a}=await _e.from("ad_accounts").update({...t,updated_at:new Date().toISOString()}).eq("id",s).select().single();if(a)throw a;return r}async function xO(s){const{error:t}=await _e.from("ad_accounts").delete().eq("id",s);if(t)throw t}async function bO(s){const t=await gO(s);if(t.platform!=="google_ads")throw new Error("Account is not a Google Ads account");console.log(" Syncing Google Ads campaigns for account:",t.account_id),await pO(s,{last_synced_at:new Date().toISOString()})}function yO(s){const t="716912343285-0n9936g2gb6tko47no6p4qslu6n8e5vu.apps.googleusercontent.com",r="https://www.googleapis.com/auth/adwords";return`https://accounts.google.com/o/oauth2/v2/auth?${new URLSearchParams({client_id:t,redirect_uri:s,response_type:"code",scope:r,access_type:"offline",prompt:"consent"}).toString()}`}function vO(s){const t="779188654790108",r="ads_read,ads_management";return`https://www.facebook.com/v18.0/dialog/oauth?${new URLSearchParams({client_id:t,redirect_uri:s,scope:r,response_type:"code"}).toString()}`}const wO=()=>{const[s,t]=p.useState([]),[r,a]=p.useState(!0),[n,i]=p.useState(!1),[o,l]=p.useState(null);p.useEffect(()=>{d()},[]);const d=async()=>{try{const f=await fO();t(f)}catch(f){console.error("Failed to load ad accounts:",f)}finally{a(!1)}},u=()=>{const f=`${window.location.origin}/ad-oauth-callback`,b=yO(f);console.log("=== Google OAuth Debug ==="),console.log("Redirect URI:",f),console.log("OAuth URL:",b),console.log("========================"),window.location.href=b},m=()=>{const f=`${window.location.origin}/meta-oauth-callback`,b=vO(f);console.log("=== Meta OAuth Debug ==="),console.log("Redirect URI:",f),console.log("OAuth URL:",b),console.log("========================"),window.location.href=b},h=async f=>{l(f);try{await bO(f),await d(),alert("Campaigns synced successfully!")}catch(b){console.error("Sync failed:",b),alert("Failed to sync campaigns")}finally{l(null)}},x=async f=>{if(confirm("Are you sure you want to disconnect this ad account?"))try{await xO(f),t(s.filter(b=>b.id!==f))}catch(b){console.error("Delete failed:",b),alert("Failed to delete account")}};return r?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-xl text-gray-600",children:"Loading..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2 flex items-center",children:[e.jsx(Bc,{className:"h-8 w-8 mr-3 text-orange-600"}),"Ad Accounts Setup"]}),e.jsx("p",{className:"text-gray-600",children:"Connect and manage your Google Ads and Meta Ads accounts"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Connected Accounts"}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Add Account"]})]}),s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Bc,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No accounts connected"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"Connect your Google Ads or Meta Ads account to start tracking performance"}),e.jsxs("button",{onClick:()=>i(!0),className:"inline-flex items-center px-6 py-3 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:[e.jsx(Gt,{className:"h-5 w-5 mr-2"}),"Connect Ad Account"]})]}):e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(f=>e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${f.platform==="google_ads"?"bg-blue-100":"bg-blue-600"}`,children:f.platform==="google_ads"?e.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"G"}):e.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:f.account_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[f.platform==="google_ads"?"Google Ads":"Meta Ads","  ID: ",f.account_id]})]})]}),e.jsxs("div",{className:"mt-3 flex items-center space-x-4 text-sm",children:[e.jsx("div",{className:"flex items-center",children:f.status==="active"?e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"h-4 w-4 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-700",children:"Active"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Od,{className:"h-4 w-4 text-red-500 mr-1"}),e.jsx("span",{className:"text-red-700",children:"Error"})]})}),f.last_synced_at&&e.jsxs("span",{className:"text-gray-500",children:["Last synced: ",new Date(f.last_synced_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>h(f.id),disabled:o===f.id,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",children:[e.jsx(An,{className:`h-4 w-4 mr-2 ${o===f.id?"animate-spin":""}`}),"Sync"]}),e.jsxs("button",{onClick:()=>x(f.id),className:"inline-flex items-center px-4 py-2 border border-red-300 rounded-md text-sm font-medium text-red-700 hover:bg-red-50",children:[e.jsx(nr,{className:"h-4 w-4 mr-2"}),"Disconnect"]})]})]},f.id))})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Connect Ad Account"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:u,className:"w-full flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-blue-600 font-bold",children:"G"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Google Ads"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Connect your Google Ads account"})]})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsxs("button",{onClick:m,className:"w-full flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-blue-600 hover:bg-blue-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-white font-bold",children:"M"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Meta Ads"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Facebook & Instagram"})]})]}),e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),e.jsx("button",{onClick:()=>i(!1),className:"mt-6 w-full px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"})]})})]})},jO=()=>{const s=Zt(),[t,r]=p.useState("loading"),[a,n]=p.useState("Connecting to Google Ads...");return p.useEffect(()=>{(async()=>{try{const o=new URLSearchParams(window.location.search),l=o.get("code"),d=o.get("error"),u=o.get("error_description");if(console.log("OAuth callback URL:",window.location.href),console.log("All params:",Object.fromEntries(o.entries())),d){r("error"),n(`OAuth error: ${d}
${u||""}`),setTimeout(()=>s("/ad-accounts"),3e3);return}if(!l){r("error");const b={url:window.location.href,origin:window.location.origin,pathname:window.location.pathname,search:window.location.search,hash:window.location.hash,params:Object.fromEntries(o.entries()),expectedRedirectUri:`${window.location.origin}/ad-oauth-callback`};n(`No authorization code received.

 This usually means:
1. Redirect URI mismatch in Google Cloud Console
2. You cancelled the authorization
3. OAuth consent screen not configured

Debug Info:
${JSON.stringify(b,null,2)}

 Expected Redirect URI:
http://localhost:5174/ad-oauth-callback

 Check Google Cloud Console:
- Click your OAuth client (716912343285...)
- Verify "Authorized redirect URIs" matches exactly`),setTimeout(()=>s("/ad-accounts"),1e4);return}n("Exchanging authorization code...");const{data:m,error:h}=await _e.functions.invoke("google-ads-oauth",{body:{code:l,redirect_uri:`${window.location.origin}/ad-oauth-callback`}});if(console.log("Edge Function response:",{data:m,functionError:h}),h){const b=m?.error||h.message||"Unknown error";throw new Error(b)}if(!m||m.error)throw new Error(m?.error||"Failed to connect Google Ads account");n("Saving account information...");const{data:{user:x}}=await _e.auth.getUser();if(!x)throw new Error("User not authenticated");const{error:f}=await _e.from("ad_accounts").insert({user_id:x.id,platform:"google_ads",account_id:m.account_id,account_name:m.account_name||"Google Ads Account",access_token:m.access_token,refresh_token:m.refresh_token,status:"active"});if(f)throw f;r("success"),n("Google Ads account connected successfully!"),setTimeout(()=>s("/ad-accounts"),2e3)}catch(o){console.error("OAuth callback error:",o),r("error");let l=o.message||"Failed to connect Google Ads account";o.context?.body&&(l=`${l}

Details: ${JSON.stringify(o.context.body,null,2)}`),n(l),setTimeout(()=>s("/ad-accounts"),5e3)}})()},[s]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[t==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"h-16 w-16 mx-auto text-blue-600 animate-spin mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Connecting..."}),e.jsx("p",{className:"text-gray-600",children:a})]}),t==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"h-16 w-16 mx-auto text-green-600 mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-gray-600",children:a}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Redirecting..."})]}),t==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Od,{className:"h-16 w-16 mx-auto text-red-600 mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Connection Failed"}),e.jsx("pre",{className:"text-sm text-gray-600 text-left bg-gray-50 p-4 rounded mt-4 max-w-lg overflow-auto",children:a}),e.jsx("button",{onClick:()=>s("/ad-accounts"),className:"mt-6 px-6 py-3 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:"Return to Ad Accounts"})]})]})})},NO=()=>{const s=Zt(),[t,r]=p.useState("loading"),[a,n]=p.useState("Connecting to Meta Ads...");return p.useEffect(()=>{(async()=>{try{const o=new URLSearchParams(window.location.search),l=o.get("code"),d=o.get("error"),u=o.get("error_description");if(console.log("Meta OAuth callback URL:",window.location.href),console.log("All params:",Object.fromEntries(o.entries())),d){r("error"),n(`OAuth error: ${d}
${u||""}`),setTimeout(()=>s("/ad-accounts"),3e3);return}if(!l){r("error");const b={url:window.location.href,params:Object.fromEntries(o.entries())};n(`No authorization code received.

Debug Info:
${JSON.stringify(b,null,2)}`),setTimeout(()=>s("/ad-accounts"),5e3);return}n("Exchanging authorization code...");const{data:m,error:h}=await _e.functions.invoke("meta-ads-oauth",{body:{code:l,redirect_uri:`${window.location.origin}/meta-oauth-callback`}});if(console.log("Edge Function response:",{data:m,functionError:h}),h){const b=m?.error||h.message||"Unknown error";throw new Error(b)}if(!m||m.error)throw new Error(m?.error||"Failed to connect Meta Ads account");n("Saving account information...");const{data:{user:x}}=await _e.auth.getUser();if(!x)throw new Error("User not authenticated");const{error:f}=await _e.from("ad_accounts").insert({user_id:x.id,platform:"meta_ads",account_id:m.account_id,account_name:m.account_name||"Meta Ads Account",access_token:m.access_token,status:"active"});if(f)throw f;r("success"),n("Meta Ads account connected successfully!"),setTimeout(()=>s("/ad-accounts"),2e3)}catch(o){console.error("Meta OAuth callback error:",o),r("error");let l=o.message||"Failed to connect Meta Ads account";o.context?.body&&(l=`${l}

Details: ${JSON.stringify(o.context.body,null,2)}`),n(l),setTimeout(()=>s("/ad-accounts"),5e3)}})()},[s]),e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[t==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"h-16 w-16 mx-auto text-blue-600 animate-spin mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Connecting..."}),e.jsx("p",{className:"text-gray-600",children:a})]}),t==="success"&&e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"h-16 w-16 mx-auto text-green-600 mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Success!"}),e.jsx("p",{className:"text-gray-600",children:a}),e.jsx("p",{className:"text-sm text-gray-500 mt-4",children:"Redirecting..."})]}),t==="error"&&e.jsxs(e.Fragment,{children:[e.jsx(Od,{className:"h-16 w-16 mx-auto text-red-600 mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Connection Failed"}),e.jsx("pre",{className:"text-sm text-gray-600 text-left bg-gray-50 p-4 rounded mt-4 max-w-lg overflow-auto",children:a}),e.jsx("button",{onClick:()=>s("/ad-accounts"),className:"mt-6 px-6 py-3 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:"Return to Ad Accounts"})]})]})})},CO="https://ujhgwcurllkkeouzwvgk.supabase.co",SO="http://localhost:5173/gmail-oauth-callback",BO=()=>{const s=Zt(),{session:t}=ka(),[r,a]=p.useState("loading"),[n,i]=p.useState(null),[o,l]=p.useState(null);p.useEffect(()=>{d()},[]);const d=async()=>{try{const u=new URLSearchParams(window.location.search),m=u.get("code"),h=u.get("error");if(h)throw new Error(`OAuth error: ${h}`);if(!m)throw new Error("No authorization code received");console.log(" Processing OAuth callback...");const x=await fetch(`${CO}/functions/v1/gmail-oauth-callback`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t?.access_token}`},body:JSON.stringify({code:m,redirectUri:SO})});if(!x.ok){const b=await x.json();throw new Error(b.error||"Failed to connect Gmail")}const f=await x.json();console.log(" Gmail connected:",f.email),l(f.email),a("success"),window.opener?(window.opener.postMessage({type:"GMAIL_OAUTH_SUCCESS",email:f.email},window.location.origin),setTimeout(()=>{window.close()},2e3)):setTimeout(()=>{s("/settings")},2e3)}catch(u){console.error("OAuth callback error:",u),i(u.message||"Failed to connect Gmail"),a("error"),window.opener&&(window.opener.postMessage({type:"GMAIL_OAUTH_ERROR",error:u.message},window.location.origin),setTimeout(()=>{window.close()},3e3))}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[r==="loading"&&e.jsxs("div",{className:"text-center",children:[e.jsx(hr,{className:"w-12 h-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connecting Gmail..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we securely connect your Gmail account"})]}),r==="success"&&e.jsxs("div",{className:"text-center",children:[e.jsx(un,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Gmail Connected!"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Successfully connected: ",e.jsx("span",{className:"font-medium",children:o})]}),e.jsx("p",{className:"text-sm text-gray-500",children:window.opener?"This window will close automatically...":"Redirecting to settings..."})]}),r==="error"&&e.jsxs("div",{className:"text-center",children:[e.jsx(Od,{className:"w-12 h-12 text-red-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connection Failed"}),e.jsx("p",{className:"text-red-600 mb-4",children:n}),!window.opener&&e.jsx("button",{onClick:()=>s("/settings"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Settings"})]})]})})};async function Oj(){return{active_users:0,active_sessions:0,current_conversions_today:0,current_spend_today:0,top_traffic_source:"google_ads",most_visited_page:"/",recent_conversions:[]}}async function kO(s,t){return{date_range:{start:s,end:t},total_spend:0,total_impressions:0,total_clicks:0,total_conversions:0,total_revenue:0,avg_ctr:0,avg_cpc:0,avg_conversion_rate:0,avg_roas:0,platform_breakdown:[],top_campaigns:[],daily_metrics:[]}}const FO=()=>{const[s,t]=p.useState({start:new Date(Date.now()-2592e6).toISOString().split("T")[0],end:new Date().toISOString().split("T")[0]}),[r,a]=p.useState(null),[n,i]=p.useState(null),[o,l]=p.useState(!0);p.useEffect(()=>{d();const m=setInterval(u,3e4);return()=>clearInterval(m)},[s]);const d=async()=>{l(!0);try{const[m,h]=await Promise.all([kO(s.start,s.end),Oj()]);a(m),i(h)}catch(m){console.error("Failed to load analytics:",m)}finally{l(!1)}},u=async()=>{try{const m=await Oj();i(m)}catch(m){console.error("Failed to load real-time metrics:",m)}};return o?e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("div",{className:"text-xl text-gray-600",children:"Loading analytics..."})}):e.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Ad Analytics Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Track your marketing performance and ROI"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",value:s.start,onChange:m=>t({...s,start:m.target.value}),className:"border border-gray-300 rounded-md px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",value:s.end,onChange:m=>t({...s,end:m.target.value}),className:"border border-gray-300 rounded-md px-3 py-2"})]}),e.jsx("button",{onClick:d,className:"mt-6 px-6 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:"Update"})]})}),n&&e.jsxs("div",{className:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-lg shadow-lg p-6 mb-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[e.jsx(xC,{className:"h-5 w-5 mr-2"}),"Real-Time Activity"]}),e.jsx("span",{className:"text-sm opacity-90",children:"Live"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:n.active_users}),e.jsx("div",{className:"text-sm opacity-90",children:"Active Users"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:n.active_sessions}),e.jsx("div",{className:"text-sm opacity-90",children:"Active Sessions"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl font-bold",children:n.current_conversions_today}),e.jsx("div",{className:"text-sm opacity-90",children:"Conversions Today"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl font-bold",children:["$",n.current_spend_today.toFixed(2)]}),e.jsx("div",{className:"text-sm opacity-90",children:"Spend Today"})]})]})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx(yg,{icon:e.jsx(Br,{className:"h-6 w-6"}),title:"Total Spend",value:`$${r.total_spend.toFixed(2)}`,change:"+12.5%",positive:!1}),e.jsx(yg,{icon:e.jsx(Yx,{className:"h-6 w-6"}),title:"Total Clicks",value:r.total_clicks.toLocaleString(),change:"+8.2%",positive:!0}),e.jsx(yg,{icon:e.jsx(mA,{className:"h-6 w-6"}),title:"Conversions",value:r.total_conversions.toLocaleString(),change:"+15.3%",positive:!0}),e.jsx(yg,{icon:e.jsx(io,{className:"h-6 w-6"}),title:"ROAS",value:`${r.avg_roas.toFixed(2)}x`,change:"+18.7%",positive:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(VE,{className:"h-5 w-5 mr-2 text-orange-600"}),"Platform Performance"]}),e.jsx("div",{className:"space-y-4",children:r.platform_breakdown.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 capitalize",children:m.platform.replace("_"," ")}),e.jsxs("div",{className:"text-xs text-gray-500",children:["$",m.spend.toFixed(2)," spend"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[m.conversions," conv"]}),e.jsxs("div",{className:"text-xs text-green-600",children:[m.roas.toFixed(2),"x ROAS"]})]})]},m.platform))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(xc,{className:"h-5 w-5 mr-2 text-orange-600"}),"Top Campaigns"]}),e.jsx("div",{className:"space-y-4",children:r.top_campaigns.map(m=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.name}),e.jsx("div",{className:"text-xs text-gray-500 capitalize",children:m.platform.replace("_"," ")})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[m.conversions," conv"]}),e.jsxs("div",{className:"text-xs text-green-600",children:[m.roas.toFixed(2),"x ROAS"]})]})]},m.campaign_id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Performance Trend"}),e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-400",children:"Chart visualization will be added with AI integration"})]})]})]})},yg=({icon:s,title:t,value:r,change:a,positive:n})=>e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-gray-500",children:s}),e.jsx("span",{className:`text-sm font-medium ${n?"text-green-600":"text-red-600"}`,children:a})]}),e.jsx("h3",{className:"text-sm font-medium text-gray-600 mb-1",children:t}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r})]});/*! Capacitor: https://capacitorjs.com/ - MIT License */var pA;(function(s){s.Unimplemented="UNIMPLEMENTED",s.Unavailable="UNAVAILABLE"})(pA||(pA={}));class Nx extends Error{constructor(t,r,a){super(t),this.message=t,this.code=r,this.data=a}}const EO=s=>{var t,r;return s?.androidBridge?"android":!((r=(t=s?.webkit)===null||t===void 0?void 0:t.messageHandlers)===null||r===void 0)&&r.bridge?"ios":"web"},_O=s=>{const t=s.CapacitorCustomPlatform||null,r=s.Capacitor||{},a=r.Plugins=r.Plugins||{},n=()=>t!==null?t.name:EO(s),i=()=>n()!=="web",o=h=>{const x=u.get(h);return!!(x?.platforms.has(n())||l(h))},l=h=>{var x;return(x=r.PluginHeaders)===null||x===void 0?void 0:x.find(f=>f.name===h)},d=h=>s.console.error(h),u=new Map,m=(h,x={})=>{const f=u.get(h);if(f)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),f.proxy;const b=n(),v=l(h);let j;const S=async()=>(!j&&b in x?j=typeof x[b]=="function"?j=await x[b]():j=x[b]:t!==null&&!j&&"web"in x&&(j=typeof x.web=="function"?j=await x.web():j=x.web),j),C=(D,_)=>{var $,k;if(v){const L=v?.methods.find(E=>_===E.name);if(L)return L.rtype==="promise"?E=>r.nativePromise(h,_.toString(),E):(E,O)=>r.nativeCallback(h,_.toString(),E,O);if(D)return($=D[_])===null||$===void 0?void 0:$.bind(D)}else{if(D)return(k=D[_])===null||k===void 0?void 0:k.bind(D);throw new Nx(`"${h}" plugin is not implemented on ${b}`,pA.Unimplemented)}},B=D=>{let _;const $=(...k)=>{const L=S().then(E=>{const O=C(E,D);if(O){const le=O(...k);return _=le?.remove,le}else throw new Nx(`"${h}.${D}()" is not implemented on ${b}`,pA.Unimplemented)});return D==="addListener"&&(L.remove=async()=>_()),L};return $.toString=()=>`${D.toString()}() { [capacitor code] }`,Object.defineProperty($,"name",{value:D,writable:!1,configurable:!1}),$},F=B("addListener"),Q=B("removeListener"),q=(D,_)=>{const $=F({eventName:D},_),k=async()=>{const E=await $;Q({eventName:D,callbackId:E},_)},L=new Promise(E=>$.then(()=>E({remove:k})));return L.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await k()},L},P=new Proxy({},{get(D,_){switch(_){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return v?q:F;case"removeListener":return Q;default:return B(_)}}});return a[h]=P,u.set(h,{name:h,proxy:P,platforms:new Set([...Object.keys(x),...v?[b]:[]])}),P};return r.convertFileSrc||(r.convertFileSrc=h=>h),r.getPlatform=n,r.handleError=d,r.isNativePlatform=i,r.isPluginAvailable=o,r.registerPlugin=m,r.Exception=Nx,r.DEBUG=!!r.DEBUG,r.isLoggingEnabled=!!r.isLoggingEnabled,r},PO=s=>s.Capacitor=_O(s),xA=PO(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),jp=xA.registerPlugin;class fB{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(t,r){let a=!1;this.listeners[t]||(this.listeners[t]=[],a=!0),this.listeners[t].push(r);const i=this.windowListeners[t];i&&!i.registered&&this.addWindowListener(i),a&&this.sendRetainedArgumentsForEvent(t);const o=async()=>this.removeListener(t,r);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const t in this.windowListeners)this.removeWindowListener(this.windowListeners[t]);this.windowListeners={}}notifyListeners(t,r,a){const n=this.listeners[t];if(!n){if(a){let i=this.retainedEventArguments[t];i||(i=[]),i.push(r),this.retainedEventArguments[t]=i}return}n.forEach(i=>i(r))}hasListeners(t){var r;return!!(!((r=this.listeners[t])===null||r===void 0)&&r.length)}registerWindowListener(t,r){this.windowListeners[r]={registered:!1,windowEventName:t,pluginEventName:r,handler:a=>{this.notifyListeners(r,a)}}}unimplemented(t="not implemented"){return new xA.Exception(t,pA.Unimplemented)}unavailable(t="not available"){return new xA.Exception(t,pA.Unavailable)}async removeListener(t,r){const a=this.listeners[t];if(!a)return;const n=a.indexOf(r);this.listeners[t].splice(n,1),this.listeners[t].length||this.removeWindowListener(this.windowListeners[t])}addWindowListener(t){window.addEventListener(t.windowEventName,t.handler),t.registered=!0}removeWindowListener(t){t&&(window.removeEventListener(t.windowEventName,t.handler),t.registered=!1)}sendRetainedArgumentsForEvent(t){const r=this.retainedEventArguments[t];r&&(delete this.retainedEventArguments[t],r.forEach(a=>{this.notifyListeners(t,a)}))}}const Hj=s=>encodeURIComponent(s).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),qj=s=>s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class IO extends fB{async getCookies(){const t=document.cookie,r={};return t.split(";").forEach(a=>{if(a.length<=0)return;let[n,i]=a.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=qj(n).trim(),i=qj(i).trim(),r[n]=i}),r}async setCookie(t){try{const r=Hj(t.key),a=Hj(t.value),n=`; expires=${(t.expires||"").replace("expires=","")}`,i=(t.path||"/").replace("path=",""),o=t.url!=null&&t.url.length>0?`domain=${t.url}`:"";document.cookie=`${r}=${a||""}${n}; path=${i}; ${o};`}catch(r){return Promise.reject(r)}}async deleteCookie(t){try{document.cookie=`${t.key}=; Max-Age=0`}catch(r){return Promise.reject(r)}}async clearCookies(){try{const t=document.cookie.split(";")||[];for(const r of t)document.cookie=r.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(t){return Promise.reject(t)}}async clearAllCookies(){try{await this.clearCookies()}catch(t){return Promise.reject(t)}}}jp("CapacitorCookies",{web:()=>new IO});const UO=async s=>new Promise((t,r)=>{const a=new FileReader;a.onload=()=>{const n=a.result;t(n.indexOf(",")>=0?n.split(",")[1]:n)},a.onerror=n=>r(n),a.readAsDataURL(s)}),LO=(s={})=>{const t=Object.keys(s);return Object.keys(s).map(n=>n.toLocaleLowerCase()).reduce((n,i,o)=>(n[i]=s[t[o]],n),{})},TO=(s,t=!0)=>s?Object.entries(s).reduce((a,n)=>{const[i,o]=n;let l,d;return Array.isArray(o)?(d="",o.forEach(u=>{l=t?encodeURIComponent(u):u,d+=`${i}=${l}&`}),d.slice(0,-1)):(l=t?encodeURIComponent(o):o,d=`${i}=${l}`),`${a}&${d}`},"").substr(1):null,DO=(s,t={})=>{const r=Object.assign({method:s.method||"GET",headers:s.headers},t),n=LO(s.headers)["content-type"]||"";if(typeof s.data=="string")r.body=s.data;else if(n.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,l]of Object.entries(s.data||{}))i.set(o,l);r.body=i.toString()}else if(n.includes("multipart/form-data")||s.data instanceof FormData){const i=new FormData;if(s.data instanceof FormData)s.data.forEach((l,d)=>{i.append(d,l)});else for(const l of Object.keys(s.data))i.append(l,s.data[l]);r.body=i;const o=new Headers(r.headers);o.delete("content-type"),r.headers=o}else(n.includes("application/json")||typeof s.data=="object")&&(r.body=JSON.stringify(s.data));return r};class MO extends fB{async request(t){const r=DO(t,t.webFetchExtra),a=TO(t.params,t.shouldEncodeUrlParams),n=a?`${t.url}?${a}`:t.url,i=await fetch(n,r),o=i.headers.get("content-type")||"";let{responseType:l="text"}=i.ok?t:{};o.includes("application/json")&&(l="json");let d,u;switch(l){case"arraybuffer":case"blob":u=await i.blob(),d=await UO(u);break;case"json":d=await i.json();break;case"document":case"text":default:d=await i.text()}const m={};return i.headers.forEach((h,x)=>{m[x]=h}),{data:d,headers:m,status:i.status,url:i.url}}async get(t){return this.request(Object.assign(Object.assign({},t),{method:"GET"}))}async post(t){return this.request(Object.assign(Object.assign({},t),{method:"POST"}))}async put(t){return this.request(Object.assign(Object.assign({},t),{method:"PUT"}))}async patch(t){return this.request(Object.assign(Object.assign({},t),{method:"PATCH"}))}async delete(t){return this.request(Object.assign(Object.assign({},t),{method:"DELETE"}))}}jp("CapacitorHttp",{web:()=>new MO});var gB=(function(){var s=function(t,r){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,n){a.__proto__=n}||function(a,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=n[i])},s(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");s(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}})(),$j;(function(s){s.UNKNOWN_ERROR="0",s.PURCHASE_CANCELLED_ERROR="1",s.STORE_PROBLEM_ERROR="2",s.PURCHASE_NOT_ALLOWED_ERROR="3",s.PURCHASE_INVALID_ERROR="4",s.PRODUCT_NOT_AVAILABLE_FOR_PURCHASE_ERROR="5",s.PRODUCT_ALREADY_PURCHASED_ERROR="6",s.RECEIPT_ALREADY_IN_USE_ERROR="7",s.INVALID_RECEIPT_ERROR="8",s.MISSING_RECEIPT_FILE_ERROR="9",s.NETWORK_ERROR="10",s.INVALID_CREDENTIALS_ERROR="11",s.UNEXPECTED_BACKEND_RESPONSE_ERROR="12",s.RECEIPT_IN_USE_BY_OTHER_SUBSCRIBER_ERROR="13",s.INVALID_APP_USER_ID_ERROR="14",s.OPERATION_ALREADY_IN_PROGRESS_ERROR="15",s.UNKNOWN_BACKEND_ERROR="16",s.INVALID_APPLE_SUBSCRIPTION_KEY_ERROR="17",s.INELIGIBLE_ERROR="18",s.INSUFFICIENT_PERMISSIONS_ERROR="19",s.PAYMENT_PENDING_ERROR="20",s.INVALID_SUBSCRIBER_ATTRIBUTES_ERROR="21",s.LOG_OUT_ANONYMOUS_USER_ERROR="22",s.CONFIGURATION_ERROR="23",s.UNSUPPORTED_ERROR="24",s.EMPTY_SUBSCRIBER_ATTRIBUTES_ERROR="25",s.PRODUCT_DISCOUNT_MISSING_IDENTIFIER_ERROR="26",s.PRODUCT_DISCOUNT_MISSING_SUBSCRIPTION_GROUP_IDENTIFIER_ERROR="28",s.CUSTOMER_INFO_ERROR="29",s.SYSTEM_INFO_ERROR="30",s.BEGIN_REFUND_REQUEST_ERROR="31",s.PRODUCT_REQUEST_TIMED_OUT_ERROR="32",s.API_ENDPOINT_BLOCKED="33",s.INVALID_PROMOTIONAL_OFFER_ERROR="34",s.OFFLINE_CONNECTION_ERROR="35",s.TEST_STORE_SIMULATED_PURCHASE_ERROR="42"})($j||($j={}));(function(s){gB(t,s);function t(){var r=s.call(this,"There is no singleton instance. Make sure you configure Purchases before trying to get the default instance. More info here: https://errors.rev.cat/configuring-sdk")||this;return Object.setPrototypeOf(r,t.prototype),r}return t})(Error);(function(s){gB(t,s);function t(){var r=s.call(this,"This method is not available in the current platform.")||this;return Object.setPrototypeOf(r,t.prototype),r}return t})(Error);var Wj;(function(s){s.UNKNOWN="UNKNOWN",s.CUSTOM="CUSTOM",s.LIFETIME="LIFETIME",s.ANNUAL="ANNUAL",s.SIX_MONTH="SIX_MONTH",s.THREE_MONTH="THREE_MONTH",s.TWO_MONTH="TWO_MONTH",s.MONTHLY="MONTHLY",s.WEEKLY="WEEKLY"})(Wj||(Wj={}));var Kj;(function(s){s[s.INTRO_ELIGIBILITY_STATUS_UNKNOWN=0]="INTRO_ELIGIBILITY_STATUS_UNKNOWN",s[s.INTRO_ELIGIBILITY_STATUS_INELIGIBLE=1]="INTRO_ELIGIBILITY_STATUS_INELIGIBLE",s[s.INTRO_ELIGIBILITY_STATUS_ELIGIBLE=2]="INTRO_ELIGIBILITY_STATUS_ELIGIBLE",s[s.INTRO_ELIGIBILITY_STATUS_NO_INTRO_OFFER_EXISTS=3]="INTRO_ELIGIBILITY_STATUS_NO_INTRO_OFFER_EXISTS"})(Kj||(Kj={}));var zj;(function(s){s.NON_SUBSCRIPTION="NON_SUBSCRIPTION",s.SUBSCRIPTION="SUBSCRIPTION",s.UNKNOWN="UNKNOWN"})(zj||(zj={}));var Gj;(function(s){s.CONSUMABLE="CONSUMABLE",s.NON_CONSUMABLE="NON_CONSUMABLE",s.NON_RENEWABLE_SUBSCRIPTION="NON_RENEWABLE_SUBSCRIPTION",s.AUTO_RENEWABLE_SUBSCRIPTION="AUTO_RENEWABLE_SUBSCRIPTION",s.PREPAID_SUBSCRIPTION="PREPAID_SUBSCRIPTION",s.UNKNOWN="UNKNOWN"})(Gj||(Gj={}));var Vj;(function(s){s[s.UNKNOWN_SUBSCRIPTION_UPGRADE_DOWNGRADE_POLICY=0]="UNKNOWN_SUBSCRIPTION_UPGRADE_DOWNGRADE_POLICY",s[s.IMMEDIATE_WITH_TIME_PRORATION=1]="IMMEDIATE_WITH_TIME_PRORATION",s[s.IMMEDIATE_AND_CHARGE_PRORATED_PRICE=2]="IMMEDIATE_AND_CHARGE_PRORATED_PRICE",s[s.IMMEDIATE_WITHOUT_PRORATION=3]="IMMEDIATE_WITHOUT_PRORATION",s[s.DEFERRED=6]="DEFERRED",s[s.IMMEDIATE_AND_CHARGE_FULL_PRICE=5]="IMMEDIATE_AND_CHARGE_FULL_PRICE"})(Vj||(Vj={}));var Yj;(function(s){s[s.INFINITE_RECURRING=1]="INFINITE_RECURRING",s[s.FINITE_RECURRING=2]="FINITE_RECURRING",s[s.NON_RECURRING=3]="NON_RECURRING"})(Yj||(Yj={}));var Jj;(function(s){s.FREE_TRIAL="FREE_TRIAL",s.SINGLE_PAYMENT="SINGLE_PAYMENT",s.DISCOUNTED_RECURRING_PAYMENT="DISCOUNTED_RECURRING_PAYMENT"})(Jj||(Jj={}));var Xj;(function(s){s.DAY="DAY",s.WEEK="WEEK",s.MONTH="MONTH",s.YEAR="YEAR",s.UNKNOWN="UNKNOWN"})(Xj||(Xj={}));var Zj;(function(s){s.INAPP="inapp",s.SUBS="subs"})(Zj||(Zj={}));var eN;(function(s){s[s.SUBSCRIPTIONS=0]="SUBSCRIPTIONS",s[s.SUBSCRIPTIONS_UPDATE=1]="SUBSCRIPTIONS_UPDATE",s[s.IN_APP_ITEMS_ON_VR=2]="IN_APP_ITEMS_ON_VR",s[s.SUBSCRIPTIONS_ON_VR=3]="SUBSCRIPTIONS_ON_VR",s[s.PRICE_CHANGE_CONFIRMATION=4]="PRICE_CHANGE_CONFIRMATION"})(eN||(eN={}));var tN;(function(s){s[s.SUCCESS=0]="SUCCESS",s[s.USER_CANCELLED=1]="USER_CANCELLED",s[s.ERROR=2]="ERROR"})(tN||(tN={}));var $b;(function(s){s.VERBOSE="VERBOSE",s.DEBUG="DEBUG",s.INFO="INFO",s.WARN="WARN",s.ERROR="ERROR"})($b||($b={}));var rN;(function(s){s[s.BILLING_ISSUE=0]="BILLING_ISSUE",s[s.PRICE_INCREASE_CONSENT=1]="PRICE_INCREASE_CONSENT",s[s.GENERIC=2]="GENERIC",s[s.WIN_BACK_OFFER=3]="WIN_BACK_OFFER"})(rN||(rN={}));var sN;(function(s){s.DISABLED="DISABLED",s.INFORMATIONAL="INFORMATIONAL"})(sN||(sN={}));var aN;(function(s){s.NOT_REQUESTED="NOT_REQUESTED",s.VERIFIED="VERIFIED",s.FAILED="FAILED",s.VERIFIED_ON_DEVICE="VERIFIED_ON_DEVICE"})(aN||(aN={}));var nN;(function(s){s.NOT_PRESENTED="NOT_PRESENTED",s.ERROR="ERROR",s.CANCELLED="CANCELLED",s.PURCHASED="PURCHASED",s.RESTORED="RESTORED"})(nN||(nN={}));var iN;(function(s){s.STOREKIT_1="STOREKIT_1",s.STOREKIT_2="STOREKIT_2",s.DEFAULT="DEFAULT"})(iN||(iN={}));var oN;(function(s){s.MY_APP="MY_APP",s.REVENUECAT="REVENUECAT"})(oN||(oN={}));var lN;(function(s){s.SUCCESS="SUCCESS",s.ERROR="ERROR",s.PURCHASE_BELONGS_TO_OTHER_USER="PURCHASE_BELONGS_TO_OTHER_USER",s.INVALID_TOKEN="INVALID_TOKEN",s.EXPIRED="EXPIRED"})(lN||(lN={}));const lc=jp("Purchases",{web:()=>Fi(()=>import("./web-DtAAXIiy.js"),[]).then(s=>new s.PurchasesWeb)}),RO="appl_eqImMiOTWqoGHkqkjePGfJrLhMA",cN="ContractorAI Pro";class QO{initialized=!1;customerInfo=null;async initialize(t){if(this.initialized){console.log("[RevenueCat] Already initialized");return}try{const r=xA.getPlatform();if(r!=="ios"&&r!=="android"){console.log("[RevenueCat] Not on mobile platform, skipping initialization");return}console.log("[RevenueCat] Initializing SDK..."),await lc.configure({apiKey:RO,appUserID:t}),await lc.setLogLevel({level:$b.DEBUG}),console.log("[RevenueCat] SDK initialized successfully"),this.initialized=!0,await this.refreshCustomerInfo()}catch(r){throw console.error("[RevenueCat] Initialization failed:",r),r}}async getCustomerInfo(){try{const t=await lc.getCustomerInfo();return this.customerInfo=t.customerInfo,t.customerInfo}catch(t){return console.error("[RevenueCat] Failed to get customer info:",t),null}}async refreshCustomerInfo(){return this.getCustomerInfo()}async hasActiveSubscription(){try{const t=await this.getCustomerInfo();if(!t)return!1;const r=t.entitlements.active[cN]!==void 0;return console.log("[RevenueCat] Active subscription:",r),console.log("[RevenueCat] Active entitlements:",Object.keys(t.entitlements.active)),r}catch(t){return console.error("[RevenueCat] Error checking subscription:",t),!1}}async getOfferings(){try{console.log("[RevenueCat] Fetching offerings...");const t=await lc.getOfferings();return console.log("[RevenueCat] Offerings:",t),t}catch(t){return console.error("[RevenueCat] Failed to get offerings:",t),null}}async purchasePackage(t){try{console.log("[RevenueCat] Starting purchase for package:",t);const r=await this.getOfferings();if(!r?.current)throw new Error("No offerings available");const a=r.current.availablePackages.find(i=>i.identifier===t);if(!a)throw new Error(`Package ${t} not found`);const n=await lc.purchasePackage({aPackage:a});return console.log("[RevenueCat] Purchase successful:",n),this.customerInfo=n.customerInfo,{success:!0,customerInfo:n.customerInfo}}catch(r){if(console.error("[RevenueCat] Purchase failed:",r),r.code==="1"||r.userCancelled)return console.log("[RevenueCat] User cancelled purchase"),{success:!1};throw r}}async restorePurchases(){try{console.log("[RevenueCat] Restoring purchases...");const t=await lc.restorePurchases();return this.customerInfo=t.customerInfo,console.log("[RevenueCat] Purchases restored:",t),t.customerInfo}catch(t){return console.error("[RevenueCat] Failed to restore purchases:",t),null}}async identify(t){try{console.log("[RevenueCat] Identifying user:",t),await lc.logIn({appUserID:t}),await this.refreshCustomerInfo()}catch(r){console.error("[RevenueCat] Failed to identify user:",r)}}async logout(){try{console.log("[RevenueCat] Logging out user"),await lc.logOut(),this.customerInfo=null}catch(t){console.error("[RevenueCat] Failed to log out:",t)}}async getSubscriptionStatus(){try{const t=await this.getCustomerInfo();if(!t)return{isActive:!1};const r=t.entitlements.active[cN];return r?{isActive:!0,productId:r.productIdentifier,expirationDate:r.expirationDate||void 0,willRenew:r.willRenew}:{isActive:!1}}catch(t){return console.error("[RevenueCat] Error getting subscription status:",t),{isActive:!1}}}isInitialized(){return this.initialized}}const mc=new QO,OO=jp("RevenueCatUI",{web:()=>Fi(()=>import("./web-1MC8beum.js"),[]).then(s=>new s.RevenueCatUIWeb)}),HO=()=>{const[s,t]=p.useState(!0),[r,a]=p.useState(null),[n,i]=p.useState(!1);p.useEffect(()=>{o()},[]);const o=async()=>{try{if(xA.getPlatform()!=="ios"){a("This page is only available on iOS"),t(!1);return}if(console.log("[SubscriptionsIOS] Initializing RevenueCat..."),await mc.initialize(),console.log("[SubscriptionsIOS] Checking subscription status..."),await mc.hasActiveSubscription()){console.log("[SubscriptionsIOS] User has active subscription, redirecting..."),window.location.reload();return}t(!1)}catch(u){console.error("[SubscriptionsIOS] Initialization error:",u),a(u.message||"Failed to initialize subscription system"),t(!1)}},l=async()=>{try{i(!0),console.log("[SubscriptionsIOS] Presenting paywall...");const u=await OO.presentPaywallIfNeeded({requiredEntitlementIdentifier:"ContractorAI Pro"});console.log("[SubscriptionsIOS] Paywall result:",u),console.log("[SubscriptionsIOS] Refreshing customer info..."),await mc.refreshCustomerInfo();const m=await mc.hasActiveSubscription();if(console.log("[SubscriptionsIOS] Subscription status after paywall:",m),m){console.log("[SubscriptionsIOS] Purchase successful! Reloading app..."),await new Promise(h=>setTimeout(h,500)),window.location.reload();return}i(!1)}catch(u){console.error("[SubscriptionsIOS] Paywall error:",u),i(!1),u.code!=="1"&&!u.userCancelled&&a(`Failed to show subscription options: ${u.message||"Please configure products in RevenueCat dashboard first."}`)}},d=async()=>{try{t(!0),a(null),console.log("[SubscriptionsIOS] Restoring purchases..."),await mc.restorePurchases()&&await mc.hasActiveSubscription()?(alert("Purchases restored successfully!"),window.location.reload()):alert("No previous purchases found."),t(!1)}catch(u){console.error("[SubscriptionsIOS] Restore error:",u),a("Failed to restore purchases. Please try again."),t(!1)}};return s?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(hr,{className:"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Loading subscription options..."})]})}):r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(Qa,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops!"}),e.jsx("p",{className:"text-red-600 mb-6",children:r}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 font-semibold",children:"Try Again"}),e.jsx("button",{onClick:d,className:"w-full px-6 py-3 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 font-semibold",children:"Restore Purchases"})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4 w-screen max-w-full overflow-x-hidden",children:e.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Subscribe to ContractorAI Pro"}),e.jsx("p",{className:"text-xl text-gray-600 mb-6",children:"Unlock all premium features for your contracting business"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"What's Included:"}),e.jsx("ul",{className:"space-y-4",children:["Unlimited job estimates & invoices","Real-time profit tracking","Crew scheduling & management","Professional roofing reports","Mobile app (iOS & Android)","Customer database & CRM","Payment tracking","Priority support"].map((u,m)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-6 w-6 text-green-500 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-gray-700 text-lg",children:u})]},m))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:l,disabled:n,className:"w-full py-4 px-6 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-lg transition-colors flex items-center justify-center",children:n?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"animate-spin h-6 w-6 mr-2"}),"Loading..."]}):"View Subscription Plans"}),e.jsx("button",{onClick:d,disabled:s||n,className:"w-full py-3 px-6 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed font-semibold transition-colors",children:"Restore Previous Purchases"}),e.jsx("p",{className:"text-center text-sm text-gray-500 mt-4",children:"All plans include a 7-day free trial"})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Auto-Renewable Subscription"}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Subscription Name:"})," ContractorAI Pro"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Pricing & Duration:"}),e.jsxs("ul",{className:"list-disc ml-6 mt-2 space-y-1",children:[e.jsx("li",{children:"Monthly Plan: $34.99 per month"}),e.jsx("li",{children:"Quarterly Plan: $84.99 every 3 months"}),e.jsx("li",{children:"Annual Plan: $349.99 per year"})]})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Free Trial:"})," 7 days"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Auto-Renewal:"})," Your subscription automatically renews unless cancelled at least 24 hours before the end of the current period. You will be charged for renewal within 24 hours prior to the end of the current period."]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Payment:"})," Payment will be charged to your Apple ID at confirmation of purchase."]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Manage Subscription:"})," You can manage and cancel subscriptions in your Apple ID Account Settings after purchase."]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["By subscribing, you agree to our"," ",e.jsx(yl,{to:"/legal/terms",className:"text-blue-600 hover:text-blue-700 font-semibold underline",children:"Terms of Service (EULA)"})," ","and"," ",e.jsx(yl,{to:"/legal/privacy",className:"text-blue-600 hover:text-blue-700 font-semibold underline",children:"Privacy Policy"})]})}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"Need help?"}),e.jsx("a",{href:"mailto:admin@elevatedsystems.info",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Contact Support"})]})]})})},qO=()=>{const[s,t]=p.useState(""),[r,a]=p.useState(""),[n,i]=p.useState(!1),o=Zt(),l=async d=>{if(d.preventDefault(),s!==r){alert("Passwords do not match");return}if(s.length<6){alert("Password must be at least 6 characters");return}try{i(!0);const{error:u}=await _e.auth.updateUser({password:s});if(u)throw u;alert("Password updated successfully!"),o("/settings")}catch(u){console.error("Error updating password:",u),alert(u?.message||"Failed to update password"),i(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full",children:e.jsxs("div",{className:"bg-white shadow rounded-lg p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(uA,{className:"w-8 h-8 text-orange-600"})})}),e.jsx("h2",{className:"text-center text-3xl font-bold text-gray-900 mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-center text-gray-600 mb-8",children:"Enter your new password below"}),e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"New Password"}),e.jsx("input",{id:"password",type:"password",required:!0,value:s,onChange:d=>t(d.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",type:"password",required:!0,value:r,onChange:d=>a(d.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500",placeholder:"Confirm new password"})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50",children:n?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"animate-spin h-5 w-5 mr-2"}),"Updating..."]}):"Update Password"})]})]})})})},$O=()=>{const[s,t]=p.useState(""),[r,a]=p.useState(""),[n,i]=p.useState(!1),[o,l]=p.useState(!1),[d,u]=p.useState(""),m=Zt(),h=ka(f=>f.signIn),x=async f=>{f.preventDefault(),u(""),l(!0);try{const{error:b}=await h(s,r);b?b.message.toLowerCase().includes("email not confirmed")?(u("Please confirm your email address. Check your inbox for the confirmation link."),setTimeout(()=>{m(`/auth/confirm-email?email=${encodeURIComponent(s)}`)},2e3)):u(b.message):m("/")}catch{u("An unexpected error occurred")}finally{l(!1)}};return e.jsxs("div",{className:"h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800 flex flex-col justify-center px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-20 left-10 w-64 h-64 bg-blue-400 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-cyan-400 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"sm:mx-auto w-full sm:max-w-md relative z-10",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-400 via-blue-400 to-cyan-500 rounded-2xl blur-xl opacity-50"}),e.jsx("div",{className:"relative bg-gradient-to-br from-slate-900 to-slate-800 rounded-2xl p-2 shadow-2xl",children:e.jsx("img",{src:"/logo.png",alt:"ContractorAI Logo",className:"w-20 h-20 object-contain rounded-xl"})})]})}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-extrabold text-white mb-1 tracking-tight",children:"Welcome Back"}),e.jsx("p",{className:"text-blue-200 text-xs",children:"Sign in to manage your contracting business"})]})]}),e.jsx("div",{className:"sm:mx-auto w-full sm:max-w-md relative z-10",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm py-6 px-6 shadow-2xl rounded-2xl border border-blue-100",children:[e.jsxs("form",{className:"space-y-4",onSubmit:x,children:[d&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-3 py-2 rounded-md text-xs",children:d}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-xs font-semibold text-gray-700 mb-1",children:"Email address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(Ba,{className:"h-5 w-5 text-blue-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:f=>t(f.target.value),className:"appearance-none block w-full pl-12 pr-4 py-2.5 border-2 border-gray-200 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",placeholder:"you@example.com"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-xs font-semibold text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:e.jsx(uA,{className:"h-5 w-5 text-blue-400"})}),e.jsx("input",{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:r,onChange:f=>a(f.target.value),className:"appearance-none block w-full pl-12 pr-12 py-2.5 border-2 border-gray-200 rounded-xl shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm",placeholder:"Enter your password"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>i(!n),className:"text-gray-400 hover:text-blue-600 transition-colors",children:n?e.jsx(Gx,{className:"h-5 w-5"}):e.jsx(ao,{className:"h-5 w-5"})})})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:o,className:"w-full flex justify-center items-center py-2.5 px-4 border border-transparent rounded-xl shadow-lg text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:o?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:["Sign in",e.jsx(yC,{className:"ml-2 h-4 w-4"})]})})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["Don't have an account?"," ",e.jsx(yl,{to:"/auth/signup",className:"font-bold text-blue-600 hover:text-blue-700 transition-colors",children:"Sign up"})]})})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Secure"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Encrypted"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx("svg",{className:"w-3 h-3 mr-1 text-purple-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})}),"Trusted"]})]}),e.jsxs("div",{className:"flex items-center justify-center space-x-3 mt-3 text-xs",children:[e.jsx(yl,{to:"/legal/terms",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Terms of Service"}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx(yl,{to:"/legal/privacy",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Privacy Policy"})]})]})]})})]})},WO=()=>{const[s,t]=p.useState(""),[r,a]=p.useState(""),[n,i]=p.useState(""),[o,l]=p.useState(""),[d,u]=p.useState(""),[m,h]=p.useState(!1),[x,f]=p.useState(!1),[b,v]=p.useState(!1),[j,S]=p.useState(""),C=Zt(),B=ka(Q=>Q.signUp),F=async Q=>{if(Q.preventDefault(),S(""),r!==n){S("Passwords do not match");return}if(r.length<6){S("Password must be at least 6 characters long");return}v(!0);try{const q=await B(s,r,{fullName:o,companyName:d});if(q.error)S(q.error.message);else{const P=q.user&&!q.user.email_confirmed_at&&!q.session;console.log("[Signup] User needs confirmation:",P),console.log("[Signup] User email_confirmed_at:",q.user?.email_confirmed_at),console.log("[Signup] Has session:",!!q.session),C(P?`/auth/confirm-email?email=${encodeURIComponent(s)}`:"/")}}catch{S("An unexpected error occurred")}finally{v(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(LC,{className:"w-12 h-12 text-blue-600"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Create your account"}),e.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",e.jsx(yl,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"sign in to your existing account"})]})]}),e.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:e.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[e.jsxs("form",{className:"space-y-6",onSubmit:F,children:[j&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:j}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ns,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"fullName",name:"fullName",type:"text",autoComplete:"name",required:!0,value:o,onChange:Q=>l(Q.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your full name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(ip,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"companyName",name:"companyName",type:"text",autoComplete:"organization",required:!0,value:d,onChange:Q=>u(Q.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your company name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ba,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:Q=>t(Q.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Enter your email"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(uA,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"password",name:"password",type:m?"text":"password",autoComplete:"new-password",required:!0,value:r,onChange:Q=>a(Q.target.value),className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Create a password"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>h(!m),className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500",children:m?e.jsx(Gx,{className:"h-5 w-5"}):e.jsx(ao,{className:"h-5 w-5"})})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm password"}),e.jsxs("div",{className:"mt-1 relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(uA,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:x?"text":"password",autoComplete:"new-password",required:!0,value:n,onChange:Q=>i(Q.target.value),className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"Confirm your password"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx("button",{type:"button",onClick:()=>f(!x),className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:text-gray-500",children:x?e.jsx(Gx,{className:"h-5 w-5"}):e.jsx(ao,{className:"h-5 w-5"})})})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:b,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsxs(e.Fragment,{children:["Create account",e.jsx(yC,{className:"ml-2 h-4 w-4 group-hover:translate-x-1 transition-transform"})]})})})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("div",{className:"w-full border-t border-gray-300"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsxs("span",{className:"px-2 bg-white text-gray-500",children:["By signing up, you agree to our"," ",e.jsx(yl,{to:"/legal/terms",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Terms of Service"})," ","and"," ",e.jsx(yl,{to:"/legal/privacy",className:"text-blue-600 hover:text-blue-500 font-medium",children:"Privacy Policy"})]})})]})})]})})]})},KO=()=>{const[s]=J5(),t=Zt(),r=s.get("email")||"",[a,n]=p.useState(!1),[i,o]=p.useState(!1),[l,d]=p.useState(""),[u,m]=p.useState(!1);p.useEffect(()=>{if(!r)return;const b=async()=>{try{console.log("[EmailConfirmation] Checking confirmation status...");const{data:{session:j},error:S}=await _e.auth.refreshSession();console.log("[EmailConfirmation] Refresh session result:",{hasSession:!!j,emailConfirmed:j?.user?.email_confirmed_at,error:S}),j?.user&&(console.log("[EmailConfirmation] User found! Redirecting to app..."),t("/"))}catch(j){console.error("[EmailConfirmation] Error checking confirmation:",j)}};b();const v=setInterval(b,3e3);return()=>clearInterval(v)},[r,t]);const h=async()=>{if(!r){d("Email address not found");return}n(!0),d(""),o(!1);try{console.log("[EmailConfirmation] Resending confirmation to:",r);const{data:b,error:v}=await _e.auth.resend({type:"signup",email:r});console.log("[EmailConfirmation] Resend response:",{data:b,error:v}),v?(console.error("[EmailConfirmation] Resend error:",v),v.code==="over_email_send_rate_limit"?d("Too many resend attempts. Please wait a moment and check your email inbox."):v.message.includes("Email confirmations are turned off")||v.message.includes("not enabled")?d("Email confirmation is not enabled for this project. Your account is already active."):d(v.message||"Failed to resend email")):(console.log("[EmailConfirmation] Email resent successfully"),o(!0),setTimeout(()=>o(!1),5e3))}catch(b){console.error("[EmailConfirmation] Resend exception:",b),d(b.message||"Failed to resend confirmation email")}finally{n(!1)}},x=()=>{t("/auth/login")},f=async()=>{m(!0),d("");try{console.log("[EmailConfirmation] Manual check - refreshing session...");const{data:{session:b},error:v}=await _e.auth.refreshSession();if(console.log("[EmailConfirmation] Manual check result:",{hasSession:!!b,emailConfirmed:b?.user?.email_confirmed_at,user:b?.user,error:v}),b?.user){console.log("[EmailConfirmation] Email confirmed! Redirecting..."),t("/");return}console.log("[EmailConfirmation] No session - redirecting to login"),d("Email confirmed! Please sign in with your password."),setTimeout(()=>{t("/auth/login?email="+encodeURIComponent(r)+"&confirmed=true")},2e3)}catch(b){console.error("[EmailConfirmation] Manual check error:",b),d("Email confirmed! Please sign in with your password."),setTimeout(()=>{t("/auth/login?email="+encodeURIComponent(r))},2e3)}finally{m(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800 flex flex-col justify-center px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 opacity-10",children:[e.jsx("div",{className:"absolute top-20 left-10 w-64 h-64 bg-blue-400 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-cyan-400 rounded-full blur-3xl"})]}),e.jsx("div",{className:"sm:mx-auto w-full sm:max-w-md relative z-10",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-2xl rounded-2xl border border-blue-100",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 bg-blue-400 rounded-full blur-xl opacity-50"}),e.jsx("div",{className:"relative bg-gradient-to-br from-blue-500 to-cyan-500 rounded-full p-4",children:e.jsx(Ba,{className:"w-12 h-12 text-white"})})]})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"Confirm Your Email"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We've sent a confirmation email to:"}),e.jsx("p",{className:"text-blue-600 font-semibold text-center mb-6",children:r}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(un,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Next steps:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsx("li",{children:"Open your email inbox"}),e.jsx("li",{children:"Find the confirmation email from ContractorAI"}),e.jsx("li",{children:"Click the confirmation link"}),e.jsx("li",{children:"You'll be automatically logged in"})]})]})]})}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("p",{className:"font-semibold mb-2",children:" iOS App Instructions:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-2",children:[e.jsx("li",{children:"Check your email inbox for the confirmation link"}),e.jsx("li",{children:"Click the confirmation link in the email"}),e.jsx("li",{className:"font-bold text-blue-700",children:"After confirming, come back to this app"}),e.jsx("li",{children:`Click "I've Confirmed - Continue" button below`})]})]})}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("p",{className:"font-semibold mb-1",children:" Not receiving emails?"}),e.jsx("p",{className:"mb-2",children:"If you don't receive the confirmation email within a few minutes:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"Check your spam/junk folder"}),e.jsx("li",{children:'Try clicking "Resend" below'}),e.jsx("li",{children:'Or click "Skip and sign in" to contact support'})]})]})}),i&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(un,{className:"w-5 h-5 mr-2"}),e.jsx("span",{children:"Confirmation email sent! Check your inbox."})]})}),l&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4 text-sm",children:l}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:f,disabled:u,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-lg text-sm font-bold text-white bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:u?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"animate-spin h-5 w-5 mr-2"}),"Checking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(un,{className:"w-5 h-5 mr-2"}),"I've Confirmed - Continue"]})}),e.jsx("button",{onClick:h,disabled:a,className:"w-full flex justify-center items-center py-3 px-4 border-2 border-gray-300 rounded-lg text-sm font-semibold text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:a?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"animate-spin h-5 w-5 mr-2"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(An,{className:"w-5 h-5 mr-2"}),"Resend Confirmation Email"]})})]}),e.jsxs("div",{className:"mt-6 text-center space-y-2",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Didn't receive the email? Check your spam folder or"," ",e.jsx("button",{onClick:h,className:"text-blue-600 hover:text-blue-700 font-semibold",children:"resend it"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Having trouble?"," ",e.jsx("button",{onClick:x,className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Skip and sign in"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsx("div",{className:"flex items-center justify-center text-xs text-gray-500",children:e.jsxs("div",{className:"animate-pulse flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),e.jsx("span",{children:"Auto-checking for confirmation..."})]})})}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Need help?"," ",e.jsx("a",{href:"mailto:admin@elevatedsystems.info",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Contact Support"})]})})]})})]})},zO=()=>{const s=Zt();return p.useEffect(()=>{(async()=>{try{console.log("[AuthCallback] Processing auth callback...");const{data:{session:r},error:a}=await _e.auth.getSession();if(console.log("[AuthCallback] Session check result:",{hasSession:!!r,emailConfirmed:r?.user?.email_confirmed_at,error:a}),a){console.error("[AuthCallback] Error:",a),s("/auth/login?error="+encodeURIComponent(a.message));return}r?.user?(console.log("[AuthCallback] Email confirmed! Redirecting to app..."),setTimeout(()=>{s("/")},500)):(console.log("[AuthCallback] No session found, redirecting to login"),s("/auth/login"))}catch(r){console.error("[AuthCallback] Exception:",r),s("/auth/login")}})()},[s]),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800 flex flex-col justify-center px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"sm:mx-auto w-full sm:max-w-md",children:e.jsx("div",{className:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-2xl rounded-2xl border border-blue-100",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(hr,{className:"w-12 h-12 text-blue-600 animate-spin mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Confirming your email..."}),e.jsx("p",{className:"text-gray-600 text-center text-sm",children:"Please wait while we confirm your email address"})]})})})})},GO=()=>{const s=Zt();return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6",children:[e.jsx(hs,{className:"w-5 h-5"}),"Back"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 md:p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Terms of Service (EULA)"}),e.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Last updated: December 2, 2025"}),e.jsxs("div",{className:"prose prose-sm max-w-none space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"1. Acceptance of Terms"}),e.jsx("p",{className:"text-gray-700",children:'By downloading, installing, accessing or using the Contractor AI mobile application ("App"), you agree to be bound by these Terms of Service and all applicable laws. This Agreement constitutes a legally binding agreement between you and Elevated Systems LLC ("Contractor AI"). If you do not agree, do not use our App.'})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"2. Subscription Terms and In-App Purchases"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Auto-Renewable Subscriptions"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"Contractor AI offers the following subscription options through Apple's In-App Purchase system:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Monthly:"})," $34.99 per month"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Quarterly:"})," $84.99 per 3 months"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Annual:"})," $349.99 per year"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Payment and Billing"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"Payment charged to your Apple ID at confirmation of purchase"}),e.jsx("li",{children:"Subscriptions auto-renew unless turned off 24 hours before period ends"}),e.jsx("li",{children:"Renewal charged within 24 hours prior to current period end"}),e.jsx("li",{children:"Apple Inc. is the Merchant of Record for all purchases"})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Managing Subscriptions"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"Cancel anytime through your Apple ID:"}),e.jsxs("ol",{className:"list-decimal pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"Open Settings on your iOS device"}),e.jsx("li",{children:"Tap your name at the top"}),e.jsx("li",{children:'Tap "Subscriptions"'}),e.jsx("li",{children:"Select Contractor AI"}),e.jsx("li",{children:'Tap "Cancel Subscription"'})]}),e.jsxs("p",{className:"text-gray-700 mt-2",children:[e.jsx("strong",{children:"Important:"})," You retain access until the end of your billing period. Subscriptions cannot be canceled before the period ends."]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Refund Policy"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"All purchases are final and non-refundable except as required by law"}),e.jsxs("li",{children:["Refund requests must be made to Apple at ",e.jsx("a",{href:"https://reportaproblem.apple.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"reportaproblem.apple.com"})]}),e.jsx("li",{children:"We cannot process refunds directly - Apple handles all payments"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"3. License Grant"}),e.jsx("p",{className:"text-gray-700",children:"We grant you a limited, non-exclusive, non-transferable, revocable license to use the App on your device for personal or business use. You may not copy, modify, reverse engineer, or distribute the App."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"4. User Accounts"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"To use our services, you must:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"Be at least 18 years of age"}),e.jsx("li",{children:"Provide accurate information"}),e.jsx("li",{children:"Maintain account security"}),e.jsx("li",{children:"Accept responsibility for all account activities"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"5. Privacy"}),e.jsx("p",{className:"text-gray-700",children:"Your privacy is important to us. Our Privacy Policy explains how we collect, use, and protect your information. By using the App, you agree to our Privacy Policy."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"6. Disclaimers"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:'THE APP IS PROVIDED "AS IS" WITHOUT WARRANTIES OF ANY KIND.'})," We do not warrant that the App will be error-free, secure, or uninterrupted."]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"7. Limitation of Liability"}),e.jsx("p",{className:"text-gray-700",children:"To the maximum extent permitted by law, Contractor AI shall not be liable for any indirect, incidental, or consequential damages. Our total liability shall not exceed the amount you paid in the last 12 months or $100, whichever is greater."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"8. Termination"}),e.jsx("p",{className:"text-gray-700",children:"We may suspend or terminate your access for breach of these terms. You may terminate by canceling your subscription and deleting the App."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"9. Apple-Specific Terms"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"This Agreement is between you and Contractor AI, not Apple"}),e.jsx("li",{children:"Apple has no obligation to provide support"}),e.jsx("li",{children:"Apple is not responsible for any claims relating to the App"}),e.jsx("li",{children:"Apple is a third-party beneficiary and may enforce this Agreement"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"10. Contact Us"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Elevated Systems LLC"}),e.jsx("br",{}),"Email: support@contractorai.work",e.jsx("br",{}),"Response time: Within 48 hours"]})]}),e.jsx("section",{className:"border-t pt-4 mt-8",children:e.jsx("p",{className:"text-sm text-gray-600 text-center",children:"BY USING THE APP, YOU ACKNOWLEDGE THAT YOU HAVE READ AND AGREE TO THESE TERMS."})})]})]})]})})},VO=()=>{const s=Zt();return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[e.jsxs("button",{onClick:()=>s(-1),className:"flex items-center gap-2 text-blue-600 hover:text-blue-700 mb-6",children:[e.jsx(hs,{className:"w-5 h-5"}),"Back"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 md:p-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Privacy Policy"}),e.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Last updated: December 2, 2025"}),e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Quick Summary:"})," We collect only what's necessary to provide our services. We never sell your data. Your payment information is handled securely by Apple."]})}),e.jsxs("div",{className:"prose prose-sm max-w-none space-y-6",children:[e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"1. Information We Collect"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Information You Provide"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Account:"})," Email, name, company name"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Business Data:"})," Projects, invoices, estimates, client information"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Photos:"})," Job site photos and documents you upload"]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 my-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Apple App Store Subscriptions:"})," Payment information is processed solely by Apple. We don't have access to your credit card numbers or billing addresses. We only receive confirmation that a subscription was purchased."]})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Automatically Collected"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Device:"})," iOS version, device type, unique identifiers"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Usage:"})," Features used, time spent, interaction patterns"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Location:"})," Approximate or precise (with permission) for job sites"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Camera/Photos:"})," Access only with explicit permission"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Calendar:"})," Only if you enable sync"]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"2. How We Use Your Information"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"Provide app functionality (calculators, project management, invoices)"}),e.jsx("li",{children:"AI-powered features (pricing recommendations, insights)"}),e.jsx("li",{children:"Verify subscriptions purchased through Apple"}),e.jsx("li",{children:"Send notifications (appointments, project updates)"}),e.jsx("li",{children:"Customer support and app improvements"}),e.jsx("li",{children:"Security and fraud prevention"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"3. How We Share Your Information"}),e.jsx("p",{className:"text-gray-700 font-semibold mb-2",children:"WE NEVER SELL YOUR PERSONAL INFORMATION."}),e.jsx("p",{className:"text-gray-700 mb-2",children:"We only share with:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Supabase:"})," Secure database hosting (SOC 2, GDPR compliant)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"OpenAI:"})," AI features (data not used for training)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Apple:"})," Subscription management (Apple's privacy policy applies)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Google Calendar:"})," Only if you enable sync"]})]}),e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 my-4",children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("strong",{children:"Apple's Role:"})," Apple processes all payments and manages subscriptions. Apple's Privacy Policy governs payment data. View at ",e.jsx("a",{href:"https://www.apple.com/legal/privacy/",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"apple.com/legal/privacy"})]})})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"4. Data Security"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Encryption:"})," SSL/TLS in transit, AES-256 at rest"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Authentication:"})," Secure OAuth 2.0 and JWT tokens"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Access Controls:"})," You can only access your own data"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Payments:"})," Handled by Apple (PCI DSS compliant)"]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"5. Your Privacy Rights"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Control Your Data"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Access:"})," View your data anytime in app settings"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Update:"})," Edit your information directly"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Export:"})," Download your data (CSV, PDF)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Delete:"})," Request account deletion"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"iOS Permissions"}),e.jsx("p",{className:"text-gray-700 mb-2",children:"Control app access in Settings:"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Location:"})," Settings  Privacy  Location Services  ContractorAI"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Camera:"})," Settings  ContractorAI  Camera"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Photos:"})," Settings  ContractorAI  Photos"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Calendar:"})," Settings  ContractorAI  Calendars"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Notifications:"})," Settings  Notifications  ContractorAI"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mt-4 mb-2",children:"Manage Subscriptions"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"View/cancel: Settings  [Your Name]  Subscriptions  ContractorAI"}),e.jsxs("li",{children:["Request refund: ",e.jsx("a",{href:"https://reportaproblem.apple.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"reportaproblem.apple.com"})]})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"6. Data Retention"}),e.jsxs("ul",{className:"list-disc pl-6 space-y-1 text-gray-700",children:[e.jsx("li",{children:"Active accounts: Data retained while subscription is valid"}),e.jsx("li",{children:"Deleted accounts: Data removed within 30 days"}),e.jsx("li",{children:"Backups: Removed within 90 days"}),e.jsx("li",{children:"Legal requirements: May retain as required by law"})]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"7. Children's Privacy"}),e.jsx("p",{className:"text-gray-700",children:"Contractor AI is for business use by adults 18+. We don't knowingly collect information from children under 13. If we discover we have, we'll delete it immediately."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"8. California & EU Rights"}),e.jsxs("p",{className:"text-gray-700 mb-2",children:[e.jsx("strong",{children:"California (CCPA):"})," Right to know, delete, and opt-out (we don't sell data)"]}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"EU (GDPR):"})," Right to access, rectification, erasure, portability, and object to processing"]})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"9. Changes to This Policy"}),e.jsx("p",{className:"text-gray-700",children:"We may update this Privacy Policy. We'll notify you via email or in-app notice. Continued use means acceptance of changes."})]}),e.jsxs("section",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"10. Contact Us"}),e.jsxs("p",{className:"text-gray-700",children:[e.jsx("strong",{children:"Elevated Systems LLC"}),e.jsx("br",{}),"Email: support@contractorai.work",e.jsx("br",{}),"Privacy: privacy@contractorai.work",e.jsx("br",{}),"Response time: Within 30 days"]})]}),e.jsx("section",{className:"border-t pt-4 mt-8",children:e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:[" 2025 Elevated Systems LLC. All rights reserved.",e.jsx("br",{}),"By using ContractorAI, you consent to this Privacy Policy."]})})]})]})]})})},YO=[{id:"5/4-deck",name:'5/4" Deck Board',width:5.5,spacing:.125,price:{12:15.98,16:21.98,20:27.98}},{id:"2x6-pt",name:"2x6 PT Lumber",width:5.5,spacing:.25,price:{12:12.98,16:17.98,20:22.98}},{id:"trex-enhance-basic",name:"Trex Enhance Basic",width:5.5,spacing:.25,price:{12:29.28,16:39.04,20:48.8}},{id:"trex-enhance-natural",name:"Trex Enhance Natural",width:5.5,spacing:.25,price:{12:40.92,16:54.56,20:68.2}},{id:"trex-select",name:"Trex Select",width:5.5,spacing:.25,price:{12:54.24,16:72.32,20:90.4}},{id:"trex-transcend",name:"Trex Transcend",width:5.5,spacing:.25,price:{12:81.6,16:108.8,20:136}},{id:"trex-lineage",name:"Trex Lineage",width:5.5,spacing:.25,price:{12:93.84,16:125.12,20:156.4}},{id:"deckorators-voyage",name:"Deckorators Voyage",width:5.5,spacing:.25,price:{12:84,16:112,20:140}},{id:"deckorators-vault",name:"Deckorators Vault",width:5.5,spacing:.25,price:{12:71.25,16:95,20:118.75}},{id:"deckorators-summit",name:"Deckorators Summit",width:5.5,spacing:.25,price:{12:63.75,16:85,20:106.25}}],JO=[{size:"2x6",price:{12:12.98,16:17.98,20:22.98}},{size:"2x8",price:{12:17.98,16:23.98,20:29.98}},{size:"2x10",price:{12:24.98,16:32.98,20:41.98}},{size:"2x12",price:{12:32.98,16:43.98,20:54.98}}],XO=[{id:"pt",name:"Pressure Treated",price:{"2x6":12.98,"2x8":17.98,"2x10":24.98,"2x12":32.98}},{id:"azek",name:"Azek PVC",price:{"2x6":45.98,"2x8":59.98,"2x10":79.98,"2x12":99.98}},{id:"metal",name:"Metal Stock",price:{"2x6":29.98,"2x8":39.98,"2x10":49.98,"2x12":59.98}}],ZO=[{id:"pt",name:"Pressure Treated",pricePerFoot:12.98,postPrice:24.98},{id:"trex",name:"Trex Composite",pricePerFoot:45.98,postPrice:89.98}],Fg={joist_hanger:1.98,hurricane_tie:1.25,deck_screws:39.98,concrete:6.98,post_base:12.98,triple_beam_per_ft:16,post_4x4_per_ft:6,post_6x6_per_ft:9,ledger_2x6_per_ft:1.75,ledger_2x8_per_ft:2,ledger_2x10_per_ft:2.32,ledger_2x12_per_ft:2.89},eH=()=>{const s=Zt(),[t,r]=p.useState(!0),[a,n]=p.useState(!1),[i,o]=p.useState(null),[l,d]=p.useState([]),[u,m]=p.useState([]),[h,x]=p.useState([]),[f,b]=p.useState([]),[v,j]=p.useState(Fg),[S,C]=p.useState("deck-boards"),[B,F]=p.useState(!1),[Q,q]=p.useState(null);p.useEffect(()=>{P()},[]);const P=async()=>{r(!0);try{const E=await Ve.getOrCreateConfig("deck");if(!E.success||!E.data)throw new Error("Failed to load configuration");const O=E.data;o(O.id),O.is_configured?await _(O.id):await D(O.id)}catch(E){console.error("Error loading configuration:",E),alert("Failed to load configuration")}finally{r(!1)}},D=async E=>{try{for(const O of YO)await Ve.addMaterial(E,{category:"deck_boards",name:O.name,price:O.price[16],unit:"per 16ft board"});for(const O of JO)await Ve.addMaterial(E,{category:"joists",name:`${O.size} Joist`,price:O.price[16],unit:"per 16ft board"});for(const O of XO)await Ve.addMaterial(E,{category:"fascia",name:O.name,price:O.price["2x10"],unit:"per 16ft board"});for(const O of ZO)await Ve.addMaterial(E,{category:"railings",name:O.name,price:O.pricePerFoot,unit:"per linear foot"});for(const[O,le]of Object.entries(Fg))await Ve.updatePricing(E,O,le);await Ve.markAsConfigured(E),await _(E)}catch(O){console.error("Error cloning defaults:",O),alert("Failed to clone default values")}},_=async E=>{try{const O=await Ve.getMaterials(E);if(O.success&&O.data){const te=O.data;d(te.filter(V=>V.category==="deck_boards")),m(te.filter(V=>V.category==="joists")),x(te.filter(V=>V.category==="fascia")),b(te.filter(V=>V.category==="railings"))}const le=await Ve.getPricingOverrides(E);if(le.success&&le.data){const te={...Fg};le.data.forEach(V=>{te[V.component_key]=V.value}),j(te)}}catch(O){console.error("Error loading custom data:",O)}},$=async()=>{if(i){n(!0);try{alert(" Configuration saved successfully!"),s("/pricing")}catch(E){console.error("Error saving:",E),alert("Failed to save configuration")}finally{n(!1)}}},k=async()=>{if(i&&confirm("Are you sure you want to reset to default values? This will delete all your custom materials and pricing.")){r(!0);try{const E=await Ve.getMaterials(i);if(E.success&&E.data)for(const O of E.data)await Ve.deleteMaterial(O.id);await D(i)}catch(E){console.error("Error resetting:",E),alert("Failed to reset configuration")}finally{r(!1)}}},L=(E,O)=>{const le=E.filter(V=>!V.is_archived),te=E.filter(V=>V.is_archived);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>F(!0),className:"w-full py-3 sm:py-3 px-4 border-2 border-dashed border-blue-300 rounded-md text-blue-600 hover:border-blue-500 hover:bg-blue-50 transition-colors flex items-center justify-center gap-2 font-medium text-base sm:text-sm",children:[e.jsx(Gt,{className:"w-5 h-5"}),"Add Custom Material"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm sm:text-sm font-medium text-gray-700 mb-3",children:"Your Materials"}),e.jsx("div",{className:"space-y-2",children:le.map(V=>e.jsx(sH,{material:V,onEdit:()=>q(V),onArchive:async()=>{await Ve.archiveMaterial(V.id),await _(i)},onDelete:async()=>{confirm("Delete this material permanently?")&&(await Ve.deleteMaterial(V.id),await _(i))}},V.id))})]}),te.length>0&&e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"text-sm font-medium text-gray-500 cursor-pointer hover:text-gray-700 flex items-center gap-2",children:[e.jsx(bC,{className:"w-4 h-4"}),"Archived Materials (",te.length,")"]}),e.jsx("div",{className:"mt-3 space-y-2 ml-6",children:te.map(V=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[e.jsx("span",{className:"text-gray-500",children:V.name}),e.jsx("button",{onClick:async()=>{await Ve.unarchiveMaterial(V.id),await _(i)},className:"text-blue-600 hover:text-blue-700 text-xs",children:"Restore"})]},V.id))})]})})]})};return t?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(hr,{className:"w-8 h-8 text-blue-600 animate-spin"})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4 text-sm sm:text-base",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Calculators"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Configure Decking Calculator"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 hidden sm:block",children:"Customize materials and pricing for your deck projects"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsxs("button",{onClick:k,className:"w-full sm:w-auto px-4 py-3 sm:py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 flex items-center justify-center gap-2 font-medium text-base sm:text-sm",children:[e.jsx(Ws,{className:"w-5 h-5 sm:w-4 sm:h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Reset to Defaults"}),e.jsx("span",{className:"sm:hidden",children:"Reset"})]}),e.jsxs("button",{onClick:$,disabled:a,className:"w-full sm:w-auto px-4 py-3 sm:py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center justify-center gap-2 font-medium text-base sm:text-sm",children:[a?e.jsx(hr,{className:"w-5 h-5 sm:w-4 sm:h-4 animate-spin"}):e.jsx(Qn,{className:"w-5 h-5 sm:w-4 sm:h-4"}),a?"Saving...":"Save & Close"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsx("nav",{className:"flex space-x-4 sm:space-x-8 px-4 sm:px-6 min-w-max","aria-label":"Tabs",children:[{id:"deck-boards",label:"Deck Boards",shortLabel:"Boards"},{id:"framing",label:"Framing",shortLabel:"Framing"},{id:"railings",label:"Railings",shortLabel:"Rails"},{id:"fascia",label:"Fascia",shortLabel:"Fascia"},{id:"hardware",label:"Hardware & Pricing",shortLabel:"Hardware"}].map(E=>e.jsxs("button",{onClick:()=>C(E.id),className:`py-3 sm:py-4 px-2 sm:px-1 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${S===E.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("span",{className:"hidden sm:inline",children:E.label}),e.jsx("span",{className:"sm:hidden",children:E.shortLabel})]},E.id))})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[S==="deck-boards"&&L(l),S==="framing"&&L(u),S==="railings"&&L(f),S==="fascia"&&L(h),S==="hardware"&&e.jsx(aH,{pricing:v,configId:i,onUpdate:async(E,O)=>{await Ve.updatePricing(i,E,O),j(le=>({...le,[E]:O}))}})]})]}),B&&e.jsx(tH,{category:S,configId:i,onClose:()=>F(!1),onAdd:async()=>{await _(i),F(!1)}}),Q&&e.jsx(rH,{material:Q,onClose:()=>q(null),onSave:async E=>{await Ve.updateMaterial(Q.id,E),await _(i),q(null)}})]})})},tH=({category:s,configId:t,onClose:r,onAdd:a})=>{const[n,i]=p.useState(""),[o,l]=p.useState(""),[d,u]=p.useState("each"),[m,h]=p.useState(!1),x=()=>{switch(s){case"deck-boards":return"deck_boards";case"framing":return"joists";case"railings":return"railings";case"fascia":return"fascia";default:return"deck_boards"}},f=async b=>{if(b.preventDefault(),!(!n||typeof o!="number")){h(!0);try{await Ve.addMaterial(t,{category:x(),name:n,price:o,unit:d}),await a()}catch(v){console.error("Error adding material:",v),alert("Failed to add material")}finally{h(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Custom Material"}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"material-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{id:"material-name",type:"text",value:n,onChange:b=>i(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Custom Composite Board",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"material-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{id:"material-price",type:"number",value:o,onChange:b=>l(b.target.value?parseFloat(b.target.value):""),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"material-unit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{id:"material-unit",value:d,onChange:b=>u(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"each",children:"Each"}),e.jsx("option",{value:"per linear foot",children:"Per Linear Foot"}),e.jsx("option",{value:"per square foot",children:"Per Square Foot"}),e.jsx("option",{value:"per 12ft board",children:"Per 12ft Board"}),e.jsx("option",{value:"per 16ft board",children:"Per 16ft Board"}),e.jsx("option",{value:"per 20ft board",children:"Per 20ft Board"}),e.jsx("option",{value:"per box",children:"Per Box"}),e.jsx("option",{value:"per bag",children:"Per Bag"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||!n||typeof o!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add Material"]})})]})]})]})})},rH=({material:s,onClose:t,onSave:r})=>{const[a,n]=p.useState(s.name),[i,o]=p.useState(s.price),[l,d]=p.useState(s.unit),[u,m]=p.useState(!1),h=async x=>{if(x.preventDefault(),!(!a||typeof i!="number")){m(!0);try{await r({name:a,price:i,unit:l})}catch(f){console.error("Error updating material:",f),alert("Failed to update material")}finally{m(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Material"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-material-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{id:"edit-material-name",type:"text",value:a,onChange:x=>n(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Custom Composite Board",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-material-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{id:"edit-material-price",type:"number",value:i,onChange:x=>o(parseFloat(x.target.value)),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-material-unit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{id:"edit-material-unit",value:l,onChange:x=>d(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"each",children:"Each"}),e.jsx("option",{value:"per linear foot",children:"Per Linear Foot"}),e.jsx("option",{value:"per square foot",children:"Per Square Foot"}),e.jsx("option",{value:"per 12ft board",children:"Per 12ft Board"}),e.jsx("option",{value:"per 16ft board",children:"Per 16ft Board"}),e.jsx("option",{value:"per 20ft board",children:"Per 20ft Board"}),e.jsx("option",{value:"per box",children:"Per Box"}),e.jsx("option",{value:"per bag",children:"Per Bag"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||!a||typeof i!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-4 h-4"}),"Save Changes"]})})]})]})]})})},sH=({material:s,onEdit:t,onArchive:r,onDelete:a})=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-3 border border-gray-200 rounded-md hover:border-gray-300 transition-colors gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm sm:text-base",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["$",s.price.toFixed(2)," ",s.unit]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:t,className:"flex-1 sm:flex-none p-2 sm:p-2 text-blue-600 hover:bg-blue-50 rounded text-sm sm:text-base",title:"Edit",children:e.jsx(ir,{className:"w-5 h-5 sm:w-4 sm:h-4 mx-auto"})}),e.jsx("button",{onClick:r,className:"flex-1 sm:flex-none p-2 sm:p-2 text-gray-600 hover:bg-gray-100 rounded text-sm sm:text-base",title:"Archive",children:e.jsx(bC,{className:"w-5 h-5 sm:w-4 sm:h-4 mx-auto"})}),e.jsx("button",{onClick:a,className:"flex-1 sm:flex-none p-2 sm:p-2 text-red-600 hover:bg-red-50 rounded text-sm sm:text-base",title:"Delete",children:e.jsx(nr,{className:"w-5 h-5 sm:w-4 sm:h-4 mx-auto"})})]})]}),aH=({pricing:s,configId:t,onUpdate:r})=>{const[a,n]=p.useState(!1),[i,o]=p.useState(null),[l,d]=p.useState([]);p.useEffect(()=>{u()},[s]);const u=()=>{const b=Object.keys(Fg),j=Object.keys(s).filter(S=>!b.includes(S)).map(S=>({key:S,label:m(S),unit:"each"}));d(j)},m=b=>b.split("_").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" "),h=async b=>{if(confirm(`Delete ${m(b)}?`))try{const{data:v}=await Ve.getPricingOverrides(t);v&&v.find(S=>S.component_key===b)&&await u()}catch(v){console.error("Error deleting component:",v)}},f=[...[{key:"joist_hanger",label:"Joist Hanger",unit:"each",isDefault:!0},{key:"hurricane_tie",label:"Hurricane Tie",unit:"each",isDefault:!0},{key:"deck_screws",label:"Deck Screws",unit:"per box",isDefault:!0},{key:"concrete",label:"Concrete",unit:"per bag",isDefault:!0},{key:"post_base",label:"Post Base",unit:"each",isDefault:!0},{key:"triple_beam_per_ft",label:"Triple Beam",unit:"per linear foot",isDefault:!0},{key:"post_4x4_per_ft",label:"4x4 Post",unit:"per linear foot",isDefault:!0},{key:"post_6x6_per_ft",label:"6x6 Post",unit:"per linear foot",isDefault:!0},{key:"ledger_2x6_per_ft",label:"Ledger Board 2x6",unit:"per linear foot",isDefault:!0},{key:"ledger_2x8_per_ft",label:"Ledger Board 2x8",unit:"per linear foot",isDefault:!0},{key:"ledger_2x10_per_ft",label:"Ledger Board 2x10",unit:"per linear foot",isDefault:!0},{key:"ledger_2x12_per_ft",label:"Ledger Board 2x12",unit:"per linear foot",isDefault:!0}],...l.map(b=>({...b,isDefault:!1}))];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:()=>n(!0),className:"w-full py-3 px-4 border-2 border-dashed border-blue-300 rounded-md text-blue-600 hover:border-blue-500 hover:bg-blue-50 transition-colors flex items-center justify-center gap-2 font-medium",children:[e.jsx(Gt,{className:"w-5 h-5"}),"Add Custom Hardware Component"]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Hardware & Component Pricing"}),e.jsx("div",{className:"space-y-2",children:f.map(b=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-md hover:border-gray-300 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:b.label}),e.jsx("p",{className:"text-sm text-gray-500",children:b.unit})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",(s[b.key]||0).toFixed(2)]}),e.jsx("button",{onClick:()=>o({key:b.key,label:b.label,unit:b.unit,price:s[b.key]||0}),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),!b.isDefault&&e.jsx("button",{onClick:()=>h(b.key),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]},b.key))})]}),a&&e.jsx(nH,{configId:t,onClose:()=>n(!1),onAdd:async(b,v)=>{await r(b,v),n(!1),u()}}),i&&e.jsx(iH,{component:i,onClose:()=>o(null),onSave:async(b,v)=>{await r(b,v),o(null),u()}})]})},nH=({configId:s,onClose:t,onAdd:r})=>{const[a,n]=p.useState(""),[i,o]=p.useState(""),[l,d]=p.useState("each"),[u,m]=p.useState(!1),h=async x=>{if(x.preventDefault(),!(!a||typeof i!="number")){m(!0);try{const f=a.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"");await r(f,i)}catch(f){console.error("Error adding component:",f),alert("Failed to add hardware component")}finally{m(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Custom Hardware Component"}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"component-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Component Name"}),e.jsx("input",{id:"component-name",type:"text",value:a,onChange:x=>n(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Stainless Steel Nails",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"component-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{id:"component-price",type:"number",value:i,onChange:x=>o(x.target.value?parseFloat(x.target.value):""),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"component-unit",className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{id:"component-unit",value:l,onChange:x=>d(x.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"each",children:"Each"}),e.jsx("option",{value:"per linear foot",children:"Per Linear Foot"}),e.jsx("option",{value:"per square foot",children:"Per Square Foot"}),e.jsx("option",{value:"per box",children:"Per Box"}),e.jsx("option",{value:"per bag",children:"Per Bag"}),e.jsx("option",{value:"per pound",children:"Per Pound"}),e.jsx("option",{value:"per gallon",children:"Per Gallon"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:u||!a||typeof i!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:u?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add Component"]})})]})]})]})})},iH=({component:s,onClose:t,onSave:r})=>{const[a,n]=p.useState(s.price),[i,o]=p.useState(!1),l=async d=>{if(d.preventDefault(),typeof a=="number"){o(!0);try{await r(s.key,a)}catch(u){console.error("Error updating component:",u),alert("Failed to update hardware component")}finally{o(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Edit Hardware Component"}),e.jsxs("form",{onSubmit:l,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Component Name"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:s.label})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-200 rounded-md text-gray-700",children:s.unit})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"edit-component-price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"$"}),e.jsx("input",{id:"edit-component-price",type:"number",value:a,onChange:d=>n(parseFloat(d.target.value)),className:"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00",step:"0.01",min:"0",required:!0})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i||typeof a!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?e.jsxs(e.Fragment,{children:[e.jsx(hr,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qn,{className:"w-4 h-4"}),"Save Changes"]})})]})]})]})})},dN=[{name:"Asphalt Shingles",unit:"square",unitSpec:"",price:350,category:"shingles"},{name:"Architectural Shingles",unit:"square",unitSpec:"",price:475,category:"shingles"},{name:"Metal Roofing",unit:"square",unitSpec:"",price:850,category:"shingles"},{name:"Tile Roofing",unit:"square",unitSpec:"",price:625,category:"shingles"},{name:"Composite Shingles",unit:"square",unitSpec:"",price:425,category:"shingles"},{name:"Atlas Storm Master Shingles",unit:"square",unitSpec:"",price:550,category:"shingles"},{name:"SBS Malarkey Shingles",unit:"square",unitSpec:"",price:500,category:"shingles"},{name:"Brava Synthetic Tiles",unit:"square",unitSpec:"",price:950,category:"shingles"}],uN=[{name:"Standard Underlayment",unit:"square",unitSpec:"",price:26,category:"underlayment"},{name:"Ice & Water Shield",unit:"roll",unitSpec:"200 sq ft",price:70,category:"underlayment"}],AN=[{name:"Ridge Cap",unit:"linear_foot",unitSpec:"",price:3.25,category:"components"},{name:"Drip Edge",unit:"linear_foot",unitSpec:"",price:2.5,category:"components"},{name:"Nails & Fasteners",unit:"square",unitSpec:"",price:32,category:"components"},{name:"Skylight Flashing",unit:"unit",unitSpec:"",price:85,category:"components"},{name:"Ventilation System",unit:"system",unitSpec:"",price:625,category:"components"},{name:"Extended Warranty",unit:"square",unitSpec:"",price:27,category:"components"},{name:"Debris Disposal",unit:"square",unitSpec:"",price:32,category:"components"}],gm=[{value:"square",label:"per square"},{value:"roll",label:"per roll"},{value:"linear_foot",label:"per linear foot"},{value:"unit",label:"per unit"},{value:"system",label:"per system"},{value:"bundle",label:"per bundle"}],oH=()=>{const s=Zt(),[t,r]=p.useState("shingles"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(dN),[u,m]=p.useState(uN),[h,x]=p.useState(AN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(null),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("square"),[E,O]=p.useState(""),[le,te]=p.useState(!1),[V,M]=p.useState(""),[ie,K]=p.useState(0),[H,I]=p.useState("square"),[ee,se]=p.useState("");p.useEffect(()=>{de()},[]);const de=async()=>{o(!0);try{const U=await Ve.getOrCreateConfig("roofing");if(!U.success||!U.data){alert("Failed to load configuration");return}const fe=U.data;if(n(fe.id),fe.is_configured){const Se=await Ve.getMaterials(fe.id);if(Se.success&&Se.data){const Re=Se.data.filter(oe=>!oe.is_archived),G=Re.filter(oe=>oe.category==="shingles"),ue=Re.filter(oe=>oe.category==="underlayment"),ge=Re.filter(oe=>oe.category==="components");b(G),j(ue),C(ge)}}}catch(U){console.error("Error loading configuration:",U),alert("Failed to load configuration")}finally{o(!1)}},re=(U,fe)=>{F(U),D(fe.name),$(fe.price),L(fe.unit||je(fe.unit)),O(fe.unitSpec||"")},z=U=>{q(U.id),D(U.name),$(U.price),L(U.unit),O(U.metadata?.unitSpec||"")},ne=()=>{F(null),q(null),D(""),$(0),L("square"),O("")},Y=async(U,fe)=>{if(!a)return;(await Ve.addMaterial(a,{name:P,price:_,unit:k,category:fe,metadata:E?{unitSpec:E}:void 0})).success?((fe==="shingles"?d:fe==="underlayment"?m:x)(G=>G.map((ue,ge)=>ge===U?{...ue,name:P,price:_,unit:ce(k)}:ue)),await de(),ne()):alert("Failed to update material")},X=async()=>{if(!Q)return;(await Ve.updateMaterial(Q,{name:P,price:_,unit:k,metadata:E?{unitSpec:E}:void 0})).success?(await de(),ne()):alert("Failed to update material")},ye=async()=>{if(!a||!V||typeof ie!="number")return;const U=t;(await Ve.addMaterial(a,{name:V,price:ie,unit:H,category:U,metadata:ee?{unitSpec:ee}:void 0})).success?(await de(),te(!1),M(""),K(0),I("square"),se("")):alert("Failed to add material")},pe=async U=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(U)).success?await de():alert("Failed to delete material")},Ce=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(dN),m(uN),x(AN),await de()):alert("Failed to reset configuration")},je=U=>gm.find(Se=>Se.label===U)?.value||"square",ce=(U,fe)=>{const Re=gm.find(G=>G.value===U)?.label||"per square";return fe?`${Re} (${fe})`:Re},Te=U=>U.unitSpec?ce(U.unit||je(U.unit),U.unitSpec):U.unit?.startsWith("per ")?U.unit:ce(U.unit||je(U.unit)),We=()=>{switch(t){case"shingles":return l;case"underlayment":return u;case"components":return h}},Le=()=>{switch(t){case"shingles":return f;case"underlayment":return v;case"components":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Roofing Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your roofing estimates"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["shingles","underlayment","components"].map(U=>e.jsx("button",{onClick:()=>r(U),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===U?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:We().map((U,fe)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:B===fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:P,onChange:Se=>D(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:Se=>$(parseFloat(Se.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:k,onChange:Se=>L(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:gm.map(Se=>e.jsx("option",{value:Se.value,children:Se.label},Se.value))}),e.jsx("input",{type:"text",value:E,onChange:Se=>O(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Y(fe,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",Te(U)]})]}),e.jsx("button",{onClick:()=>re(fe,U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},fe))}),Le().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Le().map(U=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:Q===U.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:P,onChange:fe=>D(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:fe=>$(parseFloat(fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:k,onChange:fe=>L(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:gm.map(fe=>e.jsx("option",{value:fe.value,children:fe.label},fe.value))}),e.jsx("input",{type:"text",value:E,onChange:fe=>O(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",ce(U.unit,U.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},U.id))})]}),Le().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:V,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="shingles"?"e.g., Premium Designer Shingles":t==="underlayment"?"e.g., Synthetic Underlayment":"e.g., Custom Flashing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ie,onChange:U=>K(parseFloat(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:H,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:gm.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ee,onChange:U=>se(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Specify the quantity (e.g., "200 sq ft" for a roll)'})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{te(!1),M(""),K(0),I("square"),se("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!V||typeof ie!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},mN=[{name:"3000 PSI Concrete",unit:"per cubic yard",price:125,category:"concrete",unitSpec:"1 cubic yard"},{name:"4000 PSI Concrete",unit:"per cubic yard",price:145,category:"concrete",unitSpec:"1 cubic yard"},{name:"5000 PSI Concrete",unit:"per cubic yard",price:165,category:"concrete",unitSpec:"1 cubic yard"}],hN=[{name:"Broom Finish",unit:"per square foot",price:.5,category:"finishing",unitSpec:"100 sq ft"},{name:"Smooth Trowel Finish",unit:"per square foot",price:.75,category:"finishing",unitSpec:"100 sq ft"},{name:"Stamped Finish",unit:"per square foot",price:3.5,category:"finishing",unitSpec:"100 sq ft"},{name:"Exposed Aggregate",unit:"per square foot",price:4.25,category:"finishing",unitSpec:"100 sq ft"}],fN=[{name:"Wire Mesh",unit:"per square foot",price:.35,category:"reinforcement",unitSpec:"100 sq ft"},{name:"#4 Rebar",unit:"per linear foot",price:.85,category:"reinforcement",unitSpec:"100 linear ft"},{name:"Fiber Reinforcement",unit:"per cubic yard",price:35,category:"reinforcement",unitSpec:"1 cubic yard"}],pm=[{value:"cubic_yard",label:"per cubic yard"},{value:"square_foot",label:"per square foot"},{value:"linear_foot",label:"per linear foot"},{value:"bag",label:"per bag"},{value:"ton",label:"per ton"},{value:"unit",label:"per unit"}],lH=()=>{const s=Zt(),[t,r]=p.useState("concrete"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(mN),[u,m]=p.useState(hN),[h,x]=p.useState(fN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(null),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("cubic_yard"),[E,O]=p.useState(""),[le,te]=p.useState(!1),[V,M]=p.useState(""),[ie,K]=p.useState(0),[H,I]=p.useState("cubic_yard"),[ee,se]=p.useState("");p.useEffect(()=>{de()},[]);const de=async()=>{o(!0);try{const U=await Ve.getOrCreateConfig("concrete");if(!U.success||!U.data){alert("Failed to load configuration");return}const fe=U.data;if(n(fe.id),fe.is_configured){const Se=await Ve.getMaterials(fe.id);if(Se.success&&Se.data){const Re=Se.data.filter(oe=>!oe.is_archived),G=Re.filter(oe=>oe.category==="concrete"),ue=Re.filter(oe=>oe.category==="finishing"),ge=Re.filter(oe=>oe.category==="reinforcement");b(G),j(ue),C(ge)}}}catch(U){console.error("Error loading configuration:",U),alert("Failed to load configuration")}finally{o(!1)}},re=(U,fe)=>{F(U),D(fe.name),$(fe.price),L(je(fe.unit)),O(fe.unitSpec||"")},z=U=>{q(U.id),D(U.name),$(U.price),L(U.unit),O(U.metadata?.unitSpec||"")},ne=()=>{F(null),q(null),D(""),$(0),L("cubic_yard"),O("")},Y=async(U,fe)=>{if(!a)return;(await Ve.addMaterial(a,{name:P,price:_,unit:k,category:fe,metadata:E?{unitSpec:E}:void 0})).success?((fe==="concrete"?d:fe==="finishing"?m:x)(G=>G.map((ue,ge)=>ge===U?{...ue,name:P,price:_,unit:ce(k,E),unitSpec:E}:ue)),await de(),ne()):alert("Failed to update material")},X=async()=>{if(!Q)return;const U=Le().find(Se=>Se.id===Q);(await Ve.updateMaterial(Q,{name:P,price:_,unit:k,metadata:{...U?.metadata,unitSpec:E}})).success?(await de(),ne()):alert("Failed to update material")},ye=async()=>{if(!a||!V||typeof ie!="number")return;const U=t;(await Ve.addMaterial(a,{name:V,price:ie,unit:H,category:U,metadata:ee?{unitSpec:ee}:void 0})).success?(await de(),te(!1),M(""),K(0),I("cubic_yard"),se("")):alert("Failed to add material")},pe=async U=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(U)).success?await de():alert("Failed to delete material")},Ce=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(mN),m(hN),x(fN),await de()):alert("Failed to reset configuration")},je=U=>pm.find(Se=>Se.label===U)?.value||"cubic_yard",ce=(U,fe)=>{const Re=pm.find(G=>G.value===U)?.label||"per cubic yard";return fe?`${Re} (${fe})`:Re},Te=U=>U.unitSpec?ce(U.unit||je(U.unit),U.unitSpec):U.unit?.startsWith("per ")?U.unit:ce(U.unit||je(U.unit)),We=()=>{switch(t){case"concrete":return l;case"finishing":return u;case"reinforcement":return h}},Le=()=>{switch(t){case"concrete":return f;case"finishing":return v;case"reinforcement":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Concrete Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your concrete estimates"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["concrete","finishing","reinforcement"].map(U=>e.jsx("button",{onClick:()=>r(U),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===U?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:We().map((U,fe)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:B===fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:Se=>D(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:Se=>$(parseFloat(Se.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:k,onChange:Se=>L(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:pm.map(Se=>e.jsx("option",{value:Se.value,children:Se.label},Se.value))}),e.jsx("input",{type:"text",value:E,onChange:Se=>O(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Y(fe,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",Te(U)]})]}),e.jsx("button",{onClick:()=>re(fe,U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},fe))}),Le().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Le().map(U=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:Q===U.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:fe=>D(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:fe=>$(parseFloat(fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:k,onChange:fe=>L(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:pm.map(fe=>e.jsx("option",{value:fe.value,children:fe.label},fe.value))}),e.jsx("input",{type:"text",value:E,onChange:fe=>O(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",ce(U.unit,U.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},U.id))})]}),Le().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:V,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="concrete"?"e.g., 6000 PSI High-Strength Concrete":t==="finishing"?"e.g., Polished Finish":"e.g., Steel Rebar #5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ie,onChange:U=>K(parseFloat(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:H,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:pm.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ee,onChange:U=>se(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{te(!1),M(""),K(0),I("cubic_yard"),se("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!V||typeof ie!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},gN=[{name:"Vinyl Siding - Traditional Lap",unit:"per square",unitSpec:"100 sq ft",price:179.98,category:"siding"},{name:"Vinyl Siding - Dutch Lap",unit:"per square",unitSpec:"100 sq ft",price:199.98,category:"siding"},{name:"Vinyl Siding - Vertical Board & Batten",unit:"per square",unitSpec:"100 sq ft",price:219.98,category:"siding"},{name:"Vinyl Siding - Shake/Shingle",unit:"per square",unitSpec:"100 sq ft",price:259.98,category:"siding"},{name:"Fiber Cement - Traditional Lap",unit:"per square",unitSpec:"100 sq ft",price:319.98,category:"siding"},{name:"Fiber Cement - Dutch Lap",unit:"per square",unitSpec:"100 sq ft",price:339.98,category:"siding"},{name:"Fiber Cement - Vertical Board & Batten",unit:"per square",unitSpec:"100 sq ft",price:359.98,category:"siding"},{name:"Fiber Cement - Shake/Shingle",unit:"per square",unitSpec:"100 sq ft",price:399.98,category:"siding"},{name:"Wood Siding - Traditional Lap",unit:"per square",unitSpec:"100 sq ft",price:399.98,category:"siding"},{name:"Wood Siding - Dutch Lap",unit:"per square",unitSpec:"100 sq ft",price:419.98,category:"siding"},{name:"Wood Siding - Vertical Board & Batten",unit:"per square",unitSpec:"100 sq ft",price:439.98,category:"siding"},{name:"Wood Siding - Shake/Shingle",unit:"per square",unitSpec:"100 sq ft",price:479.98,category:"siding"},{name:"Metal Siding - Traditional Lap",unit:"per square",unitSpec:"100 sq ft",price:299.98,category:"siding"},{name:"Metal Siding - Dutch Lap",unit:"per square",unitSpec:"100 sq ft",price:319.98,category:"siding"},{name:"Metal Siding - Vertical Board & Batten",unit:"per square",unitSpec:"100 sq ft",price:279.98,category:"siding"},{name:"Metal Siding - Shake/Shingle",unit:"per square",unitSpec:"100 sq ft",price:379.98,category:"siding"},{name:"Engineered Wood - Traditional Lap",unit:"per square",unitSpec:"100 sq ft",price:359.98,category:"siding"},{name:"Engineered Wood - Dutch Lap",unit:"per square",unitSpec:"100 sq ft",price:379.98,category:"siding"},{name:"Engineered Wood - Vertical Board & Batten",unit:"per square",unitSpec:"100 sq ft",price:399.98,category:"siding"},{name:"Engineered Wood - Shake/Shingle",unit:"per square",unitSpec:"100 sq ft",price:439.98,category:"siding"}],pN=[{name:"Vinyl Trim",unit:"per 16ft piece",unitSpec:"16 ft",price:17.98,category:"trim"},{name:"Wood Trim",unit:"per 16ft piece",unitSpec:"16 ft",price:25.98,category:"trim"},{name:"Aluminum Trim",unit:"per 16ft piece",unitSpec:"16 ft",price:31.98,category:"trim"},{name:"Fiber Cement Trim",unit:"per 16ft piece",unitSpec:"16 ft",price:39.98,category:"trim"}],xN=[{name:"House Wrap",unit:"per roll",unitSpec:"1000 sq ft",price:159.98,category:"accessories"},{name:"House Wrap Tape",unit:"per roll",unitSpec:"165 linear ft",price:12.98,category:"accessories"},{name:"Foam Insulation",unit:"per bundle",unitSpec:"100 sq ft",price:49.98,category:"accessories"},{name:"Starter Strip",unit:"per 12ft piece",unitSpec:"12 ft",price:13.98,category:"accessories"},{name:"J-Channel",unit:"per 12.5ft piece",unitSpec:"12.5 ft",price:17.98,category:"accessories"},{name:"Corner Posts",unit:"per 10ft piece",unitSpec:"10 ft",price:39.98,category:"accessories"},{name:"Siding Fasteners",unit:"per box",unitSpec:"1000 count",price:29.98,category:"accessories"}],cH=({category:s,onClose:t,onAdd:r})=>{const[a,n]=p.useState(""),[i,o]=p.useState(0),[l,d]=p.useState("per square"),[u,m]=p.useState(""),[h,x]=p.useState(!1),f=async b=>{if(b.preventDefault(),!(!a||typeof i!="number")){x(!0);try{await r({name:a,price:i,unit:l,category:s})}catch(v){console.error("Error adding material:",v),alert("Failed to add material")}finally{x(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Custom Material"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:a,onChange:b=>n(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"e.g., Premium Vinyl Siding"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:i,onChange:b=>o(parseFloat(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:l,onChange:b=>d(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"per square",children:"per square"}),e.jsx("option",{value:"per square foot",children:"per square foot"}),e.jsx("option",{value:"per panel",children:"per panel"}),e.jsx("option",{value:"per 16ft piece",children:"per 16ft piece"}),e.jsx("option",{value:"per 12ft piece",children:"per 12ft piece"}),e.jsx("option",{value:"per 12.5ft piece",children:"per 12.5ft piece"}),e.jsx("option",{value:"per 10ft piece",children:"per 10ft piece"}),e.jsx("option",{value:"per roll",children:"per roll"}),e.jsx("option",{value:"per bundle",children:"per bundle"}),e.jsx("option",{value:"per box",children:"per box"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:u,onChange:b=>m(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",disabled:h,children:h?"Adding...":"Add Material"})]})]})]})})},dH=()=>{const s=Zt(),[t,r]=p.useState("siding"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(gN),[u,m]=p.useState(pN),[h,x]=p.useState(xN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(!1),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(""),[k,L]=p.useState("");p.useEffect(()=>{V()},[]);const E=[{value:"per square",label:"per square"},{value:"per square foot",label:"per square foot"},{value:"per panel",label:"per panel"},{value:"per 16ft piece",label:"per 16ft piece"},{value:"per 12ft piece",label:"per 12ft piece"},{value:"per 12.5ft piece",label:"per 12.5ft piece"},{value:"per 10ft piece",label:"per 10ft piece"},{value:"per roll",label:"per roll"},{value:"per bundle",label:"per bundle"},{value:"per box",label:"per box"}],O=re=>E.find(ne=>ne.label===re||ne.value===re)?.value||re,le=(re,z)=>{const Y=E.find(X=>X.value===re)?.label||"per square";return z?`${Y} (${z})`:Y},te=re=>re.unitSpec?le(re.unit||O(re.unit),re.unitSpec):re.unit?.startsWith("per ")?re.unit:le(re.unit||O(re.unit)),V=async()=>{o(!0);try{const re=await Ve.getOrCreateConfig("siding");if(!re.success||!re.data){alert("Failed to load configuration");return}const z=re.data;if(n(z.id),z.is_configured){const ne=await Ve.getMaterials(z.id);if(ne.success&&ne.data){const Y=ne.data.filter(X=>!X.is_archived);b(Y.filter(X=>X.category==="siding")),j(Y.filter(X=>X.category==="trim")),C(Y.filter(X=>X.category==="accessories"))}}}catch(re){console.error("Error loading configuration:",re),alert("Failed to load configuration")}finally{o(!1)}},M=async re=>{if(!a)return;const z={...re,metadata:k?{unitSpec:k}:void 0};(await Ve.addMaterial(a,z)).success?(await V(),F(!1),L("")):alert("Failed to add material")},ie=async re=>{if(!confirm("Delete this custom material? This cannot be undone."))return;(await Ve.deleteMaterial(re)).success?await V():alert("Failed to delete material")},K=(re,z)=>{const ne=t==="siding"?l:t==="trim"?u:h,Y=z==="price"?ne[re][z].toString():ne[re][z];D(Y),$(ne[re].unitSpec||""),q({index:re,field:z})},H=()=>{if(!Q)return;const{index:re,field:z}=Q,ne=z==="price"?parseFloat(P):P;if(t==="siding"){const Y=[...l];Y[re]={...Y[re],[z]:ne,unitSpec:_||Y[re].unitSpec},d(Y)}else if(t==="trim"){const Y=[...u];Y[re]={...Y[re],[z]:ne,unitSpec:_||Y[re].unitSpec},m(Y)}else{const Y=[...h];Y[re]={...Y[re],[z]:ne,unitSpec:_||Y[re].unitSpec},x(Y)}q(null),D(""),$("")},I=()=>{q(null),D(""),$("")},ee=async()=>{if(!confirm("Reset all materials to defaults? This will delete all custom materials.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(gN),m(pN),x(xN),await V()):alert("Failed to reset configuration")},se=()=>{switch(t){case"siding":return l;case"trim":return u;case"accessories":return h}},de=()=>{switch(t){case"siding":return f;case"trim":return v;case"accessories":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Back to Pricing Calculator"}),e.jsx("span",{className:"sm:hidden",children:"Back"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Configure Siding Calculator"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Customize materials and pricing for your siding estimates"})]}),e.jsxs("button",{onClick:ee,className:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 w-full sm:w-auto",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsx("nav",{className:"flex gap-2 sm:gap-4 px-4 sm:px-6 min-w-max",children:["siding","trim","accessories"].map(re=>e.jsx("button",{onClick:()=>r(re),className:`py-3 sm:py-4 px-3 sm:px-4 border-b-2 font-medium text-sm whitespace-nowrap transition-colors ${t===re?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:re.charAt(0).toUpperCase()+re.slice(1)},re))})}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900 mb-4",children:"Default Materials"}),e.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-100 p-3 sm:p-4 space-y-2 sm:space-y-3",children:se().map((re,z)=>e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-3 px-3 bg-white rounded-md gap-2 sm:gap-0",children:e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-4 gap-2 sm:gap-4",children:[e.jsx("div",{className:"sm:col-span-1",children:Q?.index===z&&Q.field==="name"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:P,onChange:ne=>D(ne.target.value),className:"flex-1 px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:H,className:"text-green-600 hover:text-green-700",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:I,className:"text-red-600 hover:text-red-700",children:e.jsx(xt,{className:"w-4 h-4"})})]}):e.jsx("div",{onClick:()=>K(z,"name"),className:"font-medium text-sm sm:text-base text-gray-900 cursor-pointer hover:text-blue-600",children:re.name})}),e.jsx("div",{className:"sm:col-span-1",children:Q?.index===z&&Q.field==="price"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",step:"0.01",value:P,onChange:ne=>D(ne.target.value),className:"w-full sm:w-24 px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:!0}),e.jsx("button",{onClick:H,className:"text-green-600 hover:text-green-700",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:I,className:"text-red-600 hover:text-red-700",children:e.jsx(xt,{className:"w-4 h-4"})})]}):e.jsxs("div",{onClick:()=>K(z,"price"),className:"text-sm sm:text-base text-gray-700 cursor-pointer hover:text-blue-600",children:["$",re.price.toFixed(2)]})}),e.jsx("div",{className:"sm:col-span-2",children:Q?.index===z?e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 items-center",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("input",{type:"text",value:P,onChange:ne=>D(ne.target.value),className:"flex-1 px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",autoFocus:Q.field==="unit",placeholder:"Unit"})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:_,onChange:ne=>$(ne.target.value),className:"flex-1 px-2 py-1 text-sm border border-blue-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 1000 sq ft"}),e.jsx("button",{onClick:H,className:"text-green-600 hover:text-green-700",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:I,className:"text-red-600 hover:text-red-700",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsx("div",{onClick:()=>K(z,"unit"),className:"text-xs sm:text-sm text-gray-500 cursor-pointer hover:text-blue-600",children:te(re)})})]})},z))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 px-1",children:" Click on any value to edit. These are the default materials from the calculator."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3 mb-4",children:[e.jsx("h2",{className:"text-base sm:text-lg font-semibold text-gray-900",children:"Custom Materials"}),e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 w-full sm:w-auto",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add Material"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-3 sm:p-4 min-h-[120px]",children:de().length>0?e.jsx("div",{className:"space-y-2 sm:space-y-3",children:de().map(re=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between py-3 px-3 bg-white rounded-md gap-3 sm:gap-0",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-2 sm:gap-4",children:[e.jsx("div",{className:"font-medium text-sm sm:text-base text-gray-900",children:re.name}),e.jsxs("div",{className:"text-sm sm:text-base text-gray-700",children:["$",re.price.toFixed(2)]}),e.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:le(re.unit,re.metadata?.unitSpec)})]}),e.jsx("button",{onClick:()=>ie(re.id),className:"sm:ml-4 px-3 py-2 text-red-600 hover:bg-red-50 rounded-md transition-colors text-sm w-full sm:w-auto",children:"Delete"})]},re.id))}):e.jsx("div",{className:"text-center py-8 text-sm sm:text-base text-gray-500",children:'No custom materials added yet. Click "Add Material" to create your own.'})})]})]})]}),B&&e.jsx(cH,{category:t,onClose:()=>F(!1),onAdd:M})]})},bN=[{name:"Interior Paint - Economy",unit:"per gallon (400 sq ft coverage)",price:25.98,category:"paint",unitSpec:"400 sq ft coverage"},{name:"Interior Paint - Standard",unit:"per gallon (400 sq ft coverage)",price:35.98,category:"paint",unitSpec:"400 sq ft coverage"},{name:"Interior Paint - Premium",unit:"per gallon (400 sq ft coverage)",price:45.98,category:"paint",unitSpec:"400 sq ft coverage"},{name:"Exterior Paint - Economy",unit:"per gallon (350 sq ft coverage)",price:30.98,category:"paint",unitSpec:"350 sq ft coverage"},{name:"Exterior Paint - Standard",unit:"per gallon (350 sq ft coverage)",price:40.98,category:"paint",unitSpec:"350 sq ft coverage"},{name:"Exterior Paint - Premium",unit:"per gallon (350 sq ft coverage)",price:50.98,category:"paint",unitSpec:"350 sq ft coverage"}],yN=[{name:"Interior Primer",unit:"per gallon",price:25.98,category:"primer",unitSpec:""},{name:"Exterior Primer",unit:"per gallon",price:30.98,category:"primer",unitSpec:""}],vN=[{name:"Paint Roller Frame",unit:"per unit",price:8.98,category:"supplies",unitSpec:""},{name:"Roller Cover",unit:"per unit",price:4.98,category:"supplies",unitSpec:""},{name:"Paint Brush Set",unit:"per set",price:12.98,category:"supplies",unitSpec:""},{name:"Painter's Tape",unit:"per roll",price:6.98,category:"supplies",unitSpec:""},{name:"Drop Cloth",unit:"per unit",price:15.98,category:"supplies",unitSpec:""},{name:"Paint Tray",unit:"per unit",price:3.98,category:"supplies",unitSpec:""}],uH=({category:s,onClose:t,onAdd:r})=>{const[a,n]=p.useState(""),[i,o]=p.useState(0),[l,d]=p.useState("per gallon"),[u,m]=p.useState(""),[h,x]=p.useState(!1),f=async b=>{if(b.preventDefault(),!(!a||typeof i!="number")){x(!0);try{await r({name:a,price:i,unit:l,category:s,metadata:u?{unitSpec:u}:void 0})}catch(v){console.error("Error adding material:",v),alert("Failed to add material")}finally{x(!1)}}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Custom Material"}),e.jsxs("form",{onSubmit:f,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:a,onChange:b=>n(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,placeholder:"e.g., Premium Interior Paint - Eggshell"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:i,onChange:b=>o(parseFloat(b.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{value:l,onChange:b=>d(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"per gallon",children:"per gallon"}),e.jsx("option",{value:"per quart",children:"per quart"}),e.jsx("option",{value:"per unit",children:"per unit"}),e.jsx("option",{value:"per roll",children:"per roll"}),e.jsx("option",{value:"per set",children:"per set"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:u,onChange:b=>m(b.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",disabled:h,children:h?"Adding...":"Add Material"})]})]})]})})},AH=()=>{const s=Zt(),[t,r]=p.useState("paint"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(bN),[u,m]=p.useState(yN),[h,x]=p.useState(vN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(!1),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState("");p.useEffect(()=>{k()},[]);const k=async()=>{o(!0);try{const se=await Ve.getOrCreateConfig("paint");if(!se.success||!se.data){alert("Failed to load configuration");return}const de=se.data;if(n(de.id),de.is_configured){const re=await Ve.getMaterials(de.id);if(re.success&&re.data){const z=re.data.filter(ne=>!ne.is_archived);b(z.filter(ne=>ne.category==="paint")),j(z.filter(ne=>ne.category==="primer")),C(z.filter(ne=>ne.category==="supplies"))}}}catch(se){console.error("Error loading configuration:",se),alert("Failed to load configuration")}finally{o(!1)}},L=async se=>{if(!a)return;(await Ve.addMaterial(a,se)).success?(await k(),F(!1)):alert("Failed to add material")},E=async se=>{if(!confirm("Delete this custom material? This cannot be undone."))return;(await Ve.deleteMaterial(se)).success?await k():alert("Failed to delete material")},O=(se,de)=>{const re=t==="paint"?l:t==="primer"?u:h,z=de==="price"?re[se][de].toString():re[se][de];D(z),$(re[se].unitSpec||""),q({index:se,field:de})},le=()=>{if(!Q)return;const{index:se,field:de}=Q,re=de==="price"?parseFloat(P):P;if(t==="paint"){const z=[...l];z[se]={...z[se],[de]:re,unitSpec:_},d(z)}else if(t==="primer"){const z=[...u];z[se]={...z[se],[de]:re,unitSpec:_},m(z)}else{const z=[...h];z[se]={...z[se],[de]:re,unitSpec:_},x(z)}q(null),D(""),$("")},te=()=>{q(null),D(""),$("")},V=async()=>{if(!confirm("Reset all materials to defaults? This will delete all custom materials.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(bN),m(yN),x(vN),await k()):alert("Failed to reset configuration")},M=()=>{switch(t){case"paint":return l;case"primer":return u;case"supplies":return h}},ie=()=>{switch(t){case"paint":return f;case"primer":return v;case"supplies":return S}},K=[{value:"per gallon",label:"per gallon"},{value:"per quart",label:"per quart"},{value:"per unit",label:"per unit"},{value:"per roll",label:"per roll"},{value:"per set",label:"per set"}],H=se=>K.find(re=>re.label===se||re.value===se)?.value||"per gallon",I=(se,de)=>{const z=K.find(ne=>ne.value===se)?.label||"per gallon";return de?`${z} (${de})`:z},ee=se=>se.unitSpec?I(se.unit||H(se.unit),se.unitSpec):se.unit?.startsWith("per ")?se.unit:I(se.unit||H(se.unit));return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Paint Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your painting estimates"})]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["paint","primer","supplies"].map(se=>e.jsx("button",{onClick:()=>r(se),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===se?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:se.charAt(0).toUpperCase()+se.slice(1)},se))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Default Materials"}),e.jsx("div",{className:"bg-blue-50 rounded-lg border border-blue-100 p-4 space-y-3",children:M().map((se,de)=>e.jsx("div",{className:"flex items-center justify-between py-2 px-3 bg-white rounded-md",children:Q?.index===de?e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-4 items-center",children:[e.jsx("input",{type:"text",value:Q.field==="name"?P:se.name,onChange:re=>Q.field==="name"&&D(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",readOnly:Q.field!=="name"}),e.jsx("input",{type:"number",step:"0.01",value:Q.field==="price"?P:se.price,onChange:re=>Q.field==="price"&&D(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",readOnly:Q.field!=="price"}),e.jsx("input",{type:"text",value:Q.field==="unit"?P:se.unit,onChange:re=>Q.field==="unit"&&D(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",readOnly:Q.field!=="unit"}),e.jsx("input",{type:"text",value:_,onChange:re=>$(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:le,className:"text-green-600 hover:text-green-700",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:te,className:"text-red-600 hover:text-red-700",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4 items-center",children:[e.jsx("div",{onClick:()=>O(de,"name"),className:"font-medium text-gray-900 cursor-pointer hover:text-blue-600",children:se.name}),e.jsxs("div",{onClick:()=>O(de,"price"),className:"text-gray-700 cursor-pointer hover:text-blue-600",children:["$",se.price.toFixed(2)]}),e.jsx("div",{onClick:()=>O(de,"unit"),className:"text-sm text-gray-500 cursor-pointer hover:text-blue-600",children:ee(se)})]})},de))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Click on any value to edit. These are the default materials from the calculator."})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Custom Materials"}),e.jsxs("button",{onClick:()=>F(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add Material"]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-4 min-h-[120px]",children:ie().length>0?e.jsx("div",{className:"space-y-3",children:ie().map(se=>e.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-white rounded-md",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:se.name}),e.jsxs("div",{className:"text-gray-700",children:["$",se.price.toFixed(2)]}),e.jsx("div",{className:"text-sm text-gray-500",children:I(se.unit,se.metadata?.unitSpec)})]}),e.jsx("button",{onClick:()=>E(se.id),className:"ml-4 px-3 py-1 text-red-600 hover:bg-red-50 rounded-md transition-colors text-sm",children:"Delete"})]},se.id))}):e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No custom materials added yet. Click "Add Material" to create your own.'})})]})]})]}),B&&e.jsx(uH,{category:t,onClose:()=>F(!1),onAdd:L})]})},wN=[{name:'3/4" Oak Strip',unit:"per box (25 sq ft)",unitSpec:"",price:159.98,category:"flooring"},{name:'3/4" Oak Plank',unit:"per box (25 sq ft)",unitSpec:"",price:179.98,category:"flooring"},{name:'3/8" Engineered Oak',unit:"per box (22 sq ft)",unitSpec:"",price:129.98,category:"flooring"},{name:'1/2" Engineered Maple',unit:"per box (20 sq ft)",unitSpec:"",price:149.98,category:"flooring"},{name:"8mm Laminate",unit:"per box (22.5 sq ft)",unitSpec:"",price:49.98,category:"flooring"},{name:"12mm Laminate",unit:"per box (17.5 sq ft)",unitSpec:"",price:69.98,category:"flooring"},{name:"Luxury Vinyl Plank",unit:"per box (23.64 sq ft)",unitSpec:"",price:89.98,category:"flooring"},{name:"WPC Vinyl Plank",unit:"per box (19.2 sq ft)",unitSpec:"",price:109.98,category:"flooring"},{name:"Plush Carpet",unit:"per box (144 sq ft)",unitSpec:"",price:359.98,category:"flooring"},{name:"Berber Carpet",unit:"per box (144 sq ft)",unitSpec:"",price:299.98,category:"flooring"}],jN=[{name:"Standard Foam",unit:"per sqft",unitSpec:"",price:.45,category:"underlayment"},{name:"Premium Foam with Vapor Barrier",unit:"per sqft",unitSpec:"",price:.75,category:"underlayment"},{name:"Moisture Barrier",unit:"per sqft",unitSpec:"",price:.35,category:"underlayment"}],NN=[{name:"Quarter Round",unit:"per linear foot",unitSpec:"",price:2.5,category:"trim"},{name:"Baseboards",unit:"per linear foot",unitSpec:"",price:3.5,category:"trim"}],xm=[{value:"box",label:"per box"},{value:"square_foot",label:"per sqft"},{value:"square_yard",label:"per square yard"},{value:"linear_foot",label:"per linear foot"},{value:"plank",label:"per plank"},{value:"tile",label:"per tile"},{value:"roll",label:"per roll"},{value:"unit",label:"per unit"}],mH=()=>{const s=Zt(),[t,r]=p.useState("flooring"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(wN),[u,m]=p.useState(jN),[h,x]=p.useState(NN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(null),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("box"),[E,O]=p.useState(""),[le,te]=p.useState(!1),[V,M]=p.useState(""),[ie,K]=p.useState(0),[H,I]=p.useState("box"),[ee,se]=p.useState("");p.useEffect(()=>{de()},[]);const de=async()=>{o(!0);try{const U=await Ve.getOrCreateConfig("flooring");if(!U.success||!U.data){alert("Failed to load configuration");return}const fe=U.data;if(n(fe.id),fe.is_configured){const Se=await Ve.getMaterials(fe.id);if(Se.success&&Se.data){const Re=Se.data.filter(oe=>!oe.is_archived),G=Re.filter(oe=>oe.category==="flooring"),ue=Re.filter(oe=>oe.category==="underlayment"),ge=Re.filter(oe=>oe.category==="trim");b(G),j(ue),C(ge)}}}catch(U){console.error("Error loading configuration:",U),alert("Failed to load configuration")}finally{o(!1)}},re=(U,fe)=>{F(U),D(fe.name),$(fe.price),L(fe.unit||je(fe.unit)),O(fe.unitSpec||"")},z=U=>{q(U.id),D(U.name),$(U.price),L(U.unit),O(U.metadata?.unitSpec||"")},ne=()=>{F(null),q(null),D(""),$(0),L("box"),O("")},Y=async(U,fe)=>{if(!a)return;(await Ve.addMaterial(a,{name:P,price:_,unit:k,category:fe,metadata:E?{unitSpec:E}:void 0})).success?((fe==="flooring"?d:fe==="underlayment"?m:x)(G=>G.map((ue,ge)=>ge===U?{...ue,name:P,price:_,unit:ce(k)}:ue)),await de(),ne()):alert("Failed to update material")},X=async()=>{if(!Q)return;(await Ve.updateMaterial(Q,{name:P,price:_,unit:k,metadata:E?{unitSpec:E}:void 0})).success?(await de(),ne()):alert("Failed to update material")},ye=async()=>{if(!a||!V||typeof ie!="number")return;const U=t;(await Ve.addMaterial(a,{name:V,price:ie,unit:H,category:U,metadata:ee?{unitSpec:ee}:void 0})).success?(await de(),te(!1),M(""),K(0),I("box"),se("")):alert("Failed to add material")},pe=async U=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(U)).success?await de():alert("Failed to delete material")},Ce=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(wN),m(jN),x(NN),await de()):alert("Failed to reset configuration")},je=U=>xm.find(Se=>Se.label===U)?.value||"box",ce=(U,fe)=>{const Re=xm.find(G=>G.value===U)?.label||"per box";return fe?`${Re} (${fe})`:Re},Te=U=>U.unitSpec?ce(U.unit||je(U.unit),U.unitSpec):U.unit?.startsWith("per ")?U.unit:ce(U.unit||je(U.unit)),We=()=>{switch(t){case"flooring":return l;case"underlayment":return u;case"trim":return h}},Le=()=>{switch(t){case"flooring":return f;case"underlayment":return v;case"trim":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Flooring Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your flooring estimates"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["flooring","underlayment","trim"].map(U=>e.jsx("button",{onClick:()=>r(U),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===U?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:We().map((U,fe)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:B===fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:P,onChange:Se=>D(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:Se=>$(parseFloat(Se.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:k,onChange:Se=>L(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:xm.map(Se=>e.jsx("option",{value:Se.value,children:Se.label},Se.value))}),e.jsx("input",{type:"text",value:E,onChange:Se=>O(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Y(fe,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",Te(U)]})]}),e.jsx("button",{onClick:()=>re(fe,U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},fe))}),Le().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Le().map(U=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:Q===U.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:P,onChange:fe=>D(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:fe=>$(parseFloat(fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:k,onChange:fe=>L(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:xm.map(fe=>e.jsx("option",{value:fe.value,children:fe.label},fe.value))}),e.jsx("input",{type:"text",value:E,onChange:fe=>O(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",ce(U.unit,U.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},U.id))})]}),Le().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:V,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="flooring"?"e.g., Premium Hardwood":t==="underlayment"?"e.g., Premium Moisture Barrier":"e.g., Crown Molding"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ie,onChange:U=>K(parseFloat(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:H,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:xm.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ee,onChange:U=>se(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Specify the quantity (e.g., "25 sq ft" for a box)'})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{te(!1),M(""),K(0),I("box"),se("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!V||typeof ie!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},CN=[{name:"Modified Thinset Mortar",unit:"per 50lb bag",price:24.98,category:"mortar",unitSpec:"50lb bag"},{name:"Unmodified Thinset Mortar",unit:"per 50lb bag",price:19.98,category:"mortar",unitSpec:"50lb bag"},{name:"Epoxy Mortar",unit:"per 50lb bag",price:89.98,category:"mortar",unitSpec:"50lb bag"}],SN=[{name:"Sanded Grout",unit:"per 25lb bag",price:19.98,category:"grout",unitSpec:"25lb bag"},{name:"Unsanded Grout",unit:"per 25lb bag",price:22.98,category:"grout",unitSpec:"25lb bag"},{name:"Epoxy Grout",unit:"per 25lb bag",price:79.98,category:"grout",unitSpec:"25lb bag"}],BN=[{name:"Tile Spacers",unit:"per bag",price:8.98,category:"supplies",unitSpec:"bag"},{name:"Grout Sealer",unit:"per bottle",price:24.98,category:"supplies",unitSpec:"bottle"},{name:"Tile Saw Blade",unit:"per blade",price:34.98,category:"supplies",unitSpec:"blade"}],bm=[{value:"bag",label:"per bag"},{value:"bottle",label:"per bottle"},{value:"box",label:"per box"},{value:"piece",label:"per piece"},{value:"square_foot",label:"per square foot"},{value:"unit",label:"per unit"}],hH=()=>{const s=Zt(),[t,r]=p.useState("mortar"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(CN),[u,m]=p.useState(SN),[h,x]=p.useState(BN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(null),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("bag"),[E,O]=p.useState(""),[le,te]=p.useState(!1),[V,M]=p.useState(""),[ie,K]=p.useState(0),[H,I]=p.useState("bag"),[ee,se]=p.useState("");p.useEffect(()=>{de()},[]);const de=async()=>{o(!0);try{const U=await Ve.getOrCreateConfig("tile");if(!U.success||!U.data){alert("Failed to load configuration");return}const fe=U.data;if(n(fe.id),fe.is_configured){const Se=await Ve.getMaterials(fe.id);if(Se.success&&Se.data){const Re=Se.data.filter(oe=>!oe.is_archived),G=Re.filter(oe=>oe.category==="mortar"),ue=Re.filter(oe=>oe.category==="grout"),ge=Re.filter(oe=>oe.category==="supplies");b(G),j(ue),C(ge)}}}catch(U){console.error("Error loading configuration:",U),alert("Failed to load configuration")}finally{o(!1)}},re=(U,fe)=>{F(U),D(fe.name),$(fe.price),L(je(fe.unit)),O(fe.unitSpec||"")},z=U=>{q(U.id),D(U.name),$(U.price),L(U.unit),O(U.metadata?.unitSpec||"")},ne=()=>{F(null),q(null),D(""),$(0),L("bag"),O("")},Y=async(U,fe)=>{if(!a)return;(await Ve.addMaterial(a,{name:P,price:_,unit:k,category:fe,metadata:E?{unitSpec:E}:void 0})).success?((fe==="mortar"?d:fe==="grout"?m:x)(G=>G.map((ue,ge)=>ge===U?{...ue,name:P,price:_,unit:ce(k)}:ue)),await de(),ne()):alert("Failed to update material")},X=async()=>{if(!Q)return;const U=[...f,...v,...S].find(Se=>Se.id===Q);(await Ve.updateMaterial(Q,{name:P,price:_,unit:k,metadata:{...U?.metadata,unitSpec:E}})).success?(await de(),ne()):alert("Failed to update material")},ye=async()=>{if(!a||!V||typeof ie!="number")return;const U=t;(await Ve.addMaterial(a,{name:V,price:ie,unit:H,category:U,metadata:ee?{unitSpec:ee}:void 0})).success?(await de(),te(!1),M(""),K(0),I("bag"),se("")):alert("Failed to add material")},pe=async U=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(U)).success?await de():alert("Failed to delete material")},Ce=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(CN),m(SN),x(BN),await de()):alert("Failed to reset configuration")},je=U=>bm.find(Se=>Se.label===U)?.value||"bag",ce=(U,fe)=>{const Re=bm.find(G=>G.value===U)?.label||"per bag";return fe?`${Re} (${fe})`:Re},Te=U=>U.unitSpec?ce(U.unit||je(U.unit),U.unitSpec):U.unit?.startsWith("per ")?U.unit:ce(U.unit||je(U.unit)),We=()=>{switch(t){case"mortar":return l;case"grout":return u;case"supplies":return h}},Le=()=>{switch(t){case"mortar":return f;case"grout":return v;case"supplies":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Tile Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your tile installation estimates"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["mortar","grout","supplies"].map(U=>e.jsx("button",{onClick:()=>r(U),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===U?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:We().map((U,fe)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:B===fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:Se=>D(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:Se=>$(parseFloat(Se.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:k,onChange:Se=>L(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:bm.map(Se=>e.jsx("option",{value:Se.value,children:Se.label},Se.value))}),e.jsx("input",{type:"text",value:E,onChange:Se=>O(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Y(fe,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",Te(U)]})]}),e.jsx("button",{onClick:()=>re(fe,U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},fe))}),Le().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Le().map(U=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:Q===U.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:fe=>D(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:fe=>$(parseFloat(fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:k,onChange:fe=>L(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:bm.map(fe=>e.jsx("option",{value:fe.value,children:fe.label},fe.value))}),e.jsx("input",{type:"text",value:E,onChange:fe=>O(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",ce(U.unit,U.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},U.id))})]}),Le().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:V,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="mortar"?"e.g., Premium Mortar Mix":t==="grout"?"e.g., Waterproof Grout":"e.g., Professional Tile Tools"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ie,onChange:U=>K(parseFloat(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:H,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:bm.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ee,onChange:U=>se(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{te(!1),M(""),K(0),I("bag"),se("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!V||typeof ie!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},kN=[{name:'1/2" Drywall Sheet',unit:"per sheet",price:15.98,category:"sheets",unitSpec:"4x8 ft"},{name:'5/8" Drywall Sheet',unit:"per sheet",price:17.98,category:"sheets",unitSpec:"4x8 ft"}],FN=[{name:"Joint Compound (Mud)",unit:"per 5-gallon bucket",price:19.98,category:"finishing",unitSpec:"5 gallons"},{name:"Paper Tape",unit:"per roll",price:4.98,category:"finishing",unitSpec:"250 ft"},{name:"Mesh Tape",unit:"per roll",price:6.98,category:"finishing",unitSpec:"150 ft"}],EN=[{name:"Drywall Screws",unit:"per box",price:8.98,category:"fasteners",unitSpec:"1 lb box"}],ym=[{value:"sheet",label:"per sheet"},{value:"panel",label:"per panel"},{value:"bucket",label:"per bucket"},{value:"roll",label:"per roll"},{value:"box",label:"per box"},{value:"unit",label:"per unit"}],fH=()=>{const s=Zt(),[t,r]=p.useState("sheets"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(kN),[u,m]=p.useState(FN),[h,x]=p.useState(EN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(null),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("sheet"),[E,O]=p.useState(""),[le,te]=p.useState(!1),[V,M]=p.useState(""),[ie,K]=p.useState(0),[H,I]=p.useState("sheet"),[ee,se]=p.useState("");p.useEffect(()=>{de()},[]);const de=async()=>{o(!0);try{const U=await Ve.getOrCreateConfig("drywall");if(!U.success||!U.data){alert("Failed to load configuration");return}const fe=U.data;if(n(fe.id),fe.is_configured){const Se=await Ve.getMaterials(fe.id);if(Se.success&&Se.data){const Re=Se.data.filter(oe=>!oe.is_archived),G=Re.filter(oe=>oe.category==="sheets"),ue=Re.filter(oe=>oe.category==="finishing"),ge=Re.filter(oe=>oe.category==="fasteners");b(G),j(ue),C(ge)}}}catch(U){console.error("Error loading configuration:",U),alert("Failed to load configuration")}finally{o(!1)}},re=(U,fe)=>{F(U),D(fe.name),$(fe.price),L(je(fe.unit)),O(fe.unitSpec||"")},z=U=>{q(U.id),D(U.name),$(U.price),L(U.unit),O(U.metadata?.unitSpec||"")},ne=()=>{F(null),q(null),D(""),$(0),L("sheet"),O("")},Y=async(U,fe)=>{if(!a)return;(await Ve.addMaterial(a,{name:P,price:_,unit:k,category:fe,metadata:E?{unitSpec:E}:void 0})).success?((fe==="sheets"?d:fe==="finishing"?m:x)(G=>G.map((ue,ge)=>ge===U?{...ue,name:P,price:_,unit:ce(k)}:ue)),await de(),ne()):alert("Failed to update material")},X=async()=>{if(!Q)return;const U=[...f,...v,...S].find(Se=>Se.id===Q);(await Ve.updateMaterial(Q,{name:P,price:_,unit:k,metadata:{...U?.metadata,unitSpec:E}})).success?(await de(),ne()):alert("Failed to update material")},ye=async()=>{if(!a||!V||typeof ie!="number")return;const U=t;(await Ve.addMaterial(a,{name:V,price:ie,unit:H,category:U,metadata:ee?{unitSpec:ee}:void 0})).success?(await de(),te(!1),M(""),K(0),I("sheet"),se("")):alert("Failed to add material")},pe=async U=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(U)).success?await de():alert("Failed to delete material")},Ce=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(kN),m(FN),x(EN),await de()):alert("Failed to reset configuration")},je=U=>ym.find(Se=>Se.label===U)?.value||"sheet",ce=(U,fe)=>{const Re=ym.find(G=>G.value===U)?.label||"per sheet";return fe?`${Re} (${fe})`:Re},Te=U=>U.unitSpec?ce(U.unit||je(U.unit),U.unitSpec):U.unit?.startsWith("per ")?U.unit:ce(U.unit||je(U.unit)),We=()=>{switch(t){case"sheets":return l;case"finishing":return u;case"fasteners":return h}},Le=()=>{switch(t){case"sheets":return f;case"finishing":return v;case"fasteners":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Drywall Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your drywall installation estimates"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["sheets","finishing","fasteners"].map(U=>e.jsx("button",{onClick:()=>r(U),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===U?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:We().map((U,fe)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:B===fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:Se=>D(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:Se=>$(parseFloat(Se.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:k,onChange:Se=>L(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:ym.map(Se=>e.jsx("option",{value:Se.value,children:Se.label},Se.value))}),e.jsx("input",{type:"text",value:E,onChange:Se=>O(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Y(fe,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",Te(U)]})]}),e.jsx("button",{onClick:()=>re(fe,U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},fe))}),Le().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Le().map(U=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:Q===U.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:fe=>D(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:fe=>$(parseFloat(fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:k,onChange:fe=>L(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:ym.map(fe=>e.jsx("option",{value:fe.value,children:fe.label},fe.value))}),e.jsx("input",{type:"text",value:E,onChange:fe=>O(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",ce(U.unit,U.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},U.id))})]}),Le().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:V,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="sheets"?'e.g., 1/4" Drywall Sheet':t==="finishing"?"e.g., Premium Joint Compound":"e.g., Drywall Nails"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ie,onChange:U=>K(parseFloat(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:H,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:ym.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ee,onChange:U=>se(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{te(!1),M(""),K(0),I("sheet"),se("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!V||typeof ie!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},_N=[{name:"Wood Post",unit:"per post",price:24.98,category:"posts",unitSpec:"8 ft height"},{name:"Vinyl 5x5 Post",unit:"per post",price:42,category:"posts",unitSpec:"8 ft height"},{name:"Vinyl 4x4 Post",unit:"per post",price:27,category:"posts",unitSpec:"8 ft height"},{name:"Metal Post",unit:"per post",price:42,category:"posts",unitSpec:"8 ft height"}],PN=[{name:"Privacy Fence - Wood Panel",unit:"per panel",price:45.98,category:"panels",unitSpec:"6 ft x 8 ft"},{name:"Privacy Fence - Vinyl Panel",unit:"per panel",price:89.98,category:"panels",unitSpec:"6 ft x 8 ft"},{name:"Privacy Fence - Metal Panel",unit:"per panel",price:79.98,category:"panels",unitSpec:"6 ft x 8 ft"},{name:"Privacy Fence - Composite Panel",unit:"per panel",price:129.98,category:"panels",unitSpec:"6 ft x 8 ft"},{name:"Picket Fence - Wood Picket",unit:"per picket",price:2.98,category:"panels",unitSpec:"3.5 ft height"},{name:"Picket Fence - Vinyl Picket",unit:"per picket",price:4.98,category:"panels",unitSpec:"3.5 ft height"},{name:"Picket Fence - Metal Picket",unit:"per picket",price:3.98,category:"panels",unitSpec:"3.5 ft height"},{name:"Picket Fence - Composite Picket",unit:"per picket",price:6.98,category:"panels",unitSpec:"3.5 ft height"},{name:"Chain-Link Fabric",unit:"per sq ft",price:5.98,category:"panels",unitSpec:"50 ft roll"},{name:"Ranch Rail - Wood",unit:"per rail",price:14.98,category:"panels",unitSpec:"8 ft length"},{name:"Ranch Rail - Vinyl",unit:"per rail",price:24.98,category:"panels",unitSpec:"8 ft length"},{name:"Wood Panel (8ft)",unit:"per panel",price:69.98,category:"panels",unitSpec:"6 ft x 8 ft"},{name:"Vinyl Panel (8ft)",unit:"per panel",price:129.98,category:"panels",unitSpec:"6 ft x 8 ft"},{name:"Composite Panel (8ft)",unit:"per panel",price:189.98,category:"panels",unitSpec:"6 ft x 8 ft"}],IN=[{name:"Single Gate - Wood",unit:"per gate",price:129.98,category:"gates",unitSpec:"4 ft x 6 ft"},{name:"Single Gate - Vinyl",unit:"per gate",price:199.98,category:"gates",unitSpec:"4 ft x 6 ft"},{name:"Single Gate - Metal",unit:"per gate",price:169.98,category:"gates",unitSpec:"4 ft x 6 ft"},{name:"Single Gate - Composite",unit:"per gate",price:249.98,category:"gates",unitSpec:"4 ft x 6 ft"},{name:"Double Gate - Wood",unit:"per gate",price:249.98,category:"gates",unitSpec:"8 ft x 6 ft"},{name:"Double Gate - Vinyl",unit:"per gate",price:399.98,category:"gates",unitSpec:"8 ft x 6 ft"},{name:"Double Gate - Metal",unit:"per gate",price:329.98,category:"gates",unitSpec:"8 ft x 6 ft"},{name:"Double Gate - Composite",unit:"per gate",price:499.98,category:"gates",unitSpec:"8 ft x 6 ft"},{name:"Rolling Gate - Wood",unit:"per gate",price:399.98,category:"gates",unitSpec:"12 ft x 6 ft"},{name:"Rolling Gate - Vinyl",unit:"per gate",price:599.98,category:"gates",unitSpec:"12 ft x 6 ft"},{name:"Rolling Gate - Metal",unit:"per gate",price:499.98,category:"gates",unitSpec:"12 ft x 6 ft"},{name:"Rolling Gate - Composite",unit:"per gate",price:799.98,category:"gates",unitSpec:"12 ft x 6 ft"}],UN=[{name:"Concrete Mix (60lb bag)",unit:"per bag",price:6.98,category:"components",unitSpec:"60 lb bag"},{name:"Post Spike",unit:"per piece",price:12.98,category:"components",unitSpec:"standard 4x4"},{name:"Mounting Bracket",unit:"per piece",price:14.98,category:"components",unitSpec:"heavy duty"},{name:"Kickboard (8ft)",unit:"per piece",price:8.98,category:"components",unitSpec:"8 ft x 6 in"},{name:"Gate Hardware - Single",unit:"per set",price:49.98,category:"components",unitSpec:"hinges & latch"},{name:"Gate Hardware - Double",unit:"per set",price:89.98,category:"components",unitSpec:"hinges & latch"},{name:"Gate Hardware - Rolling",unit:"per set",price:149.98,category:"components",unitSpec:"track & wheels"}],vm=[{value:"post",label:"per post"},{value:"panel",label:"per panel"},{value:"picket",label:"per picket"},{value:"rail",label:"per rail"},{value:"gate",label:"per gate"},{value:"linear_foot",label:"per linear foot"},{value:"sq_ft",label:"per sq ft"},{value:"piece",label:"per piece"},{value:"bag",label:"per bag"},{value:"set",label:"per set"},{value:"unit",label:"per unit"}],gH=()=>{const s=Zt(),[t,r]=p.useState("posts"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(_N),[u,m]=p.useState(PN),[h,x]=p.useState(IN),[f,b]=p.useState(UN),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState(null),[_,$]=p.useState(null),[k,L]=p.useState(""),[E,O]=p.useState(0),[le,te]=p.useState("post"),[V,M]=p.useState(""),[ie,K]=p.useState(!1),[H,I]=p.useState(""),[ee,se]=p.useState(0),[de,re]=p.useState("post"),[z,ne]=p.useState("");p.useEffect(()=>{Y()},[]);const Y=async()=>{o(!0);try{const G=await Ve.getOrCreateConfig("fencing");if(!G.success||!G.data){alert("Failed to load configuration");return}const ue=G.data;if(n(ue.id),ue.is_configured){const ge=await Ve.getMaterials(ue.id);if(ge.success&&ge.data){const oe=ge.data.filter(Ie=>!Ie.is_archived),J=oe.filter(Ie=>Ie.category==="posts"),Ae=oe.filter(Ie=>Ie.category==="panels"),Fe=oe.filter(Ie=>Ie.category==="gates"),Qe=oe.filter(Ie=>Ie.category==="components");j(J),C(Ae),F(Fe),q(Qe)}}}catch(G){console.error("Error loading configuration:",G),alert("Failed to load configuration")}finally{o(!1)}},X=(G,ue)=>{D(G),L(ue.name),O(ue.price),te(Le(ue.unit)),M(ue.unitSpec||"")},ye=G=>{$(G.id),L(G.name),O(G.price),te(G.unit),M(G.metadata?.unitSpec||"")},pe=()=>{D(null),$(null),L(""),O(0),te("post"),M("")},Ce=async(G,ue)=>{if(!a)return;(await Ve.addMaterial(a,{name:k,price:E,unit:le,category:ue,metadata:V?{unitSpec:V}:void 0})).success?((ue==="posts"?d:ue==="panels"?m:ue==="gates"?x:b)(J=>J.map((Ae,Fe)=>Fe===G?{...Ae,name:k,price:E,unit:U(le)}:Ae)),await Y(),pe()):alert("Failed to update material")},je=async()=>{if(!_)return;const G=[...v,...S,...B,...Q].find(ge=>ge.id===_);(await Ve.updateMaterial(_,{name:k,price:E,unit:le,metadata:{...G?.metadata,unitSpec:V}})).success?(await Y(),pe()):alert("Failed to update material")},ce=async()=>{if(!a||!H||typeof ee!="number")return;const G=t;(await Ve.addMaterial(a,{name:H,price:ee,unit:de,category:G,metadata:z?{unitSpec:z}:void 0})).success?(await Y(),K(!1),I(""),se(0),re("post"),ne("")):alert("Failed to add material")},Te=async G=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(G)).success?await Y():alert("Failed to delete material")},We=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(_N),m(PN),x(IN),b(UN),await Y()):alert("Failed to reset configuration")},Le=G=>vm.find(ge=>ge.label===G)?.value||"post",U=(G,ue)=>{const oe=vm.find(J=>J.value===G)?.label||"per post";return ue?`${oe} (${ue})`:oe},fe=G=>G.unitSpec?U(G.unit||Le(G.unit),G.unitSpec):G.unit?.startsWith("per ")?G.unit:U(G.unit||Le(G.unit)),Se=()=>{switch(t){case"posts":return l;case"panels":return u;case"gates":return h;case"components":return f}},Re=()=>{switch(t){case"posts":return v;case"panels":return S;case"gates":return B;case"components":return Q}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Fencing Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your fencing estimates"})]}),e.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["posts","panels","gates","components"].map(G=>e.jsx("button",{onClick:()=>r(G),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===G?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:G.charAt(0).toUpperCase()+G.slice(1)},G))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:Se().map((G,ue)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:P===ue?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ge=>L(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ge=>O(parseFloat(ge.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:le,onChange:ge=>te(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:vm.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))}),e.jsx("input",{type:"text",value:V,onChange:ge=>M(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Ce(ue,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",fe(G)]})]}),e.jsx("button",{onClick:()=>X(ue,G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},ue))}),Re().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Re().map(G=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:_===G.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ue=>L(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ue=>O(parseFloat(ue.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:le,onChange:ue=>te(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:vm.map(ue=>e.jsx("option",{value:ue.value,children:ue.label},ue.value))}),e.jsx("input",{type:"text",value:V,onChange:ue=>M(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:je,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",U(G.unit,G.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ye(G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Te(G.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},G.id))})]}),Re().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:H,onChange:G=>I(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="posts"?"e.g., Premium Cedar Post":t==="panels"?"e.g., Custom Wood Panel":t==="gates"?"e.g., Decorative Iron Gate":"e.g., Premium Gate Hardware"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ee,onChange:G=>se(parseFloat(G.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:de,onChange:G=>re(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:vm.map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:z,onChange:G=>ne(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{K(!1),I(""),se(0),re("post"),ne("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:!H||typeof ee!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},LN=[{name:"Base Material",unit:"per cubic yard",price:45,category:"base",unitSpec:""}],TN=[{name:"Sand",unit:"per cubic yard",price:55,category:"bedding",unitSpec:""},{name:"Stone Dust",unit:"per cubic yard",price:55,category:"bedding",unitSpec:""},{name:'3/8" Stone',unit:"per cubic yard",price:55,category:"bedding",unitSpec:""}],DN=[{name:"Edge Blocks 4x8",unit:"per piece",price:1.5,category:"edging",unitSpec:""},{name:"Edge Blocks 6x9",unit:"per piece",price:2,category:"edging",unitSpec:""},{name:"Edge Blocks 6x12",unit:"per piece",price:2.25,category:"edging",unitSpec:""},{name:"Edge Blocks Custom",unit:"per piece",price:2,category:"edging",unitSpec:""}],MN=[{name:"Polymeric Sand",unit:"per 60lb bag",price:45,category:"pavers",unitSpec:""}],wm=[{value:"cubic_yard",label:"per cubic yard"},{value:"bag",label:"per 60lb bag"},{value:"piece",label:"per piece"},{value:"square_foot",label:"per square foot"},{value:"pallet",label:"per pallet"},{value:"unit",label:"per unit"}],pH=()=>{const s=Zt(),[t,r]=p.useState("base"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(LN),[u,m]=p.useState(TN),[h,x]=p.useState(DN),[f,b]=p.useState(MN),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState(null),[_,$]=p.useState(null),[k,L]=p.useState(""),[E,O]=p.useState(0),[le,te]=p.useState("cubic_yard"),[V,M]=p.useState(""),[ie,K]=p.useState(!1),[H,I]=p.useState(""),[ee,se]=p.useState(0),[de,re]=p.useState("cubic_yard"),[z,ne]=p.useState("");p.useEffect(()=>{Y()},[]);const Y=async()=>{o(!0);try{const G=await Ve.getOrCreateConfig("pavers");if(!G.success||!G.data){alert("Failed to load configuration");return}const ue=G.data;if(n(ue.id),ue.is_configured){const ge=await Ve.getMaterials(ue.id);if(ge.success&&ge.data){const oe=ge.data.filter(Ie=>!Ie.is_archived),J=oe.filter(Ie=>Ie.category==="base"),Ae=oe.filter(Ie=>Ie.category==="bedding"),Fe=oe.filter(Ie=>Ie.category==="edging"),Qe=oe.filter(Ie=>Ie.category==="pavers");j(J),C(Ae),F(Fe),q(Qe)}}}catch(G){console.error("Error loading configuration:",G),alert("Failed to load configuration")}finally{o(!1)}},X=(G,ue)=>{D(G),L(ue.name),O(ue.price),te(Le(ue.unit)),M(ue.unitSpec||"")},ye=G=>{$(G.id),L(G.name),O(G.price),te(G.unit),M(G.metadata?.unitSpec||"")},pe=()=>{D(null),$(null),L(""),O(0),te("cubic_yard"),M("")},Ce=async(G,ue)=>{if(!a)return;(await Ve.addMaterial(a,{name:k,price:E,unit:le,category:ue,metadata:V?{unitSpec:V}:void 0})).success?((ue==="base"?d:ue==="bedding"?m:ue==="edging"?x:b)(J=>J.map((Ae,Fe)=>Fe===G?{...Ae,name:k,price:E,unit:U(le)}:Ae)),await Y(),pe()):alert("Failed to update material")},je=async()=>{if(!_)return;const ue=Re().find(oe=>oe.id===_);(await Ve.updateMaterial(_,{name:k,price:E,unit:le,metadata:{...ue?.metadata,unitSpec:V}})).success?(await Y(),pe()):alert("Failed to update material")},ce=async()=>{if(!a||!H||typeof ee!="number")return;const G=t;(await Ve.addMaterial(a,{name:H,price:ee,unit:de,category:G,metadata:z?{unitSpec:z}:void 0})).success?(await Y(),K(!1),I(""),se(0),re("cubic_yard"),ne("")):alert("Failed to add material")},Te=async G=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(G)).success?await Y():alert("Failed to delete material")},We=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(LN),m(TN),x(DN),b(MN),await Y()):alert("Failed to reset configuration")},Le=G=>wm.find(ge=>ge.label===G)?.value||"cubic_yard",U=(G,ue)=>{const oe=wm.find(J=>J.value===G)?.label||"per cubic yard";return ue?`${oe} (${ue})`:oe},fe=G=>G.unitSpec?U(G.unit||Le(G.unit),G.unitSpec):G.unit?.startsWith("per ")?G.unit:U(G.unit||Le(G.unit)),Se=()=>{switch(t){case"base":return l;case"bedding":return u;case"edging":return h;case"pavers":return f}},Re=()=>{switch(t){case"base":return v;case"bedding":return S;case"edging":return B;case"pavers":return Q}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Pavers Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your paver installation estimates"})]}),e.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["base","bedding","edging","pavers"].map(G=>e.jsx("button",{onClick:()=>r(G),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===G?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:G.charAt(0).toUpperCase()+G.slice(1)},G))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:Se().map((G,ue)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:P===ue?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ge=>L(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ge=>O(parseFloat(ge.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:le,onChange:ge=>te(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:wm.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))}),e.jsx("input",{type:"text",value:V,onChange:ge=>M(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Ce(ue,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",fe(G)]})]}),e.jsx("button",{onClick:()=>X(ue,G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},ue))}),Re().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Re().map(G=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:_===G.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ue=>L(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ue=>O(parseFloat(ue.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:le,onChange:ue=>te(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:wm.map(ue=>e.jsx("option",{value:ue.value,children:ue.label},ue.value))}),e.jsx("input",{type:"text",value:V,onChange:ue=>M(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:je,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",U(G.unit,G.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ye(G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Te(G.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},G.id))})]}),Re().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:H,onChange:G=>I(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="base"?"e.g., Crushed Stone Base":t==="bedding"?"e.g., Premium Bedding Sand":t==="edging"?"e.g., Custom Edge Blocks":"e.g., Premium Joint Sand"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ee,onChange:G=>se(parseFloat(G.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:de,onChange:G=>re(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:wm.map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:z,onChange:G=>ne(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{K(!1),I(""),se(0),re("cubic_yard"),ne("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:!H||typeof ee!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},RN=[{name:"Natural Stone Veneer",unit:"per square foot",price:12.5,category:"veneer",unitSpec:"100 sq ft"},{name:"Manufactured Stone Veneer",unit:"per square foot",price:8.5,category:"veneer",unitSpec:"100 sq ft"},{name:"Thin Brick Veneer",unit:"per square foot",price:10,category:"veneer",unitSpec:"100 sq ft"},{name:"Ledgestone Veneer",unit:"per square foot",price:15,category:"veneer",unitSpec:"100 sq ft"},{name:"Stacked Stone Veneer",unit:"per square foot",price:14,category:"veneer",unitSpec:"100 sq ft"}],QN=[{name:"Mortar Mix",unit:"per bag",price:8.98,category:"adhesive",unitSpec:"80 lb bag"},{name:"Veneer Adhesive",unit:"per gallon",price:24.98,category:"adhesive",unitSpec:"5 gallon"},{name:"Grout",unit:"per bag",price:12.98,category:"adhesive",unitSpec:"25 lb bag"}],jm=[{value:"square_foot",label:"per square foot"},{value:"bag",label:"per bag"},{value:"gallon",label:"per gallon"},{value:"box",label:"per box"},{value:"unit",label:"per unit"},{value:"linear_foot",label:"per linear foot"}],xH=()=>{const s=Zt(),[t,r]=p.useState("veneer"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(RN),[u,m]=p.useState(QN),[h,x]=p.useState([]),[f,b]=p.useState([]),[v,j]=p.useState(null),[S,C]=p.useState(null),[B,F]=p.useState(""),[Q,q]=p.useState(0),[P,D]=p.useState("square_foot"),[_,$]=p.useState(""),[k,L]=p.useState(!1),[E,O]=p.useState(""),[le,te]=p.useState(0),[V,M]=p.useState("square_foot"),[ie,K]=p.useState("");p.useEffect(()=>{H()},[]);const H=async()=>{o(!0);try{const ce=await Ve.getOrCreateConfig("veneer");if(!ce.success||!ce.data){alert("Failed to load configuration");return}const Te=ce.data;if(n(Te.id),Te.is_configured){const We=await Ve.getMaterials(Te.id);if(We.success&&We.data){const Le=We.data.filter(Se=>!Se.is_archived),U=Le.filter(Se=>Se.category==="veneer"),fe=Le.filter(Se=>Se.category==="adhesive");x(U),b(fe)}}}catch(ce){console.error("Error loading configuration:",ce),alert("Failed to load configuration")}finally{o(!1)}},I=(ce,Te)=>{j(ce),F(Te.name),q(Te.price),D(X(Te.unit)),$(Te.unitSpec||"")},ee=ce=>{C(ce.id),F(ce.name),q(ce.price),D(ce.unit),$(ce.metadata?.unitSpec||"")},se=()=>{j(null),C(null),F(""),q(0),D("square_foot"),$("")},de=async(ce,Te)=>{if(!a)return;(await Ve.addMaterial(a,{name:B,price:Q,unit:P,category:Te,metadata:_?{unitSpec:_}:void 0})).success?((Te==="veneer"?d:m)(U=>U.map((fe,Se)=>Se===ce?{...fe,name:B,price:Q,unit:ye(P),unitSpec:_}:fe)),await H(),se()):alert("Failed to update material")},re=async()=>{if(!S)return;const ce=[...h,...f].find(We=>We.id===S);(await Ve.updateMaterial(S,{name:B,price:Q,unit:P,metadata:{...ce?.metadata,unitSpec:_}})).success?(await H(),se()):alert("Failed to update material")},z=async()=>{if(!a||!E||typeof le!="number")return;const ce=t;(await Ve.addMaterial(a,{name:E,price:le,unit:V,category:ce,metadata:ie?{unitSpec:ie}:void 0})).success?(await H(),L(!1),O(""),te(0),M("square_foot"),K("")):alert("Failed to add material")},ne=async ce=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(ce)).success?await H():alert("Failed to delete material")},Y=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(RN),m(QN),await H()):alert("Failed to reset configuration")},X=ce=>jm.find(We=>We.label===ce)?.value||"square_foot",ye=(ce,Te)=>{const Le=jm.find(U=>U.value===ce)?.label||"per square foot";return Te?`${Le} (${Te})`:Le},pe=ce=>ce.unitSpec?ye(ce.unit||X(ce.unit),ce.unitSpec):ce.unit?.startsWith("per ")?ce.unit:ye(ce.unit||X(ce.unit)),Ce=()=>{switch(t){case"veneer":return l;case"adhesive":return u}},je=()=>{switch(t){case"veneer":return h;case"adhesive":return f}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Veneer Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your veneer estimates"})]}),e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["veneer","adhesive"].map(ce=>e.jsx("button",{onClick:()=>r(ce),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===ce?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:ce.charAt(0).toUpperCase()+ce.slice(1)},ce))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>L(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:Ce().map((ce,Te)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:v===Te?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:B,onChange:We=>F(We.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:Q,onChange:We=>q(parseFloat(We.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:P,onChange:We=>D(We.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:jm.map(We=>e.jsx("option",{value:We.value,children:We.label},We.value))}),e.jsx("input",{type:"text",value:_,onChange:We=>$(We.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>de(Te,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:se,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ce.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",ce.price.toFixed(2)," ",pe(ce)]})]}),e.jsx("button",{onClick:()=>I(Te,ce),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},Te))}),je().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:je().map(ce=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:S===ce.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:B,onChange:Te=>F(Te.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:Q,onChange:Te=>q(parseFloat(Te.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:P,onChange:Te=>D(Te.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:jm.map(Te=>e.jsx("option",{value:Te.value,children:Te.label},Te.value))}),e.jsx("input",{type:"text",value:_,onChange:Te=>$(Te.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:re,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:se,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:ce.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",ce.price.toFixed(2)," ",ye(ce.unit,ce.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ee(ce),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ne(ce.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},ce.id))})]}),je().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:E,onChange:ce=>O(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="veneer"?"e.g., Premium Stone Veneer":"e.g., Premium Mortar"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:le,onChange:ce=>te(parseFloat(ce.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:V,onChange:ce=>M(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:jm.map(ce=>e.jsx("option",{value:ce.value,children:ce.label},ce.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ie,onChange:ce=>K(ce.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{L(!1),O(""),te(0),M("square_foot"),K("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:z,disabled:!E||typeof le!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},ON=[{name:"Condenser Unit",unit:"per ton",price:1200,category:"equipment",unitSpec:"1-5 ton capacity"},{name:"Air Handler",unit:"per ton",price:800,category:"equipment",unitSpec:"1-5 ton capacity"},{name:"Package Unit",unit:"per ton",price:1800,category:"equipment",unitSpec:"2-5 ton capacity"},{name:"Mini-Split Outdoor Unit",unit:"per ton",price:1500,category:"equipment",unitSpec:"9000-36000 BTU"},{name:"Mini-Split Indoor Head",unit:"per head",price:500,category:"equipment",unitSpec:"wall-mounted"},{name:"Split System Installation Labor",unit:"per ton",price:1e3,category:"equipment",unitSpec:"standard install"},{name:"Package Unit Installation Labor",unit:"per ton",price:800,category:"equipment",unitSpec:"roof-top install"}],HN=[{name:'4-6" Duct',unit:"per linear foot",price:4.98,category:"ductwork",unitSpec:"rigid or flex"},{name:'7-8" Duct',unit:"per linear foot",price:6.98,category:"ductwork",unitSpec:"rigid or flex"},{name:'9-10" Duct',unit:"per linear foot",price:8.98,category:"ductwork",unitSpec:"rigid or flex"},{name:'12"+ Duct',unit:"per linear foot",price:12.98,category:"ductwork",unitSpec:"trunk line"},{name:'Small Elbow (4-8")',unit:"per piece",price:8.98,category:"ductwork",unitSpec:"90-degree"},{name:'Large Elbow (9"+)',unit:"per piece",price:12.98,category:"ductwork",unitSpec:"90-degree"},{name:"Takeoff",unit:"per piece",price:6.98,category:"ductwork",unitSpec:"branch connection"}],qN=[{name:"Refrigerant Line Set",unit:"per linear foot",price:12.98,category:"linesets",unitSpec:'1/4" + 3/8" copper'},{name:"Condensate Drain Line",unit:"per linear foot",price:2.98,category:"linesets",unitSpec:'3/4" PVC'}],$N=[{name:"Whole House Humidifier",unit:"per unit",price:299.98,category:"accessories",unitSpec:"bypass or fan-powered"},{name:"UV Light System",unit:"per unit",price:249.98,category:"accessories",unitSpec:"in-duct installation"},{name:"Air Cleaner System",unit:"per unit",price:399.98,category:"accessories",unitSpec:"HEPA filter"},{name:"Zone Control Board",unit:"per system",price:299.98,category:"accessories",unitSpec:"up to 8 zones"},{name:"Zone Damper",unit:"per zone",price:89.98,category:"accessories",unitSpec:"motorized"},{name:"Zone Thermostat",unit:"per zone",price:79.98,category:"accessories",unitSpec:"programmable"}],Nm=[{value:"unit",label:"per unit"},{value:"ton",label:"per ton"},{value:"head",label:"per head"},{value:"linear_foot",label:"per linear foot"},{value:"piece",label:"per piece"},{value:"zone",label:"per zone"},{value:"system",label:"per system"}],bH=()=>{const s=Zt(),[t,r]=p.useState("equipment"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(ON),[u,m]=p.useState(HN),[h,x]=p.useState(qN),[f,b]=p.useState($N),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState(null),[_,$]=p.useState(null),[k,L]=p.useState(""),[E,O]=p.useState(0),[le,te]=p.useState("unit"),[V,M]=p.useState(""),[ie,K]=p.useState(!1),[H,I]=p.useState(""),[ee,se]=p.useState(0),[de,re]=p.useState("unit"),[z,ne]=p.useState("");p.useEffect(()=>{Y()},[]);const Y=async()=>{o(!0);try{const G=await Ve.getOrCreateConfig("hvac");if(!G.success||!G.data){alert("Failed to load configuration");return}const ue=G.data;if(n(ue.id),ue.is_configured){const ge=await Ve.getMaterials(ue.id);if(ge.success&&ge.data){const oe=ge.data.filter(Ie=>!Ie.is_archived),J=oe.filter(Ie=>Ie.category==="equipment"),Ae=oe.filter(Ie=>Ie.category==="ductwork"),Fe=oe.filter(Ie=>Ie.category==="linesets"),Qe=oe.filter(Ie=>Ie.category==="accessories");j(J),C(Ae),F(Fe),q(Qe)}}}catch(G){console.error("Error loading configuration:",G),alert("Failed to load configuration")}finally{o(!1)}},X=(G,ue)=>{D(G),L(ue.name),O(ue.price),te(Le(ue.unit)),M(ue.unitSpec||"")},ye=G=>{$(G.id),L(G.name),O(G.price),te(G.unit),M(G.metadata?.unitSpec||"")},pe=()=>{D(null),$(null),L(""),O(0),te("unit"),M("")},Ce=async(G,ue)=>{if(!a)return;(await Ve.addMaterial(a,{name:k,price:E,unit:le,category:ue,metadata:V?{unitSpec:V}:void 0})).success?((ue==="equipment"?d:ue==="ductwork"?m:ue==="linesets"?x:b)(J=>J.map((Ae,Fe)=>Fe===G?{...Ae,name:k,price:E,unit:U(le)}:Ae)),await Y(),pe()):alert("Failed to update material")},je=async()=>{if(!_)return;const G=Re().find(ge=>ge.id===_);if(!G)return;(await Ve.updateMaterial(_,{name:k,price:E,unit:le,metadata:{...G.metadata,unitSpec:V}})).success?(await Y(),pe()):alert("Failed to update material")},ce=async()=>{if(!a||!H||typeof ee!="number")return;const G=t;(await Ve.addMaterial(a,{name:H,price:ee,unit:de,category:G,metadata:z?{unitSpec:z}:void 0})).success?(await Y(),K(!1),I(""),se(0),re("unit"),ne("")):alert("Failed to add material")},Te=async G=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(G)).success?await Y():alert("Failed to delete material")},We=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(ON),m(HN),x(qN),b($N),await Y()):alert("Failed to reset configuration")},Le=G=>Nm.find(ge=>ge.label===G)?.value||"unit",U=(G,ue)=>{const oe=Nm.find(J=>J.value===G)?.label||"per unit";return ue?`${oe} (${ue})`:oe},fe=G=>G.unitSpec?U(G.unit||Le(G.unit),G.unitSpec):G.unit?.startsWith("per ")?G.unit:U(G.unit||Le(G.unit)),Se=()=>{switch(t){case"equipment":return l;case"ductwork":return u;case"linesets":return h;case"accessories":return f}},Re=()=>{switch(t){case"equipment":return v;case"ductwork":return S;case"linesets":return B;case"accessories":return Q}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure HVAC Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your HVAC installation estimates"})]}),e.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["equipment","ductwork","linesets","accessories"].map(G=>e.jsx("button",{onClick:()=>r(G),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===G?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:G.charAt(0).toUpperCase()+G.slice(1)},G))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:Se().map((G,ue)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:P===ue?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ge=>L(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ge=>O(parseFloat(ge.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:le,onChange:ge=>te(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Nm.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))}),e.jsx("input",{type:"text",value:V,onChange:ge=>M(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Ce(ue,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",fe(G)]})]}),e.jsx("button",{onClick:()=>X(ue,G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},ue))}),Re().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Re().map(G=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:_===G.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ue=>L(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ue=>O(parseFloat(ue.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:le,onChange:ue=>te(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Nm.map(ue=>e.jsx("option",{value:ue.value,children:ue.label},ue.value))}),e.jsx("input",{type:"text",value:V,onChange:ue=>M(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:je,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",U(G.unit,G.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ye(G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Te(G.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},G.id))})]}),Re().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:H,onChange:G=>I(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="equipment"?"e.g., High-Efficiency Heat Pump":t==="ductwork"?"e.g., Insulated Flex Duct":t==="linesets"?"e.g., Copper Line Set Kit":"e.g., Smart Thermostat"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ee,onChange:G=>se(parseFloat(G.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:de,onChange:G=>re(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Nm.map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:z,onChange:G=>ne(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{K(!1),I(""),se(0),re("unit"),ne("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:!H||typeof ee!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},WN=[{name:"14 AWG NM-B",unit:"per 250ft roll",price:89.98,category:"wire",unitSpec:"250 ft"},{name:"12 AWG NM-B",unit:"per 250ft roll",price:109.98,category:"wire",unitSpec:"250 ft"},{name:"10 AWG NM-B",unit:"per 250ft roll",price:159.98,category:"wire",unitSpec:"250 ft"},{name:"8 AWG NM-B",unit:"per 250ft roll",price:249.98,category:"wire",unitSpec:"250 ft"},{name:"6 AWG NM-B",unit:"per 250ft roll",price:399.98,category:"wire",unitSpec:"250 ft"},{name:"14 AWG THHN",unit:"per 500ft roll",price:49.98,category:"wire",unitSpec:"500 ft"},{name:"12 AWG THHN",unit:"per 500ft roll",price:69.98,category:"wire",unitSpec:"500 ft"},{name:"10 AWG THHN",unit:"per 500ft roll",price:99.98,category:"wire",unitSpec:"500 ft"},{name:"8 AWG THHN",unit:"per 500ft roll",price:159.98,category:"wire",unitSpec:"500 ft"},{name:"6 AWG THHN",unit:"per 500ft roll",price:259.98,category:"wire",unitSpec:"500 ft"},{name:"14 AWG UF-B",unit:"per 250ft roll",price:119.98,category:"wire",unitSpec:"250 ft"},{name:"12 AWG UF-B",unit:"per 250ft roll",price:149.98,category:"wire",unitSpec:"250 ft"},{name:"10 AWG UF-B",unit:"per 250ft roll",price:199.98,category:"wire",unitSpec:"250 ft"},{name:"8 AWG UF-B",unit:"per 250ft roll",price:299.98,category:"wire",unitSpec:"250 ft"},{name:"6 AWG UF-B",unit:"per 250ft roll",price:449.98,category:"wire",unitSpec:"250 ft"}],KN=[{name:"100A 20-space Panel",unit:"per panel",price:89.98,category:"panels",unitSpec:"1 panel"},{name:"100A 30-space Panel",unit:"per panel",price:119.98,category:"panels",unitSpec:"1 panel"},{name:"100A 40-space Panel",unit:"per panel",price:149.98,category:"panels",unitSpec:"1 panel"},{name:"150A 20-space Panel",unit:"per panel",price:119.98,category:"panels",unitSpec:"1 panel"},{name:"150A 30-space Panel",unit:"per panel",price:149.98,category:"panels",unitSpec:"1 panel"},{name:"150A 40-space Panel",unit:"per panel",price:179.98,category:"panels",unitSpec:"1 panel"},{name:"200A 20-space Panel",unit:"per panel",price:149.98,category:"panels",unitSpec:"1 panel"},{name:"200A 30-space Panel",unit:"per panel",price:179.98,category:"panels",unitSpec:"1 panel"},{name:"200A 40-space Panel",unit:"per panel",price:209.98,category:"panels",unitSpec:"1 panel"}],zN=[{name:"Standard Breaker",unit:"per piece",price:8.98,category:"devices",unitSpec:"1 piece"},{name:"AFCI Breaker",unit:"per piece",price:39.98,category:"devices",unitSpec:"1 piece"},{name:"30A Breaker",unit:"per piece",price:24.98,category:"devices",unitSpec:"1 piece"},{name:"GFCI Receptacle",unit:"per piece",price:19.98,category:"devices",unitSpec:"1 piece"},{name:"Standard Receptacle",unit:"per piece",price:3.98,category:"devices",unitSpec:"1 piece"},{name:"Switch",unit:"per piece",price:4.98,category:"devices",unitSpec:"1 piece"}],GN=[{name:"Ground Rod",unit:"per piece",price:12.98,category:"accessories",unitSpec:"1 piece"},{name:"Ground Clamp",unit:"per piece",price:4.98,category:"accessories",unitSpec:"1 piece"},{name:"Conduit Fitting",unit:"per piece",price:1.98,category:"accessories",unitSpec:"1 piece"}],Cm=[{value:"roll_250ft",label:"per 250ft roll"},{value:"roll_500ft",label:"per 500ft roll"},{value:"panel",label:"per panel"},{value:"piece",label:"per piece"},{value:"unit",label:"per unit"},{value:"box",label:"per box"},{value:"bundle",label:"per bundle"}],yH=()=>{const s=Zt(),[t,r]=p.useState("wire"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(WN),[u,m]=p.useState(KN),[h,x]=p.useState(zN),[f,b]=p.useState(GN),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState(null),[_,$]=p.useState(null),[k,L]=p.useState(""),[E,O]=p.useState(0),[le,te]=p.useState("piece"),[V,M]=p.useState(""),[ie,K]=p.useState(!1),[H,I]=p.useState(""),[ee,se]=p.useState(0),[de,re]=p.useState("piece"),[z,ne]=p.useState("");p.useEffect(()=>{Y()},[]);const Y=async()=>{o(!0);try{const G=await Ve.getOrCreateConfig("electrical");if(!G.success||!G.data){alert("Failed to load configuration");return}const ue=G.data;if(n(ue.id),ue.is_configured){const ge=await Ve.getMaterials(ue.id);if(ge.success&&ge.data){const oe=ge.data.filter(Ie=>!Ie.is_archived),J=oe.filter(Ie=>Ie.category==="wire"),Ae=oe.filter(Ie=>Ie.category==="panels"),Fe=oe.filter(Ie=>Ie.category==="devices"),Qe=oe.filter(Ie=>Ie.category==="accessories");j(J),C(Ae),F(Fe),q(Qe)}}}catch(G){console.error("Error loading configuration:",G),alert("Failed to load configuration")}finally{o(!1)}},X=(G,ue)=>{D(G),L(ue.name),O(ue.price),te(Le(ue.unit)),M(ue.unitSpec||"")},ye=G=>{$(G.id),L(G.name),O(G.price),te(G.unit),M(G.metadata?.unitSpec||"")},pe=()=>{D(null),$(null),L(""),O(0),te("piece"),M("")},Ce=async(G,ue)=>{if(!a)return;(await Ve.addMaterial(a,{name:k,price:E,unit:le,category:ue,metadata:V?{unitSpec:V}:void 0})).success?((ue==="wire"?d:ue==="panels"?m:ue==="devices"?x:b)(J=>J.map((Ae,Fe)=>Fe===G?{...Ae,name:k,price:E,unit:U(le)}:Ae)),await Y(),pe()):alert("Failed to update material")},je=async()=>{if(!_)return;const G=[...v,...S,...B,...Q].find(ge=>ge.id===_);(await Ve.updateMaterial(_,{name:k,price:E,unit:le,metadata:{...G?.metadata,unitSpec:V}})).success?(await Y(),pe()):alert("Failed to update material")},ce=async()=>{if(!a||!H||typeof ee!="number")return;const G=t;(await Ve.addMaterial(a,{name:H,price:ee,unit:de,category:G,metadata:z?{unitSpec:z}:void 0})).success?(await Y(),K(!1),I(""),se(0),re("piece"),ne("")):alert("Failed to add material")},Te=async G=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(G)).success?await Y():alert("Failed to delete material")},We=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(WN),m(KN),x(zN),b(GN),await Y()):alert("Failed to reset configuration")},Le=G=>Cm.find(ge=>ge.label===G)?.value||"piece",U=(G,ue)=>{const oe=Cm.find(J=>J.value===G)?.label||"per piece";return ue?`${oe} (${ue})`:oe},fe=G=>G.unitSpec?U(G.unit||Le(G.unit),G.unitSpec):G.unit?.startsWith("per ")?G.unit:U(G.unit||Le(G.unit)),Se=()=>{switch(t){case"wire":return l;case"panels":return u;case"devices":return h;case"accessories":return f}},Re=()=>{switch(t){case"wire":return v;case"panels":return S;case"devices":return B;case"accessories":return Q}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Electrical Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your electrical estimates"})]}),e.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["wire","panels","devices","accessories"].map(G=>e.jsx("button",{onClick:()=>r(G),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===G?"border-orange-600 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:G.charAt(0).toUpperCase()+G.slice(1)},G))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:Se().map((G,ue)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-orange-50 rounded-lg border border-orange-100",children:P===ue?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ge=>L(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ge=>O(parseFloat(ge.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:le,onChange:ge=>te(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Cm.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))}),e.jsx("input",{type:"text",value:V,onChange:ge=>M(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Ce(ue,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",fe(G)]})]}),e.jsx("button",{onClick:()=>X(ue,G),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},ue))}),Re().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Re().map(G=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:_===G.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ue=>L(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ue=>O(parseFloat(ue.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:le,onChange:ue=>te(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Cm.map(ue=>e.jsx("option",{value:ue.value,children:ue.label},ue.value))}),e.jsx("input",{type:"text",value:V,onChange:ue=>M(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:je,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",U(G.unit,G.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ye(G),className:"p-2 text-orange-600 hover:bg-orange-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Te(G.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},G.id))})]}),Re().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:H,onChange:G=>I(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="wire"?"e.g., 10 AWG THWN":t==="panels"?"e.g., 125A 24-space Panel":t==="devices"?"e.g., Dimmer Switch":"e.g., Junction Box"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ee,onChange:G=>se(parseFloat(G.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:de,onChange:G=>re(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Cm.map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:z,onChange:G=>ne(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{K(!1),I(""),se(0),re("piece"),ne("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:!H||typeof ee!="number",className:"flex-1 px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},VN=[{name:'5" K-Style Aluminum',unit:"per linear foot",price:4.98,category:"gutters",unitSpec:"165 linear ft"},{name:'6" K-Style Aluminum',unit:"per linear foot",price:6.98,category:"gutters",unitSpec:"165 linear ft"},{name:'5" K-Style Vinyl',unit:"per linear foot",price:3.98,category:"gutters",unitSpec:"165 linear ft"},{name:'6" K-Style Vinyl',unit:"per linear foot",price:5.98,category:"gutters",unitSpec:"165 linear ft"},{name:'5" K-Style Galvanized',unit:"per linear foot",price:7.98,category:"gutters",unitSpec:"165 linear ft"},{name:'6" K-Style Galvanized',unit:"per linear foot",price:9.98,category:"gutters",unitSpec:"165 linear ft"},{name:'5" K-Style Copper',unit:"per linear foot",price:24.98,category:"gutters",unitSpec:"165 linear ft"},{name:'6" K-Style Copper',unit:"per linear foot",price:29.98,category:"gutters",unitSpec:"165 linear ft"}],YN=[{name:'2x3" Downspout',unit:"per linear foot",price:3.98,category:"downspouts",unitSpec:"48 linear ft"},{name:'3x4" Downspout',unit:"per linear foot",price:5.98,category:"downspouts",unitSpec:"48 linear ft"}],JN=[{name:"Leaf Guard (Standard)",unit:"per linear foot",price:4.98,category:"accessories",unitSpec:"165 linear ft"},{name:"Leaf Guard (Copper)",unit:"per linear foot",price:8.98,category:"accessories",unitSpec:"165 linear ft"},{name:"Heat Tape",unit:"per linear foot",price:6.98,category:"accessories",unitSpec:"165 linear ft"},{name:"Endcap (Standard)",unit:"per piece",price:4.98,category:"accessories",unitSpec:"2 count"},{name:"Endcap (Copper)",unit:"per piece",price:12.98,category:"accessories",unitSpec:"2 count"},{name:"Corner (Standard)",unit:"per piece",price:8.98,category:"accessories",unitSpec:"4 count"},{name:"Corner (Copper)",unit:"per piece",price:24.98,category:"accessories",unitSpec:"4 count"},{name:"Hanger (Standard)",unit:"per piece",price:1.98,category:"accessories",unitSpec:"100 count"},{name:"Hanger (Copper)",unit:"per piece",price:3.98,category:"accessories",unitSpec:"100 count"}],Sm=[{value:"linear_foot",label:"per linear foot"},{value:"piece",label:"per piece"},{value:"section",label:"per section"},{value:"unit",label:"per unit"},{value:"elbow",label:"per elbow"},{value:"bracket",label:"per bracket"}],vH=()=>{const s=Zt(),[t,r]=p.useState("gutters"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(VN),[u,m]=p.useState(YN),[h,x]=p.useState(JN),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(null),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("linear_foot"),[E,O]=p.useState(""),[le,te]=p.useState(!1),[V,M]=p.useState(""),[ie,K]=p.useState(0),[H,I]=p.useState("linear_foot"),[ee,se]=p.useState("");p.useEffect(()=>{de()},[]);const de=async()=>{o(!0);try{const U=await Ve.getOrCreateConfig("gutter");if(!U.success||!U.data){alert("Failed to load configuration");return}const fe=U.data;if(n(fe.id),fe.is_configured){const Se=await Ve.getMaterials(fe.id);if(Se.success&&Se.data){const Re=Se.data.filter(oe=>!oe.is_archived),G=Re.filter(oe=>oe.category==="gutters"),ue=Re.filter(oe=>oe.category==="downspouts"),ge=Re.filter(oe=>oe.category==="accessories");b(G),j(ue),C(ge)}}}catch(U){console.error("Error loading configuration:",U),alert("Failed to load configuration")}finally{o(!1)}},re=(U,fe)=>{F(U),D(fe.name),$(fe.price),L(je(fe.unit)),O(fe.unitSpec||"")},z=U=>{q(U.id),D(U.name),$(U.price),L(U.unit),O(U.metadata?.unitSpec||"")},ne=()=>{F(null),q(null),D(""),$(0),L("linear_foot"),O("")},Y=async(U,fe)=>{if(!a)return;(await Ve.addMaterial(a,{name:P,price:_,unit:k,category:fe,metadata:E?{unitSpec:E}:void 0})).success?((fe==="gutters"?d:fe==="downspouts"?m:x)(G=>G.map((ue,ge)=>ge===U?{...ue,name:P,price:_,unit:ce(k,E),unitSpec:E}:ue)),await de(),ne()):alert("Failed to update material")},X=async()=>{if(!Q)return;const U=[...f,...v,...S].find(Se=>Se.id===Q);(await Ve.updateMaterial(Q,{name:P,price:_,unit:k,metadata:{...U?.metadata,unitSpec:E}})).success?(await de(),ne()):alert("Failed to update material")},ye=async()=>{if(!a||!V||typeof ie!="number")return;const U=t;(await Ve.addMaterial(a,{name:V,price:ie,unit:H,category:U,metadata:ee?{unitSpec:ee}:void 0})).success?(await de(),te(!1),M(""),K(0),I("linear_foot"),se("")):alert("Failed to add material")},pe=async U=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(U)).success?await de():alert("Failed to delete material")},Ce=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(VN),m(YN),x(JN),await de()):alert("Failed to reset configuration")},je=U=>Sm.find(Se=>Se.label===U)?.value||"linear_foot",ce=(U,fe)=>{const Re=Sm.find(G=>G.value===U)?.label||"per linear foot";return fe?`${Re} (${fe})`:Re},Te=U=>U.unitSpec?ce(U.unit||je(U.unit),U.unitSpec):U.unit?.startsWith("per ")?U.unit:ce(U.unit||je(U.unit)),We=()=>{switch(t){case"gutters":return l;case"downspouts":return u;case"accessories":return h}},Le=()=>{switch(t){case"gutters":return f;case"downspouts":return v;case"accessories":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Gutter Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your gutter estimates"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["gutters","downspouts","accessories"].map(U=>e.jsx("button",{onClick:()=>r(U),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===U?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:We().map((U,fe)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:B===fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:Se=>D(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:Se=>$(parseFloat(Se.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:k,onChange:Se=>L(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Sm.map(Se=>e.jsx("option",{value:Se.value,children:Se.label},Se.value))}),e.jsx("input",{type:"text",value:E,onChange:Se=>O(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Y(fe,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",Te(U)]})]}),e.jsx("button",{onClick:()=>re(fe,U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},fe))}),Le().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Le().map(U=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:Q===U.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:fe=>D(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:fe=>$(parseFloat(fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:k,onChange:fe=>L(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Sm.map(fe=>e.jsx("option",{value:fe.value,children:fe.label},fe.value))}),e.jsx("input",{type:"text",value:E,onChange:fe=>O(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",ce(U.unit,U.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},U.id))})]}),Le().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:V,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="gutters"?'e.g., 5" K-Style Aluminum':t==="downspouts"?'e.g., 2x3" Downspout':"e.g., Leaf Guard"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ie,onChange:U=>K(parseFloat(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:H,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Sm.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ee,onChange:U=>se(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{te(!1),M(""),K(0),I("linear_foot"),se("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!V||typeof ie!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},XN=[{name:"Concrete 3000 PSI",unit:"per cubic yard",unitSpec:"",price:125,category:"concrete"},{name:"Concrete 3500 PSI",unit:"per cubic yard",unitSpec:"",price:135,category:"concrete"},{name:"Concrete 4000 PSI",unit:"per cubic yard",unitSpec:"",price:145,category:"concrete"},{name:"Concrete 4500 PSI",unit:"per cubic yard",unitSpec:"",price:155,category:"concrete"}],ZN=[{name:"Rebar (#3, #4, #5)",unit:"per 20ft piece",unitSpec:"",price:12.98,category:"rebar"}],e5=[{name:"Native Backfill",unit:"per cubic yard",unitSpec:"",price:15,category:"backfill"},{name:"Gravel Backfill",unit:"per cubic yard",unitSpec:"",price:45,category:"backfill"},{name:"Sand Backfill",unit:"per cubic yard",unitSpec:"",price:35,category:"backfill"}],t5=[{name:"Gravel Base/Drainage",unit:"per cubic yard",unitSpec:"",price:45,category:"drainage"},{name:"Drain Pipe",unit:"per 10ft section",unitSpec:"",price:12.98,category:"drainage"}],r5=[{name:"Vapor Barrier",unit:"per 1000sf roll",unitSpec:"",price:89.98,category:"protection"},{name:"Waterproofing",unit:"per gallon",unitSpec:"",price:45.98,category:"protection"},{name:"ICF Material",unit:"per sqft",unitSpec:"",price:12,category:"protection"}],Bm=[{value:"cubic_yard",label:"per cubic yard"},{value:"piece",label:"per 20ft piece"},{value:"section",label:"per 10ft section"},{value:"roll",label:"per 1000sf roll"},{value:"gallon",label:"per gallon"},{value:"sqft",label:"per sqft"}],wH=()=>{const s=Zt(),[t,r]=p.useState("concrete"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(XN),[u,m]=p.useState(ZN),[h,x]=p.useState(e5),[f,b]=p.useState(t5),[v,j]=p.useState(r5),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState([]),[_,$]=p.useState([]),[k,L]=p.useState(null),[E,O]=p.useState(null),[le,te]=p.useState(""),[V,M]=p.useState(0),[ie,K]=p.useState("cubic_yard"),[H,I]=p.useState(""),[ee,se]=p.useState(!1),[de,re]=p.useState(""),[z,ne]=p.useState(0),[Y,X]=p.useState("cubic_yard"),[ye,pe]=p.useState("");p.useEffect(()=>{Ce()},[]);const Ce=async()=>{o(!0);try{const J=await Ve.getOrCreateConfig("foundation");if(!J.success||!J.data){alert("Failed to load configuration");return}const Ae=J.data;if(n(Ae.id),Ae.is_configured){const Fe=await Ve.getMaterials(Ae.id);if(Fe.success&&Fe.data){const Qe=Fe.data.filter(ct=>!ct.is_archived),Ie=Qe.filter(ct=>ct.category==="concrete"),et=Qe.filter(ct=>ct.category==="rebar"),ot=Qe.filter(ct=>ct.category==="backfill"),lt=Qe.filter(ct=>ct.category==="drainage"),vt=Qe.filter(ct=>ct.category==="protection");C(Ie),F(et),q(ot),D(lt),$(vt)}}}catch(J){console.error("Error loading configuration:",J),alert("Failed to load configuration")}finally{o(!1)}},je=(J,Ae)=>{L(J),te(Ae.name),M(Ae.price),K(Re(Ae.unit)),I(Ae.unitSpec||"")},ce=J=>{O(J.id),te(J.name),M(J.price),K(J.unit),I(J.metadata?.unitSpec||"")},Te=()=>{L(null),O(null),te(""),M(0),K("cubic_yard"),I("")},We=async(J,Ae)=>{if(!a)return;(await Ve.addMaterial(a,{name:le,price:V,unit:ie,category:Ae,metadata:H?{unitSpec:H}:void 0})).success?((Ae==="concrete"?d:Ae==="rebar"?m:Ae==="backfill"?x:Ae==="drainage"?b:j)(Ie=>Ie.map((et,ot)=>ot===J?{...et,name:le,price:V,unit:G(ie)}:et)),await Ce(),Te()):alert("Failed to update material")},Le=async()=>{if(!E)return;(await Ve.updateMaterial(E,{name:le,price:V,unit:ie,metadata:H?{unitSpec:H}:void 0})).success?(await Ce(),Te()):alert("Failed to update material")},U=async()=>{if(!a||!de||typeof z!="number")return;const J=t;(await Ve.addMaterial(a,{name:de,price:z,unit:Y,category:J,metadata:ye?{unitSpec:ye}:void 0})).success?(await Ce(),se(!1),re(""),ne(0),X("cubic_yard"),pe("")):alert("Failed to add material")},fe=async J=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(J)).success?await Ce():alert("Failed to delete material")},Se=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(XN),m(ZN),x(e5),b(t5),j(r5),await Ce()):alert("Failed to reset configuration")},Re=J=>Bm.find(Fe=>Fe.label===J)?.value||"cubic_yard",G=(J,Ae)=>{const Qe=Bm.find(Ie=>Ie.value===J)?.label||"per cubic yard";return Ae?`${Qe} (${Ae})`:Qe},ue=J=>J.unitSpec?G(J.unit||Re(J.unit),J.unitSpec):J.unit?.startsWith("per ")?J.unit:G(J.unit||Re(J.unit)),ge=()=>{switch(t){case"concrete":return l;case"rebar":return u;case"backfill":return h;case"drainage":return f;case"protection":return v}},oe=()=>{switch(t){case"concrete":return S;case"rebar":return B;case"backfill":return Q;case"drainage":return P;case"protection":return _}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Foundation Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your foundation estimates"})]}),e.jsxs("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["concrete","rebar","backfill","drainage","protection"].map(J=>e.jsx("button",{onClick:()=>r(J),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===J?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:J.charAt(0).toUpperCase()+J.slice(1)},J))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>se(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:ge().map((J,Ae)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:k===Ae?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:le,onChange:Fe=>te(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Fe=>M(parseFloat(Fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:ie,onChange:Fe=>K(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Bm.map(Fe=>e.jsx("option",{value:Fe.value,children:Fe.label},Fe.value))}),e.jsx("input",{type:"text",value:H,onChange:Fe=>I(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>We(Ae,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",ue(J)]})]}),e.jsx("button",{onClick:()=>je(Ae,J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},Ae))}),oe().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:oe().map(J=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:E===J.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:le,onChange:Ae=>te(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Ae=>M(parseFloat(Ae.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:ie,onChange:Ae=>K(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Bm.map(Ae=>e.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))}),e.jsx("input",{type:"text",value:H,onChange:Ae=>I(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:Le,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",G(J.unit,J.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ce(J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>fe(J.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},J.id))})]}),oe().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:de,onChange:J=>re(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="concrete"?"e.g., Concrete 5000 PSI":t==="rebar"?"e.g., Heavy Duty Rebar":t==="backfill"?"e.g., Premium Backfill":t==="drainage"?"e.g., French Drain System":"e.g., Advanced Waterproofing"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:z,onChange:J=>ne(parseFloat(J.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:Y,onChange:J=>X(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Bm.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ye,onChange:J=>pe(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Specify the quantity (e.g., "200 sq ft" for a roll)'})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{se(!1),re(""),ne(0),X("cubic_yard"),pe("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!de||typeof z!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},s5=[{name:'Standard Block 12"x8"x12"',unit:"per block",price:5.98,category:"blocks",unitSpec:"100 blocks"},{name:'Pinned Block 16"x6"x12"',unit:"per block",price:6.98,category:"blocks",unitSpec:"100 blocks"},{name:'Gravity Block 18"x8"x24"',unit:"per block",price:12.98,category:"blocks",unitSpec:"50 blocks"},{name:"Capstone Block",unit:"per piece",price:8.98,category:"blocks",unitSpec:"100 pieces"}],a5=[{name:"Concrete Mix",unit:"per cubic yard",price:185,category:"concrete",unitSpec:"10 cubic yards"},{name:"Rebar",unit:"per 20ft piece",price:12.98,category:"concrete",unitSpec:"50 pieces"}],n5=[{name:"Pressure Treated 6x6 Timber",unit:"per 8ft length",price:24.98,category:"timber",unitSpec:"20 lengths"}],i5=[{name:"Gravel Base Material",unit:"per cubic yard",price:45,category:"base-drainage",unitSpec:"10 cubic yards"},{name:"Drainage Gravel",unit:"per cubic yard",price:55,category:"base-drainage",unitSpec:"10 cubic yards"},{name:"Drain Pipe",unit:"per 10ft section",price:8.98,category:"base-drainage",unitSpec:"100 linear ft"}],o5=[{name:"Geogrid Reinforcement",unit:"per 200sf roll",price:89.98,category:"reinforcement",unitSpec:"1000 sq ft"},{name:"Filter Fabric",unit:"per 300sf roll",price:45.98,category:"reinforcement",unitSpec:"1500 sq ft"}],km=[{value:"block",label:"per block"},{value:"piece",label:"per piece"},{value:"cubic_yard",label:"per cubic yard"},{value:"length",label:"per 8ft length"},{value:"section",label:"per 10ft section"},{value:"roll_200",label:"per 200sf roll"},{value:"roll_300",label:"per 300sf roll"},{value:"piece_20ft",label:"per 20ft piece"}],jH=()=>{const s=Zt(),[t,r]=p.useState("blocks"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(s5),[u,m]=p.useState(a5),[h,x]=p.useState(n5),[f,b]=p.useState(i5),[v,j]=p.useState(o5),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState([]),[_,$]=p.useState([]),[k,L]=p.useState(null),[E,O]=p.useState(null),[le,te]=p.useState(""),[V,M]=p.useState(0),[ie,K]=p.useState("block"),[H,I]=p.useState(""),[ee,se]=p.useState(!1),[de,re]=p.useState(""),[z,ne]=p.useState(0),[Y,X]=p.useState("block"),[ye,pe]=p.useState("");p.useEffect(()=>{Ce()},[]);const Ce=async()=>{o(!0);try{const J=await Ve.getOrCreateConfig("retaining_wall");if(!J.success||!J.data){alert("Failed to load configuration");return}const Ae=J.data;if(n(Ae.id),Ae.is_configured){const Fe=await Ve.getMaterials(Ae.id);if(Fe.success&&Fe.data){const Qe=Fe.data.filter(ct=>!ct.is_archived),Ie=Qe.filter(ct=>ct.category==="blocks"),et=Qe.filter(ct=>ct.category==="concrete"),ot=Qe.filter(ct=>ct.category==="timber"),lt=Qe.filter(ct=>ct.category==="base-drainage"),vt=Qe.filter(ct=>ct.category==="reinforcement");C(Ie),F(et),q(ot),D(lt),$(vt)}}}catch(J){console.error("Error loading configuration:",J),alert("Failed to load configuration")}finally{o(!1)}},je=(J,Ae)=>{L(J),te(Ae.name),M(Ae.price),K(Re(Ae.unit)),I(Ae.unitSpec||"")},ce=J=>{O(J.id),te(J.name),M(J.price),K(J.unit),I(J.metadata?.unitSpec||"")},Te=()=>{L(null),O(null),te(""),M(0),K("block"),I("")},We=async(J,Ae)=>{if(!a)return;(await Ve.addMaterial(a,{name:le,price:V,unit:ie,category:Ae,metadata:H?{unitSpec:H}:void 0})).success?((Ae==="blocks"?d:Ae==="concrete"?m:Ae==="timber"?x:Ae==="base-drainage"?b:j)(Ie=>Ie.map((et,ot)=>ot===J?{...et,name:le,price:V,unit:G(ie)}:et)),await Ce(),Te()):alert("Failed to update material")},Le=async()=>{if(!E)return;const J=[...S,...B,...Q,...P,..._].find(Fe=>Fe.id===E);(await Ve.updateMaterial(E,{name:le,price:V,unit:ie,metadata:{...J?.metadata,unitSpec:H}})).success?(await Ce(),Te()):alert("Failed to update material")},U=async()=>{if(!a||!de||typeof z!="number")return;const J=t;(await Ve.addMaterial(a,{name:de,price:z,unit:Y,category:J,metadata:ye?{unitSpec:ye}:void 0})).success?(await Ce(),se(!1),re(""),ne(0),X("block"),pe("")):alert("Failed to add material")},fe=async J=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(J)).success?await Ce():alert("Failed to delete material")},Se=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(s5),m(a5),x(n5),b(i5),j(o5),await Ce()):alert("Failed to reset configuration")},Re=J=>km.find(Fe=>Fe.label===J)?.value||"block",G=(J,Ae)=>{const Qe=km.find(Ie=>Ie.value===J)?.label||"per block";return Ae?`${Qe} (${Ae})`:Qe},ue=J=>J.unitSpec?G(J.unit||Re(J.unit),J.unitSpec):J.unit?.startsWith("per ")?J.unit:G(J.unit||Re(J.unit)),ge=()=>{switch(t){case"blocks":return l;case"concrete":return u;case"timber":return h;case"base-drainage":return f;case"reinforcement":return v}},oe=()=>{switch(t){case"blocks":return S;case"concrete":return B;case"timber":return Q;case"base-drainage":return P;case"reinforcement":return _}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Retaining Wall Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your retaining wall estimates"})]}),e.jsxs("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["blocks","concrete","timber","base-drainage","reinforcement"].map(J=>e.jsx("button",{onClick:()=>r(J),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===J?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:J==="base-drainage"?"Base & Drainage":J.charAt(0).toUpperCase()+J.slice(1)},J))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t==="base-drainage"?"Base & Drainage":t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>se(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:ge().map((J,Ae)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:k===Ae?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:le,onChange:Fe=>te(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Fe=>M(parseFloat(Fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:ie,onChange:Fe=>K(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:km.map(Fe=>e.jsx("option",{value:Fe.value,children:Fe.label},Fe.value))}),e.jsx("input",{type:"text",value:H,onChange:Fe=>I(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>We(Ae,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",ue(J)]})]}),e.jsx("button",{onClick:()=>je(Ae,J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},Ae))}),oe().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:oe().map(J=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:E===J.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:le,onChange:Ae=>te(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Ae=>M(parseFloat(Ae.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:ie,onChange:Ae=>K(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:km.map(Ae=>e.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))}),e.jsx("input",{type:"text",value:H,onChange:Ae=>I(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:Le,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",G(J.unit,J.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ce(J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>fe(J.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},J.id))})]}),oe().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t==="base-drainage"?"Base & Drainage":t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:de,onChange:J=>re(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="blocks"?"e.g., Premium Retaining Wall Block":t==="concrete"?"e.g., High-Strength Concrete Mix":t==="timber"?"e.g., Treated Pine Timber":t==="base-drainage"?"e.g., Crushed Stone Base":"e.g., Heavy-Duty Geogrid"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:z,onChange:J=>ne(parseFloat(J.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:Y,onChange:J=>X(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:km.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ye,onChange:J=>pe(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{se(!1),re(""),ne(0),X("block"),pe("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!de||typeof z!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},l5=[{name:"Entry Door - Steel",unit:"per unit",unitSpec:"",price:299.98,category:"doors"},{name:"Entry Door - Fiberglass",unit:"per unit",unitSpec:"",price:499.98,category:"doors"},{name:"Entry Door - Wood",unit:"per unit",unitSpec:"",price:699.98,category:"doors"},{name:"Interior Door - Hollow-Core",unit:"per unit",unitSpec:"",price:49.98,category:"doors"},{name:"Interior Door - Solid-Core",unit:"per unit",unitSpec:"",price:99.98,category:"doors"},{name:"Interior Door - Wood",unit:"per unit",unitSpec:"",price:199.98,category:"doors"},{name:"Patio Door - Vinyl",unit:"per unit",unitSpec:"",price:599.98,category:"doors"},{name:"Patio Door - Aluminum",unit:"per unit",unitSpec:"",price:799.98,category:"doors"},{name:"Patio Door - Wood",unit:"per unit",unitSpec:"",price:1299.98,category:"doors"},{name:"French Door - Wood",unit:"per unit",unitSpec:"",price:899.98,category:"doors"},{name:"French Door - Fiberglass",unit:"per unit",unitSpec:"",price:799.98,category:"doors"},{name:"French Door - Steel",unit:"per unit",unitSpec:"",price:699.98,category:"doors"},{name:"Bifold Door - Hollow-Core",unit:"per unit",unitSpec:"",price:99.98,category:"doors"},{name:"Bifold Door - Solid-Core",unit:"per unit",unitSpec:"",price:149.98,category:"doors"},{name:"Bifold Door - Wood",unit:"per unit",unitSpec:"",price:249.98,category:"doors"}],c5=[{name:"Single-Hung Window - Vinyl",unit:"per unit",unitSpec:"",price:199.98,category:"windows"},{name:"Single-Hung Window - Aluminum",unit:"per unit",unitSpec:"",price:249.98,category:"windows"},{name:"Single-Hung Window - Wood",unit:"per unit",unitSpec:"",price:399.98,category:"windows"},{name:"Double-Hung Window - Vinyl",unit:"per unit",unitSpec:"",price:249.98,category:"windows"},{name:"Double-Hung Window - Aluminum",unit:"per unit",unitSpec:"",price:299.98,category:"windows"},{name:"Double-Hung Window - Wood",unit:"per unit",unitSpec:"",price:499.98,category:"windows"},{name:"Casement Window - Vinyl",unit:"per unit",unitSpec:"",price:299.98,category:"windows"},{name:"Casement Window - Aluminum",unit:"per unit",unitSpec:"",price:349.98,category:"windows"},{name:"Casement Window - Wood",unit:"per unit",unitSpec:"",price:599.98,category:"windows"},{name:"Sliding Window - Vinyl",unit:"per unit",unitSpec:"",price:249.98,category:"windows"},{name:"Sliding Window - Aluminum",unit:"per unit",unitSpec:"",price:299.98,category:"windows"},{name:"Sliding Window - Wood",unit:"per unit",unitSpec:"",price:499.98,category:"windows"},{name:"Picture Window - Vinyl",unit:"per unit",unitSpec:"",price:299.98,category:"windows"},{name:"Picture Window - Aluminum",unit:"per unit",unitSpec:"",price:349.98,category:"windows"},{name:"Picture Window - Wood",unit:"per unit",unitSpec:"",price:599.98,category:"windows"}],d5=[{name:"Basic Trim",unit:"per linear foot",unitSpec:"",price:2.98,category:"trim"},{name:"Colonial Trim",unit:"per linear foot",unitSpec:"",price:3.98,category:"trim"},{name:"Craftsman Trim",unit:"per linear foot",unitSpec:"",price:4.98,category:"trim"},{name:"Modern Trim",unit:"per linear foot",unitSpec:"",price:3.98,category:"trim"}],u5=[{name:"Interior Door Hardware - Basic",unit:"per set",unitSpec:"",price:24.98,category:"hardware"},{name:"Interior Door Hardware - Premium",unit:"per set",unitSpec:"",price:49.98,category:"hardware"},{name:"Exterior Door Hardware - Basic",unit:"per set",unitSpec:"",price:79.98,category:"hardware"},{name:"Exterior Door Hardware - Premium",unit:"per set",unitSpec:"",price:149.98,category:"hardware"},{name:"Window Hardware - Basic",unit:"per set",unitSpec:"",price:19.98,category:"hardware"},{name:"Window Hardware - Premium",unit:"per set",unitSpec:"",price:39.98,category:"hardware"}],A5=[{name:"Exterior Pre-Hung Frame Kit",unit:"per kit",unitSpec:"",price:149.98,category:"installation"},{name:"Interior Pre-Hung Frame Kit",unit:"per kit",unitSpec:"",price:79.98,category:"installation"},{name:"Insulation",unit:"per 20ft roll",unitSpec:"",price:12.98,category:"installation"},{name:"Flashing Tape",unit:"per roll",unitSpec:"",price:12.98,category:"installation"},{name:"Caulk",unit:"per tube",unitSpec:"",price:6.98,category:"installation"},{name:"Shim Packs",unit:"per pack",unitSpec:"",price:4.98,category:"installation"}],Fm=[{value:"unit",label:"per unit"},{value:"linear_foot",label:"per linear foot"},{value:"set",label:"per set"},{value:"kit",label:"per kit"},{value:"roll",label:"per roll"},{value:"roll_20ft",label:"per 20ft roll"},{value:"tube",label:"per tube"},{value:"pack",label:"per pack"}],NH=()=>{const s=Zt(),[t,r]=p.useState("doors"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(l5),[u,m]=p.useState(c5),[h,x]=p.useState(d5),[f,b]=p.useState(u5),[v,j]=p.useState(A5),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState([]),[_,$]=p.useState([]),[k,L]=p.useState(null),[E,O]=p.useState(null),[le,te]=p.useState(""),[V,M]=p.useState(0),[ie,K]=p.useState("unit"),[H,I]=p.useState(""),[ee,se]=p.useState(!1),[de,re]=p.useState(""),[z,ne]=p.useState(0),[Y,X]=p.useState("unit"),[ye,pe]=p.useState("");p.useEffect(()=>{Ce()},[]);const Ce=async()=>{o(!0);try{const J=await Ve.getOrCreateConfig("doors_windows");if(!J.success||!J.data){alert("Failed to load configuration");return}const Ae=J.data;if(n(Ae.id),Ae.is_configured){const Fe=await Ve.getMaterials(Ae.id);if(Fe.success&&Fe.data){const Qe=Fe.data.filter(ct=>!ct.is_archived),Ie=Qe.filter(ct=>ct.category==="doors"),et=Qe.filter(ct=>ct.category==="windows"),ot=Qe.filter(ct=>ct.category==="trim"),lt=Qe.filter(ct=>ct.category==="hardware"),vt=Qe.filter(ct=>ct.category==="installation");C(Ie),F(et),q(ot),D(lt),$(vt)}}}catch(J){console.error("Error loading configuration:",J),alert("Failed to load configuration")}finally{o(!1)}},je=(J,Ae)=>{L(J),te(Ae.name),M(Ae.price),K(Re(Ae.unit)),I(Ae.unitSpec||"")},ce=J=>{O(J.id),te(J.name),M(J.price),K(J.unit),I(J.metadata?.unitSpec||"")},Te=()=>{L(null),O(null),te(""),M(0),K("unit"),I("")},We=async(J,Ae)=>{if(!a)return;(await Ve.addMaterial(a,{name:le,price:V,unit:ie,category:Ae,metadata:H?{unitSpec:H}:void 0})).success?((Ae==="doors"?d:Ae==="windows"?m:Ae==="trim"?x:Ae==="hardware"?b:j)(Ie=>Ie.map((et,ot)=>ot===J?{...et,name:le,price:V,unit:G(ie)}:et)),await Ce(),Te()):alert("Failed to update material")},Le=async()=>{if(!E)return;(await Ve.updateMaterial(E,{name:le,price:V,unit:ie,metadata:{unitSpec:H}})).success?(await Ce(),Te()):alert("Failed to update material")},U=async()=>{if(!a||!de||typeof z!="number")return;const J=t;(await Ve.addMaterial(a,{name:de,price:z,unit:Y,category:J,metadata:ye?{unitSpec:ye}:void 0})).success?(await Ce(),se(!1),re(""),ne(0),X("unit"),pe("")):alert("Failed to add material")},fe=async J=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(J)).success?await Ce():alert("Failed to delete material")},Se=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(l5),m(c5),x(d5),b(u5),j(A5),await Ce()):alert("Failed to reset configuration")},Re=J=>Fm.find(Fe=>Fe.label===J)?.value||"unit",G=(J,Ae)=>{const Qe=Fm.find(Ie=>Ie.value===J)?.label||"per unit";return Ae?`${Qe} (${Ae})`:Qe},ue=J=>J.unitSpec?G(J.unit||Re(J.unit),J.unitSpec):J.unit?.startsWith("per ")?J.unit:G(J.unit||Re(J.unit)),ge=()=>{switch(t){case"doors":return l;case"windows":return u;case"trim":return h;case"hardware":return f;case"installation":return v}},oe=()=>{switch(t){case"doors":return S;case"windows":return B;case"trim":return Q;case"hardware":return P;case"installation":return _}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Doors & Windows Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your door and window estimates"})]}),e.jsxs("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["doors","windows","trim","hardware","installation"].map(J=>e.jsx("button",{onClick:()=>r(J),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===J?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:J.charAt(0).toUpperCase()+J.slice(1)},J))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>se(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:ge().map((J,Ae)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:k===Ae?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:le,onChange:Fe=>te(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Fe=>M(parseFloat(Fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:ie,onChange:Fe=>K(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Fm.map(Fe=>e.jsx("option",{value:Fe.value,children:Fe.label},Fe.value))}),e.jsx("input",{type:"text",value:H,onChange:Fe=>I(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>We(Ae,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",ue(J)]})]}),e.jsx("button",{onClick:()=>je(Ae,J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},Ae))}),oe().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:oe().map(J=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:E===J.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-2",children:[e.jsx("input",{type:"text",value:le,onChange:Ae=>te(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Ae=>M(parseFloat(Ae.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:ie,onChange:Ae=>K(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Fm.map(Ae=>e.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))}),e.jsx("input",{type:"text",value:H,onChange:Ae=>I(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:Le,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",G(J.unit,J.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ce(J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>fe(J.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},J.id))})]}),oe().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:de,onChange:J=>re(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="doors"?"e.g., Premium Entry Door - Mahogany":t==="windows"?"e.g., Bay Window - Triple Pane":t==="trim"?"e.g., Crown Molding":t==="hardware"?"e.g., Smart Lock Set":"e.g., Weatherstripping Kit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:z,onChange:J=>ne(parseFloat(J.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:Y,onChange:J=>X(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Fm.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ye,onChange:J=>pe(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Specify the quantity for this material"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{se(!1),re(""),ne(0),X("unit"),pe("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!de||typeof z!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},m5=[{name:"Sink",unit:"per piece",price:149.98,category:"fixtures",unitSpec:""},{name:"Toilet",unit:"per piece",price:199.98,category:"fixtures",unitSpec:""},{name:"Shower Kit Complete",unit:"per piece",price:299.98,category:"fixtures",unitSpec:""},{name:"Shower Valve",unit:"per piece",price:129.98,category:"fixtures",unitSpec:""},{name:"Shower Head",unit:"per piece",price:49.98,category:"fixtures",unitSpec:""},{name:"Shower Trim Kit",unit:"per piece",price:79.98,category:"fixtures",unitSpec:""},{name:"Shower Drain Assembly",unit:"per piece",price:39.98,category:"fixtures",unitSpec:""},{name:"Bathtub",unit:"per piece",price:399.98,category:"fixtures",unitSpec:""},{name:"Washer Connection Box",unit:"per piece",price:24.98,category:"fixtures",unitSpec:""},{name:"Dishwasher Connection Kit",unit:"per piece",price:19.98,category:"fixtures",unitSpec:""}],h5=[{name:'PEX 1/2"',unit:"per linear foot",price:.89,category:"pipes",unitSpec:""},{name:'PEX 3/4"',unit:"per linear foot",price:1.29,category:"pipes",unitSpec:""},{name:'PEX 1"',unit:"per linear foot",price:1.89,category:"pipes",unitSpec:""},{name:'Copper 1/2"',unit:"per linear foot",price:3.98,category:"pipes",unitSpec:""},{name:'Copper 3/4"',unit:"per linear foot",price:5.98,category:"pipes",unitSpec:""},{name:'Copper 1"',unit:"per linear foot",price:7.98,category:"pipes",unitSpec:""},{name:'CPVC 1/2"',unit:"per linear foot",price:1.29,category:"pipes",unitSpec:""},{name:'CPVC 3/4"',unit:"per linear foot",price:1.98,category:"pipes",unitSpec:""},{name:'CPVC 1"',unit:"per linear foot",price:2.98,category:"pipes",unitSpec:""},{name:'PVC 1-1/2"',unit:"per linear foot",price:2.98,category:"pipes",unitSpec:""},{name:'PVC 2"',unit:"per linear foot",price:3.98,category:"pipes",unitSpec:""},{name:'PVC 3"',unit:"per linear foot",price:5.98,category:"pipes",unitSpec:""},{name:'PVC 4"',unit:"per linear foot",price:8.98,category:"pipes",unitSpec:""},{name:'ABS 1-1/2"',unit:"per linear foot",price:3.98,category:"pipes",unitSpec:""},{name:'ABS 2"',unit:"per linear foot",price:4.98,category:"pipes",unitSpec:""},{name:'ABS 3"',unit:"per linear foot",price:6.98,category:"pipes",unitSpec:""},{name:'ABS 4"',unit:"per linear foot",price:9.98,category:"pipes",unitSpec:""},{name:'Cast Iron 2"',unit:"per linear foot",price:12.98,category:"pipes",unitSpec:""},{name:'Cast Iron 3"',unit:"per linear foot",price:18.98,category:"pipes",unitSpec:""},{name:'Cast Iron 4"',unit:"per linear foot",price:24.98,category:"pipes",unitSpec:""}],f5=[{name:"PEX Fitting Set (Elbows/Tees/Couplings/Adapters/Valve)",unit:"average",price:3.36,category:"fittings",unitSpec:""},{name:"Copper Fitting Set (Elbows/Tees/Couplings/Adapters/Valve)",unit:"average",price:5.8,category:"fittings",unitSpec:""},{name:"CPVC Fitting Set (Elbows/Tees/Couplings/Adapters/Valve)",unit:"average",price:3.57,category:"fittings",unitSpec:""},{name:"PVC Fitting Set (Elbows/Tees/Couplings/Adapters/Valve)",unit:"average",price:5.29,category:"fittings",unitSpec:""},{name:"ABS Fitting Set (Elbows/Tees/Couplings/Adapters/Valve)",unit:"average",price:6.32,category:"fittings",unitSpec:""},{name:"Cast Iron Fitting Set (Elbows/Tees/Couplings/Adapters/Valve)",unit:"average",price:22.3,category:"fittings",unitSpec:""}],g5=[{name:"Tank Water Heater 30gal",unit:"per unit",price:399.98,category:"equipment",unitSpec:""},{name:"Tank Water Heater 40gal",unit:"per unit",price:449.98,category:"equipment",unitSpec:""},{name:"Tank Water Heater 50gal",unit:"per unit",price:549.98,category:"equipment",unitSpec:""},{name:"Tank Water Heater 75gal",unit:"per unit",price:799.98,category:"equipment",unitSpec:""},{name:"Tankless Water Heater (30 capacity)",unit:"per unit",price:699.98,category:"equipment",unitSpec:""},{name:"Tankless Water Heater (40 capacity)",unit:"per unit",price:899.98,category:"equipment",unitSpec:""},{name:"Tankless Water Heater (50 capacity)",unit:"per unit",price:1099.98,category:"equipment",unitSpec:""},{name:"Tankless Water Heater (75 capacity)",unit:"per unit",price:1499.98,category:"equipment",unitSpec:""},{name:"Tank Water Heater Installation Kit",unit:"per kit",price:89.98,category:"equipment",unitSpec:""},{name:"Tankless Water Heater Installation Kit",unit:"per kit",price:149.98,category:"equipment",unitSpec:""},{name:"Water Softener System",unit:"per unit",price:599.98,category:"equipment",unitSpec:""},{name:"Softener Installation Kit",unit:"per kit",price:89.98,category:"equipment",unitSpec:""},{name:"Pressure Tank 20gal",unit:"per unit",price:199.98,category:"equipment",unitSpec:""},{name:"Pressure Tank 30gal",unit:"per unit",price:249.98,category:"equipment",unitSpec:""},{name:"Pressure Tank 40gal",unit:"per unit",price:299.98,category:"equipment",unitSpec:""},{name:"Pressure Tank Installation Kit",unit:"per kit",price:69.98,category:"equipment",unitSpec:""}],p5=[{name:"Supply Lines",unit:"each",price:12.98,category:"drainage",unitSpec:""},{name:"Toilet Drain Assembly",unit:"per set",price:24.98,category:"drainage",unitSpec:""},{name:"Tub Drain Assembly",unit:"per set",price:49.98,category:"drainage",unitSpec:""},{name:"Shower Drain Assembly",unit:"per set",price:39.98,category:"drainage",unitSpec:""},{name:"Standard Drain Assembly",unit:"per set",price:29.98,category:"drainage",unitSpec:""},{name:'Sewer Pipe 4"',unit:"per linear foot",price:12.98,category:"drainage",unitSpec:""},{name:"Cleanouts",unit:"each",price:24.98,category:"drainage",unitSpec:""}],Em=[{value:"piece",label:"per piece"},{value:"linear_foot",label:"per linear foot"},{value:"set",label:"per set"},{value:"unit",label:"per unit"},{value:"kit",label:"per kit"},{value:"each",label:"each"},{value:"average",label:"average"}],CH=()=>{const s=Zt(),[t,r]=p.useState("fixtures"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(m5),[u,m]=p.useState(h5),[h,x]=p.useState(f5),[f,b]=p.useState(g5),[v,j]=p.useState(p5),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState([]),[_,$]=p.useState([]),[k,L]=p.useState(null),[E,O]=p.useState(null),[le,te]=p.useState(""),[V,M]=p.useState(0),[ie,K]=p.useState("piece"),[H,I]=p.useState(""),[ee,se]=p.useState(!1),[de,re]=p.useState(""),[z,ne]=p.useState(0),[Y,X]=p.useState("piece"),[ye,pe]=p.useState("");p.useEffect(()=>{Ce()},[]);const Ce=async()=>{o(!0);try{const J=await Ve.getOrCreateConfig("plumbing");if(!J.success||!J.data){alert("Failed to load configuration");return}const Ae=J.data;if(n(Ae.id),Ae.is_configured){const Fe=await Ve.getMaterials(Ae.id);if(Fe.success&&Fe.data){const Qe=Fe.data.filter(ct=>!ct.is_archived),Ie=Qe.filter(ct=>ct.category==="fixtures"),et=Qe.filter(ct=>ct.category==="pipes"),ot=Qe.filter(ct=>ct.category==="fittings"),lt=Qe.filter(ct=>ct.category==="equipment"),vt=Qe.filter(ct=>ct.category==="drainage");C(Ie),F(et),q(ot),D(lt),$(vt)}}}catch(J){console.error("Error loading configuration:",J),alert("Failed to load configuration")}finally{o(!1)}},je=(J,Ae)=>{L(J),te(Ae.name),M(Ae.price),K(Re(Ae.unit)),I(Ae.unitSpec||"")},ce=J=>{O(J.id),te(J.name),M(J.price),K(J.unit),I(J.metadata?.unitSpec||"")},Te=()=>{L(null),O(null),te(""),M(0),K("piece"),I("")},We=async(J,Ae)=>{if(!a)return;(await Ve.addMaterial(a,{name:le,price:V,unit:ie,category:Ae,metadata:H?{unitSpec:H}:void 0})).success?((Ae==="fixtures"?d:Ae==="pipes"?m:Ae==="fittings"?x:Ae==="equipment"?b:j)(Ie=>Ie.map((et,ot)=>ot===J?{...et,name:le,price:V,unit:G(ie)}:et)),await Ce(),Te()):alert("Failed to update material")},Le=async()=>{if(!E)return;const J=[...S,...B,...Q,...P,..._].find(Fe=>Fe.id===E);(await Ve.updateMaterial(E,{name:le,price:V,unit:ie,metadata:{...J?.metadata,unitSpec:H}})).success?(await Ce(),Te()):alert("Failed to update material")},U=async()=>{if(!a||!de||typeof z!="number")return;const J=t;(await Ve.addMaterial(a,{name:de,price:z,unit:Y,category:J,metadata:ye?{unitSpec:ye}:void 0})).success?(await Ce(),se(!1),re(""),ne(0),X("piece"),pe("")):alert("Failed to add material")},fe=async J=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(J)).success?await Ce():alert("Failed to delete material")},Se=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(m5),m(h5),x(f5),b(g5),j(p5),await Ce()):alert("Failed to reset configuration")},Re=J=>Em.find(Fe=>Fe.label===J)?.value||"piece",G=(J,Ae)=>{const Qe=Em.find(Ie=>Ie.value===J)?.label||"per piece";return Ae?`${Qe} (${Ae})`:Qe},ue=J=>J.unitSpec?G(J.unit||Re(J.unit),J.unitSpec):J.unit?.startsWith("per ")?J.unit:G(J.unit||Re(J.unit)),ge=()=>{switch(t){case"fixtures":return l;case"pipes":return u;case"fittings":return h;case"equipment":return f;case"drainage":return v}},oe=()=>{switch(t){case"fixtures":return S;case"pipes":return B;case"fittings":return Q;case"equipment":return P;case"drainage":return _}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Plumbing Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your plumbing estimates"})]}),e.jsxs("button",{onClick:Se,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["fixtures","pipes","fittings","equipment","drainage"].map(J=>e.jsx("button",{onClick:()=>r(J),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===J?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:J.charAt(0).toUpperCase()+J.slice(1)},J))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>se(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:ge().map((J,Ae)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:k===Ae?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:le,onChange:Fe=>te(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Fe=>M(parseFloat(Fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:ie,onChange:Fe=>K(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Em.map(Fe=>e.jsx("option",{value:Fe.value,children:Fe.label},Fe.value))}),e.jsx("input",{type:"text",value:H,onChange:Fe=>I(Fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>We(Ae,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",ue(J)]})]}),e.jsx("button",{onClick:()=>je(Ae,J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},Ae))}),oe().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:oe().map(J=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:E===J.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:le,onChange:Ae=>te(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:V,onChange:Ae=>M(parseFloat(Ae.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:ie,onChange:Ae=>K(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Em.map(Ae=>e.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))}),e.jsx("input",{type:"text",value:H,onChange:Ae=>I(Ae.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:Le,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:Te,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:J.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",J.price.toFixed(2)," ",G(J.unit,J.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ce(J),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>fe(J.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},J.id))})]}),oe().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:de,onChange:J=>re(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="fixtures"?"e.g., Premium Faucet":t==="pipes"?'e.g., Copper 2"':t==="fittings"?"e.g., Brass Tee":t==="equipment"?"e.g., Premium Water Heater":"e.g., Premium Drain Kit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:z,onChange:J=>ne(parseFloat(J.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:Y,onChange:J=>X(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Em.map(J=>e.jsx("option",{value:J.value,children:J.label},J.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ye,onChange:J=>pe(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{se(!1),re(""),ne(0),X("piece"),pe("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!de||typeof z!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},x5=[{name:"2x4 Lumber",unit:"per piece",price:3.98,category:"lumber",unitSpec:"8 ft"},{name:"2x6 Lumber",unit:"per piece",price:5.98,category:"lumber",unitSpec:"8 ft"}],b5=[{name:'OSB 7/16"',unit:"per 4x8 sheet",price:15.98,category:"sheathing",unitSpec:"32 sq ft"},{name:'OSB 15/32"',unit:"per 4x8 sheet",price:18.98,category:"sheathing",unitSpec:"32 sq ft"},{name:'OSB 19/32"',unit:"per 4x8 sheet",price:22.98,category:"sheathing",unitSpec:"32 sq ft"},{name:'Plywood 7/16"',unit:"per 4x8 sheet",price:24.98,category:"sheathing",unitSpec:"32 sq ft"},{name:'Plywood 15/32"',unit:"per 4x8 sheet",price:28.98,category:"sheathing",unitSpec:"32 sq ft"},{name:'Plywood 19/32"',unit:"per 4x8 sheet",price:32.98,category:"sheathing",unitSpec:"32 sq ft"}],y5=[{name:"Tiedown",unit:"per piece",price:12.98,category:"hardware",unitSpec:"1 count"},{name:'Framing Nails (Passlode 3" 1000ct box)',unit:"per box",price:89.98,category:"hardware",unitSpec:"1000 count"}],_m=[{value:"piece",label:"per piece"},{value:"sheet",label:"per 4x8 sheet"},{value:"box",label:"per box"}],SH=()=>{const s=Zt(),[t,r]=p.useState("lumber"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(x5),[u,m]=p.useState(b5),[h,x]=p.useState(y5),[f,b]=p.useState([]),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState(null),[Q,q]=p.useState(null),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("piece"),[E,O]=p.useState(""),[le,te]=p.useState(!1),[V,M]=p.useState(""),[ie,K]=p.useState(0),[H,I]=p.useState("piece"),[ee,se]=p.useState("");p.useEffect(()=>{de()},[]);const de=async()=>{o(!0);try{const U=await Ve.getOrCreateConfig("framing");if(!U.success||!U.data){alert("Failed to load configuration");return}const fe=U.data;if(n(fe.id),fe.is_configured){const Se=await Ve.getMaterials(fe.id);if(Se.success&&Se.data){const Re=Se.data.filter(oe=>!oe.is_archived),G=Re.filter(oe=>oe.category==="lumber"),ue=Re.filter(oe=>oe.category==="sheathing"),ge=Re.filter(oe=>oe.category==="hardware");b(G),j(ue),C(ge)}}}catch(U){console.error("Error loading configuration:",U),alert("Failed to load configuration")}finally{o(!1)}},re=(U,fe)=>{F(U),D(fe.name),$(fe.price),L(je(fe.unit)),O(fe.unitSpec||"")},z=U=>{q(U.id),D(U.name),$(U.price),L(U.unit),O(U.metadata?.unitSpec||"")},ne=()=>{F(null),q(null),D(""),$(0),L("piece"),O("")},Y=async(U,fe)=>{if(!a)return;(await Ve.addMaterial(a,{name:P,price:_,unit:k,category:fe,metadata:E?{unitSpec:E}:void 0})).success?((fe==="lumber"?d:fe==="sheathing"?m:x)(G=>G.map((ue,ge)=>ge===U?{...ue,name:P,price:_,unit:ce(k)}:ue)),await de(),ne()):alert("Failed to update material")},X=async()=>{if(!Q)return;const U=Le().find(Se=>Se.id===Q);(await Ve.updateMaterial(Q,{name:P,price:_,unit:k,metadata:{...U?.metadata,unitSpec:E}})).success?(await de(),ne()):alert("Failed to update material")},ye=async()=>{if(!a||!V||typeof ie!="number")return;const U=t;(await Ve.addMaterial(a,{name:V,price:ie,unit:H,category:U,metadata:ee?{unitSpec:ee}:void 0})).success?(await de(),te(!1),M(""),K(0),I("piece"),se("")):alert("Failed to add material")},pe=async U=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(U)).success?await de():alert("Failed to delete material")},Ce=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(x5),m(b5),x(y5),await de()):alert("Failed to reset configuration")},je=U=>_m.find(Se=>Se.label===U)?.value||"piece",ce=(U,fe)=>{const Re=_m.find(G=>G.value===U)?.label||"per piece";return fe?`${Re} (${fe})`:Re},Te=U=>U.unitSpec?ce(U.unit||je(U.unit),U.unitSpec):U.unit?.startsWith("per ")?U.unit:ce(U.unit||je(U.unit)),We=()=>{switch(t){case"lumber":return l;case"sheathing":return u;case"hardware":return h}},Le=()=>{switch(t){case"lumber":return f;case"sheathing":return v;case"hardware":return S}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Framing Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your framing estimates"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["lumber","sheathing","hardware"].map(U=>e.jsx("button",{onClick:()=>r(U),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===U?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:U.charAt(0).toUpperCase()+U.slice(1)},U))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>te(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:We().map((U,fe)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:B===fe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:Se=>D(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:Se=>$(parseFloat(Se.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:k,onChange:Se=>L(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:_m.map(Se=>e.jsx("option",{value:Se.value,children:Se.label},Se.value))}),e.jsx("input",{type:"text",value:E,onChange:Se=>O(Se.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Y(fe,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",Te(U)]})]}),e.jsx("button",{onClick:()=>re(fe,U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},fe))}),Le().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Le().map(U=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:Q===U.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:P,onChange:fe=>D(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:fe=>$(parseFloat(fe.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:k,onChange:fe=>L(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:_m.map(fe=>e.jsx("option",{value:fe.value,children:fe.label},fe.value))}),e.jsx("input",{type:"text",value:E,onChange:fe=>O(fe.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:X,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:ne,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:U.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",U.price.toFixed(2)," ",ce(U.unit,U.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(U),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>pe(U.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},U.id))})]}),Le().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),le&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:V,onChange:U=>M(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="lumber"?"e.g., 2x8 Lumber":t==="sheathing"?'e.g., OSB 23/32"':"e.g., Hurricane Ties"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ie,onChange:U=>K(parseFloat(U.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:H,onChange:U=>I(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:_m.map(U=>e.jsx("option",{value:U.value,children:U.label},U.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:ee,onChange:U=>se(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{te(!1),M(""),K(0),I("piece"),se("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!V||typeof ie!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},v5=[{name:"Volume Rate",unit:"per cubic foot",price:1.5,category:"rates",unitSpec:""},{name:"Weight Rate",unit:"per pound",price:.5,category:"rates",unitSpec:""}],w5=[{name:"Labor Rate",unit:"per hour per person",price:45,category:"labor",unitSpec:""}],j5=[{name:"Distance Fee",unit:"per mile",price:2.5,category:"fees",unitSpec:""},{name:"Special Disposal Fee",unit:"per item",price:25,category:"fees",unitSpec:""},{name:"Disposal Permit",unit:"per permit",price:150,category:"fees",unitSpec:""},{name:"Hazardous Material Fee",unit:"per pound",price:.75,category:"fees",unitSpec:""}],N5=[{name:"Easy Access Multiplier",unit:"multiplier",price:1,category:"multipliers",unitSpec:""},{name:"Moderate Access Multiplier",unit:"multiplier",price:1.25,category:"multipliers",unitSpec:""},{name:"Difficult Access Multiplier",unit:"multiplier",price:1.5,category:"multipliers",unitSpec:""},{name:"Additional Floor Multiplier",unit:"per floor (percentage)",price:.15,category:"multipliers",unitSpec:""}],Pm=[{value:"cubic_foot",label:"per cubic foot"},{value:"pound",label:"per pound"},{value:"hour_person",label:"per hour per person"},{value:"mile",label:"per mile"},{value:"item",label:"per item"},{value:"permit",label:"per permit"},{value:"multiplier",label:"multiplier"},{value:"percentage",label:"per floor (percentage)"}],BH=()=>{const s=Zt(),[t,r]=p.useState("rates"),[a,n]=p.useState(null),[i,o]=p.useState(!0),[l,d]=p.useState(v5),[u,m]=p.useState(w5),[h,x]=p.useState(j5),[f,b]=p.useState(N5),[v,j]=p.useState([]),[S,C]=p.useState([]),[B,F]=p.useState([]),[Q,q]=p.useState([]),[P,D]=p.useState(null),[_,$]=p.useState(null),[k,L]=p.useState(""),[E,O]=p.useState(0),[le,te]=p.useState("cubic_foot"),[V,M]=p.useState(""),[ie,K]=p.useState(!1),[H,I]=p.useState(""),[ee,se]=p.useState(0),[de,re]=p.useState("cubic_foot"),[z,ne]=p.useState("");p.useEffect(()=>{Y()},[]);const Y=async()=>{o(!0);try{const G=await Ve.getOrCreateConfig("junk_removal");if(!G.success||!G.data){alert("Failed to load configuration");return}const ue=G.data;if(n(ue.id),ue.is_configured){const ge=await Ve.getMaterials(ue.id);if(ge.success&&ge.data){const oe=ge.data.filter(Ie=>!Ie.is_archived),J=oe.filter(Ie=>Ie.category==="rates"),Ae=oe.filter(Ie=>Ie.category==="labor"),Fe=oe.filter(Ie=>Ie.category==="fees"),Qe=oe.filter(Ie=>Ie.category==="multipliers");j(J),C(Ae),F(Fe),q(Qe)}}}catch(G){console.error("Error loading configuration:",G),alert("Failed to load configuration")}finally{o(!1)}},X=(G,ue)=>{D(G),L(ue.name),O(ue.price),te(Le(ue.unit)),M(ue.unitSpec||"")},ye=G=>{$(G.id),L(G.name),O(G.price),te(G.unit),M(G.metadata?.unitSpec||"")},pe=()=>{D(null),$(null),L(""),O(0),te("cubic_foot"),M("")},Ce=async(G,ue)=>{if(!a)return;(await Ve.addMaterial(a,{name:k,price:E,unit:le,category:ue,metadata:V?{unitSpec:V}:void 0})).success?((ue==="rates"?d:ue==="labor"?m:ue==="fees"?x:b)(J=>J.map((Ae,Fe)=>Fe===G?{...Ae,name:k,price:E,unit:U(le)}:Ae)),await Y(),pe()):alert("Failed to update material")},je=async()=>{if(!_)return;const G=Re().find(ge=>ge.id===_);if(!G)return;(await Ve.updateMaterial(_,{name:k,price:E,unit:le,metadata:{...G.metadata,unitSpec:V}})).success?(await Y(),pe()):alert("Failed to update material")},ce=async()=>{if(!a||!H||typeof ee!="number")return;const G=t;(await Ve.addMaterial(a,{name:H,price:ee,unit:de,category:G,metadata:z?{unitSpec:z}:void 0})).success?(await Y(),K(!1),I(""),se(0),re("cubic_foot"),ne("")):alert("Failed to add material")},Te=async G=>{if(!confirm("Permanently delete this material? This cannot be undone."))return;(await Ve.deleteMaterial(G)).success?await Y():alert("Failed to delete material")},We=async()=>{if(!confirm("Reset all custom materials? This cannot be undone.")||!a)return;(await Ve.resetConfiguration(a)).success?(d(v5),m(w5),x(j5),b(N5),await Y()):alert("Failed to reset configuration")},Le=G=>Pm.find(ge=>ge.label===G)?.value||"cubic_foot",U=(G,ue)=>{const oe=Pm.find(J=>J.value===G)?.label||"per cubic foot";return ue?`${oe} (${ue})`:oe},fe=G=>G.unitSpec?U(G.unit||Le(G.unit),G.unitSpec):G.unit?.startsWith("per ")?G.unit:U(G.unit||Le(G.unit)),Se=()=>{switch(t){case"rates":return l;case"labor":return u;case"fees":return h;case"multipliers":return f}},Re=()=>{switch(t){case"rates":return v;case"labor":return S;case"fees":return B;case"multipliers":return Q}};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configure Junk Removal Calculator"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize materials and pricing for your junk removal estimates"})]}),e.jsxs("button",{onClick:We,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4 px-6",children:["rates","labor","fees","multipliers"].map(G=>e.jsx("button",{onClick:()=>r(G),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors ${t===G?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:G.charAt(0).toUpperCase()+G.slice(1)},G))})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Default ",t.charAt(0).toUpperCase()+t.slice(1)," Materials"]}),e.jsxs("button",{onClick:()=>K(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Material"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:Se().map((G,ue)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:P===ue?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ge=>L(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Material name"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ge=>O(parseFloat(ge.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:le,onChange:ge=>te(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Pm.map(ge=>e.jsx("option",{value:ge.value,children:ge.label},ge.value))}),e.jsx("input",{type:"text",value:V,onChange:ge=>M(ge.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>Ce(ue,t),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",fe(G)]})]}),e.jsx("button",{onClick:()=>X(ue,G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},ue))}),Re().length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Materials"}),e.jsx("div",{className:"space-y-3",children:Re().map(G=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:_===G.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:k,onChange:ue=>L(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:E,onChange:ue=>O(parseFloat(ue.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:le,onChange:ue=>te(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Pm.map(ue=>e.jsx("option",{value:ue.value,children:ue.label},ue.value))}),e.jsx("input",{type:"text",value:V,onChange:ue=>M(ue.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:je,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:pe,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:G.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",G.price.toFixed(2)," ",U(G.unit,G.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ye(G),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Te(G.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},G.id))})]}),Re().length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom materials added yet. Click "Add New Material" to create one.'})]})]}),ie&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Add New ",t.charAt(0).toUpperCase()+t.slice(1)," Material"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),e.jsx("input",{type:"text",value:H,onChange:G=>I(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:t==="rates"?"e.g., Premium Volume Rate":t==="labor"?"e.g., Specialist Labor Rate":t==="fees"?"e.g., Rush Service Fee":"e.g., Stairs Access Multiplier"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:ee,onChange:G=>se(parseFloat(G.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:de,onChange:G=>re(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Pm.map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:z,onChange:G=>ne(G.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., 1000 sq ft, 165 linear ft, 100 count"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{K(!1),I(""),se(0),re("cubic_foot"),ne("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:ce,disabled:!H||typeof ee!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Material"})]})]})})]})},C5=[{name:"Soil Removal (Loose)",unit:"per cubic yard",price:15,category:"excavation-services"},{name:"Soil Removal (Compacted)",unit:"per cubic yard",price:22,category:"excavation-services"},{name:"Soil Removal (Rocky)",unit:"per cubic yard",price:35,category:"excavation-services"},{name:"Haul-Off Service",unit:"per trip",price:150,category:"excavation-services"},{name:"Haul-Off Service (Large Load)",unit:"per trip",price:300,category:"excavation-services"}],Im=[{value:"cubic_yard",label:"per cubic yard"},{value:"trip",label:"per trip"},{value:"hour",label:"per hour"},{value:"day",label:"per day"},{value:"ton",label:"per ton"},{value:"load",label:"per load"},{value:"unit",label:"per unit"}],kH=()=>{const s=Zt(),[t,r]=p.useState(null),[a,n]=p.useState(!0),[i,o]=p.useState(C5),[l,d]=p.useState([]),[u,m]=p.useState(null),[h,x]=p.useState(null),[f,b]=p.useState(""),[v,j]=p.useState(0),[S,C]=p.useState("cubic_yard"),[B,F]=p.useState(""),[Q,q]=p.useState(!1),[P,D]=p.useState(""),[_,$]=p.useState(0),[k,L]=p.useState("cubic_yard"),[E,O]=p.useState("");p.useEffect(()=>{le()},[]);const le=async()=>{n(!0);try{const z=await Ve.getOrCreateConfig("excavation");if(!z.success||!z.data){alert("Failed to load configuration");return}const ne=z.data;if(r(ne.id),ne.is_configured){const Y=await Ve.getMaterials(ne.id);if(Y.success&&Y.data){const ye=Y.data.filter(pe=>!pe.is_archived).filter(pe=>pe.category==="excavation-services");d(ye)}}}catch(z){console.error("Error loading configuration:",z),alert("Failed to load configuration")}finally{n(!1)}},te=(z,ne)=>{m(z),b(ne.name),j(ne.price),C(se(ne.unit)),F("")},V=z=>{x(z.id),b(z.name),j(z.price),C(z.unit),F(z.metadata?.unitSpec||"")},M=()=>{m(null),x(null),b(""),j(0),C("cubic_yard"),F("")},ie=async z=>{if(!t)return;(await Ve.addMaterial(t,{name:f,price:v,unit:S,category:"excavation-services",metadata:B?{unitSpec:B}:void 0})).success?(o(Y=>Y.map((X,ye)=>ye===z?{...X,name:f,price:v,unit:de(S)}:X)),await le(),M()):alert("Failed to update service")},K=async()=>{if(!h)return;const z=l.find(Y=>Y.id===h);(await Ve.updateMaterial(h,{name:f,price:v,unit:S,metadata:{...z?.metadata,unitSpec:B}})).success?(await le(),M()):alert("Failed to update service")},H=async()=>{if(!t||!P||typeof _!="number")return;(await Ve.addMaterial(t,{name:P,price:_,unit:k,category:"excavation-services",metadata:E?{unitSpec:E}:void 0})).success?(await le(),q(!1),D(""),$(0),L("cubic_yard"),O("")):alert("Failed to add service")},I=async z=>{if(!confirm("Permanently delete this service? This cannot be undone."))return;(await Ve.deleteMaterial(z)).success?await le():alert("Failed to delete service")},ee=async()=>{if(!confirm("Reset all custom services? This cannot be undone.")||!t)return;(await Ve.resetConfiguration(t)).success?(o(C5),await le()):alert("Failed to reset configuration")},se=z=>Im.find(Y=>Y.label===z)?.value||"cubic_yard",de=(z,ne)=>{const X=Im.find(ye=>ye.value===z)?.label||"per cubic yard";return ne?`${X} (${ne})`:X},re=z=>z.unitSpec?de(z.unit||se(z.unit),z.unitSpec):z.unit?.startsWith("per ")?z.unit:de(z.unit||se(z.unit));return a?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>s("/pricing"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(hs,{className:"w-4 h-4"}),"Back to Pricing Calculator"]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(TC,{className:"w-6 h-6"}),"Configure Excavation Calculator"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Customize services and pricing for your excavation estimates"})]}),e.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Reset All"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Excavation Services"}),e.jsxs("button",{onClick:()=>q(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:[e.jsx(Gt,{className:"w-4 h-4"}),"Add New Service"]})]}),e.jsx("div",{className:"space-y-3 mb-8",children:i.map((z,ne)=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-blue-50 rounded-lg border border-blue-100",children:u===ne?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:f,onChange:Y=>b(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Service name"}),e.jsx("input",{type:"number",step:"0.01",value:v,onChange:Y=>j(parseFloat(Y.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Price"}),e.jsx("select",{value:S,onChange:Y=>C(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Im.map(Y=>e.jsx("option",{value:Y.value,children:Y.label},Y.value))}),e.jsx("input",{type:"text",value:B,onChange:Y=>F(Y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Optional spec"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:()=>ie(ne),className:"p-2 text-green-600 hover:bg-green-50 rounded-md",title:"Save",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:M,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Cancel",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:z.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",z.price.toFixed(2)," ",re(z)]})]}),e.jsx("button",{onClick:()=>te(ne,z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit Price",children:e.jsx(ir,{className:"w-4 h-4"})})]})},ne))}),l.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-md font-semibold text-gray-900 mb-3",children:"Custom Services"}),e.jsx("div",{className:"space-y-3",children:l.map(z=>e.jsx("div",{className:"flex items-center justify-between py-3 px-4 bg-gray-50 rounded-lg",children:h===z.id?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsx("input",{type:"text",value:f,onChange:ne=>b(ne.target.value),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("input",{type:"number",step:"0.01",value:v,onChange:ne=>j(parseFloat(ne.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md"}),e.jsx("select",{value:S,onChange:ne=>C(ne.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:Im.map(ne=>e.jsx("option",{value:ne.value,children:ne.label},ne.value))}),e.jsx("input",{type:"text",value:B,onChange:ne=>F(ne.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",placeholder:"Optional spec"})]}),e.jsxs("div",{className:"flex gap-2 ml-3",children:[e.jsx("button",{onClick:K,className:"p-2 text-green-600 hover:bg-green-50 rounded-md",children:e.jsx(zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:M,className:"p-2 text-red-600 hover:bg-red-50 rounded-md",children:e.jsx(xt,{className:"w-4 h-4"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:z.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",z.price.toFixed(2)," ",de(z.unit,z.metadata?.unitSpec)]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>V(z),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md",title:"Edit",children:e.jsx(ir,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>I(z.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-md",title:"Delete",children:e.jsx(nr,{className:"w-4 h-4"})})]})]})},z.id))})]}),l.length===0&&e.jsx("div",{className:"text-center py-6 text-gray-500 border-t border-gray-200 mt-6",children:'No custom services added yet. Click "Add New Service" to create one.'})]})}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Excavation Service"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service Name"}),e.jsx("input",{type:"text",value:P,onChange:z=>D(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., Gravel Removal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price"}),e.jsx("input",{type:"number",step:"0.01",value:_,onChange:z=>$(parseFloat(z.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsx("select",{value:k,onChange:z=>L(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",children:Im.map(z=>e.jsx("option",{value:z.value,children:z.label},z.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Specification (Optional)"}),e.jsx("input",{type:"text",value:E,onChange:z=>O(z.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"e.g., per truck load, per hour minimum"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{q(!1),D(""),$(0),L("cubic_yard"),O("")},className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:!P||typeof _!="number",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Add Service"})]})]})})]})},S5=` Hi! I'm Hank, your AI estimating assistant. I can help you create accurate construction estimates through conversation.

Just tell me what project you're working on, and I'll calculate materials, pricing, and generate a professional estimate!

Examples:
 "I need an estimate for a 25x30 deck"
 "Calculate a 25x25 concrete pad, 4 inches deep"
 "Help me price a roofing job"

What would you like to estimate today?`,vg="contractorai_chat_history",B5=50,Um={async getCurrentUserId(){try{const{data:{user:s}}=await _e.auth.getUser();return s?.id||null}catch(s){return console.error("Error getting user:",s),null}},async getAllSessions(){try{const s=await this.getCurrentUserId();if(s){const{data:t,error:r}=await _e.from("chat_sessions").select("*").eq("user_id",s).order("updated_at",{ascending:!1}).limit(B5);return r?(console.error("Error loading chat sessions from Supabase:",r),[]):(t||[]).map(a=>({id:a.id,sessionId:a.session_id,userId:a.user_id,title:a.title,messages:a.messages,estimate:a.estimate,createdAt:new Date(a.created_at),updatedAt:new Date(a.updated_at)}))}else{const t=localStorage.getItem(vg);return t?JSON.parse(t).map(a=>({...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),messages:a.messages.map(n=>({...n,timestamp:new Date(n.timestamp)}))})):[]}}catch(s){return console.error("Error loading chat history:",s),[]}},async saveSession(s){try{const t=await this.getCurrentUserId();if(t){const{data:r}=await _e.from("chat_sessions").select("id").eq("session_id",s.sessionId).eq("user_id",t).single(),a={user_id:t,session_id:s.sessionId,title:s.title,messages:s.messages,estimate:s.estimate};r?await _e.from("chat_sessions").update(a).eq("id",r.id):await _e.from("chat_sessions").insert(a)}else{const r=await this.getAllSessions(),a=r.findIndex(i=>i.sessionId===s.sessionId);a>=0?r[a]={...s,updatedAt:new Date}:r.unshift({...s,id:s.sessionId,createdAt:new Date,updatedAt:new Date});const n=r.slice(0,B5);localStorage.setItem(vg,JSON.stringify(n))}}catch(t){console.error("Error saving chat session:",t)}},async getSession(s){return(await this.getAllSessions()).find(r=>r.sessionId===s)||null},async deleteSession(s){try{const t=await this.getCurrentUserId();if(t)await _e.from("chat_sessions").delete().eq("session_id",s).eq("user_id",t);else{const a=(await this.getAllSessions()).filter(n=>n.sessionId!==s);localStorage.setItem(vg,JSON.stringify(a))}}catch(t){console.error("Error deleting chat session:",t)}},async clearAll(){try{const s=await this.getCurrentUserId();s?await _e.from("chat_sessions").delete().eq("user_id",s):localStorage.removeItem(vg)}catch(s){console.error("Error clearing chat history:",s)}},generateTitle(s){const t=s.find(a=>a.role==="user");if(!t)return"New Chat";const r=t.content.substring(0,50);return r.length<t.content.length?`${r}...`:r},async autoSave(s,t,r){const a={id:s,sessionId:s,title:this.generateTitle(t),messages:t,estimate:r,createdAt:new Date,updatedAt:new Date};await this.saveSession(a)}},FH=()=>{const s=Zt(),[t]=p.useState(()=>`session-${Date.now()}`),[r,a]=p.useState([{id:"1",role:"assistant",content:S5,timestamp:new Date}]),[n,i]=p.useState(""),[o,l]=p.useState(!1),[d,u]=p.useState([]),[m,h]=p.useState(!1),x=k=>{u(L=>L.filter(E=>E.id!==k))},[f,b]=p.useState(!1),[v,j]=p.useState([]),S=p.useRef(null),C=p.useRef(null);p.useEffect(()=>{S.current?.scrollIntoView({behavior:"smooth"})},[r]),p.useEffect(()=>{C.current?.focus(),(async()=>{const L=await Um.getAllSessions();j(L)})()},[]),p.useEffect(()=>{r.length>1&&(async()=>{await Um.autoSave(t,r,d);const L=await Um.getAllSessions();j(L)})()},[r,d,t]);const B=async()=>{if(!n.trim()||o)return;const k={id:Date.now().toString(),role:"user",content:n.trim(),timestamp:new Date};a(L=>[...L,k]),i(""),l(!0);try{const E=await fetch("https://ujhgwcurllkkeouzwvgk.supabase.co/functions/v1/ai-calculator-chat",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVqaGd3Y3VybGxra2VvdXp3dmdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTcwMzIzMjQsImV4cCI6MjA3MjYwODMyNH0.ez6RDJ2FxgSfb7mo2Xug1lXaynKLR-2nJFO-x64UNnY"},body:JSON.stringify({messages:[...r,k],currentEstimate:d})});if(!E.ok)throw new Error("API request failed");const O=await E.json(),le={id:(Date.now()+1).toString(),role:"assistant",content:O.message,timestamp:new Date};a(te=>[...te,le]),O.updatedEstimate&&u(O.updatedEstimate)}catch(L){console.error("Chat error:",L);const E={id:(Date.now()+1).toString(),role:"assistant",content:"I'm having trouble connecting right now. Please try again in a moment.",timestamp:new Date};a(O=>[...O,E])}finally{l(!1),C.current?.focus()}},F=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),B())},Q=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k),q=d.reduce((k,L)=>k+L.totalPrice,0),P=()=>{a([{id:"1",role:"assistant",content:S5,timestamp:new Date}]),u([]),b(!1)},D=k=>{const L=k.messages.map(E=>({...E,timestamp:new Date(E.timestamp)}));a(L),u(k.estimate),b(!1)},_=async(k,L)=>{L.stopPropagation(),await Um.deleteSession(k);const E=await Um.getAllSessions();j(E)},$=()=>{const k=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(O){const le=Math.random()*16|0;return(O==="x"?le:le&3|8).toString(16)}),L=d.map(O=>({id:O.id,description:O.name,quantity:O.quantity,unit:O.unit,unitPrice:O.unitPrice,totalPrice:O.totalPrice,type:O.type})),E={id:k(),title:"AI Generated Estimate",clientName:"",projectName:"",items:L,subtotal:q,taxRate:0,taxAmount:0,total:q,status:"draft",notes:"Generated from AI Estimating Assistant",terms:"Valid for 30 days from the date of issue.",createdAt:new Date().toISOString(),expiresAt:new Date(Date.now()+720*60*60*1e3).toDateString()};s("/estimates",{state:{fromCalculator:!0,calculatorData:E}})};return e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-120px)] sm:h-[calc(100vh-200px)] max-w-6xl mx-auto gap-2 sm:gap-4 overflow-hidden",children:[f&&e.jsxs("div",{className:"fixed inset-0 lg:relative lg:w-80 bg-white lg:rounded-lg shadow-lg p-4 overflow-y-auto z-50 lg:z-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chat History"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),e.jsxs("button",{onClick:P,className:"w-full mb-4 px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Gt,{className:"w-4 h-4"}),"New Chat"]}),e.jsx("div",{className:"space-y-2",children:v.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No chat history yet"}):v.map(k=>e.jsx("div",{onClick:()=>D(k),className:"p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:k.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(k.updatedAt).toLocaleDateString()," at"," ",new Date(k.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[k.messages.length," messages  ",k.estimate.length," items"]})]}),e.jsx("button",{onClick:L=>_(k.sessionId,L),className:"text-red-500 hover:text-red-700 p-1",children:e.jsx(nr,{className:"w-4 h-4"})})]})},k.id))})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-lg shadow-lg min-h-0 overflow-hidden",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b border-gray-200 bg-gradient-to-r from-orange-500 to-orange-600 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("img",{src:Bd,alt:"Hank",className:"w-6 h-6 sm:w-8 sm:h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-bold",children:"Hank"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-orange-100 hidden sm:block",children:"Your AI Estimating Assistant"})]})]}),e.jsx("div",{className:"flex items-center gap-1 sm:gap-2",children:e.jsx("button",{onClick:()=>b(!f),className:"p-2 hover:bg-orange-600 rounded-lg transition-colors",title:"Chat History",children:e.jsx(dy,{className:"w-5 h-5"})})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 sm:p-4 space-y-3 sm:space-y-4 pb-4",children:[r.map(k=>e.jsxs("div",{className:`flex items-start gap-3 ${k.role==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center ${k.role==="user"?"bg-blue-500 hidden sm:flex":"bg-orange-500"}`,children:k.role==="user"?e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"}):e.jsx("img",{src:Bd,alt:"Hank",className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:`flex-1 sm:max-w-[80%] px-3 py-2 sm:px-4 sm:py-3 rounded-lg ${k.role==="user"?"bg-blue-500 text-white ml-auto":"bg-gray-100 text-gray-900"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap break-words text-sm sm:text-base",children:k.content}),e.jsx("div",{className:`text-[10px] sm:text-xs mt-1 ${k.role==="user"?"text-blue-100":"text-gray-500"}`,children:k.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},k.id)),o&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-500 flex items-center justify-center",children:e.jsx("img",{src:Bd,alt:"Hank",className:"w-6 h-6"})}),e.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-lg",children:e.jsx(hr,{className:"w-5 h-5 animate-spin text-orange-500"})})]}),d.length>0&&e.jsxs("div",{className:"lg:hidden mt-4 p-4 bg-gradient-to-br from-orange-50 to-yellow-50 rounded-lg border-2 border-orange-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Current Estimate"}),e.jsxs("span",{className:"text-xs bg-orange-500 text-white px-2 py-1 rounded-full",children:[d.length," items"]})]}),e.jsx("div",{className:"space-y-2 mb-3",children:d.map(k=>e.jsxs("div",{className:"p-2 bg-white rounded-lg border border-orange-100",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900 flex-1",children:k.name}),e.jsx("button",{onClick:()=>x(k.id),className:"p-1 hover:bg-red-100 rounded ml-2",title:"Remove item",children:e.jsx(xt,{className:"w-3 h-3 text-red-600"})})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[k.quantity," ",k.unit,"  ",Q(k.unitPrice)]}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 mt-1",children:Q(k.totalPrice)})]},k.id))}),e.jsxs("div",{className:"pt-2 border-t border-orange-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-xl font-bold text-orange-600",children:Q(q)})]}),e.jsxs("button",{onClick:$,className:"w-full px-4 py-2.5 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center gap-2 font-semibold text-sm",children:[e.jsx(ra,{className:"w-4 h-4"}),"Generate Estimate"]})]})]}),e.jsx("div",{ref:S})]}),e.jsx("div",{className:"p-2 sm:p-4 border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:C,type:"text",value:n,onChange:k=>i(k.target.value),onKeyPress:F,placeholder:"Type your message...",className:"flex-1 px-3 py-2 sm:px-4 text-sm sm:text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",disabled:o}),e.jsx("button",{onClick:B,disabled:!n.trim()||o,className:"px-3 sm:px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:e.jsx(Dc,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})})]}),e.jsxs("div",{className:`
        ${m?"fixed inset-0 z-50 lg:relative":"hidden lg:block"}
        lg:w-80 bg-white rounded-lg shadow-lg p-4 overflow-y-auto
      `,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Current Estimate"}),e.jsx("button",{onClick:()=>h(!1),className:"lg:hidden text-gray-500 hover:text-gray-700 p-1",children:e.jsx(xt,{className:"w-6 h-6"})})]}),d.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No items yet. Start chatting to build your estimate!"}):e.jsxs("div",{className:"space-y-3",children:[d.map(k=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 group hover:border-red-300 transition-colors",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900 flex-1",children:k.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[k.isCustom&&e.jsx("span",{className:"text-xs bg-orange-100 text-orange-700 px-2 py-0.5 rounded",children:"Custom"}),e.jsx("button",{onClick:()=>x(k.id),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-red-100 rounded",title:"Remove item",children:e.jsx(xt,{className:"w-4 h-4 text-red-600"})})]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[k.quantity," ",k.unit,"  ",Q(k.unitPrice)]}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 mt-1",children:Q(k.totalPrice)})]},k.id)),e.jsxs("div",{className:"pt-3 mt-3 border-t border-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900",children:"Total:"}),e.jsx("span",{className:"text-2xl font-bold text-orange-600",children:Q(q)})]}),e.jsxs("button",{onClick:$,className:"w-full px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center gap-2 font-semibold",children:[e.jsx(ra,{className:"w-5 h-5"}),"Generate Estimate"]})]})]})]})]})},EH=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-2 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"hidden md:block mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-orange-500 rounded-lg",children:e.jsx("img",{src:Bd,alt:"Hank",className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hank"}),e.jsx("p",{className:"text-gray-600",children:"Create estimates through conversation"})]})]})}),e.jsxs("div",{className:"md:hidden mb-2 flex items-center justify-center gap-2 bg-white rounded-lg shadow p-3",children:[e.jsx("img",{src:Bd,alt:"Hank",className:"w-8 h-8"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Hank AI"})]}),e.jsx(FH,{}),e.jsx("div",{className:"hidden sm:block mt-4 text-center text-sm text-gray-500",children:" Tip: I can calculate materials for all 21 trade types, plus add custom items like permits and labor"})]})}),lA="/assets/saul-logo-DbYO0zVy.svg",Wb="/assets/cindy-logo-JMEmA_VD.svg",Eg="/assets/bill-logo-D1PKem3q.svg",_H=()=>{const s=Zt(),t=[{id:"hank",name:"Hank",role:"AI Estimator",description:"Creates accurate construction estimates through conversation. Calculates materials, pricing, and generates professional estimates.",icon:e.jsx("img",{src:Bd,alt:"Hank",className:"w-16 h-16"}),color:"from-orange-500 to-orange-600",available:!0,route:"/ai-calculator"},{id:"saul",name:"Saul",role:"Finance Tracker",description:"Manages invoices, tracks payments, monitors cash flow, and provides financial insights for your business.",icon:e.jsx("img",{src:lA,alt:"Saul",className:"w-16 h-16"}),color:"from-green-500 to-green-600",available:!0,route:"/saul-finance"},{id:"cindy",name:"Cindy",role:"Client Relationship Manager",description:"Manages clients, tracks projects, schedules events, and drafts customer communications with your approval.",icon:e.jsx("img",{src:Wb,alt:"Cindy",className:"w-16 h-16"}),color:"from-blue-500 to-blue-600",available:!0,route:"/cindy-crm"},{id:"bill",name:"Bill",role:"Project Manager",description:"Coordinates employees, manages project timelines, schedules tasks, and keeps everything running smoothly.",icon:e.jsx("img",{src:Eg,alt:"Bill",className:"w-16 h-16"}),color:"from-purple-500 to-purple-600",available:!0,route:"/bill-project-manager"}],r=a=>{a.available&&a.route&&s(a.route)};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[e.jsx(wC,{className:"w-12 h-12 text-blue-600"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"AI Team Hub"})]}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Meet your AI-powered team members ready to help grow your contracting business"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(a=>e.jsxs("div",{onClick:()=>r(a),className:`relative bg-white rounded-xl shadow-lg overflow-hidden transition-all duration-300 ${a.available?"cursor-pointer hover:shadow-2xl hover:scale-105":"opacity-75"}`,children:[e.jsxs("div",{className:`bg-gradient-to-r ${a.color} p-6 text-white relative`,children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:a.icon}),e.jsx("h3",{className:"text-2xl font-bold text-center",children:a.name}),e.jsx("p",{className:"text-center text-sm opacity-90 mt-1",children:a.role}),!a.available&&e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs("div",{className:"bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[e.jsx(Sd,{className:"w-3 h-3"}),"Coming Soon"]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-4",children:a.description}),a.available?e.jsxs("button",{onClick:()=>r(a),className:`w-full py-3 bg-gradient-to-r ${a.color} text-white rounded-lg font-semibold hover:opacity-90 transition-opacity`,children:["Talk to ",a.name]}):e.jsx("div",{className:"w-full py-3 bg-gray-100 text-gray-500 rounded-lg font-semibold text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Sd,{className:"w-4 h-4"}),e.jsx("span",{children:"Under Construction"})]})})]}),!a.available&&e.jsx("div",{className:"absolute inset-0 pointer-events-none",children:e.jsxs("svg",{className:"w-full h-full",style:{opacity:.1},children:[e.jsx("line",{x1:"0",y1:"0",x2:"100%",y2:"100%",stroke:"currentColor",strokeWidth:"4",className:"text-gray-400"}),e.jsx("line",{x1:"100%",y1:"0",x2:"0",y2:"100%",stroke:"currentColor",strokeWidth:"4",className:"text-gray-400"})]})})]},a.id))}),e.jsxs("div",{className:"mt-12 bg-gradient-to-r from-blue-50 to-purple-50 border-2 border-blue-200 rounded-xl p-8 text-center",children:[e.jsx(Sd,{className:"w-12 h-12 text-blue-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"More AI Team Members Coming Soon!"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"We're actively developing Bill to help automate even more of your business operations. Stay tuned for updates!"})]})]})})},k5=` Hi! I'm Saul, your AI finance manager. I can help you track expenses, manage invoices, monitor cash flow, and make smarter financial decisions for your contracting business.

**What I can do:**
 Track expenses and revenue
 Create and manage invoices
 Monitor budgets and cash flow
 Generate financial reports
 Provide financial insights and recommendations

**Quick examples:**
 "Add a $500 expense for materials on the Smith project"
 "Create an invoice for the completed deck job"
 "Show me this month's profit and loss"
 "How's my materials budget looking?"

What would you like help with today?`;class PH{autoSaveTimeout=null;async autoSave(t,r,a){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(async()=>{try{const{data:{user:n}}=await _e.auth.getUser();if(!n)return;const i=r.find(d=>d.role==="user"),o=i?i.content.substring(0,50)+(i.content.length>50?"...":""):"Financial Chat",{data:l}=await _e.from("saul_chat_sessions").select("id").eq("session_id",t).eq("user_id",n.id).single();l?await _e.from("saul_chat_sessions").update({title:o,messages:r,financial_context:a,updated_at:new Date().toISOString()}).eq("id",l.id):await _e.from("saul_chat_sessions").insert({user_id:n.id,session_id:t,title:o,messages:r,financial_context:a})}catch(n){console.error("Error auto-saving Saul chat:",n)}},1e3)}async getAllSessions(){try{const{data:{user:t}}=await _e.auth.getUser();if(!t)return[];const{data:r,error:a}=await _e.from("saul_chat_sessions").select("*").eq("user_id",t.id).order("updated_at",{ascending:!1});if(a)throw a;return(r||[]).map(n=>({id:n.id,sessionId:n.session_id,title:n.title,messages:n.messages||[],financialContext:n.financial_context||{},createdAt:n.created_at,updatedAt:n.updated_at}))}catch(t){return console.error("Error loading Saul chat sessions:",t),[]}}async deleteSession(t){try{const{data:{user:r}}=await _e.auth.getUser();if(!r)return;await _e.from("saul_chat_sessions").delete().eq("session_id",t).eq("user_id",r.id)}catch(r){console.error("Error deleting Saul chat session:",r)}}async loadSession(t){try{const{data:{user:r}}=await _e.auth.getUser();if(!r)return null;const{data:a,error:n}=await _e.from("saul_chat_sessions").select("*").eq("session_id",t).eq("user_id",r.id).single();if(n)throw n;return{id:a.id,sessionId:a.session_id,title:a.title,messages:a.messages||[],financialContext:a.financial_context||{},createdAt:a.created_at,updatedAt:a.updated_at}}catch(r){return console.error("Error loading Saul chat session:",r),null}}}const Lm=new PH,IH=({sessionStartTime:s,onRefresh:t,userId:r})=>{const[a,n]=p.useState([]),[i,o]=p.useState([]),[l,d]=p.useState("session"),[u,m]=p.useState(!1),[h,x]=p.useState(""),[f,b]=p.useState(""),[v,j]=p.useState([]),[S,C]=p.useState(0),[B,F]=p.useState(0),[Q,q]=p.useState(0),[P,D]=p.useState(0),_=async()=>{if(r){m(!0);try{const{data:V,error:M}=await _e.from("projects").select("id, name").eq("user_id",r).order("name");M||j(V||[]);let ie=_e.from("finance_expenses").select("*").eq("user_id",r).order("date",{ascending:!1}).limit(50);f&&(ie=ie.eq("project_id",f));const{data:K,error:H}=await ie;if(H)throw H;n(K||[]);const I=(K||[]).filter(je=>new Date(je.created_at)>=s);o(I);let ee=_e.from("finance_payments").select("amount").eq("user_id",r).order("created_at",{ascending:!1}).limit(50);f&&(ee=ee.eq("project_id",f));const{data:se,error:de}=await ee;if(de)throw de;const re=(se||[]).reduce((je,ce)=>je+parseFloat(ce.amount||0),0);C(re);const z=(K||[]).reduce((je,ce)=>je+parseFloat(ce.amount||0),0);F(re-z);let ne=_e.from("invoices").select("total_amount").eq("user_id",r).in("status",["outstanding","partial","overdue"]);f&&(ne=ne.eq("project_id",f));const{data:Y,error:X}=await ne;if(!X){const je=(Y||[]).reduce((ce,Te)=>ce+parseFloat(Te.total_amount||0),0);q(je)}let ye=_e.from("recurring_expenses").select("id").eq("user_id",r).eq("is_active",!0);f&&(ye=ye.eq("project_id",f));const{data:pe,error:Ce}=await ye;Ce||D((pe||[]).length)}catch(V){console.error("Error fetching financial data:",V)}finally{m(!1)}}};p.useEffect(()=>{_()},[f,r]);const $=()=>{_(),t?.()},k=V=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(V),E=(()=>{const V=l==="session"?i:a;return h?V.filter(M=>M.category===h):V})(),O=E.reduce((V,M)=>V+parseFloat(M.amount.toString()),0),le=[...new Set(a.map(V=>V.category))],te=le.map(V=>({category:V,total:a.filter(M=>M.category===V).reduce((M,ie)=>M+parseFloat(ie.amount.toString()),0)})).sort((V,M)=>M.total-V.total);return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-green-500 to-green-600",children:[e.jsxs("div",{className:"flex items-center justify-between text-white mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(vl,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-bold",children:"Financial Dashboard"})]}),e.jsx("button",{onClick:$,disabled:u,className:"p-2 hover:bg-green-600 rounded-lg transition-colors",title:"Refresh",children:e.jsx(An,{className:`w-4 h-4 ${u?"animate-spin":""}`})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yh,{className:"w-4 h-4 text-white/80"}),e.jsxs("select",{value:f,onChange:V=>b(V.target.value),className:"flex-1 px-3 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-lg text-sm font-medium text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent",children:[e.jsx("option",{value:"",className:"text-gray-900",children:"All Projects"}),v.map(V=>e.jsx("option",{value:V.id,className:"text-gray-900",children:V.name},V.id))]})]})]}),e.jsxs("div",{className:"flex border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>d("session"),className:`flex-1 px-4 py-3 text-sm font-medium ${l==="session"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700"}`,children:["Session (",i.length,")"]}),e.jsxs("button",{onClick:()=>d("all"),className:`flex-1 px-4 py-3 text-sm font-medium ${l==="all"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700"}`,children:["All (",a.length,")"]}),e.jsx("button",{onClick:()=>d("dashboard"),className:`flex-1 px-4 py-3 text-sm font-medium ${l==="dashboard"?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700"}`,children:"Dashboard"})]}),e.jsx("div",{className:"p-4",children:l==="dashboard"?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[e.jsx(Br,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Revenue"})]}),e.jsx("div",{className:"text-xl font-bold text-green-900 break-words",children:k(S)})]}),e.jsxs("div",{className:"bg-red-50 rounded-xl border border-red-200 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700 mb-1",children:[e.jsx(vA,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Total Expenses"})]}),e.jsx("div",{className:"text-xl font-bold text-red-900 break-words",children:k(O)})]}),e.jsxs("div",{className:`rounded-xl border p-3 ${B>=0?"bg-blue-50 border-blue-200":"bg-orange-50 border-orange-200"}`,children:[e.jsxs("div",{className:`flex items-center gap-2 mb-1 ${B>=0?"text-blue-700":"text-orange-700"}`,children:[e.jsx(Br,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Net Profit"})]}),e.jsx("div",{className:`text-xl font-bold break-words ${B>=0?"text-blue-900":"text-orange-900"}`,children:k(B)})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-xl border border-yellow-200 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700 mb-1",children:[e.jsx(vl,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Outstanding Invoices"})]}),e.jsx("div",{className:"text-xl font-bold text-yellow-900 break-words",children:k(Q)})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-1",children:[e.jsx(Fr,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:"Recurring Expenses"})]}),e.jsxs("div",{className:"text-xl font-bold text-purple-900",children:[P," active"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Total Transactions"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:E.length})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl border border-gray-200 p-3",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"This Session"}),e.jsx("div",{className:"text-lg font-bold text-gray-900",children:i.length})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"By Category"}),e.jsx("div",{className:"space-y-2",children:te.map(({category:V,total:M})=>{const ie=M/O*100;return e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-gray-700",children:V}),e.jsx("span",{className:"text-gray-600",children:k(M)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${ie}%`}})})]})},V)})})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-xl border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(yh,{className:"w-4 h-4 text-gray-600"}),e.jsxs("select",{value:h,onChange:V=>x(V.target.value),className:"flex-1 px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),le.map(V=>e.jsx("option",{value:V,children:V},V))]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-600",children:"Total Expenses:"}),e.jsx("span",{className:"text-2xl font-bold text-red-600",children:k(O)})]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[E.length," ",E.length===1?"transaction":"transactions"]})]}),e.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:E.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[e.jsx(vl,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No expenses yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l==="session"?"Start adding expenses by chatting with Saul":"No expenses found for this period"})]}):E.map(V=>e.jsx("div",{className:"bg-white p-4 rounded-xl border border-gray-200 hover:border-gray-300 hover:shadow-sm transition-all",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900 truncate",children:V.vendor}),new Date(V.created_at)>=s&&e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-semibold bg-green-100 text-green-700 border border-green-200",children:"NEW"})]}),V.notes&&e.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:V.notes}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-lg text-xs font-medium bg-blue-50 text-blue-700 border border-blue-100",children:V.category}),e.jsx("span",{className:"text-xs text-gray-500",children:Nr(new Date(V.date),"MMM d, yyyy")})]})]}),e.jsx("div",{className:"flex-shrink-0 text-right",children:e.jsx("div",{className:"text-lg font-bold text-red-600",children:k(parseFloat(V.amount.toString()))})})]})},V.id))})]})})]})};function pB(s,t,r,a,n){a=a||{};var i=1.15,o=n.internal.scaleFactor,l=n.internal.getFontSize()/o,d=n.getLineHeightFactor?n.getLineHeightFactor():i,u=l*d,m=/\r\n|\r|\n/g,h="",x=1;if((a.valign==="middle"||a.valign==="bottom"||a.halign==="center"||a.halign==="right")&&(h=typeof s=="string"?s.split(m):s,x=h.length||1),r+=l*(2-i),a.valign==="middle"?r-=x/2*u:a.valign==="bottom"&&(r-=x*u),a.halign==="center"||a.halign==="right"){var f=l;if(a.halign==="center"&&(f*=.5),h&&x>=1){for(var b=0;b<h.length;b++)n.text(h[b],t-n.getStringUnitWidth(h[b])*f,r),r+=u;return n}t-=n.getStringUnitWidth(s)*f}return a.halign==="justify"?n.text(s,t,r,{maxWidth:a.maxWidth||100,align:"justify"}):n.text(s,t,r),n}var F5={},cA=(function(){function s(t){this.jsPDFDocument=t,this.userStyles={textColor:t.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:t.internal.getFontSize(),fontStyle:t.internal.getFont().fontStyle,font:t.internal.getFont().fontName,lineWidth:t.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:t.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return s.setDefaults=function(t,r){r===void 0&&(r=null),r?r.__autoTableDocumentDefaults=t:F5=t},s.unifyColor=function(t){return Array.isArray(t)?t:typeof t=="number"?[t,t,t]:typeof t=="string"?[t]:null},s.prototype.applyStyles=function(t,r){var a,n,i;r===void 0&&(r=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var o=this.jsPDFDocument.internal.getFont(),l=o.fontStyle,d=o.fontName;if(t.font&&(d=t.font),t.fontStyle){l=t.fontStyle;var u=this.getFontList()[d];u&&u.indexOf(l)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),l=u[0])}if(this.jsPDFDocument.setFont(d,l),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!r){var m=s.unifyColor(t.fillColor);m&&(a=this.jsPDFDocument).setFillColor.apply(a,m),m=s.unifyColor(t.textColor),m&&(n=this.jsPDFDocument).setTextColor.apply(n,m),m=s.unifyColor(t.lineColor),m&&(i=this.jsPDFDocument).setDrawColor.apply(i,m),typeof t.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},s.prototype.splitTextToSize=function(t,r,a){return this.jsPDFDocument.splitTextToSize(t,r,a)},s.prototype.rect=function(t,r,a,n,i){return this.jsPDFDocument.rect(t,r,a,n,i)},s.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},s.prototype.getTextWidth=function(t){return this.jsPDFDocument.getTextWidth(t)},s.prototype.getDocument=function(){return this.jsPDFDocument},s.prototype.setPage=function(t){this.jsPDFDocument.setPage(t)},s.prototype.addPage=function(){return this.jsPDFDocument.addPage()},s.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},s.prototype.getGlobalOptions=function(){return F5||{}},s.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},s.prototype.pageSize=function(){var t=this.jsPDFDocument.internal.pageSize;return t.width==null&&(t={width:t.getWidth(),height:t.getHeight()}),t},s.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},s.prototype.getLineHeightFactor=function(){var t=this.jsPDFDocument;return t.getLineHeightFactor?t.getLineHeightFactor():1.15},s.prototype.getLineHeight=function(t){return t/this.scaleFactor()*this.getLineHeightFactor()},s.prototype.pageNumber=function(){var t=this.jsPDFDocument.internal.getCurrentPageInfo();return t?t.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},s})(),Kb=function(s,t){return Kb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(r[n]=a[n])},Kb(s,t)};function xB(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Kb(s,t);function r(){this.constructor=s}s.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var bB=(function(s){xB(t,s);function t(r){var a=s.call(this)||this;return a._element=r,a}return t})(Array);function UH(s){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/s,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function LH(s){var t={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return t[s]}function tp(s,t,r){r.applyStyles(t,!0);var a=Array.isArray(s)?s:[s],n=a.map(function(i){return r.getTextWidth(i)}).reduce(function(i,o){return Math.max(i,o)},0);return n}function yB(s,t,r,a){var n=t.settings.tableLineWidth,i=t.settings.tableLineColor;s.applyStyles({lineWidth:n,lineColor:i});var o=vB(n,!1);o&&s.rect(r.x,r.y,t.getWidth(s.pageSize().width),a.y-r.y,o)}function vB(s,t){var r=s>0,a=t||t===0;return r&&a?"DF":r?"S":a?"F":null}function Np(s,t){var r,a,n,i;if(s=s||t,Array.isArray(s)){if(s.length>=4)return{top:s[0],right:s[1],bottom:s[2],left:s[3]};if(s.length===3)return{top:s[0],right:s[1],bottom:s[2],left:s[1]};if(s.length===2)return{top:s[0],right:s[1],bottom:s[0],left:s[1]};s.length===1?s=s[0]:s=t}return typeof s=="object"?(typeof s.vertical=="number"&&(s.top=s.vertical,s.bottom=s.vertical),typeof s.horizontal=="number"&&(s.right=s.horizontal,s.left=s.horizontal),{left:(r=s.left)!==null&&r!==void 0?r:t,top:(a=s.top)!==null&&a!==void 0?a:t,right:(n=s.right)!==null&&n!==void 0?n:t,bottom:(i=s.bottom)!==null&&i!==void 0?i:t}):(typeof s!="number"&&(s=t),{top:s,right:s,bottom:s,left:s})}function wB(s,t){var r=Np(t.settings.margin,0);return s.pageSize().width-(r.left+r.right)}function TH(s,t,r,a,n){var i={},o=1.3333333333333333,l=Cx(t,function(B){return n.getComputedStyle(B).backgroundColor});l!=null&&(i.fillColor=l);var d=Cx(t,function(B){return n.getComputedStyle(B).color});d!=null&&(i.textColor=d);var u=MH(a,r);u&&(i.cellPadding=u);var m="borderTopColor",h=o*r,x=a.borderTopWidth;if(a.borderBottomWidth===x&&a.borderRightWidth===x&&a.borderLeftWidth===x){var f=(parseFloat(x)||0)/h;f&&(i.lineWidth=f)}else i.lineWidth={top:(parseFloat(a.borderTopWidth)||0)/h,right:(parseFloat(a.borderRightWidth)||0)/h,bottom:(parseFloat(a.borderBottomWidth)||0)/h,left:(parseFloat(a.borderLeftWidth)||0)/h},i.lineWidth.top||(i.lineWidth.right?m="borderRightColor":i.lineWidth.bottom?m="borderBottomColor":i.lineWidth.left&&(m="borderLeftColor"));var b=Cx(t,function(B){return n.getComputedStyle(B)[m]});b!=null&&(i.lineColor=b);var v=["left","right","center","justify"];v.indexOf(a.textAlign)!==-1&&(i.halign=a.textAlign),v=["middle","bottom","top"],v.indexOf(a.verticalAlign)!==-1&&(i.valign=a.verticalAlign);var j=parseInt(a.fontSize||"");isNaN(j)||(i.fontSize=j/o);var S=DH(a);S&&(i.fontStyle=S);var C=(a.fontFamily||"").toLowerCase();return s.indexOf(C)!==-1&&(i.font=C),i}function DH(s){var t="";return(s.fontWeight==="bold"||s.fontWeight==="bolder"||parseInt(s.fontWeight)>=700)&&(t="bold"),(s.fontStyle==="italic"||s.fontStyle==="oblique")&&(t+="italic"),t}function Cx(s,t){var r=jB(s,t);if(!r)return null;var a=r.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var n=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])],i=parseInt(a[4]);return i===0||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function jB(s,t){var r=t(s);return r==="rgba(0, 0, 0, 0)"||r==="transparent"||r==="initial"||r==="inherit"?s.parentElement==null?null:jB(s.parentElement,t):r}function MH(s,t){var r=[s.paddingTop,s.paddingRight,s.paddingBottom,s.paddingLeft],a=96/(72/t),n=(parseInt(s.lineHeight)-parseInt(s.fontSize))/t/2,i=r.map(function(l){return parseInt(l||"0")/a}),o=Np(i,0);return n>o.top&&(o.top=n),n>o.bottom&&(o.bottom=n),o}function NB(s,t,r,a,n){var i,o;a===void 0&&(a=!1),n===void 0&&(n=!1);var l;typeof t=="string"?l=r.document.querySelector(t):l=t;var d=Object.keys(s.getFontList()),u=s.scaleFactor(),m=[],h=[],x=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:m,body:h,foot:x};for(var f=0;f<l.rows.length;f++){var b=l.rows[f],v=(o=(i=b?.parentElement)===null||i===void 0?void 0:i.tagName)===null||o===void 0?void 0:o.toLowerCase(),j=RH(d,u,r,b,a,n);j&&(v==="thead"?m.push(j):v==="tfoot"?x.push(j):h.push(j))}return{head:m,body:h,foot:x}}function RH(s,t,r,a,n,i){for(var o=new bB(a),l=0;l<a.cells.length;l++){var d=a.cells[l],u=r.getComputedStyle(d);if(n||u.display!=="none"){var m=void 0;i&&(m=TH(s,d,t,u,r)),o.push({rowSpan:d.rowSpan,colSpan:d.colSpan,styles:m,_element:d,content:QH(d)})}}var h=r.getComputedStyle(a);if(o.length>0&&(n||h.display!=="none"))return o}function QH(s){var t=s.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(r){return r.trim()}).join(`
`),t.innerText||t.textContent||""}function OH(s,t,r){for(var a=0,n=[s,t,r];a<n.length;a++){var i=n[a];i&&typeof i!="object"&&console.error("The options parameter should be of type object, is: "+typeof i),i.startY&&typeof i.startY!="number"&&(console.error("Invalid value for startY option",i.startY),delete i.startY)}}function bl(s,t,r,a,n){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(s),o=1;o<arguments.length;o++){var l=arguments[o];if(l!=null)for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])}return i}function CB(s,t){var r=new cA(s),a=r.getDocumentOptions(),n=r.getGlobalOptions();OH(n,a,t);var i=bl({},n,a,t),o;typeof window<"u"&&(o=window);var l=HH(n,a,t),d=qH(n,a,t),u=$H(r,i),m=KH(r,i,o);return{id:t.tableId,content:m,hooks:d,styles:l,settings:u}}function HH(s,t,r){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},n=function(d){if(d==="columnStyles"){var u=s[d],m=t[d],h=r[d];a.columnStyles=bl({},u,m,h)}else{var x=[s,t,r],f=x.map(function(b){return b[d]||{}});a[d]=bl({},f[0],f[1],f[2])}},i=0,o=Object.keys(a);i<o.length;i++){var l=o[i];n(l)}return a}function qH(s,t,r){for(var a=[s,t,r],n={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},i=0,o=a;i<o.length;i++){var l=o[i];l.didParseCell&&n.didParseCell.push(l.didParseCell),l.willDrawCell&&n.willDrawCell.push(l.willDrawCell),l.didDrawCell&&n.didDrawCell.push(l.didDrawCell),l.willDrawPage&&n.willDrawPage.push(l.willDrawPage),l.didDrawPage&&n.didDrawPage.push(l.didDrawPage)}return n}function $H(s,t){var r,a,n,i,o,l,d,u,m,h,x,f,b=Np(t.margin,40/s.scaleFactor()),v=(r=WH(s,t.startY))!==null&&r!==void 0?r:b.top,j;t.showFoot===!0?j="everyPage":t.showFoot===!1?j="never":j=(a=t.showFoot)!==null&&a!==void 0?a:"everyPage";var S;t.showHead===!0?S="everyPage":t.showHead===!1?S="never":S=(n=t.showHead)!==null&&n!==void 0?n:"everyPage";var C=(i=t.useCss)!==null&&i!==void 0?i:!1,B=t.theme||(C?"plain":"striped"),F=!!t.horizontalPageBreak,Q=(o=t.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(l=t.includeHiddenHtml)!==null&&l!==void 0?l:!1,useCss:C,theme:B,startY:v,margin:b,pageBreak:(d=t.pageBreak)!==null&&d!==void 0?d:"auto",rowPageBreak:(u=t.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(m=t.tableWidth)!==null&&m!==void 0?m:"auto",showHead:S,showFoot:j,tableLineWidth:(h=t.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(x=t.tableLineColor)!==null&&x!==void 0?x:200,horizontalPageBreak:F,horizontalPageBreakRepeat:Q,horizontalPageBreakBehaviour:(f=t.horizontalPageBreakBehaviour)!==null&&f!==void 0?f:"afterAllRows"}}function WH(s,t){var r=s.getLastAutoTable(),a=s.scaleFactor(),n=s.pageNumber(),i=!1;if(r&&r.startPageNumber){var o=r.startPageNumber+r.pageNumber-1;i=o===n}return typeof t=="number"?t:(t==null||t===!1)&&i&&r?.finalY!=null?r.finalY+20/a:null}function KH(s,t,r){var a=t.head||[],n=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(r){var l=NB(s,t.html,r,o,t.useCss)||{};a=l.head||a,n=l.body||a,i=l.foot||a}else console.error("Cannot parse html in non browser environment")}var d=t.columns||zH(a,n,i);return{columns:d,head:a,body:n,foot:i}}function zH(s,t,r){var a=s[0]||t[0]||r[0]||[],n=[];return Object.keys(a).filter(function(i){return i!=="_element"}).forEach(function(i){var o=1,l;Array.isArray(a)?l=a[parseInt(i)]:l=a[i],typeof l=="object"&&!Array.isArray(l)&&(o=l?.colSpan||1);for(var d=0;d<o;d++){var u=void 0;Array.isArray(a)?u=n.length:u=i+(d>0?"_".concat(d):"");var m={dataKey:u};n.push(m)}}),n}var rp=(function(){function s(t,r,a){this.table=r,this.pageNumber=r.pageNumber,this.settings=r.settings,this.cursor=a,this.doc=t.getDocument()}return s})(),SB=(function(s){xB(t,s);function t(r,a,n,i,o,l){var d=s.call(this,r,a,l)||this;return d.cell=n,d.row=i,d.column=o,d.section=i.section,d}return t})(rp),BB=(function(){function s(t,r){this.pageNumber=1,this.id=t.id,this.settings=t.settings,this.styles=t.styles,this.hooks=t.hooks,this.columns=r.columns,this.head=r.head,this.body=r.body,this.foot=r.foot}return s.prototype.getHeadHeight=function(t){return this.head.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.getFootHeight=function(t){return this.foot.reduce(function(r,a){return r+a.getMaxCellHeight(t)},0)},s.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},s.prototype.callCellHooks=function(t,r,a,n,i,o){for(var l=0,d=r;l<d.length;l++){var u=d[l],m=new SB(t,this,a,n,i,o),h=u(m)===!1;if(a.text=Array.isArray(a.text)?a.text:[a.text],h)return!1}return!0},s.prototype.callEndPageHooks=function(t,r){t.applyStyles(t.userStyles);for(var a=0,n=this.hooks.didDrawPage;a<n.length;a++){var i=n[a];i(new rp(t,this,r))}},s.prototype.callWillDrawPageHooks=function(t,r){for(var a=0,n=this.hooks.willDrawPage;a<n.length;a++){var i=n[a];i(new rp(t,this,r))}},s.prototype.getWidth=function(t){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var r=this.columns.reduce(function(n,i){return n+i.wrappedWidth},0);return r}else{var a=this.settings.margin;return t-a.left-a.right}},s})(),Iy=(function(){function s(t,r,a,n,i){i===void 0&&(i=!1),this.height=0,this.raw=t,t instanceof bB&&(this.raw=t._element,this.element=t._element),this.index=r,this.section=a,this.cells=n,this.spansMultiplePages=i}return s.prototype.getMaxCellHeight=function(t){var r=this;return t.reduce(function(a,n){var i;return Math.max(a,((i=r.cells[n.index])===null||i===void 0?void 0:i.height)||0)},0)},s.prototype.hasRowSpan=function(t){var r=this;return t.filter(function(a){var n=r.cells[a.index];return n?n.rowSpan>1:!1}).length>0},s.prototype.canEntireRowFit=function(t,r){return this.getMaxCellHeight(r)<=t},s.prototype.getMinimumRowHeight=function(t,r){var a=this;return t.reduce(function(n,i){var o=a.cells[i.index];if(!o)return 0;var l=r.getLineHeight(o.styles.fontSize),d=o.padding("vertical"),u=d+l;return u>n?u:n},0)},s})(),Uy=(function(){function s(t,r,a){var n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=r,this.section=a,this.raw=t;var i=t;t!=null&&typeof t=="object"&&!Array.isArray(t)?(this.rowSpan=t.rowSpan||1,this.colSpan=t.colSpan||1,i=(n=t.content)!==null&&n!==void 0?n:t,t._element&&(this.raw=t._element)):(this.rowSpan=1,this.colSpan=1);var o=i!=null?""+i:"",l=/\r\n|\r|\n/g;this.text=o.split(l)}return s.prototype.getTextPos=function(){var t;if(this.styles.valign==="top")t=this.y+this.padding("top");else if(this.styles.valign==="bottom")t=this.y+this.height-this.padding("bottom");else{var r=this.height-this.padding("vertical");t=this.y+r/2+this.padding("top")}var a;if(this.styles.halign==="right")a=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var n=this.width-this.padding("horizontal");a=this.x+n/2+this.padding("left")}else a=this.x+this.padding("left");return{x:a,y:t}},s.prototype.getContentHeight=function(t,r){r===void 0&&(r=1.15);var a=Array.isArray(this.text)?this.text.length:1,n=this.styles.fontSize/t*r,i=a*n+this.padding("vertical");return Math.max(i,this.styles.minCellHeight)},s.prototype.padding=function(t){var r=Np(this.styles.cellPadding,0);return t==="vertical"?r.top+r.bottom:t==="horizontal"?r.left+r.right:r[t]},s})(),kB=(function(){function s(t,r,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=t,this.raw=r,this.index=a}return s.prototype.getMaxCustomCellWidth=function(t){for(var r=0,a=0,n=t.allRows();a<n.length;a++){var i=n[a],o=i.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(r=Math.max(r,o.styles.cellWidth))}return r},s})();function GH(s,t){VH(s,t);var r=[],a=0;t.columns.forEach(function(i){var o=i.getMaxCustomCellWidth(t);o?i.width=o:(i.width=i.wrappedWidth,r.push(i)),a+=i.width});var n=t.getWidth(s.pageSize().width)-a;n&&(n=zb(r,n,function(i){return Math.max(i.minReadableWidth,i.minWidth)})),n&&(n=zb(r,n,function(i){return i.minWidth})),n=Math.abs(n),!t.settings.horizontalPageBreak&&n>.1/s.scaleFactor()&&(n=n<1?n:Math.round(n),console.warn("Of the table content, ".concat(n," units width could not fit page"))),JH(t),XH(t,s),YH(t)}function VH(s,t){var r=s.scaleFactor(),a=t.settings.horizontalPageBreak,n=wB(s,t);t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var d=l[o],u=i.cells[d.index];if(u){var m=t.hooks.didParseCell;t.callCellHooks(s,m,u,i,d,null);var h=u.padding("horizontal");u.contentWidth=tp(u.text,u.styles,s)+h;var x=tp(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,s);if(u.minReadableWidth=x+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||a===!0)u.contentWidth>n?(u.minWidth=n,u.wrappedWidth=n):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var f=10/r;u.minWidth=u.styles.minCellWidth||f,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),t.allRows().forEach(function(i){for(var o=0,l=t.columns;o<l.length;o++){var d=l[o],u=i.cells[d.index];if(u&&u.colSpan===1)d.wrappedWidth=Math.max(d.wrappedWidth,u.wrappedWidth),d.minWidth=Math.max(d.minWidth,u.minWidth),d.minReadableWidth=Math.max(d.minReadableWidth,u.minReadableWidth);else{var m=t.styles.columnStyles[d.dataKey]||t.styles.columnStyles[d.index]||{},h=m.cellWidth||m.minCellWidth;h&&typeof h=="number"&&(d.minWidth=h,d.wrappedWidth=h)}u&&(u.colSpan>1&&!d.minWidth&&(d.minWidth=u.minWidth),u.colSpan>1&&!d.wrappedWidth&&(d.wrappedWidth=u.minWidth))}})}function zb(s,t,r){for(var a=t,n=s.reduce(function(f,b){return f+b.wrappedWidth},0),i=0;i<s.length;i++){var o=s[i],l=o.wrappedWidth/n,d=a*l,u=o.width+d,m=r(o),h=u<m?m:u;t-=h-o.width,o.width=h}if(t=Math.round(t*1e10)/1e10,t){var x=s.filter(function(f){return t<0?f.width>r(f):!0});x.length&&(t=zb(x,t,r))}return t}function YH(s){for(var t={},r=1,a=s.allRows(),n=0;n<a.length;n++)for(var i=a[n],o=0,l=s.columns;o<l.length;o++){var d=l[o],u=t[d.index];if(r>1)r--,delete i.cells[d.index];else if(u)u.cell.height+=i.height,r=u.cell.colSpan,delete i.cells[d.index],u.left--,u.left<=1&&delete t[d.index];else{var m=i.cells[d.index];if(!m)continue;if(m.height=i.height,m.rowSpan>1){var h=a.length-n,x=m.rowSpan>h?h:m.rowSpan;t[d.index]={cell:m,left:x,row:i}}}}}function JH(s){for(var t=s.allRows(),r=0;r<t.length;r++)for(var a=t[r],n=null,i=0,o=0,l=0;l<s.columns.length;l++){var d=s.columns[l];if(o-=1,o>1&&s.columns[l+1])i+=d.width,delete a.cells[d.index];else if(n){var u=n;delete a.cells[d.index],n=null,u.width=d.width+i}else{var u=a.cells[d.index];if(!u)continue;if(o=u.colSpan,i=0,u.colSpan>1){n=u,i+=d.width;continue}u.width=d.width+i}}}function XH(s,t){for(var r={count:0,height:0},a=0,n=s.allRows();a<n.length;a++){for(var i=n[a],o=0,l=s.columns;o<l.length;o++){var d=l[o],u=i.cells[d.index];if(u){t.applyStyles(u.styles,!0);var m=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=t.splitTextToSize(u.text,m+1/t.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=E5(u.text,m,u.styles,t,"...");else if(u.styles.overflow==="hidden")u.text=E5(u.text,m,u.styles,t,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,m);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var x=u.contentHeight/u.rowSpan;u.rowSpan>1&&r.count*r.height<x*u.rowSpan?r={height:x,count:u.rowSpan}:r&&r.count>0&&r.height>x&&(x=r.height),x>i.height&&(i.height=x)}}r.count--}}function E5(s,t,r,a,n){return s.map(function(i){return ZH(i,t,r,a,n)})}function ZH(s,t,r,a,n){var i=1e4*a.scaleFactor();if(t=Math.ceil(t*i)/i,t>=tp(s,r,a))return s;for(;t<tp(s+n,r,a)&&!(s.length<=1);)s=s.substring(0,s.length-1);return s.trim()+n}function FB(s,t){var r=new cA(s),a=eq(t,r.scaleFactor()),n=new BB(t,a);return GH(r,n),r.applyStyles(r.userStyles),n}function eq(s,t){var r=s.content,a=rq(r.columns);if(r.head.length===0){var n=_5(a,"head");n&&r.head.push(n)}if(r.foot.length===0){var n=_5(a,"foot");n&&r.foot.push(n)}var i=s.settings.theme,o=s.styles;return{columns:a,head:Sx("head",r.head,a,o,i,t),body:Sx("body",r.body,a,o,i,t),foot:Sx("foot",r.foot,a,o,i,t)}}function Sx(s,t,r,a,n,i){var o={},l=t.map(function(d,u){for(var m=0,h={},x=0,f=0,b=0,v=r;b<v.length;b++){var j=v[b];if(o[j.index]==null||o[j.index].left===0)if(f===0){var S=void 0;Array.isArray(d)?S=d[j.index-x-m]:S=d[j.dataKey];var C={};typeof S=="object"&&!Array.isArray(S)&&(C=S?.styles||{});var B=sq(s,j,u,n,a,i,C),F=new Uy(S,B,s);h[j.dataKey]=F,h[j.index]=F,f=F.colSpan-1,o[j.index]={left:F.rowSpan-1,times:f}}else f--,x++;else o[j.index].left--,f=o[j.index].times,m++}return new Iy(d,u,s,h)});return l}function _5(s,t){var r={};return s.forEach(function(a){if(a.raw!=null){var n=tq(t,a.raw);n!=null&&(r[a.dataKey]=n)}}),Object.keys(r).length>0?r:null}function tq(s,t){if(s==="head"){if(typeof t=="object")return t.header||null;if(typeof t=="string"||typeof t=="number")return t}else if(s==="foot"&&typeof t=="object")return t.footer;return null}function rq(s){return s.map(function(t,r){var a,n;return typeof t=="object"?n=(a=t.dataKey)!==null&&a!==void 0?a:r:n=r,new kB(n,t,r)})}function sq(s,t,r,a,n,i,o){var l=LH(a),d;s==="head"?d=n.headStyles:s==="body"?d=n.bodyStyles:s==="foot"&&(d=n.footStyles);var u=bl({},l.table,l[s],n.styles,d),m=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},h=s==="body"?m:{},x=s==="body"&&r%2===0?bl({},l.alternateRow,n.alternateRowStyles):{},f=UH(i),b=bl({},f,u,x,h);return bl(b,o)}function aq(s,t,r){var a;r===void 0&&(r={});var n=wB(s,t),i=new Map,o=[],l=[],d=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?d=t.settings.horizontalPageBreakRepeat:(typeof t.settings.horizontalPageBreakRepeat=="string"||typeof t.settings.horizontalPageBreakRepeat=="number")&&(d=[t.settings.horizontalPageBreakRepeat]),d.forEach(function(x){var f=t.columns.find(function(b){return b.dataKey===x||b.index===x});f&&!i.has(f.index)&&(i.set(f.index,!0),o.push(f.index),l.push(t.columns[f.index]),n-=f.wrappedWidth)});for(var u=!0,m=(a=r?.start)!==null&&a!==void 0?a:0;m<t.columns.length;){if(i.has(m)){m++;continue}var h=t.columns[m].wrappedWidth;if(u||n>=h)u=!1,o.push(m),l.push(t.columns[m]),n-=h;else break;m++}return{colIndexes:o,columns:l,lastIndex:m-1}}function nq(s,t){for(var r=[],a=0;a<t.columns.length;a++){var n=aq(s,t,{start:a});n.columns.length&&(r.push(n),a=n.lastIndex)}return r}function EB(s,t){var r=t.settings,a=r.startY,n=r.margin,i={x:n.left,y:a},o=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),l=a+n.bottom+o;if(r.pageBreak==="avoid"){var d=t.body,u=d.reduce(function(x,f){return x+f.height},0);l+=u}var m=new cA(s);(r.pageBreak==="always"||r.startY!=null&&l>m.pageSize().height)&&(PB(m),i.y=n.top),t.callWillDrawPageHooks(m,i);var h=bl({},i);t.startPageNumber=m.pageNumber(),r.horizontalPageBreak?iq(m,t,h,i):(m.applyStyles(m.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&t.head.forEach(function(x){return Cl(m,t,x,i,t.columns)}),m.applyStyles(m.userStyles),t.body.forEach(function(x,f){var b=f===t.body.length-1;sp(m,t,x,b,h,i,t.columns)}),m.applyStyles(m.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&t.foot.forEach(function(x){return Cl(m,t,x,i,t.columns)})),yB(m,t,h,i),t.callEndPageHooks(m,i),t.finalY=i.y,s.lastAutoTable=t,m.applyStyles(m.userStyles)}function iq(s,t,r,a){var n=nq(s,t),i=t.settings;if(i.horizontalPageBreakBehaviour==="afterAllRows")n.forEach(function(u,m){s.applyStyles(s.userStyles),m>0?mh(s,t,r,a,u.columns,!0):P5(s,t,a,u.columns),oq(s,t,r,a,u.columns),Bx(s,t,a,u.columns)});else for(var o=-1,l=n[0],d=function(){var u=o;if(l){s.applyStyles(s.userStyles);var m=l.columns;o>=0?mh(s,t,r,a,m,!0):P5(s,t,a,m),u=I5(s,t,o+1,a,m),Bx(s,t,a,m)}var h=u-o;n.slice(1).forEach(function(x){s.applyStyles(s.userStyles),mh(s,t,r,a,x.columns,!0),I5(s,t,o+1,a,x.columns,h),Bx(s,t,a,x.columns)}),o=u};o<t.body.length-1;)d()}function P5(s,t,r,a){var n=t.settings;s.applyStyles(s.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&t.head.forEach(function(i){return Cl(s,t,i,r,a)})}function oq(s,t,r,a,n){s.applyStyles(s.userStyles),t.body.forEach(function(i,o){var l=o===t.body.length-1;sp(s,t,i,l,r,a,n)})}function I5(s,t,r,a,n,i){s.applyStyles(s.userStyles),i=i??t.body.length;var o=Math.min(r+i,t.body.length),l=-1;return t.body.slice(r,o).forEach(function(d,u){var m=r+u===t.body.length-1,h=_B(s,t,m,a);d.canEntireRowFit(h,n)&&(Cl(s,t,d,a,n),l=r+u)}),l}function Bx(s,t,r,a){var n=t.settings;s.applyStyles(s.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&t.foot.forEach(function(i){return Cl(s,t,i,r,a)})}function lq(s,t,r){var a=r.getLineHeight(s.styles.fontSize),n=s.padding("vertical"),i=Math.floor((t-n)/a);return Math.max(0,i)}function cq(s,t,r,a){var n={};s.spansMultiplePages=!0,s.height=0;for(var i=0,o=0,l=r.columns;o<l.length;o++){var d=l[o],u=s.cells[d.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var m=new Uy(u.raw,u.styles,u.section);m=bl(m,u),m.text=[];var h=lq(u,t,a);u.text.length>h&&(m.text=u.text.splice(h,u.text.length));var x=a.scaleFactor(),f=a.getLineHeightFactor();u.contentHeight=u.getContentHeight(x,f),u.contentHeight>=t&&(u.contentHeight=t,m.styles.minCellHeight-=t),u.contentHeight>s.height&&(s.height=u.contentHeight),m.contentHeight=m.getContentHeight(x,f),m.contentHeight>i&&(i=m.contentHeight),n[d.index]=m}}var b=new Iy(s.raw,-1,s.section,n,!0);b.height=i;for(var v=0,j=r.columns;v<j.length;v++){var d=j[v],m=b.cells[d.index];m&&(m.height=b.height);var u=s.cells[d.index];u&&(u.height=s.height)}return b}function dq(s,t,r,a){var n=s.pageSize().height,i=a.settings.margin,o=i.top+i.bottom,l=n-o;t.section==="body"&&(l-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var d=t.getMinimumRowHeight(a.columns,s),u=d<r;if(d>l)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var m=t.hasRowSpan(a.columns),h=t.getMaxCellHeight(a.columns)>l;return h?(m&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(m||a.settings.rowPageBreak==="avoid")}function sp(s,t,r,a,n,i,o){var l=_B(s,t,a,i);if(r.canEntireRowFit(l,o))Cl(s,t,r,i,o);else if(dq(s,r,l,t)){var d=cq(r,l,t,s);Cl(s,t,r,i,o),mh(s,t,n,i,o),sp(s,t,d,a,n,i,o)}else mh(s,t,n,i,o),sp(s,t,r,a,n,i,o)}function Cl(s,t,r,a,n){a.x=t.settings.margin.left;for(var i=0,o=n;i<o.length;i++){var l=o[i],d=r.cells[l.index];if(!d){a.x+=l.width;continue}s.applyStyles(d.styles),d.x=a.x,d.y=a.y;var u=t.callCellHooks(s,t.hooks.willDrawCell,d,r,l,a);if(u===!1){a.x+=l.width;continue}uq(s,d,a);var m=d.getTextPos();pB(d.text,m.x,m.y,{halign:d.styles.halign,valign:d.styles.valign,maxWidth:Math.ceil(d.width-d.padding("left")-d.padding("right"))},s.getDocument()),t.callCellHooks(s,t.hooks.didDrawCell,d,r,l,a),a.x+=l.width}a.y+=r.height}function uq(s,t,r){var a=t.styles;if(s.getDocument().setFillColor(s.getDocument().getFillColor()),typeof a.lineWidth=="number"){var n=vB(a.lineWidth,a.fillColor);n&&s.rect(t.x,r.y,t.width,t.height,n)}else typeof a.lineWidth=="object"&&(a.fillColor&&s.rect(t.x,r.y,t.width,t.height,"F"),Aq(s,t,r,a.lineWidth))}function Aq(s,t,r,a){var n,i,o,l;a.top&&(n=r.x,i=r.y,o=r.x+t.width,l=r.y,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),d(a.top,n,i,o,l)),a.bottom&&(n=r.x,i=r.y+t.height,o=r.x+t.width,l=r.y+t.height,a.right&&(o+=.5*a.right),a.left&&(n-=.5*a.left),d(a.bottom,n,i,o,l)),a.left&&(n=r.x,i=r.y,o=r.x,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),d(a.left,n,i,o,l)),a.right&&(n=r.x+t.width,i=r.y,o=r.x+t.width,l=r.y+t.height,a.top&&(i-=.5*a.top),a.bottom&&(l+=.5*a.bottom),d(a.right,n,i,o,l));function d(u,m,h,x,f){s.getDocument().setLineWidth(u),s.getDocument().line(m,h,x,f,"S")}}function _B(s,t,r,a){var n=t.settings.margin.bottom,i=t.settings.showFoot;return(i==="everyPage"||i==="lastPage"&&r)&&(n+=t.getFootHeight(t.columns)),s.pageSize().height-a.y-n}function mh(s,t,r,a,n,i){n===void 0&&(n=[]),i===void 0&&(i=!1),s.applyStyles(s.userStyles),t.settings.showFoot==="everyPage"&&!i&&t.foot.forEach(function(l){return Cl(s,t,l,a,n)}),t.callEndPageHooks(s,a);var o=t.settings.margin;yB(s,t,r,a),PB(s),t.pageNumber++,a.x=o.left,a.y=o.top,r.y=o.top,t.callWillDrawPageHooks(s,a),t.settings.showHead==="everyPage"&&(t.head.forEach(function(l){return Cl(s,t,l,a,n)}),s.applyStyles(s.userStyles))}function PB(s){var t=s.pageNumber();s.setPage(t+1);var r=s.pageNumber();return r===t?(s.addPage(),!0):!1}function IB(s){s.API.autoTable=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=t[0],n=CB(this,a),i=FB(this,n);return EB(this,i),this},s.API.lastAutoTable=!1,s.API.autoTableText=function(t,r,a,n){pB(t,r,a,n,this)},s.API.autoTableSetDefaults=function(t){return cA.setDefaults(t,this),this},s.autoTableSetDefaults=function(t,r){cA.setDefaults(t,r)},s.API.autoTableHtmlToJson=function(t,r){var a;if(r===void 0&&(r=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new cA(this),i=NB(n,t,window,r,!1),o=i.head,l=i.body,d=((a=o[0])===null||a===void 0?void 0:a.map(function(u){return u.content}))||[];return{columns:d,rows:l,data:l}}}var kx;function iA(s,t){var r=CB(s,t),a=FB(s,r);EB(s,a)}try{if(typeof window<"u"&&window){var U5=window,L5=U5.jsPDF||((kx=U5.jspdf)===null||kx===void 0?void 0:kx.jsPDF);L5&&IB(L5)}}catch(s){console.error("Could not apply autoTable plugin",s)}const mq=Object.freeze(Object.defineProperty({__proto__:null,Cell:Uy,CellHookData:SB,Column:kB,HookData:rp,Row:Iy,Table:BB,applyPlugin:IB,autoTable:iA,default:iA},Symbol.toStringTag,{value:"Module"})),hq=s=>{const t=new Lt,r=t.internal.pageSize.getWidth(),a=t.internal.pageSize.getHeight();t.setFillColor(37,99,235),t.rect(0,0,r,35,"F"),t.setFontSize(22),t.setTextColor(255,255,255);const n={"profit-loss":"PROFIT & LOSS STATEMENT","expense-summary":"EXPENSE SUMMARY REPORT","revenue-summary":"REVENUE SUMMARY REPORT","cash-flow":"CASH FLOW ANALYSIS","tax-summary":"TAX SUMMARY REPORT"};t.text(n[s.reportType],r/2,15,{align:"center"}),t.setFontSize(10),t.setTextColor(220,220,255),t.text(`Period: ${s.dateRange.startDate} to ${s.dateRange.endDate}`,r/2,25,{align:"center"});let i=45;s.companyInfo&&(t.setFontSize(9),t.setTextColor(100,100,100),t.text(s.companyInfo.name,20,i),s.companyInfo.address&&(i+=4,t.text(s.companyInfo.address,20,i)),i+=8),t.setFontSize(8),t.setTextColor(120,120,120),t.text(`Generated: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,r-20,i,{align:"right"}),i+=10;const o=85,l=25,d=10,u=20;t.setFillColor(240,253,244),t.roundedRect(u,i,o,l,3,3,"F"),t.setDrawColor(34,197,94),t.setLineWidth(.5),t.roundedRect(u,i,o,l,3,3,"S"),t.setFontSize(9),t.setTextColor(34,197,94),t.text("Total Revenue",u+5,i+8),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(`$${(s.summary.totalRevenue||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u+5,i+18),t.setFont("helvetica","normal"),t.setFillColor(254,242,242),t.roundedRect(u+o+d,i,o,l,3,3,"F"),t.setDrawColor(239,68,68),t.roundedRect(u+o+d,i,o,l,3,3,"S"),t.setFontSize(9),t.setTextColor(239,68,68),t.text("Total Expenses",u+o+d+5,i+8),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(`$${(s.summary.totalExpenses||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u+o+d+5,i+18),t.setFont("helvetica","normal"),i+=l+5;const m=(s.summary.netProfit||0)>=0?[34,197,94]:[239,68,68],h=(s.summary.netProfit||0)>=0?[240,253,244]:[254,242,242];if(t.setFillColor(h[0],h[1],h[2]),t.roundedRect(u,i,o,l,3,3,"F"),t.setDrawColor(m[0],m[1],m[2]),t.roundedRect(u,i,o,l,3,3,"S"),t.setFontSize(9),t.setTextColor(m[0],m[1],m[2]),t.text("Net Profit",u+5,i+8),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(`$${(s.summary.netProfit||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,u+5,i+18),t.setFont("helvetica","normal"),t.setFillColor(239,246,255),t.roundedRect(u+o+d,i,o,l,3,3,"F"),t.setDrawColor(59,130,246),t.roundedRect(u+o+d,i,o,l,3,3,"S"),t.setFontSize(9),t.setTextColor(59,130,246),t.text("Profit Margin",u+o+d+5,i+8),t.setFontSize(16),t.setFont("helvetica","bold"),t.text(`${(s.summary.profitMargin||0).toFixed(1)}%`,u+o+d+5,i+18),t.setFont("helvetica","normal"),i+=l+15,s.expensesByCategory&&Object.keys(s.expensesByCategory).length>0){t.setFillColor(249,250,251),t.rect(15,i-5,r-30,12,"F"),t.setFontSize(12),t.setTextColor(55,65,81),t.setFont("helvetica","bold"),t.text("Expense Breakdown by Category",20,i+3),t.setFont("helvetica","normal"),i+=15;const f=Object.entries(s.expensesByCategory).sort((b,v)=>v[1]-b[1]).map(([b,v])=>[b,`$${v.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,s.summary.totalExpenses?`${(v/s.summary.totalExpenses*100).toFixed(1)}%`:"0%"]);iA(t,{startY:i,head:[["Category","Amount","% of Total"]],body:f,theme:"grid",headStyles:{fillColor:[37,99,235],textColor:255,fontSize:10,fontStyle:"bold",halign:"left"},bodyStyles:{fontSize:9,textColor:[55,65,81]},alternateRowStyles:{fillColor:[249,250,251]},columnStyles:{0:{cellWidth:90,halign:"left"},1:{cellWidth:50,halign:"right",fontStyle:"bold"},2:{cellWidth:40,halign:"right"}},margin:{left:20,right:20}}),i=t.lastAutoTable.finalY+15}if(s.expenses&&s.expenses.length>0){i>200&&(t.addPage(),i=30),t.setFillColor(249,250,251),t.rect(15,i-5,r-30,12,"F"),t.setFontSize(12),t.setTextColor(55,65,81),t.setFont("helvetica","bold"),t.text("Detailed Transaction History",20,i+3),t.setFont("helvetica","normal"),i+=15;const f=s.expenses.slice(0,50).map(b=>[new Date(b.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),b.vendor,b.category,`$${b.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`]);iA(t,{startY:i,head:[["Date","Vendor","Category","Amount"]],body:f,theme:"grid",headStyles:{fillColor:[37,99,235],textColor:255,fontSize:9,fontStyle:"bold"},bodyStyles:{fontSize:8,textColor:[55,65,81]},alternateRowStyles:{fillColor:[249,250,251]},columnStyles:{0:{cellWidth:28,halign:"left"},1:{cellWidth:60,halign:"left"},2:{cellWidth:45,halign:"left"},3:{cellWidth:35,halign:"right",fontStyle:"bold"}},margin:{left:20,right:20}}),i=t.lastAutoTable.finalY+8,s.expenses.length>50&&(t.setFontSize(8),t.setTextColor(120,120,120),t.setFont("helvetica","italic"),t.text(`Note: Showing first 50 of ${s.expenses.length} transactions. Full data available in system.`,20,i),t.setFont("helvetica","normal"),i+=10)}if(s.revenue&&s.revenue.length>0){i>200&&(t.addPage(),i=30),t.setFillColor(249,250,251),t.rect(15,i-5,r-30,12,"F"),t.setFontSize(12),t.setTextColor(55,65,81),t.setFont("helvetica","bold"),t.text("Revenue & Income Details",20,i+3),t.setFont("helvetica","normal"),i+=15;const f=s.revenue.map(b=>[new Date(b.date).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),b.description,b.paymentMethod||"N/A",`$${b.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`]);iA(t,{startY:i,head:[["Date","Description","Payment Method","Amount"]],body:f,theme:"grid",headStyles:{fillColor:[34,197,94],textColor:255,fontSize:9,fontStyle:"bold"},bodyStyles:{fontSize:8,textColor:[55,65,81]},alternateRowStyles:{fillColor:[249,250,251]},columnStyles:{0:{cellWidth:28,halign:"left"},1:{cellWidth:70,halign:"left"},2:{cellWidth:35,halign:"left"},3:{cellWidth:35,halign:"right",fontStyle:"bold",textColor:[34,197,94]}},margin:{left:20,right:20}}),i=t.lastAutoTable.finalY+15}if(s.cashFlow&&s.cashFlow.length>0){i>200&&(t.addPage(),i=30),t.setFillColor(249,250,251),t.rect(15,i-5,r-30,12,"F"),t.setFontSize(12),t.setTextColor(55,65,81),t.setFont("helvetica","bold"),t.text("Monthly Cash Flow Analysis",20,i+3),t.setFont("helvetica","normal"),i+=15;const f=s.cashFlow.map(b=>[b.month,`$${b.revenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,`$${b.expenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,`$${b.netCashFlow.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`]);if(iA(t,{startY:i,head:[["Month","Revenue","Expenses","Net Cash Flow"]],body:f,theme:"grid",headStyles:{fillColor:[37,99,235],textColor:255,fontSize:10,fontStyle:"bold"},bodyStyles:{fontSize:9,textColor:[55,65,81]},alternateRowStyles:{fillColor:[249,250,251]},columnStyles:{0:{cellWidth:65,halign:"left",fontStyle:"bold"},1:{cellWidth:38,halign:"right",textColor:[34,197,94]},2:{cellWidth:38,halign:"right",textColor:[239,68,68]},3:{cellWidth:38,halign:"right",fontStyle:"bold"}},margin:{left:20,right:20}}),i=t.lastAutoTable.finalY+15,s.trends){t.setFillColor(239,246,255),t.roundedRect(20,i,r-40,35,3,3,"F"),t.setDrawColor(59,130,246),t.setLineWidth(.5),t.roundedRect(20,i,r-40,35,3,3,"S"),t.setFontSize(11),t.setTextColor(37,99,235),t.setFont("helvetica","bold"),t.text(" Trend Analysis",25,i+8),t.setFont("helvetica","normal"),t.setFontSize(9),t.setTextColor(55,65,81),i+=16;const b=s.trends.trend==="improving"?"":"";t.text(`${b} Cash Flow Trend: ${s.trends.trend.toUpperCase()}`,25,i),i+=6,s.trends.averageRevenue!==void 0&&t.text(`Avg Monthly Revenue: $${s.trends.averageRevenue.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,25,i),s.trends.averageExpenses!==void 0&&t.text(`Avg Monthly Expenses: $${s.trends.averageExpenses.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}`,110,i),i+=45}}const x=a-15;return t.setDrawColor(229,231,235),t.setLineWidth(.5),t.line(20,x-5,r-20,x-5),t.setFontSize(8),t.setTextColor(156,163,175),t.text("Generated by Saul AI Finance Manager",20,x),t.text(`${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}`,r-20,x,{align:"right"}),t.setFontSize(7),t.setTextColor(156,163,175),t.setFont("helvetica","italic"),t.text("This report is confidential and intended for internal use only.",r/2,x+5,{align:"center"}),t.setFont("helvetica","normal"),t.output("blob")},T5=(s,t)=>{const r=hq(s),a=URL.createObjectURL(r),n=document.createElement("a");n.href=a;const i=`${s.reportType}-${s.dateRange.startDate}-to-${s.dateRange.endDate}.pdf`;n.download=i,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a)},fq="https://ujhgwcurllkkeouzwvgk.supabase.co",gq=()=>{const{session:s}=ka(),[t]=p.useState(()=>new Date),[r]=p.useState(()=>`saul-session-${Date.now()}`),[a,n]=p.useState([{id:"1",role:"assistant",content:k5,timestamp:new Date}]),[i,o]=p.useState(""),[l,d]=p.useState(!1),[u,m]=p.useState({currentMonth:{revenue:0,expenses:0,profit:0},recentTransactions:[],budgets:[]}),[h,x]=p.useState(!1),[f,b]=p.useState(!1),[v,j]=p.useState([]),S=p.useRef(null),C=p.useRef(null);p.useEffect(()=>{S.current?.scrollIntoView({behavior:"smooth"})},[a]),p.useEffect(()=>{C.current?.focus();const k=async()=>{const E=await Lm.getAllSessions();j(E)},L=async()=>{if(s?.user?.id)try{const{data:E}=await _e.from("finance_expenses").select("amount, category, notes, date").eq("user_id",s.user.id).order("date",{ascending:!1}),{data:O}=await _e.from("finance_payments").select("amount").eq("user_id",s.user.id).order("date",{ascending:!1}),le=E?.reduce((V,M)=>V+parseFloat(M.amount||0),0)||0,te=O?.reduce((V,M)=>V+parseFloat(M.amount||0),0)||0;m({currentMonth:{revenue:te,expenses:le,profit:te-le},recentTransactions:[],budgets:[]})}catch(E){console.error("Error loading financial data:",E)}};k(),L()},[s?.user?.id]),p.useEffect(()=>{a.length>1&&(async()=>{await Lm.autoSave(r,a,u);const L=await Lm.getAllSessions();j(L)})()},[a,u,r]);const B=async()=>{if(!i.trim()||l)return;const k={id:Date.now().toString(),role:"user",content:i.trim(),timestamp:new Date};n(L=>[...L,k]),o(""),d(!0);try{const L=s?.access_token;if(!L)throw new Error("User not authenticated. Please log in and try again.");const E=await fetch(`${fq}/functions/v1/saul-finance-chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${L}`},body:JSON.stringify({messages:[...a,k],financialContext:u})});if(!E.ok){const te=await E.json().catch(()=>({}));throw console.error("Saul API Error:",{status:E.status,statusText:E.statusText,error:te}),new Error(te.error||te.message||"API request failed")}const O=await E.json(),le={id:(Date.now()+1).toString(),role:"assistant",content:O.message,timestamp:new Date};if(n(te=>[...te,le]),O.updatedContext&&m(O.updatedContext),O.functionResults){const te=O.functionResults.find(V=>V.tool==="generate_report"&&V.success&&V.data?.format==="pdf");if(te&&te.data){const V=te.data;try{T5({reportType:V.reportType,dateRange:V.dateRange,summary:V.summary,expenses:V.expenses,expensesByCategory:V.expensesByCategory,revenue:V.revenue,cashFlow:V.cashFlow,trends:V.trends});const M={id:(Date.now()+2).toString(),role:"assistant",content:" Your PDF report has been downloaded!",timestamp:new Date};n(ie=>[...ie,M])}catch(M){console.error("PDF generation error:",M);const ie={id:(Date.now()+2).toString(),role:"assistant",content:"Sorry, there was an error generating the PDF. Please try again.",timestamp:new Date};n(K=>[...K,ie])}}}}catch(L){console.error("Chat error:",L);const E={id:(Date.now()+1).toString(),role:"assistant",content:L.message||"I'm having trouble connecting right now. Please try again in a moment.",timestamp:new Date};n(O=>[...O,E])}finally{d(!1),C.current?.focus()}},F=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),B())},Q=k=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(k),q=()=>{n([{id:"1",role:"assistant",content:k5,timestamp:new Date}]),m({currentMonth:{revenue:0,expenses:0,profit:0},recentTransactions:[],budgets:[]}),x(!1)},P=k=>{const L=k.messages.map(E=>({...E,timestamp:new Date(E.timestamp)}));n(L),m(k.financialContext),x(!1)},D=async(k,L)=>{L.stopPropagation(),await Lm.deleteSession(k);const E=await Lm.getAllSessions();j(E)},_=async()=>{if(!s?.user?.id){alert("Please log in to download reports");return}try{const k=new Date,L=new Date(k.getFullYear(),k.getMonth(),1).toISOString().split("T")[0],E=new Date(k.getFullYear(),k.getMonth()+1,0).toISOString().split("T")[0],{data:O,error:le}=await _e.from("finance_expenses").select("*").eq("user_id",s.user.id).gte("date",L).lte("date",E).order("date",{ascending:!1});if(le)throw le;const{data:te,error:V}=await _e.from("finance_payments").select("*").eq("user_id",s.user.id).gte("date",L).lte("date",E).order("date",{ascending:!1});if(V)throw V;const M=O?.reduce((ee,se)=>ee+parseFloat(se.amount||0),0)||0,ie=te?.reduce((ee,se)=>ee+parseFloat(se.amount||0),0)||0,K=O?.map(ee=>({date:ee.date,vendor:ee.vendor||"Unknown",category:ee.category||"Other",amount:parseFloat(ee.amount||0),notes:ee.notes||""}))||[],H=te?.map(ee=>({date:ee.date,description:ee.client_name||"Payment",amount:parseFloat(ee.amount||0),paymentMethod:ee.method||"Unknown"}))||[],I={};O?.forEach(ee=>{const se=ee.category||"Other";I[se]=(I[se]||0)+parseFloat(ee.amount||0)}),T5({reportType:"profit-loss",dateRange:{startDate:L,endDate:E},summary:{totalRevenue:ie,totalExpenses:M,netProfit:ie-M,profitMargin:ie>0?(ie-M)/ie*100:0},expensesByCategory:I,expenses:K,revenue:H})}catch(k){console.error("Error generating report:",k),alert("Failed to generate report. Please try again.")}},$=u.currentMonth.revenue>0?u.currentMonth.profit/u.currentMonth.revenue*100:0;return e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-80px)] sm:h-[calc(100vh-120px)] lg:h-[calc(100vh-200px)] max-w-6xl mx-auto gap-0 lg:gap-4",children:[h&&e.jsxs("div",{className:"fixed inset-0 lg:relative lg:w-80 bg-white lg:rounded-lg shadow-lg overflow-y-auto z-50 lg:z-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 lg:border-0 lg:static",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chat History"}),e.jsx("button",{onClick:()=>x(!1),className:"p-2 -mr-2 text-gray-500 hover:text-gray-700 active:bg-gray-100 rounded-lg transition-colors",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("button",{onClick:q,className:"w-full px-4 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 active:scale-95 transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(Gt,{className:"w-5 h-5"}),"New Chat"]})]}),e.jsx("div",{className:"p-4 space-y-2",children:v.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No chat history yet"}):v.map(k=>e.jsx("div",{onClick:()=>P(k),className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 active:bg-gray-200 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:k.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(k.updatedAt).toLocaleDateString()," at"," ",new Date(k.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[k.messages.length," messages"]})]}),e.jsx("button",{onClick:L=>D(k.sessionId,L),className:"p-2 text-red-500 hover:text-red-700 active:bg-red-100 rounded-lg transition-colors",children:e.jsx(nr,{className:"w-4 h-4"})})]})},k.id))})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white lg:rounded-lg shadow-lg min-h-0",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-green-500 to-green-600 flex-shrink-0 lg:rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:lA,alt:"Saul",className:"w-8 h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Saul"}),e.jsx("p",{className:"text-xs text-green-100 hidden sm:block",children:"Your AI Finance Manager"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(!f),className:"lg:hidden p-2.5 hover:bg-green-600 active:bg-green-700 rounded-lg transition-colors",title:"View Financial Summary",children:e.jsx(Br,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>x(!h),className:"p-2.5 hover:bg-green-600 active:bg-green-700 rounded-lg transition-colors",title:"Chat History",children:e.jsx(dy,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[a.map(k=>e.jsxs("div",{className:`flex items-start gap-3 ${k.role==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${k.role==="user"?"bg-blue-500 hidden sm:flex":"bg-green-500"}`,children:k.role==="user"?e.jsx(ns,{className:"w-5 h-5 text-white"}):e.jsx("img",{src:lA,alt:"Saul",className:"w-6 h-6"})}),e.jsxs("div",{className:`flex-1 max-w-[85%] sm:max-w-[80%] px-4 py-3 rounded-xl ${k.role==="user"?"bg-blue-500 text-white ml-auto rounded-tr-sm":"bg-gray-100 text-gray-900 rounded-tl-sm"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap break-words text-[15px] leading-relaxed",children:k.content}),e.jsx("div",{className:`text-xs mt-1.5 ${k.role==="user"?"text-blue-100":"text-gray-500"}`,children:k.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},k.id)),l&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx("img",{src:lA,alt:"Saul",className:"w-6 h-6"})}),e.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-xl",children:e.jsx(hr,{className:"w-5 h-5 animate-spin text-green-500"})})]}),e.jsx("div",{ref:S})]}),e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 flex-shrink-0 bg-white safe-area-inset-bottom",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:C,type:"text",value:i,onChange:k=>o(k.target.value),onKeyPress:F,placeholder:"Ask Saul about your finances...",className:"flex-1 px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",disabled:l}),e.jsx("button",{onClick:_,title:"Download Monthly Report",className:"px-3 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 active:scale-95 transition-all",children:e.jsx(Rn,{className:"w-5 h-5"})}),e.jsx("button",{onClick:B,disabled:!i.trim()||l,className:"px-4 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 active:scale-95 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all",children:e.jsx(Dc,{className:"w-5 h-5"})})]})})]}),e.jsxs("div",{className:`
        ${f?"fixed inset-0 z-50 lg:relative":"hidden lg:block"}
        lg:w-80 bg-white lg:rounded-lg shadow-lg overflow-hidden
      `,children:[f&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 -z-10",onClick:()=>b(!1)}),e.jsxs("div",{className:"h-full overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 lg:border-0 lg:static z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Financial Summary"}),e.jsx("button",{onClick:()=>b(!1),className:"lg:hidden p-2 -mr-2 text-gray-500 hover:text-gray-700 active:bg-gray-100 rounded-lg transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"p-3 bg-gradient-to-br from-green-50 to-green-100 rounded-xl border border-green-200",children:[e.jsx("div",{className:"text-xs text-green-700 mb-1 font-medium",children:"Revenue"}),e.jsx("div",{className:"text-lg font-bold text-green-900 break-words",children:Q(u.currentMonth.revenue)}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 mt-1",children:[e.jsx(io,{className:"w-3 h-3"}),"All Time"]})]}),e.jsxs("div",{className:"p-3 bg-gradient-to-br from-red-50 to-red-100 rounded-xl border border-red-200",children:[e.jsx("div",{className:"text-xs text-red-700 mb-1 font-medium",children:"Expenses"}),e.jsx("div",{className:"text-lg font-bold text-red-900 break-words",children:Q(u.currentMonth.expenses)}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-600 mt-1",children:[e.jsx(vA,{className:"w-3 h-3"}),"All Time"]})]}),e.jsxs("div",{className:"p-3 bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl border border-blue-200",children:[e.jsx("div",{className:"text-xs text-blue-700 mb-1 font-medium",children:"Net Profit"}),e.jsx("div",{className:"text-lg font-bold text-blue-900 break-words",children:Q(u.currentMonth.profit)}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[$.toFixed(1),"% margin"]})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(IH,{sessionStartTime:t,userId:s?.user?.id,onRefresh:()=>{console.log("Expense dashboard refreshed")}})})]})]})]})]})},pq=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-2 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"hidden md:block mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-green-600 rounded-lg",children:e.jsx("img",{src:lA,alt:"Saul",className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Saul"}),e.jsx("p",{className:"text-gray-600",children:"Manage your finances through conversation"})]})]})}),e.jsxs("div",{className:"md:hidden mb-2 flex items-center justify-center gap-2 bg-white rounded-lg shadow p-3",children:[e.jsx("img",{src:lA,alt:"Saul",className:"w-8 h-8"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Saul AI"})]}),e.jsx(gq,{}),e.jsx("div",{className:"hidden sm:block mt-4 text-center text-sm text-gray-500",children:" Tip: I can track expenses, create invoices, manage budgets, and provide financial insights"})]})}),D5=` Hi! I'm Cindy, your AI client relationship manager. I'm here to help you manage clients, projects, schedule events, and communicate with customers.

**What I can do:**
 Manage clients and their contact information
 Track projects linked to clients
 Schedule and manage calendar events
 Draft emails to customers (with your approval)
 Access company settings and information

**Quick examples:**
 "Show me all active clients"
 "Create a new client for John Smith"
 "What projects does Sarah have?"
 "Schedule a meeting with Mike Johnson next Tuesday at 2pm"
 "Draft an email to the Anderson family about their project"
 "What's our company name and contact info?"

How can I help you today?`;class xq{STORAGE_KEY="cindy_chat_history";MAX_SESSIONS=50;AUTO_SAVE_DEBOUNCE=1e3;autoSaveTimer=null;async getAllSessions(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t).map(a=>({...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),messages:a.messages.map(n=>({...n,timestamp:new Date(n.timestamp)}))})):[]}catch(t){return console.error("Error loading Cindy chat history:",t),[]}}async saveSession(t){try{const r=await this.getAllSessions(),a=r.findIndex(i=>i.sessionId===t.sessionId);a>=0?r[a]=t:r.unshift(t);const n=r.slice(0,this.MAX_SESSIONS);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(n))}catch(r){console.error("Error saving Cindy chat session:",r)}}async autoSave(t,r,a){this.autoSaveTimer&&clearTimeout(this.autoSaveTimer),this.autoSaveTimer=setTimeout(async()=>{try{const i=(await this.getAllSessions()).find(u=>u.sessionId===t),o=r.find(u=>u.role==="user"),l=o?o.content.substring(0,50)+(o.content.length>50?"...":""):"New Conversation",d={id:i?.id||`cindy-${Date.now()}`,sessionId:t,title:l,messages:r,createdAt:i?.createdAt||new Date,updatedAt:new Date};await this.saveSession(d)}catch(n){console.error("Error auto-saving Cindy chat:",n)}},this.AUTO_SAVE_DEBOUNCE)}async deleteSession(t){try{const a=(await this.getAllSessions()).filter(n=>n.sessionId!==t);localStorage.setItem(this.STORAGE_KEY,JSON.stringify(a))}catch(r){console.error("Error deleting Cindy chat session:",r)}}async clearAllHistory(){try{localStorage.removeItem(this.STORAGE_KEY)}catch(t){console.error("Error clearing Cindy chat history:",t)}}async getSession(t){return(await this.getAllSessions()).find(a=>a.sessionId===t)||null}}const Tm=new xq,M5="https://ujhgwcurllkkeouzwvgk.supabase.co",bq=()=>{const{session:s}=ka(),{clients:t}=jl(),{projects:r}=Eh(),{events:a}=jh(),[n]=p.useState(()=>new Date),[i]=p.useState(()=>`cindy-session-${Date.now()}`),[o,l]=p.useState([{id:"1",role:"assistant",content:D5,timestamp:new Date}]),[d,u]=p.useState(""),[m,h]=p.useState(!1),[x,f]=p.useState(!1),[b,v]=p.useState(!1),[j,S]=p.useState([]),[C,B]=p.useState(null),[F,Q]=p.useState(!1),q=p.useRef(null),P=p.useRef(null),D=t.filter(M=>M.status==="active").length,_=r.filter(M=>M.status==="active").length,$=a.filter(M=>{const ie=new Date(M.start),K=new Date,H=new Date;return H.setDate(K.getDate()+7),ie>=K&&ie<=H}).length;p.useEffect(()=>{q.current?.scrollIntoView({behavior:"smooth"})},[o]),p.useEffect(()=>{P.current?.focus(),(async()=>{const I=await Tm.getAllSessions();S(I)})();const{fetchClients:ie}=jl.getState(),{fetchProjects:K}=Eh.getState(),{fetchEvents:H}=jh.getState();ie(),K(),H()},[]),p.useEffect(()=>{o.length>1&&(async()=>{await Tm.autoSave(i,o);const ie=await Tm.getAllSessions();S(ie)})()},[o,i]);const k=async()=>{if(!d.trim()||m)return;const M={id:Date.now().toString(),role:"user",content:d.trim(),timestamp:new Date};l(ie=>[...ie,M]),u(""),h(!0);try{const ie=s?.access_token;if(!ie)throw new Error("User not authenticated. Please log in and try again.");const K=await fetch(`${M5}/functions/v1/cindy-crm-chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${ie}`},body:JSON.stringify({messages:[...o,M]})});if(!K.ok){const ee=await K.json().catch(()=>({}));throw console.error("Cindy API Error:",{status:K.status,statusText:K.statusText,error:ee}),new Error(ee.error||ee.message||"API request failed")}const H=await K.json(),I={id:(Date.now()+1).toString(),role:"assistant",content:H.message,timestamp:new Date};l(ee=>[...ee,I]),H.emailDraft&&B(H.emailDraft)}catch(ie){console.error("Chat error:",ie);const K={id:(Date.now()+1).toString(),role:"assistant",content:ie.message||"I'm having trouble connecting right now. Please try again in a moment.",timestamp:new Date};l(H=>[...H,K])}finally{h(!1),P.current?.focus()}},L=async()=>{if(C){Q(!0);try{const M=await fetch(`${M5}/functions/v1/send-gmail`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s?.access_token}`},body:JSON.stringify({to:C.to,subject:C.subject,body:C.body})}),ie=await M.json();if(!M.ok){if(ie.error?.includes("Gmail not connected")){const H={id:(Date.now()+2).toString(),role:"assistant",content:` Gmail not connected. Please connect your Gmail account in Settings to send emails.

Alternatively, you can copy the email content above and send it manually.`,timestamp:new Date};l(I=>[...I,H]);return}throw new Error(ie.error||"Failed to send email")}const K={id:(Date.now()+2).toString(),role:"assistant",content:` Email sent successfully to ${C.to} from ${ie.from}!`,timestamp:new Date};l(H=>[...H,K]),B(null)}catch(M){console.error("Error sending email:",M);const ie={id:(Date.now()+2).toString(),role:"assistant",content:` Failed to send email: ${M.message}`,timestamp:new Date};l(K=>[...K,ie])}finally{Q(!1)}}},E=()=>{B(null);const M={id:(Date.now()+2).toString(),role:"assistant",content:"Email draft cancelled. Let me know if you'd like me to draft a different message.",timestamp:new Date};l(ie=>[...ie,M])},O=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),k())},le=()=>{l([{id:"1",role:"assistant",content:D5,timestamp:new Date}]),f(!1),B(null)},te=M=>{const ie=M.messages.map(K=>({...K,timestamp:new Date(K.timestamp)}));l(ie),f(!1)},V=async(M,ie)=>{ie.stopPropagation(),await Tm.deleteSession(M);const K=await Tm.getAllSessions();S(K)};return e.jsxs("div",{className:"flex flex-col lg:flex-row h-[calc(100vh-80px)] sm:h-[calc(100vh-120px)] lg:h-[calc(100vh-200px)] max-w-6xl mx-auto gap-0 lg:gap-4",children:[x&&e.jsxs("div",{className:"fixed inset-0 lg:relative lg:w-80 bg-white lg:rounded-lg shadow-lg overflow-y-auto z-50 lg:z-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 lg:border-0 lg:static",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chat History"}),e.jsx("button",{onClick:()=>f(!1),className:"p-2 -mr-2 text-gray-500 hover:text-gray-700 active:bg-gray-100 rounded-lg transition-colors",children:e.jsx(xt,{className:"w-5 h-5"})})]}),e.jsxs("button",{onClick:le,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 active:scale-95 transition-all flex items-center justify-center gap-2 font-medium",children:[e.jsx(Gt,{className:"w-5 h-5"}),"New Chat"]})]}),e.jsx("div",{className:"p-4 space-y-2",children:j.length===0?e.jsx("p",{className:"text-gray-500 text-sm text-center py-8",children:"No chat history yet"}):j.map(M=>e.jsx("div",{onClick:()=>te(M),className:"p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 active:bg-gray-200 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:M.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[new Date(M.updatedAt).toLocaleDateString()," at"," ",new Date(M.updatedAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-xs text-gray-600 mt-1",children:[M.messages.length," messages"]})]}),e.jsx("button",{onClick:ie=>V(M.sessionId,ie),className:"p-2 text-red-500 hover:text-red-700 active:bg-red-100 rounded-lg transition-colors",children:e.jsx(nr,{className:"w-4 h-4"})})]})},M.id))})]}),e.jsxs("div",{className:"flex-1 flex flex-col bg-white lg:rounded-lg shadow-lg min-h-0",children:[e.jsx("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-500 to-blue-600 flex-shrink-0 lg:rounded-t-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white rounded-full flex items-center justify-center",children:e.jsx(Sa,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:"Cindy"}),e.jsx("p",{className:"text-xs text-blue-100 hidden sm:block",children:"Your AI Client Manager"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>v(!b),className:"lg:hidden p-2.5 hover:bg-blue-600 active:bg-blue-700 rounded-lg transition-colors",title:"View Info",children:e.jsx(Sa,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>f(!x),className:"p-2.5 hover:bg-blue-600 active:bg-blue-700 rounded-lg transition-colors",title:"Chat History",children:e.jsx(dy,{className:"w-5 h-5"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[o.map(M=>e.jsxs("div",{className:`flex items-start gap-3 ${M.role==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${M.role==="user"?"bg-gray-500 hidden sm:flex":"bg-blue-500"}`,children:M.role==="user"?e.jsx(ns,{className:"w-5 h-5 text-white"}):e.jsx(Sa,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:`flex-1 max-w-[85%] sm:max-w-[80%] px-4 py-3 rounded-xl ${M.role==="user"?"bg-gray-500 text-white ml-auto rounded-tr-sm":"bg-gray-100 text-gray-900 rounded-tl-sm"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap break-words text-[15px] leading-relaxed",children:M.content}),e.jsx("div",{className:`text-xs mt-1.5 ${M.role==="user"?"text-gray-200":"text-gray-500"}`,children:M.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},M.id)),C&&e.jsxs("div",{className:"bg-yellow-50 border-2 border-yellow-300 rounded-xl p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 font-semibold",children:[e.jsx(Ba,{className:"w-5 h-5"}),"Email Draft - Awaiting Approval"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600",children:"To:"}),e.jsx("div",{className:"text-sm text-gray-900",children:C.to})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600",children:"Subject:"}),e.jsx("div",{className:"text-sm text-gray-900",children:C.subject})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600",children:"Message:"}),e.jsx("div",{className:"text-sm text-gray-900 whitespace-pre-wrap bg-white p-3 rounded border border-gray-200",children:C.body})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs("button",{onClick:L,disabled:F,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 active:scale-95 transition-all disabled:opacity-50",children:[e.jsx(un,{className:"w-4 h-4"}),F?"Sending...":"Approve & Send"]}),e.jsxs("button",{onClick:E,disabled:F,className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 active:scale-95 transition-all disabled:opacity-50",children:[e.jsx(Od,{className:"w-4 h-4"}),"Cancel"]})]})]}),m&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(Sa,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-xl",children:e.jsx(hr,{className:"w-5 h-5 animate-spin text-blue-500"})})]}),e.jsx("div",{ref:q})]}),e.jsx("div",{className:"p-3 sm:p-4 border-t border-gray-200 flex-shrink-0 bg-white safe-area-inset-bottom",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:P,type:"text",value:d,onChange:M=>u(M.target.value),onKeyPress:O,placeholder:"Ask Cindy about clients, projects, or calendar...",className:"flex-1 px-4 py-3 text-base border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:m}),e.jsx("button",{onClick:k,disabled:!d.trim()||m,className:"px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 active:scale-95 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all",children:e.jsx(Dc,{className:"w-5 h-5"})})]})})]}),e.jsxs("div",{className:`
        ${b?"fixed inset-0 z-50 lg:relative":"hidden lg:block"}
        lg:w-80 bg-white lg:rounded-lg shadow-lg overflow-hidden
      `,children:[b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 -z-10",onClick:()=>v(!1)}),e.jsxs("div",{className:"h-full overflow-y-auto",children:[e.jsx("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 lg:border-0 lg:static z-10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Info"}),e.jsx("button",{onClick:()=>v(!1),className:"lg:hidden p-2 -mr-2 text-gray-500 hover:text-gray-700 active:bg-gray-100 rounded-lg transition-colors",children:e.jsx(xt,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-4",children:[e.jsx("div",{className:"text-sm text-blue-700 mb-1 font-medium",children:"Active Clients"}),e.jsx("div",{className:"text-2xl font-bold text-blue-900",children:D}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:[t.length," total clients"]})]}),e.jsxs("div",{className:"bg-green-50 rounded-xl border border-green-200 p-4",children:[e.jsx("div",{className:"text-sm text-green-700 mb-1 font-medium",children:"Active Projects"}),e.jsx("div",{className:"text-2xl font-bold text-green-900",children:_}),e.jsxs("div",{className:"text-xs text-green-600 mt-1",children:[r.length," total projects"]})]}),e.jsxs("div",{className:"bg-purple-50 rounded-xl border border-purple-200 p-4",children:[e.jsx("div",{className:"text-sm text-purple-700 mb-1 font-medium",children:"Upcoming Events"}),e.jsx("div",{className:"text-2xl font-bold text-purple-900",children:$}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Next 7 days"})]})]})]})]})]})},yq=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-2 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"hidden md:block mb-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg",children:e.jsx("img",{src:Wb,alt:"Cindy",className:"w-12 h-12"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Cindy"}),e.jsx("p",{className:"text-gray-600",children:"Manage clients and projects through conversation"})]})]})}),e.jsxs("div",{className:"md:hidden mb-2 flex items-center justify-center gap-2 bg-white rounded-lg shadow p-3",children:[e.jsx("img",{src:Wb,alt:"Cindy",className:"w-8 h-8"}),e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Cindy AI"})]}),e.jsx(bq,{}),e.jsx("div",{className:"hidden sm:block mt-4 text-center text-sm text-gray-500",children:" Tip: I can manage clients, track projects, schedule events, and draft customer emails"})]})}),vq=` Hi! I'm Bill, your AI Project Manager. I help coordinate your team, manage projects, and keep everything running smoothly.

I can help you with:
  **Employee Management** - View team, check availability, assign to projects
  **Project Coordination** - Track progress, manage tasks, coordinate teams
  **Scheduling** - Calendar management, event scheduling, availability checks
  **Team Communication** - Draft and send emails to your team (with your approval)

What would you like help with today?

Examples:
 "Show me all active employees"
 "What projects are scheduled for next week?"
 "Assign John to the Johnson Deck project"
 "Send an email to my team about the meeting"`,wq=()=>{const[s,t]=p.useState([{id:"1",role:"assistant",content:vq,timestamp:new Date}]),[r,a]=p.useState(""),[n,i]=p.useState(!1),[o,l]=p.useState(null),d=p.useRef(null),u=p.useRef(null);p.useEffect(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[s]),p.useEffect(()=>{u.current?.focus()},[]);const m=async()=>{if(!r.trim()||n)return;const b={id:Date.now().toString(),role:"user",content:r.trim(),timestamp:new Date};t(v=>[...v,b]),a(""),i(!0);try{const{data:{session:v}}=await _e.auth.getSession();if(!v)throw new Error("No active session");const S=await fetch("https://ujhgwcurllkkeouzwvgk.supabase.co/functions/v1/bill-project-manager",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v.access_token}`},body:JSON.stringify({messages:[...s,b]})});if(!S.ok)throw new Error("API request failed");const C=await S.json(),B={id:(Date.now()+1).toString(),role:"assistant",content:C.message,timestamp:new Date};t(F=>[...F,B]),C.emailDraft&&l(C.emailDraft)}catch(v){console.error("Chat error:",v);const j={id:(Date.now()+1).toString(),role:"assistant",content:"I'm having trouble connecting right now. Please try again in a moment.",timestamp:new Date};t(S=>[...S,j])}finally{i(!1),u.current?.focus()}},h=async()=>{if(o){i(!0);try{const{data:{session:b}}=await _e.auth.getSession();if(!b)throw new Error("No active session");if(!(await fetch("https://ujhgwcurllkkeouzwvgk.supabase.co/functions/v1/send-employee-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b.access_token}`},body:JSON.stringify(o)})).ok)throw new Error("Email send failed");const S={id:Date.now().toString(),role:"assistant",content:` Email sent successfully to: ${o.to.join(", ")}`,timestamp:new Date};t(C=>[...C,S]),l(null)}catch(b){console.error("Email error:",b);const v={id:Date.now().toString(),role:"assistant",content:"Failed to send email. Please try again or contact support.",timestamp:new Date};t(j=>[...j,v])}finally{i(!1)}}},x=()=>{l(null);const b={id:Date.now().toString(),role:"assistant",content:"Email cancelled. How else can I help?",timestamp:new Date};t(v=>[...v,b])},f=b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),m())};return e.jsx("div",{className:"flex flex-col h-[calc(100vh-120px)] sm:h-[calc(100vh-200px)] max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex-1 flex flex-col bg-white rounded-lg shadow-lg min-h-0",children:[e.jsx("div",{className:"p-3 sm:p-4 border-b border-gray-200 bg-gradient-to-r from-purple-500 to-purple-600 flex-shrink-0",children:e.jsxs("div",{className:"flex items-center justify-between text-white",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[e.jsx("img",{src:Eg,alt:"Bill",className:"w-6 h-6 sm:w-8 sm:h-8"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-base sm:text-lg font-bold",children:"Bill"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-purple-100 hidden sm:block",children:"Your AI Project Manager"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs",children:[e.jsx(Sa,{className:"w-4 h-4"}),e.jsx(Fr,{className:"w-4 h-4"}),e.jsx(ny,{className:"w-4 h-4"})]})})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-2 sm:p-4 space-y-3 sm:space-y-4",children:[s.map(b=>e.jsxs("div",{className:`flex items-start gap-3 ${b.role==="user"?"flex-row-reverse":""}`,children:[e.jsx("div",{className:`flex-shrink-0 w-7 h-7 sm:w-8 sm:h-8 rounded-full flex items-center justify-center ${b.role==="user"?"bg-blue-500 hidden sm:flex":"bg-purple-500"}`,children:b.role==="user"?e.jsx(ns,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"}):e.jsx("img",{src:Eg,alt:"Bill",className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:`flex-1 sm:max-w-[80%] px-3 py-2 sm:px-4 sm:py-3 rounded-lg ${b.role==="user"?"bg-blue-500 text-white ml-auto":"bg-gray-100 text-gray-900"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap break-words text-sm sm:text-base",children:b.content}),e.jsx("div",{className:`text-[10px] sm:text-xs mt-1 ${b.role==="user"?"text-blue-100":"text-gray-500"}`,children:b.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},b.id)),n&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-500 flex items-center justify-center",children:e.jsx("img",{src:Eg,alt:"Bill",className:"w-6 h-6"})}),e.jsx("div",{className:"bg-gray-100 px-4 py-3 rounded-lg",children:e.jsx(hr,{className:"w-5 h-5 animate-spin text-purple-500"})})]}),e.jsx("div",{ref:d})]}),o&&e.jsx("div",{className:"border-t border-gray-200 bg-yellow-50 p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ba,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Email Approval Required"}),e.jsxs("div",{className:"text-sm space-y-1 mb-3",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"To:"})," ",o.to.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Subject:"})," ",o.subject]}),e.jsx("p",{className:"text-gray-600 mt-2",children:o.body})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:h,disabled:n,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-300 transition-colors text-sm font-medium",children:" Send Email"}),e.jsx("button",{onClick:x,disabled:n,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:bg-gray-300 transition-colors text-sm font-medium",children:" Cancel"})]})]})]})}),e.jsx("div",{className:"p-2 sm:p-4 border-t border-gray-200 flex-shrink-0",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:u,type:"text",value:r,onChange:b=>a(b.target.value),onKeyPress:f,placeholder:"Ask me about employees, projects, or scheduling...",className:"flex-1 px-3 py-2 sm:px-4 text-sm sm:text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",disabled:n}),e.jsx("button",{onClick:m,disabled:!r.trim()||n,className:"px-3 sm:px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:e.jsx(Dc,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]})})]})})},jq=()=>{const{user:s}=ka(),[t,r]=p.useState({employees:0,projects:0,eventsThisWeek:0}),[a,n]=p.useState(!0);p.useEffect(()=>{s&&i()},[s]);const i=async()=>{try{n(!0);const{count:o}=await _e.from("employees").select("*",{count:"exact",head:!0}).eq("user_id",s.id).eq("status","active"),{count:l}=await _e.from("projects").select("*",{count:"exact",head:!0}).eq("user_id",s.id).eq("status","active"),d=new Date,u=new Date(d);u.setDate(d.getDate()-d.getDay());const m=new Date(d);m.setDate(d.getDate()+(6-d.getDay()));const{count:h}=await _e.from("calendar_events").select("*",{count:"exact",head:!0}).eq("user_id",s.id).gte("start_date",u.toISOString()).lte("start_date",m.toISOString());r({employees:o||0,projects:l||0,eventsThisWeek:h||0})}catch(o){console.error("Error fetching stats:",o)}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Bill - AI Project Manager"}),e.jsx("p",{className:"text-gray-600",children:"Manage your team, coordinate projects, and stay organized"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Employees"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a?"...":t.employees})]}),e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:""})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Projects"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a?"...":t.projects})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:""})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"This Week"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a?"...":t.eventsThisWeek})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:""})]})})]}),e.jsx(wq,{}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"What Bill Can Do"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:" View and manage your employee roster"}),e.jsx("li",{children:" Track project progress and timelines"}),e.jsx("li",{children:" Schedule events and check availability"}),e.jsx("li",{children:" Draft emails to your team (with approval)"}),e.jsx("li",{children:" Assign employees to projects"}),e.jsx("li",{children:" Coordinate multiple projects simultaneously"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Try These Commands"}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("li",{children:' "Show me all active employees"'}),e.jsx("li",{children:' "What projects are scheduled for next week?"'}),e.jsx("li",{children:` "Check John's availability on Friday"`}),e.jsx("li",{children:' "Send an email to my team about the meeting"'}),e.jsx("li",{children:' "Create a calendar event for the site visit"'}),e.jsx("li",{children:' "Assign Mike to the Johnson project"'})]})]})]})]})})},Nq=p.createContext(void 0);function Cq({children:s}){const[t,r]=p.useState([]),[a,n]=p.useState(null),i=d=>{r(u=>[...u,d])},o=d=>{r(u=>u.map(m=>m.id===d.id?d:m))},l=d=>{r(u=>u.filter(m=>m.id!==d)),a?.id===d&&n(null)};return e.jsx(Nq.Provider,{value:{projects:t,currentProject:a,setCurrentProject:n,addProject:i,updateProject:o,deleteProject:l},children:s})}const Sq=()=>{const s=p.useRef(!1),[t,r]=p.useState(!1),[a,n]=p.useState(null),i=iC(),o=ka(l=>l.user);return p.useEffect(()=>{if(s.current){t||r(!0);return}if(!o){t||(r(!0),s.current=!0);return}let l=!0;return(async()=>{try{console.log(" Loading essential data...");const u=[i.prefetchQuery({queryKey:pc.projects,queryFn:async()=>{const{data:m,error:h}=await _e.from("projects").select("*").eq("user_id",o.id).order("created_at",{ascending:!1});if(h)throw h;return console.log("   Projects loaded"),m||[]}}),i.prefetchQuery({queryKey:pc.clients,queryFn:async()=>{const{data:m,error:h}=await _e.from("clients").select("*").eq("user_id",o.id).order("created_at",{ascending:!1});if(h)throw h;return console.log("   Clients loaded"),m||[]}})];await Promise.all(u),l&&(console.log(" Essential data loaded - app ready!"),console.log("   Other data will load on-demand when you visit each page"),s.current=!0,r(!0),setTimeout(()=>{console.log(" Background loading additional data..."),i.prefetchQuery({queryKey:pc.estimates,queryFn:async()=>{const{data:m}=await _e.from("estimates").select("*").eq("user_id",o.id).order("created_at",{ascending:!1});return m||[]}}).catch(()=>{}),i.prefetchQuery({queryKey:pc.invoices,queryFn:async()=>{const{data:m}=await _e.from("invoices").select("*").eq("user_id",o.id).order("created_at",{ascending:!1});return m||[]}}).catch(()=>{})},2e3))}catch(u){console.error(" Error loading data:",u),l&&(n(u instanceof Error?u.message:"Failed to load data"),s.current=!0,r(!0))}})(),()=>{l=!1}},[o,i]),{isInitialized:t,initError:a}};function Bq(){const[s,t]=p.useState(!1),{user:r,initialized:a}=ka(),{isInitialized:n,initError:i}=Sq(),[o,l]=p.useState(null),[d,u]=p.useState(!0);return p.useEffect(()=>{(async()=>{if(!r){u(!1);return}try{console.log("[Subscription Check] Checking subscription for user:",r.id);const h=xA.getPlatform();if(h==="ios"){console.log("[Subscription Check] Using RevenueCat for iOS"),await mc.initialize(r.id);const x=await mc.hasActiveSubscription();console.log("[Subscription Check] RevenueCat subscription status:",x),l(x),u(!1)}else{console.log("[Subscription Check] Using Stripe for",h);const{data:x,error:f}=await _e.from("stripe_customers").select("customer_id").eq("user_id",r.id).single();if(console.log("[Subscription Check] Customer data:",x),f||!x?.customer_id){console.log("[Subscription Check] No customer found, showing paywall"),l(!1),u(!1);return}const{data:b,error:v}=await _e.from("stripe_subscriptions").select("*").eq("customer_id",x.customer_id).eq("status","active").single();console.log("[Subscription Check] Subscription data:",b),v||!b?(console.log("[Subscription Check] No active subscription, showing paywall"),l(!1)):(console.log("[Subscription Check] Active subscription found:",b.id),l(!0)),u(!1)}}catch(h){console.error("[Subscription Check] Error:",h),l(!1),u(!1)}})()},[r]),!a||r&&!n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center max-w-md px-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 text-lg mb-2",children:a?"Loading your data...":"Checking authentication..."}),i&&e.jsxs("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("p",{className:"text-red-700 text-sm font-medium",children:["Error: ",i]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-3 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors text-sm",children:"Reload Page"})]}),!a&&e.jsxs("p",{className:"text-gray-500 text-sm mt-4",children:["If this takes more than 10 seconds, please check your internet connection or"," ",e.jsx("button",{onClick:()=>window.location.reload(),className:"text-blue-600 hover:underline",children:"reload the page"})]})]})}):r?d?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Checking subscription..."})]})}):o===!1?e.jsxs(x0,{children:[e.jsx(Ot,{path:"/subscriptions",element:e.jsx(HO,{})}),e.jsx(Ot,{path:"*",element:e.jsx(p0,{to:"/subscriptions",replace:!0})})]}):e.jsx(CP,{children:e.jsx(vU,{children:e.jsx(hU,{children:e.jsx(Cq,{children:e.jsxs("div",{className:"flex h-screen bg-gray-50 w-screen max-w-full overflow-x-hidden",children:[e.jsx(BP,{sidebarOpen:s,setSidebarOpen:t}),e.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden min-w-0",children:[e.jsx(SP,{sidebarOpen:s,setSidebarOpen:t}),e.jsx("main",{className:"flex-1 overflow-y-auto overflow-x-hidden pt-8 px-4 sm:px-6 lg:px-8 pb-8 w-full",children:e.jsxs(x0,{children:[e.jsx(Ot,{path:"/",element:e.jsx(dU,{})}),e.jsx(Ot,{path:"/pricing",element:e.jsx(JU,{})}),e.jsx(Ot,{path:"/pricing/configure/deck",element:e.jsx(eH,{})}),e.jsx(Ot,{path:"/pricing/configure/roofing",element:e.jsx(oH,{})}),e.jsx(Ot,{path:"/pricing/configure/concrete",element:e.jsx(lH,{})}),e.jsx(Ot,{path:"/pricing/configure/siding",element:e.jsx(dH,{})}),e.jsx(Ot,{path:"/pricing/configure/paint",element:e.jsx(AH,{})}),e.jsx(Ot,{path:"/pricing/configure/flooring",element:e.jsx(mH,{})}),e.jsx(Ot,{path:"/pricing/configure/tile",element:e.jsx(hH,{})}),e.jsx(Ot,{path:"/pricing/configure/drywall",element:e.jsx(fH,{})}),e.jsx(Ot,{path:"/pricing/configure/fencing",element:e.jsx(gH,{})}),e.jsx(Ot,{path:"/pricing/configure/pavers",element:e.jsx(pH,{})}),e.jsx(Ot,{path:"/pricing/configure/veneer",element:e.jsx(xH,{})}),e.jsx(Ot,{path:"/pricing/configure/hvac",element:e.jsx(bH,{})}),e.jsx(Ot,{path:"/pricing/configure/electrical",element:e.jsx(yH,{})}),e.jsx(Ot,{path:"/pricing/configure/gutter",element:e.jsx(vH,{})}),e.jsx(Ot,{path:"/pricing/configure/foundation",element:e.jsx(wH,{})}),e.jsx(Ot,{path:"/pricing/configure/retaining-wall",element:e.jsx(jH,{})}),e.jsx(Ot,{path:"/pricing/configure/doors-windows",element:e.jsx(NH,{})}),e.jsx(Ot,{path:"/pricing/configure/plumbing",element:e.jsx(CH,{})}),e.jsx(Ot,{path:"/pricing/configure/framing",element:e.jsx(SH,{})}),e.jsx(Ot,{path:"/pricing/configure/junk-removal",element:e.jsx(BH,{})}),e.jsx(Ot,{path:"/pricing/configure/excavation",element:e.jsx(kH,{})}),e.jsx(Ot,{path:"/calculator-widgets",element:e.jsx(XU,{})}),e.jsx(Ot,{path:"/ai-team",element:e.jsx(_H,{})}),e.jsx(Ot,{path:"/ai-calculator",element:e.jsx(EH,{})}),e.jsx(Ot,{path:"/saul-finance",element:e.jsx(pq,{})}),e.jsx(Ot,{path:"/cindy-crm",element:e.jsx(yq,{})}),e.jsx(Ot,{path:"/bill-project-manager",element:e.jsx(jq,{})}),e.jsx(Ot,{path:"/finance",element:e.jsx(AL,{})}),e.jsx(Ot,{path:"/estimates",element:e.jsx(QQ,{})}),e.jsx(Ot,{path:"/projects",element:e.jsx(KQ,{})}),e.jsx(Ot,{path:"/clients",element:e.jsx(mO,{})}),e.jsx(Ot,{path:"/employees",element:e.jsx(hO,{})}),e.jsx(Ot,{path:"/calendar",element:e.jsx(ZQ,{})}),e.jsx(Ot,{path:"/ad-analyzer",element:e.jsx(iO,{})}),e.jsx(Ot,{path:"/ad-accounts",element:e.jsx(wO,{})}),e.jsx(Ot,{path:"/ad-oauth-callback",element:e.jsx(jO,{})}),e.jsx(Ot,{path:"/meta-oauth-callback",element:e.jsx(NO,{})}),e.jsx(Ot,{path:"/gmail-oauth-callback",element:e.jsx(BO,{})}),e.jsx(Ot,{path:"/analytics",element:e.jsx(FO,{})}),e.jsx(Ot,{path:"/settings",element:e.jsx(dO,{})}),e.jsx(Ot,{path:"/reset-password",element:e.jsx(qO,{})}),e.jsx(Ot,{path:"*",element:e.jsx(p0,{to:"/",replace:!0})})]})})]})]})})})})}):e.jsxs(x0,{children:[e.jsx(Ot,{path:"/auth/login",element:e.jsx($O,{})}),e.jsx(Ot,{path:"/auth/signup",element:e.jsx(WO,{})}),e.jsx(Ot,{path:"/auth/confirm-email",element:e.jsx(KO,{})}),e.jsx(Ot,{path:"/auth/callback",element:e.jsx(zO,{})}),e.jsx(Ot,{path:"/legal/terms",element:e.jsx(GO,{})}),e.jsx(Ot,{path:"/legal/privacy",element:e.jsx(VO,{})}),e.jsx(Ot,{path:"*",element:e.jsx(p0,{to:"/auth/login",replace:!0})})]})}w3.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(Gk,{client:sy,children:e.jsx(yk,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsx(Bq,{})})})}));export{nN as P,tN as R,aN as V,fB as W,Rr as _,lN as a,kq as c,Gb as g};
