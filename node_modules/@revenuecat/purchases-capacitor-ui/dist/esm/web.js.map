{"version":3,"file":"web.js","sourceRoot":"","sources":["../../src/web.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,SAAS,EAAE,MAAM,iBAAiB,CAAC;AAE5C,OAAO,EAAE,cAAc,EAAE,MAAM,+CAA+C,CAAC;AAS/E,MAAM,OAAO,eAAgB,SAAQ,SAAS;IAI5C;QACE,KAAK,EAAE,CAAC;QAJF,yBAAoB,GAAG,KAAK,CAAC;QAC7B,gCAA2B,GAAG,iDAAiD,CAAC;IAIxF,CAAC;IAED,KAAK,CAAC,iBAAiB,CAAC,OAA0C;QAChE,IAAI,CAAC,oBAAoB,GAAG,OAAO,CAAC,oBAAoB,CAAC;QACzD,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,OAA+B;QAClD,OAAO,IAAI,CAAC,8BAA8B,CACxC,gBAAgB,EAChB;YACE,MAAM,EAAE,cAAc,CAAC,aAAa;SACrC,EACD,OAAO,CACR,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,sBAAsB,CAAC,OAAsC;QACjE,OAAO,IAAI,CAAC,8BAA8B,CACxC,wBAAwB,EACxB;YACE,MAAM,EAAE,cAAc,CAAC,aAAa;SACrC,EACD,OAAO,CACR,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,qBAAqB;QACzB,OAAO,IAAI,CAAC,iCAAiC,CAAC,uBAAuB,CAAC,CAAC;IACzE,CAAC;IAED,WAAW,CAAC,SAAiB,EAAE,QAAkC;QAC/D,IAAI,SAAS,KAAK,kBAAkB,IAAI,SAAS,KAAK,kBAAkB,EAAE,CAAC;YACzE,OAAO,CAAC,IAAI,CAAC,sBAAsB,SAAS,EAAE,CAAC,CAAC;QAClD,CAAC;QACD,OAAO,KAAK,CAAC,WAAW,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;IAChD,CAAC;IAED,kBAAkB;QAChB,OAAO,KAAK,CAAC,kBAAkB,EAAE,CAAC;IACpC,CAAC;IAEO,iCAAiC,CAAC,YAAoB;QAC5D,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC/B,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAC1D,CAAC;QACD,OAAO,CAAC,GAAG,CAAC,GAAG,YAAY,4CAA4C,CAAC,CAAC;QACzE,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC3B,CAAC;IAEO,8BAA8B,CAAI,YAAoB,EAAE,WAAc,EAAE,OAAa;QAC3F,IAAI,CAAC,IAAI,CAAC,oBAAoB,EAAE,CAAC;YAC/B,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC;QAC1D,CAAC;QACD,OAAO,CAAC,GAAG,CAAC,GAAG,YAAY,6DAA6D,EAAE,OAAO,CAAC,CAAC;QACnG,OAAO,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;IACtC,CAAC;CACF","sourcesContent":["import { WebPlugin } from '@capacitor/core';\nimport type { PluginListenerHandle } from '@capacitor/core';\nimport { PAYWALL_RESULT } from '@revenuecat/purchases-typescript-internal-esm';\n\nimport type {\n  PaywallResult,\n  PresentPaywallIfNeededOptions,\n  PresentPaywallOptions,\n  RevenueCatUIPlugin,\n} from './definitions';\n\nexport class RevenueCatUIWeb extends WebPlugin implements RevenueCatUIPlugin {\n  private shouldMockWebResults = false;\n  private webNotSupportedErrorMessage = 'RevenueCatUI is not supported on web platforms.';\n\n  constructor() {\n    super();\n  }\n\n  async setMockWebResults(options: { shouldMockWebResults: boolean }): Promise<void> {\n    this.shouldMockWebResults = options.shouldMockWebResults;\n    return Promise.resolve();\n  }\n\n  async presentPaywall(options?: PresentPaywallOptions): Promise<PaywallResult> {\n    return this.mockReturningFunctionIfEnabled(\n      'presentPaywall',\n      {\n        result: PAYWALL_RESULT.NOT_PRESENTED,\n      },\n      options,\n    );\n  }\n\n  async presentPaywallIfNeeded(options: PresentPaywallIfNeededOptions): Promise<PaywallResult> {\n    return this.mockReturningFunctionIfEnabled(\n      'presentPaywallIfNeeded',\n      {\n        result: PAYWALL_RESULT.NOT_PRESENTED,\n      },\n      options,\n    );\n  }\n\n  async presentCustomerCenter(): Promise<void> {\n    return this.mockNonReturningFunctionIfEnabled('presentCustomerCenter');\n  }\n\n  addListener(eventName: string, listener: (...args: any[]) => void): Promise<PluginListenerHandle> {\n    if (eventName !== 'paywallDisplayed' && eventName !== 'paywallDismissed') {\n      console.warn(`Unsupported event: ${eventName}`);\n    }\n    return super.addListener(eventName, listener);\n  }\n\n  removeAllListeners(): Promise<void> {\n    return super.removeAllListeners();\n  }\n\n  private mockNonReturningFunctionIfEnabled(functionName: string): Promise<void> {\n    if (!this.shouldMockWebResults) {\n      return Promise.reject(this.webNotSupportedErrorMessage);\n    }\n    console.log(`${functionName} called on web with mocking enabled. No-op`);\n    return Promise.resolve();\n  }\n\n  private mockReturningFunctionIfEnabled<T>(functionName: string, returnValue: T, options?: any): Promise<T> {\n    if (!this.shouldMockWebResults) {\n      return Promise.reject(this.webNotSupportedErrorMessage);\n    }\n    console.log(`${functionName} called on web with mocking enabled. Returning mocked value`, options);\n    return Promise.resolve(returnValue);\n  }\n}\n"]}